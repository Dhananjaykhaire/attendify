var DG=Object.defineProperty;var $G=(t,e,n)=>e in t?DG(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var dt=(t,e,n)=>$G(t,typeof e!="symbol"?e+"":e,n);function gk(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const o=Object.getOwnPropertyDescriptor(r,s);o&&Object.defineProperty(t,s,o.get?o:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();var Gn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function mp(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function OG(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var s=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return t[r]}})}),n}var mM={exports:{}},vw={},gM={exports:{}},rn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var x0=Symbol.for("react.element"),_G=Symbol.for("react.portal"),PG=Symbol.for("react.fragment"),FG=Symbol.for("react.strict_mode"),MG=Symbol.for("react.profiler"),LG=Symbol.for("react.provider"),BG=Symbol.for("react.context"),jG=Symbol.for("react.forward_ref"),zG=Symbol.for("react.suspense"),VG=Symbol.for("react.memo"),WG=Symbol.for("react.lazy"),A$=Symbol.iterator;function UG(t){return t===null||typeof t!="object"?null:(t=A$&&t[A$]||t["@@iterator"],typeof t=="function"?t:null)}var xM={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},yM=Object.assign,bM={};function gp(t,e,n){this.props=t,this.context=e,this.refs=bM,this.updater=n||xM}gp.prototype.isReactComponent={};gp.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};gp.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function wM(){}wM.prototype=gp.prototype;function xk(t,e,n){this.props=t,this.context=e,this.refs=bM,this.updater=n||xM}var yk=xk.prototype=new wM;yk.constructor=xk;yM(yk,gp.prototype);yk.isPureReactComponent=!0;var R$=Array.isArray,vM=Object.prototype.hasOwnProperty,bk={current:null},CM={key:!0,ref:!0,__self:!0,__source:!0};function SM(t,e,n){var r,s={},o=null,i=null;if(e!=null)for(r in e.ref!==void 0&&(i=e.ref),e.key!==void 0&&(o=""+e.key),e)vM.call(e,r)&&!CM.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];s.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:x0,type:t,key:o,ref:i,props:s,_owner:bk.current}}function HG(t,e){return{$$typeof:x0,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function wk(t){return typeof t=="object"&&t!==null&&t.$$typeof===x0}function GG(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var D$=/\/+/g;function aS(t,e){return typeof t=="object"&&t!==null&&t.key!=null?GG(""+t.key):e.toString(36)}function gy(t,e,n,r,s){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var i=!1;if(t===null)i=!0;else switch(o){case"string":case"number":i=!0;break;case"object":switch(t.$$typeof){case x0:case _G:i=!0}}if(i)return i=t,s=s(i),t=r===""?"."+aS(i,0):r,R$(s)?(n="",t!=null&&(n=t.replace(D$,"$&/")+"/"),gy(s,e,n,"",function(c){return c})):s!=null&&(wk(s)&&(s=HG(s,n+(!s.key||i&&i.key===s.key?"":(""+s.key).replace(D$,"$&/")+"/")+t)),e.push(s)),1;if(i=0,r=r===""?".":r+":",R$(t))for(var a=0;a<t.length;a++){o=t[a];var l=r+aS(o,a);i+=gy(o,e,n,l,s)}else if(l=UG(t),typeof l=="function")for(t=l.call(t),a=0;!(o=t.next()).done;)o=o.value,l=r+aS(o,a++),i+=gy(o,e,n,l,s);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return i}function wx(t,e,n){if(t==null)return t;var r=[],s=0;return gy(t,r,"","",function(o){return e.call(n,o,s++)}),r}function qG(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var vo={current:null},xy={transition:null},XG={ReactCurrentDispatcher:vo,ReactCurrentBatchConfig:xy,ReactCurrentOwner:bk};function NM(){throw Error("act(...) is not supported in production builds of React.")}rn.Children={map:wx,forEach:function(t,e,n){wx(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return wx(t,function(){e++}),e},toArray:function(t){return wx(t,function(e){return e})||[]},only:function(t){if(!wk(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};rn.Component=gp;rn.Fragment=PG;rn.Profiler=MG;rn.PureComponent=xk;rn.StrictMode=FG;rn.Suspense=zG;rn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=XG;rn.act=NM;rn.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=yM({},t.props),s=t.key,o=t.ref,i=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,i=bk.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)vM.call(e,l)&&!CM.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:x0,type:t.type,key:s,ref:o,props:r,_owner:i}};rn.createContext=function(t){return t={$$typeof:BG,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:LG,_context:t},t.Consumer=t};rn.createElement=SM;rn.createFactory=function(t){var e=SM.bind(null,t);return e.type=t,e};rn.createRef=function(){return{current:null}};rn.forwardRef=function(t){return{$$typeof:jG,render:t}};rn.isValidElement=wk;rn.lazy=function(t){return{$$typeof:WG,_payload:{_status:-1,_result:t},_init:qG}};rn.memo=function(t,e){return{$$typeof:VG,type:t,compare:e===void 0?null:e}};rn.startTransition=function(t){var e=xy.transition;xy.transition={};try{t()}finally{xy.transition=e}};rn.unstable_act=NM;rn.useCallback=function(t,e){return vo.current.useCallback(t,e)};rn.useContext=function(t){return vo.current.useContext(t)};rn.useDebugValue=function(){};rn.useDeferredValue=function(t){return vo.current.useDeferredValue(t)};rn.useEffect=function(t,e){return vo.current.useEffect(t,e)};rn.useId=function(){return vo.current.useId()};rn.useImperativeHandle=function(t,e,n){return vo.current.useImperativeHandle(t,e,n)};rn.useInsertionEffect=function(t,e){return vo.current.useInsertionEffect(t,e)};rn.useLayoutEffect=function(t,e){return vo.current.useLayoutEffect(t,e)};rn.useMemo=function(t,e){return vo.current.useMemo(t,e)};rn.useReducer=function(t,e,n){return vo.current.useReducer(t,e,n)};rn.useRef=function(t){return vo.current.useRef(t)};rn.useState=function(t){return vo.current.useState(t)};rn.useSyncExternalStore=function(t,e,n){return vo.current.useSyncExternalStore(t,e,n)};rn.useTransition=function(){return vo.current.useTransition()};rn.version="18.3.1";gM.exports=rn;var A=gM.exports;const At=mp(A),Sl=gk({__proto__:null,default:At},[A]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var KG=A,YG=Symbol.for("react.element"),ZG=Symbol.for("react.fragment"),QG=Object.prototype.hasOwnProperty,JG=KG.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,eq={key:!0,ref:!0,__self:!0,__source:!0};function EM(t,e,n){var r,s={},o=null,i=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(i=e.ref);for(r in e)QG.call(e,r)&&!eq.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:YG,type:t,key:o,ref:i,props:s,_owner:JG.current}}vw.Fragment=ZG;vw.jsx=EM;vw.jsxs=EM;mM.exports=vw;var S=mM.exports,IM={exports:{}},wi={},kM={exports:{}},TM={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(J,X){var ee=J.length;J.push(X);e:for(;0<ee;){var ne=ee-1>>>1,oe=J[ne];if(0<s(oe,X))J[ne]=X,J[ee]=oe,ee=ne;else break e}}function n(J){return J.length===0?null:J[0]}function r(J){if(J.length===0)return null;var X=J[0],ee=J.pop();if(ee!==X){J[0]=ee;e:for(var ne=0,oe=J.length,ye=oe>>>1;ne<ye;){var ge=2*(ne+1)-1,ve=J[ge],he=ge+1,Me=J[he];if(0>s(ve,ee))he<oe&&0>s(Me,ve)?(J[ne]=Me,J[he]=ee,ne=he):(J[ne]=ve,J[ge]=ee,ne=ge);else if(he<oe&&0>s(Me,ee))J[ne]=Me,J[he]=ee,ne=he;else break e}}return X}function s(J,X){var ee=J.sortIndex-X.sortIndex;return ee!==0?ee:J.id-X.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var i=Date,a=i.now();t.unstable_now=function(){return i.now()-a}}var l=[],c=[],d=1,f=null,p=3,g=!1,x=!1,b=!1,w=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,N=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function k(J){for(var X=n(c);X!==null;){if(X.callback===null)r(c);else if(X.startTime<=J)r(c),X.sortIndex=X.expirationTime,e(l,X);else break;X=n(c)}}function I(J){if(b=!1,k(J),!x)if(n(l)!==null)x=!0,G(R);else{var X=n(c);X!==null&&Z(I,X.startTime-J)}}function R(J,X){x=!1,b&&(b=!1,C(F),F=-1),g=!0;var ee=p;try{for(k(X),f=n(l);f!==null&&(!(f.expirationTime>X)||J&&!V());){var ne=f.callback;if(typeof ne=="function"){f.callback=null,p=f.priorityLevel;var oe=ne(f.expirationTime<=X);X=t.unstable_now(),typeof oe=="function"?f.callback=oe:f===n(l)&&r(l),k(X)}else r(l);f=n(l)}if(f!==null)var ye=!0;else{var ge=n(c);ge!==null&&Z(I,ge.startTime-X),ye=!1}return ye}finally{f=null,p=ee,g=!1}}var $=!1,O=null,F=-1,M=5,_=-1;function V(){return!(t.unstable_now()-_<M)}function B(){if(O!==null){var J=t.unstable_now();_=J;var X=!0;try{X=O(!0,J)}finally{X?W():($=!1,O=null)}}else $=!1}var W;if(typeof N=="function")W=function(){N(B)};else if(typeof MessageChannel<"u"){var q=new MessageChannel,j=q.port2;q.port1.onmessage=B,W=function(){j.postMessage(null)}}else W=function(){w(B,0)};function G(J){O=J,$||($=!0,W())}function Z(J,X){F=w(function(){J(t.unstable_now())},X)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(J){J.callback=null},t.unstable_continueExecution=function(){x||g||(x=!0,G(R))},t.unstable_forceFrameRate=function(J){0>J||125<J?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<J?Math.floor(1e3/J):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(J){switch(p){case 1:case 2:case 3:var X=3;break;default:X=p}var ee=p;p=X;try{return J()}finally{p=ee}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(J,X){switch(J){case 1:case 2:case 3:case 4:case 5:break;default:J=3}var ee=p;p=J;try{return X()}finally{p=ee}},t.unstable_scheduleCallback=function(J,X,ee){var ne=t.unstable_now();switch(typeof ee=="object"&&ee!==null?(ee=ee.delay,ee=typeof ee=="number"&&0<ee?ne+ee:ne):ee=ne,J){case 1:var oe=-1;break;case 2:oe=250;break;case 5:oe=1073741823;break;case 4:oe=1e4;break;default:oe=5e3}return oe=ee+oe,J={id:d++,callback:X,priorityLevel:J,startTime:ee,expirationTime:oe,sortIndex:-1},ee>ne?(J.sortIndex=ee,e(c,J),n(l)===null&&J===n(c)&&(b?(C(F),F=-1):b=!0,Z(I,ee-ne))):(J.sortIndex=oe,e(l,J),x||g||(x=!0,G(R))),J},t.unstable_shouldYield=V,t.unstable_wrapCallback=function(J){var X=p;return function(){var ee=p;p=X;try{return J.apply(this,arguments)}finally{p=ee}}}})(TM);kM.exports=TM;var tq=kM.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nq=A,gi=tq;function Ye(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var AM=new Set,Sg={};function rf(t,e){Mh(t,e),Mh(t+"Capture",e)}function Mh(t,e){for(Sg[t]=e,t=0;t<e.length;t++)AM.add(e[t])}var Jl=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),IN=Object.prototype.hasOwnProperty,rq=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,$$={},O$={};function sq(t){return IN.call(O$,t)?!0:IN.call($$,t)?!1:rq.test(t)?O$[t]=!0:($$[t]=!0,!1)}function oq(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function iq(t,e,n,r){if(e===null||typeof e>"u"||oq(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Co(t,e,n,r,s,o,i){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=i}var zs={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){zs[t]=new Co(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];zs[e]=new Co(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){zs[t]=new Co(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){zs[t]=new Co(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){zs[t]=new Co(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){zs[t]=new Co(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){zs[t]=new Co(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){zs[t]=new Co(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){zs[t]=new Co(t,5,!1,t.toLowerCase(),null,!1,!1)});var vk=/[\-:]([a-z])/g;function Ck(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(vk,Ck);zs[e]=new Co(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(vk,Ck);zs[e]=new Co(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(vk,Ck);zs[e]=new Co(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){zs[t]=new Co(t,1,!1,t.toLowerCase(),null,!1,!1)});zs.xlinkHref=new Co("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){zs[t]=new Co(t,1,!1,t.toLowerCase(),null,!0,!0)});function Sk(t,e,n,r){var s=zs.hasOwnProperty(e)?zs[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(iq(e,n,s,r)&&(n=null),r||s===null?sq(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var hc=nq.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,vx=Symbol.for("react.element"),Jf=Symbol.for("react.portal"),eh=Symbol.for("react.fragment"),Nk=Symbol.for("react.strict_mode"),kN=Symbol.for("react.profiler"),RM=Symbol.for("react.provider"),DM=Symbol.for("react.context"),Ek=Symbol.for("react.forward_ref"),TN=Symbol.for("react.suspense"),AN=Symbol.for("react.suspense_list"),Ik=Symbol.for("react.memo"),$c=Symbol.for("react.lazy"),$M=Symbol.for("react.offscreen"),_$=Symbol.iterator;function om(t){return t===null||typeof t!="object"?null:(t=_$&&t[_$]||t["@@iterator"],typeof t=="function"?t:null)}var br=Object.assign,lS;function Lm(t){if(lS===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);lS=e&&e[1]||""}return`
`+lS+t}var cS=!1;function uS(t,e){if(!t||cS)return"";cS=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),o=r.stack.split(`
`),i=s.length-1,a=o.length-1;1<=i&&0<=a&&s[i]!==o[a];)a--;for(;1<=i&&0<=a;i--,a--)if(s[i]!==o[a]){if(i!==1||a!==1)do if(i--,a--,0>a||s[i]!==o[a]){var l=`
`+s[i].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=i&&0<=a);break}}}finally{cS=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Lm(t):""}function aq(t){switch(t.tag){case 5:return Lm(t.type);case 16:return Lm("Lazy");case 13:return Lm("Suspense");case 19:return Lm("SuspenseList");case 0:case 2:case 15:return t=uS(t.type,!1),t;case 11:return t=uS(t.type.render,!1),t;case 1:return t=uS(t.type,!0),t;default:return""}}function RN(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case eh:return"Fragment";case Jf:return"Portal";case kN:return"Profiler";case Nk:return"StrictMode";case TN:return"Suspense";case AN:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case DM:return(t.displayName||"Context")+".Consumer";case RM:return(t._context.displayName||"Context")+".Provider";case Ek:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Ik:return e=t.displayName||null,e!==null?e:RN(t.type)||"Memo";case $c:e=t._payload,t=t._init;try{return RN(t(e))}catch{}}return null}function lq(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return RN(e);case 8:return e===Nk?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function cu(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function OM(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function cq(t){var e=OM(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(i){r=""+i,o.call(this,i)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(i){r=""+i},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Cx(t){t._valueTracker||(t._valueTracker=cq(t))}function _M(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=OM(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Xy(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function DN(t,e){var n=e.checked;return br({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function P$(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=cu(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function PM(t,e){e=e.checked,e!=null&&Sk(t,"checked",e,!1)}function $N(t,e){PM(t,e);var n=cu(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?ON(t,e.type,n):e.hasOwnProperty("defaultValue")&&ON(t,e.type,cu(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function F$(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function ON(t,e,n){(e!=="number"||Xy(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Bm=Array.isArray;function ph(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+cu(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function _N(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Ye(91));return br({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function M$(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Ye(92));if(Bm(n)){if(1<n.length)throw Error(Ye(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:cu(n)}}function FM(t,e){var n=cu(e.value),r=cu(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function L$(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function MM(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function PN(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?MM(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Sx,LM=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Sx=Sx||document.createElement("div"),Sx.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Sx.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Ng(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var eg={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},uq=["Webkit","ms","Moz","O"];Object.keys(eg).forEach(function(t){uq.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),eg[e]=eg[t]})});function BM(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||eg.hasOwnProperty(t)&&eg[t]?(""+e).trim():e+"px"}function jM(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=BM(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var dq=br({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function FN(t,e){if(e){if(dq[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Ye(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Ye(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Ye(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Ye(62))}}function MN(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var LN=null;function kk(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var BN=null,mh=null,gh=null;function B$(t){if(t=w0(t)){if(typeof BN!="function")throw Error(Ye(280));var e=t.stateNode;e&&(e=Iw(e),BN(t.stateNode,t.type,e))}}function zM(t){mh?gh?gh.push(t):gh=[t]:mh=t}function VM(){if(mh){var t=mh,e=gh;if(gh=mh=null,B$(t),e)for(t=0;t<e.length;t++)B$(e[t])}}function WM(t,e){return t(e)}function UM(){}var dS=!1;function HM(t,e,n){if(dS)return t(e,n);dS=!0;try{return WM(t,e,n)}finally{dS=!1,(mh!==null||gh!==null)&&(UM(),VM())}}function Eg(t,e){var n=t.stateNode;if(n===null)return null;var r=Iw(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Ye(231,e,typeof n));return n}var jN=!1;if(Jl)try{var im={};Object.defineProperty(im,"passive",{get:function(){jN=!0}}),window.addEventListener("test",im,im),window.removeEventListener("test",im,im)}catch{jN=!1}function fq(t,e,n,r,s,o,i,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(d){this.onError(d)}}var tg=!1,Ky=null,Yy=!1,zN=null,hq={onError:function(t){tg=!0,Ky=t}};function pq(t,e,n,r,s,o,i,a,l){tg=!1,Ky=null,fq.apply(hq,arguments)}function mq(t,e,n,r,s,o,i,a,l){if(pq.apply(this,arguments),tg){if(tg){var c=Ky;tg=!1,Ky=null}else throw Error(Ye(198));Yy||(Yy=!0,zN=c)}}function sf(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function GM(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function j$(t){if(sf(t)!==t)throw Error(Ye(188))}function gq(t){var e=t.alternate;if(!e){if(e=sf(t),e===null)throw Error(Ye(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var o=s.alternate;if(o===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===o.child){for(o=s.child;o;){if(o===n)return j$(s),t;if(o===r)return j$(s),e;o=o.sibling}throw Error(Ye(188))}if(n.return!==r.return)n=s,r=o;else{for(var i=!1,a=s.child;a;){if(a===n){i=!0,n=s,r=o;break}if(a===r){i=!0,r=s,n=o;break}a=a.sibling}if(!i){for(a=o.child;a;){if(a===n){i=!0,n=o,r=s;break}if(a===r){i=!0,r=o,n=s;break}a=a.sibling}if(!i)throw Error(Ye(189))}}if(n.alternate!==r)throw Error(Ye(190))}if(n.tag!==3)throw Error(Ye(188));return n.stateNode.current===n?t:e}function qM(t){return t=gq(t),t!==null?XM(t):null}function XM(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=XM(t);if(e!==null)return e;t=t.sibling}return null}var KM=gi.unstable_scheduleCallback,z$=gi.unstable_cancelCallback,xq=gi.unstable_shouldYield,yq=gi.unstable_requestPaint,Fr=gi.unstable_now,bq=gi.unstable_getCurrentPriorityLevel,Tk=gi.unstable_ImmediatePriority,YM=gi.unstable_UserBlockingPriority,Zy=gi.unstable_NormalPriority,wq=gi.unstable_LowPriority,ZM=gi.unstable_IdlePriority,Cw=null,pl=null;function vq(t){if(pl&&typeof pl.onCommitFiberRoot=="function")try{pl.onCommitFiberRoot(Cw,t,void 0,(t.current.flags&128)===128)}catch{}}var Ea=Math.clz32?Math.clz32:Nq,Cq=Math.log,Sq=Math.LN2;function Nq(t){return t>>>=0,t===0?32:31-(Cq(t)/Sq|0)|0}var Nx=64,Ex=4194304;function jm(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Qy(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,o=t.pingedLanes,i=n&268435455;if(i!==0){var a=i&~s;a!==0?r=jm(a):(o&=i,o!==0&&(r=jm(o)))}else i=n&~s,i!==0?r=jm(i):o!==0&&(r=jm(o));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,o=e&-e,s>=o||s===16&&(o&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Ea(e),s=1<<n,r|=t[n],e&=~s;return r}function Eq(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Iq(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,o=t.pendingLanes;0<o;){var i=31-Ea(o),a=1<<i,l=s[i];l===-1?(!(a&n)||a&r)&&(s[i]=Eq(a,e)):l<=e&&(t.expiredLanes|=a),o&=~a}}function VN(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function QM(){var t=Nx;return Nx<<=1,!(Nx&4194240)&&(Nx=64),t}function fS(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function y0(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Ea(e),t[e]=n}function kq(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Ea(n),o=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~o}}function Ak(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Ea(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var $n=0;function JM(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var eL,Rk,tL,nL,rL,WN=!1,Ix=[],qc=null,Xc=null,Kc=null,Ig=new Map,kg=new Map,Pc=[],Tq="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function V$(t,e){switch(t){case"focusin":case"focusout":qc=null;break;case"dragenter":case"dragleave":Xc=null;break;case"mouseover":case"mouseout":Kc=null;break;case"pointerover":case"pointerout":Ig.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":kg.delete(e.pointerId)}}function am(t,e,n,r,s,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[s]},e!==null&&(e=w0(e),e!==null&&Rk(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function Aq(t,e,n,r,s){switch(e){case"focusin":return qc=am(qc,t,e,n,r,s),!0;case"dragenter":return Xc=am(Xc,t,e,n,r,s),!0;case"mouseover":return Kc=am(Kc,t,e,n,r,s),!0;case"pointerover":var o=s.pointerId;return Ig.set(o,am(Ig.get(o)||null,t,e,n,r,s)),!0;case"gotpointercapture":return o=s.pointerId,kg.set(o,am(kg.get(o)||null,t,e,n,r,s)),!0}return!1}function sL(t){var e=hd(t.target);if(e!==null){var n=sf(e);if(n!==null){if(e=n.tag,e===13){if(e=GM(n),e!==null){t.blockedOn=e,rL(t.priority,function(){tL(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function yy(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=UN(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);LN=r,n.target.dispatchEvent(r),LN=null}else return e=w0(n),e!==null&&Rk(e),t.blockedOn=n,!1;e.shift()}return!0}function W$(t,e,n){yy(t)&&n.delete(e)}function Rq(){WN=!1,qc!==null&&yy(qc)&&(qc=null),Xc!==null&&yy(Xc)&&(Xc=null),Kc!==null&&yy(Kc)&&(Kc=null),Ig.forEach(W$),kg.forEach(W$)}function lm(t,e){t.blockedOn===e&&(t.blockedOn=null,WN||(WN=!0,gi.unstable_scheduleCallback(gi.unstable_NormalPriority,Rq)))}function Tg(t){function e(s){return lm(s,t)}if(0<Ix.length){lm(Ix[0],t);for(var n=1;n<Ix.length;n++){var r=Ix[n];r.blockedOn===t&&(r.blockedOn=null)}}for(qc!==null&&lm(qc,t),Xc!==null&&lm(Xc,t),Kc!==null&&lm(Kc,t),Ig.forEach(e),kg.forEach(e),n=0;n<Pc.length;n++)r=Pc[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Pc.length&&(n=Pc[0],n.blockedOn===null);)sL(n),n.blockedOn===null&&Pc.shift()}var xh=hc.ReactCurrentBatchConfig,Jy=!0;function Dq(t,e,n,r){var s=$n,o=xh.transition;xh.transition=null;try{$n=1,Dk(t,e,n,r)}finally{$n=s,xh.transition=o}}function $q(t,e,n,r){var s=$n,o=xh.transition;xh.transition=null;try{$n=4,Dk(t,e,n,r)}finally{$n=s,xh.transition=o}}function Dk(t,e,n,r){if(Jy){var s=UN(t,e,n,r);if(s===null)CS(t,e,r,eb,n),V$(t,r);else if(Aq(s,t,e,n,r))r.stopPropagation();else if(V$(t,r),e&4&&-1<Tq.indexOf(t)){for(;s!==null;){var o=w0(s);if(o!==null&&eL(o),o=UN(t,e,n,r),o===null&&CS(t,e,r,eb,n),o===s)break;s=o}s!==null&&r.stopPropagation()}else CS(t,e,r,null,n)}}var eb=null;function UN(t,e,n,r){if(eb=null,t=kk(r),t=hd(t),t!==null)if(e=sf(t),e===null)t=null;else if(n=e.tag,n===13){if(t=GM(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return eb=t,null}function oL(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(bq()){case Tk:return 1;case YM:return 4;case Zy:case wq:return 16;case ZM:return 536870912;default:return 16}default:return 16}}var Bc=null,$k=null,by=null;function iL(){if(by)return by;var t,e=$k,n=e.length,r,s="value"in Bc?Bc.value:Bc.textContent,o=s.length;for(t=0;t<n&&e[t]===s[t];t++);var i=n-t;for(r=1;r<=i&&e[n-r]===s[o-r];r++);return by=s.slice(t,1<r?1-r:void 0)}function wy(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function kx(){return!0}function U$(){return!1}function vi(t){function e(n,r,s,o,i){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=o,this.target=i,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(o):o[a]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?kx:U$,this.isPropagationStopped=U$,this}return br(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=kx)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=kx)},persist:function(){},isPersistent:kx}),e}var xp={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ok=vi(xp),b0=br({},xp,{view:0,detail:0}),Oq=vi(b0),hS,pS,cm,Sw=br({},b0,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:_k,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==cm&&(cm&&t.type==="mousemove"?(hS=t.screenX-cm.screenX,pS=t.screenY-cm.screenY):pS=hS=0,cm=t),hS)},movementY:function(t){return"movementY"in t?t.movementY:pS}}),H$=vi(Sw),_q=br({},Sw,{dataTransfer:0}),Pq=vi(_q),Fq=br({},b0,{relatedTarget:0}),mS=vi(Fq),Mq=br({},xp,{animationName:0,elapsedTime:0,pseudoElement:0}),Lq=vi(Mq),Bq=br({},xp,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),jq=vi(Bq),zq=br({},xp,{data:0}),G$=vi(zq),Vq={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Wq={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Uq={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Hq(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Uq[t])?!!e[t]:!1}function _k(){return Hq}var Gq=br({},b0,{key:function(t){if(t.key){var e=Vq[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=wy(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Wq[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:_k,charCode:function(t){return t.type==="keypress"?wy(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?wy(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),qq=vi(Gq),Xq=br({},Sw,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),q$=vi(Xq),Kq=br({},b0,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:_k}),Yq=vi(Kq),Zq=br({},xp,{propertyName:0,elapsedTime:0,pseudoElement:0}),Qq=vi(Zq),Jq=br({},Sw,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),eX=vi(Jq),tX=[9,13,27,32],Pk=Jl&&"CompositionEvent"in window,ng=null;Jl&&"documentMode"in document&&(ng=document.documentMode);var nX=Jl&&"TextEvent"in window&&!ng,aL=Jl&&(!Pk||ng&&8<ng&&11>=ng),X$=" ",K$=!1;function lL(t,e){switch(t){case"keyup":return tX.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function cL(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var th=!1;function rX(t,e){switch(t){case"compositionend":return cL(e);case"keypress":return e.which!==32?null:(K$=!0,X$);case"textInput":return t=e.data,t===X$&&K$?null:t;default:return null}}function sX(t,e){if(th)return t==="compositionend"||!Pk&&lL(t,e)?(t=iL(),by=$k=Bc=null,th=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return aL&&e.locale!=="ko"?null:e.data;default:return null}}var oX={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Y$(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!oX[t.type]:e==="textarea"}function uL(t,e,n,r){zM(r),e=tb(e,"onChange"),0<e.length&&(n=new Ok("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var rg=null,Ag=null;function iX(t){vL(t,0)}function Nw(t){var e=sh(t);if(_M(e))return t}function aX(t,e){if(t==="change")return e}var dL=!1;if(Jl){var gS;if(Jl){var xS="oninput"in document;if(!xS){var Z$=document.createElement("div");Z$.setAttribute("oninput","return;"),xS=typeof Z$.oninput=="function"}gS=xS}else gS=!1;dL=gS&&(!document.documentMode||9<document.documentMode)}function Q$(){rg&&(rg.detachEvent("onpropertychange",fL),Ag=rg=null)}function fL(t){if(t.propertyName==="value"&&Nw(Ag)){var e=[];uL(e,Ag,t,kk(t)),HM(iX,e)}}function lX(t,e,n){t==="focusin"?(Q$(),rg=e,Ag=n,rg.attachEvent("onpropertychange",fL)):t==="focusout"&&Q$()}function cX(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Nw(Ag)}function uX(t,e){if(t==="click")return Nw(e)}function dX(t,e){if(t==="input"||t==="change")return Nw(e)}function fX(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Da=typeof Object.is=="function"?Object.is:fX;function Rg(t,e){if(Da(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!IN.call(e,s)||!Da(t[s],e[s]))return!1}return!0}function J$(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function eO(t,e){var n=J$(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=J$(n)}}function hL(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?hL(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function pL(){for(var t=window,e=Xy();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Xy(t.document)}return e}function Fk(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function hX(t){var e=pL(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&hL(n.ownerDocument.documentElement,n)){if(r!==null&&Fk(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,o=Math.min(r.start,s);r=r.end===void 0?o:Math.min(r.end,s),!t.extend&&o>r&&(s=r,r=o,o=s),s=eO(n,o);var i=eO(n,r);s&&i&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==i.node||t.focusOffset!==i.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),o>r?(t.addRange(e),t.extend(i.node,i.offset)):(e.setEnd(i.node,i.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var pX=Jl&&"documentMode"in document&&11>=document.documentMode,nh=null,HN=null,sg=null,GN=!1;function tO(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;GN||nh==null||nh!==Xy(r)||(r=nh,"selectionStart"in r&&Fk(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),sg&&Rg(sg,r)||(sg=r,r=tb(HN,"onSelect"),0<r.length&&(e=new Ok("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=nh)))}function Tx(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var rh={animationend:Tx("Animation","AnimationEnd"),animationiteration:Tx("Animation","AnimationIteration"),animationstart:Tx("Animation","AnimationStart"),transitionend:Tx("Transition","TransitionEnd")},yS={},mL={};Jl&&(mL=document.createElement("div").style,"AnimationEvent"in window||(delete rh.animationend.animation,delete rh.animationiteration.animation,delete rh.animationstart.animation),"TransitionEvent"in window||delete rh.transitionend.transition);function Ew(t){if(yS[t])return yS[t];if(!rh[t])return t;var e=rh[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in mL)return yS[t]=e[n];return t}var gL=Ew("animationend"),xL=Ew("animationiteration"),yL=Ew("animationstart"),bL=Ew("transitionend"),wL=new Map,nO="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Su(t,e){wL.set(t,e),rf(e,[t])}for(var bS=0;bS<nO.length;bS++){var wS=nO[bS],mX=wS.toLowerCase(),gX=wS[0].toUpperCase()+wS.slice(1);Su(mX,"on"+gX)}Su(gL,"onAnimationEnd");Su(xL,"onAnimationIteration");Su(yL,"onAnimationStart");Su("dblclick","onDoubleClick");Su("focusin","onFocus");Su("focusout","onBlur");Su(bL,"onTransitionEnd");Mh("onMouseEnter",["mouseout","mouseover"]);Mh("onMouseLeave",["mouseout","mouseover"]);Mh("onPointerEnter",["pointerout","pointerover"]);Mh("onPointerLeave",["pointerout","pointerover"]);rf("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));rf("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));rf("onBeforeInput",["compositionend","keypress","textInput","paste"]);rf("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));rf("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));rf("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var zm="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),xX=new Set("cancel close invalid load scroll toggle".split(" ").concat(zm));function rO(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,mq(r,e,void 0,t),t.currentTarget=null}function vL(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var o=void 0;if(e)for(var i=r.length-1;0<=i;i--){var a=r[i],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==o&&s.isPropagationStopped())break e;rO(s,a,c),o=l}else for(i=0;i<r.length;i++){if(a=r[i],l=a.instance,c=a.currentTarget,a=a.listener,l!==o&&s.isPropagationStopped())break e;rO(s,a,c),o=l}}}if(Yy)throw t=zN,Yy=!1,zN=null,t}function tr(t,e){var n=e[ZN];n===void 0&&(n=e[ZN]=new Set);var r=t+"__bubble";n.has(r)||(CL(e,t,2,!1),n.add(r))}function vS(t,e,n){var r=0;e&&(r|=4),CL(n,t,r,e)}var Ax="_reactListening"+Math.random().toString(36).slice(2);function Dg(t){if(!t[Ax]){t[Ax]=!0,AM.forEach(function(n){n!=="selectionchange"&&(xX.has(n)||vS(n,!1,t),vS(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Ax]||(e[Ax]=!0,vS("selectionchange",!1,e))}}function CL(t,e,n,r){switch(oL(e)){case 1:var s=Dq;break;case 4:s=$q;break;default:s=Dk}n=s.bind(null,e,n,t),s=void 0,!jN||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function CS(t,e,n,r,s){var o=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var i=r.tag;if(i===3||i===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(i===4)for(i=r.return;i!==null;){var l=i.tag;if((l===3||l===4)&&(l=i.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;i=i.return}for(;a!==null;){if(i=hd(a),i===null)return;if(l=i.tag,l===5||l===6){r=o=i;continue e}a=a.parentNode}}r=r.return}HM(function(){var c=o,d=kk(n),f=[];e:{var p=wL.get(t);if(p!==void 0){var g=Ok,x=t;switch(t){case"keypress":if(wy(n)===0)break e;case"keydown":case"keyup":g=qq;break;case"focusin":x="focus",g=mS;break;case"focusout":x="blur",g=mS;break;case"beforeblur":case"afterblur":g=mS;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=H$;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=Pq;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=Yq;break;case gL:case xL:case yL:g=Lq;break;case bL:g=Qq;break;case"scroll":g=Oq;break;case"wheel":g=eX;break;case"copy":case"cut":case"paste":g=jq;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=q$}var b=(e&4)!==0,w=!b&&t==="scroll",C=b?p!==null?p+"Capture":null:p;b=[];for(var N=c,k;N!==null;){k=N;var I=k.stateNode;if(k.tag===5&&I!==null&&(k=I,C!==null&&(I=Eg(N,C),I!=null&&b.push($g(N,I,k)))),w)break;N=N.return}0<b.length&&(p=new g(p,x,null,n,d),f.push({event:p,listeners:b}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",p&&n!==LN&&(x=n.relatedTarget||n.fromElement)&&(hd(x)||x[ec]))break e;if((g||p)&&(p=d.window===d?d:(p=d.ownerDocument)?p.defaultView||p.parentWindow:window,g?(x=n.relatedTarget||n.toElement,g=c,x=x?hd(x):null,x!==null&&(w=sf(x),x!==w||x.tag!==5&&x.tag!==6)&&(x=null)):(g=null,x=c),g!==x)){if(b=H$,I="onMouseLeave",C="onMouseEnter",N="mouse",(t==="pointerout"||t==="pointerover")&&(b=q$,I="onPointerLeave",C="onPointerEnter",N="pointer"),w=g==null?p:sh(g),k=x==null?p:sh(x),p=new b(I,N+"leave",g,n,d),p.target=w,p.relatedTarget=k,I=null,hd(d)===c&&(b=new b(C,N+"enter",x,n,d),b.target=k,b.relatedTarget=w,I=b),w=I,g&&x)t:{for(b=g,C=x,N=0,k=b;k;k=Of(k))N++;for(k=0,I=C;I;I=Of(I))k++;for(;0<N-k;)b=Of(b),N--;for(;0<k-N;)C=Of(C),k--;for(;N--;){if(b===C||C!==null&&b===C.alternate)break t;b=Of(b),C=Of(C)}b=null}else b=null;g!==null&&sO(f,p,g,b,!1),x!==null&&w!==null&&sO(f,w,x,b,!0)}}e:{if(p=c?sh(c):window,g=p.nodeName&&p.nodeName.toLowerCase(),g==="select"||g==="input"&&p.type==="file")var R=aX;else if(Y$(p))if(dL)R=dX;else{R=cX;var $=lX}else(g=p.nodeName)&&g.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(R=uX);if(R&&(R=R(t,c))){uL(f,R,n,d);break e}$&&$(t,p,c),t==="focusout"&&($=p._wrapperState)&&$.controlled&&p.type==="number"&&ON(p,"number",p.value)}switch($=c?sh(c):window,t){case"focusin":(Y$($)||$.contentEditable==="true")&&(nh=$,HN=c,sg=null);break;case"focusout":sg=HN=nh=null;break;case"mousedown":GN=!0;break;case"contextmenu":case"mouseup":case"dragend":GN=!1,tO(f,n,d);break;case"selectionchange":if(pX)break;case"keydown":case"keyup":tO(f,n,d)}var O;if(Pk)e:{switch(t){case"compositionstart":var F="onCompositionStart";break e;case"compositionend":F="onCompositionEnd";break e;case"compositionupdate":F="onCompositionUpdate";break e}F=void 0}else th?lL(t,n)&&(F="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(F="onCompositionStart");F&&(aL&&n.locale!=="ko"&&(th||F!=="onCompositionStart"?F==="onCompositionEnd"&&th&&(O=iL()):(Bc=d,$k="value"in Bc?Bc.value:Bc.textContent,th=!0)),$=tb(c,F),0<$.length&&(F=new G$(F,t,null,n,d),f.push({event:F,listeners:$}),O?F.data=O:(O=cL(n),O!==null&&(F.data=O)))),(O=nX?rX(t,n):sX(t,n))&&(c=tb(c,"onBeforeInput"),0<c.length&&(d=new G$("onBeforeInput","beforeinput",null,n,d),f.push({event:d,listeners:c}),d.data=O))}vL(f,e)})}function $g(t,e,n){return{instance:t,listener:e,currentTarget:n}}function tb(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,o=s.stateNode;s.tag===5&&o!==null&&(s=o,o=Eg(t,n),o!=null&&r.unshift($g(t,o,s)),o=Eg(t,e),o!=null&&r.push($g(t,o,s))),t=t.return}return r}function Of(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function sO(t,e,n,r,s){for(var o=e._reactName,i=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,s?(l=Eg(n,o),l!=null&&i.unshift($g(n,l,a))):s||(l=Eg(n,o),l!=null&&i.push($g(n,l,a)))),n=n.return}i.length!==0&&t.push({event:e,listeners:i})}var yX=/\r\n?/g,bX=/\u0000|\uFFFD/g;function oO(t){return(typeof t=="string"?t:""+t).replace(yX,`
`).replace(bX,"")}function Rx(t,e,n){if(e=oO(e),oO(t)!==e&&n)throw Error(Ye(425))}function nb(){}var qN=null,XN=null;function KN(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var YN=typeof setTimeout=="function"?setTimeout:void 0,wX=typeof clearTimeout=="function"?clearTimeout:void 0,iO=typeof Promise=="function"?Promise:void 0,vX=typeof queueMicrotask=="function"?queueMicrotask:typeof iO<"u"?function(t){return iO.resolve(null).then(t).catch(CX)}:YN;function CX(t){setTimeout(function(){throw t})}function SS(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Tg(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Tg(e)}function Yc(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function aO(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var yp=Math.random().toString(36).slice(2),ll="__reactFiber$"+yp,Og="__reactProps$"+yp,ec="__reactContainer$"+yp,ZN="__reactEvents$"+yp,SX="__reactListeners$"+yp,NX="__reactHandles$"+yp;function hd(t){var e=t[ll];if(e)return e;for(var n=t.parentNode;n;){if(e=n[ec]||n[ll]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=aO(t);t!==null;){if(n=t[ll])return n;t=aO(t)}return e}t=n,n=t.parentNode}return null}function w0(t){return t=t[ll]||t[ec],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function sh(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Ye(33))}function Iw(t){return t[Og]||null}var QN=[],oh=-1;function Nu(t){return{current:t}}function rr(t){0>oh||(t.current=QN[oh],QN[oh]=null,oh--)}function Yn(t,e){oh++,QN[oh]=t.current,t.current=e}var uu={},ao=Nu(uu),zo=Nu(!1),$d=uu;function Lh(t,e){var n=t.type.contextTypes;if(!n)return uu;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},o;for(o in n)s[o]=e[o];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Vo(t){return t=t.childContextTypes,t!=null}function rb(){rr(zo),rr(ao)}function lO(t,e,n){if(ao.current!==uu)throw Error(Ye(168));Yn(ao,e),Yn(zo,n)}function SL(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(Ye(108,lq(t)||"Unknown",s));return br({},n,r)}function sb(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||uu,$d=ao.current,Yn(ao,t),Yn(zo,zo.current),!0}function cO(t,e,n){var r=t.stateNode;if(!r)throw Error(Ye(169));n?(t=SL(t,e,$d),r.__reactInternalMemoizedMergedChildContext=t,rr(zo),rr(ao),Yn(ao,t)):rr(zo),Yn(zo,n)}var Bl=null,kw=!1,NS=!1;function NL(t){Bl===null?Bl=[t]:Bl.push(t)}function EX(t){kw=!0,NL(t)}function Eu(){if(!NS&&Bl!==null){NS=!0;var t=0,e=$n;try{var n=Bl;for($n=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Bl=null,kw=!1}catch(s){throw Bl!==null&&(Bl=Bl.slice(t+1)),KM(Tk,Eu),s}finally{$n=e,NS=!1}}return null}var ih=[],ah=0,ob=null,ib=0,Pi=[],Fi=0,Od=null,Gl=1,ql="";function rd(t,e){ih[ah++]=ib,ih[ah++]=ob,ob=t,ib=e}function EL(t,e,n){Pi[Fi++]=Gl,Pi[Fi++]=ql,Pi[Fi++]=Od,Od=t;var r=Gl;t=ql;var s=32-Ea(r)-1;r&=~(1<<s),n+=1;var o=32-Ea(e)+s;if(30<o){var i=s-s%5;o=(r&(1<<i)-1).toString(32),r>>=i,s-=i,Gl=1<<32-Ea(e)+s|n<<s|r,ql=o+t}else Gl=1<<o|n<<s|r,ql=t}function Mk(t){t.return!==null&&(rd(t,1),EL(t,1,0))}function Lk(t){for(;t===ob;)ob=ih[--ah],ih[ah]=null,ib=ih[--ah],ih[ah]=null;for(;t===Od;)Od=Pi[--Fi],Pi[Fi]=null,ql=Pi[--Fi],Pi[Fi]=null,Gl=Pi[--Fi],Pi[Fi]=null}var hi=null,di=null,ur=!1,wa=null;function IL(t,e){var n=ji(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function uO(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,hi=t,di=Yc(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,hi=t,di=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Od!==null?{id:Gl,overflow:ql}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=ji(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,hi=t,di=null,!0):!1;default:return!1}}function JN(t){return(t.mode&1)!==0&&(t.flags&128)===0}function eE(t){if(ur){var e=di;if(e){var n=e;if(!uO(t,e)){if(JN(t))throw Error(Ye(418));e=Yc(n.nextSibling);var r=hi;e&&uO(t,e)?IL(r,n):(t.flags=t.flags&-4097|2,ur=!1,hi=t)}}else{if(JN(t))throw Error(Ye(418));t.flags=t.flags&-4097|2,ur=!1,hi=t}}}function dO(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;hi=t}function Dx(t){if(t!==hi)return!1;if(!ur)return dO(t),ur=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!KN(t.type,t.memoizedProps)),e&&(e=di)){if(JN(t))throw kL(),Error(Ye(418));for(;e;)IL(t,e),e=Yc(e.nextSibling)}if(dO(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Ye(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){di=Yc(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}di=null}}else di=hi?Yc(t.stateNode.nextSibling):null;return!0}function kL(){for(var t=di;t;)t=Yc(t.nextSibling)}function Bh(){di=hi=null,ur=!1}function Bk(t){wa===null?wa=[t]:wa.push(t)}var IX=hc.ReactCurrentBatchConfig;function um(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Ye(309));var r=n.stateNode}if(!r)throw Error(Ye(147,t));var s=r,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(i){var a=s.refs;i===null?delete a[o]:a[o]=i},e._stringRef=o,e)}if(typeof t!="string")throw Error(Ye(284));if(!n._owner)throw Error(Ye(290,t))}return t}function $x(t,e){throw t=Object.prototype.toString.call(e),Error(Ye(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function fO(t){var e=t._init;return e(t._payload)}function TL(t){function e(C,N){if(t){var k=C.deletions;k===null?(C.deletions=[N],C.flags|=16):k.push(N)}}function n(C,N){if(!t)return null;for(;N!==null;)e(C,N),N=N.sibling;return null}function r(C,N){for(C=new Map;N!==null;)N.key!==null?C.set(N.key,N):C.set(N.index,N),N=N.sibling;return C}function s(C,N){return C=eu(C,N),C.index=0,C.sibling=null,C}function o(C,N,k){return C.index=k,t?(k=C.alternate,k!==null?(k=k.index,k<N?(C.flags|=2,N):k):(C.flags|=2,N)):(C.flags|=1048576,N)}function i(C){return t&&C.alternate===null&&(C.flags|=2),C}function a(C,N,k,I){return N===null||N.tag!==6?(N=DS(k,C.mode,I),N.return=C,N):(N=s(N,k),N.return=C,N)}function l(C,N,k,I){var R=k.type;return R===eh?d(C,N,k.props.children,I,k.key):N!==null&&(N.elementType===R||typeof R=="object"&&R!==null&&R.$$typeof===$c&&fO(R)===N.type)?(I=s(N,k.props),I.ref=um(C,N,k),I.return=C,I):(I=ky(k.type,k.key,k.props,null,C.mode,I),I.ref=um(C,N,k),I.return=C,I)}function c(C,N,k,I){return N===null||N.tag!==4||N.stateNode.containerInfo!==k.containerInfo||N.stateNode.implementation!==k.implementation?(N=$S(k,C.mode,I),N.return=C,N):(N=s(N,k.children||[]),N.return=C,N)}function d(C,N,k,I,R){return N===null||N.tag!==7?(N=Ed(k,C.mode,I,R),N.return=C,N):(N=s(N,k),N.return=C,N)}function f(C,N,k){if(typeof N=="string"&&N!==""||typeof N=="number")return N=DS(""+N,C.mode,k),N.return=C,N;if(typeof N=="object"&&N!==null){switch(N.$$typeof){case vx:return k=ky(N.type,N.key,N.props,null,C.mode,k),k.ref=um(C,null,N),k.return=C,k;case Jf:return N=$S(N,C.mode,k),N.return=C,N;case $c:var I=N._init;return f(C,I(N._payload),k)}if(Bm(N)||om(N))return N=Ed(N,C.mode,k,null),N.return=C,N;$x(C,N)}return null}function p(C,N,k,I){var R=N!==null?N.key:null;if(typeof k=="string"&&k!==""||typeof k=="number")return R!==null?null:a(C,N,""+k,I);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case vx:return k.key===R?l(C,N,k,I):null;case Jf:return k.key===R?c(C,N,k,I):null;case $c:return R=k._init,p(C,N,R(k._payload),I)}if(Bm(k)||om(k))return R!==null?null:d(C,N,k,I,null);$x(C,k)}return null}function g(C,N,k,I,R){if(typeof I=="string"&&I!==""||typeof I=="number")return C=C.get(k)||null,a(N,C,""+I,R);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case vx:return C=C.get(I.key===null?k:I.key)||null,l(N,C,I,R);case Jf:return C=C.get(I.key===null?k:I.key)||null,c(N,C,I,R);case $c:var $=I._init;return g(C,N,k,$(I._payload),R)}if(Bm(I)||om(I))return C=C.get(k)||null,d(N,C,I,R,null);$x(N,I)}return null}function x(C,N,k,I){for(var R=null,$=null,O=N,F=N=0,M=null;O!==null&&F<k.length;F++){O.index>F?(M=O,O=null):M=O.sibling;var _=p(C,O,k[F],I);if(_===null){O===null&&(O=M);break}t&&O&&_.alternate===null&&e(C,O),N=o(_,N,F),$===null?R=_:$.sibling=_,$=_,O=M}if(F===k.length)return n(C,O),ur&&rd(C,F),R;if(O===null){for(;F<k.length;F++)O=f(C,k[F],I),O!==null&&(N=o(O,N,F),$===null?R=O:$.sibling=O,$=O);return ur&&rd(C,F),R}for(O=r(C,O);F<k.length;F++)M=g(O,C,F,k[F],I),M!==null&&(t&&M.alternate!==null&&O.delete(M.key===null?F:M.key),N=o(M,N,F),$===null?R=M:$.sibling=M,$=M);return t&&O.forEach(function(V){return e(C,V)}),ur&&rd(C,F),R}function b(C,N,k,I){var R=om(k);if(typeof R!="function")throw Error(Ye(150));if(k=R.call(k),k==null)throw Error(Ye(151));for(var $=R=null,O=N,F=N=0,M=null,_=k.next();O!==null&&!_.done;F++,_=k.next()){O.index>F?(M=O,O=null):M=O.sibling;var V=p(C,O,_.value,I);if(V===null){O===null&&(O=M);break}t&&O&&V.alternate===null&&e(C,O),N=o(V,N,F),$===null?R=V:$.sibling=V,$=V,O=M}if(_.done)return n(C,O),ur&&rd(C,F),R;if(O===null){for(;!_.done;F++,_=k.next())_=f(C,_.value,I),_!==null&&(N=o(_,N,F),$===null?R=_:$.sibling=_,$=_);return ur&&rd(C,F),R}for(O=r(C,O);!_.done;F++,_=k.next())_=g(O,C,F,_.value,I),_!==null&&(t&&_.alternate!==null&&O.delete(_.key===null?F:_.key),N=o(_,N,F),$===null?R=_:$.sibling=_,$=_);return t&&O.forEach(function(B){return e(C,B)}),ur&&rd(C,F),R}function w(C,N,k,I){if(typeof k=="object"&&k!==null&&k.type===eh&&k.key===null&&(k=k.props.children),typeof k=="object"&&k!==null){switch(k.$$typeof){case vx:e:{for(var R=k.key,$=N;$!==null;){if($.key===R){if(R=k.type,R===eh){if($.tag===7){n(C,$.sibling),N=s($,k.props.children),N.return=C,C=N;break e}}else if($.elementType===R||typeof R=="object"&&R!==null&&R.$$typeof===$c&&fO(R)===$.type){n(C,$.sibling),N=s($,k.props),N.ref=um(C,$,k),N.return=C,C=N;break e}n(C,$);break}else e(C,$);$=$.sibling}k.type===eh?(N=Ed(k.props.children,C.mode,I,k.key),N.return=C,C=N):(I=ky(k.type,k.key,k.props,null,C.mode,I),I.ref=um(C,N,k),I.return=C,C=I)}return i(C);case Jf:e:{for($=k.key;N!==null;){if(N.key===$)if(N.tag===4&&N.stateNode.containerInfo===k.containerInfo&&N.stateNode.implementation===k.implementation){n(C,N.sibling),N=s(N,k.children||[]),N.return=C,C=N;break e}else{n(C,N);break}else e(C,N);N=N.sibling}N=$S(k,C.mode,I),N.return=C,C=N}return i(C);case $c:return $=k._init,w(C,N,$(k._payload),I)}if(Bm(k))return x(C,N,k,I);if(om(k))return b(C,N,k,I);$x(C,k)}return typeof k=="string"&&k!==""||typeof k=="number"?(k=""+k,N!==null&&N.tag===6?(n(C,N.sibling),N=s(N,k),N.return=C,C=N):(n(C,N),N=DS(k,C.mode,I),N.return=C,C=N),i(C)):n(C,N)}return w}var jh=TL(!0),AL=TL(!1),ab=Nu(null),lb=null,lh=null,jk=null;function zk(){jk=lh=lb=null}function Vk(t){var e=ab.current;rr(ab),t._currentValue=e}function tE(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function yh(t,e){lb=t,jk=lh=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Lo=!0),t.firstContext=null)}function Ji(t){var e=t._currentValue;if(jk!==t)if(t={context:t,memoizedValue:e,next:null},lh===null){if(lb===null)throw Error(Ye(308));lh=t,lb.dependencies={lanes:0,firstContext:t}}else lh=lh.next=t;return e}var pd=null;function Wk(t){pd===null?pd=[t]:pd.push(t)}function RL(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Wk(e)):(n.next=s.next,s.next=n),e.interleaved=n,tc(t,r)}function tc(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Oc=!1;function Uk(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function DL(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Xl(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Zc(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,xn&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,tc(t,n)}return s=r.interleaved,s===null?(e.next=e,Wk(r)):(e.next=s.next,s.next=e),r.interleaved=e,tc(t,n)}function vy(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Ak(t,n)}}function hO(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var i={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?s=o=i:o=o.next=i,n=n.next}while(n!==null);o===null?s=o=e:o=o.next=e}else s=o=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:o,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function cb(t,e,n,r){var s=t.updateQueue;Oc=!1;var o=s.firstBaseUpdate,i=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,c=l.next;l.next=null,i===null?o=c:i.next=c,i=l;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==i&&(a===null?d.firstBaseUpdate=c:a.next=c,d.lastBaseUpdate=l))}if(o!==null){var f=s.baseState;i=0,d=c=l=null,a=o;do{var p=a.lane,g=a.eventTime;if((r&p)===p){d!==null&&(d=d.next={eventTime:g,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var x=t,b=a;switch(p=e,g=n,b.tag){case 1:if(x=b.payload,typeof x=="function"){f=x.call(g,f,p);break e}f=x;break e;case 3:x.flags=x.flags&-65537|128;case 0:if(x=b.payload,p=typeof x=="function"?x.call(g,f,p):x,p==null)break e;f=br({},f,p);break e;case 2:Oc=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,p=s.effects,p===null?s.effects=[a]:p.push(a))}else g={eventTime:g,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(c=d=g,l=f):d=d.next=g,i|=p;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;p=a,a=p.next,p.next=null,s.lastBaseUpdate=p,s.shared.pending=null}}while(!0);if(d===null&&(l=f),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=d,e=s.shared.interleaved,e!==null){s=e;do i|=s.lane,s=s.next;while(s!==e)}else o===null&&(s.shared.lanes=0);Pd|=i,t.lanes=i,t.memoizedState=f}}function pO(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(Ye(191,s));s.call(r)}}}var v0={},ml=Nu(v0),_g=Nu(v0),Pg=Nu(v0);function md(t){if(t===v0)throw Error(Ye(174));return t}function Hk(t,e){switch(Yn(Pg,e),Yn(_g,t),Yn(ml,v0),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:PN(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=PN(e,t)}rr(ml),Yn(ml,e)}function zh(){rr(ml),rr(_g),rr(Pg)}function $L(t){md(Pg.current);var e=md(ml.current),n=PN(e,t.type);e!==n&&(Yn(_g,t),Yn(ml,n))}function Gk(t){_g.current===t&&(rr(ml),rr(_g))}var pr=Nu(0);function ub(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var ES=[];function qk(){for(var t=0;t<ES.length;t++)ES[t]._workInProgressVersionPrimary=null;ES.length=0}var Cy=hc.ReactCurrentDispatcher,IS=hc.ReactCurrentBatchConfig,_d=0,xr=null,os=null,ys=null,db=!1,og=!1,Fg=0,kX=0;function Ks(){throw Error(Ye(321))}function Xk(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Da(t[n],e[n]))return!1;return!0}function Kk(t,e,n,r,s,o){if(_d=o,xr=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Cy.current=t===null||t.memoizedState===null?DX:$X,t=n(r,s),og){o=0;do{if(og=!1,Fg=0,25<=o)throw Error(Ye(301));o+=1,ys=os=null,e.updateQueue=null,Cy.current=OX,t=n(r,s)}while(og)}if(Cy.current=fb,e=os!==null&&os.next!==null,_d=0,ys=os=xr=null,db=!1,e)throw Error(Ye(300));return t}function Yk(){var t=Fg!==0;return Fg=0,t}function el(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ys===null?xr.memoizedState=ys=t:ys=ys.next=t,ys}function ea(){if(os===null){var t=xr.alternate;t=t!==null?t.memoizedState:null}else t=os.next;var e=ys===null?xr.memoizedState:ys.next;if(e!==null)ys=e,os=t;else{if(t===null)throw Error(Ye(310));os=t,t={memoizedState:os.memoizedState,baseState:os.baseState,baseQueue:os.baseQueue,queue:os.queue,next:null},ys===null?xr.memoizedState=ys=t:ys=ys.next=t}return ys}function Mg(t,e){return typeof e=="function"?e(t):e}function kS(t){var e=ea(),n=e.queue;if(n===null)throw Error(Ye(311));n.lastRenderedReducer=t;var r=os,s=r.baseQueue,o=n.pending;if(o!==null){if(s!==null){var i=s.next;s.next=o.next,o.next=i}r.baseQueue=s=o,n.pending=null}if(s!==null){o=s.next,r=r.baseState;var a=i=null,l=null,c=o;do{var d=c.lane;if((_d&d)===d)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var f={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=f,i=r):l=l.next=f,xr.lanes|=d,Pd|=d}c=c.next}while(c!==null&&c!==o);l===null?i=r:l.next=a,Da(r,e.memoizedState)||(Lo=!0),e.memoizedState=r,e.baseState=i,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do o=s.lane,xr.lanes|=o,Pd|=o,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function TS(t){var e=ea(),n=e.queue;if(n===null)throw Error(Ye(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,o=e.memoizedState;if(s!==null){n.pending=null;var i=s=s.next;do o=t(o,i.action),i=i.next;while(i!==s);Da(o,e.memoizedState)||(Lo=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,r]}function OL(){}function _L(t,e){var n=xr,r=ea(),s=e(),o=!Da(r.memoizedState,s);if(o&&(r.memoizedState=s,Lo=!0),r=r.queue,Zk(ML.bind(null,n,r,t),[t]),r.getSnapshot!==e||o||ys!==null&&ys.memoizedState.tag&1){if(n.flags|=2048,Lg(9,FL.bind(null,n,r,s,e),void 0,null),Cs===null)throw Error(Ye(349));_d&30||PL(n,e,s)}return s}function PL(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=xr.updateQueue,e===null?(e={lastEffect:null,stores:null},xr.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function FL(t,e,n,r){e.value=n,e.getSnapshot=r,LL(e)&&BL(t)}function ML(t,e,n){return n(function(){LL(e)&&BL(t)})}function LL(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Da(t,n)}catch{return!0}}function BL(t){var e=tc(t,1);e!==null&&Ia(e,t,1,-1)}function mO(t){var e=el();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Mg,lastRenderedState:t},e.queue=t,t=t.dispatch=RX.bind(null,xr,t),[e.memoizedState,t]}function Lg(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=xr.updateQueue,e===null?(e={lastEffect:null,stores:null},xr.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function jL(){return ea().memoizedState}function Sy(t,e,n,r){var s=el();xr.flags|=t,s.memoizedState=Lg(1|e,n,void 0,r===void 0?null:r)}function Tw(t,e,n,r){var s=ea();r=r===void 0?null:r;var o=void 0;if(os!==null){var i=os.memoizedState;if(o=i.destroy,r!==null&&Xk(r,i.deps)){s.memoizedState=Lg(e,n,o,r);return}}xr.flags|=t,s.memoizedState=Lg(1|e,n,o,r)}function gO(t,e){return Sy(8390656,8,t,e)}function Zk(t,e){return Tw(2048,8,t,e)}function zL(t,e){return Tw(4,2,t,e)}function VL(t,e){return Tw(4,4,t,e)}function WL(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function UL(t,e,n){return n=n!=null?n.concat([t]):null,Tw(4,4,WL.bind(null,e,t),n)}function Qk(){}function HL(t,e){var n=ea();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Xk(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function GL(t,e){var n=ea();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Xk(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function qL(t,e,n){return _d&21?(Da(n,e)||(n=QM(),xr.lanes|=n,Pd|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Lo=!0),t.memoizedState=n)}function TX(t,e){var n=$n;$n=n!==0&&4>n?n:4,t(!0);var r=IS.transition;IS.transition={};try{t(!1),e()}finally{$n=n,IS.transition=r}}function XL(){return ea().memoizedState}function AX(t,e,n){var r=Jc(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},KL(t))YL(e,n);else if(n=RL(t,e,n,r),n!==null){var s=yo();Ia(n,t,r,s),ZL(n,e,r)}}function RX(t,e,n){var r=Jc(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(KL(t))YL(e,s);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var i=e.lastRenderedState,a=o(i,n);if(s.hasEagerState=!0,s.eagerState=a,Da(a,i)){var l=e.interleaved;l===null?(s.next=s,Wk(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}n=RL(t,e,s,r),n!==null&&(s=yo(),Ia(n,t,r,s),ZL(n,e,r))}}function KL(t){var e=t.alternate;return t===xr||e!==null&&e===xr}function YL(t,e){og=db=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function ZL(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Ak(t,n)}}var fb={readContext:Ji,useCallback:Ks,useContext:Ks,useEffect:Ks,useImperativeHandle:Ks,useInsertionEffect:Ks,useLayoutEffect:Ks,useMemo:Ks,useReducer:Ks,useRef:Ks,useState:Ks,useDebugValue:Ks,useDeferredValue:Ks,useTransition:Ks,useMutableSource:Ks,useSyncExternalStore:Ks,useId:Ks,unstable_isNewReconciler:!1},DX={readContext:Ji,useCallback:function(t,e){return el().memoizedState=[t,e===void 0?null:e],t},useContext:Ji,useEffect:gO,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Sy(4194308,4,WL.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Sy(4194308,4,t,e)},useInsertionEffect:function(t,e){return Sy(4,2,t,e)},useMemo:function(t,e){var n=el();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=el();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=AX.bind(null,xr,t),[r.memoizedState,t]},useRef:function(t){var e=el();return t={current:t},e.memoizedState=t},useState:mO,useDebugValue:Qk,useDeferredValue:function(t){return el().memoizedState=t},useTransition:function(){var t=mO(!1),e=t[0];return t=TX.bind(null,t[1]),el().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=xr,s=el();if(ur){if(n===void 0)throw Error(Ye(407));n=n()}else{if(n=e(),Cs===null)throw Error(Ye(349));_d&30||PL(r,e,n)}s.memoizedState=n;var o={value:n,getSnapshot:e};return s.queue=o,gO(ML.bind(null,r,o,t),[t]),r.flags|=2048,Lg(9,FL.bind(null,r,o,n,e),void 0,null),n},useId:function(){var t=el(),e=Cs.identifierPrefix;if(ur){var n=ql,r=Gl;n=(r&~(1<<32-Ea(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Fg++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=kX++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},$X={readContext:Ji,useCallback:HL,useContext:Ji,useEffect:Zk,useImperativeHandle:UL,useInsertionEffect:zL,useLayoutEffect:VL,useMemo:GL,useReducer:kS,useRef:jL,useState:function(){return kS(Mg)},useDebugValue:Qk,useDeferredValue:function(t){var e=ea();return qL(e,os.memoizedState,t)},useTransition:function(){var t=kS(Mg)[0],e=ea().memoizedState;return[t,e]},useMutableSource:OL,useSyncExternalStore:_L,useId:XL,unstable_isNewReconciler:!1},OX={readContext:Ji,useCallback:HL,useContext:Ji,useEffect:Zk,useImperativeHandle:UL,useInsertionEffect:zL,useLayoutEffect:VL,useMemo:GL,useReducer:TS,useRef:jL,useState:function(){return TS(Mg)},useDebugValue:Qk,useDeferredValue:function(t){var e=ea();return os===null?e.memoizedState=t:qL(e,os.memoizedState,t)},useTransition:function(){var t=TS(Mg)[0],e=ea().memoizedState;return[t,e]},useMutableSource:OL,useSyncExternalStore:_L,useId:XL,unstable_isNewReconciler:!1};function xa(t,e){if(t&&t.defaultProps){e=br({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function nE(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:br({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Aw={isMounted:function(t){return(t=t._reactInternals)?sf(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=yo(),s=Jc(t),o=Xl(r,s);o.payload=e,n!=null&&(o.callback=n),e=Zc(t,o,s),e!==null&&(Ia(e,t,s,r),vy(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=yo(),s=Jc(t),o=Xl(r,s);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=Zc(t,o,s),e!==null&&(Ia(e,t,s,r),vy(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=yo(),r=Jc(t),s=Xl(n,r);s.tag=2,e!=null&&(s.callback=e),e=Zc(t,s,r),e!==null&&(Ia(e,t,r,n),vy(e,t,r))}};function xO(t,e,n,r,s,o,i){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,o,i):e.prototype&&e.prototype.isPureReactComponent?!Rg(n,r)||!Rg(s,o):!0}function QL(t,e,n){var r=!1,s=uu,o=e.contextType;return typeof o=="object"&&o!==null?o=Ji(o):(s=Vo(e)?$d:ao.current,r=e.contextTypes,o=(r=r!=null)?Lh(t,s):uu),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Aw,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=o),e}function yO(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Aw.enqueueReplaceState(e,e.state,null)}function rE(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Uk(t);var o=e.contextType;typeof o=="object"&&o!==null?s.context=Ji(o):(o=Vo(e)?$d:ao.current,s.context=Lh(t,o)),s.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(nE(t,e,o,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Aw.enqueueReplaceState(s,s.state,null),cb(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Vh(t,e){try{var n="",r=e;do n+=aq(r),r=r.return;while(r);var s=n}catch(o){s=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:s,digest:null}}function AS(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function sE(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var _X=typeof WeakMap=="function"?WeakMap:Map;function JL(t,e,n){n=Xl(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){pb||(pb=!0,pE=r),sE(t,e)},n}function e5(t,e,n){n=Xl(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){sE(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){sE(t,e),typeof r!="function"&&(Qc===null?Qc=new Set([this]):Qc.add(this));var i=e.stack;this.componentDidCatch(e.value,{componentStack:i!==null?i:""})}),n}function bO(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new _X;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=XX.bind(null,t,e,n),e.then(t,t))}function wO(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function vO(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Xl(-1,1),e.tag=2,Zc(n,e,1))),n.lanes|=1),t)}var PX=hc.ReactCurrentOwner,Lo=!1;function ho(t,e,n,r){e.child=t===null?AL(e,null,n,r):jh(e,t.child,n,r)}function CO(t,e,n,r,s){n=n.render;var o=e.ref;return yh(e,s),r=Kk(t,e,n,r,o,s),n=Yk(),t!==null&&!Lo?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,nc(t,e,s)):(ur&&n&&Mk(e),e.flags|=1,ho(t,e,r,s),e.child)}function SO(t,e,n,r,s){if(t===null){var o=n.type;return typeof o=="function"&&!iT(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,t5(t,e,o,r,s)):(t=ky(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&s)){var i=o.memoizedProps;if(n=n.compare,n=n!==null?n:Rg,n(i,r)&&t.ref===e.ref)return nc(t,e,s)}return e.flags|=1,t=eu(o,r),t.ref=e.ref,t.return=e,e.child=t}function t5(t,e,n,r,s){if(t!==null){var o=t.memoizedProps;if(Rg(o,r)&&t.ref===e.ref)if(Lo=!1,e.pendingProps=r=o,(t.lanes&s)!==0)t.flags&131072&&(Lo=!0);else return e.lanes=t.lanes,nc(t,e,s)}return oE(t,e,n,r,s)}function n5(t,e,n){var r=e.pendingProps,s=r.children,o=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Yn(uh,li),li|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Yn(uh,li),li|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,Yn(uh,li),li|=r}else o!==null?(r=o.baseLanes|n,e.memoizedState=null):r=n,Yn(uh,li),li|=r;return ho(t,e,s,n),e.child}function r5(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function oE(t,e,n,r,s){var o=Vo(n)?$d:ao.current;return o=Lh(e,o),yh(e,s),n=Kk(t,e,n,r,o,s),r=Yk(),t!==null&&!Lo?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,nc(t,e,s)):(ur&&r&&Mk(e),e.flags|=1,ho(t,e,n,s),e.child)}function NO(t,e,n,r,s){if(Vo(n)){var o=!0;sb(e)}else o=!1;if(yh(e,s),e.stateNode===null)Ny(t,e),QL(e,n,r),rE(e,n,r,s),r=!0;else if(t===null){var i=e.stateNode,a=e.memoizedProps;i.props=a;var l=i.context,c=n.contextType;typeof c=="object"&&c!==null?c=Ji(c):(c=Vo(n)?$d:ao.current,c=Lh(e,c));var d=n.getDerivedStateFromProps,f=typeof d=="function"||typeof i.getSnapshotBeforeUpdate=="function";f||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(a!==r||l!==c)&&yO(e,i,r,c),Oc=!1;var p=e.memoizedState;i.state=p,cb(e,r,i,s),l=e.memoizedState,a!==r||p!==l||zo.current||Oc?(typeof d=="function"&&(nE(e,n,d,r),l=e.memoizedState),(a=Oc||xO(e,n,a,r,p,l,c))?(f||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(e.flags|=4194308)):(typeof i.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),i.props=r,i.state=l,i.context=c,r=a):(typeof i.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{i=e.stateNode,DL(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:xa(e.type,a),i.props=c,f=e.pendingProps,p=i.context,l=n.contextType,typeof l=="object"&&l!==null?l=Ji(l):(l=Vo(n)?$d:ao.current,l=Lh(e,l));var g=n.getDerivedStateFromProps;(d=typeof g=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(a!==f||p!==l)&&yO(e,i,r,l),Oc=!1,p=e.memoizedState,i.state=p,cb(e,r,i,s);var x=e.memoizedState;a!==f||p!==x||zo.current||Oc?(typeof g=="function"&&(nE(e,n,g,r),x=e.memoizedState),(c=Oc||xO(e,n,c,r,p,x,l)||!1)?(d||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(r,x,l),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(r,x,l)),typeof i.componentDidUpdate=="function"&&(e.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof i.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=x),i.props=r,i.state=x,i.context=l,r=c):(typeof i.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return iE(t,e,n,r,o,s)}function iE(t,e,n,r,s,o){r5(t,e);var i=(e.flags&128)!==0;if(!r&&!i)return s&&cO(e,n,!1),nc(t,e,o);r=e.stateNode,PX.current=e;var a=i&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&i?(e.child=jh(e,t.child,null,o),e.child=jh(e,null,a,o)):ho(t,e,a,o),e.memoizedState=r.state,s&&cO(e,n,!0),e.child}function s5(t){var e=t.stateNode;e.pendingContext?lO(t,e.pendingContext,e.pendingContext!==e.context):e.context&&lO(t,e.context,!1),Hk(t,e.containerInfo)}function EO(t,e,n,r,s){return Bh(),Bk(s),e.flags|=256,ho(t,e,n,r),e.child}var aE={dehydrated:null,treeContext:null,retryLane:0};function lE(t){return{baseLanes:t,cachePool:null,transitions:null}}function o5(t,e,n){var r=e.pendingProps,s=pr.current,o=!1,i=(e.flags&128)!==0,a;if((a=i)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Yn(pr,s&1),t===null)return eE(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(i=r.children,t=r.fallback,o?(r=e.mode,o=e.child,i={mode:"hidden",children:i},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=i):o=$w(i,r,0,null),t=Ed(t,r,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=lE(n),e.memoizedState=aE,t):Jk(e,i));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return FX(t,e,i,r,a,s,n);if(o){o=r.fallback,i=e.mode,s=t.child,a=s.sibling;var l={mode:"hidden",children:r.children};return!(i&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=eu(s,l),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?o=eu(a,o):(o=Ed(o,i,n,null),o.flags|=2),o.return=e,r.return=e,r.sibling=o,e.child=r,r=o,o=e.child,i=t.child.memoizedState,i=i===null?lE(n):{baseLanes:i.baseLanes|n,cachePool:null,transitions:i.transitions},o.memoizedState=i,o.childLanes=t.childLanes&~n,e.memoizedState=aE,r}return o=t.child,t=o.sibling,r=eu(o,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Jk(t,e){return e=$w({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Ox(t,e,n,r){return r!==null&&Bk(r),jh(e,t.child,null,n),t=Jk(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function FX(t,e,n,r,s,o,i){if(n)return e.flags&256?(e.flags&=-257,r=AS(Error(Ye(422))),Ox(t,e,i,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=r.fallback,s=e.mode,r=$w({mode:"visible",children:r.children},s,0,null),o=Ed(o,s,i,null),o.flags|=2,r.return=e,o.return=e,r.sibling=o,e.child=r,e.mode&1&&jh(e,t.child,null,i),e.child.memoizedState=lE(i),e.memoizedState=aE,o);if(!(e.mode&1))return Ox(t,e,i,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,o=Error(Ye(419)),r=AS(o,r,void 0),Ox(t,e,i,r)}if(a=(i&t.childLanes)!==0,Lo||a){if(r=Cs,r!==null){switch(i&-i){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|i)?0:s,s!==0&&s!==o.retryLane&&(o.retryLane=s,tc(t,s),Ia(r,t,s,-1))}return oT(),r=AS(Error(Ye(421))),Ox(t,e,i,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=KX.bind(null,t),s._reactRetry=e,null):(t=o.treeContext,di=Yc(s.nextSibling),hi=e,ur=!0,wa=null,t!==null&&(Pi[Fi++]=Gl,Pi[Fi++]=ql,Pi[Fi++]=Od,Gl=t.id,ql=t.overflow,Od=e),e=Jk(e,r.children),e.flags|=4096,e)}function IO(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),tE(t.return,e,n)}function RS(t,e,n,r,s){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=s)}function i5(t,e,n){var r=e.pendingProps,s=r.revealOrder,o=r.tail;if(ho(t,e,r.children,n),r=pr.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&IO(t,n,e);else if(t.tag===19)IO(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Yn(pr,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&ub(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),RS(e,!1,s,n,o);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&ub(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}RS(e,!0,n,null,o);break;case"together":RS(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ny(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function nc(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Pd|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Ye(153));if(e.child!==null){for(t=e.child,n=eu(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=eu(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function MX(t,e,n){switch(e.tag){case 3:s5(e),Bh();break;case 5:$L(e);break;case 1:Vo(e.type)&&sb(e);break;case 4:Hk(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Yn(ab,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Yn(pr,pr.current&1),e.flags|=128,null):n&e.child.childLanes?o5(t,e,n):(Yn(pr,pr.current&1),t=nc(t,e,n),t!==null?t.sibling:null);Yn(pr,pr.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return i5(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Yn(pr,pr.current),r)break;return null;case 22:case 23:return e.lanes=0,n5(t,e,n)}return nc(t,e,n)}var a5,cE,l5,c5;a5=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};cE=function(){};l5=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,md(ml.current);var o=null;switch(n){case"input":s=DN(t,s),r=DN(t,r),o=[];break;case"select":s=br({},s,{value:void 0}),r=br({},r,{value:void 0}),o=[];break;case"textarea":s=_N(t,s),r=_N(t,r),o=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=nb)}FN(n,r);var i;n=null;for(c in s)if(!r.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var a=s[c];for(i in a)a.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Sg.hasOwnProperty(c)?o||(o=[]):(o=o||[]).push(c,null));for(c in r){var l=r[c];if(a=s!=null?s[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(i in a)!a.hasOwnProperty(i)||l&&l.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in l)l.hasOwnProperty(i)&&a[i]!==l[i]&&(n||(n={}),n[i]=l[i])}else n||(o||(o=[]),o.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(o=o||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(o=o||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Sg.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&tr("scroll",t),o||a===l||(o=[])):(o=o||[]).push(c,l))}n&&(o=o||[]).push("style",n);var c=o;(e.updateQueue=c)&&(e.flags|=4)}};c5=function(t,e,n,r){n!==r&&(e.flags|=4)};function dm(t,e){if(!ur)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Ys(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function LX(t,e,n){var r=e.pendingProps;switch(Lk(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ys(e),null;case 1:return Vo(e.type)&&rb(),Ys(e),null;case 3:return r=e.stateNode,zh(),rr(zo),rr(ao),qk(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Dx(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,wa!==null&&(xE(wa),wa=null))),cE(t,e),Ys(e),null;case 5:Gk(e);var s=md(Pg.current);if(n=e.type,t!==null&&e.stateNode!=null)l5(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Ye(166));return Ys(e),null}if(t=md(ml.current),Dx(e)){r=e.stateNode,n=e.type;var o=e.memoizedProps;switch(r[ll]=e,r[Og]=o,t=(e.mode&1)!==0,n){case"dialog":tr("cancel",r),tr("close",r);break;case"iframe":case"object":case"embed":tr("load",r);break;case"video":case"audio":for(s=0;s<zm.length;s++)tr(zm[s],r);break;case"source":tr("error",r);break;case"img":case"image":case"link":tr("error",r),tr("load",r);break;case"details":tr("toggle",r);break;case"input":P$(r,o),tr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},tr("invalid",r);break;case"textarea":M$(r,o),tr("invalid",r)}FN(n,o),s=null;for(var i in o)if(o.hasOwnProperty(i)){var a=o[i];i==="children"?typeof a=="string"?r.textContent!==a&&(o.suppressHydrationWarning!==!0&&Rx(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(o.suppressHydrationWarning!==!0&&Rx(r.textContent,a,t),s=["children",""+a]):Sg.hasOwnProperty(i)&&a!=null&&i==="onScroll"&&tr("scroll",r)}switch(n){case"input":Cx(r),F$(r,o,!0);break;case"textarea":Cx(r),L$(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=nb)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{i=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=MM(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=i.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=i.createElement(n,{is:r.is}):(t=i.createElement(n),n==="select"&&(i=t,r.multiple?i.multiple=!0:r.size&&(i.size=r.size))):t=i.createElementNS(t,n),t[ll]=e,t[Og]=r,a5(t,e,!1,!1),e.stateNode=t;e:{switch(i=MN(n,r),n){case"dialog":tr("cancel",t),tr("close",t),s=r;break;case"iframe":case"object":case"embed":tr("load",t),s=r;break;case"video":case"audio":for(s=0;s<zm.length;s++)tr(zm[s],t);s=r;break;case"source":tr("error",t),s=r;break;case"img":case"image":case"link":tr("error",t),tr("load",t),s=r;break;case"details":tr("toggle",t),s=r;break;case"input":P$(t,r),s=DN(t,r),tr("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=br({},r,{value:void 0}),tr("invalid",t);break;case"textarea":M$(t,r),s=_N(t,r),tr("invalid",t);break;default:s=r}FN(n,s),a=s;for(o in a)if(a.hasOwnProperty(o)){var l=a[o];o==="style"?jM(t,l):o==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&LM(t,l)):o==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Ng(t,l):typeof l=="number"&&Ng(t,""+l):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Sg.hasOwnProperty(o)?l!=null&&o==="onScroll"&&tr("scroll",t):l!=null&&Sk(t,o,l,i))}switch(n){case"input":Cx(t),F$(t,r,!1);break;case"textarea":Cx(t),L$(t);break;case"option":r.value!=null&&t.setAttribute("value",""+cu(r.value));break;case"select":t.multiple=!!r.multiple,o=r.value,o!=null?ph(t,!!r.multiple,o,!1):r.defaultValue!=null&&ph(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=nb)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ys(e),null;case 6:if(t&&e.stateNode!=null)c5(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Ye(166));if(n=md(Pg.current),md(ml.current),Dx(e)){if(r=e.stateNode,n=e.memoizedProps,r[ll]=e,(o=r.nodeValue!==n)&&(t=hi,t!==null))switch(t.tag){case 3:Rx(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Rx(r.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[ll]=e,e.stateNode=r}return Ys(e),null;case 13:if(rr(pr),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ur&&di!==null&&e.mode&1&&!(e.flags&128))kL(),Bh(),e.flags|=98560,o=!1;else if(o=Dx(e),r!==null&&r.dehydrated!==null){if(t===null){if(!o)throw Error(Ye(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(Ye(317));o[ll]=e}else Bh(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ys(e),o=!1}else wa!==null&&(xE(wa),wa=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||pr.current&1?as===0&&(as=3):oT())),e.updateQueue!==null&&(e.flags|=4),Ys(e),null);case 4:return zh(),cE(t,e),t===null&&Dg(e.stateNode.containerInfo),Ys(e),null;case 10:return Vk(e.type._context),Ys(e),null;case 17:return Vo(e.type)&&rb(),Ys(e),null;case 19:if(rr(pr),o=e.memoizedState,o===null)return Ys(e),null;if(r=(e.flags&128)!==0,i=o.rendering,i===null)if(r)dm(o,!1);else{if(as!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(i=ub(t),i!==null){for(e.flags|=128,dm(o,!1),r=i.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)o=n,t=r,o.flags&=14680066,i=o.alternate,i===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=i.childLanes,o.lanes=i.lanes,o.child=i.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=i.memoizedProps,o.memoizedState=i.memoizedState,o.updateQueue=i.updateQueue,o.type=i.type,t=i.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Yn(pr,pr.current&1|2),e.child}t=t.sibling}o.tail!==null&&Fr()>Wh&&(e.flags|=128,r=!0,dm(o,!1),e.lanes=4194304)}else{if(!r)if(t=ub(i),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),dm(o,!0),o.tail===null&&o.tailMode==="hidden"&&!i.alternate&&!ur)return Ys(e),null}else 2*Fr()-o.renderingStartTime>Wh&&n!==1073741824&&(e.flags|=128,r=!0,dm(o,!1),e.lanes=4194304);o.isBackwards?(i.sibling=e.child,e.child=i):(n=o.last,n!==null?n.sibling=i:e.child=i,o.last=i)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=Fr(),e.sibling=null,n=pr.current,Yn(pr,r?n&1|2:n&1),e):(Ys(e),null);case 22:case 23:return sT(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?li&1073741824&&(Ys(e),e.subtreeFlags&6&&(e.flags|=8192)):Ys(e),null;case 24:return null;case 25:return null}throw Error(Ye(156,e.tag))}function BX(t,e){switch(Lk(e),e.tag){case 1:return Vo(e.type)&&rb(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return zh(),rr(zo),rr(ao),qk(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Gk(e),null;case 13:if(rr(pr),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Ye(340));Bh()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return rr(pr),null;case 4:return zh(),null;case 10:return Vk(e.type._context),null;case 22:case 23:return sT(),null;case 24:return null;default:return null}}var _x=!1,Js=!1,jX=typeof WeakSet=="function"?WeakSet:Set,xt=null;function ch(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Tr(t,e,r)}else n.current=null}function uE(t,e,n){try{n()}catch(r){Tr(t,e,r)}}var kO=!1;function zX(t,e){if(qN=Jy,t=pL(),Fk(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var i=0,a=-1,l=-1,c=0,d=0,f=t,p=null;t:for(;;){for(var g;f!==n||s!==0&&f.nodeType!==3||(a=i+s),f!==o||r!==0&&f.nodeType!==3||(l=i+r),f.nodeType===3&&(i+=f.nodeValue.length),(g=f.firstChild)!==null;)p=f,f=g;for(;;){if(f===t)break t;if(p===n&&++c===s&&(a=i),p===o&&++d===r&&(l=i),(g=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=g}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(XN={focusedElem:t,selectionRange:n},Jy=!1,xt=e;xt!==null;)if(e=xt,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,xt=t;else for(;xt!==null;){e=xt;try{var x=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var b=x.memoizedProps,w=x.memoizedState,C=e.stateNode,N=C.getSnapshotBeforeUpdate(e.elementType===e.type?b:xa(e.type,b),w);C.__reactInternalSnapshotBeforeUpdate=N}break;case 3:var k=e.stateNode.containerInfo;k.nodeType===1?k.textContent="":k.nodeType===9&&k.documentElement&&k.removeChild(k.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Ye(163))}}catch(I){Tr(e,e.return,I)}if(t=e.sibling,t!==null){t.return=e.return,xt=t;break}xt=e.return}return x=kO,kO=!1,x}function ig(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var o=s.destroy;s.destroy=void 0,o!==void 0&&uE(e,n,o)}s=s.next}while(s!==r)}}function Rw(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function dE(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function u5(t){var e=t.alternate;e!==null&&(t.alternate=null,u5(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[ll],delete e[Og],delete e[ZN],delete e[SX],delete e[NX])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function d5(t){return t.tag===5||t.tag===3||t.tag===4}function TO(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||d5(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function fE(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=nb));else if(r!==4&&(t=t.child,t!==null))for(fE(t,e,n),t=t.sibling;t!==null;)fE(t,e,n),t=t.sibling}function hE(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(hE(t,e,n),t=t.sibling;t!==null;)hE(t,e,n),t=t.sibling}var _s=null,ya=!1;function kc(t,e,n){for(n=n.child;n!==null;)f5(t,e,n),n=n.sibling}function f5(t,e,n){if(pl&&typeof pl.onCommitFiberUnmount=="function")try{pl.onCommitFiberUnmount(Cw,n)}catch{}switch(n.tag){case 5:Js||ch(n,e);case 6:var r=_s,s=ya;_s=null,kc(t,e,n),_s=r,ya=s,_s!==null&&(ya?(t=_s,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):_s.removeChild(n.stateNode));break;case 18:_s!==null&&(ya?(t=_s,n=n.stateNode,t.nodeType===8?SS(t.parentNode,n):t.nodeType===1&&SS(t,n),Tg(t)):SS(_s,n.stateNode));break;case 4:r=_s,s=ya,_s=n.stateNode.containerInfo,ya=!0,kc(t,e,n),_s=r,ya=s;break;case 0:case 11:case 14:case 15:if(!Js&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var o=s,i=o.destroy;o=o.tag,i!==void 0&&(o&2||o&4)&&uE(n,e,i),s=s.next}while(s!==r)}kc(t,e,n);break;case 1:if(!Js&&(ch(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Tr(n,e,a)}kc(t,e,n);break;case 21:kc(t,e,n);break;case 22:n.mode&1?(Js=(r=Js)||n.memoizedState!==null,kc(t,e,n),Js=r):kc(t,e,n);break;default:kc(t,e,n)}}function AO(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new jX),e.forEach(function(r){var s=YX.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function ha(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var o=t,i=e,a=i;e:for(;a!==null;){switch(a.tag){case 5:_s=a.stateNode,ya=!1;break e;case 3:_s=a.stateNode.containerInfo,ya=!0;break e;case 4:_s=a.stateNode.containerInfo,ya=!0;break e}a=a.return}if(_s===null)throw Error(Ye(160));f5(o,i,s),_s=null,ya=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(c){Tr(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)h5(e,t),e=e.sibling}function h5(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ha(e,t),Ya(t),r&4){try{ig(3,t,t.return),Rw(3,t)}catch(b){Tr(t,t.return,b)}try{ig(5,t,t.return)}catch(b){Tr(t,t.return,b)}}break;case 1:ha(e,t),Ya(t),r&512&&n!==null&&ch(n,n.return);break;case 5:if(ha(e,t),Ya(t),r&512&&n!==null&&ch(n,n.return),t.flags&32){var s=t.stateNode;try{Ng(s,"")}catch(b){Tr(t,t.return,b)}}if(r&4&&(s=t.stateNode,s!=null)){var o=t.memoizedProps,i=n!==null?n.memoizedProps:o,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&o.type==="radio"&&o.name!=null&&PM(s,o),MN(a,i);var c=MN(a,o);for(i=0;i<l.length;i+=2){var d=l[i],f=l[i+1];d==="style"?jM(s,f):d==="dangerouslySetInnerHTML"?LM(s,f):d==="children"?Ng(s,f):Sk(s,d,f,c)}switch(a){case"input":$N(s,o);break;case"textarea":FM(s,o);break;case"select":var p=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!o.multiple;var g=o.value;g!=null?ph(s,!!o.multiple,g,!1):p!==!!o.multiple&&(o.defaultValue!=null?ph(s,!!o.multiple,o.defaultValue,!0):ph(s,!!o.multiple,o.multiple?[]:"",!1))}s[Og]=o}catch(b){Tr(t,t.return,b)}}break;case 6:if(ha(e,t),Ya(t),r&4){if(t.stateNode===null)throw Error(Ye(162));s=t.stateNode,o=t.memoizedProps;try{s.nodeValue=o}catch(b){Tr(t,t.return,b)}}break;case 3:if(ha(e,t),Ya(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Tg(e.containerInfo)}catch(b){Tr(t,t.return,b)}break;case 4:ha(e,t),Ya(t);break;case 13:ha(e,t),Ya(t),s=t.child,s.flags&8192&&(o=s.memoizedState!==null,s.stateNode.isHidden=o,!o||s.alternate!==null&&s.alternate.memoizedState!==null||(nT=Fr())),r&4&&AO(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(Js=(c=Js)||d,ha(e,t),Js=c):ha(e,t),Ya(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!d&&t.mode&1)for(xt=t,d=t.child;d!==null;){for(f=xt=d;xt!==null;){switch(p=xt,g=p.child,p.tag){case 0:case 11:case 14:case 15:ig(4,p,p.return);break;case 1:ch(p,p.return);var x=p.stateNode;if(typeof x.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,x.props=e.memoizedProps,x.state=e.memoizedState,x.componentWillUnmount()}catch(b){Tr(r,n,b)}}break;case 5:ch(p,p.return);break;case 22:if(p.memoizedState!==null){DO(f);continue}}g!==null?(g.return=p,xt=g):DO(f)}d=d.sibling}e:for(d=null,f=t;;){if(f.tag===5){if(d===null){d=f;try{s=f.stateNode,c?(o=s.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(a=f.stateNode,l=f.memoizedProps.style,i=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=BM("display",i))}catch(b){Tr(t,t.return,b)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=c?"":f.memoizedProps}catch(b){Tr(t,t.return,b)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:ha(e,t),Ya(t),r&4&&AO(t);break;case 21:break;default:ha(e,t),Ya(t)}}function Ya(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(d5(n)){var r=n;break e}n=n.return}throw Error(Ye(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Ng(s,""),r.flags&=-33);var o=TO(t);hE(t,o,s);break;case 3:case 4:var i=r.stateNode.containerInfo,a=TO(t);fE(t,a,i);break;default:throw Error(Ye(161))}}catch(l){Tr(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function VX(t,e,n){xt=t,p5(t)}function p5(t,e,n){for(var r=(t.mode&1)!==0;xt!==null;){var s=xt,o=s.child;if(s.tag===22&&r){var i=s.memoizedState!==null||_x;if(!i){var a=s.alternate,l=a!==null&&a.memoizedState!==null||Js;a=_x;var c=Js;if(_x=i,(Js=l)&&!c)for(xt=s;xt!==null;)i=xt,l=i.child,i.tag===22&&i.memoizedState!==null?$O(s):l!==null?(l.return=i,xt=l):$O(s);for(;o!==null;)xt=o,p5(o),o=o.sibling;xt=s,_x=a,Js=c}RO(t)}else s.subtreeFlags&8772&&o!==null?(o.return=s,xt=o):RO(t)}}function RO(t){for(;xt!==null;){var e=xt;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Js||Rw(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Js)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:xa(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&pO(e,o,r);break;case 3:var i=e.updateQueue;if(i!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}pO(e,i,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&Tg(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Ye(163))}Js||e.flags&512&&dE(e)}catch(p){Tr(e,e.return,p)}}if(e===t){xt=null;break}if(n=e.sibling,n!==null){n.return=e.return,xt=n;break}xt=e.return}}function DO(t){for(;xt!==null;){var e=xt;if(e===t){xt=null;break}var n=e.sibling;if(n!==null){n.return=e.return,xt=n;break}xt=e.return}}function $O(t){for(;xt!==null;){var e=xt;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Rw(4,e)}catch(l){Tr(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(l){Tr(e,s,l)}}var o=e.return;try{dE(e)}catch(l){Tr(e,o,l)}break;case 5:var i=e.return;try{dE(e)}catch(l){Tr(e,i,l)}}}catch(l){Tr(e,e.return,l)}if(e===t){xt=null;break}var a=e.sibling;if(a!==null){a.return=e.return,xt=a;break}xt=e.return}}var WX=Math.ceil,hb=hc.ReactCurrentDispatcher,eT=hc.ReactCurrentOwner,Ki=hc.ReactCurrentBatchConfig,xn=0,Cs=null,Gr=null,Bs=0,li=0,uh=Nu(0),as=0,Bg=null,Pd=0,Dw=0,tT=0,ag=null,Po=null,nT=0,Wh=1/0,Ll=null,pb=!1,pE=null,Qc=null,Px=!1,jc=null,mb=0,lg=0,mE=null,Ey=-1,Iy=0;function yo(){return xn&6?Fr():Ey!==-1?Ey:Ey=Fr()}function Jc(t){return t.mode&1?xn&2&&Bs!==0?Bs&-Bs:IX.transition!==null?(Iy===0&&(Iy=QM()),Iy):(t=$n,t!==0||(t=window.event,t=t===void 0?16:oL(t.type)),t):1}function Ia(t,e,n,r){if(50<lg)throw lg=0,mE=null,Error(Ye(185));y0(t,n,r),(!(xn&2)||t!==Cs)&&(t===Cs&&(!(xn&2)&&(Dw|=n),as===4&&Fc(t,Bs)),Wo(t,r),n===1&&xn===0&&!(e.mode&1)&&(Wh=Fr()+500,kw&&Eu()))}function Wo(t,e){var n=t.callbackNode;Iq(t,e);var r=Qy(t,t===Cs?Bs:0);if(r===0)n!==null&&z$(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&z$(n),e===1)t.tag===0?EX(OO.bind(null,t)):NL(OO.bind(null,t)),vX(function(){!(xn&6)&&Eu()}),n=null;else{switch(JM(r)){case 1:n=Tk;break;case 4:n=YM;break;case 16:n=Zy;break;case 536870912:n=ZM;break;default:n=Zy}n=C5(n,m5.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function m5(t,e){if(Ey=-1,Iy=0,xn&6)throw Error(Ye(327));var n=t.callbackNode;if(bh()&&t.callbackNode!==n)return null;var r=Qy(t,t===Cs?Bs:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=gb(t,r);else{e=r;var s=xn;xn|=2;var o=x5();(Cs!==t||Bs!==e)&&(Ll=null,Wh=Fr()+500,Nd(t,e));do try{GX();break}catch(a){g5(t,a)}while(!0);zk(),hb.current=o,xn=s,Gr!==null?e=0:(Cs=null,Bs=0,e=as)}if(e!==0){if(e===2&&(s=VN(t),s!==0&&(r=s,e=gE(t,s))),e===1)throw n=Bg,Nd(t,0),Fc(t,r),Wo(t,Fr()),n;if(e===6)Fc(t,r);else{if(s=t.current.alternate,!(r&30)&&!UX(s)&&(e=gb(t,r),e===2&&(o=VN(t),o!==0&&(r=o,e=gE(t,o))),e===1))throw n=Bg,Nd(t,0),Fc(t,r),Wo(t,Fr()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(Ye(345));case 2:sd(t,Po,Ll);break;case 3:if(Fc(t,r),(r&130023424)===r&&(e=nT+500-Fr(),10<e)){if(Qy(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){yo(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=YN(sd.bind(null,t,Po,Ll),e);break}sd(t,Po,Ll);break;case 4:if(Fc(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var i=31-Ea(r);o=1<<i,i=e[i],i>s&&(s=i),r&=~o}if(r=s,r=Fr()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*WX(r/1960))-r,10<r){t.timeoutHandle=YN(sd.bind(null,t,Po,Ll),r);break}sd(t,Po,Ll);break;case 5:sd(t,Po,Ll);break;default:throw Error(Ye(329))}}}return Wo(t,Fr()),t.callbackNode===n?m5.bind(null,t):null}function gE(t,e){var n=ag;return t.current.memoizedState.isDehydrated&&(Nd(t,e).flags|=256),t=gb(t,e),t!==2&&(e=Po,Po=n,e!==null&&xE(e)),t}function xE(t){Po===null?Po=t:Po.push.apply(Po,t)}function UX(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],o=s.getSnapshot;s=s.value;try{if(!Da(o(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Fc(t,e){for(e&=~tT,e&=~Dw,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Ea(e),r=1<<n;t[n]=-1,e&=~r}}function OO(t){if(xn&6)throw Error(Ye(327));bh();var e=Qy(t,0);if(!(e&1))return Wo(t,Fr()),null;var n=gb(t,e);if(t.tag!==0&&n===2){var r=VN(t);r!==0&&(e=r,n=gE(t,r))}if(n===1)throw n=Bg,Nd(t,0),Fc(t,e),Wo(t,Fr()),n;if(n===6)throw Error(Ye(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,sd(t,Po,Ll),Wo(t,Fr()),null}function rT(t,e){var n=xn;xn|=1;try{return t(e)}finally{xn=n,xn===0&&(Wh=Fr()+500,kw&&Eu())}}function Fd(t){jc!==null&&jc.tag===0&&!(xn&6)&&bh();var e=xn;xn|=1;var n=Ki.transition,r=$n;try{if(Ki.transition=null,$n=1,t)return t()}finally{$n=r,Ki.transition=n,xn=e,!(xn&6)&&Eu()}}function sT(){li=uh.current,rr(uh)}function Nd(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,wX(n)),Gr!==null)for(n=Gr.return;n!==null;){var r=n;switch(Lk(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&rb();break;case 3:zh(),rr(zo),rr(ao),qk();break;case 5:Gk(r);break;case 4:zh();break;case 13:rr(pr);break;case 19:rr(pr);break;case 10:Vk(r.type._context);break;case 22:case 23:sT()}n=n.return}if(Cs=t,Gr=t=eu(t.current,null),Bs=li=e,as=0,Bg=null,tT=Dw=Pd=0,Po=ag=null,pd!==null){for(e=0;e<pd.length;e++)if(n=pd[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,o=n.pending;if(o!==null){var i=o.next;o.next=s,r.next=i}n.pending=r}pd=null}return t}function g5(t,e){do{var n=Gr;try{if(zk(),Cy.current=fb,db){for(var r=xr.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}db=!1}if(_d=0,ys=os=xr=null,og=!1,Fg=0,eT.current=null,n===null||n.return===null){as=1,Bg=e,Gr=null;break}e:{var o=t,i=n.return,a=n,l=e;if(e=Bs,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,d=a,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var p=d.alternate;p?(d.updateQueue=p.updateQueue,d.memoizedState=p.memoizedState,d.lanes=p.lanes):(d.updateQueue=null,d.memoizedState=null)}var g=wO(i);if(g!==null){g.flags&=-257,vO(g,i,a,o,e),g.mode&1&&bO(o,c,e),e=g,l=c;var x=e.updateQueue;if(x===null){var b=new Set;b.add(l),e.updateQueue=b}else x.add(l);break e}else{if(!(e&1)){bO(o,c,e),oT();break e}l=Error(Ye(426))}}else if(ur&&a.mode&1){var w=wO(i);if(w!==null){!(w.flags&65536)&&(w.flags|=256),vO(w,i,a,o,e),Bk(Vh(l,a));break e}}o=l=Vh(l,a),as!==4&&(as=2),ag===null?ag=[o]:ag.push(o),o=i;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var C=JL(o,l,e);hO(o,C);break e;case 1:a=l;var N=o.type,k=o.stateNode;if(!(o.flags&128)&&(typeof N.getDerivedStateFromError=="function"||k!==null&&typeof k.componentDidCatch=="function"&&(Qc===null||!Qc.has(k)))){o.flags|=65536,e&=-e,o.lanes|=e;var I=e5(o,a,e);hO(o,I);break e}}o=o.return}while(o!==null)}b5(n)}catch(R){e=R,Gr===n&&n!==null&&(Gr=n=n.return);continue}break}while(!0)}function x5(){var t=hb.current;return hb.current=fb,t===null?fb:t}function oT(){(as===0||as===3||as===2)&&(as=4),Cs===null||!(Pd&268435455)&&!(Dw&268435455)||Fc(Cs,Bs)}function gb(t,e){var n=xn;xn|=2;var r=x5();(Cs!==t||Bs!==e)&&(Ll=null,Nd(t,e));do try{HX();break}catch(s){g5(t,s)}while(!0);if(zk(),xn=n,hb.current=r,Gr!==null)throw Error(Ye(261));return Cs=null,Bs=0,as}function HX(){for(;Gr!==null;)y5(Gr)}function GX(){for(;Gr!==null&&!xq();)y5(Gr)}function y5(t){var e=v5(t.alternate,t,li);t.memoizedProps=t.pendingProps,e===null?b5(t):Gr=e,eT.current=null}function b5(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=BX(n,e),n!==null){n.flags&=32767,Gr=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{as=6,Gr=null;return}}else if(n=LX(n,e,li),n!==null){Gr=n;return}if(e=e.sibling,e!==null){Gr=e;return}Gr=e=t}while(e!==null);as===0&&(as=5)}function sd(t,e,n){var r=$n,s=Ki.transition;try{Ki.transition=null,$n=1,qX(t,e,n,r)}finally{Ki.transition=s,$n=r}return null}function qX(t,e,n,r){do bh();while(jc!==null);if(xn&6)throw Error(Ye(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Ye(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(kq(t,o),t===Cs&&(Gr=Cs=null,Bs=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Px||(Px=!0,C5(Zy,function(){return bh(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=Ki.transition,Ki.transition=null;var i=$n;$n=1;var a=xn;xn|=4,eT.current=null,zX(t,n),h5(n,t),hX(XN),Jy=!!qN,XN=qN=null,t.current=n,VX(n),yq(),xn=a,$n=i,Ki.transition=o}else t.current=n;if(Px&&(Px=!1,jc=t,mb=s),o=t.pendingLanes,o===0&&(Qc=null),vq(n.stateNode),Wo(t,Fr()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(pb)throw pb=!1,t=pE,pE=null,t;return mb&1&&t.tag!==0&&bh(),o=t.pendingLanes,o&1?t===mE?lg++:(lg=0,mE=t):lg=0,Eu(),null}function bh(){if(jc!==null){var t=JM(mb),e=Ki.transition,n=$n;try{if(Ki.transition=null,$n=16>t?16:t,jc===null)var r=!1;else{if(t=jc,jc=null,mb=0,xn&6)throw Error(Ye(331));var s=xn;for(xn|=4,xt=t.current;xt!==null;){var o=xt,i=o.child;if(xt.flags&16){var a=o.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(xt=c;xt!==null;){var d=xt;switch(d.tag){case 0:case 11:case 15:ig(8,d,o)}var f=d.child;if(f!==null)f.return=d,xt=f;else for(;xt!==null;){d=xt;var p=d.sibling,g=d.return;if(u5(d),d===c){xt=null;break}if(p!==null){p.return=g,xt=p;break}xt=g}}}var x=o.alternate;if(x!==null){var b=x.child;if(b!==null){x.child=null;do{var w=b.sibling;b.sibling=null,b=w}while(b!==null)}}xt=o}}if(o.subtreeFlags&2064&&i!==null)i.return=o,xt=i;else e:for(;xt!==null;){if(o=xt,o.flags&2048)switch(o.tag){case 0:case 11:case 15:ig(9,o,o.return)}var C=o.sibling;if(C!==null){C.return=o.return,xt=C;break e}xt=o.return}}var N=t.current;for(xt=N;xt!==null;){i=xt;var k=i.child;if(i.subtreeFlags&2064&&k!==null)k.return=i,xt=k;else e:for(i=N;xt!==null;){if(a=xt,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Rw(9,a)}}catch(R){Tr(a,a.return,R)}if(a===i){xt=null;break e}var I=a.sibling;if(I!==null){I.return=a.return,xt=I;break e}xt=a.return}}if(xn=s,Eu(),pl&&typeof pl.onPostCommitFiberRoot=="function")try{pl.onPostCommitFiberRoot(Cw,t)}catch{}r=!0}return r}finally{$n=n,Ki.transition=e}}return!1}function _O(t,e,n){e=Vh(n,e),e=JL(t,e,1),t=Zc(t,e,1),e=yo(),t!==null&&(y0(t,1,e),Wo(t,e))}function Tr(t,e,n){if(t.tag===3)_O(t,t,n);else for(;e!==null;){if(e.tag===3){_O(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Qc===null||!Qc.has(r))){t=Vh(n,t),t=e5(e,t,1),e=Zc(e,t,1),t=yo(),e!==null&&(y0(e,1,t),Wo(e,t));break}}e=e.return}}function XX(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=yo(),t.pingedLanes|=t.suspendedLanes&n,Cs===t&&(Bs&n)===n&&(as===4||as===3&&(Bs&130023424)===Bs&&500>Fr()-nT?Nd(t,0):tT|=n),Wo(t,e)}function w5(t,e){e===0&&(t.mode&1?(e=Ex,Ex<<=1,!(Ex&130023424)&&(Ex=4194304)):e=1);var n=yo();t=tc(t,e),t!==null&&(y0(t,e,n),Wo(t,n))}function KX(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),w5(t,n)}function YX(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(Ye(314))}r!==null&&r.delete(e),w5(t,n)}var v5;v5=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||zo.current)Lo=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Lo=!1,MX(t,e,n);Lo=!!(t.flags&131072)}else Lo=!1,ur&&e.flags&1048576&&EL(e,ib,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Ny(t,e),t=e.pendingProps;var s=Lh(e,ao.current);yh(e,n),s=Kk(null,e,r,t,s,n);var o=Yk();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Vo(r)?(o=!0,sb(e)):o=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Uk(e),s.updater=Aw,e.stateNode=s,s._reactInternals=e,rE(e,r,t,n),e=iE(null,e,r,!0,o,n)):(e.tag=0,ur&&o&&Mk(e),ho(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Ny(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=QX(r),t=xa(r,t),s){case 0:e=oE(null,e,r,t,n);break e;case 1:e=NO(null,e,r,t,n);break e;case 11:e=CO(null,e,r,t,n);break e;case 14:e=SO(null,e,r,xa(r.type,t),n);break e}throw Error(Ye(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:xa(r,s),oE(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:xa(r,s),NO(t,e,r,s,n);case 3:e:{if(s5(e),t===null)throw Error(Ye(387));r=e.pendingProps,o=e.memoizedState,s=o.element,DL(t,e),cb(e,r,null,n);var i=e.memoizedState;if(r=i.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){s=Vh(Error(Ye(423)),e),e=EO(t,e,r,n,s);break e}else if(r!==s){s=Vh(Error(Ye(424)),e),e=EO(t,e,r,n,s);break e}else for(di=Yc(e.stateNode.containerInfo.firstChild),hi=e,ur=!0,wa=null,n=AL(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Bh(),r===s){e=nc(t,e,n);break e}ho(t,e,r,n)}e=e.child}return e;case 5:return $L(e),t===null&&eE(e),r=e.type,s=e.pendingProps,o=t!==null?t.memoizedProps:null,i=s.children,KN(r,s)?i=null:o!==null&&KN(r,o)&&(e.flags|=32),r5(t,e),ho(t,e,i,n),e.child;case 6:return t===null&&eE(e),null;case 13:return o5(t,e,n);case 4:return Hk(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=jh(e,null,r,n):ho(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:xa(r,s),CO(t,e,r,s,n);case 7:return ho(t,e,e.pendingProps,n),e.child;case 8:return ho(t,e,e.pendingProps.children,n),e.child;case 12:return ho(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,o=e.memoizedProps,i=s.value,Yn(ab,r._currentValue),r._currentValue=i,o!==null)if(Da(o.value,i)){if(o.children===s.children&&!zo.current){e=nc(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var a=o.dependencies;if(a!==null){i=o.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(o.tag===1){l=Xl(-1,n&-n),l.tag=2;var c=o.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?l.next=l:(l.next=d.next,d.next=l),c.pending=l}}o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),tE(o.return,n,e),a.lanes|=n;break}l=l.next}}else if(o.tag===10)i=o.type===e.type?null:o.child;else if(o.tag===18){if(i=o.return,i===null)throw Error(Ye(341));i.lanes|=n,a=i.alternate,a!==null&&(a.lanes|=n),tE(i,n,e),i=o.sibling}else i=o.child;if(i!==null)i.return=o;else for(i=o;i!==null;){if(i===e){i=null;break}if(o=i.sibling,o!==null){o.return=i.return,i=o;break}i=i.return}o=i}ho(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,yh(e,n),s=Ji(s),r=r(s),e.flags|=1,ho(t,e,r,n),e.child;case 14:return r=e.type,s=xa(r,e.pendingProps),s=xa(r.type,s),SO(t,e,r,s,n);case 15:return t5(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:xa(r,s),Ny(t,e),e.tag=1,Vo(r)?(t=!0,sb(e)):t=!1,yh(e,n),QL(e,r,s),rE(e,r,s,n),iE(null,e,r,!0,t,n);case 19:return i5(t,e,n);case 22:return n5(t,e,n)}throw Error(Ye(156,e.tag))};function C5(t,e){return KM(t,e)}function ZX(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ji(t,e,n,r){return new ZX(t,e,n,r)}function iT(t){return t=t.prototype,!(!t||!t.isReactComponent)}function QX(t){if(typeof t=="function")return iT(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Ek)return 11;if(t===Ik)return 14}return 2}function eu(t,e){var n=t.alternate;return n===null?(n=ji(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function ky(t,e,n,r,s,o){var i=2;if(r=t,typeof t=="function")iT(t)&&(i=1);else if(typeof t=="string")i=5;else e:switch(t){case eh:return Ed(n.children,s,o,e);case Nk:i=8,s|=8;break;case kN:return t=ji(12,n,e,s|2),t.elementType=kN,t.lanes=o,t;case TN:return t=ji(13,n,e,s),t.elementType=TN,t.lanes=o,t;case AN:return t=ji(19,n,e,s),t.elementType=AN,t.lanes=o,t;case $M:return $w(n,s,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case RM:i=10;break e;case DM:i=9;break e;case Ek:i=11;break e;case Ik:i=14;break e;case $c:i=16,r=null;break e}throw Error(Ye(130,t==null?t:typeof t,""))}return e=ji(i,n,e,s),e.elementType=t,e.type=r,e.lanes=o,e}function Ed(t,e,n,r){return t=ji(7,t,r,e),t.lanes=n,t}function $w(t,e,n,r){return t=ji(22,t,r,e),t.elementType=$M,t.lanes=n,t.stateNode={isHidden:!1},t}function DS(t,e,n){return t=ji(6,t,null,e),t.lanes=n,t}function $S(t,e,n){return e=ji(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function JX(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=fS(0),this.expirationTimes=fS(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=fS(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function aT(t,e,n,r,s,o,i,a,l){return t=new JX(t,e,n,a,l),e===1?(e=1,o===!0&&(e|=8)):e=0,o=ji(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Uk(o),t}function eK(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Jf,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function S5(t){if(!t)return uu;t=t._reactInternals;e:{if(sf(t)!==t||t.tag!==1)throw Error(Ye(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Vo(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Ye(171))}if(t.tag===1){var n=t.type;if(Vo(n))return SL(t,n,e)}return e}function N5(t,e,n,r,s,o,i,a,l){return t=aT(n,r,!0,t,s,o,i,a,l),t.context=S5(null),n=t.current,r=yo(),s=Jc(n),o=Xl(r,s),o.callback=e??null,Zc(n,o,s),t.current.lanes=s,y0(t,s,r),Wo(t,r),t}function Ow(t,e,n,r){var s=e.current,o=yo(),i=Jc(s);return n=S5(n),e.context===null?e.context=n:e.pendingContext=n,e=Xl(o,i),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Zc(s,e,i),t!==null&&(Ia(t,s,i,o),vy(t,s,i)),i}function xb(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function PO(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function lT(t,e){PO(t,e),(t=t.alternate)&&PO(t,e)}function tK(){return null}var E5=typeof reportError=="function"?reportError:function(t){console.error(t)};function cT(t){this._internalRoot=t}_w.prototype.render=cT.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Ye(409));Ow(t,e,null,null)};_w.prototype.unmount=cT.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Fd(function(){Ow(null,t,null,null)}),e[ec]=null}};function _w(t){this._internalRoot=t}_w.prototype.unstable_scheduleHydration=function(t){if(t){var e=nL();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Pc.length&&e!==0&&e<Pc[n].priority;n++);Pc.splice(n,0,t),n===0&&sL(t)}};function uT(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Pw(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function FO(){}function nK(t,e,n,r,s){if(s){if(typeof r=="function"){var o=r;r=function(){var c=xb(i);o.call(c)}}var i=N5(e,r,t,0,null,!1,!1,"",FO);return t._reactRootContainer=i,t[ec]=i.current,Dg(t.nodeType===8?t.parentNode:t),Fd(),i}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var c=xb(l);a.call(c)}}var l=aT(t,0,!1,null,null,!1,!1,"",FO);return t._reactRootContainer=l,t[ec]=l.current,Dg(t.nodeType===8?t.parentNode:t),Fd(function(){Ow(e,l,n,r)}),l}function Fw(t,e,n,r,s){var o=n._reactRootContainer;if(o){var i=o;if(typeof s=="function"){var a=s;s=function(){var l=xb(i);a.call(l)}}Ow(e,i,t,s)}else i=nK(n,e,t,s,r);return xb(i)}eL=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=jm(e.pendingLanes);n!==0&&(Ak(e,n|1),Wo(e,Fr()),!(xn&6)&&(Wh=Fr()+500,Eu()))}break;case 13:Fd(function(){var r=tc(t,1);if(r!==null){var s=yo();Ia(r,t,1,s)}}),lT(t,1)}};Rk=function(t){if(t.tag===13){var e=tc(t,134217728);if(e!==null){var n=yo();Ia(e,t,134217728,n)}lT(t,134217728)}};tL=function(t){if(t.tag===13){var e=Jc(t),n=tc(t,e);if(n!==null){var r=yo();Ia(n,t,e,r)}lT(t,e)}};nL=function(){return $n};rL=function(t,e){var n=$n;try{return $n=t,e()}finally{$n=n}};BN=function(t,e,n){switch(e){case"input":if($N(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Iw(r);if(!s)throw Error(Ye(90));_M(r),$N(r,s)}}}break;case"textarea":FM(t,n);break;case"select":e=n.value,e!=null&&ph(t,!!n.multiple,e,!1)}};WM=rT;UM=Fd;var rK={usingClientEntryPoint:!1,Events:[w0,sh,Iw,zM,VM,rT]},fm={findFiberByHostInstance:hd,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},sK={bundleType:fm.bundleType,version:fm.version,rendererPackageName:fm.rendererPackageName,rendererConfig:fm.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:hc.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=qM(t),t===null?null:t.stateNode},findFiberByHostInstance:fm.findFiberByHostInstance||tK,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Fx=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Fx.isDisabled&&Fx.supportsFiber)try{Cw=Fx.inject(sK),pl=Fx}catch{}}wi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=rK;wi.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!uT(e))throw Error(Ye(200));return eK(t,e,null,n)};wi.createRoot=function(t,e){if(!uT(t))throw Error(Ye(299));var n=!1,r="",s=E5;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=aT(t,1,!1,null,null,n,!1,r,s),t[ec]=e.current,Dg(t.nodeType===8?t.parentNode:t),new cT(e)};wi.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Ye(188)):(t=Object.keys(t).join(","),Error(Ye(268,t)));return t=qM(e),t=t===null?null:t.stateNode,t};wi.flushSync=function(t){return Fd(t)};wi.hydrate=function(t,e,n){if(!Pw(e))throw Error(Ye(200));return Fw(null,t,e,!0,n)};wi.hydrateRoot=function(t,e,n){if(!uT(t))throw Error(Ye(405));var r=n!=null&&n.hydratedSources||null,s=!1,o="",i=E5;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(i=n.onRecoverableError)),e=N5(e,null,t,1,n??null,s,!1,o,i),t[ec]=e.current,Dg(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new _w(e)};wi.render=function(t,e,n){if(!Pw(e))throw Error(Ye(200));return Fw(null,t,e,!1,n)};wi.unmountComponentAtNode=function(t){if(!Pw(t))throw Error(Ye(40));return t._reactRootContainer?(Fd(function(){Fw(null,null,t,!1,function(){t._reactRootContainer=null,t[ec]=null})}),!0):!1};wi.unstable_batchedUpdates=rT;wi.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Pw(n))throw Error(Ye(200));if(t==null||t._reactInternals===void 0)throw Error(Ye(38));return Fw(t,e,n,!1,r)};wi.version="18.3.1-next-f1338f8080-20240426";function I5(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(I5)}catch(t){console.error(t)}}I5(),IM.exports=wi;var Mw=IM.exports;const Mx=mp(Mw);var k5,MO=Mw;k5=MO.createRoot,MO.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function jg(){return jg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},jg.apply(this,arguments)}var zc;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(zc||(zc={}));const LO="popstate";function oK(t){t===void 0&&(t={});function e(r,s){let{pathname:o,search:i,hash:a}=r.location;return yE("",{pathname:o,search:i,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:yb(s)}return aK(e,n,null,t)}function Br(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function T5(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function iK(){return Math.random().toString(36).substr(2,8)}function BO(t,e){return{usr:t.state,key:t.key,idx:e}}function yE(t,e,n,r){return n===void 0&&(n=null),jg({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?bp(e):e,{state:n,key:e&&e.key||r||iK()})}function yb(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function bp(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function aK(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:o=!1}=r,i=s.history,a=zc.Pop,l=null,c=d();c==null&&(c=0,i.replaceState(jg({},i.state,{idx:c}),""));function d(){return(i.state||{idx:null}).idx}function f(){a=zc.Pop;let w=d(),C=w==null?null:w-c;c=w,l&&l({action:a,location:b.location,delta:C})}function p(w,C){a=zc.Push;let N=yE(b.location,w,C);c=d()+1;let k=BO(N,c),I=b.createHref(N);try{i.pushState(k,"",I)}catch(R){if(R instanceof DOMException&&R.name==="DataCloneError")throw R;s.location.assign(I)}o&&l&&l({action:a,location:b.location,delta:1})}function g(w,C){a=zc.Replace;let N=yE(b.location,w,C);c=d();let k=BO(N,c),I=b.createHref(N);i.replaceState(k,"",I),o&&l&&l({action:a,location:b.location,delta:0})}function x(w){let C=s.location.origin!=="null"?s.location.origin:s.location.href,N=typeof w=="string"?w:yb(w);return N=N.replace(/ $/,"%20"),Br(C,"No window.location.(origin|href) available to create URL for href: "+N),new URL(N,C)}let b={get action(){return a},get location(){return t(s,i)},listen(w){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(LO,f),l=w,()=>{s.removeEventListener(LO,f),l=null}},createHref(w){return e(s,w)},createURL:x,encodeLocation(w){let C=x(w);return{pathname:C.pathname,search:C.search,hash:C.hash}},push:p,replace:g,go(w){return i.go(w)}};return b}var jO;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(jO||(jO={}));function lK(t,e,n){return n===void 0&&(n="/"),cK(t,e,n)}function cK(t,e,n,r){let s=typeof e=="string"?bp(e):e,o=dT(s.pathname||"/",n);if(o==null)return null;let i=A5(t);uK(i);let a=null;for(let l=0;a==null&&l<i.length;++l){let c=CK(o);a=bK(i[l],c)}return a}function A5(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(o,i,a)=>{let l={relativePath:a===void 0?o.path||"":a,caseSensitive:o.caseSensitive===!0,childrenIndex:i,route:o};l.relativePath.startsWith("/")&&(Br(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=tu([r,l.relativePath]),d=n.concat(l);o.children&&o.children.length>0&&(Br(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),A5(o.children,e,d,c)),!(o.path==null&&!o.index)&&e.push({path:c,score:xK(c,o.index),routesMeta:d})};return t.forEach((o,i)=>{var a;if(o.path===""||!((a=o.path)!=null&&a.includes("?")))s(o,i);else for(let l of R5(o.path))s(o,i,l)}),e}function R5(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),o=n.replace(/\?$/,"");if(r.length===0)return s?[o,""]:[o];let i=R5(r.join("/")),a=[];return a.push(...i.map(l=>l===""?o:[o,l].join("/"))),s&&a.push(...i),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function uK(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:yK(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const dK=/^:[\w-]+$/,fK=3,hK=2,pK=1,mK=10,gK=-2,zO=t=>t==="*";function xK(t,e){let n=t.split("/"),r=n.length;return n.some(zO)&&(r+=gK),e&&(r+=hK),n.filter(s=>!zO(s)).reduce((s,o)=>s+(dK.test(o)?fK:o===""?pK:mK),r)}function yK(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function bK(t,e,n){let{routesMeta:r}=t,s={},o="/",i=[];for(let a=0;a<r.length;++a){let l=r[a],c=a===r.length-1,d=o==="/"?e:e.slice(o.length)||"/",f=wK({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},d),p=l.route;if(!f)return null;Object.assign(s,f.params),i.push({params:s,pathname:tu([o,f.pathname]),pathnameBase:IK(tu([o,f.pathnameBase])),route:p}),f.pathnameBase!=="/"&&(o=tu([o,f.pathnameBase]))}return i}function wK(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=vK(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let o=s[0],i=o.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((c,d,f)=>{let{paramName:p,isOptional:g}=d;if(p==="*"){let b=a[f]||"";i=o.slice(0,o.length-b.length).replace(/(.)\/+$/,"$1")}const x=a[f];return g&&!x?c[p]=void 0:c[p]=(x||"").replace(/%2F/g,"/"),c},{}),pathname:o,pathnameBase:i,pattern:t}}function vK(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),T5(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(i,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function CK(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return T5(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function dT(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function SK(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?bp(t):t;return{pathname:n?n.startsWith("/")?n:NK(n,e):e,search:kK(r),hash:TK(s)}}function NK(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function OS(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function EK(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function fT(t,e){let n=EK(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function hT(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=bp(t):(s=jg({},t),Br(!s.pathname||!s.pathname.includes("?"),OS("?","pathname","search",s)),Br(!s.pathname||!s.pathname.includes("#"),OS("#","pathname","hash",s)),Br(!s.search||!s.search.includes("#"),OS("#","search","hash",s)));let o=t===""||s.pathname==="",i=o?"/":s.pathname,a;if(i==null)a=n;else{let f=e.length-1;if(!r&&i.startsWith("..")){let p=i.split("/");for(;p[0]==="..";)p.shift(),f-=1;s.pathname=p.join("/")}a=f>=0?e[f]:"/"}let l=SK(s,a),c=i&&i!=="/"&&i.endsWith("/"),d=(o||i===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||d)&&(l.pathname+="/"),l}const tu=t=>t.join("/").replace(/\/\/+/g,"/"),IK=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),kK=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,TK=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function AK(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const D5=["post","put","patch","delete"];new Set(D5);const RK=["get",...D5];new Set(RK);/**
 * React Router v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function zg(){return zg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},zg.apply(this,arguments)}const pT=A.createContext(null),DK=A.createContext(null),Iu=A.createContext(null),Lw=A.createContext(null),Dl=A.createContext({outlet:null,matches:[],isDataRoute:!1}),$5=A.createContext(null);function $K(t,e){let{relative:n}=e===void 0?{}:e;wp()||Br(!1);let{basename:r,navigator:s}=A.useContext(Iu),{hash:o,pathname:i,search:a}=_5(t,{relative:n}),l=i;return r!=="/"&&(l=i==="/"?r:tu([r,i])),s.createHref({pathname:l,search:a,hash:o})}function wp(){return A.useContext(Lw)!=null}function of(){return wp()||Br(!1),A.useContext(Lw).location}function O5(t){A.useContext(Iu).static||A.useLayoutEffect(t)}function af(){let{isDataRoute:t}=A.useContext(Dl);return t?XK():OK()}function OK(){wp()||Br(!1);let t=A.useContext(pT),{basename:e,future:n,navigator:r}=A.useContext(Iu),{matches:s}=A.useContext(Dl),{pathname:o}=of(),i=JSON.stringify(fT(s,n.v7_relativeSplatPath)),a=A.useRef(!1);return O5(()=>{a.current=!0}),A.useCallback(function(c,d){if(d===void 0&&(d={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let f=hT(c,JSON.parse(i),o,d.relative==="path");t==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:tu([e,f.pathname])),(d.replace?r.replace:r.push)(f,d.state,d)},[e,r,i,o,t])}const _K=A.createContext(null);function PK(t){let e=A.useContext(Dl).outlet;return e&&A.createElement(_K.Provider,{value:t},e)}function FK(){let{matches:t}=A.useContext(Dl),e=t[t.length-1];return e?e.params:{}}function _5(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=A.useContext(Iu),{matches:s}=A.useContext(Dl),{pathname:o}=of(),i=JSON.stringify(fT(s,r.v7_relativeSplatPath));return A.useMemo(()=>hT(t,JSON.parse(i),o,n==="path"),[t,i,o,n])}function MK(t,e){return LK(t,e)}function LK(t,e,n,r){wp()||Br(!1);let{navigator:s,static:o}=A.useContext(Iu),{matches:i}=A.useContext(Dl),a=i[i.length-1],l=a?a.params:{};a&&a.pathname;let c=a?a.pathnameBase:"/";a&&a.route;let d=of(),f;if(e){var p;let C=typeof e=="string"?bp(e):e;c==="/"||(p=C.pathname)!=null&&p.startsWith(c)||Br(!1),f=C}else f=d;let g=f.pathname||"/",x=g;if(c!=="/"){let C=c.replace(/^\//,"").split("/");x="/"+g.replace(/^\//,"").split("/").slice(C.length).join("/")}let b=lK(t,{pathname:x}),w=WK(b&&b.map(C=>Object.assign({},C,{params:Object.assign({},l,C.params),pathname:tu([c,s.encodeLocation?s.encodeLocation(C.pathname).pathname:C.pathname]),pathnameBase:C.pathnameBase==="/"?c:tu([c,s.encodeLocation?s.encodeLocation(C.pathnameBase).pathname:C.pathnameBase])})),i,n,r);return e&&w?A.createElement(Lw.Provider,{value:{location:zg({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:zc.Pop}},w):w}function BK(){let t=qK(),e=AK(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return A.createElement(A.Fragment,null,A.createElement("h2",null,"Unexpected Application Error!"),A.createElement("h3",{style:{fontStyle:"italic"}},e),n?A.createElement("pre",{style:s},n):null,null)}const jK=A.createElement(BK,null);class zK extends A.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?A.createElement(Dl.Provider,{value:this.props.routeContext},A.createElement($5.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function VK(t){let{routeContext:e,match:n,children:r}=t,s=A.useContext(pT);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),A.createElement(Dl.Provider,{value:e},r)}function WK(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var o;if(!n)return null;if(n.errors)t=n.matches;else if((o=r)!=null&&o.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let i=t,a=(s=n)==null?void 0:s.errors;if(a!=null){let d=i.findIndex(f=>f.route.id&&(a==null?void 0:a[f.route.id])!==void 0);d>=0||Br(!1),i=i.slice(0,Math.min(i.length,d+1))}let l=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let d=0;d<i.length;d++){let f=i[d];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(c=d),f.route.id){let{loaderData:p,errors:g}=n,x=f.route.loader&&p[f.route.id]===void 0&&(!g||g[f.route.id]===void 0);if(f.route.lazy||x){l=!0,c>=0?i=i.slice(0,c+1):i=[i[0]];break}}}return i.reduceRight((d,f,p)=>{let g,x=!1,b=null,w=null;n&&(g=a&&f.route.id?a[f.route.id]:void 0,b=f.route.errorElement||jK,l&&(c<0&&p===0?(KK("route-fallback"),x=!0,w=null):c===p&&(x=!0,w=f.route.hydrateFallbackElement||null)));let C=e.concat(i.slice(0,p+1)),N=()=>{let k;return g?k=b:x?k=w:f.route.Component?k=A.createElement(f.route.Component,null):f.route.element?k=f.route.element:k=d,A.createElement(VK,{match:f,routeContext:{outlet:d,matches:C,isDataRoute:n!=null},children:k})};return n&&(f.route.ErrorBoundary||f.route.errorElement||p===0)?A.createElement(zK,{location:n.location,revalidation:n.revalidation,component:b,error:g,children:N(),routeContext:{outlet:null,matches:C,isDataRoute:!0}}):N()},null)}var P5=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(P5||{}),F5=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(F5||{});function UK(t){let e=A.useContext(pT);return e||Br(!1),e}function HK(t){let e=A.useContext(DK);return e||Br(!1),e}function GK(t){let e=A.useContext(Dl);return e||Br(!1),e}function M5(t){let e=GK(),n=e.matches[e.matches.length-1];return n.route.id||Br(!1),n.route.id}function qK(){var t;let e=A.useContext($5),n=HK(),r=M5();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function XK(){let{router:t}=UK(P5.UseNavigateStable),e=M5(F5.UseNavigateStable),n=A.useRef(!1);return O5(()=>{n.current=!0}),A.useCallback(function(s,o){o===void 0&&(o={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,zg({fromRouteId:e},o)))},[t,e])}const VO={};function KK(t,e,n){VO[t]||(VO[t]=!0)}function YK(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function L5(t){let{to:e,replace:n,state:r,relative:s}=t;wp()||Br(!1);let{future:o,static:i}=A.useContext(Iu),{matches:a}=A.useContext(Dl),{pathname:l}=of(),c=af(),d=hT(e,fT(a,o.v7_relativeSplatPath),l,s==="path"),f=JSON.stringify(d);return A.useEffect(()=>c(JSON.parse(f),{replace:n,state:r,relative:s}),[c,f,s,n,r]),null}function ZK(t){return PK(t.context)}function Vr(t){Br(!1)}function QK(t){let{basename:e="/",children:n=null,location:r,navigationType:s=zc.Pop,navigator:o,static:i=!1,future:a}=t;wp()&&Br(!1);let l=e.replace(/^\/*/,"/"),c=A.useMemo(()=>({basename:l,navigator:o,static:i,future:zg({v7_relativeSplatPath:!1},a)}),[l,a,o,i]);typeof r=="string"&&(r=bp(r));let{pathname:d="/",search:f="",hash:p="",state:g=null,key:x="default"}=r,b=A.useMemo(()=>{let w=dT(d,l);return w==null?null:{location:{pathname:w,search:f,hash:p,state:g,key:x},navigationType:s}},[l,d,f,p,g,x,s]);return b==null?null:A.createElement(Iu.Provider,{value:c},A.createElement(Lw.Provider,{children:n,value:b}))}function JK(t){let{children:e,location:n}=t;return MK(bE(e),n)}new Promise(()=>{});function bE(t,e){e===void 0&&(e=[]);let n=[];return A.Children.forEach(t,(r,s)=>{if(!A.isValidElement(r))return;let o=[...e,s];if(r.type===A.Fragment){n.push.apply(n,bE(r.props.children,o));return}r.type!==Vr&&Br(!1),!r.props.index||!r.props.children||Br(!1);let i={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(i.children=bE(r.props.children,o)),n.push(i)}),n}/**
 * React Router DOM v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function wE(){return wE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},wE.apply(this,arguments)}function eY(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,o;for(o=0;o<r.length;o++)s=r[o],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function tY(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function nY(t,e){return t.button===0&&(!e||e==="_self")&&!tY(t)}function vE(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(s=>[n,s]):[[n,r]])},[]))}function rY(t,e){let n=vE(t);return e&&e.forEach((r,s)=>{n.has(s)||e.getAll(s).forEach(o=>{n.append(s,o)})}),n}const sY=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],oY="6";try{window.__reactRouterVersion=oY}catch{}const iY="startTransition",WO=Sl[iY];function aY(t){let{basename:e,children:n,future:r,window:s}=t,o=A.useRef();o.current==null&&(o.current=oK({window:s,v5Compat:!0}));let i=o.current,[a,l]=A.useState({action:i.action,location:i.location}),{v7_startTransition:c}=r||{},d=A.useCallback(f=>{c&&WO?WO(()=>l(f)):l(f)},[l,c]);return A.useLayoutEffect(()=>i.listen(d),[i,d]),A.useEffect(()=>YK(r),[r]),A.createElement(QK,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:i,future:r})}const lY=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",cY=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,va=A.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:o,replace:i,state:a,target:l,to:c,preventScrollReset:d,viewTransition:f}=e,p=eY(e,sY),{basename:g}=A.useContext(Iu),x,b=!1;if(typeof c=="string"&&cY.test(c)&&(x=c,lY))try{let k=new URL(window.location.href),I=c.startsWith("//")?new URL(k.protocol+c):new URL(c),R=dT(I.pathname,g);I.origin===k.origin&&R!=null?c=R+I.search+I.hash:b=!0}catch{}let w=$K(c,{relative:s}),C=uY(c,{replace:i,state:a,target:l,preventScrollReset:d,relative:s,viewTransition:f});function N(k){r&&r(k),k.defaultPrevented||C(k)}return A.createElement("a",wE({},p,{href:x||w,onClick:b||o?r:N,ref:n,target:l}))});var UO;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(UO||(UO={}));var HO;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(HO||(HO={}));function uY(t,e){let{target:n,replace:r,state:s,preventScrollReset:o,relative:i,viewTransition:a}=e===void 0?{}:e,l=af(),c=of(),d=_5(t,{relative:i});return A.useCallback(f=>{if(nY(f,n)){f.preventDefault();let p=r!==void 0?r:yb(c)===yb(d);l(t,{replace:p,state:s,preventScrollReset:o,relative:i,viewTransition:a})}},[c,l,d,r,s,n,t,o,i,a])}function dY(t){let e=A.useRef(vE(t)),n=A.useRef(!1),r=of(),s=A.useMemo(()=>rY(r.search,n.current?null:e.current),[r.search]),o=af(),i=A.useCallback((a,l)=>{const c=vE(typeof a=="function"?a(s):a);n.current=!0,o("?"+c,l)},[o,s]);return[s,i]}let fY={data:""},hY=t=>typeof window=="object"?((t?t.querySelector("#_goober"):window._goober)||Object.assign((t||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:t||fY,pY=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,mY=/\/\*[^]*?\*\/|  +/g,GO=/\n+/g,Mc=(t,e)=>{let n="",r="",s="";for(let o in t){let i=t[o];o[0]=="@"?o[1]=="i"?n=o+" "+i+";":r+=o[1]=="f"?Mc(i,o):o+"{"+Mc(i,o[1]=="k"?"":e)+"}":typeof i=="object"?r+=Mc(i,e?e.replace(/([^,])+/g,a=>o.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,l=>/&/.test(l)?l.replace(/&/g,a):a?a+" "+l:l)):o):i!=null&&(o=/^--/.test(o)?o:o.replace(/[A-Z]/g,"-$&").toLowerCase(),s+=Mc.p?Mc.p(o,i):o+":"+i+";")}return n+(e&&s?e+"{"+s+"}":s)+r},_l={},B5=t=>{if(typeof t=="object"){let e="";for(let n in t)e+=n+B5(t[n]);return e}return t},gY=(t,e,n,r,s)=>{let o=B5(t),i=_l[o]||(_l[o]=(l=>{let c=0,d=11;for(;c<l.length;)d=101*d+l.charCodeAt(c++)>>>0;return"go"+d})(o));if(!_l[i]){let l=o!==t?t:(c=>{let d,f,p=[{}];for(;d=pY.exec(c.replace(mY,""));)d[4]?p.shift():d[3]?(f=d[3].replace(GO," ").trim(),p.unshift(p[0][f]=p[0][f]||{})):p[0][d[1]]=d[2].replace(GO," ").trim();return p[0]})(t);_l[i]=Mc(s?{["@keyframes "+i]:l}:l,n?"":"."+i)}let a=n&&_l.g?_l.g:null;return n&&(_l.g=_l[i]),((l,c,d,f)=>{f?c.data=c.data.replace(f,l):c.data.indexOf(l)===-1&&(c.data=d?l+c.data:c.data+l)})(_l[i],e,r,a),i},xY=(t,e,n)=>t.reduce((r,s,o)=>{let i=e[o];if(i&&i.call){let a=i(n),l=a&&a.props&&a.props.className||/^go/.test(a)&&a;i=l?"."+l:a&&typeof a=="object"?a.props?"":Mc(a,""):a===!1?"":a}return r+s+(i??"")},"");function Bw(t){let e=this||{},n=t.call?t(e.p):t;return gY(n.unshift?n.raw?xY(n,[].slice.call(arguments,1),e.p):n.reduce((r,s)=>Object.assign(r,s&&s.call?s(e.p):s),{}):n,hY(e.target),e.g,e.o,e.k)}let j5,CE,SE;Bw.bind({g:1});let rc=Bw.bind({k:1});function yY(t,e,n,r){Mc.p=e,j5=t,CE=n,SE=r}function ku(t,e){let n=this||{};return function(){let r=arguments;function s(o,i){let a=Object.assign({},o),l=a.className||s.className;n.p=Object.assign({theme:CE&&CE()},a),n.o=/ *go\d+/.test(l),a.className=Bw.apply(n,r)+(l?" "+l:"");let c=t;return t[0]&&(c=a.as||t,delete a.as),SE&&c[0]&&SE(a),j5(c,a)}return s}}var bY=t=>typeof t=="function",bb=(t,e)=>bY(t)?t(e):t,wY=(()=>{let t=0;return()=>(++t).toString()})(),z5=(()=>{let t;return()=>{if(t===void 0&&typeof window<"u"){let e=matchMedia("(prefers-reduced-motion: reduce)");t=!e||e.matches}return t}})(),vY=20,V5=(t,e)=>{switch(e.type){case 0:return{...t,toasts:[e.toast,...t.toasts].slice(0,vY)};case 1:return{...t,toasts:t.toasts.map(o=>o.id===e.toast.id?{...o,...e.toast}:o)};case 2:let{toast:n}=e;return V5(t,{type:t.toasts.find(o=>o.id===n.id)?1:0,toast:n});case 3:let{toastId:r}=e;return{...t,toasts:t.toasts.map(o=>o.id===r||r===void 0?{...o,dismissed:!0,visible:!1}:o)};case 4:return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(o=>o.id!==e.toastId)};case 5:return{...t,pausedAt:e.time};case 6:let s=e.time-(t.pausedAt||0);return{...t,pausedAt:void 0,toasts:t.toasts.map(o=>({...o,pauseDuration:o.pauseDuration+s}))}}},Ty=[],gd={toasts:[],pausedAt:void 0},lf=t=>{gd=V5(gd,t),Ty.forEach(e=>{e(gd)})},CY={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},SY=(t={})=>{let[e,n]=A.useState(gd),r=A.useRef(gd);A.useEffect(()=>(r.current!==gd&&n(gd),Ty.push(n),()=>{let o=Ty.indexOf(n);o>-1&&Ty.splice(o,1)}),[]);let s=e.toasts.map(o=>{var i,a,l;return{...t,...t[o.type],...o,removeDelay:o.removeDelay||((i=t[o.type])==null?void 0:i.removeDelay)||(t==null?void 0:t.removeDelay),duration:o.duration||((a=t[o.type])==null?void 0:a.duration)||(t==null?void 0:t.duration)||CY[o.type],style:{...t.style,...(l=t[o.type])==null?void 0:l.style,...o.style}}});return{...e,toasts:s}},NY=(t,e="blank",n)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:e,ariaProps:{role:"status","aria-live":"polite"},message:t,pauseDuration:0,...n,id:(n==null?void 0:n.id)||wY()}),C0=t=>(e,n)=>{let r=NY(e,t,n);return lf({type:2,toast:r}),r.id},mo=(t,e)=>C0("blank")(t,e);mo.error=C0("error");mo.success=C0("success");mo.loading=C0("loading");mo.custom=C0("custom");mo.dismiss=t=>{lf({type:3,toastId:t})};mo.remove=t=>lf({type:4,toastId:t});mo.promise=(t,e,n)=>{let r=mo.loading(e.loading,{...n,...n==null?void 0:n.loading});return typeof t=="function"&&(t=t()),t.then(s=>{let o=e.success?bb(e.success,s):void 0;return o?mo.success(o,{id:r,...n,...n==null?void 0:n.success}):mo.dismiss(r),s}).catch(s=>{let o=e.error?bb(e.error,s):void 0;o?mo.error(o,{id:r,...n,...n==null?void 0:n.error}):mo.dismiss(r)}),t};var EY=(t,e)=>{lf({type:1,toast:{id:t,height:e}})},IY=()=>{lf({type:5,time:Date.now()})},cg=new Map,kY=1e3,TY=(t,e=kY)=>{if(cg.has(t))return;let n=setTimeout(()=>{cg.delete(t),lf({type:4,toastId:t})},e);cg.set(t,n)},AY=t=>{let{toasts:e,pausedAt:n}=SY(t);A.useEffect(()=>{if(n)return;let o=Date.now(),i=e.map(a=>{if(a.duration===1/0)return;let l=(a.duration||0)+a.pauseDuration-(o-a.createdAt);if(l<0){a.visible&&mo.dismiss(a.id);return}return setTimeout(()=>mo.dismiss(a.id),l)});return()=>{i.forEach(a=>a&&clearTimeout(a))}},[e,n]);let r=A.useCallback(()=>{n&&lf({type:6,time:Date.now()})},[n]),s=A.useCallback((o,i)=>{let{reverseOrder:a=!1,gutter:l=8,defaultPosition:c}=i||{},d=e.filter(g=>(g.position||c)===(o.position||c)&&g.height),f=d.findIndex(g=>g.id===o.id),p=d.filter((g,x)=>x<f&&g.visible).length;return d.filter(g=>g.visible).slice(...a?[p+1]:[0,p]).reduce((g,x)=>g+(x.height||0)+l,0)},[e]);return A.useEffect(()=>{e.forEach(o=>{if(o.dismissed)TY(o.id,o.removeDelay);else{let i=cg.get(o.id);i&&(clearTimeout(i),cg.delete(o.id))}})},[e]),{toasts:e,handlers:{updateHeight:EY,startPause:IY,endPause:r,calculateOffset:s}}},RY=rc`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,DY=rc`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,$Y=rc`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,OY=ku("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${RY} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${DY} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${t=>t.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${$Y} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,_Y=rc`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,PY=ku("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${t=>t.secondary||"#e0e0e0"};
  border-right-color: ${t=>t.primary||"#616161"};
  animation: ${_Y} 1s linear infinite;
`,FY=rc`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,MY=rc`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,LY=ku("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${FY} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${MY} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${t=>t.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,BY=ku("div")`
  position: absolute;
`,jY=ku("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,zY=rc`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,VY=ku("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${zY} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,WY=({toast:t})=>{let{icon:e,type:n,iconTheme:r}=t;return e!==void 0?typeof e=="string"?A.createElement(VY,null,e):e:n==="blank"?null:A.createElement(jY,null,A.createElement(PY,{...r}),n!=="loading"&&A.createElement(BY,null,n==="error"?A.createElement(OY,{...r}):A.createElement(LY,{...r})))},UY=t=>`
0% {transform: translate3d(0,${t*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,HY=t=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${t*-150}%,-1px) scale(.6); opacity:0;}
`,GY="0%{opacity:0;} 100%{opacity:1;}",qY="0%{opacity:1;} 100%{opacity:0;}",XY=ku("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,KY=ku("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,YY=(t,e)=>{let n=t.includes("top")?1:-1,[r,s]=z5()?[GY,qY]:[UY(n),HY(n)];return{animation:e?`${rc(r)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${rc(s)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},ZY=A.memo(({toast:t,position:e,style:n,children:r})=>{let s=t.height?YY(t.position||e||"top-center",t.visible):{opacity:0},o=A.createElement(WY,{toast:t}),i=A.createElement(KY,{...t.ariaProps},bb(t.message,t));return A.createElement(XY,{className:t.className,style:{...s,...n,...t.style}},typeof r=="function"?r({icon:o,message:i}):A.createElement(A.Fragment,null,o,i))});yY(A.createElement);var QY=({id:t,className:e,style:n,onHeightUpdate:r,children:s})=>{let o=A.useCallback(i=>{if(i){let a=()=>{let l=i.getBoundingClientRect().height;r(t,l)};a(),new MutationObserver(a).observe(i,{subtree:!0,childList:!0,characterData:!0})}},[t,r]);return A.createElement("div",{ref:o,className:e,style:n},s)},JY=(t,e)=>{let n=t.includes("top"),r=n?{top:0}:{bottom:0},s=t.includes("center")?{justifyContent:"center"}:t.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:z5()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${e*(n?1:-1)}px)`,...r,...s}},eZ=Bw`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,Lx=16,tZ=({reverseOrder:t,position:e="top-center",toastOptions:n,gutter:r,children:s,containerStyle:o,containerClassName:i})=>{let{toasts:a,handlers:l}=AY(n);return A.createElement("div",{id:"_rht_toaster",style:{position:"fixed",zIndex:9999,top:Lx,left:Lx,right:Lx,bottom:Lx,pointerEvents:"none",...o},className:i,onMouseEnter:l.startPause,onMouseLeave:l.endPause},a.map(c=>{let d=c.position||e,f=l.calculateOffset(c,{reverseOrder:t,gutter:r,defaultPosition:e}),p=JY(d,f);return A.createElement(QY,{id:c.id,key:c.id,onHeightUpdate:l.updateHeight,className:c.visible?eZ:"",style:p},c.type==="custom"?bb(c.message,c):s?s(c):A.createElement(ZY,{toast:c,position:d}))}))},Rt=mo;function W5(t,e){return function(){return t.apply(e,arguments)}}const{toString:nZ}=Object.prototype,{getPrototypeOf:mT}=Object,jw=(t=>e=>{const n=nZ.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Ma=t=>(t=t.toLowerCase(),e=>jw(e)===t),zw=t=>e=>typeof e===t,{isArray:vp}=Array,Vg=zw("undefined");function rZ(t){return t!==null&&!Vg(t)&&t.constructor!==null&&!Vg(t.constructor)&&pi(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const U5=Ma("ArrayBuffer");function sZ(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&U5(t.buffer),e}const oZ=zw("string"),pi=zw("function"),H5=zw("number"),Vw=t=>t!==null&&typeof t=="object",iZ=t=>t===!0||t===!1,Ay=t=>{if(jw(t)!=="object")return!1;const e=mT(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},aZ=Ma("Date"),lZ=Ma("File"),cZ=Ma("Blob"),uZ=Ma("FileList"),dZ=t=>Vw(t)&&pi(t.pipe),fZ=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||pi(t.append)&&((e=jw(t))==="formdata"||e==="object"&&pi(t.toString)&&t.toString()==="[object FormData]"))},hZ=Ma("URLSearchParams"),[pZ,mZ,gZ,xZ]=["ReadableStream","Request","Response","Headers"].map(Ma),yZ=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function S0(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let r,s;if(typeof t!="object"&&(t=[t]),vp(t))for(r=0,s=t.length;r<s;r++)e.call(null,t[r],r,t);else{const o=n?Object.getOwnPropertyNames(t):Object.keys(t),i=o.length;let a;for(r=0;r<i;r++)a=o[r],e.call(null,t[a],a,t)}}function G5(t,e){e=e.toLowerCase();const n=Object.keys(t);let r=n.length,s;for(;r-- >0;)if(s=n[r],e===s.toLowerCase())return s;return null}const xd=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,q5=t=>!Vg(t)&&t!==xd;function NE(){const{caseless:t}=q5(this)&&this||{},e={},n=(r,s)=>{const o=t&&G5(e,s)||s;Ay(e[o])&&Ay(r)?e[o]=NE(e[o],r):Ay(r)?e[o]=NE({},r):vp(r)?e[o]=r.slice():e[o]=r};for(let r=0,s=arguments.length;r<s;r++)arguments[r]&&S0(arguments[r],n);return e}const bZ=(t,e,n,{allOwnKeys:r}={})=>(S0(e,(s,o)=>{n&&pi(s)?t[o]=W5(s,n):t[o]=s},{allOwnKeys:r}),t),wZ=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),vZ=(t,e,n,r)=>{t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},CZ=(t,e,n,r)=>{let s,o,i;const a={};if(e=e||{},t==null)return e;do{for(s=Object.getOwnPropertyNames(t),o=s.length;o-- >0;)i=s[o],(!r||r(i,t,e))&&!a[i]&&(e[i]=t[i],a[i]=!0);t=n!==!1&&mT(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},SZ=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const r=t.indexOf(e,n);return r!==-1&&r===n},NZ=t=>{if(!t)return null;if(vp(t))return t;let e=t.length;if(!H5(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},EZ=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&mT(Uint8Array)),IZ=(t,e)=>{const r=(t&&t[Symbol.iterator]).call(t);let s;for(;(s=r.next())&&!s.done;){const o=s.value;e.call(t,o[0],o[1])}},kZ=(t,e)=>{let n;const r=[];for(;(n=t.exec(e))!==null;)r.push(n);return r},TZ=Ma("HTMLFormElement"),AZ=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,s){return r.toUpperCase()+s}),qO=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),RZ=Ma("RegExp"),X5=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),r={};S0(n,(s,o)=>{let i;(i=e(s,o,t))!==!1&&(r[o]=i||s)}),Object.defineProperties(t,r)},DZ=t=>{X5(t,(e,n)=>{if(pi(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=t[n];if(pi(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},$Z=(t,e)=>{const n={},r=s=>{s.forEach(o=>{n[o]=!0})};return vp(t)?r(t):r(String(t).split(e)),n},OZ=()=>{},_Z=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e;function PZ(t){return!!(t&&pi(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const FZ=t=>{const e=new Array(10),n=(r,s)=>{if(Vw(r)){if(e.indexOf(r)>=0)return;if(!("toJSON"in r)){e[s]=r;const o=vp(r)?[]:{};return S0(r,(i,a)=>{const l=n(i,s+1);!Vg(l)&&(o[a]=l)}),e[s]=void 0,o}}return r};return n(t,0)},MZ=Ma("AsyncFunction"),LZ=t=>t&&(Vw(t)||pi(t))&&pi(t.then)&&pi(t.catch),K5=((t,e)=>t?setImmediate:e?((n,r)=>(xd.addEventListener("message",({source:s,data:o})=>{s===xd&&o===n&&r.length&&r.shift()()},!1),s=>{r.push(s),xd.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",pi(xd.postMessage)),BZ=typeof queueMicrotask<"u"?queueMicrotask.bind(xd):typeof process<"u"&&process.nextTick||K5,Le={isArray:vp,isArrayBuffer:U5,isBuffer:rZ,isFormData:fZ,isArrayBufferView:sZ,isString:oZ,isNumber:H5,isBoolean:iZ,isObject:Vw,isPlainObject:Ay,isReadableStream:pZ,isRequest:mZ,isResponse:gZ,isHeaders:xZ,isUndefined:Vg,isDate:aZ,isFile:lZ,isBlob:cZ,isRegExp:RZ,isFunction:pi,isStream:dZ,isURLSearchParams:hZ,isTypedArray:EZ,isFileList:uZ,forEach:S0,merge:NE,extend:bZ,trim:yZ,stripBOM:wZ,inherits:vZ,toFlatObject:CZ,kindOf:jw,kindOfTest:Ma,endsWith:SZ,toArray:NZ,forEachEntry:IZ,matchAll:kZ,isHTMLForm:TZ,hasOwnProperty:qO,hasOwnProp:qO,reduceDescriptors:X5,freezeMethods:DZ,toObjectSet:$Z,toCamelCase:AZ,noop:OZ,toFiniteNumber:_Z,findKey:G5,global:xd,isContextDefined:q5,isSpecCompliantForm:PZ,toJSONObject:FZ,isAsyncFn:MZ,isThenable:LZ,setImmediate:K5,asap:BZ};function Ut(t,e,n,r,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),r&&(this.request=r),s&&(this.response=s,this.status=s.status?s.status:null)}Le.inherits(Ut,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Le.toJSONObject(this.config),code:this.code,status:this.status}}});const Y5=Ut.prototype,Z5={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{Z5[t]={value:t}});Object.defineProperties(Ut,Z5);Object.defineProperty(Y5,"isAxiosError",{value:!0});Ut.from=(t,e,n,r,s,o)=>{const i=Object.create(Y5);return Le.toFlatObject(t,i,function(l){return l!==Error.prototype},a=>a!=="isAxiosError"),Ut.call(i,t.message,e,n,r,s),i.cause=t,i.name=t.name,o&&Object.assign(i,o),i};const jZ=null;function EE(t){return Le.isPlainObject(t)||Le.isArray(t)}function Q5(t){return Le.endsWith(t,"[]")?t.slice(0,-2):t}function XO(t,e,n){return t?t.concat(e).map(function(s,o){return s=Q5(s),!n&&o?"["+s+"]":s}).join(n?".":""):e}function zZ(t){return Le.isArray(t)&&!t.some(EE)}const VZ=Le.toFlatObject(Le,{},null,function(e){return/^is[A-Z]/.test(e)});function Ww(t,e,n){if(!Le.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=Le.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(b,w){return!Le.isUndefined(w[b])});const r=n.metaTokens,s=n.visitor||d,o=n.dots,i=n.indexes,l=(n.Blob||typeof Blob<"u"&&Blob)&&Le.isSpecCompliantForm(e);if(!Le.isFunction(s))throw new TypeError("visitor must be a function");function c(x){if(x===null)return"";if(Le.isDate(x))return x.toISOString();if(!l&&Le.isBlob(x))throw new Ut("Blob is not supported. Use a Buffer instead.");return Le.isArrayBuffer(x)||Le.isTypedArray(x)?l&&typeof Blob=="function"?new Blob([x]):Buffer.from(x):x}function d(x,b,w){let C=x;if(x&&!w&&typeof x=="object"){if(Le.endsWith(b,"{}"))b=r?b:b.slice(0,-2),x=JSON.stringify(x);else if(Le.isArray(x)&&zZ(x)||(Le.isFileList(x)||Le.endsWith(b,"[]"))&&(C=Le.toArray(x)))return b=Q5(b),C.forEach(function(k,I){!(Le.isUndefined(k)||k===null)&&e.append(i===!0?XO([b],I,o):i===null?b:b+"[]",c(k))}),!1}return EE(x)?!0:(e.append(XO(w,b,o),c(x)),!1)}const f=[],p=Object.assign(VZ,{defaultVisitor:d,convertValue:c,isVisitable:EE});function g(x,b){if(!Le.isUndefined(x)){if(f.indexOf(x)!==-1)throw Error("Circular reference detected in "+b.join("."));f.push(x),Le.forEach(x,function(C,N){(!(Le.isUndefined(C)||C===null)&&s.call(e,C,Le.isString(N)?N.trim():N,b,p))===!0&&g(C,b?b.concat(N):[N])}),f.pop()}}if(!Le.isObject(t))throw new TypeError("data must be an object");return g(t),e}function KO(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function gT(t,e){this._pairs=[],t&&Ww(t,this,e)}const J5=gT.prototype;J5.append=function(e,n){this._pairs.push([e,n])};J5.toString=function(e){const n=e?function(r){return e.call(this,r,KO)}:KO;return this._pairs.map(function(s){return n(s[0])+"="+n(s[1])},"").join("&")};function WZ(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function e6(t,e,n){if(!e)return t;const r=n&&n.encode||WZ;Le.isFunction(n)&&(n={serialize:n});const s=n&&n.serialize;let o;if(s?o=s(e,n):o=Le.isURLSearchParams(e)?e.toString():new gT(e,n).toString(r),o){const i=t.indexOf("#");i!==-1&&(t=t.slice(0,i)),t+=(t.indexOf("?")===-1?"?":"&")+o}return t}class YO{constructor(){this.handlers=[]}use(e,n,r){return this.handlers.push({fulfilled:e,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){Le.forEach(this.handlers,function(r){r!==null&&e(r)})}}const t6={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},UZ=typeof URLSearchParams<"u"?URLSearchParams:gT,HZ=typeof FormData<"u"?FormData:null,GZ=typeof Blob<"u"?Blob:null,qZ={isBrowser:!0,classes:{URLSearchParams:UZ,FormData:HZ,Blob:GZ},protocols:["http","https","file","blob","url","data"]},xT=typeof window<"u"&&typeof document<"u",IE=typeof navigator=="object"&&navigator||void 0,XZ=xT&&(!IE||["ReactNative","NativeScript","NS"].indexOf(IE.product)<0),KZ=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",YZ=xT&&window.location.href||"http://localhost",ZZ=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:xT,hasStandardBrowserEnv:XZ,hasStandardBrowserWebWorkerEnv:KZ,navigator:IE,origin:YZ},Symbol.toStringTag,{value:"Module"})),no={...ZZ,...qZ};function QZ(t,e){return Ww(t,new no.classes.URLSearchParams,Object.assign({visitor:function(n,r,s,o){return no.isNode&&Le.isBuffer(n)?(this.append(r,n.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)}},e))}function JZ(t){return Le.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function eQ(t){const e={},n=Object.keys(t);let r;const s=n.length;let o;for(r=0;r<s;r++)o=n[r],e[o]=t[o];return e}function n6(t){function e(n,r,s,o){let i=n[o++];if(i==="__proto__")return!0;const a=Number.isFinite(+i),l=o>=n.length;return i=!i&&Le.isArray(s)?s.length:i,l?(Le.hasOwnProp(s,i)?s[i]=[s[i],r]:s[i]=r,!a):((!s[i]||!Le.isObject(s[i]))&&(s[i]=[]),e(n,r,s[i],o)&&Le.isArray(s[i])&&(s[i]=eQ(s[i])),!a)}if(Le.isFormData(t)&&Le.isFunction(t.entries)){const n={};return Le.forEachEntry(t,(r,s)=>{e(JZ(r),s,n,0)}),n}return null}function tQ(t,e,n){if(Le.isString(t))try{return(e||JSON.parse)(t),Le.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(t)}const N0={transitional:t6,adapter:["xhr","http","fetch"],transformRequest:[function(e,n){const r=n.getContentType()||"",s=r.indexOf("application/json")>-1,o=Le.isObject(e);if(o&&Le.isHTMLForm(e)&&(e=new FormData(e)),Le.isFormData(e))return s?JSON.stringify(n6(e)):e;if(Le.isArrayBuffer(e)||Le.isBuffer(e)||Le.isStream(e)||Le.isFile(e)||Le.isBlob(e)||Le.isReadableStream(e))return e;if(Le.isArrayBufferView(e))return e.buffer;if(Le.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(o){if(r.indexOf("application/x-www-form-urlencoded")>-1)return QZ(e,this.formSerializer).toString();if((a=Le.isFileList(e))||r.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return Ww(a?{"files[]":e}:e,l&&new l,this.formSerializer)}}return o||s?(n.setContentType("application/json",!1),tQ(e)):e}],transformResponse:[function(e){const n=this.transitional||N0.transitional,r=n&&n.forcedJSONParsing,s=this.responseType==="json";if(Le.isResponse(e)||Le.isReadableStream(e))return e;if(e&&Le.isString(e)&&(r&&!this.responseType||s)){const i=!(n&&n.silentJSONParsing)&&s;try{return JSON.parse(e)}catch(a){if(i)throw a.name==="SyntaxError"?Ut.from(a,Ut.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:no.classes.FormData,Blob:no.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Le.forEach(["delete","get","head","post","put","patch"],t=>{N0.headers[t]={}});const nQ=Le.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),rQ=t=>{const e={};let n,r,s;return t&&t.split(`
`).forEach(function(i){s=i.indexOf(":"),n=i.substring(0,s).trim().toLowerCase(),r=i.substring(s+1).trim(),!(!n||e[n]&&nQ[n])&&(n==="set-cookie"?e[n]?e[n].push(r):e[n]=[r]:e[n]=e[n]?e[n]+", "+r:r)}),e},ZO=Symbol("internals");function hm(t){return t&&String(t).trim().toLowerCase()}function Ry(t){return t===!1||t==null?t:Le.isArray(t)?t.map(Ry):String(t)}function sQ(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(t);)e[r[1]]=r[2];return e}const oQ=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function _S(t,e,n,r,s){if(Le.isFunction(r))return r.call(this,e,n);if(s&&(e=n),!!Le.isString(e)){if(Le.isString(r))return e.indexOf(r)!==-1;if(Le.isRegExp(r))return r.test(e)}}function iQ(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,r)=>n.toUpperCase()+r)}function aQ(t,e){const n=Le.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+n,{value:function(s,o,i){return this[r].call(this,e,s,o,i)},configurable:!0})})}let Uo=class{constructor(e){e&&this.set(e)}set(e,n,r){const s=this;function o(a,l,c){const d=hm(l);if(!d)throw new Error("header name must be a non-empty string");const f=Le.findKey(s,d);(!f||s[f]===void 0||c===!0||c===void 0&&s[f]!==!1)&&(s[f||l]=Ry(a))}const i=(a,l)=>Le.forEach(a,(c,d)=>o(c,d,l));if(Le.isPlainObject(e)||e instanceof this.constructor)i(e,n);else if(Le.isString(e)&&(e=e.trim())&&!oQ(e))i(rQ(e),n);else if(Le.isHeaders(e))for(const[a,l]of e.entries())o(l,a,r);else e!=null&&o(n,e,r);return this}get(e,n){if(e=hm(e),e){const r=Le.findKey(this,e);if(r){const s=this[r];if(!n)return s;if(n===!0)return sQ(s);if(Le.isFunction(n))return n.call(this,s,r);if(Le.isRegExp(n))return n.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=hm(e),e){const r=Le.findKey(this,e);return!!(r&&this[r]!==void 0&&(!n||_S(this,this[r],r,n)))}return!1}delete(e,n){const r=this;let s=!1;function o(i){if(i=hm(i),i){const a=Le.findKey(r,i);a&&(!n||_S(r,r[a],a,n))&&(delete r[a],s=!0)}}return Le.isArray(e)?e.forEach(o):o(e),s}clear(e){const n=Object.keys(this);let r=n.length,s=!1;for(;r--;){const o=n[r];(!e||_S(this,this[o],o,e,!0))&&(delete this[o],s=!0)}return s}normalize(e){const n=this,r={};return Le.forEach(this,(s,o)=>{const i=Le.findKey(r,o);if(i){n[i]=Ry(s),delete n[o];return}const a=e?iQ(o):String(o).trim();a!==o&&delete n[o],n[a]=Ry(s),r[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return Le.forEach(this,(r,s)=>{r!=null&&r!==!1&&(n[s]=e&&Le.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const r=new this(e);return n.forEach(s=>r.set(s)),r}static accessor(e){const r=(this[ZO]=this[ZO]={accessors:{}}).accessors,s=this.prototype;function o(i){const a=hm(i);r[a]||(aQ(s,i),r[a]=!0)}return Le.isArray(e)?e.forEach(o):o(e),this}};Uo.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Le.reduceDescriptors(Uo.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(r){this[n]=r}}});Le.freezeMethods(Uo);function PS(t,e){const n=this||N0,r=e||n,s=Uo.from(r.headers);let o=r.data;return Le.forEach(t,function(a){o=a.call(n,o,s.normalize(),e?e.status:void 0)}),s.normalize(),o}function r6(t){return!!(t&&t.__CANCEL__)}function Cp(t,e,n){Ut.call(this,t??"canceled",Ut.ERR_CANCELED,e,n),this.name="CanceledError"}Le.inherits(Cp,Ut,{__CANCEL__:!0});function s6(t,e,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?t(n):e(new Ut("Request failed with status code "+n.status,[Ut.ERR_BAD_REQUEST,Ut.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function lQ(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function cQ(t,e){t=t||10;const n=new Array(t),r=new Array(t);let s=0,o=0,i;return e=e!==void 0?e:1e3,function(l){const c=Date.now(),d=r[o];i||(i=c),n[s]=l,r[s]=c;let f=o,p=0;for(;f!==s;)p+=n[f++],f=f%t;if(s=(s+1)%t,s===o&&(o=(o+1)%t),c-i<e)return;const g=d&&c-d;return g?Math.round(p*1e3/g):void 0}}function uQ(t,e){let n=0,r=1e3/e,s,o;const i=(c,d=Date.now())=>{n=d,s=null,o&&(clearTimeout(o),o=null),t.apply(null,c)};return[(...c)=>{const d=Date.now(),f=d-n;f>=r?i(c,d):(s=c,o||(o=setTimeout(()=>{o=null,i(s)},r-f)))},()=>s&&i(s)]}const wb=(t,e,n=3)=>{let r=0;const s=cQ(50,250);return uQ(o=>{const i=o.loaded,a=o.lengthComputable?o.total:void 0,l=i-r,c=s(l),d=i<=a;r=i;const f={loaded:i,total:a,progress:a?i/a:void 0,bytes:l,rate:c||void 0,estimated:c&&a&&d?(a-i)/c:void 0,event:o,lengthComputable:a!=null,[e?"download":"upload"]:!0};t(f)},n)},QO=(t,e)=>{const n=t!=null;return[r=>e[0]({lengthComputable:n,total:t,loaded:r}),e[1]]},JO=t=>(...e)=>Le.asap(()=>t(...e)),dQ=no.hasStandardBrowserEnv?((t,e)=>n=>(n=new URL(n,no.origin),t.protocol===n.protocol&&t.host===n.host&&(e||t.port===n.port)))(new URL(no.origin),no.navigator&&/(msie|trident)/i.test(no.navigator.userAgent)):()=>!0,fQ=no.hasStandardBrowserEnv?{write(t,e,n,r,s,o){const i=[t+"="+encodeURIComponent(e)];Le.isNumber(n)&&i.push("expires="+new Date(n).toGMTString()),Le.isString(r)&&i.push("path="+r),Le.isString(s)&&i.push("domain="+s),o===!0&&i.push("secure"),document.cookie=i.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function hQ(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function pQ(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function o6(t,e,n){let r=!hQ(e);return t&&(r||n==!1)?pQ(t,e):e}const e4=t=>t instanceof Uo?{...t}:t;function Md(t,e){e=e||{};const n={};function r(c,d,f,p){return Le.isPlainObject(c)&&Le.isPlainObject(d)?Le.merge.call({caseless:p},c,d):Le.isPlainObject(d)?Le.merge({},d):Le.isArray(d)?d.slice():d}function s(c,d,f,p){if(Le.isUndefined(d)){if(!Le.isUndefined(c))return r(void 0,c,f,p)}else return r(c,d,f,p)}function o(c,d){if(!Le.isUndefined(d))return r(void 0,d)}function i(c,d){if(Le.isUndefined(d)){if(!Le.isUndefined(c))return r(void 0,c)}else return r(void 0,d)}function a(c,d,f){if(f in e)return r(c,d);if(f in t)return r(void 0,c)}const l={url:o,method:o,data:o,baseURL:i,transformRequest:i,transformResponse:i,paramsSerializer:i,timeout:i,timeoutMessage:i,withCredentials:i,withXSRFToken:i,adapter:i,responseType:i,xsrfCookieName:i,xsrfHeaderName:i,onUploadProgress:i,onDownloadProgress:i,decompress:i,maxContentLength:i,maxBodyLength:i,beforeRedirect:i,transport:i,httpAgent:i,httpsAgent:i,cancelToken:i,socketPath:i,responseEncoding:i,validateStatus:a,headers:(c,d,f)=>s(e4(c),e4(d),f,!0)};return Le.forEach(Object.keys(Object.assign({},t,e)),function(d){const f=l[d]||s,p=f(t[d],e[d],d);Le.isUndefined(p)&&f!==a||(n[d]=p)}),n}const i6=t=>{const e=Md({},t);let{data:n,withXSRFToken:r,xsrfHeaderName:s,xsrfCookieName:o,headers:i,auth:a}=e;e.headers=i=Uo.from(i),e.url=e6(o6(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),a&&i.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):"")));let l;if(Le.isFormData(n)){if(no.hasStandardBrowserEnv||no.hasStandardBrowserWebWorkerEnv)i.setContentType(void 0);else if((l=i.getContentType())!==!1){const[c,...d]=l?l.split(";").map(f=>f.trim()).filter(Boolean):[];i.setContentType([c||"multipart/form-data",...d].join("; "))}}if(no.hasStandardBrowserEnv&&(r&&Le.isFunction(r)&&(r=r(e)),r||r!==!1&&dQ(e.url))){const c=s&&o&&fQ.read(o);c&&i.set(s,c)}return e},mQ=typeof XMLHttpRequest<"u",gQ=mQ&&function(t){return new Promise(function(n,r){const s=i6(t);let o=s.data;const i=Uo.from(s.headers).normalize();let{responseType:a,onUploadProgress:l,onDownloadProgress:c}=s,d,f,p,g,x;function b(){g&&g(),x&&x(),s.cancelToken&&s.cancelToken.unsubscribe(d),s.signal&&s.signal.removeEventListener("abort",d)}let w=new XMLHttpRequest;w.open(s.method.toUpperCase(),s.url,!0),w.timeout=s.timeout;function C(){if(!w)return;const k=Uo.from("getAllResponseHeaders"in w&&w.getAllResponseHeaders()),R={data:!a||a==="text"||a==="json"?w.responseText:w.response,status:w.status,statusText:w.statusText,headers:k,config:t,request:w};s6(function(O){n(O),b()},function(O){r(O),b()},R),w=null}"onloadend"in w?w.onloadend=C:w.onreadystatechange=function(){!w||w.readyState!==4||w.status===0&&!(w.responseURL&&w.responseURL.indexOf("file:")===0)||setTimeout(C)},w.onabort=function(){w&&(r(new Ut("Request aborted",Ut.ECONNABORTED,t,w)),w=null)},w.onerror=function(){r(new Ut("Network Error",Ut.ERR_NETWORK,t,w)),w=null},w.ontimeout=function(){let I=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const R=s.transitional||t6;s.timeoutErrorMessage&&(I=s.timeoutErrorMessage),r(new Ut(I,R.clarifyTimeoutError?Ut.ETIMEDOUT:Ut.ECONNABORTED,t,w)),w=null},o===void 0&&i.setContentType(null),"setRequestHeader"in w&&Le.forEach(i.toJSON(),function(I,R){w.setRequestHeader(R,I)}),Le.isUndefined(s.withCredentials)||(w.withCredentials=!!s.withCredentials),a&&a!=="json"&&(w.responseType=s.responseType),c&&([p,x]=wb(c,!0),w.addEventListener("progress",p)),l&&w.upload&&([f,g]=wb(l),w.upload.addEventListener("progress",f),w.upload.addEventListener("loadend",g)),(s.cancelToken||s.signal)&&(d=k=>{w&&(r(!k||k.type?new Cp(null,t,w):k),w.abort(),w=null)},s.cancelToken&&s.cancelToken.subscribe(d),s.signal&&(s.signal.aborted?d():s.signal.addEventListener("abort",d)));const N=lQ(s.url);if(N&&no.protocols.indexOf(N)===-1){r(new Ut("Unsupported protocol "+N+":",Ut.ERR_BAD_REQUEST,t));return}w.send(o||null)})},xQ=(t,e)=>{const{length:n}=t=t?t.filter(Boolean):[];if(e||n){let r=new AbortController,s;const o=function(c){if(!s){s=!0,a();const d=c instanceof Error?c:this.reason;r.abort(d instanceof Ut?d:new Cp(d instanceof Error?d.message:d))}};let i=e&&setTimeout(()=>{i=null,o(new Ut(`timeout ${e} of ms exceeded`,Ut.ETIMEDOUT))},e);const a=()=>{t&&(i&&clearTimeout(i),i=null,t.forEach(c=>{c.unsubscribe?c.unsubscribe(o):c.removeEventListener("abort",o)}),t=null)};t.forEach(c=>c.addEventListener("abort",o));const{signal:l}=r;return l.unsubscribe=()=>Le.asap(a),l}},yQ=function*(t,e){let n=t.byteLength;if(n<e){yield t;return}let r=0,s;for(;r<n;)s=r+e,yield t.slice(r,s),r=s},bQ=async function*(t,e){for await(const n of wQ(t))yield*yQ(n,e)},wQ=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:n,value:r}=await e.read();if(n)break;yield r}}finally{await e.cancel()}},t4=(t,e,n,r)=>{const s=bQ(t,e);let o=0,i,a=l=>{i||(i=!0,r&&r(l))};return new ReadableStream({async pull(l){try{const{done:c,value:d}=await s.next();if(c){a(),l.close();return}let f=d.byteLength;if(n){let p=o+=f;n(p)}l.enqueue(new Uint8Array(d))}catch(c){throw a(c),c}},cancel(l){return a(l),s.return()}},{highWaterMark:2})},Uw=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",a6=Uw&&typeof ReadableStream=="function",vQ=Uw&&(typeof TextEncoder=="function"?(t=>e=>t.encode(e))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),l6=(t,...e)=>{try{return!!t(...e)}catch{return!1}},CQ=a6&&l6(()=>{let t=!1;const e=new Request(no.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!e}),n4=64*1024,kE=a6&&l6(()=>Le.isReadableStream(new Response("").body)),vb={stream:kE&&(t=>t.body)};Uw&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!vb[e]&&(vb[e]=Le.isFunction(t[e])?n=>n[e]():(n,r)=>{throw new Ut(`Response type '${e}' is not supported`,Ut.ERR_NOT_SUPPORT,r)})})})(new Response);const SQ=async t=>{if(t==null)return 0;if(Le.isBlob(t))return t.size;if(Le.isSpecCompliantForm(t))return(await new Request(no.origin,{method:"POST",body:t}).arrayBuffer()).byteLength;if(Le.isArrayBufferView(t)||Le.isArrayBuffer(t))return t.byteLength;if(Le.isURLSearchParams(t)&&(t=t+""),Le.isString(t))return(await vQ(t)).byteLength},NQ=async(t,e)=>{const n=Le.toFiniteNumber(t.getContentLength());return n??SQ(e)},EQ=Uw&&(async t=>{let{url:e,method:n,data:r,signal:s,cancelToken:o,timeout:i,onDownloadProgress:a,onUploadProgress:l,responseType:c,headers:d,withCredentials:f="same-origin",fetchOptions:p}=i6(t);c=c?(c+"").toLowerCase():"text";let g=xQ([s,o&&o.toAbortSignal()],i),x;const b=g&&g.unsubscribe&&(()=>{g.unsubscribe()});let w;try{if(l&&CQ&&n!=="get"&&n!=="head"&&(w=await NQ(d,r))!==0){let R=new Request(e,{method:"POST",body:r,duplex:"half"}),$;if(Le.isFormData(r)&&($=R.headers.get("content-type"))&&d.setContentType($),R.body){const[O,F]=QO(w,wb(JO(l)));r=t4(R.body,n4,O,F)}}Le.isString(f)||(f=f?"include":"omit");const C="credentials"in Request.prototype;x=new Request(e,{...p,signal:g,method:n.toUpperCase(),headers:d.normalize().toJSON(),body:r,duplex:"half",credentials:C?f:void 0});let N=await fetch(x);const k=kE&&(c==="stream"||c==="response");if(kE&&(a||k&&b)){const R={};["status","statusText","headers"].forEach(M=>{R[M]=N[M]});const $=Le.toFiniteNumber(N.headers.get("content-length")),[O,F]=a&&QO($,wb(JO(a),!0))||[];N=new Response(t4(N.body,n4,O,()=>{F&&F(),b&&b()}),R)}c=c||"text";let I=await vb[Le.findKey(vb,c)||"text"](N,t);return!k&&b&&b(),await new Promise((R,$)=>{s6(R,$,{data:I,headers:Uo.from(N.headers),status:N.status,statusText:N.statusText,config:t,request:x})})}catch(C){throw b&&b(),C&&C.name==="TypeError"&&/fetch/i.test(C.message)?Object.assign(new Ut("Network Error",Ut.ERR_NETWORK,t,x),{cause:C.cause||C}):Ut.from(C,C&&C.code,t,x)}}),TE={http:jZ,xhr:gQ,fetch:EQ};Le.forEach(TE,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const r4=t=>`- ${t}`,IQ=t=>Le.isFunction(t)||t===null||t===!1,c6={getAdapter:t=>{t=Le.isArray(t)?t:[t];const{length:e}=t;let n,r;const s={};for(let o=0;o<e;o++){n=t[o];let i;if(r=n,!IQ(n)&&(r=TE[(i=String(n)).toLowerCase()],r===void 0))throw new Ut(`Unknown adapter '${i}'`);if(r)break;s[i||"#"+o]=r}if(!r){const o=Object.entries(s).map(([a,l])=>`adapter ${a} `+(l===!1?"is not supported by the environment":"is not available in the build"));let i=e?o.length>1?`since :
`+o.map(r4).join(`
`):" "+r4(o[0]):"as no adapter specified";throw new Ut("There is no suitable adapter to dispatch the request "+i,"ERR_NOT_SUPPORT")}return r},adapters:TE};function FS(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Cp(null,t)}function s4(t){return FS(t),t.headers=Uo.from(t.headers),t.data=PS.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),c6.getAdapter(t.adapter||N0.adapter)(t).then(function(r){return FS(t),r.data=PS.call(t,t.transformResponse,r),r.headers=Uo.from(r.headers),r},function(r){return r6(r)||(FS(t),r&&r.response&&(r.response.data=PS.call(t,t.transformResponse,r.response),r.response.headers=Uo.from(r.response.headers))),Promise.reject(r)})}const u6="1.8.4",Hw={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{Hw[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});const o4={};Hw.transitional=function(e,n,r){function s(o,i){return"[Axios v"+u6+"] Transitional option '"+o+"'"+i+(r?". "+r:"")}return(o,i,a)=>{if(e===!1)throw new Ut(s(i," has been removed"+(n?" in "+n:"")),Ut.ERR_DEPRECATED);return n&&!o4[i]&&(o4[i]=!0,console.warn(s(i," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(o,i,a):!0}};Hw.spelling=function(e){return(n,r)=>(console.warn(`${r} is likely a misspelling of ${e}`),!0)};function kQ(t,e,n){if(typeof t!="object")throw new Ut("options must be an object",Ut.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let s=r.length;for(;s-- >0;){const o=r[s],i=e[o];if(i){const a=t[o],l=a===void 0||i(a,o,t);if(l!==!0)throw new Ut("option "+o+" must be "+l,Ut.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new Ut("Unknown option "+o,Ut.ERR_BAD_OPTION)}}const Dy={assertOptions:kQ,validators:Hw},Za=Dy.validators;let Id=class{constructor(e){this.defaults=e,this.interceptors={request:new YO,response:new YO}}async request(e,n){try{return await this._request(e,n)}catch(r){if(r instanceof Error){let s={};Error.captureStackTrace?Error.captureStackTrace(s):s=new Error;const o=s.stack?s.stack.replace(/^.+\n/,""):"";try{r.stack?o&&!String(r.stack).endsWith(o.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+o):r.stack=o}catch{}}throw r}}_request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=Md(this.defaults,n);const{transitional:r,paramsSerializer:s,headers:o}=n;r!==void 0&&Dy.assertOptions(r,{silentJSONParsing:Za.transitional(Za.boolean),forcedJSONParsing:Za.transitional(Za.boolean),clarifyTimeoutError:Za.transitional(Za.boolean)},!1),s!=null&&(Le.isFunction(s)?n.paramsSerializer={serialize:s}:Dy.assertOptions(s,{encode:Za.function,serialize:Za.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),Dy.assertOptions(n,{baseUrl:Za.spelling("baseURL"),withXsrfToken:Za.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let i=o&&Le.merge(o.common,o[n.method]);o&&Le.forEach(["delete","get","head","post","put","patch","common"],x=>{delete o[x]}),n.headers=Uo.concat(i,o);const a=[];let l=!0;this.interceptors.request.forEach(function(b){typeof b.runWhen=="function"&&b.runWhen(n)===!1||(l=l&&b.synchronous,a.unshift(b.fulfilled,b.rejected))});const c=[];this.interceptors.response.forEach(function(b){c.push(b.fulfilled,b.rejected)});let d,f=0,p;if(!l){const x=[s4.bind(this),void 0];for(x.unshift.apply(x,a),x.push.apply(x,c),p=x.length,d=Promise.resolve(n);f<p;)d=d.then(x[f++],x[f++]);return d}p=a.length;let g=n;for(f=0;f<p;){const x=a[f++],b=a[f++];try{g=x(g)}catch(w){b.call(this,w);break}}try{d=s4.call(this,g)}catch(x){return Promise.reject(x)}for(f=0,p=c.length;f<p;)d=d.then(c[f++],c[f++]);return d}getUri(e){e=Md(this.defaults,e);const n=o6(e.baseURL,e.url,e.allowAbsoluteUrls);return e6(n,e.params,e.paramsSerializer)}};Le.forEach(["delete","get","head","options"],function(e){Id.prototype[e]=function(n,r){return this.request(Md(r||{},{method:e,url:n,data:(r||{}).data}))}});Le.forEach(["post","put","patch"],function(e){function n(r){return function(o,i,a){return this.request(Md(a||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:o,data:i}))}}Id.prototype[e]=n(),Id.prototype[e+"Form"]=n(!0)});let TQ=class d6{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(o){n=o});const r=this;this.promise.then(s=>{if(!r._listeners)return;let o=r._listeners.length;for(;o-- >0;)r._listeners[o](s);r._listeners=null}),this.promise.then=s=>{let o;const i=new Promise(a=>{r.subscribe(a),o=a}).then(s);return i.cancel=function(){r.unsubscribe(o)},i},e(function(o,i,a){r.reason||(r.reason=new Cp(o,i,a),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const e=new AbortController,n=r=>{e.abort(r)};return this.subscribe(n),e.signal.unsubscribe=()=>this.unsubscribe(n),e.signal}static source(){let e;return{token:new d6(function(s){e=s}),cancel:e}}};function AQ(t){return function(n){return t.apply(null,n)}}function RQ(t){return Le.isObject(t)&&t.isAxiosError===!0}const AE={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(AE).forEach(([t,e])=>{AE[e]=t});function f6(t){const e=new Id(t),n=W5(Id.prototype.request,e);return Le.extend(n,Id.prototype,e,{allOwnKeys:!0}),Le.extend(n,e,null,{allOwnKeys:!0}),n.create=function(s){return f6(Md(t,s))},n}const yt=f6(N0);yt.Axios=Id;yt.CanceledError=Cp;yt.CancelToken=TQ;yt.isCancel=r6;yt.VERSION=u6;yt.toFormData=Ww;yt.AxiosError=Ut;yt.Cancel=yt.CanceledError;yt.all=function(e){return Promise.all(e)};yt.spread=AQ;yt.isAxiosError=RQ;yt.mergeConfig=Md;yt.AxiosHeaders=Uo;yt.formToJSON=t=>n6(Le.isHTMLForm(t)?new FormData(t):t);yt.getAdapter=c6.getAdapter;yt.HttpStatusCode=AE;yt.default=yt;const{Axios:BWe,AxiosError:jWe,CanceledError:zWe,isCancel:VWe,CancelToken:WWe,VERSION:UWe,all:HWe,Cancel:GWe,isAxiosError:qWe,spread:XWe,toFormData:KWe,AxiosHeaders:YWe,HttpStatusCode:ZWe,formToJSON:QWe,getAdapter:JWe,mergeConfig:eUe}=yt;class Vm extends Error{}Vm.prototype.name="InvalidTokenError";function DQ(t){return decodeURIComponent(atob(t).replace(/(.)/g,(e,n)=>{let r=n.charCodeAt(0).toString(16).toUpperCase();return r.length<2&&(r="0"+r),"%"+r}))}function $Q(t){let e=t.replace(/-/g,"+").replace(/_/g,"/");switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return DQ(e)}catch{return atob(e)}}function OQ(t,e){if(typeof t!="string")throw new Vm("Invalid token specified: must be a string");e||(e={});const n=e.header===!0?0:1,r=t.split(".")[n];if(typeof r!="string")throw new Vm(`Invalid token specified: missing part #${n+1}`);let s;try{s=$Q(r)}catch(o){throw new Vm(`Invalid token specified: invalid base64 for part #${n+1} (${o.message})`)}try{return JSON.parse(s)}catch(o){throw new Vm(`Invalid token specified: invalid json for part #${n+1} (${o.message})`)}}const _Q={development:{apiUrl:"http://localhost:5000",socketUrl:"http://localhost:5000"},production:{apiUrl:"http://your-ec2-ip:5000",socketUrl:"http://your-ec2-ip:5000"}},PQ="production",FQ=_Q[PQ],h6=A.createContext(),La=()=>A.useContext(h6),MQ=({children:t})=>{const[e,n]=A.useState(null),[r,s]=A.useState(localStorage.getItem("token")),[o,i]=A.useState(!0);yt.defaults.baseURL=FQ.apiUrl,A.useEffect(()=>{const x=yt.interceptors.request.use(b=>{const w=localStorage.getItem("token");return w&&(b.headers.Authorization=`Bearer ${w}`),b},b=>Promise.reject(b));return()=>{yt.interceptors.request.eject(x)}},[]),A.useEffect(()=>{(async()=>{try{if(r){const w=(await yt.get("/api/auth/me")).data.user;if(!["admin","faculty","student"].includes(w.role))throw new Error("Invalid user role");n(w)}}catch(b){console.error("Authentication error:",b),localStorage.removeItem("token"),s(null),n(null)}finally{i(!1)}})()},[r]);const a=async(x,b)=>{var w,C,N,k,I,R;try{console.log("Attempting login with:",{email:x,password:"****"});const $=await yt.post("/api/auth/login",{email:x,password:b});if(console.log("Login response:",$.data),!$.data.success)throw new Error($.data.message||"Login failed");const{token:O,user:F}=$.data;if(!["admin","faculty","student"].includes(F.role))throw new Error("Invalid user role");return localStorage.setItem("token",O),s(O),n(F),F}catch($){throw console.error("Login error details:",{status:(w=$.response)==null?void 0:w.status,data:(C=$.response)==null?void 0:C.data,message:((k=(N=$.response)==null?void 0:N.data)==null?void 0:k.message)||$.message}),((R=(I=$.response)==null?void 0:I.data)==null?void 0:R.message)||$.message||"Login failed"}},l=async x=>{var b,w;try{const C=await yt.post("/api/auth/register",x),{token:N,user:k}=C.data;if(!["admin","faculty"].includes(k.role))throw new Error("Not authorized");return localStorage.setItem("token",N),s(N),n(k),k}catch(C){throw((w=(b=C.response)==null?void 0:b.data)==null?void 0:w.message)||"Registration failed"}},c=()=>{localStorage.removeItem("token"),s(null),n(null)},d=()=>{if(!r)return!0;try{return OQ(r).exp*1e3<Date.now()}catch{return!0}},g={currentUser:e,setCurrentUser:n,loading:o,login:a,register:l,logout:c,isTokenExpired:d,canCreateUsers:()=>e&&["admin","faculty"].includes(e.role),canCreateAdmins:()=>e&&e.role==="admin",isAuthenticated:!!r&&!d()&&["admin","faculty","student"].includes(e==null?void 0:e.role)};return S.jsx(h6.Provider,{value:g,children:t})};var LQ=Object.defineProperty,BQ=(t,e,n)=>e in t?LQ(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,MS=(t,e,n)=>(BQ(t,typeof e!="symbol"?e+"":e,n),n);let jQ=class{constructor(){MS(this,"current",this.detect()),MS(this,"handoffState","pending"),MS(this,"currentId",0)}set(e){this.current!==e&&(this.handoffState="pending",this.currentId=0,this.current=e)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}handoff(){this.handoffState==="pending"&&(this.handoffState="complete")}get isHandoffComplete(){return this.handoffState==="complete"}},Kl=new jQ,ds=(t,e)=>{Kl.isServer?A.useEffect(t,e):A.useLayoutEffect(t,e)};function Yl(t){let e=A.useRef(t);return ds(()=>{e.current=t},[t]),e}let zt=function(t){let e=Yl(t);return At.useCallback((...n)=>e.current(...n),[e])};function zQ(t,e,n){let[r,s]=A.useState(n),o=t!==void 0,i=A.useRef(o),a=A.useRef(!1),l=A.useRef(!1);return o&&!i.current&&!a.current?(a.current=!0,i.current=o,console.error("A component is changing from uncontrolled to controlled. This may be caused by the value changing from undefined to a defined value, which should not happen.")):!o&&i.current&&!l.current&&(l.current=!0,i.current=o,console.error("A component is changing from controlled to uncontrolled. This may be caused by the value changing from a defined value to undefined, which should not happen.")),[o?t:r,zt(c=>(o||s(c),e==null?void 0:e(c)))]}function Gw(t){typeof queueMicrotask=="function"?queueMicrotask(t):Promise.resolve().then(t).catch(e=>setTimeout(()=>{throw e}))}function $a(){let t=[],e={addEventListener(n,r,s,o){return n.addEventListener(r,s,o),e.add(()=>n.removeEventListener(r,s,o))},requestAnimationFrame(...n){let r=requestAnimationFrame(...n);return e.add(()=>cancelAnimationFrame(r))},nextFrame(...n){return e.requestAnimationFrame(()=>e.requestAnimationFrame(...n))},setTimeout(...n){let r=setTimeout(...n);return e.add(()=>clearTimeout(r))},microTask(...n){let r={current:!0};return Gw(()=>{r.current&&n[0]()}),e.add(()=>{r.current=!1})},style(n,r,s){let o=n.style.getPropertyValue(r);return Object.assign(n.style,{[r]:s}),this.add(()=>{Object.assign(n.style,{[r]:o})})},group(n){let r=$a();return n(r),this.add(()=>r.dispose())},add(n){return t.push(n),()=>{let r=t.indexOf(n);if(r>=0)for(let s of t.splice(r,1))s()}},dispose(){for(let n of t.splice(0))n()}};return e}function Sp(){let[t]=A.useState($a);return A.useEffect(()=>()=>t.dispose(),[t]),t}function VQ(){let t=typeof document>"u";return"useSyncExternalStore"in Sl?(e=>e.useSyncExternalStore)(Sl)(()=>()=>{},()=>!1,()=>!t):!1}function Np(){let t=VQ(),[e,n]=A.useState(Kl.isHandoffComplete);return e&&Kl.isHandoffComplete===!1&&n(!1),A.useEffect(()=>{e!==!0&&n(!0)},[e]),A.useEffect(()=>Kl.handoff(),[]),t?!1:e}var i4;let Ba=(i4=At.useId)!=null?i4:function(){let t=Np(),[e,n]=At.useState(t?()=>Kl.nextId():null);return ds(()=>{e===null&&n(Kl.nextId())},[e]),e!=null?""+e:void 0};function vs(t,e,...n){if(t in e){let s=e[t];return typeof s=="function"?s(...n):s}let r=new Error(`Tried to handle "${t}" but there is no handler defined. Only defined handlers are: ${Object.keys(e).map(s=>`"${s}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,vs),r}function qw(t){return Kl.isServer?null:t instanceof Node?t.ownerDocument:t!=null&&t.hasOwnProperty("current")&&t.current instanceof Node?t.current.ownerDocument:document}let RE=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map(t=>`${t}:not([tabindex='-1'])`).join(",");var Ul=(t=>(t[t.First=1]="First",t[t.Previous=2]="Previous",t[t.Next=4]="Next",t[t.Last=8]="Last",t[t.WrapAround=16]="WrapAround",t[t.NoScroll=32]="NoScroll",t))(Ul||{}),p6=(t=>(t[t.Error=0]="Error",t[t.Overflow=1]="Overflow",t[t.Success=2]="Success",t[t.Underflow=3]="Underflow",t))(p6||{}),WQ=(t=>(t[t.Previous=-1]="Previous",t[t.Next=1]="Next",t))(WQ||{});function m6(t=document.body){return t==null?[]:Array.from(t.querySelectorAll(RE)).sort((e,n)=>Math.sign((e.tabIndex||Number.MAX_SAFE_INTEGER)-(n.tabIndex||Number.MAX_SAFE_INTEGER)))}var yT=(t=>(t[t.Strict=0]="Strict",t[t.Loose=1]="Loose",t))(yT||{});function bT(t,e=0){var n;return t===((n=qw(t))==null?void 0:n.body)?!1:vs(e,{0(){return t.matches(RE)},1(){let r=t;for(;r!==null;){if(r.matches(RE))return!0;r=r.parentElement}return!1}})}function g6(t){let e=qw(t);$a().nextFrame(()=>{e&&!bT(e.activeElement,0)&&nu(t)})}var UQ=(t=>(t[t.Keyboard=0]="Keyboard",t[t.Mouse=1]="Mouse",t))(UQ||{});typeof window<"u"&&typeof document<"u"&&(document.addEventListener("keydown",t=>{t.metaKey||t.altKey||t.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")},!0),document.addEventListener("click",t=>{t.detail===1?delete document.documentElement.dataset.headlessuiFocusVisible:t.detail===0&&(document.documentElement.dataset.headlessuiFocusVisible="")},!0));function nu(t){t==null||t.focus({preventScroll:!0})}let HQ=["textarea","input"].join(",");function GQ(t){var e,n;return(n=(e=t==null?void 0:t.matches)==null?void 0:e.call(t,HQ))!=null?n:!1}function x6(t,e=n=>n){return t.slice().sort((n,r)=>{let s=e(n),o=e(r);if(s===null||o===null)return 0;let i=s.compareDocumentPosition(o);return i&Node.DOCUMENT_POSITION_FOLLOWING?-1:i&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function qQ(t,e){return ug(m6(),e,{relativeTo:t})}function ug(t,e,{sorted:n=!0,relativeTo:r=null,skipElements:s=[]}={}){let o=Array.isArray(t)?t.length>0?t[0].ownerDocument:document:t.ownerDocument,i=Array.isArray(t)?n?x6(t):t:m6(t);s.length>0&&i.length>1&&(i=i.filter(g=>!s.includes(g))),r=r??o.activeElement;let a=(()=>{if(e&5)return 1;if(e&10)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),l=(()=>{if(e&1)return 0;if(e&2)return Math.max(0,i.indexOf(r))-1;if(e&4)return Math.max(0,i.indexOf(r))+1;if(e&8)return i.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),c=e&32?{preventScroll:!0}:{},d=0,f=i.length,p;do{if(d>=f||d+f<=0)return 0;let g=l+d;if(e&16)g=(g+f)%f;else{if(g<0)return 3;if(g>=f)return 1}p=i[g],p==null||p.focus(c),d+=a}while(p!==o.activeElement);return e&6&&GQ(p)&&p.select(),2}function y6(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function XQ(){return/Android/gi.test(window.navigator.userAgent)}function KQ(){return y6()||XQ()}function Bx(t,e,n){let r=Yl(e);A.useEffect(()=>{function s(o){r.current(o)}return document.addEventListener(t,s,n),()=>document.removeEventListener(t,s,n)},[t,n])}function b6(t,e,n){let r=Yl(e);A.useEffect(()=>{function s(o){r.current(o)}return window.addEventListener(t,s,n),()=>window.removeEventListener(t,s,n)},[t,n])}function w6(t,e,n=!0){let r=A.useRef(!1);A.useEffect(()=>{requestAnimationFrame(()=>{r.current=n})},[n]);function s(i,a){if(!r.current||i.defaultPrevented)return;let l=a(i);if(l===null||!l.getRootNode().contains(l)||!l.isConnected)return;let c=function d(f){return typeof f=="function"?d(f()):Array.isArray(f)||f instanceof Set?f:[f]}(t);for(let d of c){if(d===null)continue;let f=d instanceof HTMLElement?d:d.current;if(f!=null&&f.contains(l)||i.composed&&i.composedPath().includes(f))return}return!bT(l,yT.Loose)&&l.tabIndex!==-1&&i.preventDefault(),e(i,l)}let o=A.useRef(null);Bx("pointerdown",i=>{var a,l;r.current&&(o.current=((l=(a=i.composedPath)==null?void 0:a.call(i))==null?void 0:l[0])||i.target)},!0),Bx("mousedown",i=>{var a,l;r.current&&(o.current=((l=(a=i.composedPath)==null?void 0:a.call(i))==null?void 0:l[0])||i.target)},!0),Bx("click",i=>{KQ()||o.current&&(s(i,()=>o.current),o.current=null)},!0),Bx("touchend",i=>s(i,()=>i.target instanceof HTMLElement?i.target:null),!0),b6("blur",i=>s(i,()=>window.document.activeElement instanceof HTMLIFrameElement?window.document.activeElement:null),!0)}function Ep(...t){return A.useMemo(()=>qw(...t),[...t])}function a4(t){var e;if(t.type)return t.type;let n=(e=t.as)!=null?e:"button";if(typeof n=="string"&&n.toLowerCase()==="button")return"button"}function v6(t,e){let[n,r]=A.useState(()=>a4(t));return ds(()=>{r(a4(t))},[t.type,t.as]),ds(()=>{n||e.current&&e.current instanceof HTMLButtonElement&&!e.current.hasAttribute("type")&&r("button")},[n,e]),n}let C6=Symbol();function YQ(t,e=!0){return Object.assign(t,{[C6]:e})}function Us(...t){let e=A.useRef(t);A.useEffect(()=>{e.current=t},[t]);let n=zt(r=>{for(let s of e.current)s!=null&&(typeof s=="function"?s(r):s.current=r)});return t.every(r=>r==null||(r==null?void 0:r[C6]))?void 0:n}function l4(t){return[t.screenX,t.screenY]}function ZQ(){let t=A.useRef([-1,-1]);return{wasMoved(e){let n=l4(e);return t.current[0]===n[0]&&t.current[1]===n[1]?!1:(t.current=n,!0)},update(e){t.current=l4(e)}}}function QQ({container:t,accept:e,walk:n,enabled:r=!0}){let s=A.useRef(e),o=A.useRef(n);A.useEffect(()=>{s.current=e,o.current=n},[e,n]),ds(()=>{if(!t||!r)return;let i=qw(t);if(!i)return;let a=s.current,l=o.current,c=Object.assign(f=>a(f),{acceptNode:a}),d=i.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,c,!1);for(;d.nextNode();)l(d.currentNode)},[t,r,s,o])}function wT(t,e){let n=A.useRef([]),r=zt(t);A.useEffect(()=>{let s=[...n.current];for(let[o,i]of e.entries())if(n.current[o]!==i){let a=r(e,s);return n.current=e,a}},[r,...e])}function Cb(...t){return Array.from(new Set(t.flatMap(e=>typeof e=="string"?e.split(" "):[]))).filter(Boolean).join(" ")}var Uh=(t=>(t[t.None=0]="None",t[t.RenderStrategy=1]="RenderStrategy",t[t.Static=2]="Static",t))(Uh||{}),Vc=(t=>(t[t.Unmount=0]="Unmount",t[t.Hidden=1]="Hidden",t))(Vc||{});function fs({ourProps:t,theirProps:e,slot:n,defaultTag:r,features:s,visible:o=!0,name:i,mergeRefs:a}){a=a??JQ;let l=S6(e,t);if(o)return jx(l,n,r,i,a);let c=s??0;if(c&2){let{static:d=!1,...f}=l;if(d)return jx(f,n,r,i,a)}if(c&1){let{unmount:d=!0,...f}=l;return vs(d?0:1,{0(){return null},1(){return jx({...f,hidden:!0,style:{display:"none"}},n,r,i,a)}})}return jx(l,n,r,i,a)}function jx(t,e={},n,r,s){let{as:o=n,children:i,refName:a="ref",...l}=LS(t,["unmount","static"]),c=t.ref!==void 0?{[a]:t.ref}:{},d=typeof i=="function"?i(e):i;"className"in l&&l.className&&typeof l.className=="function"&&(l.className=l.className(e));let f={};if(e){let p=!1,g=[];for(let[x,b]of Object.entries(e))typeof b=="boolean"&&(p=!0),b===!0&&g.push(x);p&&(f["data-headlessui-state"]=g.join(" "))}if(o===A.Fragment&&Object.keys(DE(l)).length>0){if(!A.isValidElement(d)||Array.isArray(d)&&d.length>1)throw new Error(['Passing props on "Fragment"!',"",`The current component <${r} /> is rendering a "Fragment".`,"However we need to passthrough the following props:",Object.keys(l).map(b=>`  - ${b}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map(b=>`  - ${b}`).join(`
`)].join(`
`));let p=d.props,g=typeof(p==null?void 0:p.className)=="function"?(...b)=>Cb(p==null?void 0:p.className(...b),l.className):Cb(p==null?void 0:p.className,l.className),x=g?{className:g}:{};return A.cloneElement(d,Object.assign({},S6(d.props,DE(LS(l,["ref"]))),f,c,{ref:s(d.ref,c.ref)},x))}return A.createElement(o,Object.assign({},LS(l,["ref"]),o!==A.Fragment&&c,o!==A.Fragment&&f),d)}function JQ(...t){return t.every(e=>e==null)?void 0:e=>{for(let n of t)n!=null&&(typeof n=="function"?n(e):n.current=e)}}function S6(...t){if(t.length===0)return{};if(t.length===1)return t[0];let e={},n={};for(let r of t)for(let s in r)s.startsWith("on")&&typeof r[s]=="function"?(n[s]!=null||(n[s]=[]),n[s].push(r[s])):e[s]=r[s];if(e.disabled||e["aria-disabled"])return Object.assign(e,Object.fromEntries(Object.keys(n).map(r=>[r,void 0])));for(let r in n)Object.assign(e,{[r](s,...o){let i=n[r];for(let a of i){if((s instanceof Event||(s==null?void 0:s.nativeEvent)instanceof Event)&&s.defaultPrevented)return;a(s,...o)}}});return e}function hs(t){var e;return Object.assign(A.forwardRef(t),{displayName:(e=t.displayName)!=null?e:t.name})}function DE(t){let e=Object.assign({},t);for(let n in e)e[n]===void 0&&delete e[n];return e}function LS(t,e=[]){let n=Object.assign({},t);for(let r of e)r in n&&delete n[r];return n}let eJ="div";var Wg=(t=>(t[t.None=1]="None",t[t.Focusable=2]="Focusable",t[t.Hidden=4]="Hidden",t))(Wg||{});function tJ(t,e){var n;let{features:r=1,...s}=t,o={ref:e,"aria-hidden":(r&2)===2?!0:(n=s["aria-hidden"])!=null?n:void 0,hidden:(r&4)===4?!0:void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...(r&4)===4&&(r&2)!==2&&{display:"none"}}};return fs({ourProps:o,theirProps:s,slot:{},defaultTag:eJ,name:"Hidden"})}let Sb=hs(tJ),vT=A.createContext(null);vT.displayName="OpenClosedContext";var Fs=(t=>(t[t.Open=1]="Open",t[t.Closed=2]="Closed",t[t.Closing=4]="Closing",t[t.Opening=8]="Opening",t))(Fs||{});function Xw(){return A.useContext(vT)}function N6({value:t,children:e}){return At.createElement(vT.Provider,{value:t},e)}function nJ(t){function e(){document.readyState!=="loading"&&(t(),document.removeEventListener("DOMContentLoaded",e))}typeof window<"u"&&typeof document<"u"&&(document.addEventListener("DOMContentLoaded",e),e())}let Lc=[];nJ(()=>{function t(e){e.target instanceof HTMLElement&&e.target!==document.body&&Lc[0]!==e.target&&(Lc.unshift(e.target),Lc=Lc.filter(n=>n!=null&&n.isConnected),Lc.splice(10))}window.addEventListener("click",t,{capture:!0}),window.addEventListener("mousedown",t,{capture:!0}),window.addEventListener("focus",t,{capture:!0}),document.body.addEventListener("click",t,{capture:!0}),document.body.addEventListener("mousedown",t,{capture:!0}),document.body.addEventListener("focus",t,{capture:!0})});function CT(t){let e=t.parentElement,n=null;for(;e&&!(e instanceof HTMLFieldSetElement);)e instanceof HTMLLegendElement&&(n=e),e=e.parentElement;let r=(e==null?void 0:e.getAttribute("disabled"))==="";return r&&rJ(n)?!1:r}function rJ(t){if(!t)return!1;let e=t.previousElementSibling;for(;e!==null;){if(e instanceof HTMLLegendElement)return!1;e=e.previousElementSibling}return!0}function sJ(t){throw new Error("Unexpected object: "+t)}var Na=(t=>(t[t.First=0]="First",t[t.Previous=1]="Previous",t[t.Next=2]="Next",t[t.Last=3]="Last",t[t.Specific=4]="Specific",t[t.Nothing=5]="Nothing",t))(Na||{});function oJ(t,e){let n=e.resolveItems();if(n.length<=0)return null;let r=e.resolveActiveIndex(),s=r??-1;switch(t.focus){case 0:{for(let o=0;o<n.length;++o)if(!e.resolveDisabled(n[o],o,n))return o;return r}case 1:{for(let o=s-1;o>=0;--o)if(!e.resolveDisabled(n[o],o,n))return o;return r}case 2:{for(let o=s+1;o<n.length;++o)if(!e.resolveDisabled(n[o],o,n))return o;return r}case 3:{for(let o=n.length-1;o>=0;--o)if(!e.resolveDisabled(n[o],o,n))return o;return r}case 4:{for(let o=0;o<n.length;++o)if(e.resolveId(n[o],o,n)===t.id)return o;return r}case 5:return null;default:sJ(t)}}function iJ(t){var e,n;let r=(e=t==null?void 0:t.form)!=null?e:t.closest("form");if(r){for(let s of r.elements)if(s!==t&&(s.tagName==="INPUT"&&s.type==="submit"||s.tagName==="BUTTON"&&s.type==="submit"||s.nodeName==="INPUT"&&s.type==="image")){s.click();return}(n=r.requestSubmit)==null||n.call(r)}}var Wr=(t=>(t.Space=" ",t.Enter="Enter",t.Escape="Escape",t.Backspace="Backspace",t.Delete="Delete",t.ArrowLeft="ArrowLeft",t.ArrowUp="ArrowUp",t.ArrowRight="ArrowRight",t.ArrowDown="ArrowDown",t.Home="Home",t.End="End",t.PageUp="PageUp",t.PageDown="PageDown",t.Tab="Tab",t))(Wr||{});function E6(t,e,n,r){let s=Yl(n);A.useEffect(()=>{t=t??window;function o(i){s.current(i)}return t.addEventListener(e,o,r),()=>t.removeEventListener(e,o,r)},[t,e,r])}function E0(){let t=A.useRef(!1);return ds(()=>(t.current=!0,()=>{t.current=!1}),[]),t}function I6(t){let e=zt(t),n=A.useRef(!1);A.useEffect(()=>(n.current=!1,()=>{n.current=!0,Gw(()=>{n.current&&e()})}),[e])}var Wm=(t=>(t[t.Forwards=0]="Forwards",t[t.Backwards=1]="Backwards",t))(Wm||{});function aJ(){let t=A.useRef(0);return b6("keydown",e=>{e.key==="Tab"&&(t.current=e.shiftKey?1:0)},!0),t}function k6(t){if(!t)return new Set;if(typeof t=="function")return new Set(t());let e=new Set;for(let n of t.current)n.current instanceof HTMLElement&&e.add(n.current);return e}let lJ="div";var T6=(t=>(t[t.None=1]="None",t[t.InitialFocus=2]="InitialFocus",t[t.TabLock=4]="TabLock",t[t.FocusLock=8]="FocusLock",t[t.RestoreFocus=16]="RestoreFocus",t[t.All=30]="All",t))(T6||{});function cJ(t,e){let n=A.useRef(null),r=Us(n,e),{initialFocus:s,containers:o,features:i=30,...a}=t;Np()||(i=1);let l=Ep(n);fJ({ownerDocument:l},!!(i&16));let c=hJ({ownerDocument:l,container:n,initialFocus:s},!!(i&2));pJ({ownerDocument:l,container:n,containers:o,previousActiveElement:c},!!(i&8));let d=aJ(),f=zt(b=>{let w=n.current;w&&(C=>C())(()=>{vs(d.current,{[Wm.Forwards]:()=>{ug(w,Ul.First,{skipElements:[b.relatedTarget]})},[Wm.Backwards]:()=>{ug(w,Ul.Last,{skipElements:[b.relatedTarget]})}})})}),p=Sp(),g=A.useRef(!1),x={ref:r,onKeyDown(b){b.key=="Tab"&&(g.current=!0,p.requestAnimationFrame(()=>{g.current=!1}))},onBlur(b){let w=k6(o);n.current instanceof HTMLElement&&w.add(n.current);let C=b.relatedTarget;C instanceof HTMLElement&&C.dataset.headlessuiFocusGuard!=="true"&&(A6(w,C)||(g.current?ug(n.current,vs(d.current,{[Wm.Forwards]:()=>Ul.Next,[Wm.Backwards]:()=>Ul.Previous})|Ul.WrapAround,{relativeTo:b.target}):b.target instanceof HTMLElement&&nu(b.target)))}};return At.createElement(At.Fragment,null,!!(i&4)&&At.createElement(Sb,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:f,features:Wg.Focusable}),fs({ourProps:x,theirProps:a,defaultTag:lJ,name:"FocusTrap"}),!!(i&4)&&At.createElement(Sb,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:f,features:Wg.Focusable}))}let uJ=hs(cJ),pm=Object.assign(uJ,{features:T6});function dJ(t=!0){let e=A.useRef(Lc.slice());return wT(([n],[r])=>{r===!0&&n===!1&&Gw(()=>{e.current.splice(0)}),r===!1&&n===!0&&(e.current=Lc.slice())},[t,Lc,e]),zt(()=>{var n;return(n=e.current.find(r=>r!=null&&r.isConnected))!=null?n:null})}function fJ({ownerDocument:t},e){let n=dJ(e);wT(()=>{e||(t==null?void 0:t.activeElement)===(t==null?void 0:t.body)&&nu(n())},[e]),I6(()=>{e&&nu(n())})}function hJ({ownerDocument:t,container:e,initialFocus:n},r){let s=A.useRef(null),o=E0();return wT(()=>{if(!r)return;let i=e.current;i&&Gw(()=>{if(!o.current)return;let a=t==null?void 0:t.activeElement;if(n!=null&&n.current){if((n==null?void 0:n.current)===a){s.current=a;return}}else if(i.contains(a)){s.current=a;return}n!=null&&n.current?nu(n.current):ug(i,Ul.First)===p6.Error&&console.warn("There are no focusable elements inside the <FocusTrap />"),s.current=t==null?void 0:t.activeElement})},[r]),s}function pJ({ownerDocument:t,container:e,containers:n,previousActiveElement:r},s){let o=E0();E6(t==null?void 0:t.defaultView,"focus",i=>{if(!s||!o.current)return;let a=k6(n);e.current instanceof HTMLElement&&a.add(e.current);let l=r.current;if(!l)return;let c=i.target;c&&c instanceof HTMLElement?A6(a,c)?(r.current=c,nu(c)):(i.preventDefault(),i.stopPropagation(),nu(l)):nu(r.current)},!0)}function A6(t,e){for(let n of t)if(n.contains(e))return!0;return!1}let R6=A.createContext(!1);function mJ(){return A.useContext(R6)}function $E(t){return At.createElement(R6.Provider,{value:t.force},t.children)}function gJ(t){let e=mJ(),n=A.useContext(D6),r=Ep(t),[s,o]=A.useState(()=>{if(!e&&n!==null||Kl.isServer)return null;let i=r==null?void 0:r.getElementById("headlessui-portal-root");if(i)return i;if(r===null)return null;let a=r.createElement("div");return a.setAttribute("id","headlessui-portal-root"),r.body.appendChild(a)});return A.useEffect(()=>{s!==null&&(r!=null&&r.body.contains(s)||r==null||r.body.appendChild(s))},[s,r]),A.useEffect(()=>{e||n!==null&&o(n.current)},[n,o,e]),s}let xJ=A.Fragment;function yJ(t,e){let n=t,r=A.useRef(null),s=Us(YQ(d=>{r.current=d}),e),o=Ep(r),i=gJ(r),[a]=A.useState(()=>{var d;return Kl.isServer?null:(d=o==null?void 0:o.createElement("div"))!=null?d:null}),l=A.useContext(OE),c=Np();return ds(()=>{!i||!a||i.contains(a)||(a.setAttribute("data-headlessui-portal",""),i.appendChild(a))},[i,a]),ds(()=>{if(a&&l)return l.register(a)},[l,a]),I6(()=>{var d;!i||!a||(a instanceof Node&&i.contains(a)&&i.removeChild(a),i.childNodes.length<=0&&((d=i.parentElement)==null||d.removeChild(i)))}),c?!i||!a?null:Mw.createPortal(fs({ourProps:{ref:s},theirProps:n,defaultTag:xJ,name:"Portal"}),a):null}let bJ=A.Fragment,D6=A.createContext(null);function wJ(t,e){let{target:n,...r}=t,s={ref:Us(e)};return At.createElement(D6.Provider,{value:n},fs({ourProps:s,theirProps:r,defaultTag:bJ,name:"Popover.Group"}))}let OE=A.createContext(null);function vJ(){let t=A.useContext(OE),e=A.useRef([]),n=zt(o=>(e.current.push(o),t&&t.register(o),()=>r(o))),r=zt(o=>{let i=e.current.indexOf(o);i!==-1&&e.current.splice(i,1),t&&t.unregister(o)}),s=A.useMemo(()=>({register:n,unregister:r,portals:e}),[n,r,e]);return[e,A.useMemo(()=>function({children:o}){return At.createElement(OE.Provider,{value:s},o)},[s])]}let CJ=hs(yJ),SJ=hs(wJ),_E=Object.assign(CJ,{Group:SJ});function NJ(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}const EJ=typeof Object.is=="function"?Object.is:NJ,{useState:IJ,useEffect:kJ,useLayoutEffect:TJ,useDebugValue:AJ}=Sl;function RJ(t,e,n){const r=e(),[{inst:s},o]=IJ({inst:{value:r,getSnapshot:e}});return TJ(()=>{s.value=r,s.getSnapshot=e,BS(s)&&o({inst:s})},[t,r,e]),kJ(()=>(BS(s)&&o({inst:s}),t(()=>{BS(s)&&o({inst:s})})),[t]),AJ(r),r}function BS(t){const e=t.getSnapshot,n=t.value;try{const r=e();return!EJ(n,r)}catch{return!0}}function DJ(t,e,n){return e()}const $J=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",OJ=!$J,_J=OJ?DJ:RJ,PJ="useSyncExternalStore"in Sl?(t=>t.useSyncExternalStore)(Sl):_J;function FJ(t){return PJ(t.subscribe,t.getSnapshot,t.getSnapshot)}function MJ(t,e){let n=t(),r=new Set;return{getSnapshot(){return n},subscribe(s){return r.add(s),()=>r.delete(s)},dispatch(s,...o){let i=e[s].call(n,...o);i&&(n=i,r.forEach(a=>a()))}}}function LJ(){let t;return{before({doc:e}){var n;let r=e.documentElement;t=((n=e.defaultView)!=null?n:window).innerWidth-r.clientWidth},after({doc:e,d:n}){let r=e.documentElement,s=r.clientWidth-r.offsetWidth,o=t-s;n.style(r,"paddingRight",`${o}px`)}}}function BJ(){return y6()?{before({doc:t,d:e,meta:n}){function r(s){return n.containers.flatMap(o=>o()).some(o=>o.contains(s))}e.microTask(()=>{var s;if(window.getComputedStyle(t.documentElement).scrollBehavior!=="auto"){let a=$a();a.style(t.documentElement,"scrollBehavior","auto"),e.add(()=>e.microTask(()=>a.dispose()))}let o=(s=window.scrollY)!=null?s:window.pageYOffset,i=null;e.addEventListener(t,"click",a=>{if(a.target instanceof HTMLElement)try{let l=a.target.closest("a");if(!l)return;let{hash:c}=new URL(l.href),d=t.querySelector(c);d&&!r(d)&&(i=d)}catch{}},!0),e.addEventListener(t,"touchstart",a=>{if(a.target instanceof HTMLElement)if(r(a.target)){let l=a.target;for(;l.parentElement&&r(l.parentElement);)l=l.parentElement;e.style(l,"overscrollBehavior","contain")}else e.style(a.target,"touchAction","none")}),e.addEventListener(t,"touchmove",a=>{if(a.target instanceof HTMLElement)if(r(a.target)){let l=a.target;for(;l.parentElement&&l.dataset.headlessuiPortal!==""&&!(l.scrollHeight>l.clientHeight||l.scrollWidth>l.clientWidth);)l=l.parentElement;l.dataset.headlessuiPortal===""&&a.preventDefault()}else a.preventDefault()},{passive:!1}),e.add(()=>{var a;let l=(a=window.scrollY)!=null?a:window.pageYOffset;o!==l&&window.scrollTo(0,o),i&&i.isConnected&&(i.scrollIntoView({block:"nearest"}),i=null)})})}}:{}}function jJ(){return{before({doc:t,d:e}){e.style(t.documentElement,"overflow","hidden")}}}function zJ(t){let e={};for(let n of t)Object.assign(e,n(e));return e}let yd=MJ(()=>new Map,{PUSH(t,e){var n;let r=(n=this.get(t))!=null?n:{doc:t,count:0,d:$a(),meta:new Set};return r.count++,r.meta.add(e),this.set(t,r),this},POP(t,e){let n=this.get(t);return n&&(n.count--,n.meta.delete(e)),this},SCROLL_PREVENT({doc:t,d:e,meta:n}){let r={doc:t,d:e,meta:zJ(n)},s=[BJ(),LJ(),jJ()];s.forEach(({before:o})=>o==null?void 0:o(r)),s.forEach(({after:o})=>o==null?void 0:o(r))},SCROLL_ALLOW({d:t}){t.dispose()},TEARDOWN({doc:t}){this.delete(t)}});yd.subscribe(()=>{let t=yd.getSnapshot(),e=new Map;for(let[n]of t)e.set(n,n.documentElement.style.overflow);for(let n of t.values()){let r=e.get(n.doc)==="hidden",s=n.count!==0;(s&&!r||!s&&r)&&yd.dispatch(n.count>0?"SCROLL_PREVENT":"SCROLL_ALLOW",n),n.count===0&&yd.dispatch("TEARDOWN",n)}});function VJ(t,e,n){let r=FJ(yd),s=t?r.get(t):void 0,o=s?s.count>0:!1;return ds(()=>{if(!(!t||!e))return yd.dispatch("PUSH",t,n),()=>yd.dispatch("POP",t,n)},[e,t]),o}let jS=new Map,mm=new Map;function c4(t,e=!0){ds(()=>{var n;if(!e)return;let r=typeof t=="function"?t():t.current;if(!r)return;function s(){var i;if(!r)return;let a=(i=mm.get(r))!=null?i:1;if(a===1?mm.delete(r):mm.set(r,a-1),a!==1)return;let l=jS.get(r);l&&(l["aria-hidden"]===null?r.removeAttribute("aria-hidden"):r.setAttribute("aria-hidden",l["aria-hidden"]),r.inert=l.inert,jS.delete(r))}let o=(n=mm.get(r))!=null?n:0;return mm.set(r,o+1),o!==0||(jS.set(r,{"aria-hidden":r.getAttribute("aria-hidden"),inert:r.inert}),r.setAttribute("aria-hidden","true"),r.inert=!0),s},[t,e])}function WJ({defaultContainers:t=[],portals:e,mainTreeNodeRef:n}={}){var r;let s=A.useRef((r=n==null?void 0:n.current)!=null?r:null),o=Ep(s),i=zt(()=>{var a,l,c;let d=[];for(let f of t)f!==null&&(f instanceof HTMLElement?d.push(f):"current"in f&&f.current instanceof HTMLElement&&d.push(f.current));if(e!=null&&e.current)for(let f of e.current)d.push(f);for(let f of(a=o==null?void 0:o.querySelectorAll("html > *, body > *"))!=null?a:[])f!==document.body&&f!==document.head&&f instanceof HTMLElement&&f.id!=="headlessui-portal-root"&&(f.contains(s.current)||f.contains((c=(l=s.current)==null?void 0:l.getRootNode())==null?void 0:c.host)||d.some(p=>f.contains(p))||d.push(f));return d});return{resolveContainers:i,contains:zt(a=>i().some(l=>l.contains(a))),mainTreeNodeRef:s,MainTreeNode:A.useMemo(()=>function(){return n!=null?null:At.createElement(Sb,{features:Wg.Hidden,ref:s})},[s,n])}}let ST=A.createContext(()=>{});ST.displayName="StackContext";var PE=(t=>(t[t.Add=0]="Add",t[t.Remove=1]="Remove",t))(PE||{});function UJ(){return A.useContext(ST)}function HJ({children:t,onUpdate:e,type:n,element:r,enabled:s}){let o=UJ(),i=zt((...a)=>{e==null||e(...a),o(...a)});return ds(()=>{let a=s===void 0||s===!0;return a&&i(0,n,r),()=>{a&&i(1,n,r)}},[i,n,r,s]),At.createElement(ST.Provider,{value:i},t)}let $6=A.createContext(null);function O6(){let t=A.useContext($6);if(t===null){let e=new Error("You used a <Description /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(e,O6),e}return t}function _6(){let[t,e]=A.useState([]);return[t.length>0?t.join(" "):void 0,A.useMemo(()=>function(n){let r=zt(o=>(e(i=>[...i,o]),()=>e(i=>{let a=i.slice(),l=a.indexOf(o);return l!==-1&&a.splice(l,1),a}))),s=A.useMemo(()=>({register:r,slot:n.slot,name:n.name,props:n.props}),[r,n.slot,n.name,n.props]);return At.createElement($6.Provider,{value:s},n.children)},[e])]}let GJ="p";function qJ(t,e){let n=Ba(),{id:r=`headlessui-description-${n}`,...s}=t,o=O6(),i=Us(e);ds(()=>o.register(r),[r,o.register]);let a={ref:i,...o.props,id:r};return fs({ourProps:a,theirProps:s,slot:o.slot||{},defaultTag:GJ,name:o.name||"Description"})}let XJ=hs(qJ),P6=Object.assign(XJ,{});var KJ=(t=>(t[t.Open=0]="Open",t[t.Closed=1]="Closed",t))(KJ||{}),YJ=(t=>(t[t.SetTitleId=0]="SetTitleId",t))(YJ||{});let ZJ={0(t,e){return t.titleId===e.id?t:{...t,titleId:e.id}}},Nb=A.createContext(null);Nb.displayName="DialogContext";function I0(t){let e=A.useContext(Nb);if(e===null){let n=new Error(`<${t} /> is missing a parent <Dialog /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,I0),n}return e}function QJ(t,e,n=()=>[document.body]){VJ(t,e,r=>{var s;return{containers:[...(s=r.containers)!=null?s:[],n]}})}function JJ(t,e){return vs(e.type,ZJ,t,e)}let eee="div",tee=Uh.RenderStrategy|Uh.Static;function nee(t,e){let n=Ba(),{id:r=`headlessui-dialog-${n}`,open:s,onClose:o,initialFocus:i,role:a="dialog",__demoMode:l=!1,...c}=t,[d,f]=A.useState(0),p=A.useRef(!1);a=function(){return a==="dialog"||a==="alertdialog"?a:(p.current||(p.current=!0,console.warn(`Invalid role [${a}] passed to <Dialog />. Only \`dialog\` and and \`alertdialog\` are supported. Using \`dialog\` instead.`)),"dialog")}();let g=Xw();s===void 0&&g!==null&&(s=(g&Fs.Open)===Fs.Open);let x=A.useRef(null),b=Us(x,e),w=Ep(x),C=t.hasOwnProperty("open")||g!==null,N=t.hasOwnProperty("onClose");if(!C&&!N)throw new Error("You have to provide an `open` and an `onClose` prop to the `Dialog` component.");if(!C)throw new Error("You provided an `onClose` prop to the `Dialog`, but forgot an `open` prop.");if(!N)throw new Error("You provided an `open` prop to the `Dialog`, but forgot an `onClose` prop.");if(typeof s!="boolean")throw new Error(`You provided an \`open\` prop to the \`Dialog\`, but the value is not a boolean. Received: ${s}`);if(typeof o!="function")throw new Error(`You provided an \`onClose\` prop to the \`Dialog\`, but the value is not a function. Received: ${o}`);let k=s?0:1,[I,R]=A.useReducer(JJ,{titleId:null,descriptionId:null,panelRef:A.createRef()}),$=zt(()=>o(!1)),O=zt(me=>R({type:0,id:me})),F=Np()?l?!1:k===0:!1,M=d>1,_=A.useContext(Nb)!==null,[V,B]=vJ(),W={get current(){var me;return(me=I.panelRef.current)!=null?me:x.current}},{resolveContainers:q,mainTreeNodeRef:j,MainTreeNode:G}=WJ({portals:V,defaultContainers:[W]}),Z=M?"parent":"leaf",J=g!==null?(g&Fs.Closing)===Fs.Closing:!1,X=_||J?!1:F,ee=A.useCallback(()=>{var me,ke;return(ke=Array.from((me=w==null?void 0:w.querySelectorAll("body > *"))!=null?me:[]).find(pe=>pe.id==="headlessui-portal-root"?!1:pe.contains(j.current)&&pe instanceof HTMLElement))!=null?ke:null},[j]);c4(ee,X);let ne=M?!0:F,oe=A.useCallback(()=>{var me,ke;return(ke=Array.from((me=w==null?void 0:w.querySelectorAll("[data-headlessui-portal]"))!=null?me:[]).find(pe=>pe.contains(j.current)&&pe instanceof HTMLElement))!=null?ke:null},[j]);c4(oe,ne),w6(q,me=>{me.preventDefault(),$()},!(!F||M));let ge=!(M||k!==0);E6(w==null?void 0:w.defaultView,"keydown",me=>{ge&&(me.defaultPrevented||me.key===Wr.Escape&&(me.preventDefault(),me.stopPropagation(),$()))}),QJ(w,!(J||k!==0||_),q),A.useEffect(()=>{if(k!==0||!x.current)return;let me=new ResizeObserver(ke=>{for(let pe of ke){let Pe=pe.target.getBoundingClientRect();Pe.x===0&&Pe.y===0&&Pe.width===0&&Pe.height===0&&$()}});return me.observe(x.current),()=>me.disconnect()},[k,x,$]);let[he,Me]=_6(),ze=A.useMemo(()=>[{dialogState:k,close:$,setTitleId:O},I],[k,I,$,O]),Oe=A.useMemo(()=>({open:k===0}),[k]),Ie={ref:b,id:r,role:a,"aria-modal":k===0?!0:void 0,"aria-labelledby":I.titleId,"aria-describedby":he};return At.createElement(HJ,{type:"Dialog",enabled:k===0,element:x,onUpdate:zt((me,ke)=>{ke==="Dialog"&&vs(me,{[PE.Add]:()=>f(pe=>pe+1),[PE.Remove]:()=>f(pe=>pe-1)})})},At.createElement($E,{force:!0},At.createElement(_E,null,At.createElement(Nb.Provider,{value:ze},At.createElement(_E.Group,{target:x},At.createElement($E,{force:!1},At.createElement(Me,{slot:Oe,name:"Dialog.Description"},At.createElement(pm,{initialFocus:i,containers:q,features:F?vs(Z,{parent:pm.features.RestoreFocus,leaf:pm.features.All&~pm.features.FocusLock}):pm.features.None},At.createElement(B,null,fs({ourProps:Ie,theirProps:c,slot:Oe,defaultTag:eee,features:tee,visible:k===0,name:"Dialog"}))))))))),At.createElement(G,null))}let ree="div";function see(t,e){let n=Ba(),{id:r=`headlessui-dialog-overlay-${n}`,...s}=t,[{dialogState:o,close:i}]=I0("Dialog.Overlay"),a=Us(e),l=zt(d=>{if(d.target===d.currentTarget){if(CT(d.currentTarget))return d.preventDefault();d.preventDefault(),d.stopPropagation(),i()}}),c=A.useMemo(()=>({open:o===0}),[o]);return fs({ourProps:{ref:a,id:r,"aria-hidden":!0,onClick:l},theirProps:s,slot:c,defaultTag:ree,name:"Dialog.Overlay"})}let oee="div";function iee(t,e){let n=Ba(),{id:r=`headlessui-dialog-backdrop-${n}`,...s}=t,[{dialogState:o},i]=I0("Dialog.Backdrop"),a=Us(e);A.useEffect(()=>{if(i.panelRef.current===null)throw new Error("A <Dialog.Backdrop /> component is being used, but a <Dialog.Panel /> component is missing.")},[i.panelRef]);let l=A.useMemo(()=>({open:o===0}),[o]);return At.createElement($E,{force:!0},At.createElement(_E,null,fs({ourProps:{ref:a,id:r,"aria-hidden":!0},theirProps:s,slot:l,defaultTag:oee,name:"Dialog.Backdrop"})))}let aee="div";function lee(t,e){let n=Ba(),{id:r=`headlessui-dialog-panel-${n}`,...s}=t,[{dialogState:o},i]=I0("Dialog.Panel"),a=Us(e,i.panelRef),l=A.useMemo(()=>({open:o===0}),[o]),c=zt(d=>{d.stopPropagation()});return fs({ourProps:{ref:a,id:r,onClick:c},theirProps:s,slot:l,defaultTag:aee,name:"Dialog.Panel"})}let cee="h2";function uee(t,e){let n=Ba(),{id:r=`headlessui-dialog-title-${n}`,...s}=t,[{dialogState:o,setTitleId:i}]=I0("Dialog.Title"),a=Us(e);A.useEffect(()=>(i(r),()=>i(null)),[r,i]);let l=A.useMemo(()=>({open:o===0}),[o]);return fs({ourProps:{ref:a,id:r},theirProps:s,slot:l,defaultTag:cee,name:"Dialog.Title"})}let dee=hs(nee),fee=hs(iee),hee=hs(lee),pee=hs(see),mee=hs(uee),u4=Object.assign(dee,{Backdrop:fee,Panel:hee,Overlay:pee,Title:mee,Description:P6}),d4=/([\u2700-\u27BF]|[\uE000-\uF8FF]|\uD83C[\uDC00-\uDFFF]|\uD83D[\uDC00-\uDFFF]|[\u2011-\u26FF]|\uD83E[\uDD10-\uDDFF])/g;function f4(t){var e,n;let r=(e=t.innerText)!=null?e:"",s=t.cloneNode(!0);if(!(s instanceof HTMLElement))return r;let o=!1;for(let a of s.querySelectorAll('[hidden],[aria-hidden],[role="img"]'))a.remove(),o=!0;let i=o?(n=s.innerText)!=null?n:"":r;return d4.test(i)&&(i=i.replace(d4,"")),i}function gee(t){let e=t.getAttribute("aria-label");if(typeof e=="string")return e.trim();let n=t.getAttribute("aria-labelledby");if(n){let r=n.split(" ").map(s=>{let o=document.getElementById(s);if(o){let i=o.getAttribute("aria-label");return typeof i=="string"?i.trim():f4(o).trim()}return null}).filter(Boolean);if(r.length>0)return r.join(", ")}return f4(t).trim()}function xee(t){let e=A.useRef(""),n=A.useRef("");return zt(()=>{let r=t.current;if(!r)return"";let s=r.innerText;if(e.current===s)return n.current;let o=gee(r).trim().toLowerCase();return e.current=s,n.current=o,o})}var yee=(t=>(t[t.Open=0]="Open",t[t.Closed=1]="Closed",t))(yee||{}),bee=(t=>(t[t.Pointer=0]="Pointer",t[t.Other=1]="Other",t))(bee||{}),wee=(t=>(t[t.OpenMenu=0]="OpenMenu",t[t.CloseMenu=1]="CloseMenu",t[t.GoToItem=2]="GoToItem",t[t.Search=3]="Search",t[t.ClearSearch=4]="ClearSearch",t[t.RegisterItem=5]="RegisterItem",t[t.UnregisterItem=6]="UnregisterItem",t))(wee||{});function zS(t,e=n=>n){let n=t.activeItemIndex!==null?t.items[t.activeItemIndex]:null,r=x6(e(t.items.slice()),o=>o.dataRef.current.domRef.current),s=n?r.indexOf(n):null;return s===-1&&(s=null),{items:r,activeItemIndex:s}}let vee={1(t){return t.menuState===1?t:{...t,activeItemIndex:null,menuState:1}},0(t){return t.menuState===0?t:{...t,__demoMode:!1,menuState:0}},2:(t,e)=>{var n;let r=zS(t),s=oJ(e,{resolveItems:()=>r.items,resolveActiveIndex:()=>r.activeItemIndex,resolveId:o=>o.id,resolveDisabled:o=>o.dataRef.current.disabled});return{...t,...r,searchQuery:"",activeItemIndex:s,activationTrigger:(n=e.trigger)!=null?n:1}},3:(t,e)=>{let n=t.searchQuery!==""?0:1,r=t.searchQuery+e.value.toLowerCase(),s=(t.activeItemIndex!==null?t.items.slice(t.activeItemIndex+n).concat(t.items.slice(0,t.activeItemIndex+n)):t.items).find(i=>{var a;return((a=i.dataRef.current.textValue)==null?void 0:a.startsWith(r))&&!i.dataRef.current.disabled}),o=s?t.items.indexOf(s):-1;return o===-1||o===t.activeItemIndex?{...t,searchQuery:r}:{...t,searchQuery:r,activeItemIndex:o,activationTrigger:1}},4(t){return t.searchQuery===""?t:{...t,searchQuery:"",searchActiveItemIndex:null}},5:(t,e)=>{let n=zS(t,r=>[...r,{id:e.id,dataRef:e.dataRef}]);return{...t,...n}},6:(t,e)=>{let n=zS(t,r=>{let s=r.findIndex(o=>o.id===e.id);return s!==-1&&r.splice(s,1),r});return{...t,...n,activationTrigger:1}}},NT=A.createContext(null);NT.displayName="MenuContext";function Kw(t){let e=A.useContext(NT);if(e===null){let n=new Error(`<${t} /> is missing a parent <Menu /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,Kw),n}return e}function Cee(t,e){return vs(e.type,vee,t,e)}let See=A.Fragment;function Nee(t,e){let{__demoMode:n=!1,...r}=t,s=A.useReducer(Cee,{__demoMode:n,menuState:n?0:1,buttonRef:A.createRef(),itemsRef:A.createRef(),items:[],searchQuery:"",activeItemIndex:null,activationTrigger:1}),[{menuState:o,itemsRef:i,buttonRef:a},l]=s,c=Us(e);w6([a,i],(g,x)=>{var b;l({type:1}),bT(x,yT.Loose)||(g.preventDefault(),(b=a.current)==null||b.focus())},o===0);let d=zt(()=>{l({type:1})}),f=A.useMemo(()=>({open:o===0,close:d}),[o,d]),p={ref:c};return At.createElement(NT.Provider,{value:s},At.createElement(N6,{value:vs(o,{0:Fs.Open,1:Fs.Closed})},fs({ourProps:p,theirProps:r,slot:f,defaultTag:See,name:"Menu"})))}let Eee="button";function Iee(t,e){var n;let r=Ba(),{id:s=`headlessui-menu-button-${r}`,...o}=t,[i,a]=Kw("Menu.Button"),l=Us(i.buttonRef,e),c=Sp(),d=zt(b=>{switch(b.key){case Wr.Space:case Wr.Enter:case Wr.ArrowDown:b.preventDefault(),b.stopPropagation(),a({type:0}),c.nextFrame(()=>a({type:2,focus:Na.First}));break;case Wr.ArrowUp:b.preventDefault(),b.stopPropagation(),a({type:0}),c.nextFrame(()=>a({type:2,focus:Na.Last}));break}}),f=zt(b=>{switch(b.key){case Wr.Space:b.preventDefault();break}}),p=zt(b=>{if(CT(b.currentTarget))return b.preventDefault();t.disabled||(i.menuState===0?(a({type:1}),c.nextFrame(()=>{var w;return(w=i.buttonRef.current)==null?void 0:w.focus({preventScroll:!0})})):(b.preventDefault(),a({type:0})))}),g=A.useMemo(()=>({open:i.menuState===0}),[i]),x={ref:l,id:s,type:v6(t,i.buttonRef),"aria-haspopup":"menu","aria-controls":(n=i.itemsRef.current)==null?void 0:n.id,"aria-expanded":i.menuState===0,onKeyDown:d,onKeyUp:f,onClick:p};return fs({ourProps:x,theirProps:o,slot:g,defaultTag:Eee,name:"Menu.Button"})}let kee="div",Tee=Uh.RenderStrategy|Uh.Static;function Aee(t,e){var n,r;let s=Ba(),{id:o=`headlessui-menu-items-${s}`,...i}=t,[a,l]=Kw("Menu.Items"),c=Us(a.itemsRef,e),d=Ep(a.itemsRef),f=Sp(),p=Xw(),g=p!==null?(p&Fs.Open)===Fs.Open:a.menuState===0;A.useEffect(()=>{let N=a.itemsRef.current;N&&a.menuState===0&&N!==(d==null?void 0:d.activeElement)&&N.focus({preventScroll:!0})},[a.menuState,a.itemsRef,d]),QQ({container:a.itemsRef.current,enabled:a.menuState===0,accept(N){return N.getAttribute("role")==="menuitem"?NodeFilter.FILTER_REJECT:N.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(N){N.setAttribute("role","none")}});let x=zt(N=>{var k,I;switch(f.dispose(),N.key){case Wr.Space:if(a.searchQuery!=="")return N.preventDefault(),N.stopPropagation(),l({type:3,value:N.key});case Wr.Enter:if(N.preventDefault(),N.stopPropagation(),l({type:1}),a.activeItemIndex!==null){let{dataRef:R}=a.items[a.activeItemIndex];(I=(k=R.current)==null?void 0:k.domRef.current)==null||I.click()}g6(a.buttonRef.current);break;case Wr.ArrowDown:return N.preventDefault(),N.stopPropagation(),l({type:2,focus:Na.Next});case Wr.ArrowUp:return N.preventDefault(),N.stopPropagation(),l({type:2,focus:Na.Previous});case Wr.Home:case Wr.PageUp:return N.preventDefault(),N.stopPropagation(),l({type:2,focus:Na.First});case Wr.End:case Wr.PageDown:return N.preventDefault(),N.stopPropagation(),l({type:2,focus:Na.Last});case Wr.Escape:N.preventDefault(),N.stopPropagation(),l({type:1}),$a().nextFrame(()=>{var R;return(R=a.buttonRef.current)==null?void 0:R.focus({preventScroll:!0})});break;case Wr.Tab:N.preventDefault(),N.stopPropagation(),l({type:1}),$a().nextFrame(()=>{qQ(a.buttonRef.current,N.shiftKey?Ul.Previous:Ul.Next)});break;default:N.key.length===1&&(l({type:3,value:N.key}),f.setTimeout(()=>l({type:4}),350));break}}),b=zt(N=>{switch(N.key){case Wr.Space:N.preventDefault();break}}),w=A.useMemo(()=>({open:a.menuState===0}),[a]),C={"aria-activedescendant":a.activeItemIndex===null||(n=a.items[a.activeItemIndex])==null?void 0:n.id,"aria-labelledby":(r=a.buttonRef.current)==null?void 0:r.id,id:o,onKeyDown:x,onKeyUp:b,role:"menu",tabIndex:0,ref:c};return fs({ourProps:C,theirProps:i,slot:w,defaultTag:kee,features:Tee,visible:g,name:"Menu.Items"})}let Ree=A.Fragment;function Dee(t,e){let n=Ba(),{id:r=`headlessui-menu-item-${n}`,disabled:s=!1,...o}=t,[i,a]=Kw("Menu.Item"),l=i.activeItemIndex!==null?i.items[i.activeItemIndex].id===r:!1,c=A.useRef(null),d=Us(e,c);ds(()=>{if(i.__demoMode||i.menuState!==0||!l||i.activationTrigger===0)return;let R=$a();return R.requestAnimationFrame(()=>{var $,O;(O=($=c.current)==null?void 0:$.scrollIntoView)==null||O.call($,{block:"nearest"})}),R.dispose},[i.__demoMode,c,l,i.menuState,i.activationTrigger,i.activeItemIndex]);let f=xee(c),p=A.useRef({disabled:s,domRef:c,get textValue(){return f()}});ds(()=>{p.current.disabled=s},[p,s]),ds(()=>(a({type:5,id:r,dataRef:p}),()=>a({type:6,id:r})),[p,r]);let g=zt(()=>{a({type:1})}),x=zt(R=>{if(s)return R.preventDefault();a({type:1}),g6(i.buttonRef.current)}),b=zt(()=>{if(s)return a({type:2,focus:Na.Nothing});a({type:2,focus:Na.Specific,id:r})}),w=ZQ(),C=zt(R=>w.update(R)),N=zt(R=>{w.wasMoved(R)&&(s||l||a({type:2,focus:Na.Specific,id:r,trigger:0}))}),k=zt(R=>{w.wasMoved(R)&&(s||l&&a({type:2,focus:Na.Nothing}))}),I=A.useMemo(()=>({active:l,disabled:s,close:g}),[l,s,g]);return fs({ourProps:{id:r,ref:d,role:"menuitem",tabIndex:s===!0?void 0:-1,"aria-disabled":s===!0?!0:void 0,disabled:void 0,onClick:x,onFocus:b,onPointerEnter:C,onMouseEnter:C,onPointerMove:N,onMouseMove:N,onPointerLeave:k,onMouseLeave:k},theirProps:o,slot:I,defaultTag:Ree,name:"Menu.Item"})}let $ee=hs(Nee),Oee=hs(Iee),_ee=hs(Aee),Pee=hs(Dee),zx=Object.assign($ee,{Button:Oee,Items:_ee,Item:Pee}),F6=A.createContext(null);function M6(){let t=A.useContext(F6);if(t===null){let e=new Error("You used a <Label /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(e,M6),e}return t}function Fee(){let[t,e]=A.useState([]);return[t.length>0?t.join(" "):void 0,A.useMemo(()=>function(n){let r=zt(o=>(e(i=>[...i,o]),()=>e(i=>{let a=i.slice(),l=a.indexOf(o);return l!==-1&&a.splice(l,1),a}))),s=A.useMemo(()=>({register:r,slot:n.slot,name:n.name,props:n.props}),[r,n.slot,n.name,n.props]);return At.createElement(F6.Provider,{value:s},n.children)},[e])]}let Mee="label";function Lee(t,e){let n=Ba(),{id:r=`headlessui-label-${n}`,passive:s=!1,...o}=t,i=M6(),a=Us(e);ds(()=>i.register(r),[r,i.register]);let l={ref:a,...i.props,id:r};return s&&("onClick"in l&&(delete l.htmlFor,delete l.onClick),"onClick"in o&&delete o.onClick),fs({ourProps:l,theirProps:o,slot:i.slot||{},defaultTag:Mee,name:i.name||"Label"})}let Bee=hs(Lee),jee=Object.assign(Bee,{});function zee(t=0){let[e,n]=A.useState(t),r=E0(),s=A.useCallback(l=>{r.current&&n(c=>c|l)},[e,r]),o=A.useCallback(l=>!!(e&l),[e]),i=A.useCallback(l=>{r.current&&n(c=>c&~l)},[n,r]),a=A.useCallback(l=>{r.current&&n(c=>c^l)},[n]);return{flags:e,addFlag:s,hasFlag:o,removeFlag:i,toggleFlag:a}}let ET=A.createContext(null);ET.displayName="GroupContext";let Vee=A.Fragment;function Wee(t){var e;let[n,r]=A.useState(null),[s,o]=Fee(),[i,a]=_6(),l=A.useMemo(()=>({switch:n,setSwitch:r,labelledby:s,describedby:i}),[n,r,s,i]),c={},d=t;return At.createElement(a,{name:"Switch.Description"},At.createElement(o,{name:"Switch.Label",props:{htmlFor:(e=l.switch)==null?void 0:e.id,onClick(f){n&&(f.currentTarget.tagName==="LABEL"&&f.preventDefault(),n.click(),n.focus({preventScroll:!0}))}}},At.createElement(ET.Provider,{value:l},fs({ourProps:c,theirProps:d,defaultTag:Vee,name:"Switch.Group"}))))}let Uee="button";function Hee(t,e){var n;let r=Ba(),{id:s=`headlessui-switch-${r}`,checked:o,defaultChecked:i=!1,onChange:a,disabled:l=!1,name:c,value:d,form:f,...p}=t,g=A.useContext(ET),x=A.useRef(null),b=Us(x,e,g===null?null:g.setSwitch),[w,C]=zQ(o,a,i),N=zt(()=>C==null?void 0:C(!w)),k=zt(M=>{if(CT(M.currentTarget))return M.preventDefault();M.preventDefault(),N()}),I=zt(M=>{M.key===Wr.Space?(M.preventDefault(),N()):M.key===Wr.Enter&&iJ(M.currentTarget)}),R=zt(M=>M.preventDefault()),$=A.useMemo(()=>({checked:w}),[w]),O={id:s,ref:b,role:"switch",type:v6(t,x),tabIndex:t.tabIndex===-1?0:(n=t.tabIndex)!=null?n:0,"aria-checked":w,"aria-labelledby":g==null?void 0:g.labelledby,"aria-describedby":g==null?void 0:g.describedby,disabled:l,onClick:k,onKeyUp:I,onKeyPress:R},F=Sp();return A.useEffect(()=>{var M;let _=(M=x.current)==null?void 0:M.closest("form");_&&i!==void 0&&F.addEventListener(_,"reset",()=>{C(i)})},[x,C]),At.createElement(At.Fragment,null,c!=null&&w&&At.createElement(Sb,{features:Wg.Hidden,...DE({as:"input",type:"checkbox",hidden:!0,readOnly:!0,disabled:l,form:f,checked:w,name:c,value:d})}),fs({ourProps:O,theirProps:p,slot:$,defaultTag:Uee,name:"Switch"}))}let Gee=hs(Hee),qee=Wee,VS=Object.assign(Gee,{Group:qee,Label:jee,Description:P6});function Xee(t){let e={called:!1};return(...n)=>{if(!e.called)return e.called=!0,t(...n)}}function WS(t,...e){t&&e.length>0&&t.classList.add(...e)}function US(t,...e){t&&e.length>0&&t.classList.remove(...e)}function Kee(t,e){let n=$a();if(!t)return n.dispose;let{transitionDuration:r,transitionDelay:s}=getComputedStyle(t),[o,i]=[r,s].map(l=>{let[c=0]=l.split(",").filter(Boolean).map(d=>d.includes("ms")?parseFloat(d):parseFloat(d)*1e3).sort((d,f)=>f-d);return c}),a=o+i;if(a!==0){n.group(c=>{c.setTimeout(()=>{e(),c.dispose()},a),c.addEventListener(t,"transitionrun",d=>{d.target===d.currentTarget&&c.dispose()})});let l=n.addEventListener(t,"transitionend",c=>{c.target===c.currentTarget&&(e(),l())})}else e();return n.add(()=>e()),n.dispose}function Yee(t,e,n,r){let s=n?"enter":"leave",o=$a(),i=r!==void 0?Xee(r):()=>{};s==="enter"&&(t.removeAttribute("hidden"),t.style.display="");let a=vs(s,{enter:()=>e.enter,leave:()=>e.leave}),l=vs(s,{enter:()=>e.enterTo,leave:()=>e.leaveTo}),c=vs(s,{enter:()=>e.enterFrom,leave:()=>e.leaveFrom});return US(t,...e.base,...e.enter,...e.enterTo,...e.enterFrom,...e.leave,...e.leaveFrom,...e.leaveTo,...e.entered),WS(t,...e.base,...a,...c),o.nextFrame(()=>{US(t,...e.base,...a,...c),WS(t,...e.base,...a,...l),Kee(t,()=>(US(t,...e.base,...a),WS(t,...e.base,...e.entered),i()))}),o.dispose}function Zee({immediate:t,container:e,direction:n,classes:r,onStart:s,onStop:o}){let i=E0(),a=Sp(),l=Yl(n);ds(()=>{t&&(l.current="enter")},[t]),ds(()=>{let c=$a();a.add(c.dispose);let d=e.current;if(d&&l.current!=="idle"&&i.current)return c.dispose(),s.current(l.current),c.add(Yee(d,r.current,l.current==="enter",()=>{c.dispose(),o.current(l.current)})),c.dispose},[n])}function Tc(t=""){return t.split(/\s+/).filter(e=>e.length>1)}let Yw=A.createContext(null);Yw.displayName="TransitionContext";var Qee=(t=>(t.Visible="visible",t.Hidden="hidden",t))(Qee||{});function Jee(){let t=A.useContext(Yw);if(t===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return t}function ete(){let t=A.useContext(Zw);if(t===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return t}let Zw=A.createContext(null);Zw.displayName="NestingContext";function Qw(t){return"children"in t?Qw(t.children):t.current.filter(({el:e})=>e.current!==null).filter(({state:e})=>e==="visible").length>0}function L6(t,e){let n=Yl(t),r=A.useRef([]),s=E0(),o=Sp(),i=zt((g,x=Vc.Hidden)=>{let b=r.current.findIndex(({el:w})=>w===g);b!==-1&&(vs(x,{[Vc.Unmount](){r.current.splice(b,1)},[Vc.Hidden](){r.current[b].state="hidden"}}),o.microTask(()=>{var w;!Qw(r)&&s.current&&((w=n.current)==null||w.call(n))}))}),a=zt(g=>{let x=r.current.find(({el:b})=>b===g);return x?x.state!=="visible"&&(x.state="visible"):r.current.push({el:g,state:"visible"}),()=>i(g,Vc.Unmount)}),l=A.useRef([]),c=A.useRef(Promise.resolve()),d=A.useRef({enter:[],leave:[],idle:[]}),f=zt((g,x,b)=>{l.current.splice(0),e&&(e.chains.current[x]=e.chains.current[x].filter(([w])=>w!==g)),e==null||e.chains.current[x].push([g,new Promise(w=>{l.current.push(w)})]),e==null||e.chains.current[x].push([g,new Promise(w=>{Promise.all(d.current[x].map(([C,N])=>N)).then(()=>w())})]),x==="enter"?c.current=c.current.then(()=>e==null?void 0:e.wait.current).then(()=>b(x)):b(x)}),p=zt((g,x,b)=>{Promise.all(d.current[x].splice(0).map(([w,C])=>C)).then(()=>{var w;(w=l.current.shift())==null||w()}).then(()=>b(x))});return A.useMemo(()=>({children:r,register:a,unregister:i,onStart:f,onStop:p,wait:c,chains:d}),[a,i,r,f,p,d,c])}function tte(){}let nte=["beforeEnter","afterEnter","beforeLeave","afterLeave"];function h4(t){var e;let n={};for(let r of nte)n[r]=(e=t[r])!=null?e:tte;return n}function rte(t){let e=A.useRef(h4(t));return A.useEffect(()=>{e.current=h4(t)},[t]),e}let ste="div",B6=Uh.RenderStrategy;function ote(t,e){var n,r;let{beforeEnter:s,afterEnter:o,beforeLeave:i,afterLeave:a,enter:l,enterFrom:c,enterTo:d,entered:f,leave:p,leaveFrom:g,leaveTo:x,...b}=t,w=A.useRef(null),C=Us(w,e),N=(n=b.unmount)==null||n?Vc.Unmount:Vc.Hidden,{show:k,appear:I,initial:R}=Jee(),[$,O]=A.useState(k?"visible":"hidden"),F=ete(),{register:M,unregister:_}=F;A.useEffect(()=>M(w),[M,w]),A.useEffect(()=>{if(N===Vc.Hidden&&w.current){if(k&&$!=="visible"){O("visible");return}return vs($,{hidden:()=>_(w),visible:()=>M(w)})}},[$,w,M,_,k,N]);let V=Yl({base:Tc(b.className),enter:Tc(l),enterFrom:Tc(c),enterTo:Tc(d),entered:Tc(f),leave:Tc(p),leaveFrom:Tc(g),leaveTo:Tc(x)}),B=rte({beforeEnter:s,afterEnter:o,beforeLeave:i,afterLeave:a}),W=Np();A.useEffect(()=>{if(W&&$==="visible"&&w.current===null)throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")},[w,$,W]);let q=R&&!I,j=I&&k&&R,G=!W||q?"idle":k?"enter":"leave",Z=zee(0),J=zt(ge=>vs(ge,{enter:()=>{Z.addFlag(Fs.Opening),B.current.beforeEnter()},leave:()=>{Z.addFlag(Fs.Closing),B.current.beforeLeave()},idle:()=>{}})),X=zt(ge=>vs(ge,{enter:()=>{Z.removeFlag(Fs.Opening),B.current.afterEnter()},leave:()=>{Z.removeFlag(Fs.Closing),B.current.afterLeave()},idle:()=>{}})),ee=L6(()=>{O("hidden"),_(w)},F),ne=A.useRef(!1);Zee({immediate:j,container:w,classes:V,direction:G,onStart:Yl(ge=>{ne.current=!0,ee.onStart(w,ge,J)}),onStop:Yl(ge=>{ne.current=!1,ee.onStop(w,ge,X),ge==="leave"&&!Qw(ee)&&(O("hidden"),_(w))})});let oe=b,ye={ref:C};return j?oe={...oe,className:Cb(b.className,...V.current.enter,...V.current.enterFrom)}:ne.current&&(oe.className=Cb(b.className,(r=w.current)==null?void 0:r.className),oe.className===""&&delete oe.className),At.createElement(Zw.Provider,{value:ee},At.createElement(N6,{value:vs($,{visible:Fs.Open,hidden:Fs.Closed})|Z.flags},fs({ourProps:ye,theirProps:oe,defaultTag:ste,features:B6,visible:$==="visible",name:"Transition.Child"})))}function ite(t,e){let{show:n,appear:r=!1,unmount:s=!0,...o}=t,i=A.useRef(null),a=Us(i,e);Np();let l=Xw();if(n===void 0&&l!==null&&(n=(l&Fs.Open)===Fs.Open),![!0,!1].includes(n))throw new Error("A <Transition /> is used but it is missing a `show={true | false}` prop.");let[c,d]=A.useState(n?"visible":"hidden"),f=L6(()=>{d("hidden")}),[p,g]=A.useState(!0),x=A.useRef([n]);ds(()=>{p!==!1&&x.current[x.current.length-1]!==n&&(x.current.push(n),g(!1))},[x,n]);let b=A.useMemo(()=>({show:n,appear:r,initial:p}),[n,r,p]);A.useEffect(()=>{if(n)d("visible");else if(!Qw(f))d("hidden");else{let k=i.current;if(!k)return;let I=k.getBoundingClientRect();I.x===0&&I.y===0&&I.width===0&&I.height===0&&d("hidden")}},[n,f]);let w={unmount:s},C=zt(()=>{var k;p&&g(!1),(k=t.beforeEnter)==null||k.call(t)}),N=zt(()=>{var k;p&&g(!1),(k=t.beforeLeave)==null||k.call(t)});return At.createElement(Zw.Provider,{value:f},At.createElement(Yw.Provider,{value:b},fs({ourProps:{...w,as:A.Fragment,children:At.createElement(j6,{ref:a,...w,...o,beforeEnter:C,beforeLeave:N})},theirProps:{},defaultTag:A.Fragment,features:B6,visible:c==="visible",name:"Transition"})))}function ate(t,e){let n=A.useContext(Yw)!==null,r=Xw()!==null;return At.createElement(At.Fragment,null,!n&&r?At.createElement(FE,{ref:e,...t}):At.createElement(j6,{ref:e,...t}))}let FE=hs(ite),j6=hs(ote),lte=hs(ate),gm=Object.assign(FE,{Child:lte,Root:FE});function cte({title:t,titleId:e,...n},r){return A.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?A.createElement("title",{id:e},t):null,A.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.26 10.147a60.438 60.438 0 0 0-.491 6.347A48.62 48.62 0 0 1 12 20.904a48.62 48.62 0 0 1 8.232-4.41 60.46 60.46 0 0 0-.491-6.347m-15.482 0a50.636 50.636 0 0 0-2.658-.813A59.906 59.906 0 0 1 12 3.493a59.903 59.903 0 0 1 10.399 5.84c-.896.248-1.783.52-2.658.814m-15.482 0A50.717 50.717 0 0 1 12 13.489a50.702 50.702 0 0 1 7.74-3.342M6.75 15a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Zm0 0v-3.675A55.378 55.378 0 0 1 12 8.443m-7.007 11.55A5.981 5.981 0 0 0 6.75 15.75v-1.5"}))}const ute=A.forwardRef(cte);function dte({title:t,titleId:e,...n},r){return A.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?A.createElement("title",{id:e},t):null,A.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99"}))}const Wc=A.forwardRef(dte);function fte({title:t,titleId:e,...n},r){return A.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?A.createElement("title",{id:e},t):null,A.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 9V5.25A2.25 2.25 0 0 0 13.5 3h-6a2.25 2.25 0 0 0-2.25 2.25v13.5A2.25 2.25 0 0 0 7.5 21h6a2.25 2.25 0 0 0 2.25-2.25V15m3 0 3-3m0 0-3-3m3 3H9"}))}const p4=A.forwardRef(fte);function hte({title:t,titleId:e,...n},r){return A.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?A.createElement("title",{id:e},t):null,A.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5m-13.5-9L12 3m0 0 4.5 4.5M12 3v13.5"}))}const pte=A.forwardRef(hte);function mte({title:t,titleId:e,...n},r){return A.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?A.createElement("title",{id:e},t):null,A.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"}))}const gte=A.forwardRef(mte);function xte({title:t,titleId:e,...n},r){return A.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?A.createElement("title",{id:e},t):null,A.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.857 17.082a23.848 23.848 0 0 0 5.454-1.31A8.967 8.967 0 0 1 18 9.75V9A6 6 0 0 0 6 9v.75a8.967 8.967 0 0 1-2.312 6.022c1.733.64 3.56 1.085 5.455 1.31m5.714 0a24.255 24.255 0 0 1-5.714 0m5.714 0a3 3 0 1 1-5.714 0"}))}const yte=A.forwardRef(xte);function bte({title:t,titleId:e,...n},r){return A.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?A.createElement("title",{id:e},t):null,A.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 21h16.5M4.5 3h15M5.25 3v18m13.5-18v18M9 6.75h1.5m-1.5 3h1.5m-1.5 3h1.5m3-6H15m-1.5 3H15m-1.5 3H15M9 21v-3.375c0-.621.504-1.125 1.125-1.125h3.75c.621 0 1.125.504 1.125 1.125V21"}))}const wte=A.forwardRef(bte);function vte({title:t,titleId:e,...n},r){return A.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?A.createElement("title",{id:e},t):null,A.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5"}))}const zi=A.forwardRef(vte);function Cte({title:t,titleId:e,...n},r){return A.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?A.createElement("title",{id:e},t):null,A.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.827 6.175A2.31 2.31 0 0 1 5.186 7.23c-.38.054-.757.112-1.134.175C2.999 7.58 2.25 8.507 2.25 9.574V18a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18V9.574c0-1.067-.75-1.994-1.802-2.169a47.865 47.865 0 0 0-1.134-.175 2.31 2.31 0 0 1-1.64-1.055l-.822-1.316a2.192 2.192 0 0 0-1.736-1.039 48.774 48.774 0 0 0-5.232 0 2.192 2.192 0 0 0-1.736 1.039l-.821 1.316Z"}),A.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 12.75a4.5 4.5 0 1 1-9 0 4.5 4.5 0 0 1 9 0ZM18.75 10.5h.008v.008h-.008V10.5Z"}))}const Ms=A.forwardRef(Cte);function Ste({title:t,titleId:e,...n},r){return A.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?A.createElement("title",{id:e},t):null,A.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 0 1 3 19.875v-6.75ZM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V8.625ZM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V4.125Z"}))}const Nte=A.forwardRef(Ste);function Ete({title:t,titleId:e,...n},r){return A.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?A.createElement("title",{id:e},t):null,A.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12c0 1.268-.63 2.39-1.593 3.068a3.745 3.745 0 0 1-1.043 3.296 3.745 3.745 0 0 1-3.296 1.043A3.745 3.745 0 0 1 12 21c-1.268 0-2.39-.63-3.068-1.593a3.746 3.746 0 0 1-3.296-1.043 3.745 3.745 0 0 1-1.043-3.296A3.745 3.745 0 0 1 3 12c0-1.268.63-2.39 1.593-3.068a3.745 3.745 0 0 1 1.043-3.296 3.746 3.746 0 0 1 3.296-1.043A3.746 3.746 0 0 1 12 3c1.268 0 2.39.63 3.068 1.593a3.746 3.746 0 0 1 3.296 1.043 3.746 3.746 0 0 1 1.043 3.296A3.745 3.745 0 0 1 21 12Z"}))}const Ite=A.forwardRef(Ete);function kte({title:t,titleId:e,...n},r){return A.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?A.createElement("title",{id:e},t):null,A.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const Oo=A.forwardRef(kte);function Tte({title:t,titleId:e,...n},r){return A.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?A.createElement("title",{id:e},t):null,A.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"}))}const Ate=A.forwardRef(Tte);function Rte({title:t,titleId:e,...n},r){return A.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?A.createElement("title",{id:e},t):null,A.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.35 3.836c-.065.21-.1.433-.1.664 0 .414.336.75.75.75h4.5a.75.75 0 0 0 .75-.75 2.25 2.25 0 0 0-.1-.664m-5.8 0A2.251 2.251 0 0 1 13.5 2.25H15c1.012 0 1.867.668 2.15 1.586m-5.8 0c-.376.023-.75.05-1.124.08C9.095 4.01 8.25 4.973 8.25 6.108V8.25m8.9-4.414c.376.023.75.05 1.124.08 1.131.094 1.976 1.057 1.976 2.192V16.5A2.25 2.25 0 0 1 18 18.75h-2.25m-7.5-10.5H4.875c-.621 0-1.125.504-1.125 1.125v11.25c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125V18.75m-7.5-10.5h6.375c.621 0 1.125.504 1.125 1.125v9.375m-8.25-3 1.5 1.5 3-3.75"}))}const m4=A.forwardRef(Rte);function Dte({title:t,titleId:e,...n},r){return A.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?A.createElement("title",{id:e},t):null,A.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const Fo=A.forwardRef(Dte);function $te({title:t,titleId:e,...n},r){return A.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?A.createElement("title",{id:e},t):null,A.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21.75 6.75v10.5a2.25 2.25 0 0 1-2.25 2.25h-15a2.25 2.25 0 0 1-2.25-2.25V6.75m19.5 0A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25m19.5 0v.243a2.25 2.25 0 0 1-1.07 1.916l-7.5 4.615a2.25 2.25 0 0 1-2.36 0L3.32 8.91a2.25 2.25 0 0 1-1.07-1.916V6.75"}))}const ME=A.forwardRef($te);function Ote({title:t,titleId:e,...n},r){return A.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?A.createElement("title",{id:e},t):null,A.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m9-.75a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 3.75h.008v.008H12v-.008Z"}))}const HS=A.forwardRef(Ote);function _te({title:t,titleId:e,...n},r){return A.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?A.createElement("title",{id:e},t):null,A.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"}))}const z6=A.forwardRef(_te);function Pte({title:t,titleId:e,...n},r){return A.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?A.createElement("title",{id:e},t):null,A.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.98 8.223A10.477 10.477 0 0 0 1.934 12C3.226 16.338 7.244 19.5 12 19.5c.993 0 1.953-.138 2.863-.395M6.228 6.228A10.451 10.451 0 0 1 12 4.5c4.756 0 8.773 3.162 10.065 7.498a10.522 10.522 0 0 1-4.293 5.774M6.228 6.228 3 3m3.228 3.228 3.65 3.65m7.894 7.894L21 21m-3.228-3.228-3.65-3.65m0 0a3 3 0 1 0-4.243-4.243m4.242 4.242L9.88 9.88"}))}const wh=A.forwardRef(Pte);function Fte({title:t,titleId:e,...n},r){return A.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?A.createElement("title",{id:e},t):null,A.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z"}),A.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))}const vh=A.forwardRef(Fte);function Mte({title:t,titleId:e,...n},r){return A.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?A.createElement("title",{id:e},t):null,A.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m2.25 12 8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25"}))}const V6=A.forwardRef(Mte);function Lte({title:t,titleId:e,...n},r){return A.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?A.createElement("title",{id:e},t):null,A.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 9h3.75M15 12h3.75M15 15h3.75M4.5 19.5h15a2.25 2.25 0 0 0 2.25-2.25V6.75A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25v10.5A2.25 2.25 0 0 0 4.5 19.5Zm6-10.125a1.875 1.875 0 1 1-3.75 0 1.875 1.875 0 0 1 3.75 0Zm1.294 6.336a6.721 6.721 0 0 1-3.17.789 6.721 6.721 0 0 1-3.168-.789 3.376 3.376 0 0 1 6.338 0Z"}))}const Bte=A.forwardRef(Lte);function jte({title:t,titleId:e,...n},r){return A.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?A.createElement("title",{id:e},t):null,A.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 5.25a3 3 0 0 1 3 3m3 0a6 6 0 0 1-7.029 5.912c-.563-.097-1.159.026-1.563.43L10.5 17.25H8.25v2.25H6v2.25H2.25v-2.818c0-.597.237-1.17.659-1.591l6.499-6.499c.404-.404.527-1 .43-1.563A6 6 0 1 1 21.75 8.25Z"}))}const g4=A.forwardRef(jte);function zte({title:t,titleId:e,...n},r){return A.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?A.createElement("title",{id:e},t):null,A.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 10.5a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}),A.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 10.5c0 7.142-7.5 11.25-7.5 11.25S4.5 17.642 4.5 10.5a7.5 7.5 0 1 1 15 0Z"}))}const Vte=A.forwardRef(zte);function Wte({title:t,titleId:e,...n},r){return A.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?A.createElement("title",{id:e},t):null,A.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 4.875c0-.621.504-1.125 1.125-1.125h4.5c.621 0 1.125.504 1.125 1.125v4.5c0 .621-.504 1.125-1.125 1.125h-4.5A1.125 1.125 0 0 1 3.75 9.375v-4.5ZM3.75 14.625c0-.621.504-1.125 1.125-1.125h4.5c.621 0 1.125.504 1.125 1.125v4.5c0 .621-.504 1.125-1.125 1.125h-4.5a1.125 1.125 0 0 1-1.125-1.125v-4.5ZM13.5 4.875c0-.621.504-1.125 1.125-1.125h4.5c.621 0 1.125.504 1.125 1.125v4.5c0 .621-.504 1.125-1.125 1.125h-4.5A1.125 1.125 0 0 1 13.5 9.375v-4.5Z"}),A.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 6.75h.75v.75h-.75v-.75ZM6.75 16.5h.75v.75h-.75v-.75ZM16.5 6.75h.75v.75h-.75v-.75ZM13.5 13.5h.75v.75h-.75v-.75ZM13.5 19.5h.75v.75h-.75v-.75ZM19.5 13.5h.75v.75h-.75v-.75ZM19.5 19.5h.75v.75h-.75v-.75ZM16.5 16.5h.75v.75h-.75v-.75Z"}))}const dg=A.forwardRef(Wte);function Ute({title:t,titleId:e,...n},r){return A.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?A.createElement("title",{id:e},t):null,A.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"}))}const Hte=A.forwardRef(Ute);function Gte({title:t,titleId:e,...n},r){return A.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?A.createElement("title",{id:e},t):null,A.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.982 18.725A7.488 7.488 0 0 0 12 15.75a7.488 7.488 0 0 0-5.982 2.975m11.963 0a9 9 0 1 0-11.963 0m11.963 0A8.966 8.966 0 0 1 12 21a8.966 8.966 0 0 1-5.982-2.275M15 9.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))}const Ch=A.forwardRef(Gte);function qte({title:t,titleId:e,...n},r){return A.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?A.createElement("title",{id:e},t):null,A.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0ZM4.501 20.118a7.5 7.5 0 0 1 14.998 0A17.933 17.933 0 0 1 12 21.75c-2.676 0-5.216-.584-7.499-1.632Z"}))}const IT=A.forwardRef(qte);function Xte({title:t,titleId:e,...n},r){return A.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?A.createElement("title",{id:e},t):null,A.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m9.75 9.75 4.5 4.5m0-4.5-4.5 4.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const cl=A.forwardRef(Xte);function Kte({title:t,titleId:e,...n},r){return A.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?A.createElement("title",{id:e},t):null,A.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"}))}const Eb=A.forwardRef(Kte);function Dt(t){const e=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&e==="[object Date]"?new t.constructor(+t):typeof t=="number"||e==="[object Number]"||typeof t=="string"||e==="[object String]"?new Date(t):new Date(NaN)}function Dn(t,e){return t instanceof Date?new t.constructor(e):new Date(e)}function k0(t,e){const n=Dt(t);return isNaN(e)?Dn(t,NaN):(e&&n.setDate(n.getDate()+e),n)}function kT(t,e){const n=Dt(t);if(isNaN(e))return Dn(t,NaN);if(!e)return n;const r=n.getDate(),s=Dn(t,n.getTime());s.setMonth(n.getMonth()+e+1,0);const o=s.getDate();return r>=o?s:(n.setFullYear(s.getFullYear(),s.getMonth(),r),n)}function TT(t,e){const n=+Dt(t);return Dn(t,n+e)}const W6=6048e5,Yte=864e5,Jw=6e4,ev=36e5,Zte=1e3;function Qte(t,e){return TT(t,e*ev)}let Jte={};function cf(){return Jte}function sc(t,e){var a,l,c,d;const n=cf(),r=(e==null?void 0:e.weekStartsOn)??((l=(a=e==null?void 0:e.locale)==null?void 0:a.options)==null?void 0:l.weekStartsOn)??n.weekStartsOn??((d=(c=n.locale)==null?void 0:c.options)==null?void 0:d.weekStartsOn)??0,s=Dt(t),o=s.getDay(),i=(o<r?7:0)+o-r;return s.setDate(s.getDate()-i),s.setHours(0,0,0,0),s}function Hh(t){return sc(t,{weekStartsOn:1})}function U6(t){const e=Dt(t),n=e.getFullYear(),r=Dn(t,0);r.setFullYear(n+1,0,4),r.setHours(0,0,0,0);const s=Hh(r),o=Dn(t,0);o.setFullYear(n,0,4),o.setHours(0,0,0,0);const i=Hh(o);return e.getTime()>=s.getTime()?n+1:e.getTime()>=i.getTime()?n:n-1}function Ug(t){const e=Dt(t);return e.setHours(0,0,0,0),e}function Ib(t){const e=Dt(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function ene(t,e){const n=Ug(t),r=Ug(e),s=+n-Ib(n),o=+r-Ib(r);return Math.round((s-o)/Yte)}function tne(t){const e=U6(t),n=Dn(t,0);return n.setFullYear(e,0,4),n.setHours(0,0,0,0),Hh(n)}function nne(t,e){return TT(t,e*Jw)}function rne(t,e){return TT(t,e*1e3)}function sne(t,e){const n=e*7;return k0(t,n)}function one(t,e){return kT(t,e*12)}function ine(t){return Dn(t,Date.now())}function H6(t,e){const n=Ug(t),r=Ug(e);return+n==+r}function ane(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function G6(t){if(!ane(t)&&typeof t!="number")return!1;const e=Dt(t);return!isNaN(Number(e))}function x4(t){const e=Dt(t);return e.setHours(23,59,59,999),e}function AT(t){const e=Dt(t),n=e.getMonth();return e.setFullYear(e.getFullYear(),n+1,0),e.setHours(23,59,59,999),e}function fg(t){const e=Dt(t);return e.setDate(1),e.setHours(0,0,0,0),e}function y4(t){const e=Dt(t),n=e.getFullYear();return e.setFullYear(n+1,0,0),e.setHours(23,59,59,999),e}function q6(t){const e=Dt(t),n=Dn(t,0);return n.setFullYear(e.getFullYear(),0,1),n.setHours(0,0,0,0),n}function lne(t,e){var a,l,c,d;const n=cf(),r=(e==null?void 0:e.weekStartsOn)??((l=(a=e==null?void 0:e.locale)==null?void 0:a.options)==null?void 0:l.weekStartsOn)??n.weekStartsOn??((d=(c=n.locale)==null?void 0:c.options)==null?void 0:d.weekStartsOn)??0,s=Dt(t),o=s.getDay(),i=(o<r?-7:0)+6-(o-r);return s.setDate(s.getDate()+i),s.setHours(23,59,59,999),s}const cne={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},une=(t,e,n)=>{let r;const s=cne[t];return typeof s=="string"?r=s:e===1?r=s.one:r=s.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function GS(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const dne={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},fne={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},hne={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},pne={date:GS({formats:dne,defaultWidth:"full"}),time:GS({formats:fne,defaultWidth:"full"}),dateTime:GS({formats:hne,defaultWidth:"full"})},mne={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},gne=(t,e,n,r)=>mne[t];function xm(t){return(e,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let s;if(r==="formatting"&&t.formattingValues){const i=t.defaultFormattingWidth||t.defaultWidth,a=n!=null&&n.width?String(n.width):i;s=t.formattingValues[a]||t.formattingValues[i]}else{const i=t.defaultWidth,a=n!=null&&n.width?String(n.width):t.defaultWidth;s=t.values[a]||t.values[i]}const o=t.argumentCallback?t.argumentCallback(e):e;return s[o]}}const xne={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},yne={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},bne={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},wne={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},vne={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Cne={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Sne=(t,e)=>{const n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},Nne={ordinalNumber:Sne,era:xm({values:xne,defaultWidth:"wide"}),quarter:xm({values:yne,defaultWidth:"wide",argumentCallback:t=>t-1}),month:xm({values:bne,defaultWidth:"wide"}),day:xm({values:wne,defaultWidth:"wide"}),dayPeriod:xm({values:vne,defaultWidth:"wide",formattingValues:Cne,defaultFormattingWidth:"wide"})};function ym(t){return(e,n={})=>{const r=n.width,s=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],o=e.match(s);if(!o)return null;const i=o[0],a=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],l=Array.isArray(a)?Ine(a,f=>f.test(i)):Ene(a,f=>f.test(i));let c;c=t.valueCallback?t.valueCallback(l):l,c=n.valueCallback?n.valueCallback(c):c;const d=e.slice(i.length);return{value:c,rest:d}}}function Ene(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function Ine(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function kne(t){return(e,n={})=>{const r=e.match(t.matchPattern);if(!r)return null;const s=r[0],o=e.match(t.parsePattern);if(!o)return null;let i=t.valueCallback?t.valueCallback(o[0]):o[0];i=n.valueCallback?n.valueCallback(i):i;const a=e.slice(s.length);return{value:i,rest:a}}}const Tne=/^(\d+)(th|st|nd|rd)?/i,Ane=/\d+/i,Rne={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Dne={any:[/^b/i,/^(a|c)/i]},$ne={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},One={any:[/1/i,/2/i,/3/i,/4/i]},_ne={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Pne={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Fne={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Mne={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Lne={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Bne={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},jne={ordinalNumber:kne({matchPattern:Tne,parsePattern:Ane,valueCallback:t=>parseInt(t,10)}),era:ym({matchPatterns:Rne,defaultMatchWidth:"wide",parsePatterns:Dne,defaultParseWidth:"any"}),quarter:ym({matchPatterns:$ne,defaultMatchWidth:"wide",parsePatterns:One,defaultParseWidth:"any",valueCallback:t=>t+1}),month:ym({matchPatterns:_ne,defaultMatchWidth:"wide",parsePatterns:Pne,defaultParseWidth:"any"}),day:ym({matchPatterns:Fne,defaultMatchWidth:"wide",parsePatterns:Mne,defaultParseWidth:"any"}),dayPeriod:ym({matchPatterns:Lne,defaultMatchWidth:"any",parsePatterns:Bne,defaultParseWidth:"any"})},RT={code:"en-US",formatDistance:une,formatLong:pne,formatRelative:gne,localize:Nne,match:jne,options:{weekStartsOn:0,firstWeekContainsDate:1}};function zne(t){const e=Dt(t);return ene(e,q6(e))+1}function X6(t){const e=Dt(t),n=+Hh(e)-+tne(e);return Math.round(n/W6)+1}function DT(t,e){var d,f,p,g;const n=Dt(t),r=n.getFullYear(),s=cf(),o=(e==null?void 0:e.firstWeekContainsDate)??((f=(d=e==null?void 0:e.locale)==null?void 0:d.options)==null?void 0:f.firstWeekContainsDate)??s.firstWeekContainsDate??((g=(p=s.locale)==null?void 0:p.options)==null?void 0:g.firstWeekContainsDate)??1,i=Dn(t,0);i.setFullYear(r+1,0,o),i.setHours(0,0,0,0);const a=sc(i,e),l=Dn(t,0);l.setFullYear(r,0,o),l.setHours(0,0,0,0);const c=sc(l,e);return n.getTime()>=a.getTime()?r+1:n.getTime()>=c.getTime()?r:r-1}function Vne(t,e){var a,l,c,d;const n=cf(),r=(e==null?void 0:e.firstWeekContainsDate)??((l=(a=e==null?void 0:e.locale)==null?void 0:a.options)==null?void 0:l.firstWeekContainsDate)??n.firstWeekContainsDate??((d=(c=n.locale)==null?void 0:c.options)==null?void 0:d.firstWeekContainsDate)??1,s=DT(t,e),o=Dn(t,0);return o.setFullYear(s,0,r),o.setHours(0,0,0,0),sc(o,e)}function $T(t,e){const n=Dt(t),r=+sc(n,e)-+Vne(n,e);return Math.round(r/W6)+1}function Rn(t,e){const n=t<0?"-":"",r=Math.abs(t).toString().padStart(e,"0");return n+r}const Ac={y(t,e){const n=t.getFullYear(),r=n>0?n:1-n;return Rn(e==="yy"?r%100:r,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):Rn(n+1,2)},d(t,e){return Rn(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,e){return Rn(t.getHours()%12||12,e.length)},H(t,e){return Rn(t.getHours(),e.length)},m(t,e){return Rn(t.getMinutes(),e.length)},s(t,e){return Rn(t.getSeconds(),e.length)},S(t,e){const n=e.length,r=t.getMilliseconds(),s=Math.trunc(r*Math.pow(10,n-3));return Rn(s,e.length)}},_f={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},b4={G:function(t,e,n){const r=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const r=t.getFullYear(),s=r>0?r:1-r;return n.ordinalNumber(s,{unit:"year"})}return Ac.y(t,e)},Y:function(t,e,n,r){const s=DT(t,r),o=s>0?s:1-s;if(e==="YY"){const i=o%100;return Rn(i,2)}return e==="Yo"?n.ordinalNumber(o,{unit:"year"}):Rn(o,e.length)},R:function(t,e){const n=U6(t);return Rn(n,e.length)},u:function(t,e){const n=t.getFullYear();return Rn(n,e.length)},Q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return Rn(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return Rn(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,n){const r=t.getMonth();switch(e){case"M":case"MM":return Ac.M(t,e);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,n){const r=t.getMonth();switch(e){case"L":return String(r+1);case"LL":return Rn(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,n,r){const s=$T(t,r);return e==="wo"?n.ordinalNumber(s,{unit:"week"}):Rn(s,e.length)},I:function(t,e,n){const r=X6(t);return e==="Io"?n.ordinalNumber(r,{unit:"week"}):Rn(r,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):Ac.d(t,e)},D:function(t,e,n){const r=zne(t);return e==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):Rn(r,e.length)},E:function(t,e,n){const r=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,n,r){const s=t.getDay(),o=(s-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(o);case"ee":return Rn(o,2);case"eo":return n.ordinalNumber(o,{unit:"day"});case"eee":return n.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(s,{width:"short",context:"formatting"});case"eeee":default:return n.day(s,{width:"wide",context:"formatting"})}},c:function(t,e,n,r){const s=t.getDay(),o=(s-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(o);case"cc":return Rn(o,e.length);case"co":return n.ordinalNumber(o,{unit:"day"});case"ccc":return n.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(s,{width:"narrow",context:"standalone"});case"cccccc":return n.day(s,{width:"short",context:"standalone"});case"cccc":default:return n.day(s,{width:"wide",context:"standalone"})}},i:function(t,e,n){const r=t.getDay(),s=r===0?7:r;switch(e){case"i":return String(s);case"ii":return Rn(s,e.length);case"io":return n.ordinalNumber(s,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,n){const s=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(t,e,n){const r=t.getHours();let s;switch(r===12?s=_f.noon:r===0?s=_f.midnight:s=r/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(t,e,n){const r=t.getHours();let s;switch(r>=17?s=_f.evening:r>=12?s=_f.afternoon:r>=4?s=_f.morning:s=_f.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let r=t.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return Ac.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):Ac.H(t,e)},K:function(t,e,n){const r=t.getHours()%12;return e==="Ko"?n.ordinalNumber(r,{unit:"hour"}):Rn(r,e.length)},k:function(t,e,n){let r=t.getHours();return r===0&&(r=24),e==="ko"?n.ordinalNumber(r,{unit:"hour"}):Rn(r,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):Ac.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):Ac.s(t,e)},S:function(t,e){return Ac.S(t,e)},X:function(t,e,n){const r=t.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return v4(r);case"XXXX":case"XX":return od(r);case"XXXXX":case"XXX":default:return od(r,":")}},x:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"x":return v4(r);case"xxxx":case"xx":return od(r);case"xxxxx":case"xxx":default:return od(r,":")}},O:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+w4(r,":");case"OOOO":default:return"GMT"+od(r,":")}},z:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+w4(r,":");case"zzzz":default:return"GMT"+od(r,":")}},t:function(t,e,n){const r=Math.trunc(t.getTime()/1e3);return Rn(r,e.length)},T:function(t,e,n){const r=t.getTime();return Rn(r,e.length)}};function w4(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),s=Math.trunc(r/60),o=r%60;return o===0?n+String(s):n+String(s)+e+Rn(o,2)}function v4(t,e){return t%60===0?(t>0?"-":"+")+Rn(Math.abs(t)/60,2):od(t,e)}function od(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),s=Rn(Math.trunc(r/60),2),o=Rn(r%60,2);return n+s+e+o}const C4=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},K6=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},Wne=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],r=n[1],s=n[2];if(!s)return C4(t,e);let o;switch(r){case"P":o=e.dateTime({width:"short"});break;case"PP":o=e.dateTime({width:"medium"});break;case"PPP":o=e.dateTime({width:"long"});break;case"PPPP":default:o=e.dateTime({width:"full"});break}return o.replace("{{date}}",C4(r,e)).replace("{{time}}",K6(s,e))},kb={p:K6,P:Wne},Une=/^D+$/,Hne=/^Y+$/,Gne=["D","DD","YY","YYYY"];function Y6(t){return Une.test(t)}function Z6(t){return Hne.test(t)}function LE(t,e,n){const r=qne(t,e,n);if(console.warn(r),Gne.includes(t))throw new RangeError(r)}function qne(t,e,n){const r=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const Xne=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Kne=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Yne=/^'([^]*?)'?$/,Zne=/''/g,Qne=/[a-zA-Z]/;function _o(t,e,n){var d,f,p,g,x,b,w,C;const r=cf(),s=(n==null?void 0:n.locale)??r.locale??RT,o=(n==null?void 0:n.firstWeekContainsDate)??((f=(d=n==null?void 0:n.locale)==null?void 0:d.options)==null?void 0:f.firstWeekContainsDate)??r.firstWeekContainsDate??((g=(p=r.locale)==null?void 0:p.options)==null?void 0:g.firstWeekContainsDate)??1,i=(n==null?void 0:n.weekStartsOn)??((b=(x=n==null?void 0:n.locale)==null?void 0:x.options)==null?void 0:b.weekStartsOn)??r.weekStartsOn??((C=(w=r.locale)==null?void 0:w.options)==null?void 0:C.weekStartsOn)??0,a=Dt(t);if(!G6(a))throw new RangeError("Invalid time value");let l=e.match(Kne).map(N=>{const k=N[0];if(k==="p"||k==="P"){const I=kb[k];return I(N,s.formatLong)}return N}).join("").match(Xne).map(N=>{if(N==="''")return{isToken:!1,value:"'"};const k=N[0];if(k==="'")return{isToken:!1,value:Jne(N)};if(b4[k])return{isToken:!0,value:N};if(k.match(Qne))throw new RangeError("Format string contains an unescaped latin alphabet character `"+k+"`");return{isToken:!1,value:N}});s.localize.preprocessor&&(l=s.localize.preprocessor(a,l));const c={firstWeekContainsDate:o,weekStartsOn:i,locale:s};return l.map(N=>{if(!N.isToken)return N.value;const k=N.value;(!(n!=null&&n.useAdditionalWeekYearTokens)&&Z6(k)||!(n!=null&&n.useAdditionalDayOfYearTokens)&&Y6(k))&&LE(k,e,String(t));const I=b4[k[0]];return I(a,k,s.localize,c)}).join("")}function Jne(t){const e=t.match(Yne);return e?e[1].replace(Zne,"'"):t}function ere(t){return Dt(t).getDate()}function Q6(t){const e=Dt(t),n=e.getFullYear(),r=e.getMonth(),s=Dn(t,0);return s.setFullYear(n,r+1,0),s.setHours(0,0,0,0),s.getDate()}function tre(){return Object.assign({},cf())}function nre(t){return Dt(t).getHours()}function rre(t){let n=Dt(t).getDay();return n===0&&(n=7),n}function sre(t){return Dt(t).getMilliseconds()}function ore(t){return Dt(t).getMinutes()}function ire(t){return Dt(t).getMonth()}function are(t){return Dt(t).getSeconds()}function lre(t){return Dt(t).getFullYear()}function qS(t,e){const n=Dt(t),r=Dt(e);return n.getTime()>r.getTime()}function XS(t,e){const n=Dt(t),r=Dt(e);return+n<+r}function cre(t,e){const n=Dt(t),r=Dt(e);return+n==+r}function ure(t,e){const n=e instanceof Date?Dn(e,0):new e(0);return n.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),n.setHours(t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()),n}const dre=10;class J6{constructor(){dt(this,"subPriority",0)}validate(e,n){return!0}}class fre extends J6{constructor(e,n,r,s,o){super(),this.value=e,this.validateValue=n,this.setValue=r,this.priority=s,o&&(this.subPriority=o)}validate(e,n){return this.validateValue(e,this.value,n)}set(e,n,r){return this.setValue(e,n,this.value,r)}}class hre extends J6{constructor(){super(...arguments);dt(this,"priority",dre);dt(this,"subPriority",-1)}set(n,r){return r.timestampIsSet?n:Dn(n,ure(n,Date))}}class En{run(e,n,r,s){const o=this.parse(e,n,r,s);return o?{setter:new fre(o.value,this.validate,this.set,this.priority,this.subPriority),rest:o.rest}:null}validate(e,n,r){return!0}}class pre extends En{constructor(){super(...arguments);dt(this,"priority",140);dt(this,"incompatibleTokens",["R","u","t","T"])}parse(n,r,s){switch(r){case"G":case"GG":case"GGG":return s.era(n,{width:"abbreviated"})||s.era(n,{width:"narrow"});case"GGGGG":return s.era(n,{width:"narrow"});case"GGGG":default:return s.era(n,{width:"wide"})||s.era(n,{width:"abbreviated"})||s.era(n,{width:"narrow"})}}set(n,r,s){return r.era=s,n.setFullYear(s,0,1),n.setHours(0,0,0,0),n}}const Mr={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},ul={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function Lr(t,e){return t&&{value:e(t.value),rest:t.rest}}function mr(t,e){const n=e.match(t);return n?{value:parseInt(n[0],10),rest:e.slice(n[0].length)}:null}function dl(t,e){const n=e.match(t);if(!n)return null;if(n[0]==="Z")return{value:0,rest:e.slice(1)};const r=n[1]==="+"?1:-1,s=n[2]?parseInt(n[2],10):0,o=n[3]?parseInt(n[3],10):0,i=n[5]?parseInt(n[5],10):0;return{value:r*(s*ev+o*Jw+i*Zte),rest:e.slice(n[0].length)}}function eB(t){return mr(Mr.anyDigitsSigned,t)}function Rr(t,e){switch(t){case 1:return mr(Mr.singleDigit,e);case 2:return mr(Mr.twoDigits,e);case 3:return mr(Mr.threeDigits,e);case 4:return mr(Mr.fourDigits,e);default:return mr(new RegExp("^\\d{1,"+t+"}"),e)}}function Tb(t,e){switch(t){case 1:return mr(Mr.singleDigitSigned,e);case 2:return mr(Mr.twoDigitsSigned,e);case 3:return mr(Mr.threeDigitsSigned,e);case 4:return mr(Mr.fourDigitsSigned,e);default:return mr(new RegExp("^-?\\d{1,"+t+"}"),e)}}function OT(t){switch(t){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function tB(t,e){const n=e>0,r=n?e:1-e;let s;if(r<=50)s=t||100;else{const o=r+50,i=Math.trunc(o/100)*100,a=t>=o%100;s=t+i-(a?100:0)}return n?s:1-s}function nB(t){return t%400===0||t%4===0&&t%100!==0}class mre extends En{constructor(){super(...arguments);dt(this,"priority",130);dt(this,"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"])}parse(n,r,s){const o=i=>({year:i,isTwoDigitYear:r==="yy"});switch(r){case"y":return Lr(Rr(4,n),o);case"yo":return Lr(s.ordinalNumber(n,{unit:"year"}),o);default:return Lr(Rr(r.length,n),o)}}validate(n,r){return r.isTwoDigitYear||r.year>0}set(n,r,s){const o=n.getFullYear();if(s.isTwoDigitYear){const a=tB(s.year,o);return n.setFullYear(a,0,1),n.setHours(0,0,0,0),n}const i=!("era"in r)||r.era===1?s.year:1-s.year;return n.setFullYear(i,0,1),n.setHours(0,0,0,0),n}}class gre extends En{constructor(){super(...arguments);dt(this,"priority",130);dt(this,"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"])}parse(n,r,s){const o=i=>({year:i,isTwoDigitYear:r==="YY"});switch(r){case"Y":return Lr(Rr(4,n),o);case"Yo":return Lr(s.ordinalNumber(n,{unit:"year"}),o);default:return Lr(Rr(r.length,n),o)}}validate(n,r){return r.isTwoDigitYear||r.year>0}set(n,r,s,o){const i=DT(n,o);if(s.isTwoDigitYear){const l=tB(s.year,i);return n.setFullYear(l,0,o.firstWeekContainsDate),n.setHours(0,0,0,0),sc(n,o)}const a=!("era"in r)||r.era===1?s.year:1-s.year;return n.setFullYear(a,0,o.firstWeekContainsDate),n.setHours(0,0,0,0),sc(n,o)}}class xre extends En{constructor(){super(...arguments);dt(this,"priority",130);dt(this,"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"])}parse(n,r){return Tb(r==="R"?4:r.length,n)}set(n,r,s){const o=Dn(n,0);return o.setFullYear(s,0,4),o.setHours(0,0,0,0),Hh(o)}}class yre extends En{constructor(){super(...arguments);dt(this,"priority",130);dt(this,"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"])}parse(n,r){return Tb(r==="u"?4:r.length,n)}set(n,r,s){return n.setFullYear(s,0,1),n.setHours(0,0,0,0),n}}class bre extends En{constructor(){super(...arguments);dt(this,"priority",120);dt(this,"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"])}parse(n,r,s){switch(r){case"Q":case"QQ":return Rr(r.length,n);case"Qo":return s.ordinalNumber(n,{unit:"quarter"});case"QQQ":return s.quarter(n,{width:"abbreviated",context:"formatting"})||s.quarter(n,{width:"narrow",context:"formatting"});case"QQQQQ":return s.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return s.quarter(n,{width:"wide",context:"formatting"})||s.quarter(n,{width:"abbreviated",context:"formatting"})||s.quarter(n,{width:"narrow",context:"formatting"})}}validate(n,r){return r>=1&&r<=4}set(n,r,s){return n.setMonth((s-1)*3,1),n.setHours(0,0,0,0),n}}class wre extends En{constructor(){super(...arguments);dt(this,"priority",120);dt(this,"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"])}parse(n,r,s){switch(r){case"q":case"qq":return Rr(r.length,n);case"qo":return s.ordinalNumber(n,{unit:"quarter"});case"qqq":return s.quarter(n,{width:"abbreviated",context:"standalone"})||s.quarter(n,{width:"narrow",context:"standalone"});case"qqqqq":return s.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return s.quarter(n,{width:"wide",context:"standalone"})||s.quarter(n,{width:"abbreviated",context:"standalone"})||s.quarter(n,{width:"narrow",context:"standalone"})}}validate(n,r){return r>=1&&r<=4}set(n,r,s){return n.setMonth((s-1)*3,1),n.setHours(0,0,0,0),n}}class vre extends En{constructor(){super(...arguments);dt(this,"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]);dt(this,"priority",110)}parse(n,r,s){const o=i=>i-1;switch(r){case"M":return Lr(mr(Mr.month,n),o);case"MM":return Lr(Rr(2,n),o);case"Mo":return Lr(s.ordinalNumber(n,{unit:"month"}),o);case"MMM":return s.month(n,{width:"abbreviated",context:"formatting"})||s.month(n,{width:"narrow",context:"formatting"});case"MMMMM":return s.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return s.month(n,{width:"wide",context:"formatting"})||s.month(n,{width:"abbreviated",context:"formatting"})||s.month(n,{width:"narrow",context:"formatting"})}}validate(n,r){return r>=0&&r<=11}set(n,r,s){return n.setMonth(s,1),n.setHours(0,0,0,0),n}}class Cre extends En{constructor(){super(...arguments);dt(this,"priority",110);dt(this,"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"])}parse(n,r,s){const o=i=>i-1;switch(r){case"L":return Lr(mr(Mr.month,n),o);case"LL":return Lr(Rr(2,n),o);case"Lo":return Lr(s.ordinalNumber(n,{unit:"month"}),o);case"LLL":return s.month(n,{width:"abbreviated",context:"standalone"})||s.month(n,{width:"narrow",context:"standalone"});case"LLLLL":return s.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return s.month(n,{width:"wide",context:"standalone"})||s.month(n,{width:"abbreviated",context:"standalone"})||s.month(n,{width:"narrow",context:"standalone"})}}validate(n,r){return r>=0&&r<=11}set(n,r,s){return n.setMonth(s,1),n.setHours(0,0,0,0),n}}function Sre(t,e,n){const r=Dt(t),s=$T(r,n)-e;return r.setDate(r.getDate()-s*7),r}class Nre extends En{constructor(){super(...arguments);dt(this,"priority",100);dt(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"])}parse(n,r,s){switch(r){case"w":return mr(Mr.week,n);case"wo":return s.ordinalNumber(n,{unit:"week"});default:return Rr(r.length,n)}}validate(n,r){return r>=1&&r<=53}set(n,r,s,o){return sc(Sre(n,s,o),o)}}function Ere(t,e){const n=Dt(t),r=X6(n)-e;return n.setDate(n.getDate()-r*7),n}class Ire extends En{constructor(){super(...arguments);dt(this,"priority",100);dt(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"])}parse(n,r,s){switch(r){case"I":return mr(Mr.week,n);case"Io":return s.ordinalNumber(n,{unit:"week"});default:return Rr(r.length,n)}}validate(n,r){return r>=1&&r<=53}set(n,r,s){return Hh(Ere(n,s))}}const kre=[31,28,31,30,31,30,31,31,30,31,30,31],Tre=[31,29,31,30,31,30,31,31,30,31,30,31];class Are extends En{constructor(){super(...arguments);dt(this,"priority",90);dt(this,"subPriority",1);dt(this,"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"])}parse(n,r,s){switch(r){case"d":return mr(Mr.date,n);case"do":return s.ordinalNumber(n,{unit:"date"});default:return Rr(r.length,n)}}validate(n,r){const s=n.getFullYear(),o=nB(s),i=n.getMonth();return o?r>=1&&r<=Tre[i]:r>=1&&r<=kre[i]}set(n,r,s){return n.setDate(s),n.setHours(0,0,0,0),n}}class Rre extends En{constructor(){super(...arguments);dt(this,"priority",90);dt(this,"subpriority",1);dt(this,"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"])}parse(n,r,s){switch(r){case"D":case"DD":return mr(Mr.dayOfYear,n);case"Do":return s.ordinalNumber(n,{unit:"date"});default:return Rr(r.length,n)}}validate(n,r){const s=n.getFullYear();return nB(s)?r>=1&&r<=366:r>=1&&r<=365}set(n,r,s){return n.setMonth(0,s),n.setHours(0,0,0,0),n}}function _T(t,e,n){var f,p,g,x;const r=cf(),s=(n==null?void 0:n.weekStartsOn)??((p=(f=n==null?void 0:n.locale)==null?void 0:f.options)==null?void 0:p.weekStartsOn)??r.weekStartsOn??((x=(g=r.locale)==null?void 0:g.options)==null?void 0:x.weekStartsOn)??0,o=Dt(t),i=o.getDay(),l=(e%7+7)%7,c=7-s,d=e<0||e>6?e-(i+c)%7:(l+c)%7-(i+c)%7;return k0(o,d)}class Dre extends En{constructor(){super(...arguments);dt(this,"priority",90);dt(this,"incompatibleTokens",["D","i","e","c","t","T"])}parse(n,r,s){switch(r){case"E":case"EE":case"EEE":return s.day(n,{width:"abbreviated",context:"formatting"})||s.day(n,{width:"short",context:"formatting"})||s.day(n,{width:"narrow",context:"formatting"});case"EEEEE":return s.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return s.day(n,{width:"short",context:"formatting"})||s.day(n,{width:"narrow",context:"formatting"});case"EEEE":default:return s.day(n,{width:"wide",context:"formatting"})||s.day(n,{width:"abbreviated",context:"formatting"})||s.day(n,{width:"short",context:"formatting"})||s.day(n,{width:"narrow",context:"formatting"})}}validate(n,r){return r>=0&&r<=6}set(n,r,s,o){return n=_T(n,s,o),n.setHours(0,0,0,0),n}}class $re extends En{constructor(){super(...arguments);dt(this,"priority",90);dt(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"])}parse(n,r,s,o){const i=a=>{const l=Math.floor((a-1)/7)*7;return(a+o.weekStartsOn+6)%7+l};switch(r){case"e":case"ee":return Lr(Rr(r.length,n),i);case"eo":return Lr(s.ordinalNumber(n,{unit:"day"}),i);case"eee":return s.day(n,{width:"abbreviated",context:"formatting"})||s.day(n,{width:"short",context:"formatting"})||s.day(n,{width:"narrow",context:"formatting"});case"eeeee":return s.day(n,{width:"narrow",context:"formatting"});case"eeeeee":return s.day(n,{width:"short",context:"formatting"})||s.day(n,{width:"narrow",context:"formatting"});case"eeee":default:return s.day(n,{width:"wide",context:"formatting"})||s.day(n,{width:"abbreviated",context:"formatting"})||s.day(n,{width:"short",context:"formatting"})||s.day(n,{width:"narrow",context:"formatting"})}}validate(n,r){return r>=0&&r<=6}set(n,r,s,o){return n=_T(n,s,o),n.setHours(0,0,0,0),n}}class Ore extends En{constructor(){super(...arguments);dt(this,"priority",90);dt(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"])}parse(n,r,s,o){const i=a=>{const l=Math.floor((a-1)/7)*7;return(a+o.weekStartsOn+6)%7+l};switch(r){case"c":case"cc":return Lr(Rr(r.length,n),i);case"co":return Lr(s.ordinalNumber(n,{unit:"day"}),i);case"ccc":return s.day(n,{width:"abbreviated",context:"standalone"})||s.day(n,{width:"short",context:"standalone"})||s.day(n,{width:"narrow",context:"standalone"});case"ccccc":return s.day(n,{width:"narrow",context:"standalone"});case"cccccc":return s.day(n,{width:"short",context:"standalone"})||s.day(n,{width:"narrow",context:"standalone"});case"cccc":default:return s.day(n,{width:"wide",context:"standalone"})||s.day(n,{width:"abbreviated",context:"standalone"})||s.day(n,{width:"short",context:"standalone"})||s.day(n,{width:"narrow",context:"standalone"})}}validate(n,r){return r>=0&&r<=6}set(n,r,s,o){return n=_T(n,s,o),n.setHours(0,0,0,0),n}}function _re(t,e){const n=Dt(t),r=rre(n),s=e-r;return k0(n,s)}class Pre extends En{constructor(){super(...arguments);dt(this,"priority",90);dt(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"])}parse(n,r,s){const o=i=>i===0?7:i;switch(r){case"i":case"ii":return Rr(r.length,n);case"io":return s.ordinalNumber(n,{unit:"day"});case"iii":return Lr(s.day(n,{width:"abbreviated",context:"formatting"})||s.day(n,{width:"short",context:"formatting"})||s.day(n,{width:"narrow",context:"formatting"}),o);case"iiiii":return Lr(s.day(n,{width:"narrow",context:"formatting"}),o);case"iiiiii":return Lr(s.day(n,{width:"short",context:"formatting"})||s.day(n,{width:"narrow",context:"formatting"}),o);case"iiii":default:return Lr(s.day(n,{width:"wide",context:"formatting"})||s.day(n,{width:"abbreviated",context:"formatting"})||s.day(n,{width:"short",context:"formatting"})||s.day(n,{width:"narrow",context:"formatting"}),o)}}validate(n,r){return r>=1&&r<=7}set(n,r,s){return n=_re(n,s),n.setHours(0,0,0,0),n}}class Fre extends En{constructor(){super(...arguments);dt(this,"priority",80);dt(this,"incompatibleTokens",["b","B","H","k","t","T"])}parse(n,r,s){switch(r){case"a":case"aa":case"aaa":return s.dayPeriod(n,{width:"abbreviated",context:"formatting"})||s.dayPeriod(n,{width:"narrow",context:"formatting"});case"aaaaa":return s.dayPeriod(n,{width:"narrow",context:"formatting"});case"aaaa":default:return s.dayPeriod(n,{width:"wide",context:"formatting"})||s.dayPeriod(n,{width:"abbreviated",context:"formatting"})||s.dayPeriod(n,{width:"narrow",context:"formatting"})}}set(n,r,s){return n.setHours(OT(s),0,0,0),n}}class Mre extends En{constructor(){super(...arguments);dt(this,"priority",80);dt(this,"incompatibleTokens",["a","B","H","k","t","T"])}parse(n,r,s){switch(r){case"b":case"bb":case"bbb":return s.dayPeriod(n,{width:"abbreviated",context:"formatting"})||s.dayPeriod(n,{width:"narrow",context:"formatting"});case"bbbbb":return s.dayPeriod(n,{width:"narrow",context:"formatting"});case"bbbb":default:return s.dayPeriod(n,{width:"wide",context:"formatting"})||s.dayPeriod(n,{width:"abbreviated",context:"formatting"})||s.dayPeriod(n,{width:"narrow",context:"formatting"})}}set(n,r,s){return n.setHours(OT(s),0,0,0),n}}class Lre extends En{constructor(){super(...arguments);dt(this,"priority",80);dt(this,"incompatibleTokens",["a","b","t","T"])}parse(n,r,s){switch(r){case"B":case"BB":case"BBB":return s.dayPeriod(n,{width:"abbreviated",context:"formatting"})||s.dayPeriod(n,{width:"narrow",context:"formatting"});case"BBBBB":return s.dayPeriod(n,{width:"narrow",context:"formatting"});case"BBBB":default:return s.dayPeriod(n,{width:"wide",context:"formatting"})||s.dayPeriod(n,{width:"abbreviated",context:"formatting"})||s.dayPeriod(n,{width:"narrow",context:"formatting"})}}set(n,r,s){return n.setHours(OT(s),0,0,0),n}}class Bre extends En{constructor(){super(...arguments);dt(this,"priority",70);dt(this,"incompatibleTokens",["H","K","k","t","T"])}parse(n,r,s){switch(r){case"h":return mr(Mr.hour12h,n);case"ho":return s.ordinalNumber(n,{unit:"hour"});default:return Rr(r.length,n)}}validate(n,r){return r>=1&&r<=12}set(n,r,s){const o=n.getHours()>=12;return o&&s<12?n.setHours(s+12,0,0,0):!o&&s===12?n.setHours(0,0,0,0):n.setHours(s,0,0,0),n}}class jre extends En{constructor(){super(...arguments);dt(this,"priority",70);dt(this,"incompatibleTokens",["a","b","h","K","k","t","T"])}parse(n,r,s){switch(r){case"H":return mr(Mr.hour23h,n);case"Ho":return s.ordinalNumber(n,{unit:"hour"});default:return Rr(r.length,n)}}validate(n,r){return r>=0&&r<=23}set(n,r,s){return n.setHours(s,0,0,0),n}}class zre extends En{constructor(){super(...arguments);dt(this,"priority",70);dt(this,"incompatibleTokens",["h","H","k","t","T"])}parse(n,r,s){switch(r){case"K":return mr(Mr.hour11h,n);case"Ko":return s.ordinalNumber(n,{unit:"hour"});default:return Rr(r.length,n)}}validate(n,r){return r>=0&&r<=11}set(n,r,s){return n.getHours()>=12&&s<12?n.setHours(s+12,0,0,0):n.setHours(s,0,0,0),n}}class Vre extends En{constructor(){super(...arguments);dt(this,"priority",70);dt(this,"incompatibleTokens",["a","b","h","H","K","t","T"])}parse(n,r,s){switch(r){case"k":return mr(Mr.hour24h,n);case"ko":return s.ordinalNumber(n,{unit:"hour"});default:return Rr(r.length,n)}}validate(n,r){return r>=1&&r<=24}set(n,r,s){const o=s<=24?s%24:s;return n.setHours(o,0,0,0),n}}class Wre extends En{constructor(){super(...arguments);dt(this,"priority",60);dt(this,"incompatibleTokens",["t","T"])}parse(n,r,s){switch(r){case"m":return mr(Mr.minute,n);case"mo":return s.ordinalNumber(n,{unit:"minute"});default:return Rr(r.length,n)}}validate(n,r){return r>=0&&r<=59}set(n,r,s){return n.setMinutes(s,0,0),n}}class Ure extends En{constructor(){super(...arguments);dt(this,"priority",50);dt(this,"incompatibleTokens",["t","T"])}parse(n,r,s){switch(r){case"s":return mr(Mr.second,n);case"so":return s.ordinalNumber(n,{unit:"second"});default:return Rr(r.length,n)}}validate(n,r){return r>=0&&r<=59}set(n,r,s){return n.setSeconds(s,0),n}}class Hre extends En{constructor(){super(...arguments);dt(this,"priority",30);dt(this,"incompatibleTokens",["t","T"])}parse(n,r){const s=o=>Math.trunc(o*Math.pow(10,-r.length+3));return Lr(Rr(r.length,n),s)}set(n,r,s){return n.setMilliseconds(s),n}}class Gre extends En{constructor(){super(...arguments);dt(this,"priority",10);dt(this,"incompatibleTokens",["t","T","x"])}parse(n,r){switch(r){case"X":return dl(ul.basicOptionalMinutes,n);case"XX":return dl(ul.basic,n);case"XXXX":return dl(ul.basicOptionalSeconds,n);case"XXXXX":return dl(ul.extendedOptionalSeconds,n);case"XXX":default:return dl(ul.extended,n)}}set(n,r,s){return r.timestampIsSet?n:Dn(n,n.getTime()-Ib(n)-s)}}class qre extends En{constructor(){super(...arguments);dt(this,"priority",10);dt(this,"incompatibleTokens",["t","T","X"])}parse(n,r){switch(r){case"x":return dl(ul.basicOptionalMinutes,n);case"xx":return dl(ul.basic,n);case"xxxx":return dl(ul.basicOptionalSeconds,n);case"xxxxx":return dl(ul.extendedOptionalSeconds,n);case"xxx":default:return dl(ul.extended,n)}}set(n,r,s){return r.timestampIsSet?n:Dn(n,n.getTime()-Ib(n)-s)}}class Xre extends En{constructor(){super(...arguments);dt(this,"priority",40);dt(this,"incompatibleTokens","*")}parse(n){return eB(n)}set(n,r,s){return[Dn(n,s*1e3),{timestampIsSet:!0}]}}class Kre extends En{constructor(){super(...arguments);dt(this,"priority",20);dt(this,"incompatibleTokens","*")}parse(n){return eB(n)}set(n,r,s){return[Dn(n,s),{timestampIsSet:!0}]}}const Yre={G:new pre,y:new mre,Y:new gre,R:new xre,u:new yre,Q:new bre,q:new wre,M:new vre,L:new Cre,w:new Nre,I:new Ire,d:new Are,D:new Rre,E:new Dre,e:new $re,c:new Ore,i:new Pre,a:new Fre,b:new Mre,B:new Lre,h:new Bre,H:new jre,K:new zre,k:new Vre,m:new Wre,s:new Ure,S:new Hre,X:new Gre,x:new qre,t:new Xre,T:new Kre},Zre=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Qre=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Jre=/^'([^]*?)'?$/,ese=/''/g,tse=/\S/,nse=/[a-zA-Z]/;function rse(t,e,n,r){var b,w,C,N,k,I,R,$;const s=tre(),o=(r==null?void 0:r.locale)??s.locale??RT,i=(r==null?void 0:r.firstWeekContainsDate)??((w=(b=r==null?void 0:r.locale)==null?void 0:b.options)==null?void 0:w.firstWeekContainsDate)??s.firstWeekContainsDate??((N=(C=s.locale)==null?void 0:C.options)==null?void 0:N.firstWeekContainsDate)??1,a=(r==null?void 0:r.weekStartsOn)??((I=(k=r==null?void 0:r.locale)==null?void 0:k.options)==null?void 0:I.weekStartsOn)??s.weekStartsOn??(($=(R=s.locale)==null?void 0:R.options)==null?void 0:$.weekStartsOn)??0;if(e==="")return t===""?Dt(n):Dn(n,NaN);const l={firstWeekContainsDate:i,weekStartsOn:a,locale:o},c=[new hre],d=e.match(Qre).map(O=>{const F=O[0];if(F in kb){const M=kb[F];return M(O,o.formatLong)}return O}).join("").match(Zre),f=[];for(let O of d){!(r!=null&&r.useAdditionalWeekYearTokens)&&Z6(O)&&LE(O,e,t),!(r!=null&&r.useAdditionalDayOfYearTokens)&&Y6(O)&&LE(O,e,t);const F=O[0],M=Yre[F];if(M){const{incompatibleTokens:_}=M;if(Array.isArray(_)){const B=f.find(W=>_.includes(W.token)||W.token===F);if(B)throw new RangeError(`The format string mustn't contain \`${B.fullToken}\` and \`${O}\` at the same time`)}else if(M.incompatibleTokens==="*"&&f.length>0)throw new RangeError(`The format string mustn't contain \`${O}\` and any other token at the same time`);f.push({token:F,fullToken:O});const V=M.run(t,O,o.match,l);if(!V)return Dn(n,NaN);c.push(V.setter),t=V.rest}else{if(F.match(nse))throw new RangeError("Format string contains an unescaped latin alphabet character `"+F+"`");if(O==="''"?O="'":F==="'"&&(O=sse(O)),t.indexOf(O)===0)t=t.slice(O.length);else return Dn(n,NaN)}}if(t.length>0&&tse.test(t))return Dn(n,NaN);const p=c.map(O=>O.priority).sort((O,F)=>F-O).filter((O,F,M)=>M.indexOf(O)===F).map(O=>c.filter(F=>F.priority===O).sort((F,M)=>M.subPriority-F.subPriority)).map(O=>O[0]);let g=Dt(n);if(isNaN(g.getTime()))return Dn(n,NaN);const x={};for(const O of p){if(!O.validate(g,l))return Dn(n,NaN);const F=O.set(g,x,l);Array.isArray(F)?(g=F[0],Object.assign(x,F[1])):g=F}return Dn(n,g)}function sse(t){return t.match(Jre)[1].replace(ese,"'")}function S4(t){const e=Dt(t);return e.setMinutes(0,0,0),e}function ose(t,e){const n=S4(t),r=S4(e);return+n==+r}function ise(t,e){const n=Dt(t),r=Dt(e);return n.getFullYear()===r.getFullYear()&&n.getMonth()===r.getMonth()}function ase(t,e){const n=Dt(t),r=Dt(e);return n.getFullYear()===r.getFullYear()}function lse(t){return H6(t,ine(t))}function cse(t,e){const n=+Dt(t),[r,s]=[+Dt(e.start),+Dt(e.end)].sort((o,i)=>o-i);return n>=r&&n<=s}function use(t,e){return k0(t,-30)}function hg(t,e){const r=pse(t);let s;if(r.date){const l=mse(r.date,2);s=gse(l.restDateString,l.year)}if(!s||isNaN(s.getTime()))return new Date(NaN);const o=s.getTime();let i=0,a;if(r.time&&(i=xse(r.time),isNaN(i)))return new Date(NaN);if(r.timezone){if(a=yse(r.timezone),isNaN(a))return new Date(NaN)}else{const l=new Date(o+i),c=new Date(0);return c.setFullYear(l.getUTCFullYear(),l.getUTCMonth(),l.getUTCDate()),c.setHours(l.getUTCHours(),l.getUTCMinutes(),l.getUTCSeconds(),l.getUTCMilliseconds()),c}return new Date(o+i+a)}const Vx={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},dse=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,fse=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,hse=/^([+-])(\d{2})(?::?(\d{2}))?$/;function pse(t){const e={},n=t.split(Vx.dateTimeDelimiter);let r;if(n.length>2)return e;if(/:/.test(n[0])?r=n[0]:(e.date=n[0],r=n[1],Vx.timeZoneDelimiter.test(e.date)&&(e.date=t.split(Vx.timeZoneDelimiter)[0],r=t.substr(e.date.length,t.length))),r){const s=Vx.timezone.exec(r);s?(e.time=r.replace(s[1],""),e.timezone=s[1]):e.time=r}return e}function mse(t,e){const n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),r=t.match(n);if(!r)return{year:NaN,restDateString:""};const s=r[1]?parseInt(r[1]):null,o=r[2]?parseInt(r[2]):null;return{year:o===null?s:o*100,restDateString:t.slice((r[1]||r[2]).length)}}function gse(t,e){if(e===null)return new Date(NaN);const n=t.match(dse);if(!n)return new Date(NaN);const r=!!n[4],s=bm(n[1]),o=bm(n[2])-1,i=bm(n[3]),a=bm(n[4]),l=bm(n[5])-1;if(r)return Sse(e,a,l)?bse(e,a,l):new Date(NaN);{const c=new Date(0);return!vse(e,o,i)||!Cse(e,s)?new Date(NaN):(c.setUTCFullYear(e,o,Math.max(s,i)),c)}}function bm(t){return t?parseInt(t):1}function xse(t){const e=t.match(fse);if(!e)return NaN;const n=KS(e[1]),r=KS(e[2]),s=KS(e[3]);return Nse(n,r,s)?n*ev+r*Jw+s*1e3:NaN}function KS(t){return t&&parseFloat(t.replace(",","."))||0}function yse(t){if(t==="Z")return 0;const e=t.match(hse);if(!e)return 0;const n=e[1]==="+"?-1:1,r=parseInt(e[2]),s=e[3]&&parseInt(e[3])||0;return Ese(r,s)?n*(r*ev+s*Jw):NaN}function bse(t,e,n){const r=new Date(0);r.setUTCFullYear(t,0,4);const s=r.getUTCDay()||7,o=(e-1)*7+n+1-s;return r.setUTCDate(r.getUTCDate()+o),r}const wse=[31,null,31,30,31,30,31,31,30,31,30,31];function rB(t){return t%400===0||t%4===0&&t%100!==0}function vse(t,e,n){return e>=0&&e<=11&&n>=1&&n<=(wse[e]||(rB(t)?29:28))}function Cse(t,e){return e>=1&&e<=(rB(t)?366:365)}function Sse(t,e,n){return e>=1&&e<=53&&n>=0&&n<=6}function Nse(t,e,n){return t===24?e===0&&n===0:n>=0&&n<60&&e>=0&&e<60&&t>=0&&t<25}function Ese(t,e){return e>=0&&e<=59}function Ise(t,e){const n=Dt(t),r=n.getFullYear(),s=n.getDate(),o=Dn(t,0);o.setFullYear(r,e,15),o.setHours(0,0,0,0);const i=Q6(o);return n.setMonth(e,Math.min(s,i)),n}function kse(t,e){const n=Dt(t);return n.setDate(e),n}function Tse(t,e){const n=Dt(t);return n.setHours(e),n}function Ase(t,e){const n=Dt(t);return n.setMilliseconds(e),n}function Rse(t,e){const n=Dt(t);return n.setMinutes(e),n}function Dse(t,e){const n=Dt(t);return n.setSeconds(e),n}function $se(t,e){const n=Dt(t);return isNaN(+n)?Dn(t,NaN):(n.setFullYear(e),n)}function N4(t,e){return kT(t,-1)}const Ose=()=>{const[t,e]=A.useState([]),[n,r]=A.useState(0),[s,o]=A.useState(!1),i=async()=>{try{const f=await yt.get("/api/notifications");e(f.data.notifications)}catch(f){console.error("Error fetching notifications:",f)}},a=async()=>{try{const f=await yt.get("/api/notifications/unread-count");r(f.data.count)}catch(f){console.error("Error fetching unread count:",f)}},l=async f=>{try{await yt.put(`/api/notifications/${f}/read`),i(),a()}catch(p){console.error("Error marking notification as read:",p)}};A.useEffect(()=>{i(),a();const f=setInterval(()=>{a(),s&&i()},3e4);return()=>clearInterval(f)},[s]);const c=f=>{switch(f){case"proxy_attempt":return"⚠️";case"late_attendance":return"⏰";case"leave_notice":return"📝";default:return"📌"}},d=f=>{switch(f){case"proxy_attempt":return"bg-red-50 border-red-200";case"late_attendance":return"bg-yellow-50 border-yellow-200";default:return"bg-gray-50 border-gray-200"}};return S.jsxs("div",{className:"relative",children:[S.jsxs("button",{onClick:()=>o(!s),className:"relative p-2 text-gray-600 hover:text-gray-900 focus:outline-none focus:ring-2 focus:ring-indigo-500 rounded-full",children:[S.jsx("span",{className:"sr-only",children:"View notifications"}),S.jsx(yte,{className:"h-6 w-6"}),n>0&&S.jsx("span",{className:"absolute top-0 right-0 block h-4 w-4 transform -translate-y-1/2 translate-x-1/2 rounded-full bg-red-600 text-xs text-white flex items-center justify-center",children:n})]}),s&&S.jsx("div",{className:"origin-top-right absolute right-0 mt-2 w-96 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 z-50",children:S.jsxs("div",{className:"py-1",children:[S.jsx("div",{className:"px-4 py-2 border-b border-gray-200",children:S.jsx("h3",{className:"text-lg font-medium",children:"Notifications"})}),S.jsx("div",{className:"max-h-96 overflow-y-auto",children:t.length===0?S.jsx("p",{className:"px-4 py-3 text-sm text-gray-500",children:"No notifications"}):t.map(f=>S.jsx("div",{className:`px-4 py-3 border-b ${d(f.type)} ${f.read?"":"bg-opacity-50"}`,onClick:()=>l(f._id),children:S.jsxs("div",{className:"flex items-start",children:[S.jsx("div",{className:"flex-shrink-0 pt-0.5",children:c(f.type)}),S.jsxs("div",{className:"ml-3 w-0 flex-1",children:[S.jsx("p",{className:"text-sm font-medium text-gray-900",children:f.title}),S.jsx("p",{className:"mt-1 text-sm text-gray-500",children:f.message}),f.relatedClass&&S.jsxs("p",{className:"mt-1 text-xs text-gray-400",children:["Class: ",f.relatedClass.name]}),S.jsx("p",{className:"mt-1 text-xs text-gray-400",children:_o(new Date(f.createdAt),"MMM d, yyyy h:mm a")})]}),!f.read&&S.jsx("div",{className:"ml-4 flex-shrink-0",children:S.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-blue-100 text-blue-800",children:"New"})})]})},f._id))})]})})]})},_se=[{name:"Dashboard",href:"/",icon:V6,description:"Overview of your attendance"},{name:"Profile",href:"/profile",icon:IT,description:"Manage your account"},{name:"Events",href:"/events",icon:zi,description:"View and join events"}],Pse=[{name:"Mark Attendance",href:"/mark-attendance",icon:Ms,description:"Check in or check out"},{name:"Attendance History",href:"/history",icon:Fo,description:"View past attendance records"}],Fse=[{name:"Class Schedules",href:"/class-schedules",icon:ute,description:"View and manage your classes"},{name:"Leave Notice",href:"/leave-notice",icon:zi,description:"Notify students about leave"}];function wm(...t){return t.filter(Boolean).join(" ")}function Mse({children:t}){var w,C,N,k;const[e,n]=A.useState(!1),{currentUser:r,logout:s}=La(),o=of(),i=af(),[a,l]=A.useState(new Date),[c,d]=A.useState("");A.useEffect(()=>{const I=setInterval(()=>{l(new Date)},6e4);return f(),()=>clearInterval(I)},[]);const f=()=>{const I=new Date().getHours();let R="";I<12?R="Good morning":I<18?R="Good afternoon":R="Good evening",d(R)},p=()=>{s(),i("/login")},g=I=>I.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),x=I=>I.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0}),b=()=>{const I=[..._se];return(r==null?void 0:r.role)==="faculty"?I.push(...Fse):(r==null?void 0:r.role)==="student"&&I.push(...Pse),I};return S.jsxs("div",{className:"h-screen flex overflow-hidden bg-gray-50",children:[S.jsx(gm.Root,{show:e,as:A.Fragment,children:S.jsxs(u4,{as:"div",className:"fixed inset-0 flex z-40 md:hidden",onClose:n,children:[S.jsx(gm.Child,{as:A.Fragment,enter:"transition-opacity ease-linear duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"transition-opacity ease-linear duration-300",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:S.jsx(u4.Overlay,{className:"fixed inset-0 bg-gray-600 bg-opacity-75"})}),S.jsx(gm.Child,{as:A.Fragment,enter:"transition ease-in-out duration-300 transform",enterFrom:"-translate-x-full",enterTo:"translate-x-0",leave:"transition ease-in-out duration-300 transform",leaveFrom:"translate-x-0",leaveTo:"-translate-x-full",children:S.jsxs("div",{className:"relative flex-1 flex flex-col max-w-xs w-full bg-gradient-to-b from-indigo-700 to-indigo-900",children:[S.jsx(gm.Child,{as:A.Fragment,enter:"ease-in-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in-out duration-300",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:S.jsx("div",{className:"absolute top-0 right-0 -mr-12 pt-2",children:S.jsxs("button",{type:"button",className:"ml-1 flex items-center justify-center h-10 w-10 rounded-full focus:outline-none focus:ring-2 focus:ring-inset focus:ring-white",onClick:()=>n(!1),children:[S.jsx("span",{className:"sr-only",children:"Close sidebar"}),S.jsx(Eb,{className:"h-6 w-6 text-white","aria-hidden":"true"})]})})}),S.jsx("div",{className:"flex-shrink-0 flex items-center px-4",children:S.jsxs("div",{className:"flex items-center justify-center",children:[S.jsx(zi,{className:"h-8 w-8 text-white"}),S.jsx("h1",{className:"text-xl font-bold text-white ml-2",children:"FRAttendance"})]})}),S.jsx("div",{className:"mt-5 flex-1 h-0 overflow-y-auto",children:S.jsx("nav",{className:"px-2 space-y-1",children:b().map(I=>S.jsxs(va,{to:I.href,className:wm(I.href===o.pathname?"bg-indigo-800 text-white":"text-indigo-100 hover:bg-indigo-800 hover:text-white","group flex items-center px-3 py-3 text-base font-medium rounded-md"),onClick:()=>n(!1),children:[S.jsx(I.icon,{className:wm(I.href===o.pathname?"text-white":"text-indigo-300 group-hover:text-white","mr-4 flex-shrink-0 h-6 w-6"),"aria-hidden":"true"}),S.jsxs("div",{children:[S.jsx("div",{children:I.name}),S.jsx("p",{className:"text-xs text-indigo-300 group-hover:text-indigo-200",children:I.description})]})]},I.name))})})]})}),S.jsx("div",{className:"flex-shrink-0 w-14","aria-hidden":"true"})]})}),S.jsx("div",{className:"hidden md:flex md:flex-shrink-0",children:S.jsx("div",{className:"flex flex-col w-64",children:S.jsx("div",{className:"flex flex-col h-0 flex-1 bg-gradient-to-b from-indigo-700 to-indigo-900",children:S.jsxs("div",{className:"flex-1 flex flex-col overflow-y-auto pt-5 pb-4",children:[S.jsxs("div",{className:"flex items-center justify-center flex-shrink-0 px-4 mb-5",children:[S.jsx(zi,{className:"h-8 w-8 text-white"}),S.jsx("h1",{className:"text-lg font-bold text-white ml-2",children:"Attendance System"})]}),r&&S.jsx("div",{className:"mx-3 mb-6 px-3 py-3 rounded-lg bg-indigo-800 bg-opacity-50",children:S.jsxs("div",{className:"flex items-center",children:[S.jsx("div",{className:"h-10 w-10 rounded-full bg-white text-indigo-700 flex items-center justify-center font-bold text-lg",children:((w=r==null?void 0:r.name)==null?void 0:w.charAt(0))||"U"}),S.jsxs("div",{className:"ml-3",children:[S.jsx("p",{className:"text-sm font-medium text-white",children:(r==null?void 0:r.name)||"User"}),S.jsx("p",{className:"text-xs text-indigo-200 truncate",children:(r==null?void 0:r.email)||"user@example.com"})]})]})}),S.jsx("nav",{className:"flex-1 px-2 space-y-1",children:b().map(I=>S.jsxs(va,{to:I.href,className:wm(I.href===o.pathname?"bg-indigo-800 text-white":"text-indigo-100 hover:bg-indigo-800 hover:text-white","group flex items-center px-3 py-3 text-sm font-medium rounded-md transition-colors duration-150"),children:[S.jsx(I.icon,{className:wm(I.href===o.pathname?"text-white":"text-indigo-300 group-hover:text-white","mr-3 flex-shrink-0 h-5 w-5 transition-colors duration-150"),"aria-hidden":"true"}),S.jsxs("div",{children:[S.jsx("div",{children:I.name}),S.jsx("p",{className:"text-xs text-indigo-300 group-hover:text-indigo-200",children:I.description})]})]},I.name))}),S.jsx("div",{className:"mt-auto pt-4 border-t border-indigo-800 mx-3",children:S.jsx("div",{className:"px-2",children:S.jsxs("button",{onClick:p,className:"group flex items-center px-3 py-3 text-sm font-medium rounded-md text-indigo-100 hover:bg-indigo-800 hover:text-white w-full transition-colors duration-150",children:[S.jsx(p4,{className:"mr-3 flex-shrink-0 h-5 w-5 text-indigo-300 group-hover:text-white"}),"Sign out"]})})})]})})})}),S.jsxs("div",{className:"flex flex-col w-0 flex-1 overflow-hidden",children:[S.jsxs("div",{className:"relative z-10 flex-shrink-0 flex h-16 bg-white shadow",children:[S.jsxs("button",{type:"button",className:"px-4 border-r border-gray-200 text-gray-500 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-indigo-500 md:hidden",onClick:()=>n(!0),children:[S.jsx("span",{className:"sr-only",children:"Open sidebar"}),S.jsx(gte,{className:"h-6 w-6","aria-hidden":"true"})]}),S.jsxs("div",{className:"flex-1 px-4 flex items-center justify-between",children:[S.jsxs("div",{className:"flex-1 flex",children:[S.jsxs("div",{className:"ml-2 hidden sm:flex flex-col justify-center",children:[S.jsx("div",{className:"text-xs text-gray-500",children:g(a)}),S.jsx("div",{className:"text-sm font-medium",children:x(a)})]}),S.jsx("div",{className:"hidden md:block ml-6",children:S.jsxs("h2",{className:"text-xl font-semibold text-gray-800",children:[c,", ",((C=r==null?void 0:r.name)==null?void 0:C.split(" ")[0])||"there","!"]})})]}),S.jsxs("div",{className:"ml-4 flex items-center md:ml-6",children:[S.jsx(Ose,{}),S.jsxs(zx,{as:"div",className:"ml-3 relative",children:[S.jsx("div",{children:S.jsxs(zx.Button,{className:"max-w-xs bg-white flex items-center text-sm rounded-full focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:[S.jsx("span",{className:"sr-only",children:"Open user menu"}),S.jsx("div",{className:"h-8 w-8 rounded-full bg-indigo-100 text-indigo-600 flex items-center justify-center font-medium",children:((N=r==null?void 0:r.name)==null?void 0:N.charAt(0))||"U"})]})}),S.jsx(gm,{as:A.Fragment,enter:"transition ease-out duration-100",enterFrom:"transform opacity-0 scale-95",enterTo:"transform opacity-100 scale-100",leave:"transition ease-in duration-75",leaveFrom:"transform opacity-100 scale-100",leaveTo:"transform opacity-0 scale-95",children:S.jsx(zx.Items,{className:"origin-top-right absolute right-0 mt-2 w-48 rounded-md shadow-lg py-1 bg-white ring-1 ring-black ring-opacity-5 focus:outline-none",children:S.jsx("div",{className:"py-1",children:S.jsx(zx.Item,{children:({active:I})=>S.jsxs("button",{onClick:p,className:wm(I?"bg-gray-100":"","flex items-center w-full text-left px-4 py-2 text-sm text-gray-700"),children:[S.jsx(p4,{className:"mr-3 h-5 w-5 text-gray-400","aria-hidden":"true"}),"Sign out"]})})})})})]})]})]})]}),S.jsx("main",{className:"flex-1 relative overflow-y-auto focus:outline-none",children:S.jsx("div",{className:"py-6",children:S.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 md:px-8",children:[S.jsxs("div",{className:"md:hidden mb-6",children:[S.jsxs("h2",{className:"text-xl font-semibold text-gray-800",children:[c,", ",((k=r==null?void 0:r.name)==null?void 0:k.split(" ")[0])||"there","!"]}),S.jsx("p",{className:"text-sm text-gray-500",children:g(a)})]}),t]})})})]})]})}const Lse=()=>{const{isAuthenticated:t,loading:e}=La();return e?S.jsx("div",{className:"min-h-screen flex items-center justify-center",children:S.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary-600"})}):t?S.jsx(Mse,{children:S.jsx(ZK,{})}):S.jsx(L5,{to:"/login",replace:!0})},Bse=()=>{const[t,e]=A.useState({email:"",password:""}),[n,r]=A.useState({}),[s,o]=A.useState(!1),[i,a]=A.useState(!1),{login:l}=La(),c=af(),d=b=>{const{name:w,value:C}=b.target;e(N=>({...N,[w]:C})),n[w]&&r(N=>({...N,[w]:""}))},f=()=>{const b={};return t.email?/\S+@\S+\.\S+/.test(t.email)||(b.email="Email address is invalid"):b.email="Email is required",t.password?t.password.length<6&&(b.password="Password must be at least 6 characters"):b.password="Password is required",r(b),Object.keys(b).length===0},p=async b=>{if(b.preventDefault(),!!f()){a(!0),r({});try{await l(t.email,t.password),Rt.success("Login successful!"),c("/")}catch(w){if(console.error("Login error:",w),w.toString().includes("Invalid credentials")){const C="Invalid email or password. Please try again.";r({general:C}),Rt.error(C)}else if(w.toString().includes("Connection refused")){const C="Unable to connect to server. Please try again later.";r({general:C}),Rt.error(C)}else{const C=w.toString()||"An error occurred during login. Please try again.";r({general:C}),Rt.error(C)}}finally{a(!1)}}},g=()=>{o(!s)},x=()=>{window.location.href="https://yourdomain.com/api/auth/google/callback"};return S.jsxs("div",{className:"flex min-h-screen bg-gray-50",children:[S.jsx("div",{className:"flex flex-1 flex-col justify-center py-12 px-4 sm:px-6 lg:flex-none lg:px-20 xl:px-24",children:S.jsxs("div",{className:"mx-auto w-full max-w-sm lg:w-96",children:[S.jsxs("div",{children:[S.jsx("img",{src:"/logo.svg",alt:"Logo",className:"h-12 w-auto"}),S.jsx("h2",{className:"mt-6 text-3xl font-extrabold text-gray-900",children:"Sign in to your account"})]}),n.general&&S.jsx("div",{className:"mt-4 rounded-md bg-red-50 p-4",children:S.jsxs("div",{className:"flex",children:[S.jsx("div",{className:"flex-shrink-0",children:S.jsx(HS,{className:"h-5 w-5 text-red-400","aria-hidden":"true"})}),S.jsx("div",{className:"ml-3",children:S.jsx("h3",{className:"text-sm font-medium text-red-800",children:n.general})})]})}),S.jsxs("div",{className:"mt-8",children:[S.jsxs("div",{children:[S.jsx("div",{children:S.jsxs("button",{onClick:x,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-gray-600 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:[S.jsx("img",{className:"h-5 w-5 mr-2",src:"/google.svg",alt:"Google"}),"Sign in with Google"]})}),S.jsxs("div",{className:"mt-6 relative",children:[S.jsx("div",{className:"absolute inset-0 flex items-center",children:S.jsx("div",{className:"w-full border-t border-gray-300"})}),S.jsx("div",{className:"relative flex justify-center text-sm",children:S.jsx("span",{className:"px-2 bg-gray-50 text-gray-500",children:"Or continue with"})})]})]}),S.jsx("div",{className:"mt-6",children:S.jsxs("form",{onSubmit:p,className:"space-y-6",children:[S.jsxs("div",{children:[S.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email address"}),S.jsxs("div",{className:"relative mt-1",children:[S.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",value:t.email,onChange:d,className:`block w-full appearance-none rounded-md border ${n.email?"border-red-300 text-red-900 placeholder-red-300 focus:border-red-500 focus:ring-red-500":"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500"} px-3 py-2 placeholder-gray-400 shadow-sm focus:outline-none sm:text-sm`,"aria-invalid":n.email?"true":"false","aria-describedby":n.email?"email-error":void 0}),n.email&&S.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3",children:S.jsx(HS,{className:"h-5 w-5 text-red-500","aria-hidden":"true"})})]}),n.email&&S.jsx("p",{className:"mt-2 text-sm text-red-600",id:"email-error",children:n.email})]}),S.jsxs("div",{children:[S.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),S.jsxs("div",{className:"relative mt-1",children:[S.jsx("input",{id:"password",name:"password",type:s?"text":"password",autoComplete:"current-password",value:t.password,onChange:d,className:`block w-full appearance-none rounded-md border ${n.password?"border-red-300 text-red-900 placeholder-red-300 focus:border-red-500 focus:ring-red-500":"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500"} px-3 py-2 placeholder-gray-400 shadow-sm focus:outline-none sm:text-sm pr-10`,"aria-invalid":n.password?"true":"false","aria-describedby":n.password?"password-error":void 0}),S.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 flex items-center pr-3 text-gray-400 hover:text-gray-500",onClick:g,children:s?S.jsx(wh,{className:"h-5 w-5","aria-hidden":"true"}):S.jsx(vh,{className:"h-5 w-5","aria-hidden":"true"})}),n.password&&S.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-8 flex items-center",children:S.jsx(HS,{className:"h-5 w-5 text-red-500","aria-hidden":"true"})})]}),n.password&&S.jsx("p",{className:"mt-2 text-sm text-red-600",id:"password-error",children:n.password})]}),S.jsxs("div",{className:"flex items-center justify-between",children:[S.jsxs("div",{className:"flex items-center",children:[S.jsx("input",{id:"remember-me",name:"remember-me",type:"checkbox",className:"h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"}),S.jsx("label",{htmlFor:"remember-me",className:"ml-2 block text-sm text-gray-900",children:"Remember me"})]}),S.jsx("div",{className:"text-sm",children:S.jsx(va,{to:"/forgot-password",className:"font-medium text-indigo-600 hover:text-indigo-500",children:"Forgot your password?"})})]}),S.jsx("div",{children:S.jsx("button",{type:"submit",disabled:i,className:`flex w-full justify-center rounded-md border border-transparent bg-indigo-600 py-2 px-4 text-sm font-medium text-white shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 transition-colors duration-200 ${i?"opacity-70 cursor-not-allowed":""}`,children:i?S.jsxs(S.Fragment,{children:[S.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[S.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),S.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Signing in..."]}):"Sign in"})})]})})]})]})}),S.jsxs("div",{className:"relative hidden w-0 flex-1 lg:block",children:[S.jsx("div",{className:"absolute inset-0 h-full w-full bg-gradient-to-r from-indigo-600 to-purple-800"}),S.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center p-12",children:[S.jsx("h1",{className:"text-4xl font-bold text-white text-center mb-6",children:"Face Recognition Attendance System"}),S.jsx("p",{className:"text-white text-lg text-center max-w-md opacity-90",children:"A modern, secure way to track attendance using facial recognition technology"}),S.jsx("div",{className:"mt-8 flex items-center justify-center",children:S.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[S.jsxs("div",{className:"bg-white/20 backdrop-blur-sm p-6 rounded-lg shadow-lg",children:[S.jsx("h3",{className:"text-white font-semibold mb-2",children:"Facial Recognition"}),S.jsx("p",{className:"text-white/80 text-sm",children:"Advanced AI to verify identity"})]}),S.jsxs("div",{className:"bg-white/20 backdrop-blur-sm p-6 rounded-lg shadow-lg",children:[S.jsx("h3",{className:"text-white font-semibold mb-2",children:"Easy Check-in"}),S.jsx("p",{className:"text-white/80 text-sm",children:"Mark attendance with a simple scan"})]}),S.jsxs("div",{className:"bg-white/20 backdrop-blur-sm p-6 rounded-lg shadow-lg",children:[S.jsx("h3",{className:"text-white font-semibold mb-2",children:"Detailed Reports"}),S.jsx("p",{className:"text-white/80 text-sm",children:"Track and export attendance data"})]})]})})]})]})]})},jse=()=>{var x,b,w,C,N,k,I,R,$,O,F,M,_;const[t,e]=A.useState(null),[n,r]=A.useState([]),[s,o]=A.useState({present:0,absent:0,late:0,hoursWorked:0}),[i,a]=A.useState(!0),[l,c]=A.useState(!1),{currentUser:d}=La();A.useEffect(()=>{f()},[]);const f=async()=>{a(!0);try{const V=new Date,B=new Date(V.getFullYear(),V.getMonth(),1),q=use(V,30).toISOString().split("T")[0],j=V.toISOString().split("T")[0],G=await yt.get(`/api/attendance/me?startDate=${q}&endDate=${j}`);let Z=[];Array.isArray(G.data)?Z=G.data:G.data&&Array.isArray(G.data.records)&&(Z=G.data.records);const J=Z.find(ge=>lse(hg(ge.date)));e(J||null);const X=Z.sort((ge,ve)=>new Date(ve.date)-new Date(ge.date)).slice(0,5);r(X);const ee=Z.filter(ge=>ge.status==="present").length,ne=Z.filter(ge=>ge.status==="absent").length,oe=Z.filter(ge=>ge.status==="late").length,ye=Z.reduce((ge,ve)=>ge+(ve.hoursWorked||0),0);o({present:ee,absent:ne,late:oe,hoursWorked:parseFloat(ye.toFixed(1))})}catch(V){console.error("Error fetching attendance data:",V),Rt.error("Failed to load attendance data")}finally{a(!1)}},p=async()=>{c(!0),await f(),c(!1),Rt.success("Dashboard updated!")},g=V=>{if(!V)return"N/A";try{return _o(new Date(V),"hh:mm a")}catch{return"Invalid time"}};return S.jsxs("div",{className:"space-y-6",children:[S.jsxs("div",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 rounded-xl text-white p-6 shadow-lg",children:[S.jsxs("div",{className:"flex justify-between items-start",children:[S.jsxs("div",{children:[S.jsxs("h1",{className:"text-2xl md:text-3xl font-bold",children:["Welcome back, ",(x=d==null?void 0:d.name)==null?void 0:x.split(" ")[0],"!"]}),S.jsx("p",{className:"mt-2 text-indigo-100",children:new Date().toLocaleDateString(void 0,{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]}),S.jsx("button",{onClick:p,className:"p-2 bg-white/10 hover:bg-white/20 rounded-full transition-colors duration-200",disabled:l,children:S.jsx(Wc,{className:`h-5 w-5 text-white ${l?"animate-spin":""}`})})]}),S.jsxs("div",{className:"mt-6 flex flex-wrap gap-3",children:[S.jsxs(va,{to:"/mark-attendance",className:"flex items-center px-4 py-2 bg-white/20 hover:bg-white/30 rounded-lg transition-colors duration-200",children:[S.jsx(Ms,{className:"h-5 w-5 mr-2"}),"Mark Attendance"]}),S.jsxs(va,{to:"/history",className:"flex items-center px-4 py-2 bg-white/20 hover:bg-white/30 rounded-lg transition-colors duration-200",children:[S.jsx(m4,{className:"h-5 w-5 mr-2"}),"View History"]}),S.jsxs(va,{to:"/profile",className:"flex items-center px-4 py-2 bg-white/20 hover:bg-white/30 rounded-lg transition-colors duration-200",children:[S.jsx(IT,{className:"h-5 w-5 mr-2"}),"Profile"]})]})]}),S.jsxs("div",{className:"bg-white rounded-xl shadow overflow-hidden",children:[S.jsx("div",{className:"px-4 py-5 sm:px-6 border-b border-gray-200",children:S.jsxs("h2",{className:"text-lg font-medium text-gray-900 flex items-center",children:[S.jsx(zi,{className:"h-5 w-5 mr-2 text-indigo-600"}),"Today's Attendance Status"]})}),S.jsx("div",{className:"p-6",children:i?S.jsx("div",{className:"py-8 flex justify-center",children:S.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-t-2 border-b-2 border-indigo-600"})}):t?S.jsxs("div",{className:"space-y-6",children:[S.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4",children:[S.jsxs("div",{className:"flex items-center",children:[S.jsx("div",{className:`rounded-full p-2 mr-3 ${t.status==="present"?"bg-green-100 text-green-700":t.status==="late"?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"}`,children:t.status==="present"?S.jsx(Oo,{className:"h-6 w-6"}):t.status==="late"?S.jsx(Fo,{className:"h-6 w-6"}):S.jsx(cl,{className:"h-6 w-6"})}),S.jsxs("div",{children:[S.jsx("h3",{className:"text-lg font-medium text-gray-900",children:t.status==="present"?"Present":t.status==="late"?"Present (Late)":"Absent"}),S.jsx("p",{className:"text-sm text-gray-500",children:_o(hg(t.date),"EEEE, MMMM d, yyyy")})]})]}),t.hoursWorked>0&&S.jsxs("div",{className:"flex items-center px-4 py-2 bg-indigo-50 rounded-lg",children:[S.jsx(Fo,{className:"h-5 w-5 mr-2 text-indigo-600"}),S.jsxs("span",{className:"text-indigo-800 font-medium",children:[t.hoursWorked," hours worked"]})]})]}),S.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[S.jsxs("div",{className:`p-4 rounded-lg border ${(b=t.checkIn)!=null&&b.time?"bg-green-50 border-green-200":"bg-gray-50 border-gray-200"}`,children:[S.jsxs("div",{className:"flex items-center justify-between mb-2",children:[S.jsx("h3",{className:"font-medium text-gray-900",children:"Check In"}),((w=t.checkIn)==null?void 0:w.time)&&S.jsx("span",{className:`text-sm ${(C=t.checkIn)!=null&&C.verified?"text-green-600":"text-yellow-600"}`,children:(N=t.checkIn)!=null&&N.verified?"Verified":"Pending verification"})]}),(k=t.checkIn)!=null&&k.time?S.jsx("div",{className:"text-lg font-semibold",children:g(t.checkIn.time)}):S.jsx("div",{className:"text-gray-500",children:"Not checked in yet"})]}),S.jsxs("div",{className:`p-4 rounded-lg border ${(I=t.checkOut)!=null&&I.time?"bg-green-50 border-green-200":"bg-gray-50 border-gray-200"}`,children:[S.jsxs("div",{className:"flex items-center justify-between mb-2",children:[S.jsx("h3",{className:"font-medium text-gray-900",children:"Check Out"}),((R=t.checkOut)==null?void 0:R.time)&&S.jsx("span",{className:`text-sm ${($=t.checkOut)!=null&&$.verified?"text-green-600":"text-yellow-600"}`,children:(O=t.checkOut)!=null&&O.verified?"Verified":"Pending verification"})]}),(F=t.checkOut)!=null&&F.time?S.jsx("div",{className:"text-lg font-semibold",children:g(t.checkOut.time)}):S.jsx("div",{className:"text-gray-500",children:"Not checked out yet"})]})]}),S.jsx("div",{className:"flex justify-center",children:S.jsxs(va,{to:"/mark-attendance",className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:[S.jsx(Ms,{className:"h-5 w-5 mr-2"}),(M=t.checkIn)!=null&&M.time?(_=t.checkOut)!=null&&_.time?"View Attendance":"Check Out Now":"Check In Now"]})})]}):S.jsxs("div",{className:"text-center py-8",children:[S.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-indigo-100",children:S.jsx(Ms,{className:"h-6 w-6 text-indigo-600","aria-hidden":"true"})}),S.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No Attendance Today"}),S.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"You haven't marked your attendance for today."}),S.jsx("div",{className:"mt-6",children:S.jsxs(va,{to:"/mark-attendance",className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:[S.jsx(Ms,{className:"h-5 w-5 mr-2"}),"Check In Now"]})})]})})]}),S.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-5",children:[S.jsx("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:S.jsx("div",{className:"p-5",children:S.jsxs("div",{className:"flex items-center",children:[S.jsx("div",{className:"flex-shrink-0 bg-green-100 rounded-md p-3",children:S.jsx(Oo,{className:"h-6 w-6 text-green-600"})}),S.jsx("div",{className:"ml-5 w-0 flex-1",children:S.jsxs("dl",{children:[S.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Present Days"}),S.jsx("dd",{children:S.jsx("div",{className:"text-lg font-medium text-gray-900",children:s.present})})]})})]})})}),S.jsx("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:S.jsx("div",{className:"p-5",children:S.jsxs("div",{className:"flex items-center",children:[S.jsx("div",{className:"flex-shrink-0 bg-yellow-100 rounded-md p-3",children:S.jsx(Fo,{className:"h-6 w-6 text-yellow-600"})}),S.jsx("div",{className:"ml-5 w-0 flex-1",children:S.jsxs("dl",{children:[S.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Late Days"}),S.jsx("dd",{children:S.jsx("div",{className:"text-lg font-medium text-gray-900",children:s.late})})]})})]})})}),S.jsx("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:S.jsx("div",{className:"p-5",children:S.jsxs("div",{className:"flex items-center",children:[S.jsx("div",{className:"flex-shrink-0 bg-red-100 rounded-md p-3",children:S.jsx(cl,{className:"h-6 w-6 text-red-600"})}),S.jsx("div",{className:"ml-5 w-0 flex-1",children:S.jsxs("dl",{children:[S.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Absent Days"}),S.jsx("dd",{children:S.jsx("div",{className:"text-lg font-medium text-gray-900",children:s.absent})})]})})]})})}),S.jsx("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:S.jsx("div",{className:"p-5",children:S.jsxs("div",{className:"flex items-center",children:[S.jsx("div",{className:"flex-shrink-0 bg-indigo-100 rounded-md p-3",children:S.jsx(Nte,{className:"h-6 w-6 text-indigo-600"})}),S.jsx("div",{className:"ml-5 w-0 flex-1",children:S.jsxs("dl",{children:[S.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Hours Worked"}),S.jsx("dd",{children:S.jsxs("div",{className:"text-lg font-medium text-gray-900",children:[s.hoursWorked," hrs"]})})]})})]})})})]}),S.jsxs("div",{className:"bg-white shadow overflow-hidden sm:rounded-lg",children:[S.jsxs("div",{className:"px-4 py-5 sm:px-6 flex justify-between items-center",children:[S.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"Recent Attendance"}),S.jsxs(va,{to:"/history",className:"text-sm font-medium text-indigo-600 hover:text-indigo-500 flex items-center",children:["View all",S.jsx(Ate,{className:"ml-1 h-4 w-4"})]})]}),S.jsx("div",{className:"border-t border-gray-200",children:i?S.jsx("div",{className:"py-8 flex justify-center",children:S.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-t-2 border-b-2 border-indigo-600"})}):n.length>0?S.jsx("ul",{className:"divide-y divide-gray-200",children:n.map(V=>{var B,W;return S.jsx("li",{className:"px-4 py-4 sm:px-6 hover:bg-gray-50",children:S.jsxs("div",{className:"flex items-center justify-between",children:[S.jsxs("div",{className:"flex items-center",children:[S.jsx("div",{className:`rounded-full p-2 mr-3 ${V.status==="present"?"bg-green-100 text-green-700":V.status==="late"?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"}`,children:V.status==="present"?S.jsx(Oo,{className:"h-5 w-5"}):V.status==="late"?S.jsx(Fo,{className:"h-5 w-5"}):S.jsx(cl,{className:"h-5 w-5"})}),S.jsxs("div",{children:[S.jsx("p",{className:"text-sm font-medium text-gray-900",children:_o(hg(V.date),"EEEE, MMMM d")}),S.jsxs("p",{className:"text-sm text-gray-500",children:["Status: ",S.jsx("span",{className:"capitalize",children:V.status})]})]})]}),S.jsxs("div",{className:"text-right",children:[((B=V.checkIn)==null?void 0:B.time)&&S.jsxs("p",{className:"text-sm text-gray-500",children:["In: ",g(V.checkIn.time)]}),((W=V.checkOut)==null?void 0:W.time)&&S.jsxs("p",{className:"text-sm text-gray-500",children:["Out: ",g(V.checkOut.time)]}),V.hoursWorked>0&&S.jsxs("p",{className:"text-sm font-medium text-indigo-600",children:[V.hoursWorked," hrs"]})]})]})},V._id)})}):S.jsxs("div",{className:"text-center py-8",children:[S.jsx(m4,{className:"mx-auto h-10 w-10 text-gray-400"}),S.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No recent attendance records"}),S.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Your attendance history will appear here once you start marking attendance."})]})})]})]})};var sB={exports:{}};(function(t,e){(function(r,s){t.exports=s(A)})(Gn,function(n){return function(r){var s={};function o(i){if(s[i])return s[i].exports;var a=s[i]={i,l:!1,exports:{}};return r[i].call(a.exports,a,a.exports,o),a.l=!0,a.exports}return o.m=r,o.c=s,o.d=function(i,a,l){o.o(i,a)||Object.defineProperty(i,a,{enumerable:!0,get:l})},o.r=function(i){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(i,"__esModule",{value:!0})},o.t=function(i,a){if(a&1&&(i=o(i)),a&8||a&4&&typeof i=="object"&&i&&i.__esModule)return i;var l=Object.create(null);if(o.r(l),Object.defineProperty(l,"default",{enumerable:!0,value:i}),a&2&&typeof i!="string")for(var c in i)o.d(l,c,(function(d){return i[d]}).bind(null,c));return l},o.n=function(i){var a=i&&i.__esModule?function(){return i.default}:function(){return i};return o.d(a,"a",a),a},o.o=function(i,a){return Object.prototype.hasOwnProperty.call(i,a)},o.p="",o(o.s="./src/react-webcam.tsx")}({"./src/react-webcam.tsx":function(r,s,o){o.r(s);var i=o("react"),a=function(){var p=function(g,x){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,w){b.__proto__=w}||function(b,w){for(var C in w)w.hasOwnProperty(C)&&(b[C]=w[C])},p(g,x)};return function(g,x){p(g,x);function b(){this.constructor=g}g.prototype=x===null?Object.create(x):(b.prototype=x.prototype,new b)}}(),l=function(){return l=Object.assign||function(p){for(var g,x=1,b=arguments.length;x<b;x++){g=arguments[x];for(var w in g)Object.prototype.hasOwnProperty.call(g,w)&&(p[w]=g[w])}return p},l.apply(this,arguments)},c=function(p,g){var x={};for(var b in p)Object.prototype.hasOwnProperty.call(p,b)&&g.indexOf(b)<0&&(x[b]=p[b]);if(p!=null&&typeof Object.getOwnPropertySymbols=="function")for(var w=0,b=Object.getOwnPropertySymbols(p);w<b.length;w++)g.indexOf(b[w])<0&&Object.prototype.propertyIsEnumerable.call(p,b[w])&&(x[b[w]]=p[b[w]]);return x};(function(){typeof window>"u"||(navigator.mediaDevices===void 0&&(navigator.mediaDevices={}),navigator.mediaDevices.getUserMedia===void 0&&(navigator.mediaDevices.getUserMedia=function(g){var x=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;return x?new Promise(function(b,w){x.call(navigator,g,b,w)}):Promise.reject(new Error("getUserMedia is not implemented in this browser"))}))})();function d(){return!!(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia)}var f=function(p){a(g,p);function g(x){var b=p.call(this,x)||this;return b.canvas=null,b.ctx=null,b.requestUserMediaId=0,b.unmounted=!1,b.state={hasUserMedia:!1},b}return g.prototype.componentDidMount=function(){var x=this,b=x.state,w=x.props;if(this.unmounted=!1,!d()){w.onUserMediaError("getUserMedia not supported");return}b.hasUserMedia||this.requestUserMedia(),w.children&&typeof w.children!="function"&&console.warn("children must be a function")},g.prototype.componentDidUpdate=function(x){var b=this.props;if(!d()){b.onUserMediaError("getUserMedia not supported");return}var w=JSON.stringify(x.audioConstraints)!==JSON.stringify(b.audioConstraints),C=JSON.stringify(x.videoConstraints)!==JSON.stringify(b.videoConstraints),N=x.minScreenshotWidth!==b.minScreenshotWidth,k=x.minScreenshotHeight!==b.minScreenshotHeight;(C||N||k)&&(this.canvas=null,this.ctx=null),(w||C)&&(this.stopAndCleanup(),this.requestUserMedia())},g.prototype.componentWillUnmount=function(){this.unmounted=!0,this.stopAndCleanup()},g.stopMediaStream=function(x){x&&(x.getVideoTracks&&x.getAudioTracks?(x.getVideoTracks().map(function(b){x.removeTrack(b),b.stop()}),x.getAudioTracks().map(function(b){x.removeTrack(b),b.stop()})):x.stop())},g.prototype.stopAndCleanup=function(){var x=this.state;x.hasUserMedia&&(g.stopMediaStream(this.stream),x.src&&window.URL.revokeObjectURL(x.src))},g.prototype.getScreenshot=function(x){var b=this,w=b.state,C=b.props;if(!w.hasUserMedia)return null;var N=this.getCanvas(x);return N&&N.toDataURL(C.screenshotFormat,C.screenshotQuality)},g.prototype.getCanvas=function(x){var b=this,w=b.state,C=b.props;if(!this.video||!w.hasUserMedia||!this.video.videoHeight)return null;if(!this.ctx){var N=this.video.videoWidth,k=this.video.videoHeight;if(!this.props.forceScreenshotSourceSize){var I=N/k;N=C.minScreenshotWidth||this.video.clientWidth,k=N/I,C.minScreenshotHeight&&k<C.minScreenshotHeight&&(k=C.minScreenshotHeight,N=k*I)}this.canvas=document.createElement("canvas"),this.canvas.width=(x==null?void 0:x.width)||N,this.canvas.height=(x==null?void 0:x.height)||k,this.ctx=this.canvas.getContext("2d")}var R=this,$=R.ctx,O=R.canvas;return $&&O&&(O.width=(x==null?void 0:x.width)||O.width,O.height=(x==null?void 0:x.height)||O.height,C.mirrored&&($.translate(O.width,0),$.scale(-1,1)),$.imageSmoothingEnabled=C.imageSmoothing,$.drawImage(this.video,0,0,(x==null?void 0:x.width)||O.width,(x==null?void 0:x.height)||O.height),C.mirrored&&($.scale(-1,1),$.translate(-O.width,0))),O},g.prototype.requestUserMedia=function(){var x=this,b=this.props,w=function(k,I){var R={video:typeof I<"u"?I:!0};b.audio&&(R.audio=typeof k<"u"?k:!0),x.requestUserMediaId++;var $=x.requestUserMediaId;navigator.mediaDevices.getUserMedia(R).then(function(O){x.unmounted||$!==x.requestUserMediaId?g.stopMediaStream(O):x.handleUserMedia(null,O)}).catch(function(O){x.handleUserMedia(O)})};if("mediaDevices"in navigator)w(b.audioConstraints,b.videoConstraints);else{var C=function(k){return{optional:[{sourceId:k}]}},N=function(k){var I=k.deviceId;return typeof I=="string"?I:Array.isArray(I)&&I.length>0?I[0]:typeof I=="object"&&I.ideal?I.ideal:null};MediaStreamTrack.getSources(function(k){var I=null,R=null;k.forEach(function(F){F.kind==="audio"?I=F.id:F.kind==="video"&&(R=F.id)});var $=N(b.audioConstraints);$&&(I=$);var O=N(b.videoConstraints);O&&(R=O),w(C(I),C(R))})}},g.prototype.handleUserMedia=function(x,b){var w=this.props;if(x||!b){this.setState({hasUserMedia:!1}),w.onUserMediaError(x);return}this.stream=b;try{this.video&&(this.video.srcObject=b),this.setState({hasUserMedia:!0})}catch{this.setState({hasUserMedia:!0,src:window.URL.createObjectURL(b)})}w.onUserMedia(b)},g.prototype.render=function(){var x=this,b=this,w=b.state,C=b.props,N=C.audio;C.forceScreenshotSourceSize;var k=C.disablePictureInPicture;C.onUserMedia,C.onUserMediaError,C.screenshotFormat,C.screenshotQuality,C.minScreenshotWidth,C.minScreenshotHeight,C.audioConstraints,C.videoConstraints,C.imageSmoothing;var I=C.mirrored,R=C.style,$=R===void 0?{}:R,O=C.children,F=c(C,["audio","forceScreenshotSourceSize","disablePictureInPicture","onUserMedia","onUserMediaError","screenshotFormat","screenshotQuality","minScreenshotWidth","minScreenshotHeight","audioConstraints","videoConstraints","imageSmoothing","mirrored","style","children"]),M=I?l(l({},$),{transform:($.transform||"")+" scaleX(-1)"}):$,_={getScreenshot:this.getScreenshot.bind(this)};return i.createElement(i.Fragment,null,i.createElement("video",l({autoPlay:!0,disablePictureInPicture:k,src:w.src,muted:!N,playsInline:!0,ref:function(V){x.video=V},style:M},F)),O&&O(_))},g.defaultProps={audio:!1,disablePictureInPicture:!1,forceScreenshotSourceSize:!1,imageSmoothing:!0,mirrored:!1,onUserMedia:function(){},onUserMediaError:function(){},screenshotFormat:"image/webp",screenshotQuality:.92},g}(i.Component);s.default=f},react:function(r,s){r.exports=n}}).default})})(sB);var zse=sB.exports;const oB=mp(zse);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Vse=1e-7,Wse=1e-4;class iB{constructor(e,n){this.backend=e,this.dataMover=n,this.data=new WeakMap,this.dataIdsCount=0}get(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)}set(e,n){this.dataIdsCount++,this.data.set(e,n)}has(e){return this.data.has(e)}delete(e){return this.dataIdsCount--,this.data.delete(e)}numDataIds(){return this.dataIdsCount}}class PT{refCount(e){return Ro("refCount")}incRef(e){return Ro("incRef")}timerAvailable(){return!0}time(e){return Ro("time")}read(e){return Ro("read")}readSync(e){return Ro("readSync")}readToGPU(e,n){return Ro("readToGPU")}numDataIds(){return Ro("numDataIds")}disposeData(e,n){return Ro("disposeData")}write(e,n,r){return Ro("write")}move(e,n,r,s,o){return Ro("move")}createTensorFromGPUData(e,n,r){return Ro("createTensorFromGPUData")}memory(){return Ro("memory")}floatPrecision(){return Ro("floatPrecision")}epsilon(){return this.floatPrecision()===32?Vse:Wse}dispose(){return Ro("dispose")}}function Ro(t){throw new Error(`'${t}' not yet implemented or not found in the registry. This kernel may not be supported by the tfjs backend you have chosen`)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Use(t){let e=t.length,n=0;for(;e>0;)n=Math.random()*e|0,e--,Gf(t,e,n)}function Ld(t,e,n){return Math.max(t,Math.min(e,n))}function FT(t){return t%2===0?t:t+1}function Gf(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function Hse(t){let e=0;for(let n=0;n<t.length;n++)e+=t[n];return e}function Y(t,e){if(!t)throw new Error(typeof e=="string"?e:e())}function ti(t,e,n=""){Y(nn(t,e),()=>n+` Shapes ${t} and ${e} must match`)}function Ip(t){Y(t!=null,()=>"The input to the tensor constructor must be a non-null value.")}function Te(t){if(t.length===0)return 1;let e=t[0];for(let n=1;n<t.length;n++)e*=t[n];return e}function Gse(t,e){if(t===e)return!0;if(t==null||e==null||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==null&&e[n]!==null&&t[n]!==e[n])return!1;return!0}function nn(t,e){if(t===e)return!0;if(t==null||e==null||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function Gh(t){return t%1===0}function BE(t){const e=Math.ceil(Math.sqrt(t));return[e,Math.ceil(t/e)]}function Sh(t,e){return e<=t.length?t:t+" ".repeat(e-t.length)}function E4(t,e=s=>0,n,r){return new Promise((s,o)=>{let i=0;const a=()=>{if(t()){s();return}i++;const l=e(i);if(n!=null&&i>=n){o();return}r!=null?r(a,l):setTimeout(a,l)};a()})}function aB(t,e){let n=1,r=-1;for(let o=0;o<t.length;++o)if(t[o]>=0)n*=t[o];else if(t[o]===-1){if(r!==-1)throw Error(`Shapes can only have 1 implicit size. Found -1 at dim ${r} and dim ${o}`);r=o}else if(t[o]<0)throw Error(`Shapes can not be < 0. Found ${t[o]} at dim ${o}`);if(r===-1){if(e>0&&e!==n)throw Error(`Size(${e}) must match the product of shape ${t}`);return t}if(n===0)throw Error(`Cannot infer the missing size in [${t}] when there are 0 elements`);if(e%n!==0)throw Error(`The implicit shape can't be a fractional number. Got ${e} / ${n}`);const s=t.slice();return s[r]=e/n,s}function Zt(t,e){const n=e.length;return t=t==null?e.map((r,s)=>s):[].concat(t),Y(t.every(r=>r>=-n&&r<n),()=>`All values in axis param must be in range [-${n}, ${n}) but got axis ${t}`),Y(t.every(r=>Gh(r)),()=>`All values in axis param must be integers but got axis ${t}`),t.map(r=>r<0?n+r:r)}function Tu(t,e){const n=[],r=[],s=e!=null&&Array.isArray(e)&&e.length===0,o=e==null||s?null:Zt(e,t).sort();let i=0;for(let a=0;a<t.length;++a){if(o!=null){if(o[i]===a&&t[a]!==1)throw new Error(`Can't squeeze axis ${a} since its dim '${t[a]}' is not 1`);(o[i]==null||o[i]>a)&&t[a]===1&&(n.push(t[a]),r.push(a)),o[i]<=a&&i++}t[a]!==1&&(n.push(t[a]),r.push(a))}return{newShape:n,keptDims:r}}function Ss(t,e){return Ar(t,e)}function Ar(t,e){let n=null;if(t==null||t==="float32")n=new Float32Array(e);else if(t==="int32")n=new Int32Array(e);else if(t==="bool")n=new Uint8Array(e);else if(t==="string")n=new Array(e);else throw new Error(`Unknown data type ${t}`);return n}function qse(t,e){for(let n=0;n<t.length;n++){const r=t[n];if(isNaN(r)||!isFinite(r))throw Error(`A tensor of type ${e} being uploaded contains ${r}.`)}}function Xse(t){return t==="bool"||t==="complex64"||t==="float32"||t==="int32"||t==="string"}function lB(t,e){return!(e==="complex64"||e==="float32"&&t!=="complex64"||e==="int32"&&t!=="float32"&&t!=="complex64"||e==="bool"&&t==="bool")}function Ab(t){if(t==="float32"||t==="int32")return 4;if(t==="complex64")return 8;if(t==="bool")return 1;throw new Error(`Unknown dtype ${t}`)}function Kse(t){if(t==null)return 0;let e=0;return t.forEach(n=>e+=n.length),e}function T0(t){return typeof t=="string"||t instanceof String}function Yse(t){return typeof t=="boolean"}function jE(t){return typeof t=="number"}function kp(t){return Array.isArray(t)?kp(t[0]):t instanceof Float32Array?"float32":t instanceof Int32Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray?"int32":jE(t)?"float32":T0(t)?"string":Yse(t)?"bool":"float32"}function zE(t){return!!(t&&t.constructor&&t.call&&t.apply)}function VE(t,e){for(let n=e;n<t;++n)if(t%n===0)return n;return t}function Et(t){const e=t.length;if(e<2)return[];const n=new Array(e-1);n[e-2]=t[e-1];for(let r=e-3;r>=0;--r)n[r]=n[r+1]*t[r+1];return n}function cB(t,e,n,r=!1){const s=new Array;if(e.length===1){const o=e[0]*(r?2:1);for(let i=0;i<o;i++)s[i]=n[t+i]}else{const o=e[0],i=e.slice(1),a=i.reduce((l,c)=>l*c)*(r?2:1);for(let l=0;l<o;l++)s[l]=cB(t+l*a,i,n,r)}return s}function Yi(t,e,n=!1){if(t.length===0)return e[0];const r=t.reduce((s,o)=>s*o)*(n?2:1);if(r===0)return[];if(r!==e.length)throw new Error(`[${t}] does not match the input size ${e.length}${n?" for a complex tensor":""}.`);return cB(0,t,e,n)}function Zse(t,e){if(Array.isArray(t))return t;if(e==="float32")return t instanceof Float32Array?t:new Float32Array(t);if(e==="int32")return t instanceof Int32Array?t:new Int32Array(t);if(e==="bool"||e==="string")return Uint8Array.from(new Int32Array(t));throw new Error(`Unknown dtype ${e}`)}function MT(t,e){const n=Vs(t,e);for(let r=0;r<n.length;r++)n[r]=1;return n}function Vs(t,e){if(e==null||e==="float32"||e==="complex64")return new Float32Array(t);if(e==="int32")return new Int32Array(t);if(e==="bool")return new Uint8Array(t);throw new Error(`Unknown data type ${e}`)}function uB(t,e){const n=t.reduce((r,s)=>r*s,1);if(e==null||e==="float32")return Yi(t,new Float32Array(n));if(e==="int32")return Yi(t,new Int32Array(n));if(e==="bool")return Yi(t,new Uint8Array(n));throw new Error(`Unknown data type ${e}`)}function Ci(t){t.forEach(e=>{Y(Number.isInteger(e)&&e>=0,()=>`Tensor must have a shape comprised of positive integers but got shape [${t}].`)})}function gl(t,e,n){if(e===0)return 0;if(e===1)return t[0];let r=t[t.length-1];for(let s=0;s<t.length-1;++s)r+=n[s]*t[s];return r}function Tp(t,e,n){if(e===0)return[];if(e===1)return[t];const r=new Array(e);for(let s=0;s<r.length-1;++s)r[s]=Math.floor(t/n[s]),t-=r[s]*n[s];return r[r.length-1]=t,r}function Bd(t){return t&&t.then&&typeof t.then=="function"}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const I4="tfjsflags";class Qse{constructor(e){this.global=e,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=Jse,this.populateURLFlags()}setPlatform(e,n){this.platform!=null&&(Ee().getBool("IS_TEST")||Ee().getBool("PROD")||console.warn(`Platform ${this.platformName} has already been set. Overwriting the platform with ${e}.`)),this.platformName=e,this.platform=n}registerFlag(e,n,r){if(this.flagRegistry[e]={evaluationFn:n,setHook:r},this.urlFlags[e]!=null){const s=this.urlFlags[e];Ee().getBool("IS_TEST")||Ee().getBool("PROD")||console.warn(`Setting feature override from URL ${e}: ${s}.`),this.set(e,s)}}async getAsync(e){return e in this.flags?this.flags[e]:(this.flags[e]=await this.evaluateFlag(e),this.flags[e])}get(e){if(e in this.flags)return this.flags[e];const n=this.evaluateFlag(e);if(Bd(n))throw new Error(`Flag ${e} cannot be synchronously evaluated. Please use getAsync() instead.`);return this.flags[e]=n,this.flags[e]}getNumber(e){return this.get(e)}getBool(e){return this.get(e)}getString(e){return this.get(e)}getFlags(){return this.flags}get features(){return this.flags}set(e,n){if(this.flagRegistry[e]==null)throw new Error(`Cannot set flag ${e} as it has not been registered.`);this.flags[e]=n,this.flagRegistry[e].setHook!=null&&this.flagRegistry[e].setHook(n)}evaluateFlag(e){if(this.flagRegistry[e]==null)throw new Error(`Cannot evaluate flag '${e}': no evaluation function found.`);return this.flagRegistry[e].evaluationFn()}setFlags(e){this.flags=Object.assign({},e)}reset(){this.flags={},this.urlFlags={},this.populateURLFlags()}populateURLFlags(){if(typeof this.global>"u"||typeof this.global.location>"u"||typeof this.global.location.search>"u")return;const e=this.getQueryParams(this.global.location.search);I4 in e&&e[I4].split(",").forEach(r=>{const[s,o]=r.split(":");this.urlFlags[s]=toe(s,o)})}}function Jse(t){const e={};return t.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(n,...r)=>(eoe(e,r[0],r[1]),r.join("="))),e}function eoe(t,e,n){t[decodeURIComponent(e)]=decodeURIComponent(n||"")}function toe(t,e){const n=e.toLowerCase();return n==="true"||n==="false"?n==="true":`${+n}`===n?+n:e}function Ee(){return dB}let dB=null;function noe(t){dB=t}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let YS;function fB(){if(YS==null){let t;if(typeof window<"u")t=window;else if(typeof global<"u")t=global;else if(typeof process<"u")t=process;else if(typeof self<"u")t=self;else throw new Error("Could not find a global object");YS=t}return YS}function roe(){const t=fB();return t._tfGlobals==null&&(t._tfGlobals=new Map),t._tfGlobals}function LT(t,e){const n=roe();if(n.has(t))return n.get(t);{const r=e();return n.set(t,r),n.get(t)}}const tv="Abs",A0="Acos",R0="Acosh",Ap="Add",nv="AddN",BT="All",jT="Any",rv="ArgMax",sv="ArgMin",D0="Asin",$0="Asinh",O0="Atan",_0="Atanh",P0="Atan2",ov="AvgPool",zT="AvgPoolGrad",iv="AvgPool3D",VT="AvgPool3DGrad",av="BatchMatMul",lv="BatchToSpaceND",WT="Bincount",cv="BitwiseAnd",soe="BroadcastTo",UT="BroadcastArgs",F0="Cast",M0="Ceil",L0="ClipByValue",HT="Complex",uv="ComplexAbs",dv="Concat",fv="Conv2D",GT="Conv2DBackpropFilter",hv="Conv2DBackpropInput",pv="Conv3D",qT="Conv3DBackpropFilterV2",XT="Conv3DBackpropInputV2",B0="Cos",j0="Cosh",KT="Cumprod",mv="Cumsum",YT="CropAndResize",ZT="DenseBincount",QT="DepthToSpace",gv="DepthwiseConv2dNative",JT="DepthwiseConv2dNativeBackpropFilter",eA="DepthwiseConv2dNativeBackpropInput",tA="Diag",xv="Dilation2D",WE="Dilation2DBackpropInput",UE="Dilation2DBackpropFilter",ooe="Draw",z0="RealDiv",nA="Einsum",V0="Elu",rA="EluGrad",W0="Erf",yv="Equal",U0="Exp",bv="ExpandDims",H0="Expm1",sA="FFT",oA="Fill",iA="FlipLeftRight",G0="Floor",q0="FloorDiv",wv="FusedBatchNorm",vv="GatherV2",aA="GatherNd",Cv="Greater",X0="GreaterEqual",K0="Identity",lA="IFFT",cA="Imag",Y0="IsFinite",Z0="IsInf",Q0="IsNan",Sv="LeakyRelu",Nv="Less",Ev="LessEqual",uA="LinSpace",J0="Log",e1="Log1p",Iv="LogicalAnd",kv="LogicalNot",Tv="LogicalOr",ioe="LogSoftmax",Av="LRN",dA="LRNGrad",Rv="Max",t1="Maximum",Dv="MaxPool",fA="MaxPoolGrad",$v="MaxPool3D",hA="MaxPool3DGrad",pA="MaxPoolWithArgmax",Ov="Mean",_v="Min",n1="Minimum",Pv="MirrorPad",r1="Mod",mA="Multinomial",s1="Multiply",Fv="Neg",Mv="NotEqual",gA="NonMaxSuppressionV3",xA="NonMaxSuppressionV4",yA="NonMaxSuppressionV5",Lv="OnesLike",Bv="OneHot",jv="Pack",zv="PadV2",o1="Pow",Vv="Prelu",Wv="Prod",bA="RaggedGather",wA="RaggedRange",vA="RaggedTensorToTensor",CA="Range",SA="Real",i1="Reciprocal",a1="Relu",Uv="Reshape",Hv="ResizeNearestNeighbor",NA="ResizeNearestNeighborGrad",Gv="ResizeBilinear",EA="ResizeBilinearGrad",l1="Relu6",qv="Reverse",c1="Round",u1="Rsqrt",IA="ScatterNd",kA="TensorScatterUpdate",TA="SearchSorted",Xv="Select",d1="Selu",Kv="Slice",f1="Sin",h1="Sinh",p1="Sign",m1="Sigmoid",g1="Softplus",x1="Sqrt",Yv="Sum",Zv="SpaceToBatchND",Qv="SplitV",Jv="Softmax",AA="SparseFillEmptyRows",RA="SparseReshape",DA="SparseSegmentMean",$A="SparseSegmentSum",OA="SparseToDense",y1="SquaredDifference",_A="Square",e2="StaticRegexReplace",PA="StridedSlice",FA="StringNGrams",MA="StringSplit",LA="StringToHashBucketFast",b1="Sub",w1="Tan",v1="Tanh",C1="Tile",BA="TopK",jA="Transform",Nh="Transpose",zA="Unique",t2="Unpack",n2="UnsortedSegmentSum",r2="ZerosLike",S1="Step",HE="FromPixels",VA="RotateWithOffset",Rb="_FusedMatMul",Db="FusedConv2D",$b="FusedDepthwiseConv2D";/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ci(...t){Ee().getBool("IS_TEST")||Ee().getBool("PROD")||console.warn(...t)}function aoe(...t){Ee().getBool("IS_TEST")||Ee().getBool("PROD")||console.log(...t)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ob=LT("kernelRegistry",()=>new Map),GE=LT("gradRegistry",()=>new Map);function qE(t,e){const n=pB(t,e);return Ob.get(n)}function k4(t){return GE.get(t)}function T4(t){const e=Ob.entries(),n=[];for(;;){const{done:r,value:s}=e.next();if(r)break;const[o,i]=s,[a]=o.split("_");a===t&&n.push(i)}return n}function hB(t){const{kernelName:e,backendName:n}=t,r=pB(e,n);Ob.has(r)&&ci(`The kernel '${e}' for backend '${n}' is already registered`),Ob.set(r,t)}function loe(t){const{kernelName:e}=t;GE.has(e)&&Ee().getBool("DEBUG")&&ci(`Overriding the gradient for '${e}'`),GE.set(e,t)}function pB(t,e){return`${e}_${t}`}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mB(t){return t instanceof Float32Array||t instanceof Int32Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray}var gB=Zn,Vi=null;try{Vi=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function Zn(t,e,n){this.low=t|0,this.high=e|0,this.unsigned=!!n}Zn.prototype.__isLong__;Object.defineProperty(Zn.prototype,"__isLong__",{value:!0});function ni(t){return(t&&t.__isLong__)===!0}Zn.isLong=ni;var A4={},R4={};function uf(t,e){var n,r,s;return e?(t>>>=0,(s=0<=t&&t<256)&&(r=R4[t],r)?r:(n=Qn(t,(t|0)<0?-1:0,!0),s&&(R4[t]=n),n)):(t|=0,(s=-128<=t&&t<128)&&(r=A4[t],r)?r:(n=Qn(t,t<0?-1:0,!1),s&&(A4[t]=n),n))}Zn.fromInt=uf;function Wi(t,e){if(isNaN(t))return e?bd:Ui;if(e){if(t<0)return bd;if(t>=xB)return wB}else{if(t<=-9223372036854776e3)return Bo;if(t+1>=uoe)return bB}return t<0?Wi(-t,e).neg():Qn(t%qh|0,t/qh|0,e)}Zn.fromNumber=Wi;function Qn(t,e,n){return new Zn(t,e,n)}Zn.fromBits=Qn;var _b=Math.pow;function WA(t,e,n){if(t.length===0)throw Error("empty string");if(t==="NaN"||t==="Infinity"||t==="+Infinity"||t==="-Infinity")return Ui;if(typeof e=="number"?(n=e,e=!1):e=!!e,n=n||10,n<2||36<n)throw RangeError("radix");var r;if((r=t.indexOf("-"))>0)throw Error("interior hyphen");if(r===0)return WA(t.substring(1),e,n).neg();for(var s=Wi(_b(n,8)),o=Ui,i=0;i<t.length;i+=8){var a=Math.min(8,t.length-i),l=parseInt(t.substring(i,i+a),n);if(a<8){var c=Wi(_b(n,a));o=o.mul(c).add(Wi(l))}else o=o.mul(s),o=o.add(Wi(l))}return o.unsigned=e,o}Zn.fromString=WA;function ja(t,e){return typeof t=="number"?Wi(t,e):typeof t=="string"?WA(t,e):Qn(t.low,t.high,typeof e=="boolean"?e:t.unsigned)}Zn.fromValue=ja;var D4=65536,coe=1<<24,qh=D4*D4,xB=qh*qh,uoe=xB/2,$4=uf(coe),Ui=uf(0);Zn.ZERO=Ui;var bd=uf(0,!0);Zn.UZERO=bd;var dh=uf(1);Zn.ONE=dh;var yB=uf(1,!0);Zn.UONE=yB;var XE=uf(-1);Zn.NEG_ONE=XE;var bB=Qn(-1,2147483647,!1);Zn.MAX_VALUE=bB;var wB=Qn(-1,-1,!0);Zn.MAX_UNSIGNED_VALUE=wB;var Bo=Qn(0,-2147483648,!1);Zn.MIN_VALUE=Bo;var rt=Zn.prototype;rt.toInt=function(){return this.unsigned?this.low>>>0:this.low};rt.toNumber=function(){return this.unsigned?(this.high>>>0)*qh+(this.low>>>0):this.high*qh+(this.low>>>0)};rt.toString=function(e){if(e=e||10,e<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(Bo)){var n=Wi(e),r=this.div(n),s=r.mul(n).sub(this);return r.toString(e)+s.toInt().toString(e)}else return"-"+this.neg().toString(e);for(var o=Wi(_b(e,6),this.unsigned),i=this,a="";;){var l=i.div(o),c=i.sub(l.mul(o)).toInt()>>>0,d=c.toString(e);if(i=l,i.isZero())return d+a;for(;d.length<6;)d="0"+d;a=""+d+a}};rt.getHighBits=function(){return this.high};rt.getHighBitsUnsigned=function(){return this.high>>>0};rt.getLowBits=function(){return this.low};rt.getLowBitsUnsigned=function(){return this.low>>>0};rt.getNumBitsAbs=function(){if(this.isNegative())return this.eq(Bo)?64:this.neg().getNumBitsAbs();for(var e=this.high!=0?this.high:this.low,n=31;n>0&&!(e&1<<n);n--);return this.high!=0?n+33:n+1};rt.isZero=function(){return this.high===0&&this.low===0};rt.eqz=rt.isZero;rt.isNegative=function(){return!this.unsigned&&this.high<0};rt.isPositive=function(){return this.unsigned||this.high>=0};rt.isOdd=function(){return(this.low&1)===1};rt.isEven=function(){return(this.low&1)===0};rt.equals=function(e){return ni(e)||(e=ja(e)),this.unsigned!==e.unsigned&&this.high>>>31===1&&e.high>>>31===1?!1:this.high===e.high&&this.low===e.low};rt.eq=rt.equals;rt.notEquals=function(e){return!this.eq(e)};rt.neq=rt.notEquals;rt.ne=rt.notEquals;rt.lessThan=function(e){return this.comp(e)<0};rt.lt=rt.lessThan;rt.lessThanOrEqual=function(e){return this.comp(e)<=0};rt.lte=rt.lessThanOrEqual;rt.le=rt.lessThanOrEqual;rt.greaterThan=function(e){return this.comp(e)>0};rt.gt=rt.greaterThan;rt.greaterThanOrEqual=function(e){return this.comp(e)>=0};rt.gte=rt.greaterThanOrEqual;rt.ge=rt.greaterThanOrEqual;rt.compare=function(e){if(ni(e)||(e=ja(e)),this.eq(e))return 0;var n=this.isNegative(),r=e.isNegative();return n&&!r?-1:!n&&r?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1};rt.comp=rt.compare;rt.negate=function(){return!this.unsigned&&this.eq(Bo)?Bo:this.not().add(dh)};rt.neg=rt.negate;rt.add=function(e){ni(e)||(e=ja(e));var n=this.high>>>16,r=this.high&65535,s=this.low>>>16,o=this.low&65535,i=e.high>>>16,a=e.high&65535,l=e.low>>>16,c=e.low&65535,d=0,f=0,p=0,g=0;return g+=o+c,p+=g>>>16,g&=65535,p+=s+l,f+=p>>>16,p&=65535,f+=r+a,d+=f>>>16,f&=65535,d+=n+i,d&=65535,Qn(p<<16|g,d<<16|f,this.unsigned)};rt.subtract=function(e){return ni(e)||(e=ja(e)),this.add(e.neg())};rt.sub=rt.subtract;rt.multiply=function(e){if(this.isZero())return Ui;if(ni(e)||(e=ja(e)),Vi){var n=Vi.mul(this.low,this.high,e.low,e.high);return Qn(n,Vi.get_high(),this.unsigned)}if(e.isZero())return Ui;if(this.eq(Bo))return e.isOdd()?Bo:Ui;if(e.eq(Bo))return this.isOdd()?Bo:Ui;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt($4)&&e.lt($4))return Wi(this.toNumber()*e.toNumber(),this.unsigned);var r=this.high>>>16,s=this.high&65535,o=this.low>>>16,i=this.low&65535,a=e.high>>>16,l=e.high&65535,c=e.low>>>16,d=e.low&65535,f=0,p=0,g=0,x=0;return x+=i*d,g+=x>>>16,x&=65535,g+=o*d,p+=g>>>16,g&=65535,g+=i*c,p+=g>>>16,g&=65535,p+=s*d,f+=p>>>16,p&=65535,p+=o*c,f+=p>>>16,p&=65535,p+=i*l,f+=p>>>16,p&=65535,f+=r*d+s*c+o*l+i*a,f&=65535,Qn(g<<16|x,f<<16|p,this.unsigned)};rt.mul=rt.multiply;rt.divide=function(e){if(ni(e)||(e=ja(e)),e.isZero())throw Error("division by zero");if(Vi){if(!this.unsigned&&this.high===-2147483648&&e.low===-1&&e.high===-1)return this;var n=(this.unsigned?Vi.div_u:Vi.div_s)(this.low,this.high,e.low,e.high);return Qn(n,Vi.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?bd:Ui;var r,s,o;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return bd;if(e.gt(this.shru(1)))return yB;o=bd}else{if(this.eq(Bo)){if(e.eq(dh)||e.eq(XE))return Bo;if(e.eq(Bo))return dh;var i=this.shr(1);return r=i.div(e).shl(1),r.eq(Ui)?e.isNegative()?dh:XE:(s=this.sub(e.mul(r)),o=r.add(s.div(e)),o)}else if(e.eq(Bo))return this.unsigned?bd:Ui;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();o=Ui}for(s=this;s.gte(e);){r=Math.max(1,Math.floor(s.toNumber()/e.toNumber()));for(var a=Math.ceil(Math.log(r)/Math.LN2),l=a<=48?1:_b(2,a-48),c=Wi(r),d=c.mul(e);d.isNegative()||d.gt(s);)r-=l,c=Wi(r,this.unsigned),d=c.mul(e);c.isZero()&&(c=dh),o=o.add(c),s=s.sub(d)}return o};rt.div=rt.divide;rt.modulo=function(e){if(ni(e)||(e=ja(e)),Vi){var n=(this.unsigned?Vi.rem_u:Vi.rem_s)(this.low,this.high,e.low,e.high);return Qn(n,Vi.get_high(),this.unsigned)}return this.sub(this.div(e).mul(e))};rt.mod=rt.modulo;rt.rem=rt.modulo;rt.not=function(){return Qn(~this.low,~this.high,this.unsigned)};rt.and=function(e){return ni(e)||(e=ja(e)),Qn(this.low&e.low,this.high&e.high,this.unsigned)};rt.or=function(e){return ni(e)||(e=ja(e)),Qn(this.low|e.low,this.high|e.high,this.unsigned)};rt.xor=function(e){return ni(e)||(e=ja(e)),Qn(this.low^e.low,this.high^e.high,this.unsigned)};rt.shiftLeft=function(e){return ni(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?Qn(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):Qn(0,this.low<<e-32,this.unsigned)};rt.shl=rt.shiftLeft;rt.shiftRight=function(e){return ni(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?Qn(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):Qn(this.high>>e-32,this.high>=0?0:-1,this.unsigned)};rt.shr=rt.shiftRight;rt.shiftRightUnsigned=function(e){if(ni(e)&&(e=e.toInt()),e&=63,e===0)return this;var n=this.high;if(e<32){var r=this.low;return Qn(r>>>e|n<<32-e,n>>>e,this.unsigned)}else return e===32?Qn(n,0,this.unsigned):Qn(n>>>e-32,0,this.unsigned)};rt.shru=rt.shiftRightUnsigned;rt.shr_u=rt.shiftRightUnsigned;rt.toSigned=function(){return this.unsigned?Qn(this.low,this.high,!1):this};rt.toUnsigned=function(){return this.unsigned?this:Qn(this.low,this.high,!0)};rt.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()};rt.toBytesLE=function(){var e=this.high,n=this.low;return[n&255,n>>>8&255,n>>>16&255,n>>>24,e&255,e>>>8&255,e>>>16&255,e>>>24]};rt.toBytesBE=function(){var e=this.high,n=this.low;return[e>>>24,e>>>16&255,e>>>8&255,e&255,n>>>24,n>>>16&255,n>>>8&255,n&255]};Zn.fromBytes=function(e,n,r){return r?Zn.fromBytesLE(e,n):Zn.fromBytesBE(e,n)};Zn.fromBytesLE=function(e,n){return new Zn(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,n)};Zn.fromBytesBE=function(e,n){return new Zn(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],n)};const vB=mp(gB),doe=gk({__proto__:null,default:vB},[gB]);/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cd=vB||doe;function s2(t){return cd.fromString(t,!0,16)}const CB=s2("c3a5c85c97cb3127"),id=s2("b492b66fbe98f273"),eo=s2("9ae16a3b2f90404f");function KE(t){return t.xor(t.shru(47))}function SB(t,e,n){const r=t.slice(e,e+n);return cd.fromBytes(Array.from(r),!0,!0)}function Un(t,e){return SB(t,e,8)}function O4(t,e){return SB(t,e,4)}function is(t,e){return e===0?t:t.shru(e).or(t.shl(64-e))}function ru(t,e,n=s2("9ddfea08eb382d69")){let r=t.xor(e).mul(n);r=r.xor(r.shru(47));let s=e.xor(r).mul(n);return s=s.xor(s.shru(47)),s=s.mul(n),s}function foe(t,e,n,r,s,o){s=s.add(t),o=is(o.add(s).add(r),21);const i=s;return s=s.add(e),s=s.add(n),o=o.add(is(s,44)),[s.add(r),o.add(i)]}function Wx(t,e,n,r){return foe(Un(t,e),Un(t,e+8),Un(t,e+16),Un(t,e+24),n,r)}function hoe(t,e=t.length){if(e>=8){const n=eo.add(e*2),r=Un(t,0).add(eo),s=Un(t,e-8),o=is(s,37).mul(n).add(r),i=is(r,25).add(s).mul(n);return ru(o,i,n)}if(e>=4){const n=eo.add(e*2),r=O4(t,0);return ru(r.shl(3).add(e),O4(t,e-4),n)}if(e>0){const n=t[0],r=t[e>>1],s=t[e-1],o=n+(r<<8),i=e+(s<<2);return KE(eo.mul(o).xor(CB.mul(i))).mul(eo)}return eo}function poe(t,e=t.length){const n=eo.add(e*2),r=Un(t,0).mul(id),s=Un(t,8),o=Un(t,e-8).mul(n),i=Un(t,e-16).mul(eo);return ru(is(r.add(s),43).add(is(o,30)).add(i),r.add(is(s.add(eo),18)).add(o),n)}function moe(t,e=t.length){const n=eo.add(e*2),r=Un(t,0).mul(eo),s=Un(t,8),o=Un(t,e-8).mul(n),i=Un(t,e-16).mul(eo),a=is(r.add(s),43).add(is(o,30)).add(i),l=ru(a,r.add(is(s.add(eo),18)).add(o),n),c=Un(t,16).mul(n),d=Un(t,24),f=a.add(Un(t,e-32)).mul(n),p=l.add(Un(t,e-24)).mul(n);return ru(is(c.add(d),43).add(is(f,30)).add(p),c.add(is(d.add(r),18)).add(f),n)}function goe(t,e=t.length){const n=cd.fromNumber(81,!0);if(e<=32)return e<=16?hoe(t,e):poe(t,e);if(e<=64)return moe(t,e);let r=n,s=n.mul(id).add(113),o=KE(s.mul(eo).add(113)).mul(eo),i=[cd.UZERO,cd.UZERO],a=[cd.UZERO,cd.UZERO];r=r.mul(eo).add(Un(t,0));let l=0;const c=(e-1>>6)*64,d=c+(e-1&63)-63;do r=is(r.add(s).add(i[0]).add(Un(t,l+8)),37).mul(id),s=is(s.add(i[1]).add(Un(t,l+48)),42).mul(id),r=r.xor(a[1]),s=s.add(i[0]).add(Un(t,l+40)),o=is(o.add(a[0]),33).mul(id),i=Wx(t,l,i[1].mul(id),r.add(a[0])),a=Wx(t,l+32,o.add(a[1]),s.add(Un(t,l+16))),[o,r]=[r,o],l+=64;while(l!==c);const f=id.add(o.and(255).shl(1));return l=d,a[0]=a[0].add(e-1&63),i[0]=i[0].add(a[0]),a[0]=a[0].add(i[0]),r=is(r.add(s).add(i[0]).add(Un(t,l+8)),37).mul(f),s=is(s.add(i[1]).add(Un(t,l+48)),42).mul(f),r=r.xor(a[1].mul(9)),s=s.add(i[0].mul(9).add(Un(t,l+40))),o=is(o.add(a[0]),33).mul(f),i=Wx(t,l,i[1].mul(f),r.add(a[0])),a=Wx(t,l+32,o.add(a[1]),s.add(Un(t,l+16))),[o,r]=[r,o],ru(ru(i[0],a[0],f).add(KE(s).mul(CB)).add(o),ru(i[1],a[1],f).add(r),f)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Au(t,e){return e==="string"?su(t):df([t],e)}function xoe(t,e){return t instanceof Float32Array&&e==="float32"||t instanceof Int32Array&&e==="int32"||t instanceof Uint8Array&&e==="bool"}function df(t,e){if(e==="string")throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(t)&&(t=jd(t)),Ee().getBool("DEBUG")&&qse(t,e),xoe(t,e))return t;if(e==null||e==="float32"||e==="complex64")return new Float32Array(t);if(e==="int32")return new Int32Array(t);if(e==="bool"){const n=new Uint8Array(t.length);for(let r=0;r<n.length;++r)Math.round(t[r])!==0&&(n[r]=1);return n}else throw new Error(`Unknown data type ${e}`)}function po(){return Ee().platform.now()}function su(t,e="utf-8"){return e=e||"utf-8",Ee().platform.encode(t,e)}function du(t,e="utf-8"){return e=e||"utf-8",Ee().platform.decode(t,e)}function ta(t){return Ee().platform.isTypedArray!=null?Ee().platform.isTypedArray(t):mB(t)}function jd(t,e=[],n=!1){if(e==null&&(e=[]),typeof t=="boolean"||typeof t=="number"||typeof t=="string"||Bd(t)||t==null||ta(t)&&n)e.push(t);else if(Array.isArray(t)||ta(t))for(let r=0;r<t.length;++r)jd(t[r],e,n);else{let r=-1;for(const s of Object.keys(t))/^([1-9]+[0-9]*|0)$/.test(s)&&(r=Math.max(r,Number(s)));for(let s=0;s<=r;s++)jd(t[s],e,n)}return e}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class yoe{constructor(e,n){this.backendTimer=e,this.logger=n,n==null&&(this.logger=new woe)}profileKernel(e,n,r){let s;const o=()=>{s=r()};let i;const a=po();if(this.backendTimer.timerAvailable())i=this.backendTimer.time(o);else{o();for(const c of s)c.dataSync();i=Promise.resolve({kernelMs:po()-a})}if(Ee().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(let c=0;c<s.length;c++){const d=s[c];d.data().then(f=>{boe(f,d.dtype,e)})}return{kernelName:e,outputs:s,inputs:n,timeMs:i.then(c=>c.kernelMs),extraInfo:i.then(c=>c.getExtraProfileInfo!=null?c.getExtraProfileInfo():"")}}logKernelProfile(e){const{kernelName:n,outputs:r,timeMs:s,inputs:o,extraInfo:i}=e;r.forEach(a=>{Promise.all([a.data(),s,i]).then(l=>{this.logger.logKernelProfile(n,a,l[0],l[1],o,l[2])})})}}function boe(t,e,n){if(e!=="float32")return!1;for(let r=0;r<t.length;r++){const s=t[r];if(isNaN(s)||!isFinite(s))return console.warn(`Found ${s} in the result of '${n}'`),!0}return!1}class woe{logKernelProfile(e,n,r,s,o,i){const a=typeof s=="number"?Sh(`${s}ms`,9):s.error,l=Sh(e,25),c=n.rank,d=n.size,f=Sh(n.shape.toString(),14);let p="";for(const g in o){const x=o[g];if(x!=null){const b=x.shape||n.shape,w=b.length;p+=`${g}: ${w}D ${w>0?b:""} `}}console.log(`%c${l}	%c${a}	%c${c}D ${f}	%c${d}	%c${p}	%c${i}`,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function voe(t,e,n){const r={},s={};for(let l=0;l<e.length;l++)r[e[l].id]=!0;for(let l=0;l<t.length;l++){const c=t[l],d=c.inputs;for(const f in d){const p=d[f];let g=!1;for(let x=0;x<e.length;x++)if(r[p.id]){c.outputs.forEach(b=>r[b.id]=!0),g=!0,s[c.id]=!0;break}if(g)break}}const o={};o[n.id]=!0;const i={};for(let l=t.length-1;l>=0;l--){const c=t[l],d=c.inputs;for(let f=0;f<c.outputs.length;f++)if(o[c.outputs[f].id]){for(const p in d)o[d[p].id]=!0,i[c.id]=!0;break}}const a=[];for(let l=0;l<t.length;l++){const c=t[l];if(s[c.id]&&i[c.id]){const d={};for(const p in c.inputs){const g=c.inputs[p];r[g.id]&&(d[p]=g)}const f=Object.assign({},c);f.inputs=d,f.outputs=c.outputs,a.push(f)}}return a}function Coe(t,e,n,r){for(let s=e.length-1;s>=0;s--){const o=e[s],i=[];if(o.outputs.forEach(l=>{const c=t[l.id];c!=null?i.push(c):i.push(null)}),o.gradient==null)throw new Error(`Cannot compute gradient: gradient function not found for ${o.kernelName}.`);const a=o.gradient(i);for(const l in o.inputs){if(!(l in a))throw new Error(`Cannot backprop through input ${l}. Available gradients found: ${Object.keys(a)}.`);const c=n(()=>a[l]());if(c.dtype!=="float32")throw new Error(`Error in gradient for op ${o.kernelName}. The gradient of input ${l} must have 'float32' dtype, but has '${c.dtype}'`);const d=o.inputs[l];if(!nn(c.shape,d.shape))throw new Error(`Error in gradient for op ${o.kernelName}. The gradient of input '${l}' has shape '${c.shape}', which does not match the shape of the input '${d.shape}'`);if(t[d.id]==null)t[d.id]=c;else{const f=t[d.id];t[d.id]=r(f,c),f.dispose()}}}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _4=20,vm=3,ZS=7;function Soe(t,e,n,r){const s=Et(e),o=Noe(t,e,n,s),i=e.length,a=$y(t,e,n,s,o),l=["Tensor"];return r&&(l.push(`  dtype: ${n}`),l.push(`  rank: ${i}`),l.push(`  shape: [${e}]`),l.push("  values:")),l.push(a.map(c=>"    "+c).join(`
`)),l.join(`
`)}function Noe(t,e,n,r){const s=Te(e),o=r[r.length-1],i=new Array(o).fill(0),a=e.length,l=n==="complex64"?Hm(t):t;if(a>1)for(let c=0;c<s/o;c++){const d=c*o;for(let f=0;f<o;f++)i[f]=Math.max(i[f],Um(l[d+f],0,n).length)}return i}function Um(t,e,n){let r;return Array.isArray(t)?r=`${parseFloat(t[0].toFixed(ZS))} + ${parseFloat(t[1].toFixed(ZS))}j`:T0(t)?r=`'${t}'`:n==="bool"?r=NB(t):r=parseFloat(t.toFixed(ZS)).toString(),Sh(r,e)}function NB(t){return t===0?"false":"true"}function $y(t,e,n,r,s,o=!0){const i=n==="complex64"?2:1,a=e[0],l=e.length;if(l===0){if(n==="complex64"){const b=Hm(t);return[Um(b[0],0,n)]}return n==="bool"?[NB(t[0])]:[t[0].toString()]}if(l===1){if(a>_4){const w=vm*i;let C=Array.from(t.slice(0,w)),N=Array.from(t.slice((a-vm)*i,a*i));return n==="complex64"&&(C=Hm(C),N=Hm(N)),["["+C.map((k,I)=>Um(k,s[I],n)).join(", ")+", ..., "+N.map((k,I)=>Um(k,s[a-vm+I],n)).join(", ")+"]"]}return["["+(n==="complex64"?Hm(t):Array.from(t)).map((w,C)=>Um(w,s[C],n)).join(", ")+"]"]}const c=e.slice(1),d=r.slice(1),f=r[0]*i,p=[];if(a>_4){for(let b=0;b<vm;b++){const w=b*f,C=w+f;p.push(...$y(t.slice(w,C),c,n,d,s,!1))}p.push("...");for(let b=a-vm;b<a;b++){const w=b*f,C=w+f;p.push(...$y(t.slice(w,C),c,n,d,s,b===a-1))}}else for(let b=0;b<a;b++){const w=b*f,C=w+f;p.push(...$y(t.slice(w,C),c,n,d,s,b===a-1))}const g=l===2?",":"";p[0]="["+(a>0?p[0]+g:"");for(let b=1;b<p.length-1;b++)p[b]=" "+p[b]+g;let x=`,
`;for(let b=2;b<l;b++)x+=`
`;return p[p.length-1]=" "+p[p.length-1]+"]"+(o?"":x),p}function Hm(t){const e=[];for(let n=0;n<t.length;n+=2)e.push([t[n],t[n+1]]);return e}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Zr{constructor(e,n,r){if(this.dtype=n,this.shape=e.slice(),this.size=Te(e),r!=null){const s=r.length;Y(s===this.size,()=>`Length of values '${s}' does not match the size inferred by the shape '${this.size}'.`)}if(n==="complex64")throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=r||Ar(n,this.size),this.strides=Et(e)}set(e,...n){n.length===0&&(n=[0]),Y(n.length===this.rank,()=>`The number of provided coordinates (${n.length}) must match the rank (${this.rank})`);const r=this.locToIndex(n);this.values[r]=e}get(...e){e.length===0&&(e=[0]);let n=0;for(const s of e){if(s<0||s>=this.shape[n]){const o=`Requested out of range element at ${e}.   Buffer shape=${this.shape}`;throw new Error(o)}n++}let r=e[e.length-1];for(let s=0;s<e.length-1;++s)r+=this.strides[s]*e[s];return this.values[r]}locToIndex(e){if(this.rank===0)return 0;if(this.rank===1)return e[0];let n=e[e.length-1];for(let r=0;r<e.length-1;++r)n+=this.strides[r]*e[r];return n}indexToLoc(e){if(this.rank===0)return[];if(this.rank===1)return[e];const n=new Array(this.shape.length);for(let r=0;r<n.length-1;++r)n[r]=Math.floor(e/this.strides[r]),e-=n[r]*this.strides[r];return n[n.length-1]=e,n}get rank(){return this.shape.length}toTensor(){return Ca().makeTensor(this.values,this.shape,this.dtype)}}let Ca=null,qf=null;function Eoe(t){Ca=t}function Ioe(t){qf=t}class Tn{constructor(e,n,r,s){this.kept=!1,this.isDisposedInternal=!1,this.shape=e.slice(),this.dtype=n||"float32",this.size=Te(e),this.strides=Et(e),this.dataId=r,this.id=s,this.rankType=this.rank<5?this.rank.toString():"higher"}get rank(){return this.shape.length}async buffer(){const e=await this.data();return qf.buffer(this.shape,this.dtype,e)}bufferSync(){return qf.buffer(this.shape,this.dtype,this.dataSync())}async array(){const e=await this.data();return Yi(this.shape,e,this.dtype==="complex64")}arraySync(){return Yi(this.shape,this.dataSync(),this.dtype==="complex64")}async data(){this.throwIfDisposed();const e=Ca().read(this.dataId);if(this.dtype==="string"){const n=await e;try{return n.map(r=>du(r))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}}return e}dataToGPU(e){return this.throwIfDisposed(),Ca().readToGPU(this.dataId,e)}dataSync(){this.throwIfDisposed();const e=Ca().readSync(this.dataId);if(this.dtype==="string")try{return e.map(n=>du(n))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e}async bytes(){this.throwIfDisposed();const e=await Ca().read(this.dataId);return this.dtype==="string"?e:new Uint8Array(e.buffer)}dispose(){this.isDisposed||(this.kerasMask&&this.kerasMask.dispose(),Ca().disposeTensor(this),this.isDisposedInternal=!0)}get isDisposed(){return this.isDisposedInternal}throwIfDisposed(){if(this.isDisposed)throw new Error("Tensor is disposed.")}print(e=!1){return qf.print(this,e)}clone(){return this.throwIfDisposed(),qf.clone(this)}toString(e=!1){const n=this.dataSync();return Soe(n,this.shape,this.dtype,e)}cast(e){return this.throwIfDisposed(),qf.cast(this,e)}variable(e=!0,n,r){return this.throwIfDisposed(),Ca().makeVariable(this,e,n,r)}}Object.defineProperty(Tn,Symbol.hasInstance,{value:t=>!!t&&t.data!=null&&t.dataSync!=null&&t.throwIfDisposed!=null});function $e(){return LT("Tensor",()=>Tn)}$e();class Pb extends Tn{constructor(e,n,r,s){super(e.shape,e.dtype,e.dataId,s),this.trainable=n,this.name=r}assign(e){if(e.dtype!==this.dtype)throw new Error(`dtype of the new value (${e.dtype}) and previous value (${this.dtype}) must match`);if(!nn(e.shape,this.shape))throw new Error(`shape of the new value (${e.shape}) and previous value (${this.shape}) must match`);Ca().disposeTensor(this),this.dataId=e.dataId,Ca().incRef(this,null)}dispose(){Ca().disposeVariable(this),this.isDisposedInternal=!0}}Object.defineProperty(Pb,Symbol.hasInstance,{value:t=>t instanceof Tn&&t.assign!=null&&t.assign instanceof Function});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var P4;(function(t){t.R0="R0",t.R1="R1",t.R2="R2",t.R3="R3",t.R4="R4",t.R5="R5",t.R6="R6"})(P4||(P4={}));var YE;(function(t){t.float32="float32",t.int32="int32",t.bool="int32",t.complex64="complex64"})(YE||(YE={}));var ZE;(function(t){t.float32="float32",t.int32="int32",t.bool="bool",t.complex64="complex64"})(ZE||(ZE={}));var QE;(function(t){t.float32="float32",t.int32="float32",t.bool="float32",t.complex64="complex64"})(QE||(QE={}));var JE;(function(t){t.float32="complex64",t.int32="complex64",t.bool="complex64",t.complex64="complex64"})(JE||(JE={}));const koe={float32:QE,int32:YE,bool:ZE,complex64:JE};function Xo(t,e){if(t==="string"||e==="string"){if(t==="string"&&e==="string")return"string";throw new Error(`Can not upcast ${t} with ${e}`)}return koe[t][e]}function UA(t){return Xo(t,"int32")}function EB(t){return t!=null&&typeof t=="object"&&"texture"in t&&t.texture instanceof WebGLTexture}function IB(t){return typeof GPUBuffer<"u"&&t!=null&&typeof t=="object"&&"buffer"in t&&t.buffer instanceof GPUBuffer}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wr(t,e){if(t.dtype===e.dtype)return[t,e];const n=Xo(t.dtype,e.dtype);return[t.cast(n),e.cast(n)]}function Toe(t,e){Y(t.dtype===e.dtype,()=>`The dtypes of the first(${t.dtype}) and second(${e.dtype}) input must match`)}function kB(t){const e=[];return TB(t,e,new Set),e}function TB(t,e,n){if(t==null)return;if(t instanceof Tn){e.push(t);return}if(!Aoe(t))return;const r=t;for(const s in r){const o=r[s];n.has(o)||(n.add(o),TB(o,e,n))}}function Aoe(t){return Array.isArray(t)||typeof t=="object"}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QS(t){return t.kernelName!=null}class F4{constructor(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map(e=>e.name)))}}}dispose(){for(const e in this.registeredVariables)this.registeredVariables[e].dispose()}}class Xh{constructor(e){this.ENV=e,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new F4}async ready(){if(this.pendingBackendInit!=null)return this.pendingBackendInit.then(()=>{});if(this.backendInstance!=null)return;const e=this.getSortedBackends();for(let n=0;n<e.length;n++){const r=e[n];if(await this.initializeBackend(r).success){await this.setBackend(r);return}}throw new Error("Could not initialize any backends, all backend initializations failed.")}get backend(){if(this.pendingBackendInit!=null)throw new Error(`Backend '${this.backendName}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);if(this.backendInstance==null){const{name:e,asyncInit:n}=this.initializeBackendsAndReturnBest();if(n)throw new Error(`The highest priority backend '${e}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);this.setBackend(e)}return this.backendInstance}backendNames(){return Object.keys(this.registryFactory)}findBackend(e){if(!(e in this.registry))if(e in this.registryFactory){const{asyncInit:n}=this.initializeBackend(e);if(n)return null}else return null;return this.registry[e]}findBackendFactory(e){return e in this.registryFactory?this.registryFactory[e].factory:null}registerBackend(e,n,r=1){return e in this.registryFactory?(ci(`${e} backend was already registered. Reusing existing backend factory.`),!1):(this.registryFactory[e]={factory:n,priority:r},!0)}async setBackend(e){if(this.registryFactory[e]==null)throw new Error(`Backend name '${e}' not found in registry`);if(this.backendName=e,this.registry[e]==null){this.backendInstance=null;const{success:n,asyncInit:r}=this.initializeBackend(e);if(!(r?await n:n))return!1}return this.backendInstance=this.registry[e],this.setupRegisteredKernels(),this.profiler=new yoe(this.backendInstance),!0}setupRegisteredKernels(){T4(this.backendName).forEach(n=>{n.setupFunc!=null&&n.setupFunc(this.backendInstance)})}disposeRegisteredKernels(e){T4(e).forEach(r=>{r.disposeFunc!=null&&r.disposeFunc(this.registry[e])})}initializeBackend(e){const n=this.registryFactory[e];if(n==null)throw new Error(`Cannot initialize backend ${e}, no registration found.`);try{const r=n.factory();if(r&&!(r instanceof PT)&&typeof r.then=="function"){const s=++this.pendingBackendInitId,o=r.then(i=>s<this.pendingBackendInitId?!1:(this.registry[e]=i,this.pendingBackendInit=null,!0)).catch(i=>(s<this.pendingBackendInitId||(this.pendingBackendInit=null,ci(`Initialization of backend ${e} failed`),ci(i.stack||i.message)),!1));return this.pendingBackendInit=o,{success:o,asyncInit:!0}}else return this.registry[e]=r,{success:!0,asyncInit:!1}}catch(r){return ci(`Initialization of backend ${e} failed`),ci(r.stack||r.message),{success:!1,asyncInit:!1}}}removeBackend(e){if(!(e in this.registryFactory))throw new Error(`${e} backend not found in registry`);this.backendName===e&&this.pendingBackendInit!=null&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}getSortedBackends(){if(Object.keys(this.registryFactory).length===0)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((e,n)=>this.registryFactory[n].priority-this.registryFactory[e].priority)}initializeBackendsAndReturnBest(){const e=this.getSortedBackends();for(let n=0;n<e.length;n++){const r=e[n],{success:s,asyncInit:o}=this.initializeBackend(r);if(o||s)return{name:r,asyncInit:o}}throw new Error("Could not initialize any backends, all backend initializations failed.")}moveData(e,n){const r=this.state.tensorInfo.get(n),s=r.backend,o=this.readSync(n),i=s.refCount(n);s.disposeData(n,!0),r.backend=e,e.move(n,o,r.shape,r.dtype,i),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}tidy(e,n){let r=null;if(n==null){if(typeof e!="function")throw new Error("Please provide a function to tidy()");n=e}else{if(typeof e!="string"&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if(typeof n!="function")throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");r=e}let s;return this.scopedRun(()=>this.startScope(r),()=>this.endScope(s),()=>(s=n(),s instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),s))}scopedRun(e,n,r){e();try{const s=r();return n(),s}catch(s){throw n(),s}}nextTensorId(){return Xh.nextTensorId++}nextVariableId(){return Xh.nextVariableId++}clone(e){const n=ae.runKernel(K0,{x:e}),r={x:e},s=i=>({x:()=>{const a="float32",l={x:i},c={dtype:a};return ae.runKernel(F0,l,c)}}),o=[];return this.addTapeNode(this.state.activeScope.name,r,[n],s,o,{}),n}runKernel(e,n,r){if(this.backendName==null&&this.backend,!(qE(e,this.backendName)!=null))throw new Error(`Kernel '${e}' not registered for backend '${this.backendName}'`);return this.runKernelFunc({kernelName:e,inputs:n,attrs:r})}shouldCheckForMemLeaks(){return this.ENV.getBool("IS_TEST")}checkKernelForMemLeak(e,n,r){const s=this.backend.numDataIds();let o=0;r.forEach(l=>{o+=l.dtype==="complex64"?3:1});const i=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],a=s-n-o-i;if(a>0)throw new Error(`Backend '${this.backendName}' has an internal memory leak (${a} data ids) after running '${e}'`)}runKernelFunc(e){let n,r=[];const s=this.isTapeOn(),o=this.state.numBytes,i=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);let a;this.backendName==null&&this.backend;let l;const c=QS(e)?e.kernelName:this.state.activeScope!=null?this.state.activeScope.name:"";if(QS(e)){const{kernelName:x,inputs:b,attrs:w}=e;this.backendName==null&&this.backend;const C=qE(x,this.backendName);Y(C!=null,()=>`Cannot find registered kernel '${x}' for backend '${this.backendName}'`),a=()=>{const N=this.backend.numDataIds();l=C.kernelFunc({inputs:b,attrs:w,backend:this.backend});const k=Array.isArray(l)?l:[l];this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(x,N,k);const I=k.map(R=>R.rank!=null?R:this.makeTensorFromTensorInfo(R));if(s){const R=this.getTensorsForGradient(x,b,I);r=this.saveTensorsForBackwardMode(R)}return I}}else{const{forwardFunc:x}=e,b=w=>{s&&(r=w.map(C=>this.keep(this.clone(C))))};a=()=>{const w=this.backend.numDataIds();l=this.tidy(()=>x(this.backend,b));const C=Array.isArray(l)?l:[l];return this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(c,w,C),C}}const{inputs:d,attrs:f}=e,p=QS(e)?null:e.backwardsFunc;let g;return this.scopedRun(()=>this.state.kernelDepth++,()=>this.state.kernelDepth--,()=>{!this.ENV.getBool("DEBUG")&&!this.state.profiling?n=a():(g=this.profiler.profileKernel(c,d,()=>a()),this.ENV.getBool("DEBUG")&&this.profiler.logKernelProfile(g),n=g.outputs)}),s&&this.addTapeNode(c,d,n,p,r,f),this.state.profiling&&this.state.activeProfile.kernels.push({name:c,bytesAdded:this.state.numBytes-o,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-i,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(d).map(x=>d[x]!=null?d[x].shape:null),outputShapes:n.map(x=>x.shape),kernelTimeMs:g.timeMs,extraInfo:g.extraInfo}),Array.isArray(l)?n:n[0]}saveTensorsForBackwardMode(e){return e.map(r=>this.keep(this.clone(r)))}getTensorsForGradient(e,n,r){const s=k4(e);if(s!=null){const o=s.inputsToSave||[],i=s.outputsToSave||[];let a;s.saveAllInputs?(Y(Array.isArray(n),()=>"saveAllInputs is true, expected inputs to be an array."),a=Object.keys(n).map(c=>n[c])):a=o.map(c=>n[c]);const l=r.filter((c,d)=>i[d]);return a.concat(l)}return[]}makeTensor(e,n,r,s){if(e==null)throw new Error("Values passed to engine.makeTensor() are null");r=r||"float32",s=s||this.backend;let o=e;r==="string"&&T0(e[0])&&(o=e.map(l=>su(l)));const i=s.write(o,n,r),a=new Tn(n,r,i,this.nextTensorId());if(this.trackTensor(a,s),r==="string"){const l=this.state.tensorInfo.get(i),c=Kse(o);this.state.numBytes+=c-l.bytes,l.bytes=c}return a}makeTensorFromDataId(e,n,r,s){r=r||"float32";const o={dataId:e,shape:n,dtype:r};return this.makeTensorFromTensorInfo(o,s)}makeTensorFromTensorInfo(e,n){const{dataId:r,shape:s,dtype:o}=e,i=new Tn(s,o,r,this.nextTensorId());return this.trackTensor(i,n),i}makeVariable(e,n=!0,r,s){r=r||this.nextVariableId().toString(),s!=null&&s!==e.dtype&&(e=e.cast(s));const o=new Pb(e,n,r,this.nextTensorId());if(this.state.registeredVariables[o.name]!=null)throw new Error(`Variable with name ${o.name} was already registered`);return this.state.registeredVariables[o.name]=o,this.incRef(o,this.backend),o}trackTensor(e,n){this.state.numTensors++,e.dtype==="string"&&this.state.numStringTensors++;let r=0;e.dtype!=="complex64"&&e.dtype!=="string"&&(r=e.size*Ab(e.dtype)),this.state.numBytes+=r,this.state.tensorInfo.has(e.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(e.dataId,{backend:n||this.backend,dtype:e.dtype,shape:e.shape,bytes:r})),e instanceof Pb||this.track(e)}incRef(e,n){this.trackTensor(e,n),this.backend.incRef(e.dataId)}removeDataId(e,n){this.state.tensorInfo.has(e)&&this.state.tensorInfo.get(e).backend===n&&(this.state.tensorInfo.delete(e),this.state.numDataBuffers--)}disposeTensor(e){if(!this.state.tensorInfo.has(e.dataId))return;const n=this.state.tensorInfo.get(e.dataId);if(this.state.numTensors--,e.dtype==="string"&&(this.state.numStringTensors--,this.state.numBytes-=n.bytes),e.dtype!=="complex64"&&e.dtype!=="string"){const r=e.size*Ab(e.dtype);this.state.numBytes-=r}n.backend.disposeData(e.dataId)&&this.removeDataId(e.dataId,n.backend)}disposeVariables(){for(const e in this.state.registeredVariables){const n=this.state.registeredVariables[e];this.disposeVariable(n)}}disposeVariable(e){this.disposeTensor(e),this.state.registeredVariables[e.name]!=null&&delete this.state.registeredVariables[e.name]}memory(){const e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,e.reasons==null&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e}async profile(e){this.state.profiling=!0;const n=this.state.numBytes,r=this.state.numTensors;this.state.activeProfile.kernels=[],this.state.activeProfile.result=await e(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max(...this.state.activeProfile.kernels.map(s=>s.totalBytesSnapshot)),this.state.activeProfile.newBytes=this.state.numBytes-n,this.state.activeProfile.newTensors=this.state.numTensors-r;for(const s of this.state.activeProfile.kernels)s.kernelTimeMs=await s.kernelTimeMs,s.extraInfo=await s.extraInfo;return this.state.activeProfile}isTapeOn(){return this.state.gradientDepth>0&&this.state.kernelDepth===0}addTapeNode(e,n,r,s,o,i){const a={id:this.state.nextTapeNodeId++,kernelName:e,inputs:n,outputs:r,saved:o},l=k4(e);l!=null&&(s=l.gradFunc),s!=null&&(a.gradient=c=>(c=c.map((d,f)=>{if(d==null){const p=r[f],g=Vs(p.size,p.dtype);return this.makeTensor(g,p.shape,p.dtype)}return d}),s(c.length>1?c:c[0],o,i))),this.state.activeTape.push(a)}keep(e){return e.kept=!0,e}startTape(){this.state.gradientDepth===0&&(this.state.activeTape=[]),this.state.gradientDepth++}endTape(){this.state.gradientDepth--}startScope(e){const n={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(n.name=e),this.state.scopeStack.push(n),this.state.activeScope=n}endScope(e){const n=kB(e),r=new Set(n.map(o=>o.id));for(let o=0;o<this.state.activeScope.track.length;o++){const i=this.state.activeScope.track[o];!i.kept&&!r.has(i.id)&&i.dispose()}const s=this.state.scopeStack.pop();this.state.activeScope=this.state.scopeStack.length===0?null:this.state.scopeStack[this.state.scopeStack.length-1],n.forEach(o=>{!o.kept&&o.scopeId===s.id&&this.track(o)})}gradients(e,n,r,s=!1){if(Y(n.length>0,()=>"gradients() received an empty list of xs."),r!=null&&r.dtype!=="float32")throw new Error(`dy must have 'float32' dtype, but has '${r.dtype}'`);const o=this.scopedRun(()=>this.startTape(),()=>this.endTape(),()=>this.tidy("forward",e));Y(o instanceof Tn,()=>"The result y returned by f() must be a tensor.");const i=voe(this.state.activeTape,n,o);if(!s&&i.length===0&&n.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",()=>{const a={};a[o.id]=r??Roe(o.shape),Coe(a,i,c=>this.tidy(c),Doe);const l=n.map(c=>a[c.id]);return this.state.gradientDepth===0&&(this.state.activeTape.forEach(c=>{for(const d of c.saved)d.dispose()}),this.state.activeTape=null),{value:o,grads:l}})}customGrad(e){return Y(zE(e),()=>"The f passed in customGrad(f) must be a function."),(...n)=>{Y(n.every(a=>a instanceof Tn),()=>"The args passed in customGrad(f)(x1, x2,...) must all be tensors");let r;const s={};n.forEach((a,l)=>{s[l]=a});const o=(a,l)=>(r=e(...n,l),Y(r.value instanceof Tn,()=>"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"),Y(zE(r.gradFunc),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."),r.value),i=(a,l)=>{const c=r.gradFunc(a,l),d=Array.isArray(c)?c:[c];Y(d.length===n.length,()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."),Y(d.every(p=>p instanceof Tn),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors.");const f={};return d.forEach((p,g)=>{f[g]=()=>p}),f};return this.runKernelFunc({forwardFunc:o,backwardsFunc:i,inputs:s})}}readSync(e){return this.state.tensorInfo.get(e).backend.readSync(e)}read(e){return this.state.tensorInfo.get(e).backend.read(e)}readToGPU(e,n){return this.state.tensorInfo.get(e).backend.readToGPU(e,n)}async time(e){const n=po(),r=await this.backend.time(e);return r.wallMs=po()-n,r}track(e){return this.state.activeScope!=null&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e}get registeredVariables(){return this.state.registeredVariables}reset(){this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new F4;for(const e in this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}Xh.nextTensorId=0;Xh.nextVariableId=0;function Roe(t){const e=MT(Te(t),"float32");return ae.makeTensor(e,t,"float32")}function AB(){const t=fB();if(t._tfengine==null){const e=new Qse(t);t._tfengine=new Xh(e)}return noe(t._tfengine.ENV),Eoe(()=>t._tfengine),t._tfengine}const ae=AB();function Doe(t,e){const n={a:t,b:e};return ae.runKernel(Ap,n)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $oe(){return typeof navigator<"u"&&navigator!=null}function RB(t){if(t||$oe()){if(t||(t=navigator),t.product==="ReactNative")return!0;const e=t.userAgent||t.vendor||(typeof window<"u"?window.opera:"");if(!e){const n=t;return n.userAgentData&&n.userAgentData.mobile}return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))}return!1}function DB(){return typeof window<"u"&&window.document!=null||typeof WorkerGlobalScope<"u"}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bo=Ee();bo.registerFlag("DEBUG",()=>!1,t=>{t&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")});bo.registerFlag("IS_BROWSER",()=>DB());bo.registerFlag("IS_NODE",()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u");bo.registerFlag("IS_CHROME",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor));bo.registerFlag("IS_SAFARI",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Safari/.test(navigator.userAgent)&&/Apple/.test(navigator.vendor));bo.registerFlag("PROD",()=>!1);bo.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",()=>bo.getBool("DEBUG"));bo.registerFlag("DEPRECATION_WARNINGS_ENABLED",()=>!0);bo.registerFlag("IS_TEST",()=>!1);bo.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",()=>bo.getBool("DEBUG"));bo.registerFlag("WRAP_TO_IMAGEBITMAP",()=>!1);bo.registerFlag("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU",()=>!1);bo.registerFlag("USE_SETTIMEOUTCUSTOM",()=>!1);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ru(t,e){let n=t;if(ta(t))return e==="string"?[]:[t.length];if(EB(t)){const s=t.channels||"RGBA";return[t.height,t.width*s.length]}else if(IB(t))return[t.buffer.size/(e==null?4:Ab(e))];if(!Array.isArray(t))return[];const r=[];for(;Array.isArray(n)||ta(n)&&e!=="string";)r.push(n.length),n=n[0];return Array.isArray(t)&&Ee().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&$B(t,r,[]),r}function $B(t,e,n){if(n=n||[],!Array.isArray(t)&&!ta(t)){Y(e.length===0,()=>`Element arr[${n.join("][")}] is a primitive, but should be an array/TypedArray of ${e[0]} elements`);return}Y(e.length>0,()=>`Element arr[${n.join("][")}] should be a primitive, but is an array of ${t.length} elements`),Y(t.length===e[0],()=>`Element arr[${n.join("][")}] should have ${e[0]} elements, but has ${t.length} elements`);const r=e.slice(1);for(let s=0;s<t.length;++s)$B(t[s],r,n.concat(s))}function M4(t,e,n,r){if(t!=="string_or_numeric"){if(t==null)throw new Error("Expected dtype cannot be null.");if(t!=="numeric"&&t!==e||t==="numeric"&&e==="string")throw new Error(`Argument '${n}' passed to '${r}' must be ${t} tensor, but got ${e} tensor`)}}function Q(t,e,n,r="numeric"){if(t instanceof $e())return M4(r,t.dtype,e,n),t;let s=kp(t);if(s!=="string"&&["bool","int32","float32"].indexOf(r)>=0&&(s=r),M4(r,s,e,n),t==null||!ta(t)&&!Array.isArray(t)&&typeof t!="number"&&typeof t!="boolean"&&typeof t!="string"){const l=t==null?"null":t.constructor.name;throw new Error(`Argument '${e}' passed to '${n}' must be a Tensor or TensorLike, but got '${l}'`)}const o=Ru(t,s);!ta(t)&&!Array.isArray(t)&&(t=[t]);const a=s!=="string"?df(t,s):jd(t,[],!0);return ae.makeTensor(a,o,s)}function Fb(t,e,n,r="numeric"){if(!Array.isArray(t))throw new Error(`Argument ${e} passed to ${n} must be a \`Tensor[]\` or \`TensorLike[]\``);return t.map((o,i)=>Q(o,`${e}[${i}]`,n,r))}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const OB="__op";function se(t){const e=Object.keys(t);if(e.length!==1)throw new Error(`Please provide an object with a single key (operation name) mapping to a function. Got an object with ${e.length} keys.`);let n=e[0];const r=t[n];n.endsWith("_")&&(n=n.substring(0,n.length-1)),n=n+OB;const s=(...o)=>{ae.startScope(n);try{const i=r(...o);return Bd(i)&&console.error("Cannot return a Promise inside of tidy."),ae.endScope(i),i}catch(i){throw ae.endScope(null),i}};return Object.defineProperty(s,"name",{value:n,configurable:!0}),s}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ooe(t,e){const n=Q(t,"real","complex"),r=Q(e,"imag","complex");ti(n.shape,r.shape,`real and imag shapes, ${n.shape} and ${r.shape}, must match in call to tf.complex().`);const s={real:n,imag:r};return ae.runKernel(HT,s)}const fu=se({complex_:Ooe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Du(t,e,n,r){if(r==null)r=kp(t);else if(r==="complex64")throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(IB(t)||EB(t)){if(r!=="float32"&&r!=="int32")throw new Error(`Creating tensor from GPU data only supports 'float32'|'int32' dtype, while the dtype is ${r}.`);return ae.backend.createTensorFromGPUData(t,e||n,r)}if(!ta(t)&&!Array.isArray(t)&&typeof t!="number"&&typeof t!="boolean"&&typeof t!="string")throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(e!=null){Ci(e);const s=Te(e),o=Te(n);Y(s===o,()=>`Based on the provided shape, [${e}], the tensor should have ${s} values but has ${o}`);for(let i=0;i<n.length;++i){const a=n[i],l=i===n.length-1?a!==Te(e.slice(i)):!0;Y(n[i]===e[i]||!l,()=>`Error creating a new Tensor. Inferred shape (${n}) does not match the provided shape (${e}). `)}}return!ta(t)&&!Array.isArray(t)&&(t=[t]),e=e||n,t=r!=="string"?df(t,r):jd(t,[],!0),ae.makeTensor(t,e,r)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ka(t,e,n){const r=Ru(t,n);return Du(t,e,r,n)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zd={float32:4,float16:2,int32:4,uint16:2,uint8:1,bool:1,complex64:8};class za{static join(e){return new za(e).slice()}constructor(e){if(this.shards=[],this.previousShardIndex=0,e==null||(e instanceof Array||(e=[e]),e=e.map(r=>ta(r)?r.buffer:r),e.length===0))return;this.bufferUniformSize=e[0].byteLength;let n=0;for(let r=0;r<e.length;r++){const s=e[r];r!==e.length-1&&s.byteLength!==this.bufferUniformSize&&(this.bufferUniformSize=void 0);const o=n+s.byteLength;this.shards.push({buffer:s,start:n,end:o}),n=o}this.shards.length===0&&(this.byteLength=0),this.byteLength=this.shards[this.shards.length-1].end}slice(e=0,n=this.byteLength){if(this.shards.length===0)return new ArrayBuffer(0);if(e=isNaN(Number(e))?0:e,n=isNaN(Number(n))?0:n,e=Math.max(0,e),n=Math.min(this.byteLength,n),n<=e)return new ArrayBuffer(0);const r=this.findShardForByte(e);if(r===-1)throw new Error(`Could not find start shard for byte ${e}`);const s=n-e,o=new ArrayBuffer(s),i=new Uint8Array(o);let a=0;for(let l=r;l<this.shards.length;l++){const c=this.shards[l],f=e+a-c.start,p=a,x=Math.min(n,c.end)-c.start,b=new Uint8Array(c.buffer,f,x-f);if(i.set(b,p),a+=b.length,n<c.end)break}return o}findShardForByte(e){if(this.shards.length===0||e<0||e>=this.byteLength)return-1;if(this.bufferUniformSize!=null)return this.previousShardIndex=Math.floor(e/this.bufferUniformSize),this.previousShardIndex;function n(s){return e<s.start?-1:e>=s.end?1:0}if(n(this.shards[this.previousShardIndex])===0)return this.previousShardIndex;const r=_oe(this.shards,n);return r===-1?-1:(this.previousShardIndex=r,this.previousShardIndex)}}function _oe(t,e){let n=0,r=t.length;for(;n<=r;){const s=Math.floor((r-n)/2)+n,o=e(t[s]);if(o===0)return s;o<0?r=s:n=s+1}return-1}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tl(){return ae}function L4(){return ae.memory()}function we(t,e){return ae.tidy(t,e)}function Yt(t){kB(t).forEach(n=>n.dispose())}function ls(t){return ae.keep(t)}function _B(){return ae.ready()}function Poe(){return ae.backendName}function PB(t,e,n=1){return ae.registerBackend(t,e,n)}function FB(){return ae.backend}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hu=4;async function eI(t,e){const n=[],r=[],s=Array.isArray(t)?t.map(i=>i.name):Object.keys(t);for(let i=0;i<s.length;++i){const a=s[i],l=Array.isArray(t)?t[i].tensor:t[a];if(l.dtype!=="float32"&&l.dtype!=="int32"&&l.dtype!=="bool"&&l.dtype!=="string"&&l.dtype!=="complex64")throw new Error(`Unsupported dtype in weight '${a}': ${l.dtype}`);const c={name:a,shape:l.shape,dtype:l.dtype};if(l.dtype==="string"){const d=new Promise(async f=>{const p=await l.bytes(),g=p.reduce((w,C)=>w+C.length,0)+hu*p.length,x=new Uint8Array(g);let b=0;for(let w=0;w<p.length;w++){const C=p[w],N=new Uint8Array(new Uint32Array([C.length]).buffer);x.set(N,b),b+=hu,x.set(C,b),b+=C.length}f(x)});r.push(d)}else r.push(l.data());e!=null&&(c.group=e),n.push(c)}const o=await Promise.all(r);return{data:Loe(o),specs:n}}function MB(t,e){const n=new za(t),r={};let s=0;for(const o of e){const i=Foe(o,(a,l)=>n.slice(s+a,s+l));r[o.name]=LB(o,n.slice(s,s+i)),s+=i}return r}function Foe(t,e){const n=Te(t.shape);let r;if("quantization"in t){const s=t.quantization;r=zd[s.dtype]}else if(t.dtype==="string"){let s=0;for(let o=0;o<n;o++)s+=hu+new Uint32Array(e(s,s+hu))[0];return s}else r=zd[t.dtype];return n*r}async function Moe(t,e){const n=Te(t.shape);let r;if("quantization"in t){const s=t.quantization;r=zd[s.dtype]}else if(t.dtype==="string"){let s=0;for(let o=0;o<n;o++)s+=hu+new Uint32Array(await e(s,s+hu))[0];return s}else r=zd[t.dtype];return n*r}function LB(t,e){const n=t.name,r=t.dtype,s=t.shape,o=Te(s);let i,a=0;if("quantization"in t){const l=t.quantization;if(l.dtype==="uint8"||l.dtype==="uint16"){if(!("min"in l&&"scale"in l))throw new Error(`Weight ${t.name} with quantization ${l.dtype} doesn't have corresponding metadata min and scale.`)}else if(l.dtype==="float16"){if(r!=="float32")throw new Error(`Weight ${t.name} is quantized with ${l.dtype} which only supports weights of type float32 not ${r}.`)}else throw new Error(`Weight ${t.name} has unknown quantization dtype ${l.dtype}. Supported quantization dtypes are: 'uint8', 'uint16', and 'float16'.`);const c=zd[l.dtype],d=l.dtype==="uint8"?new Uint8Array(e):new Uint16Array(e);if(r==="float32")if(l.dtype==="uint8"||l.dtype==="uint16"){i=new Float32Array(d.length);for(let f=0;f<d.length;f++){const p=d[f];i[f]=p*l.scale+l.min}}else if(l.dtype==="float16")i=Uoe()(d);else throw new Error(`Unsupported quantization type ${l.dtype} for weight type float32.`);else if(r==="int32"){if(l.dtype!=="uint8"&&l.dtype!=="uint16")throw new Error(`Unsupported quantization type ${l.dtype} for weight type int32.`);i=new Int32Array(d.length);for(let f=0;f<d.length;f++){const p=d[f];i[f]=Math.round(p*l.scale+l.min)}}else throw new Error(`Unsupported dtype in weight '${n}': ${r}`);a+=o*c}else if(r==="string"){const l=Te(t.shape);i=[];for(let c=0;c<l;c++){const d=new Uint32Array(e.slice(a,a+hu))[0];a+=hu;const f=new Uint8Array(e.slice(a,a+d));i.push(f),a+=d}}else{const l=zd[r];if(r==="float32")i=new Float32Array(e);else if(r==="int32")i=new Int32Array(e);else if(r==="bool")i=new Uint8Array(e);else if(r==="complex64"){i=new Float32Array(e);const c=new Float32Array(i.length/2),d=new Float32Array(i.length/2);for(let x=0;x<c.length;x++)c[x]=i[x*2],d[x]=i[x*2+1];const f=ka(c,s,"float32"),p=ka(d,s,"float32"),g=fu(f,p);return f.dispose(),p.dispose(),g}else throw new Error(`Unsupported dtype in weight '${n}': ${r}`);a+=o*l}return ka(i,s,r)}async function B4(t,e,n){let r=new Uint8Array(e);for(;r.byteLength<n;){const{done:s,value:o}=await t.read();if(s&&o==null){const a=n-r.byteLength;throw new Error(`Reader is done but ${a} bytes are still expected`)}const i=new Uint8Array(r.length+o.byteLength);i.set(r,0),i.set(new Uint8Array(o),r.length),r=i}return r.buffer}async function BB(t,e){const n={},r=t.getReader();let s=new ArrayBuffer(0);for(const o of e){const i=await Moe(o,async(c,d)=>(s=await B4(r,s,d),s.slice(c,d)));s=await B4(r,s,i);const a=s.slice(0,i);s=s.slice(i);const l=LB(o,a);if(n[o.name]=l,Poe()==="webgpu"){const c=FB();"uploadToGPU"in c&&Te(l.shape)>=Ee().get("WEBGPU_CPU_HANDOFF_SIZE_THRESHOLD")&&c.uploadToGPU(l.dataId)}}return n}function Loe(t){if(t===null)throw new Error(`Invalid input value: ${JSON.stringify(t)}`);let e=0;const n=[];t.forEach(o=>{if(e+=o.byteLength,n.push(o.byteLength===o.buffer.byteLength?o:new o.constructor(o)),!(o instanceof Float32Array||o instanceof Int32Array||o instanceof Uint8Array))throw new Error(`Unsupported TypedArray subtype: ${o.constructor.name}`)});const r=new Uint8Array(e);let s=0;return n.forEach(o=>{r.set(new Uint8Array(o.buffer),s),s+=o.byteLength}),r.buffer}const HA=typeof Buffer<"u"&&(typeof Blob>"u"||typeof atob>"u"||typeof btoa>"u");function j4(t){return HA?Buffer.byteLength(t,"utf8"):new Blob([t]).size}function Boe(t){if(HA)return Buffer.from(t).toString("base64");const e=new Uint8Array(t);let n="";for(let r=0,s=e.length;r<s;r++)n+=String.fromCharCode(e[r]);return btoa(n)}function joe(t){if(HA){const r=Buffer.from(t,"base64");return r.buffer.slice(r.byteOffset,r.byteOffset+r.byteLength)}const e=atob(t),n=new Uint8Array(e.length);for(let r=0;r<e.length;++r)n.set([e.charCodeAt(r)],r);return n.buffer}function jB(t){return za.join(t)}function z4(t){const e="/";for(t=t.trim();t.endsWith(e);)t=t.slice(0,t.length-1);const n=t.split(e);return n[n.length-1]}function zB(t,e){const n={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,weightsManifest:e};return t.signature!=null&&(n.signature=t.signature),t.userDefinedMetadata!=null&&(n.userDefinedMetadata=t.userDefinedMetadata),t.modelInitializer!=null&&(n.modelInitializer=t.modelInitializer),t.initializerSignature!=null&&(n.initializerSignature=t.initializerSignature),t.trainingConfig!=null&&(n.trainingConfig=t.trainingConfig),n}function VB(t,e,n){const r={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy};if(t.trainingConfig!=null&&(r.trainingConfig=t.trainingConfig),t.weightsManifest!=null){if(!e)throw new Error("modelJSON has weightsManifest but weightSpecs is null");if(!n)throw new Error("modelJSON has weightsManifest but weightData is null");r.weightSpecs=e,r.weightData=n}return t.signature!=null&&(r.signature=t.signature),t.userDefinedMetadata!=null&&(r.userDefinedMetadata=t.userDefinedMetadata),t.modelInitializer!=null&&(r.modelInitializer=t.modelInitializer),t.initializerSignature!=null&&(r.initializerSignature=t.initializerSignature),r}async function GA(t,e){let n,r;return t.weightsManifest!=null&&([n,r]=await e(t.weightsManifest)),VB(t,n,r)}function N1(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:t.modelTopology==null?0:j4(JSON.stringify(t.modelTopology)),weightSpecsBytes:t.weightSpecs==null?0:j4(JSON.stringify(t.weightSpecs)),weightDataBytes:t.weightData==null?0:new za(t.weightData).byteLength}}function tI(t){const e=[];for(const n of t)e.push(...n.weights);return e}function zoe(){const t=n=>{let r=n<<13,s=0;for(;!(r&8388608);)s-=8388608,r<<=1;return r&=-8388609,s+=947912704,r|s},e=new Uint32Array(2048);e[0]=0;for(let n=1;n<1024;n++)e[n]=t(n);for(let n=1024;n<2048;n++)e[n]=939524096+(n-1024<<13);return e}function Voe(){const t=new Uint32Array(64);t[0]=0,t[31]=1199570944,t[32]=2147483648,t[63]=3347054592;for(let e=1;e<31;e++)t[e]=e<<23;for(let e=33;e<63;e++)t[e]=2147483648+(e-32<<23);return t}function Woe(){const t=new Uint32Array(64);for(let e=0;e<64;e++)t[e]=1024;return t[0]=t[32]=0,t}function Uoe(){const t=zoe(),e=Voe(),n=Woe();return r=>{const s=new ArrayBuffer(4*r.length),o=new Uint32Array(s);for(let i=0;i<r.length;i++){const a=r[i],l=t[n[a>>10]+(a&1023)]+e[a>>10];o[i]=l}return new Float32Array(s)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class cr{constructor(){this.saveRouters=[],this.loadRouters=[]}static getInstance(){return cr.instance==null&&(cr.instance=new cr),cr.instance}static registerSaveRouter(e){cr.getInstance().saveRouters.push(e)}static registerLoadRouter(e){cr.getInstance().loadRouters.push(e)}static getSaveHandlers(e){return cr.getHandlers(e,"save")}static getLoadHandlers(e,n){return cr.getHandlers(e,"load",n)}static getHandlers(e,n,r){const s=[];return(n==="load"?cr.getInstance().loadRouters:cr.getInstance().saveRouters).forEach(i=>{const a=i(e,r);a!==null&&s.push(a)}),s}}const Hoe=t=>cr.registerSaveRouter(t),Goe=t=>cr.registerLoadRouter(t),WB=t=>cr.getSaveHandlers(t),qoe=(t,e)=>cr.getLoadHandlers(t,e);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nI="tensorflowjs",rI=1,wd="models_store",Uc="model_info_store";function UB(){if(!Ee().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");const t=typeof window>"u"?self:window,e=t.indexedDB||t.mozIndexedDB||t.webkitIndexedDB||t.msIndexedDB||t.shimIndexedDB;if(e==null)throw new Error("The current browser does not appear to support IndexedDB.");return e}function sI(t){const e=t.result;e.createObjectStore(wd,{keyPath:"modelPath"}),e.createObjectStore(Uc,{keyPath:"modelPath"})}class Vd{constructor(e){if(this.indexedDB=UB(),e==null||!e)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=e}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return this.databaseAction(this.modelPath,e)}async load(){return this.databaseAction(this.modelPath)}databaseAction(e,n){return new Promise((r,s)=>{const o=this.indexedDB.open(nI,rI);o.onupgradeneeded=()=>sI(o),o.onsuccess=()=>{const i=o.result;if(n==null){const a=i.transaction(wd,"readonly"),c=a.objectStore(wd).get(this.modelPath);c.onsuccess=()=>{if(c.result==null)return i.close(),s(new Error(`Cannot find model with path '${this.modelPath}' in IndexedDB.`));r(c.result.modelArtifacts)},c.onerror=d=>(i.close(),s(c.error)),a.oncomplete=()=>i.close()}else{n.weightData=za.join(n.weightData);const a=N1(n),l=i.transaction(Uc,"readwrite");let c=l.objectStore(Uc),d;try{d=c.put({modelPath:this.modelPath,modelArtifactsInfo:a})}catch(p){return s(p)}let f;d.onsuccess=()=>{f=i.transaction(wd,"readwrite");const p=f.objectStore(wd);let g;try{g=p.put({modelPath:this.modelPath,modelArtifacts:n,modelArtifactsInfo:a})}catch(x){return s(x)}g.onsuccess=()=>r({modelArtifactsInfo:a}),g.onerror=x=>{c=l.objectStore(Uc);const b=c.delete(this.modelPath);b.onsuccess=()=>(i.close(),s(g.error)),b.onerror=w=>(i.close(),s(g.error))}},d.onerror=p=>(i.close(),s(d.error)),l.oncomplete=()=>{f==null?i.close():f.oncomplete=()=>i.close()}}},o.onerror=i=>s(o.error)})}}Vd.URL_SCHEME="indexeddb://";const HB=t=>Ee().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(Vd.URL_SCHEME)?Xoe(t.slice(Vd.URL_SCHEME.length)):null;cr.registerSaveRouter(HB);cr.registerLoadRouter(HB);function Xoe(t){return new Vd(t)}function Koe(t){return t.startsWith(Vd.URL_SCHEME)?t.slice(Vd.URL_SCHEME.length):t}class Yoe{constructor(){this.indexedDB=UB()}async listModels(){return new Promise((e,n)=>{const r=this.indexedDB.open(nI,rI);r.onupgradeneeded=()=>sI(r),r.onsuccess=()=>{const s=r.result,o=s.transaction(Uc,"readonly"),a=o.objectStore(Uc).getAll();a.onsuccess=()=>{const l={};for(const c of a.result)l[c.modelPath]=c.modelArtifactsInfo;e(l)},a.onerror=l=>(s.close(),n(a.error)),o.oncomplete=()=>s.close()},r.onerror=s=>n(r.error)})}async removeModel(e){return e=Koe(e),new Promise((n,r)=>{const s=this.indexedDB.open(nI,rI);s.onupgradeneeded=()=>sI(s),s.onsuccess=()=>{const o=s.result,i=o.transaction(Uc,"readwrite"),a=i.objectStore(Uc),l=a.get(e);let c;l.onsuccess=()=>{if(l.result==null)return o.close(),r(new Error(`Cannot find model with path '${e}' in IndexedDB.`));{const d=a.delete(e),f=()=>{c=o.transaction(wd,"readwrite");const g=c.objectStore(wd).delete(e);g.onsuccess=()=>n(l.result.modelArtifactsInfo),g.onerror=x=>r(l.error)};d.onsuccess=f,d.onerror=p=>(f(),o.close(),r(l.error))}},l.onerror=d=>(o.close(),r(l.error)),i.oncomplete=()=>{c==null?o.close():c.oncomplete=()=>o.close()}},s.onerror=o=>r(s.error)})}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Hl="/",Xf="tensorflowjs_models",GB="info",Zoe="model_topology",Qoe="weight_specs",Joe="weight_data",eie="model_metadata";function qB(t){return{info:[Xf,t,GB].join(Hl),topology:[Xf,t,Zoe].join(Hl),weightSpecs:[Xf,t,Qoe].join(Hl),weightData:[Xf,t,Joe].join(Hl),modelMetadata:[Xf,t,eie].join(Hl)}}function XB(t){for(const e of Object.values(t))window.localStorage.removeItem(e)}function tie(t){const e=t.split(Hl);if(e.length<3)throw new Error(`Invalid key format: ${t}`);return e.slice(1,e.length-1).join(Hl)}function nie(t){return t.startsWith(Wd.URL_SCHEME)?t.slice(Wd.URL_SCHEME.length):t}class Wd{constructor(e){if(!Ee().getBool("IS_BROWSER")||typeof window>"u"||typeof window.localStorage>"u")throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,e==null||!e)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=e,this.keys=qB(this.modelPath)}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");{const n=JSON.stringify(e.modelTopology),r=JSON.stringify(e.weightSpecs),s=N1(e),o=za.join(e.weightData);try{this.LS.setItem(this.keys.info,JSON.stringify(s)),this.LS.setItem(this.keys.topology,n),this.LS.setItem(this.keys.weightSpecs,r),this.LS.setItem(this.keys.weightData,Boe(o));const i={format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,signature:e.signature!=null?e.signature:void 0,userDefinedMetadata:e.userDefinedMetadata!=null?e.userDefinedMetadata:void 0,modelInitializer:e.modelInitializer!=null?e.modelInitializer:void 0,initializerSignature:e.initializerSignature!=null?e.initializerSignature:void 0,trainingConfig:e.trainingConfig!=null?e.trainingConfig:void 0};return this.LS.setItem(this.keys.modelMetadata,JSON.stringify(i)),{modelArtifactsInfo:s}}catch{throw XB(this.keys),new Error(`Failed to save model '${this.modelPath}' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes=${s.modelTopologyBytes}, weightSpecsBytes=${s.weightSpecsBytes}, weightDataBytes=${s.weightDataBytes}.`)}}}async load(){const e=JSON.parse(this.LS.getItem(this.keys.info));if(e==null)throw new Error(`In local storage, there is no model with name '${this.modelPath}'`);if(e.modelTopologyType!=="JSON")throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");const n={},r=JSON.parse(this.LS.getItem(this.keys.topology));if(r==null)throw new Error(`In local storage, the topology of model '${this.modelPath}' is missing.`);n.modelTopology=r;const s=JSON.parse(this.LS.getItem(this.keys.weightSpecs));if(s==null)throw new Error(`In local storage, the weight specs of model '${this.modelPath}' are missing.`);n.weightSpecs=s;const o=this.LS.getItem(this.keys.modelMetadata);if(o!=null){const a=JSON.parse(o);n.format=a.format,n.generatedBy=a.generatedBy,n.convertedBy=a.convertedBy,a.signature!=null&&(n.signature=a.signature),a.userDefinedMetadata!=null&&(n.userDefinedMetadata=a.userDefinedMetadata),a.modelInitializer!=null&&(n.modelInitializer=a.modelInitializer),a.initializerSignature!=null&&(n.initializerSignature=a.initializerSignature),a.trainingConfig!=null&&(n.trainingConfig=a.trainingConfig)}const i=this.LS.getItem(this.keys.weightData);if(i==null)throw new Error(`In local storage, the binary weight values of model '${this.modelPath}' are missing.`);return n.weightData=joe(i),n}}Wd.URL_SCHEME="localstorage://";const KB=t=>Ee().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(Wd.URL_SCHEME)?rie(t.slice(Wd.URL_SCHEME.length)):null;cr.registerSaveRouter(KB);cr.registerLoadRouter(KB);function rie(t){return new Wd(t)}class sie{constructor(){Y(Ee().getBool("IS_BROWSER"),()=>"Current environment is not a web browser"),Y(typeof window>"u"||typeof window.localStorage<"u",()=>"Current browser does not appear to support localStorage"),this.LS=window.localStorage}async listModels(){const e={},n=Xf+Hl,r=Hl+GB;for(let s=0;s<this.LS.length;++s){const o=this.LS.key(s);if(o.startsWith(n)&&o.endsWith(r)){const i=tie(o);e[i]=JSON.parse(this.LS.getItem(o))}}return e}async removeModel(e){e=nie(e);const n=qB(e);if(this.LS.getItem(n.info)==null)throw new Error(`Cannot find model at path '${e}'`);const r=JSON.parse(this.LS.getItem(n.info));return XB(n),r}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Eh="://";class Qs{constructor(){this.managers={}}static getInstance(){return Qs.instance==null&&(Qs.instance=new Qs),Qs.instance}static registerManager(e,n){Y(e!=null,()=>"scheme must not be undefined or null."),e.endsWith(Eh)&&(e=e.slice(0,e.indexOf(Eh))),Y(e.length>0,()=>"scheme must not be an empty string.");const r=Qs.getInstance();Y(r.managers[e]==null,()=>`A model store manager is already registered for scheme '${e}'.`),r.managers[e]=n}static getManager(e){const n=Qs.getInstance().managers[e];if(n==null)throw new Error(`Cannot find model manager for scheme '${e}'`);return n}static getSchemes(){return Object.keys(Qs.getInstance().managers)}}function Oy(t){if(t.indexOf(Eh)===-1)throw new Error(`The url string provided does not contain a scheme. Supported schemes are: ${Qs.getSchemes().join(",")}`);return{scheme:t.split(Eh)[0],path:t.split(Eh)[1]}}async function YB(t,e,n=!1){Y(t!==e,()=>`Old path and new path are the same: '${t}'`);const r=cr.getLoadHandlers(t);Y(r.length>0,()=>`Copying failed because no load handler is found for source URL ${t}.`),Y(r.length<2,()=>`Copying failed because more than one (${r.length}) load handlers for source URL ${t}.`);const s=r[0],o=cr.getSaveHandlers(e);Y(o.length>0,()=>`Copying failed because no save handler is found for destination URL ${e}.`),Y(o.length<2,()=>`Copying failed because more than one (${r.length}) save handlers for destination URL ${e}.`);const i=o[0],a=Oy(t).scheme,l=Oy(t).path,c=a===Oy(t).scheme,d=await s.load();n&&c&&await Qs.getManager(a).removeModel(l);const f=await i.save(d);return n&&!c&&await Qs.getManager(a).removeModel(l),f.modelArtifactsInfo}async function oie(){const t=Qs.getSchemes(),e={};for(const n of t){const r=await Qs.getManager(n).listModels();for(const s in r){const o=n+Eh+s;e[o]=r[s]}}return e}async function iie(t){const e=Oy(t);return Qs.getManager(e.scheme).removeModel(e.path)}async function aie(t,e){return YB(t,e,!1)}async function lie(t,e){return YB(t,e,!0)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class cie{constructor(){this.messageName="setTimeoutCustom",this.functionRefs=[],this.handledMessageCount=0,this.hasEventListener=!1}fetch(e,n){return fetch(e,n)}now(){return performance.now()}encode(e,n){if(n!=="utf-8"&&n!=="utf8")throw new Error(`Browser's encoder only supports utf-8, but got ${n}`);return this.textEncoder==null&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)}decode(e,n){return new TextDecoder(n).decode(e)}setTimeoutCustom(e,n){if(typeof window>"u"||!Ee().getBool("USE_SETTIMEOUTCUSTOM")){setTimeout(e,n);return}this.functionRefs.push(e),setTimeout(()=>{window.postMessage({name:this.messageName,index:this.functionRefs.length-1},"*")},n),this.hasEventListener||(this.hasEventListener=!0,window.addEventListener("message",r=>{if(r.source===window&&r.data.name===this.messageName){r.stopPropagation();const s=this.functionRefs[r.data.index];s(),this.handledMessageCount++,this.handledMessageCount===this.functionRefs.length&&(this.functionRefs=[],this.handledMessageCount=0)}},!0))}isTypedArray(e){return mB(e)}}if(Ee().get("IS_BROWSER")){Ee().setPlatform("browser",new cie);try{Qs.registerManager(Wd.URL_SCHEME,new sie)}catch{}try{Qs.registerManager(Vd.URL_SCHEME,new Yoe)}catch{}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uie={importFetch:()=>require("node-fetch")};let JS;class die{constructor(){this.util=require("util"),this.textEncoder=new this.util.TextEncoder}fetch(e,n){return Ee().global.fetch!=null?Ee().global.fetch(e,n):(JS==null&&(JS=uie.importFetch()),JS(e,n))}now(){const e=process.hrtime();return e[0]*1e3+e[1]/1e6}encode(e,n){if(n!=="utf-8"&&n!=="utf8")throw new Error(`Node built-in encoder only supports utf-8, but got ${n}`);return this.textEncoder.encode(e)}decode(e,n){return e.length===0?"":new this.util.TextDecoder(n).decode(e)}isTypedArray(e){return this.util.types.isFloat32Array(e)||this.util.types.isInt32Array(e)||this.util.types.isUint8Array(e)||this.util.types.isUint8ClampedArray(e)}}Ee().get("IS_NODE")&&!Ee().get("IS_BROWSER")&&Ee().setPlatform("node",new die);/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gt(t,e="float32",n){return e=e||"float32",Ci(t),new Zr(t,e,n)}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fie(t,e){const n=Q(t,"x","cast");if(!Xse(e))throw new Error(`Failed to cast to unknown dtype ${e}`);if(e==="string"&&n.dtype!=="string"||e!=="string"&&n.dtype==="string")throw new Error("Only strings can be casted to strings");const r={x:n},s={dtype:e};return ae.runKernel(F0,r,s)}const nt=se({cast_:fie});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hie(t){const n={x:Q(t,"x","clone","string_or_numeric")};return ae.runKernel(K0,n)}const Zl=se({clone_:hie});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZB(t,e=!1){console.log(t.toString(e))}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */AB();const pie={buffer:Gt,cast:nt,clone:Zl,print:ZB};Ioe(pie);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mie(t,e){let n=Q(t,"a","add"),r=Q(e,"b","add");[n,r]=wr(n,r);const s={a:n,b:r};return ae.runKernel(Ap,s)}const Ue=se({add_:mie});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gie(t,e){let n=Q(t,"a","floorDiv"),r=Q(e,"b","floorDiv");[n,r]=wr(n,r);const s={a:n,b:r};return ae.runKernel(q0,s)}const qA=se({floorDiv_:gie});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xie(t,e){let n=Q(t,"a","div"),r=Q(e,"b","div");if([n,r]=wr(n,r),n.dtype==="int32"&&r.dtype==="int32")return qA(n,r);const s={a:n,b:r},o={};return ae.runKernel(z0,s,o)}const mt=se({div_:xie});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yie(t,e){let n=Q(t,"a","mul"),r=Q(e,"b","mul");[n,r]=wr(n,r);const s={a:n,b:r};return ae.runKernel(s1,s)}const ie=se({mul_:yie});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bie(t){const e=Q(t,"x","abs");if(e.dtype==="complex64"){const n={x:e};return ae.runKernel(uv,n)}else{const n={x:e};return ae.runKernel(tv,n)}}const Ur=se({abs_:bie});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wie(t){const n={x:Q(t,"x","acos")};return ae.runKernel(A0,n)}const QB=se({acos_:wie});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vie(t){const n={x:Q(t,"x","acosh")};return ae.runKernel(R0,n)}const JB=se({acosh_:vie});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cie(t){Y(Array.isArray(t),()=>"The argument passed to tf.addN() must be a list of tensors"),Y(t.length>=1,()=>`Must pass at least one tensor to tf.addN(), but got ${t.length}`);const e=t.map((s,o)=>Q(s,`tensors${o}`,"addN")),n=e[0];e.forEach(s=>{if(s.dtype!==n.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")}),e.forEach(s=>{if(!nn(s.shape,n.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")});const r=e;return ae.runKernel(nv,r)}const Sie=se({addN_:Cie});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nie(t,e=null,n=!1){const s={x:Q(t,"x","all","bool")},o={axis:e,keepDims:n};return ae.runKernel(BT,s,o)}const XA=se({all_:Nie});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Eie(t,e=null,n=!1){const s={x:Q(t,"x","any","bool")},o={axis:e,keepDims:n};return ae.runKernel(jT,s,o)}const Mb=se({any_:Eie});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Iie(t,e=0){const r={x:Q(t,"x","argMax")},s={axis:e};return ae.runKernel(rv,r,s)}const Kh=se({argMax_:Iie});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kie(t,e=0){const r={x:Q(t,"x","argMin")},s={axis:e};return ae.runKernel(sv,r,s)}const e8=se({argMin_:kie});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tie(t){const n={x:Q(t,"x","asin")};return ae.runKernel(D0,n)}const t8=se({asin_:Tie});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Aie(t){const n={x:Q(t,"x","asinh")};return ae.runKernel($0,n)}const n8=se({asinh_:Aie});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rie(t){const n={x:Q(t,"x","atan")};return ae.runKernel(O0,n)}const r8=se({atan_:Rie});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Die(t,e){let n=Q(t,"a","atan2"),r=Q(e,"b","atan2");[n,r]=wr(n,r);const s={a:n,b:r};return ae.runKernel(P0,s)}const s8=se({atan2_:Die});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $ie(t){const n={x:Q(t,"x","atanh")};return ae.runKernel(_0,n)}const o8=se({atanh_:$ie});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function E1(t,e,n,r,s="NHWC",o){const i=t[3],a=[...e,i],l=mc(s);return ps(t,a,n,o,r,null,null,l)}function ia(t,e,n,r,s,o,i="channelsLast"){const[a,l]=Hg(e);let c;if(i==="channelsLast")c=[a,l,t[3],t[3]];else if(i==="channelsFirst")c=[a,l,t[1],t[1]];else throw new Error(`Unknown dataFormat ${i}`);return ps(t,c,n,r,s,o,!1,i)}function pc(t,e,n,r,s,o,i="NDHWC"){const[a,l,c]=oI(e);let d,f;if(i==="NDHWC")f="channelsLast",d=[a,l,c,t[4],t[4]];else if(i==="NCDHW")f="channelsFirst",d=[a,l,c,t[1],t[1]];else throw new Error(`Unknown dataFormat ${i}`);return $u(t,d,n,r,s,!1,f,o)}function ps(t,e,n,r,s,o,i=!1,a="channelsLast"){let[l,c,d,f]=[-1,-1,-1,-1];if(a==="channelsLast")[l,c,d,f]=t;else if(a==="channelsFirst")[l,f,c,d]=t;else throw new Error(`Unknown dataFormat ${a}`);const[p,g,,x]=e,[b,w]=Hg(n),[C,N]=Hg(r),k=Ih(p,C),I=Ih(g,N),{padInfo:R,outHeight:$,outWidth:O}=Pie(s,c,d,b,w,k,I,o,a),F=i?x*f:x;let M;return a==="channelsFirst"?M=[l,F,$,O]:a==="channelsLast"&&(M=[l,$,O,F]),{batchSize:l,dataFormat:a,inHeight:c,inWidth:d,inChannels:f,outHeight:$,outWidth:O,outChannels:F,padInfo:R,strideHeight:b,strideWidth:w,filterHeight:p,filterWidth:g,effectiveFilterHeight:k,effectiveFilterWidth:I,dilationHeight:C,dilationWidth:N,inShape:t,outShape:M,filterShape:e}}function $u(t,e,n,r,s,o=!1,i="channelsLast",a){let[l,c,d,f,p]=[-1,-1,-1,-1,-1];if(i==="channelsLast")[l,c,d,f,p]=t;else if(i==="channelsFirst")[l,p,c,d,f]=t;else throw new Error(`Unknown dataFormat ${i}`);const[g,x,b,,w]=e,[C,N,k]=oI(n),[I,R,$]=oI(r),O=Ih(g,I),F=Ih(x,R),M=Ih(b,$),{padInfo:_,outDepth:V,outHeight:B,outWidth:W}=Fie(s,c,d,f,C,N,k,O,F,M,a),q=o?w*p:w;let j;return i==="channelsFirst"?j=[l,q,V,B,W]:i==="channelsLast"&&(j=[l,V,B,W,q]),{batchSize:l,dataFormat:i,inDepth:c,inHeight:d,inWidth:f,inChannels:p,outDepth:V,outHeight:B,outWidth:W,outChannels:q,padInfo:_,strideDepth:C,strideHeight:N,strideWidth:k,filterDepth:g,filterHeight:x,filterWidth:b,effectiveFilterDepth:O,effectiveFilterHeight:F,effectiveFilterWidth:M,dilationDepth:I,dilationHeight:R,dilationWidth:$,inShape:t,outShape:j,filterShape:e}}function Oie(t,e,n,r,s){r==null&&(r=KA(t,e,n));const o=t[0],i=t[1],a=Gg((o-e+2*r)/n+1,s),l=Gg((i-e+2*r)/n+1,s);return[a,l]}function _ie(t,e,n,r,s,o){s==null&&(s=KA(t,e[0],r[0]));const i=[0,0,0,n];for(let a=0;a<3;a++)t[a]+2*s>=e[a]&&(i[a]=Gg((t[a]-e[a]+2*s)/r[a]+1,o));return i}function KA(t,e,n,r=1){const s=Ih(e,r);return Math.floor((t[0]*(n-1)-n+s)/2)}function Hg(t){return typeof t=="number"?[t,t,t]:t.length===2?[t[0],t[1],1]:t}function oI(t){return typeof t=="number"?[t,t,t]:t}function Ih(t,e){return e<=1?t:t+(t-1)*(e-1)}function Pie(t,e,n,r,s,o,i,a,l){let c,d,f;if(typeof t=="number"){c={top:t,bottom:t,left:t,right:t,type:t===0?"VALID":"NUMBER"};const g=Oie([e,n],o,r,t,a);d=g[0],f=g[1]}else if(t==="same"){d=Math.ceil(e/r),f=Math.ceil(n/s);const p=Math.max(0,(d-1)*r+o-e),g=Math.max(0,(f-1)*s+i-n),x=Math.floor(p/2),b=p-x,w=Math.floor(g/2),C=g-w;c={top:x,bottom:b,left:w,right:C,type:"SAME"}}else if(t==="valid")c={top:0,bottom:0,left:0,right:0,type:"VALID"},d=Math.ceil((e-o+1)/r),f=Math.ceil((n-i+1)/s);else if(typeof t=="object"){const p=l==="channelsLast"?t[1][0]:t[2][0],g=l==="channelsLast"?t[1][1]:t[2][1],x=l==="channelsLast"?t[2][0]:t[3][0],b=l==="channelsLast"?t[2][1]:t[3][1];c={top:p,bottom:g,left:x,right:b,type:p===0&&g===0&&x===0&&b===0?"VALID":"EXPLICIT"},d=Gg((e-o+p+g)/r+1,a),f=Gg((n-i+x+b)/s+1,a)}else throw Error(`Unknown padding parameter: ${t}`);return{padInfo:c,outHeight:d,outWidth:f}}function Fie(t,e,n,r,s,o,i,a,l,c,d){let f,p,g,x;if(t==="valid"&&(t=0),typeof t=="number"){f={top:t,bottom:t,left:t,right:t,front:t,back:t,type:t===0?"VALID":"NUMBER"};const w=_ie([e,n,r,1],[a,l,c],1,[s,o,i],t,d);p=w[0],g=w[1],x=w[2]}else if(t==="same"){p=Math.ceil(e/s),g=Math.ceil(n/o),x=Math.ceil(r/i);const b=(p-1)*s+a-e,w=(g-1)*o+l-n,C=(x-1)*i+c-r,N=Math.floor(b/2),k=b-N,I=Math.floor(w/2),R=w-I,$=Math.floor(C/2),O=C-$;f={top:I,bottom:R,left:$,right:O,front:N,back:k,type:"SAME"}}else throw Error(`Unknown padding parameter: ${t}`);return{padInfo:f,outDepth:p,outHeight:g,outWidth:x}}function Gg(t,e){if(!e)return Math.trunc(t);switch(e){case"round":return Math.round(t);case"ceil":return Math.ceil(t);case"floor":return Math.floor(t);default:throw new Error(`Unknown roundingMode ${e}`)}}function pu(t){const[e,n,r]=Hg(t);return e===1&&n===1&&r===1}function Es(t,e){return pu(t)||pu(e)}function Ud(t){return Hg(t).every(e=>e>0)}function mc(t){if(t==="NHWC")return"channelsLast";if(t==="NCHW")return"channelsFirst";throw new Error(`Unknown dataFormat ${t}`)}function co(t,e,n){if(n!=null){if(typeof e=="string")throw Error(`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${e}.`);if(typeof e=="number")Y(Gh(e),()=>`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${e}.`);else if(typeof e=="object")e.forEach(r=>{r.forEach(s=>{Y(Gh(s),()=>`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${s}.`)})});else throw Error(`Error in ${t}: Unknown padding parameter: ${e}`)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mie(t,e){const r={x:Q(t,"x","reshape","string_or_numeric")},s={shape:e};return ae.runKernel(Uv,r,s)}const ce=se({reshape_:Mie});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lie(t,e,n,r,s){const o=Q(t,"x","avgPool","float32"),i=1;Y(Es(n,i),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${n} and dilations '${i}'`);let a=o,l=!1;o.rank===3&&(l=!0,a=ce(o,[1,o.shape[0],o.shape[1],o.shape[2]])),Y(a.rank===4,()=>`Error in avgPool: x must be rank 4 but got rank ${a.rank}.`),co("avgPool",r,s);const c={x:a},d={filterSize:e,strides:n,pad:r,dimRoundingMode:s};let f=ae.runKernel(ov,c,d);return f=nt(f,o.dtype),l?ce(f,[f.shape[1],f.shape[2],f.shape[3]]):f}const o2=se({avgPool_:Lie});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bie(t,e,n,r,s,o="NDHWC"){const i=Q(t,"x","avgPool3d","float32");let a=i,l=!1;i.rank===4&&(l=!0,a=ce(i,[1,i.shape[0],i.shape[1],i.shape[2],i.shape[3]])),Y(a.rank===5,()=>`Error in avgPool3d: x must be rank 5 but got rank ${a.rank}.`),Y(o==="NDHWC",()=>`Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of ${o}`),Y(typeof n=="number"&&n>0||Array.isArray(n)&&n[0]>0&&n[1]>0&&n[2]>0,()=>`Error in avgPool3d: Stride must be > 0, but got '${n}'`),co("avgPool3d",r,s);const c={x:a},d={filterSize:e,strides:n,pad:r,dimRoundingMode:s,dataFormat:o};let f=ae.runKernel(iv,c,d);return f=nt(f,a.dtype),l?ce(f,[f.shape[1],f.shape[2],f.shape[3],f.shape[4]]):f}const i8=se({avgPool3d_:Bie});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jie(t,e=0){Y(t.length>=1,()=>"Pass at least one tensor to concat");const n=Fb(t,"tensors","concat","string_or_numeric");if(n[0].dtype==="complex64"&&n.forEach(o=>{if(o.dtype!=="complex64")throw new Error(`Cannot concatenate complex64 tensors with a tensor
          with dtype ${o.dtype}. `)}),n.length===1)return Zl(n[0]);const r=n,s={axis:e};return ae.runKernel(dv,r,s)}const yr=se({concat_:jie});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zie(t,e,n=!1,r=!1){let s=Q(t,"a","matMul"),o=Q(e,"b","matMul");[s,o]=wr(s,o);const i={a:s,b:o},a={transposeA:n,transposeB:r};return ae.runKernel(av,i,a)}const en=se({matMul_:zie});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vie(t){const n={x:Q(t,"x","sigmoid","float32")};return ae.runKernel(m1,n)}const Ta=se({sigmoid_:Vie});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wie(t,e,n){const r=Q(t,"x","slice","string_or_numeric");if(r.rank===0)throw new Error("Slicing scalar is not possible");const s={x:r},o={begin:e,size:n};return ae.runKernel(Kv,s,o)}const Pt=se({slice_:Wie});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Uie(t){const n={x:Q(t,"x","tanh","float32")};return ae.runKernel(v1,n)}const Hd=se({tanh_:Uie});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hie(t,e,n,r,s,o){const i=Q(t,"forgetBias","basicLSTMCell"),a=Q(e,"lstmKernel","basicLSTMCell"),l=Q(n,"lstmBias","basicLSTMCell"),c=Q(r,"data","basicLSTMCell"),d=Q(s,"c","basicLSTMCell"),f=Q(o,"h","basicLSTMCell"),p=yr([c,f],1),g=en(p,a),x=Ue(g,l),b=x.shape[0],w=x.shape[1]/4,C=[b,w],N=Pt(x,[0,0],C),k=Pt(x,[0,w],C),I=Pt(x,[0,w*2],C),R=Pt(x,[0,w*3],C),$=Ue(ie(Ta(N),Hd(k)),ie(d,Ta(Ue(i,I)))),O=ie(Hd($),Ta(R));return[$,O]}const Gie=se({basicLSTMCell_:Hie});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qie(t,e,n){const r=Q(t,"x","batchToSpaceND"),s=e.reduce((a,l)=>a*l);Y(r.rank>=1+e.length,()=>`input rank is ${r.rank} but should be > than blockShape.length ${e.length}`),Y(n.length===e.length,()=>`crops.length is ${n.length} but should be equal to blockShape.length  ${e.length}`),Y(r.shape[0]%s===0,()=>`input tensor batch is ${r.shape[0]} but is not divisible by the product of the elements of blockShape ${e.join(" * ")} === ${s}`);const o={x:r},i={blockShape:e,crops:n};return ae.runKernel(lv,o,i)}const i2=se({batchToSpaceND_:qie});function Xie(t){let e;return t.rank===0||t.rank===1?e=ce(t,[1,1,1,t.size]):t.rank===2?e=ce(t,[1,1,t.shape[0],t.shape[1]]):t.rank===3?e=ce(t,[1,t.shape[0],t.shape[1],t.shape[2]]):e=t,e}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kie(t,e,n,r,s,o){o==null&&(o=.001);const i=Q(t,"x","batchNorm"),a=Q(e,"mean","batchNorm"),l=Q(n,"variance","batchNorm");let c;s!=null&&(c=Q(s,"scale","batchNorm"));let d;r!=null&&(d=Q(r,"offset","batchNorm")),Y(a.rank===l.rank,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),Y(d==null||a.rank===d.rank,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),Y(c==null||a.rank===c.rank,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");const p={x:Xie(i),scale:c,offset:d,mean:a,variance:l},g={varianceEpsilon:o},x=ae.runKernel(wv,p,g);return ce(x,i.shape)}const I1=se({batchNorm_:Kie});function Yie(t,e,n,r,s,o){const i=Q(t,"x","batchNorm"),a=Q(e,"mean","batchNorm"),l=Q(n,"variance","batchNorm");let c;s!=null&&(c=Q(s,"scale","batchNorm"));let d;return r!=null&&(d=Q(r,"offset","batchNorm")),Y(i.rank===2,()=>`Error in batchNorm2D: x must be rank 2 but got rank ${i.rank}.`),Y(a.rank===2||a.rank===1,()=>`Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank ${a.rank}.`),Y(l.rank===2||l.rank===1,()=>`Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank ${l.rank}.`),c!=null&&Y(c.rank===2||c.rank===1,()=>`Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank ${c.rank}.`),d!=null&&Y(d.rank===2||d.rank===1,()=>`Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank ${d.rank}.`),I1(i,a,l,d,c,o)}const a8=se({batchNorm2d_:Yie});function Zie(t,e,n,r,s,o){const i=Q(t,"x","batchNorm"),a=Q(e,"mean","batchNorm"),l=Q(n,"variance","batchNorm");let c;s!=null&&(c=Q(s,"scale","batchNorm"));let d;return r!=null&&(d=Q(r,"offset","batchNorm")),Y(i.rank===3,()=>`Error in batchNorm3D: x must be rank 3 but got rank ${i.rank}.`),Y(a.rank===3||a.rank===1,()=>`Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank ${a.rank}.`),Y(l.rank===3||l.rank===1,()=>`Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank ${l.rank}.`),c!=null&&Y(c.rank===3||c.rank===1,()=>`Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank ${c.rank}.`),d!=null&&Y(d.rank===3||d.rank===1,()=>`Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank ${d.rank}.`),I1(i,a,l,d,c,o)}const l8=se({batchNorm3d_:Zie});function Qie(t,e,n,r,s,o){const i=Q(t,"x","batchNorm"),a=Q(e,"mean","batchNorm"),l=Q(n,"variance","batchNorm");let c;s!=null&&(c=Q(s,"scale","batchNorm"));let d;return r!=null&&(d=Q(r,"offset","batchNorm")),Y(i.rank===4,()=>`Error in batchNorm4D: x must be rank 4 but got rank ${i.rank}.`),Y(a.rank===4||a.rank===1,()=>`Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank ${a.rank}.`),Y(l.rank===4||l.rank===1,()=>`Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank ${l.rank}.`),c!=null&&Y(c.rank===4||c.rank===1,()=>`Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank ${c.rank}.`),d!=null&&Y(d.rank===4||d.rank===1,()=>`Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank ${d.rank}.`),I1(i,a,l,d,c,o)}const c8=se({batchNorm4d_:Qie});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jie(t,e,n){const r=Q(t,"x","bincount"),s=Q(e,"weights","bincount");Y(r.dtype==="int32",()=>`Error in bincount: input dtype must be int32, but got ${r.dtype}`),Y(n>=0,()=>`size must be non-negative, but got ${n}.`),Y(s.size===r.size||s.size===0,()=>`Error in bincount: weights must have the same size as input or0-length, but got input shape: ${r.shape}, weights shape: ${s.shape}.`);const o={x:r,weights:s},i={size:n};return ae.runKernel(WT,o,i)}const u8=se({bincount_:Jie});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eae(t,e){const n=Q(t,"x","bitwiseAnd"),r=Q(e,"y","bitwiseAnd");if(!nn(n.shape,r.shape))throw new Error(`BitwiseAnd: Tensors must have the same shape. x: ${n.shape}, y: ${r.shape}`);if(n.dtype!=="int32"||r.dtype!=="int32")throw new Error(`BitwiseAnd: Only supports 'int32' values in tensor, found type of x: ${n.dtype} and type of y: ${r.dtype}`);const s={a:n,b:r};return ae.runKernel(cv,s)}const tae=se({bitwiseAnd_:eae});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nae(t,e){const n=Q(t,"s0","broadcastArgs","int32"),r=Q(e,"s1","broadcastArgs","int32");if(n.rank!==1)throw new Error(`broadcastArgs(): first input must be a vector (rank=1). Has rank ${n.rank}`);if(r.rank!==1)throw new Error(`broadcastArgs(): second input must be a vector (rank=1). Has rank ${r.rank}`);const s={s0:n,s1:r};return ae.runKernel(UT,s)}const rae=se({broadcastArgs_:nae});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sae(t,e){let n=Q(t,"broadcastTo","x");const r=n.shape;if(Ci(e),e.length<n.rank)throw new Error(`broadcastTo(): shape.length=${e.length} < input.rank=${n.rank}.`);if(e.length>n.rank){const c=n.shape.slice();for(;c.length<e.length;)c.unshift(1);n=ce(n,c)}const s=n.shape,o=Array.from(e);for(let c=e.length-1;c>=0;c--)if(s[c]===e[c])o[c]=1;else if(n.shape[c]!==1)throw new Error(`broadcastTo(): [${r}] cannot be broadcast to [${e}].`);if(o.map((c,d)=>c>1?d:-1).filter(c=>c>=0).length===0)return Zl(n);const a={x:n},l={reps:o};return ae.runKernel(C1,a,l)}const kh=se({broadcastTo_:sae});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oae(t){const n={x:Q(t,"x","ceil","float32")};return ae.runKernel(M0,n)}const d8=se({ceil_:oae});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rp(t,e,n){Ci(t),n=n||kp(e);const r={shape:t,value:e,dtype:n};return ae.runKernel(oA,{},r)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iae(t,e,n){const r=Q(t,"x","clipByValue");if(Y(e<=n,()=>`Error in clip: min (${e}) must be less than or equal to max (${n}).`),e===n)return Rp(r.shape,e,r.dtype);const s={x:r},o={clipValueMin:e,clipValueMax:n};return ae.runKernel(L0,s,o)}const Ko=se({clipByValue_:iae});function aae(t){return yr(t,0)}const f8=se({concat1d_:aae});function lae(t,e){return yr(t,e)}const a2=se({concat2d_:lae});function cae(t,e){return yr(t,e)}const h8=se({concat3d_:cae});function uae(t,e){return yr(t,e)}const p8=se({concat4d_:uae});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dae(t,e,n,r,s="NHWC",o=[1,1],i){const a=Q(t,"x","conv2d","float32"),l=Q(e,"filter","conv2d","float32");let c=a,d=!1;a.rank===3&&(d=!0,c=ce(a,[1,a.shape[0],a.shape[1],a.shape[2]])),Y(c.rank===4,()=>`Error in conv2d: input must be rank 4, but got rank ${c.rank}.`),Y(l.rank===4,()=>`Error in conv2d: filter must be rank 4, but got rank ${l.rank}.`),co("conv2d",r,i);const f=s==="NHWC"?c.shape[3]:c.shape[1];Y(f===l.shape[2],()=>`Error in conv2d: depth of input (${f}) must match input depth for filter ${l.shape[2]}.`),Y(Es(n,o),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${o}'`),Y(Ud(o),()=>"Error in conv2D: Dilated rates should be larger than 0."),Y(Ud(n),()=>"Error in conv2D: Strides should be larger than 0.");const p={x:c,filter:l},g={strides:n,pad:r,dataFormat:s,dilations:o,dimRoundingMode:i},x=ae.runKernel(fv,p,g);return d?ce(x,[x.shape[1],x.shape[2],x.shape[3]]):x}const mu=se({conv2d_:dae});function fae(t,e,n,r,s="NWC",o=1,i){const a=Q(t,"x","conv1d"),l=Q(e,"filter","conv1d");let c=a,d=!1;a.rank===2&&(d=!0,c=ce(a,[1,a.shape[0],a.shape[1]])),Y(c.rank===3,()=>`Error in conv1d: input must be rank 3, but got rank ${c.rank}.`),Y(l.rank===3,()=>`Error in conv1d: filter must be rank 3, but got rank ${l.rank}.`),co("conv1d",r,i),Y(c.shape[2]===l.shape[1],()=>`Error in conv1d: depth of input (${c.shape[2]}) must match input depth for filter ${l.shape[1]}.`),Y(Es(n,o),()=>`Error in conv1D: Either stride or dilation must be 1. Got stride ${n} and dilation '${o}'`),Y(Ud(o),()=>"Error in conv1D: Dilated rates should be larger than 0."),Y(Ud(n),()=>"Error in conv1D: Stride should be larger than 0."),Y(s==="NWC",()=>`Error in conv1d: got dataFormat of ${s} but only NWC is currently supported.`);const f=ce(l,[1,l.shape[0],l.shape[1],l.shape[2]]),p=ce(c,[c.shape[0],1,c.shape[1],c.shape[2]]),w=mu(p,f,[1,n],r,"NHWC",[1,o],i);return d?ce(w,[w.shape[2],w.shape[3]]):ce(w,[w.shape[0],w.shape[2],w.shape[3]])}const YA=se({conv1d_:fae});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hae(t,e,n,r,s,o="NHWC",i){Y(t.length===e.rank,()=>`Length of inShape (${t.length}) and rank of dy (${e.rank}) must match`);let a=t,l=e,c=!1;e.rank===3&&(c=!0,l=ce(e,[1,e.shape[0],e.shape[1],e.shape[2]]),a=[1,t[0],t[1],t[2]]),Y(a.length===4,()=>`Error in conv2dDerInput: inShape must be length 4, but got length ${a.length}.`),Y(l.rank===4,()=>`Error in conv2dDerInput: dy must be rank 4, but got rank ${l.rank}`),Y(n.rank===4,()=>`Error in conv2dDerInput: filter must be rank 4, but got rank ${n.rank}`);const d=o==="NHWC"?a[3]:a[1],f=o==="NHWC"?l.shape[3]:l.shape[1];Y(d===n.shape[2],()=>`Error in conv2dDerInput: depth of input (${d}) must match input depth for filter ${n.shape[2]}.`),Y(f===n.shape[3],()=>`Error in conv2dDerInput: depth of output (${f}) must match output depth for filter ${n.shape[3]}.`),co("conv2dDerInput",s,i);const p={dy:l,filter:n},g={strides:r,pad:s,dataFormat:o,dimRoundingMode:i,inputShape:a},x=ae.runKernel(hv,p,g);return c?ce(x,[x.shape[1],x.shape[2],x.shape[3]]):x}const ZA=se({conv2DBackpropInput_:hae});function pae(t,e,n,r,s,o){const i=Q(t,"x","conv2dTranspose"),a=Q(e,"filter","conv2dTranspose");return ZA(n,i,a,r,s,"NHWC",o)}const QA=se({conv2dTranspose_:pae});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mae(t,e,n,r,s="NDHWC",o=[1,1,1]){const i=Q(t,"x","conv3d"),a=Q(e,"filter","conv3d");let l=i,c=!1;i.rank===4&&(c=!0,l=ce(i,[1,i.shape[0],i.shape[1],i.shape[2],i.shape[3]])),Y(l.rank===5,()=>`Error in conv3d: input must be rank 5, but got rank ${l.rank}.`),Y(a.rank===5,()=>`Error in conv3d: filter must be rank 5, but got rank ${a.rank}.`),Y(l.shape[4]===a.shape[3],()=>`Error in conv3d: depth of input (${l.shape[4]}) must match input depth for filter ${a.shape[3]}.`),Y(Es(n,o),()=>`Error in conv3D: Either strides or dilations must be 1. Got strides ${n} and dilations '${o}'`),Y(s==="NDHWC",()=>`Error in conv3d: got dataFormat of ${s} but only NDHWC is currently supported.`),Y(Ud(o),()=>"Error in conv3D: Dilated rates should be larger than 0."),Y(Ud(n),()=>"Error in conv3D: Strides should be larger than 0.");const d={x:l,filter:a},f={strides:n,pad:r,dataFormat:s,dilations:o},p=ae.runKernel(pv,d,f);return c?ce(p,[p.shape[1],p.shape[2],p.shape[3],p.shape[4]]):p}const m8=se({conv3d_:mae});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gae(t,e,n,r,s){Y(t.length===e.rank,()=>`Length of inShape (${t.length}) and rank of dy (${e.rank}) must match`);let o=t,i=e,a=!1;e.rank===4&&(a=!0,i=ce(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]]),o=[1,t[0],t[1],t[2],t[3]]);const l=o[4],c=i.shape[4];Y(o.length===5,()=>`Error in conv3dDerInput: inShape must be length 5, but got length ${o.length}.`),Y(i.rank===5,()=>`Error in conv3dDerInput: dy must be rank 5, but got rank ${i.rank}`),Y(n.rank===5,()=>`Error in conv3dDerInput: filter must be rank 5, but got rank ${n.rank}`),Y(l===n.shape[3],()=>`Error in conv3dDerInput: depth of input (${l}) must match input depth for filter ${n.shape[3]}.`),Y(c===n.shape[4],()=>`Error in conv3dDerInput: depth of output (${c}) must match output depth for filter ${n.shape[4]}.`);const d={dy:i,filter:n},f={pad:s,strides:r,inputShape:o},p=ae.runKernel(XT,d,f);return a?ce(p,[p.shape[1],p.shape[2],p.shape[3],p.shape[4]]):p}const g8=se({conv3DBackpropInput_:gae});function xae(t,e,n,r,s){const o=Q(t,"x","conv3dTranspose"),i=Q(e,"filter","conv3dTranspose");return g8(n,o,i,r,s)}const x8=se({conv3dTranspose_:xae});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yae(t){const n={x:Q(t,"x","cos","float32")};return ae.runKernel(B0,n)}const l2=se({cos_:yae});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bae(t){const n={x:Q(t,"x","cosh","float32")};return ae.runKernel(j0,n)}const JA=se({cosh_:bae});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wae(t,e=0,n=!1,r=!1){const o={x:Q(t,"x","cumprod")},i={axis:e,exclusive:n,reverse:r};return ae.runKernel(KT,o,i)}const Lb=se({cumprod_:wae});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vae(t,e=0,n=!1,r=!1){const o={x:Q(t,"x","cumsum")},i={axis:e,exclusive:n,reverse:r};return ae.runKernel(mv,o,i)}const e3=se({cumsum_:vae});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cae(t,e,n,r=!1){const s=Q(t,"x","denseBincount"),o=Q(e,"weights","denseBincount");Y(s.dtype==="int32",()=>`Error in denseBincount: input dtype must be int32, but got ${s.dtype}`),Y(s.rank<=2,()=>`Error in denseBincount: input must be at most rank 2, but got rank ${s.rank}.`),Y(n>=0,()=>`size must be non-negative, but got ${n}.`),Y(o.size===s.size||o.size===0,()=>`Error in denseBincount: weights must have the same shape as x or 0-length, but got x shape: ${s.shape}, weights shape: ${o.shape}.`);const i={x:s,weights:o},a={size:n,binaryOutput:r};return ae.runKernel(ZT,i,a)}const iI=se({denseBincount_:Cae});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Sae(t,e,n="NHWC"){const r=Q(t,"x","depthToSpace","float32"),s=n==="NHWC"?r.shape[1]:r.shape[2],o=n==="NHWC"?r.shape[2]:r.shape[3],i=n==="NHWC"?r.shape[3]:r.shape[1];Y(e>1,()=>`blockSize should be > 1 for depthToSpace, but was: ${e}`),Y(s*e>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${s} and ${e}  for depthToSpace with input shape
    ${r.shape}`),Y(o*e>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${o} and ${e} for depthToSpace with input shape
        ${r.shape}`),Y(i%(e*e)===0,()=>`Dimension size must be evenly divisible by ${e*e} but is ${i} for depthToSpace with input shape ${r.shape}`);const a={x:r},l={blockSize:e,dataFormat:n};return ae.runKernel(QT,a,l)}const y8=se({depthToSpace_:Sae});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nae(t,e,n,r,s="NHWC",o=[1,1],i){const a=Q(t,"x","depthwiseConv2d","float32"),l=Q(e,"filter","depthwiseConv2d","float32");let c=a,d=!1;a.rank===3&&(d=!0,c=ce(a,[1,a.shape[0],a.shape[1],a.shape[2]])),Y(c.rank===4,()=>`Error in depthwiseConv2d: input must be rank 4, but got rank ${c.rank}.`),Y(l.rank===4,()=>`Error in depthwiseConv2d: filter must be rank 4, but got rank ${l.rank}.`);const f=s==="NHWC"?c.shape[3]:c.shape[1];Y(f===l.shape[2],()=>`Error in depthwiseConv2d: number of input channels (${f}) must match the inChannels dimension in filter ${l.shape[2]}.`),co("depthwiseConv2d",r,i);const p={x:c,filter:l},g={strides:n,pad:r,dataFormat:s,dilations:o,dimRoundingMode:i},x=ae.runKernel(gv,p,g);return d?ce(x,[x.shape[1],x.shape[2],x.shape[3]]):x}const k1=se({depthwiseConv2d_:Nae});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Eae(t){const n={x:Q(t,"x","diag")};return ae.runKernel(tA,n)}const Iae=se({diag_:Eae});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kae(t,e,n,r,s=[1,1],o="NHWC"){const i=Q(t,"x","dilation2d"),a=Q(e,"filter","dilation2d");Y(i.rank===3||i.rank===4,()=>`Error in dilation2d: input must be rank 3 or 4, but got rank ${i.rank}.`),Y(a.rank===3,()=>`Error in dilation2d: filter must be rank 3, but got rank ${a.rank}.`),Y(o==="NHWC",()=>`Error in dilation2d: Only NHWC is currently supported, but got dataFormat of ${o}`);let l=i,c=!1;i.rank===3&&(l=ce(i,[1,i.shape[0],i.shape[1],i.shape[2]]),c=!0),Y(l.shape[3]===a.shape[2],()=>`Error in dilation2d:  input and filter must have the same depth: ${l.shape[3]} vs ${a.shape[2]}`);const d={x:l,filter:a},f={strides:n,pad:r,dilations:s},p=ae.runKernel(xv,d,f);return c?ce(p,[p.shape[1],p.shape[2],p.shape[3]]):p}const b8=se({dilation2d_:kae});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yh(t,e){const n=t.length,r=[];for(let s=0;s<n;s++){const o=n-1-s,i=t[o]||1;(e[e.length-1-s]||1)>1&&i===1&&r.unshift(o)}return r}function es(t,e){const n=[];for(let r=0;r<e.length;r++){const s=t[t.length-r-1],o=e.length-r-1,i=e[o];(s==null||s===1&&i>1)&&n.unshift(o)}return n}function jt(t,e){const n=Math.max(t.length,e.length),r=new Array(n);for(let s=0;s<n;s++){let o=t[t.length-s-1];o==null&&(o=1);let i=e[e.length-s-1];if(i==null&&(i=1),o===1)r[n-s-1]=i;else if(i===1)r[n-s-1]=o;else if(o!==i){const a=`Operands could not be broadcast together with shapes ${t} and ${e}.`;throw Error(a)}else r[n-s-1]=o}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tae(t,e){let n=Q(t,"a","equal","string_or_numeric"),r=Q(e,"b","equal","string_or_numeric");[n,r]=wr(n,r),jt(n.shape,r.shape);const s={a:n,b:r};return ae.runKernel(yv,s)}const Oa=se({equal_:Tae});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Aae(t,e,n){const r=Q(e,"a","where"),s=Q(n,"b","where"),o=Q(t,"condition","where","bool"),i=jt(jt(o.shape,r.shape),s.shape),a=kh(o,i),l=kh(r,i),c=kh(s,i),d={condition:a,t:l,e:c};return ae.runKernel(Xv,d)}const js=se({where_:Aae});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rae(t){const n={x:Q(t,"x","zerosLike")};return ae.runKernel(r2,n)}const ln=se({zerosLike_:Rae});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dae(t,e){let n=Q(t,"a","div"),r=Q(e,"b","div");[n,r]=wr(n,r);const s=mt(n,r),o=ln(s),i=Oa(r,o);return js(i,o,s)}const w8=se({divNoNan_:Dae});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $ae(t,e){const n=Q(t,"t1","dot"),r=Q(e,"t2","dot");Y((n.rank===1||n.rank===2)&&(r.rank===1||r.rank===2),()=>`Error in dot: inputs must all be rank 1 or 2, but got ranks ${n.rank} and ${r.rank}.`);const s=n.rank===1?n.size:n.shape[1],o=r.rank===1?r.size:r.shape[0];if(Y(s===o,()=>`Error in dot: inner dimensions of inputs must match, but got ${s} and ${o}.`),n.rank===1&&r.rank===1){const i=ce(n,[1,-1]),a=ce(r,[-1,1]),l=en(i,a);return ce(l,[])}else if(n.rank===1&&r.rank===2){const i=ce(n,[1,-1]),a=ce(r,[r.shape[0],r.shape[1]]),l=en(i,a);return ce(l,[l.size])}else if(n.rank===2&&r.rank===1){const i=ce(r,[-1,1]),a=en(n,i);return ce(a,[a.size])}else{const i=ce(r,[r.shape[0],r.shape[1]]);return en(n,i)}}const v8=se({dot_:$ae});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Oae(t,...e){const n=e.map((s,o)=>Q(s,`tensors${o}`,"einsum")),r={equation:t};return ae.runKernel(nA,n,r)}const Kf=se({einsum_:Oae});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _ae(t){const n={x:Q(t,"x","elu","float32")};return ae.runKernel(V0,n)}const T1=se({elu_:_ae});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pae(t,e){const n=Q(t,"x","ensureShape","string_or_numeric");if(!Gse(n.shape,e))throw new Error(`EnsureShape: Shape of tensor ${n.shape} is not compatible with expected shape ${e}`);return t}const Fae=se({ensureShape_:Pae});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mae(t){let e=Q(t,"x","erf");Y(e.dtype==="int32"||e.dtype==="float32",()=>"Input dtype must be `int32` or `float32`."),e.dtype==="int32"&&(e=nt(e,"float32"));const n={x:e};return ae.runKernel(W0,n)}const t3=se({erf_:Mae});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function n3(t,e){for(let n=0;n<t.length;++n)if(t[t.length-n-1]!==e-1-n)return!1;return!0}function C8(t,e,n){const r=t.length+e.length,s=[];let o=0,i=0;for(let a=0;a<r;a++)n.indexOf(a)===-1?s.push(t[o++]):s.push(e[i++]);return s}function ms(t,e){const n=[],r=t.length;for(let o=0;o<r;o++)e.indexOf(o)===-1&&n.push(t[o]);const s=e.map(o=>t[o]);return[n,s]}function Dr(t,e){const n=e.map(r=>1);return C8(t,n,e)}function Is(t,e,n){Y(n3(e,n),()=>`${t} supports only inner-most axes for now. Got axes ${e} and rank-${n} input.`)}function fr(t,e){if(n3(t,e))return null;const n=[];for(let r=0;r<e;++r)t.indexOf(r)===-1&&n.push(r);return t.forEach(r=>n.push(r)),n}function Ou(t){return t.map((e,n)=>[n,e]).sort((e,n)=>e[1]-n[1]).map(e=>e[0])}function $r(t,e){const n=[];for(let r=e-t;r<e;++r)n.push(r);return n}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lae(t,e=null,n=!1){const s={x:Q(t,"x","max")},o={reductionIndices:e,keepDims:n};return ae.runKernel(Rv,s,o)}const Zi=se({max_:Lae});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bae(t,e=null,n=!1){const s={x:Q(t,"x","min")},o={axis:e,keepDims:n};return ae.runKernel(_v,s,o)}const qg=se({min_:Bae});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jae(t,e){let n=Q(t,"base","pow"),r=Q(e,"exp","pow");[n,r]=wr(n,r);const s={a:n,b:r};return ae.runKernel(o1,s)}const oc=se({pow_:jae});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kt(t,e){if((ta(t)&&e!=="string"||Array.isArray(t))&&e!=="complex64")throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if(e==="string"&&ta(t)&&!(t instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return Du(t,[],[],e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zae(t){const n={x:Q(t,"x","sqrt","float32")};return ae.runKernel(x1,n)}const Ns=se({sqrt_:zae});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vae(t){const e=Q(t,"x","square"),n={};return ae.runKernel("Square",{x:e},n)}const Fn=se({square_:Vae});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wae(t,e=null,n=!1){let r=Q(t,"x","sum");r.dtype==="bool"&&(r=nt(r,"int32"));const s={x:r},o={axis:e,keepDims:n};return ae.runKernel(Yv,s,o)}const bt=se({sum_:Wae});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Uae(t,e="euclidean",n=null,r=!1){t=Q(t,"x","norm");const s=S8(t,e,n);let o=s.shape;if(r){const i=Zt(n,t.shape);o=Dr(s.shape,i)}return ce(s,o)}function S8(t,e,n=null){if(t.rank===0)return Ur(t);if(t.rank!==1&&n===null)return S8(ce(t,[-1]),e,n);if(t.rank===1||typeof n=="number"||Array.isArray(n)&&n.length===1){if(e===1)return bt(Ur(t),n);if(e===1/0)return Zi(Ur(t),n);if(e===-1/0)return qg(Ur(t),n);if(e==="euclidean"||e===2)return Ns(bt(oc(Ur(t),kt(2,"int32")),n));throw new Error(`Error in norm: invalid ord value: ${e}`)}if(Array.isArray(n)&&n.length===2){if(e===1)return Zi(bt(Ur(t),n[0]),n[1]-1);if(e===1/0)return Zi(bt(Ur(t),n[1]),n[0]);if(e===-1/0)return qg(bt(Ur(t),n[1]),n[0]);if(e==="fro"||e==="euclidean")return Ns(bt(Fn(t),n));throw new Error(`Error in norm: invalid ord value: ${e}`)}throw new Error(`Error in norm: invalid axis: ${n}`)}const A1=se({norm_:Uae});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hae(t,e=null,n=!1){return A1(t,"euclidean",e,n)}const N8=se({euclideanNorm_:Hae});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gae(t){const n={x:Q(t,"x","exp")};return ae.runKernel(U0,n)}const Yo=se({exp_:Gae});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qae(t,e=0){const n=Q(t,"x","expandDims","string_or_numeric");Y(e<=n.rank,()=>"Axis must be <= rank of the tensor");const r={input:n},s={dim:e};return ae.runKernel(bv,r,s)}const Ls=se({expandDims_:qae});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xae(t){const n={x:Q(t,"x","expm1")};return ae.runKernel(H0,n)}const E8=se({expm1_:Xae});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kae(t,e){const n=Q(t,"x","tile","string_or_numeric");Y(n.rank===e.length,()=>`Error in transpose: rank of input ${n.rank} must match length of reps ${e}.`);const r={x:n},s={reps:e};return ae.runKernel(C1,r,s)}const Hi=se({tile_:Kae});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yae(t,e,n,r="float32"){e==null&&(e=t);const s=Gt([t,e],r),o=t<=e?t:e;for(let a=0;a<o;++a)s.set(1,a,a);const i=ce(s.toTensor(),[t,e]);if(n==null)return i;if(n.length===1)return Hi(Ls(i,0),[n[0],1,1]);if(n.length===2)return Hi(Ls(Ls(i,0),0),[n[0],n[1],1,1]);if(n.length===3)return Hi(Ls(Ls(Ls(i,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error(`eye() currently supports only 1D and 2D batchShapes, but received ${n.length}D.`)}const r3=se({eye_:Yae});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zae(t){const n={x:Q(t,"x","floor","float32")};return ae.runKernel(G0,n)}const R1=se({floor_:Zae});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qae(t,e,n=0,r=0){const s=Q(t,"x","gather"),o=Q(e,"indices","gather","int32"),i={x:s,indices:o},a={axis:n,batchDims:r};return ae.runKernel(vv,i,a)}const D1=se({gather_:Qae});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jae(t,e){let n=Q(t,"a","greater","string_or_numeric"),r=Q(e,"b","greater","string_or_numeric");[n,r]=wr(n,r),jt(n.shape,r.shape);const s={a:n,b:r};return ae.runKernel(Cv,s)}const ri=se({greater_:Jae});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ele(t,e){let n=Q(t,"a","greaterEqual","string_or_numeric"),r=Q(e,"b","greaterEqual","string_or_numeric");[n,r]=wr(n,r),jt(n.shape,r.shape);const s={a:n,b:r};return ae.runKernel(X0,s)}const _u=se({greaterEqual_:ele});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tle(t){const n={input:Q(t,"input","imag")};return ae.runKernel(cA,n)}const c2=se({imag_:tle});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nle(t){const n={x:Q(t,"x","isFinite")};return ae.runKernel(Y0,n)}const I8=se({isFinite_:nle});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rle(t){const n={x:Q(t,"x","isInf")};return ae.runKernel(Z0,n)}const k8=se({isInf_:rle});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sle(t){const n={x:Q(t,"x","isNaN")};return ae.runKernel(Q0,n)}const T8=se({isNaN_:sle});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ole(t,e=.2){const r={x:Q(t,"x","leakyRelu")},s={alpha:e};return ae.runKernel(Sv,r,s)}const u2=se({leakyRelu_:ole});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ile(t,e){let n=Q(t,"a","less","string_or_numeric"),r=Q(e,"b","less","string_or_numeric");[n,r]=wr(n,r),jt(n.shape,r.shape);const s={a:n,b:r};return ae.runKernel(Nv,s)}const Xg=se({less_:ile});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ale(t,e){let n=Q(t,"a","lessEqual","string_or_numeric"),r=Q(e,"b","lessEqual","string_or_numeric");[n,r]=wr(n,r),jt(n.shape,r.shape);const s={a:n,b:r};return ae.runKernel(Ev,s)}const ff=se({lessEqual_:ale});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lle(t,e,n){if(n<=0)throw new Error("The number of values should be positive.");const r={start:t,stop:e,num:n};return ae.runKernel(uA,{},r)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cle(t,e=5,n=1,r=1,s=.5){const o=Q(t,"x","localResponseNormalization");Y(o.rank===4||o.rank===3,()=>`Error in localResponseNormalization: x must be rank 3 or 4 but got
               rank ${o.rank}.`),Y(Gh(e),()=>`Error in localResponseNormalization: depthRadius must be an integer but got depthRadius ${e}.`);let i=o,a=!1;o.rank===3&&(a=!0,i=ce(o,[1,o.shape[0],o.shape[1],o.shape[2]]));const l={x:i},c={depthRadius:e,bias:n,alpha:r,beta:s},d=ae.runKernel(Av,l,c);return a?ce(d,[d.shape[1],d.shape[2],d.shape[3]]):d}const A8=se({localResponseNormalization_:cle});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ule(t){const n={x:Q(t,"x","log","float32")};return ae.runKernel(J0,n)}const xi=se({log_:ule});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dle(t){const n={x:Q(t,"x","log1p")};return ae.runKernel(e1,n)}const d2=se({log1p_:dle});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fle(t,e){Y(zE(t),()=>"The f passed in variableGrads(f) must be a function"),Y(e==null||Array.isArray(e)&&e.every(c=>c instanceof Pb),()=>"The varList passed in variableGrads(f, varList) must be an array of variables");const n=e!=null;if(!n){e=[];for(const c in ae.registeredVariables)e.push(ae.registeredVariables[c])}const r=n?e.filter(c=>!c.trainable):null,s=e.length;e=e.filter(c=>c.trainable),Y(e.length>0,()=>`variableGrads() expects at least one of the input variables to be trainable, but none of the ${s} variables is trainable.`);const o=!0,{value:i,grads:a}=ae.gradients(t,e,null,o);Y(a.some(c=>c!=null),()=>"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."),Y(i.rank===0,()=>`The f passed in variableGrads(f) must return a scalar, but it returned a rank-${i.rank} tensor`);const l={};return e.forEach((c,d)=>{a[d]!=null&&(l[c.name]=a[d])}),r!=null&&r.forEach(c=>l[c.name]=null),{value:i,grads:l}}function ic(t){return ae.customGrad(t)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hle(t){const n={x:Q(t,"x","neg")};return ae.runKernel(Fv,n)}const Jn=se({neg_:hle});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ple(t){const n={x:Q(t,"x","softplus")};return ae.runKernel(g1,n)}const Dp=se({softplus_:ple});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mle(t){const e=Q(t,"x","logSigmoid");return ic(r=>({value:Jn(Dp(Jn(r))),gradFunc:i=>ie(i,Ta(Jn(r)))}))(e)}const R8=se({logSigmoid_:mle});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gle(t,e){let n=Q(t,"a","sub"),r=Q(e,"b","sub");[n,r]=wr(n,r);const s={a:n,b:r};return ae.runKernel(b1,s)}const lt=se({sub_:gle});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xle(t,e=-1){const n=Q(t,"logits","logSoftmax");if(e===-1&&(e=n.rank-1),e!==n.rank-1)throw Error(`Log Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and axis was ${e}`);return ic((s,o)=>{const a=Zi(s,e,!0),l=lt(s,a),c=lt(nt(l,"float32"),xi(bt(Yo(l),e,!0)));return o([c]),{value:c,gradFunc:(f,p)=>{const[g]=p,x=!0,b=Yo(g);return lt(f,ie(bt(f,e,x),b))}}})(n)}const s3=se({logSoftmax_:xle});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yle(t,e=null,n=!1){const r=Q(t,"x","logSumExp"),s=Zt(e,r.shape),o=Zi(r,s,!0),i=lt(r,o),a=Yo(i),l=bt(a,s),c=xi(l),d=Ue(ce(o,c.shape),c);if(n){const f=Dr(d.shape,s);return ce(d,f)}return d}const f2=se({logSumExp_:yle});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ble(t,e){const n=Q(t,"a","logicalAnd","bool"),r=Q(e,"b","logicalAnd","bool");jt(n.shape,r.shape);const s={a:n,b:r};return ae.runKernel(Iv,s)}const Nl=se({logicalAnd_:ble});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wle(t){const n={x:Q(t,"x","logicalNot","bool")};return ae.runKernel(kv,n)}const h2=se({logicalNot_:wle});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vle(t,e){const n=Q(t,"a","logicalOr","bool"),r=Q(e,"b","logicalOr","bool");jt(n.shape,r.shape);const s={a:n,b:r};return ae.runKernel(Tv,s)}const o3=se({logicalOr_:vle});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cle(t,e){const n=Q(t,"a","logicalXor","bool"),r=Q(e,"b","logicalXor","bool");return jt(n.shape,r.shape),Nl(o3(t,e),h2(Nl(t,e)))}const D8=se({logicalXor_:Cle});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ux=2147483648;function Sle(t,e,n="left"){const r=Q(t,"sortedSequence","searchSorted"),s=Q(e,"values","searchSorted"),o=r.shape[r.shape.length-1],i=s.shape[s.shape.length-1],a=ce(r,[-1,o]),l=ce(s,[-1,i]);if(a.rank<2)throw new Error("Sorted input argument must be at least 2-dimensional");if(a.shape[0]!==l.shape[0])throw new Error("Leading dimension of 'sortedSequence' and 'values' must match.");if(Te(l.shape)>=Ux)throw new Error(`values tensor size must less than ${Ux}`);if(a.shape[1]>=Ux)throw new Error(`trailing dim_size must less than ${Ux} for int32 output type, was ${a.shape[1]}`);const c={sortedSequence:a,values:l},d={side:n};return ae.runKernel(TA,c,d)}const i3=se({searchSorted_:Sle});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nle(t,e){return i3(t,e,"left")}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ele(t,e,n,r,s){const o=Q(t,"x","maxPool"),i=1;let a=o,l=!1;o.rank===3&&(l=!0,a=ce(o,[1,o.shape[0],o.shape[1],o.shape[2]])),Y(a.rank===4,()=>`Error in maxPool: input must be rank 4 but got rank ${a.rank}.`),Y(Es(n,i),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${n} and dilations '${i}'`),co("maxPool",r,s);const c={x:a},d={filterSize:e,strides:n,pad:r,dimRoundingMode:s},f=ae.runKernel(Dv,c,d);return l?ce(f,[f.shape[1],f.shape[2],f.shape[3]]):f}const p2=se({maxPool_:Ele});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ile(t,e=[1,1,1],n,r,s,o="NDHWC"){const i=Q(t,"x","maxPool3d");let a=i,l=!1;i.rank===4&&(l=!0,a=ce(i,[1,i.shape[0],i.shape[1],i.shape[2],i.shape[3]])),Y(a.rank===5,()=>`Error in maxPool3d: x must be rank 5 but got rank ${a.rank}.`),Y(o==="NDHWC",()=>`Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of ${o}`),co("maxPool3d",r,s);const c={x:a},d={filterSize:e,strides:n,pad:r,dimRoundingMode:s,dataFormat:o},f=ae.runKernel($v,c,d);return l?ce(f,[f.shape[1],f.shape[2],f.shape[3],f.shape[4]]):f}const $8=se({maxPool3d_:Ile});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kle(t,e,n,r,s=!1){const i={x:Q(t,"x","maxPoolWithArgmax")},a={filterSize:e,strides:n,pad:r,includeBatchInIndex:s},l=ae.runKernel(pA,i,a);return{result:l[0],indexes:l[1]}}const Tle=se({maxPoolWithArgmax_:kle});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ale(t,e){let n=Q(t,"a","maximum"),r=Q(e,"b","maximum");[n,r]=wr(n,r),n.dtype==="bool"&&(n=nt(n,"int32"),r=nt(r,"int32")),jt(n.shape,r.shape);const s={a:n,b:r};return ae.runKernel(t1,s)}const gc=se({maximum_:Ale});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rle(t,e=null,n=!1){const s={x:Q(t,"x","mean")},o={axis:e,keepDims:n};return ae.runKernel(Ov,s,o)}const gr=se({mean_:Rle});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qr(t,e="float32"){if(Ci(t),e==="complex64"){const r=qr(t,"float32"),s=qr(t,"float32");return fu(r,s)}const n=Vs(Te(t),e);return ae.makeTensor(n,t,e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jo(t,e="float32"){if(Ci(t),e==="complex64"){const r=jo(t,"float32"),s=qr(t,"float32");return fu(r,s)}const n=MT(Te(t),e);return ae.makeTensor(n,t,e)}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dle(t,e,{indexing:n="xy"}={}){if(n!=="xy"&&n!=="ij")throw new TypeError(`${n} is not a valid third argument to meshgrid`);if(t===void 0)return[];let r=Q(t,"x","meshgrid",t instanceof Tn?t.dtype:"float32");if(e===void 0)return[r];let s=Q(e,"y","meshgrid",e instanceof Tn?e.dtype:"float32");const o=Te(r.shape),i=Te(s.shape);return n==="xy"?(r=ce(r,[1,-1]),s=ce(s,[-1,1]),[en(jo([i,1],r.dtype),r),en(s,jo([1,o],s.dtype))]):(r=ce(r,[-1,1]),s=ce(s,[1,-1]),[en(r,jo([1,i],r.dtype)),en(jo([o,1],s.dtype),s)])}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $le(t,e){let n=Q(t,"a","minimum"),r=Q(e,"b","minimum");[n,r]=wr(n,r),n.dtype==="bool"&&(n=nt(n,"int32"),r=nt(r,"int32")),jt(n.shape,r.shape);const s={a:n,b:r};return ae.runKernel(n1,s)}const Gd=se({minimum_:$le});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ole(t,e,n){Y(n==="reflect"||n==="symmetric",()=>`Invalid mode. Mode must be either reflect or symmetric. Got ${n}.`);const r=Q(t,"x","mirrorPad");if(r.rank===0)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");Y(e.length===r.rank,()=>`Padding doesn't match input. Must be ${r.rank}. Got ${e.length}.`);const s=n==="reflect"?1:0;for(let a=0;a<r.rank;a++)Y(e[a].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),Y(e[a][0]>=0&&e[a][0]<=r.shape[a]-s&&e[a][1]>=0&&e[a][1]<=r.shape[a]-s,()=>`Padding in dimension ${a} cannot be greater than or equal to ${r.shape[a]-s} or less than 0 for input of shape ${r.shape}`);const o={paddings:e,mode:n},i={x:r};return ae.runKernel(Pv,i,o)}const O8=se({mirrorPad_:Ole});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _le(t,e){let n=Q(t,"a","mod"),r=Q(e,"b","mod");[n,r]=wr(n,r);const s={a:n,b:r};return ae.runKernel(r1,s)}const _8=se({mod_:_le});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ple(t,e=null,n=!1){t=Q(t,"x","moments");const r=Zt(e,t.shape),s=gr(t,r,n);let o=s.shape;n||(o=Dr(s.shape,r));const i=Fn(lt(nt(t,"float32"),ce(s,o))),a=gr(i,r,n);return{mean:s,variance:a}}const m2=se({moments_:Ple});function Fle(t,e,n,r){const s=Q(e,"data","multiRNNCell"),o=Fb(n,"c","multiRNNCell"),i=Fb(r,"h","multiRNNCell");let a=s;const l=[];for(let f=0;f<t.length;f++){const p=t[f](a,o[f],i[f]);l.push(p[0]),l.push(p[1]),a=p[1]}const c=[],d=[];for(let f=0;f<l.length;f+=2)c.push(l[f]),d.push(l[f+1]);return[c,d]}const Mle=se({multiRNNCell_:Fle});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lle(t,e,n,r=!1){const s=Q(t,"logits","multinomial"),o=s.size,i=s.rank;if(o<2)throw new Error(`Error in multinomial: you need at least 2 outcomes, but got ${o}.`);if(i>2)throw new Error(`Rank of probabilities must be 1 or 2, but is ${i}`);n=n||Math.random();const l={logits:i===1?ce(s,[1,-1]):s},c={numSamples:e,seed:n,normalized:r},d=ae.runKernel(mA,l,c);return i===1?ce(d,[d.size]):d}const Ble=se({multinomial_:Lle});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jle(t,e){let n=Q(t,"a","notEqual","string_or_numeric"),r=Q(e,"b","notEqual","string_or_numeric");[n,r]=wr(n,r),jt(n.shape,r.shape);const s={a:n,b:r};return ae.runKernel(Mv,s)}const Zh=se({notEqual_:jle});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zle(t,e,n=1,r=0,s="int32"){if(e<2)throw new Error(`Error in oneHot: depth must be >=2, but it is ${e}`);const i={indices:Q(t,"indices","oneHot","int32")},a={dtype:s,depth:e,onValue:n,offValue:r};return ae.runKernel(Bv,i,a)}const a3=se({oneHot_:zle});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vle(t){const n={x:Q(t,"x","onesLike")};return ae.runKernel(Lv,n)}const yi=se({onesLike_:Vle});function Wle(t,e){const n=Q(t,"v1","outerProduct"),r=Q(e,"v2","outerProduct");Y(n.rank===1&&r.rank===1,()=>`Error in outerProduct: inputs must be rank 1, but got ranks ${n.rank} and ${r.rank}.`);const s=ce(n,[-1,1]),o=ce(r,[1,-1]);return en(s,o)}const Ule=se({outerProduct_:Wle});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hle(t,e,n=0){const r=Q(t,"x","pad");if(r.rank===0)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");const s={paddings:e,constantValue:n},o={x:r};return ae.runKernel(zv,o,s)}const Pu=se({pad_:Hle});function Gle(t,e,n=0){return Y(e.length===2,()=>"Invalid number of paddings. Must be length of 2."),Pu(t,[e],n)}const qle=se({pad1d_:Gle});function Xle(t,e,n=0){return Y(e.length===2&&e[0].length===2&&e[1].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),Pu(t,e,n)}const Kle=se({pad2d_:Xle});function Yle(t,e,n=0){return Y(e.length===3&&e[0].length===2&&e[1].length===2&&e[2].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),Pu(t,e,n)}const Zle=se({pad3d_:Yle});function Qle(t,e,n=0){return Y(e.length===4&&e[0].length===2&&e[1].length===2&&e[2].length===2&&e[3].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),Pu(t,e,n)}const Jle=se({pad4d_:Qle});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ece(t,e,n){const r=Q(t,"x","spaceToBatchND");Y(r.rank>=1+e.length,()=>`input rank ${r.rank} should be > than [blockShape] ${e.length}`),Y(n.length===e.length,()=>`paddings.shape[0] ${n.length} must be equal to [blockShape] ${e.length}`),Y(r.shape.reduce((i,a,l)=>l>0&&l<=e.length?i&&(a+n[l-1][0]+n[l-1][1])%e[l-1]===0:i,!0),()=>`input spatial dimensions ${r.shape.slice(1)} with paddings ${n.toString()} must be divisible by blockShapes ${e.toString()}`);const s={x:r},o={blockShape:e,paddings:n};return ae.runKernel(Zv,s,o)}const g2=se({spaceToBatchND_:ece});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tce(t,e,n,r,s,o,i){s==null&&(s=[1,1]),o==null&&(o=1),r===0&&(r="valid");const a=Q(t,"x","maxPool");let l=a,c=!1;a.rank===3&&(c=!0,l=ce(a,[1,a.shape[0],a.shape[1],a.shape[2]])),Y(Es(o,s),()=>`Error in pool: Either strides or dilations must be 1. Got strides ${o} and dilations '${s}'`);const d=ia(l.shape,e,o,s,r),f=[d.dilationHeight,d.dilationWidth];let p;r==="same"?p=rce([d.filterHeight,d.filterWidth],f):p=[[0,0],[0,0]];const g=f[0]===1&&f[1]===1,[x,b]=nce([d.inHeight,d.inWidth],f,p),w=g?r:"valid",C=g?l:g2(l,f,x),k=(n==="avg"?()=>o2(C,e,o,w,i):()=>p2(C,e,o,w,i))(),I=g?k:i2(k,f,b);return c?ce(I,[I.shape[1],I.shape[2],I.shape[3]]):I}function nce(t,e,n){const r=n.map(d=>d[0]),s=n.map(d=>d[1]),o=t.concat(r,s),i=e.map((d,f)=>(d-o[f]%d)%d),a=s.map((d,f)=>d+i[f]),l=e.map((d,f)=>[r[f],a[f]]),c=e.map((d,f)=>[0,i[f]]);return[l,c]}function rce(t,e){const r=t.map((i,a)=>i+(i-1)*(e[a]-1)).map(i=>i-1),s=r.map(i=>Math.floor(i/2)),o=r.map((i,a)=>i-s[a]);return r.map((i,a)=>[s[a],o[a]])}const P8=se({pool_:tce});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sce(t,e){const n=Q(t,"x","prelu"),r=Q(e,"alpha","prelu"),s={x:n,alpha:r};return ae.runKernel(Vv,s)}const x2=se({prelu_:sce});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oce(t,e=null,n=!1){let r=Q(t,"x","prod");r.dtype==="bool"&&(r=nt(r,"int32"));const s={x:r},o={axis:e,keepDims:n};return ae.runKernel(Wv,s,o)}const F8=se({prod_:oce});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ice(t,e,n,r){const s=t.map((d,f)=>Q(d,`tensors${f}`,"raggedGather","int32")),o=Q(e,"paramsDenseValues","raggedGather"),i=Q(n,"indices","raggedGather","int32"),a={paramsNestedSplits:s,paramsDenseValues:o,indices:i},l={outputRaggedRank:r},c=ae.runKernel(bA,a,l);return{outputNestedSplits:c.slice(0,c.length-1),outputDenseValues:c[c.length-1]}}const ace=se({raggedGather_:ice});/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lce(t,e,n){const r=Q(t,"starts","raggedRange"),s=Q(e,"limits","raggedRange",r.dtype),o=Q(n,"deltas","raggedRange",r.dtype),i={starts:r,limits:s,deltas:o},a=ae.runKernel(wA,i);return{rtNestedSplits:a[0],rtDenseValues:a[1]}}const cce=se({raggedRange_:lce});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uce(t,e,n,r,s){const o=Q(t,"shape","raggedTensorToTensor","int32"),i=Q(e,"values","raggedTensorToTensor"),a=Q(n,"defaultValue","raggedTensorToTensor",i.dtype),l=r.map((f,p)=>Q(f,`tensors${p}`,"raggedTensorToTensor","int32")),c={shape:o,values:i,defaultValue:a,rowPartitionTensors:l},d={rowPartitionTypes:s};return ae.runKernel(vA,c,d)}const dce=se({raggedTensorToTensor_:uce});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fce(t,e,n){Ci(t);const r=Te(t);let s=null;if(n==null||n==="float32")s=new Float32Array(r);else if(n==="int32")s=new Int32Array(r);else if(n==="bool")s=new Uint8Array(r);else throw new Error(`Unknown data type ${n}`);for(let o=0;o<r;o++)s[o]=e();return ae.makeTensor(s,t,n)}const hce=se({rand_:fce});var l3={exports:{}};l3.exports;(function(t){(function(e,n,r){function s(l){var c=this,d=a();c.next=function(){var f=2091639*c.s0+c.c*23283064365386963e-26;return c.s0=c.s1,c.s1=c.s2,c.s2=f-(c.c=f|0)},c.c=1,c.s0=d(" "),c.s1=d(" "),c.s2=d(" "),c.s0-=d(l),c.s0<0&&(c.s0+=1),c.s1-=d(l),c.s1<0&&(c.s1+=1),c.s2-=d(l),c.s2<0&&(c.s2+=1),d=null}function o(l,c){return c.c=l.c,c.s0=l.s0,c.s1=l.s1,c.s2=l.s2,c}function i(l,c){var d=new s(l),f=c&&c.state,p=d.next;return p.int32=function(){return d.next()*4294967296|0},p.double=function(){return p()+(p()*2097152|0)*11102230246251565e-32},p.quick=p,f&&(typeof f=="object"&&o(f,d),p.state=function(){return o(d,{})}),p}function a(){var l=4022871197,c=function(d){d=String(d);for(var f=0;f<d.length;f++){l+=d.charCodeAt(f);var p=.02519603282416938*l;l=p>>>0,p-=l,p*=l,l=p>>>0,p-=l,l+=p*4294967296}return(l>>>0)*23283064365386963e-26};return c}n&&n.exports?n.exports=i:this.alea=i})(Gn,t)})(l3);var pce=l3.exports,c3={exports:{}};c3.exports;(function(t){(function(e,n,r){function s(a){var l=this,c="";l.x=0,l.y=0,l.z=0,l.w=0,l.next=function(){var f=l.x^l.x<<11;return l.x=l.y,l.y=l.z,l.z=l.w,l.w^=l.w>>>19^f^f>>>8},a===(a|0)?l.x=a:c+=a;for(var d=0;d<c.length+64;d++)l.x^=c.charCodeAt(d)|0,l.next()}function o(a,l){return l.x=a.x,l.y=a.y,l.z=a.z,l.w=a.w,l}function i(a,l){var c=new s(a),d=l&&l.state,f=function(){return(c.next()>>>0)/4294967296};return f.double=function(){do var p=c.next()>>>11,g=(c.next()>>>0)/4294967296,x=(p+g)/(1<<21);while(x===0);return x},f.int32=c.next,f.quick=f,d&&(typeof d=="object"&&o(d,c),f.state=function(){return o(c,{})}),f}n&&n.exports?n.exports=i:this.xor128=i})(Gn,t)})(c3);var mce=c3.exports,u3={exports:{}};u3.exports;(function(t){(function(e,n,r){function s(a){var l=this,c="";l.next=function(){var f=l.x^l.x>>>2;return l.x=l.y,l.y=l.z,l.z=l.w,l.w=l.v,(l.d=l.d+362437|0)+(l.v=l.v^l.v<<4^(f^f<<1))|0},l.x=0,l.y=0,l.z=0,l.w=0,l.v=0,a===(a|0)?l.x=a:c+=a;for(var d=0;d<c.length+64;d++)l.x^=c.charCodeAt(d)|0,d==c.length&&(l.d=l.x<<10^l.x>>>4),l.next()}function o(a,l){return l.x=a.x,l.y=a.y,l.z=a.z,l.w=a.w,l.v=a.v,l.d=a.d,l}function i(a,l){var c=new s(a),d=l&&l.state,f=function(){return(c.next()>>>0)/4294967296};return f.double=function(){do var p=c.next()>>>11,g=(c.next()>>>0)/4294967296,x=(p+g)/(1<<21);while(x===0);return x},f.int32=c.next,f.quick=f,d&&(typeof d=="object"&&o(d,c),f.state=function(){return o(c,{})}),f}n&&n.exports?n.exports=i:this.xorwow=i})(Gn,t)})(u3);var gce=u3.exports,d3={exports:{}};d3.exports;(function(t){(function(e,n,r){function s(a){var l=this;l.next=function(){var d=l.x,f=l.i,p,g;return p=d[f],p^=p>>>7,g=p^p<<24,p=d[f+1&7],g^=p^p>>>10,p=d[f+3&7],g^=p^p>>>3,p=d[f+4&7],g^=p^p<<7,p=d[f+7&7],p=p^p<<13,g^=p^p<<9,d[f]=g,l.i=f+1&7,g};function c(d,f){var p,g=[];if(f===(f|0))g[0]=f;else for(f=""+f,p=0;p<f.length;++p)g[p&7]=g[p&7]<<15^f.charCodeAt(p)+g[p+1&7]<<13;for(;g.length<8;)g.push(0);for(p=0;p<8&&g[p]===0;++p);for(p==8?g[7]=-1:g[p],d.x=g,d.i=0,p=256;p>0;--p)d.next()}c(l,a)}function o(a,l){return l.x=a.x.slice(),l.i=a.i,l}function i(a,l){a==null&&(a=+new Date);var c=new s(a),d=l&&l.state,f=function(){return(c.next()>>>0)/4294967296};return f.double=function(){do var p=c.next()>>>11,g=(c.next()>>>0)/4294967296,x=(p+g)/(1<<21);while(x===0);return x},f.int32=c.next,f.quick=f,d&&(d.x&&o(d,c),f.state=function(){return o(c,{})}),f}n&&n.exports?n.exports=i:this.xorshift7=i})(Gn,t)})(d3);var xce=d3.exports,f3={exports:{}};f3.exports;(function(t){(function(e,n,r){function s(a){var l=this;l.next=function(){var d=l.w,f=l.X,p=l.i,g,x;return l.w=d=d+1640531527|0,x=f[p+34&127],g=f[p=p+1&127],x^=x<<13,g^=g<<17,x^=x>>>15,g^=g>>>12,x=f[p]=x^g,l.i=p,x+(d^d>>>16)|0};function c(d,f){var p,g,x,b,w,C=[],N=128;for(f===(f|0)?(g=f,f=null):(f=f+"\0",g=0,N=Math.max(N,f.length)),x=0,b=-32;b<N;++b)f&&(g^=f.charCodeAt((b+32)%f.length)),b===0&&(w=g),g^=g<<10,g^=g>>>15,g^=g<<4,g^=g>>>13,b>=0&&(w=w+1640531527|0,p=C[b&127]^=g+w,x=p==0?x+1:0);for(x>=128&&(C[(f&&f.length||0)&127]=-1),x=127,b=4*128;b>0;--b)g=C[x+34&127],p=C[x=x+1&127],g^=g<<13,p^=p<<17,g^=g>>>15,p^=p>>>12,C[x]=g^p;d.w=w,d.X=C,d.i=x}c(l,a)}function o(a,l){return l.i=a.i,l.w=a.w,l.X=a.X.slice(),l}function i(a,l){a==null&&(a=+new Date);var c=new s(a),d=l&&l.state,f=function(){return(c.next()>>>0)/4294967296};return f.double=function(){do var p=c.next()>>>11,g=(c.next()>>>0)/4294967296,x=(p+g)/(1<<21);while(x===0);return x},f.int32=c.next,f.quick=f,d&&(d.X&&o(d,c),f.state=function(){return o(c,{})}),f}n&&n.exports?n.exports=i:this.xor4096=i})(Gn,t)})(f3);var yce=f3.exports,h3={exports:{}};h3.exports;(function(t){(function(e,n,r){function s(a){var l=this,c="";l.next=function(){var f=l.b,p=l.c,g=l.d,x=l.a;return f=f<<25^f>>>7^p,p=p-g|0,g=g<<24^g>>>8^x,x=x-f|0,l.b=f=f<<20^f>>>12^p,l.c=p=p-g|0,l.d=g<<16^p>>>16^x,l.a=x-f|0},l.a=0,l.b=0,l.c=-1640531527,l.d=1367130551,a===Math.floor(a)?(l.a=a/4294967296|0,l.b=a|0):c+=a;for(var d=0;d<c.length+20;d++)l.b^=c.charCodeAt(d)|0,l.next()}function o(a,l){return l.a=a.a,l.b=a.b,l.c=a.c,l.d=a.d,l}function i(a,l){var c=new s(a),d=l&&l.state,f=function(){return(c.next()>>>0)/4294967296};return f.double=function(){do var p=c.next()>>>11,g=(c.next()>>>0)/4294967296,x=(p+g)/(1<<21);while(x===0);return x},f.int32=c.next,f.quick=f,d&&(typeof d=="object"&&o(d,c),f.state=function(){return o(c,{})}),f}n&&n.exports?n.exports=i:this.tychei=i})(Gn,t)})(h3);var bce=h3.exports,M8={exports:{}};const wce={},vce=Object.freeze(Object.defineProperty({__proto__:null,default:wce},Symbol.toStringTag,{value:"Module"})),p3=OG(vce);(function(t){(function(e,n,r){var s=256,o=6,i=52,a="random",l=r.pow(s,o),c=r.pow(2,i),d=c*2,f=s-1,p;function g(I,R,$){var O=[];R=R==!0?{entropy:!0}:R||{};var F=C(w(R.entropy?[I,k(n)]:I??N(),3),O),M=new x(O),_=function(){for(var V=M.g(o),B=l,W=0;V<c;)V=(V+W)*s,B*=s,W=M.g(1);for(;V>=d;)V/=2,B/=2,W>>>=1;return(V+W)/B};return _.int32=function(){return M.g(4)|0},_.quick=function(){return M.g(4)/4294967296},_.double=_,C(k(M.S),n),(R.pass||$||function(V,B,W,q){return q&&(q.S&&b(q,M),V.state=function(){return b(M,{})}),W?(r[a]=V,B):V})(_,F,"global"in R?R.global:this==r,R.state)}function x(I){var R,$=I.length,O=this,F=0,M=O.i=O.j=0,_=O.S=[];for($||(I=[$++]);F<s;)_[F]=F++;for(F=0;F<s;F++)_[F]=_[M=f&M+I[F%$]+(R=_[F])],_[M]=R;(O.g=function(V){for(var B,W=0,q=O.i,j=O.j,G=O.S;V--;)B=G[q=f&q+1],W=W*s+G[f&(G[q]=G[j=f&j+B])+(G[j]=B)];return O.i=q,O.j=j,W})(s)}function b(I,R){return R.i=I.i,R.j=I.j,R.S=I.S.slice(),R}function w(I,R){var $=[],O=typeof I,F;if(R&&O=="object")for(F in I)try{$.push(w(I[F],R-1))}catch{}return $.length?$:O=="string"?I:I+"\0"}function C(I,R){for(var $=I+"",O,F=0;F<$.length;)R[f&F]=f&(O^=R[f&F]*19)+$.charCodeAt(F++);return k(R)}function N(){try{var I;return p&&(I=p.randomBytes)?I=I(s):(I=new Uint8Array(s),(e.crypto||e.msCrypto).getRandomValues(I)),k(I)}catch{var R=e.navigator,$=R&&R.plugins;return[+new Date,e,$,e.screen,k(n)]}}function k(I){return String.fromCharCode.apply(0,I)}if(C(r.random(),n),t.exports){t.exports=g;try{p=p3}catch{}}else r["seed"+a]=g})(typeof self<"u"?self:Gn,[],Math)})(M8);var Cce=M8.exports,Sce=pce,Nce=mce,Ece=gce,Ice=xce,kce=yce,Tce=bce,hf=Cce;hf.alea=Sce;hf.xor128=Nce;hf.xorwow=Ece;hf.xorshift7=Ice;hf.xor4096=kce;hf.tychei=Tce;var m3=hf;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class g3{constructor(e,n,r,s,o){this.mean=e,this.stdDev=n,this.dtype=r,this.nextVal=NaN,this.truncated=s,this.truncated&&(this.upper=this.mean+this.stdDev*2,this.lower=this.mean-this.stdDev*2);const i=o||Math.random();this.random=m3.alea(i.toString())}nextValue(){if(!isNaN(this.nextVal)){const s=this.nextVal;return this.nextVal=NaN,s}let e,n,r=!1;for(;!r;){let s,o,i;do s=2*this.random()-1,o=2*this.random()-1,i=s*s+o*o;while(i>=1||i===0);const a=Math.sqrt(-2*Math.log(i)/i);e=this.mean+this.stdDev*s*a,n=this.mean+this.stdDev*o*a,(!this.truncated||this.isValidTruncated(e))&&(r=!0)}return(!this.truncated||this.isValidTruncated(n))&&(this.nextVal=this.convertValue(n)),this.convertValue(e)}convertValue(e){return this.dtype==null||this.dtype==="float32"?e:Math.round(e)}isValidTruncated(e){return e<=this.upper&&e>=this.lower}}class Ace{constructor(e,n,r,s){this.alpha=e,this.beta=1/n,this.dtype=r;const o=s||Math.random();this.randu=m3.alea(o.toString()),this.randn=new g3(0,1,r,!1,this.randu()),e<1?this.d=e+2/3:this.d=e-1/3,this.c=1/Math.sqrt(9*this.d)}nextValue(){let e,n,r,s,o,i;for(;;){do s=this.randn.nextValue(),i=1+this.c*s;while(i<=0);if(i*=i*i,e=s*s,n=1-.331*e*e,r=.5*e+this.d*(1-i+Math.log(i)),o=this.randu(),o<n||Math.log(o)<r)break}return i=1/this.beta*this.d*i,this.alpha<1&&(i*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(i)}convertValue(e){return this.dtype==="float32"?e:Math.round(e)}}class Rce{constructor(e=0,n=1,r,s){if(this.canReturnFloat=()=>this.dtype==null||this.dtype==="float32",this.min=e,this.range=n-e,this.dtype=r,s==null&&(s=Math.random()),typeof s=="number"&&(s=s.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error(`The difference between ${e} - ${n} <= 1 and dtype is not float`);this.random=m3.alea(s)}convertValue(e){return this.canReturnFloat()?e:Math.round(e)}nextValue(){return this.convertValue(this.min+this.range*this.random())}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dce(t,e,n=1,r="float32",s){if(Ci(t),n==null&&(n=1),r==null&&(r="float32"),r!=="float32"&&r!=="int32")throw new Error(`Unsupported data type ${r}`);const o=new Ace(e,n,r,s),i=Gt(t,r);for(let a=0;a<i.values.length;a++)i.values[a]=o.nextValue();return i.toTensor()}const $ce=se({randomGamma_:Dce});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Oce(t,e=0,n=1,r,s){if(Ci(t),r!=null&&r==="bool")throw new Error(`Unsupported data type ${r}`);const o=new g3(e,n,r,!1,s),i=Gt(t,r);for(let a=0;a<i.values.length;a++)i.values[a]=o.nextValue();return i.toTensor()}const x3=se({randomNormal_:Oce});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _ce(t,e,n){if(e!=null&&e==="bool")throw new Error(`Unsupported data type ${e}`);return x3(t,0,1,e,n)}const Pce=se({randomStandardNormal_:_ce});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fce(t,e=0,n=1,r="float32",s){Ci(t);const o=Gt(t,r),i=new Rce(e,n,null,s);for(let a=0;a<o.values.length;a++)o.values[a]=i.nextValue();return o.toTensor()}const pf=se({randomUniform_:Fce});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mce(t,e,n,r){return pf(t,e,n,"int32",r)}const Lce=se({randomUniformInt_:Mce});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qh(t,e,n=1,r="float32"){if(n===0)throw new Error("Cannot have a step of zero");const s={start:t,stop:e,step:n,dtype:r};return ae.runKernel(CA,{},s)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bce(t){const n={input:Q(t,"input","real")};return ae.runKernel(SA,n)}const Kg=se({real_:Bce});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jce(t){const n={x:Q(t,"x","reciprocal")};return ae.runKernel(i1,n)}const L8=se({reciprocal_:jce});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zce(t){const n={x:Q(t,"x","relu")};return ae.runKernel(a1,n)}const $l=se({relu_:zce});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vce(t){const n={x:Q(t,"x","relu6")};return ae.runKernel(l1,n)}const y3=se({relu6_:Vce});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wce(t,e){const r={x:Q(t,"x","reverse")},s={dims:e};return ae.runKernel(qv,r,s)}const na=se({reverse_:Wce});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Uce(t){const e=Q(t,"x","reverse");return Y(e.rank===1,()=>`Error in reverse1D: x must be rank 1 but got rank ${e.rank}.`),na(e,0)}const Hce=se({reverse1d_:Uce});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gce(t,e){const n=Q(t,"x","reverse");return Y(n.rank===2,()=>`Error in reverse2D: x must be rank 2 but got rank ${n.rank}.`),na(n,e)}const qce=se({reverse2d_:Gce});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xce(t,e){const n=Q(t,"x","reverse");return Y(n.rank===3,()=>`Error in reverse3D: x must be rank 3 but got rank ${n.rank}.`),na(n,e)}const Kce=se({reverse3d_:Xce});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yce(t,e){const n=Q(t,"x","reverse");return Y(n.rank===4,()=>`Error in reverse4D: x must be rank 4 but got rank ${n.rank}.`),na(n,e)}const Zce=se({reverse4d_:Yce});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qce(t){const n={x:Q(t,"x","round")};return ae.runKernel(c1,n)}const b3=se({round_:Qce});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jce(t){const n={x:Q(t,"x","rsqrt","float32")};return ae.runKernel(u1,n)}const w3=se({rsqrt_:Jce});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eue(t){const n={x:Q(t,"x","selu")};return ae.runKernel(d1,n)}const v3=se({selu_:eue});function tue(t,e,n,r,s,o=[1,1],i="NHWC"){const a=Q(t,"x","separableConv2d"),l=Q(e,"depthwiseFilter","separableConv2d"),c=Q(n,"pointwiseFilter","separableConv2d");let d=a,f=!1;if(a.rank===3&&(f=!0,d=ce(a,[1,a.shape[0],a.shape[1],a.shape[2]])),i==="NCHW")throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");Y(d.rank===4,()=>`Error in separableConv2d: input must be rank 4, but got rank ${d.rank}.`),Y(l.rank===4,()=>`Error in separableConv2d: depthwise filter must be rank 4, but got rank ${l.rank}.`),Y(c.rank===4,()=>`Error in separableConv2d: pointwise filter must be rank 4, but got rank ${l.rank}.`),Y(c.shape[0]===1,()=>`Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got ${c.shape[0]}.`),Y(c.shape[1]===1,()=>`Error in separableConv2d: the second dimension of pointwise filter must be 1, but got ${c.shape[1]}.`);const p=l.shape[2],g=l.shape[3];Y(c.shape[2]===p*g,()=>`Error in separableConv2d: the third dimension of pointwise filter must be ${p*g}, but got ${c.shape[2]}.`);const x=k1(d,l,r,s,i,o),w=mu(x,c,1,"valid",i);return f?ce(w,[w.shape[1],w.shape[2],w.shape[3]]):w}const C3=se({separableConv2d_:tue});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function nue(t,e){const n=Q(t,"x","setdiff1d"),r=Q(e,"y","setdiff1d");Y(n.dtype===r.dtype,()=>`x and y should have the same dtype, but got x (${n.dtype}) and y (${r.dtype}).`),Y(n.rank===1,()=>`x should be 1D tensor, but got x (${n.shape}).`),Y(r.rank===1,()=>`y should be 1D tensor, but got y (${r.shape}).`);const s=await n.data(),o=await r.data(),i=new Set(o);let a=0;for(let d=0;d<s.length;d++)i.has(s[d])||a++;const l=new Zr([a],n.dtype),c=new Zr([a],"int32");for(let d=0,f=0;d<s.length;d++)i.has(s[d])||(l.values[f]=s[d],c.values[f]=d,f++);return[l.toTensor(),c.toTensor()]}const rue=nue;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sue(t){const n={x:Q(t,"x","sign")};return ae.runKernel(p1,n)}const B8=se({sign_:sue});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oue(t){const n={x:Q(t,"x","sin","float32")};return ae.runKernel(f1,n)}const S3=se({sin_:oue});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iue(t){const n={x:Q(t,"x","sinh")};return ae.runKernel(h1,n)}const N3=se({sinh_:iue});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aue(t,e,n){const r=Q(t,"x","slice1d");return Y(r.rank===1,()=>`slice1d expects a rank-1 tensor, but got a rank-${r.rank} tensor`),Pt(r,[e],[n])}const y2=se({slice1d_:aue});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lue(t,e,n){const r=Q(t,"x","slice2d");return Y(r.rank===2,()=>`slice2d expects a rank-2 tensor, but got a rank-${r.rank} tensor`),Pt(r,e,n)}const E3=se({slice2d_:lue});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cue(t,e,n){const r=Q(t,"x","slice3d");return Y(r.rank===3,()=>`slice3d expects a rank-3 tensor, but got a rank-${r.rank} tensor`),Pt(r,e,n)}const b2=se({slice3d_:cue});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uue(t,e,n){const r=Q(t,"x","slice4d");return Y(r.rank===4,()=>`slice4d expects a rank-4 tensor, but got a rank-${r.rank} tensor`),Pt(r,e,n)}const Yg=se({slice4d_:uue});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function due(t,e=-1){const n=Q(t,"logits","softmax","float32");if(e===-1&&(e=n.rank-1),e!==n.rank-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and dim was ${e}`);const r={logits:n},s={dim:e};return ae.runKernel(Jv,r,s)}const w2=se({softmax_:due});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fue(t){Y(t.dtype==="complex64",()=>`The dtype for tf.spectral.fft() must be complex64 but got ${t.dtype}.`);const e={input:t};return ae.runKernel(sA,e)}const v2=se({fft_:fue});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hue(t){Y(t.dtype==="complex64",()=>`The dtype for tf.spectral.ifft() must be complex64 but got ${t.dtype}.`);const e={input:t};return ae.runKernel(lA,e)}const Zg=se({ifft_:hue});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pue(t){const e=t.shape[t.shape.length-1],n=t.size/e;let r;if(e<=2){const s=ce(t,[n,e]);r=Zg(s)}else{const s=[n,2*(e-1)],o=ce(Kg(t),[n,e]),i=ce(c2(t),[n,e]),a=na(Pt(o,[0,1],[n,e-2]),1),l=ie(na(Pt(i,[0,1],[n,e-2]),1),kt(-1)),c=yr([o,a],1),d=yr([i,l],1),f=ce(fu(c,d),[s[0],s[1]]);r=Zg(f)}if(r=Kg(r),t.rank===3&&t.shape[0]!==0){const s=r,o=t.shape[0];r=ce(r,[o,r.shape[0]/o,r.shape[1]]),s.dispose()}return r}const I3=se({irfft_:pue});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mue(t,e,n=0){const s={x:Q(t,"x","split")},o={numOrSizeSplits:e,axis:n};return ae.runKernel(Qv,s,o)}const Ho=se({split_:mue});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gue(t,e){Y(t.dtype==="float32",()=>`The dtype for rfft() must be real value but got ${t.dtype}`);let n=t.shape[t.shape.length-1];const r=t.size/n;let s;if(e!=null&&e<n){const x=t.shape.map(w=>0),b=t.shape.map(w=>w);b[t.shape.length-1]=e,s=Pt(t,x,b),n=e}else if(e!=null&&e>n){const x=t.shape.map(b=>b);x[t.shape.length-1]=e-n,s=yr([t,qr(x)],t.shape.length-1),n=e}else s=t;const o=ln(s),i=ce(fu(s,o),[r,n]),a=v2(i),l=Math.floor(n/2)+1,c=Kg(a),d=c2(a),f=Ho(c,[l,n-l],c.shape.length-1),p=Ho(d,[l,n-l],d.shape.length-1),g=s.shape.slice();return g[s.shape.length-1]=l,ce(fu(f[0],p[0]),g)}const C2=se({rfft_:gue});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xue(t,e){let n=Q(t,"a","squaredDifference"),r=Q(e,"b","squaredDifference");[n,r]=wr(n,r),jt(n.shape,r.shape);const s={a:n,b:r},o={};return ae.runKernel(y1,s,o)}const k3=se({squaredDifference_:xue});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yue(t,e){const n=Q(t,"x","squeeze","string_or_numeric");return ce(n,Tu(n.shape,e).newShape)}const Aa=se({squeeze_:yue});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bue(t,e=0){const n=Fb(t,"tensors","stack","string_or_numeric");Y(n.length>=1,()=>"Pass at least one tensor to tf.stack"),n.length>0&&Y(e<=n[0].rank,()=>"Axis must be <= rank of the tensor");const r=n,s={axis:e};return ae.runKernel(jv,r,s)}const Zo=se({stack_:bue});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wue(t,e=0){const r={x:Q(t,"x","step")},s={alpha:e};return ae.runKernel(S1,r,s)}const $p=se({step_:wue});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vue(t,e,n,r,s=0,o=0,i=0,a=0,l=0){const d={x:Q(t,"x","stridedSlice","string_or_numeric")},f={begin:e,end:n,strides:r,beginMask:s,endMask:o,ellipsisMask:i,newAxisMask:a,shrinkAxisMask:l};return ae.runKernel(PA,d,f)}const j8=se({stridedSlice_:vue});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cue(t){const n={x:Q(t,"x","tan","float32")};return ae.runKernel(w1,n)}const z8=se({tan_:Cue});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cs(t,e){Ip(t);const n=Ru(t,e);if(n.length!==1)throw new Error("tensor1d() requires values to be a flat/TypedArray");return Du(t,null,n,e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kd(t,e,n){if(Ip(t),e!=null&&e.length!==2)throw new Error("tensor2d() requires shape to have two numbers");const r=Ru(t,n);if(r.length!==2&&r.length!==1)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return Du(t,e,r,n)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function V8(t,e,n){if(Ip(t),e!=null&&e.length!==3)throw new Error("tensor3d() requires shape to have three numbers");const r=Ru(t,n);if(r.length!==3&&r.length!==1)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return Du(t,e,r,n)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Sue(t,e,n){if(Ip(t),e!=null&&e.length!==4)throw new Error("tensor4d() requires shape to have four numbers");const r=Ru(t,n);if(r.length!==4&&r.length!==1)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return Du(t,e,r,n)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nue(t,e,n){if(Ip(t),e!=null&&e.length!==5)throw new Error("tensor5d() requires shape to have five numbers");const r=Ru(t,n);if(r.length!==5&&r.length!==1)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return Du(t,e,r,n)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Eue(t,e,n){if(Ip(t),e!=null&&e.length!==6)throw new Error("tensor6d() requires shape to have six numbers");const r=Ru(t,n);if(r.length!==6&&r.length!==1)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return e=e||r,Du(t,e,r,n)}function W8(t,e,n){const r=e.rank>1?e.shape[e.rank-1]:1,s=e.rank>1?e.rank-1:1,o=`Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: ${n.shape}, indices.shape: ${e.shape}, shape: ${t}, sliceDim: ${r}, and batchDim: ${s}.`;if(n.rank<s)throw new Error(o+` update.rank < ${s}. `);if(t.length<r+(n.rank-s))throw new Error(o+` Output shape length < ${r+(n.rank-s)}`);if(n.rank!==s+t.length-r)throw new Error(o+` update.rank != ${s+t.length-r}`);for(let i=0;i<s;++i)if(n.shape[i]!==e.shape[i])throw new Error(o+` updates.shape[${i}] (${n.shape[i]}) != indices.shape[${i}] (${e.shape[i]}).`);for(let i=0;i<n.rank-s;++i)if(n.shape[i+s]!==t[i+r])throw new Error(o+` updates.shape[${i+s}] (${n.shape[i+s]}) != shape[${i+s}] (${t[i+s]})`)}function T3(t,e,n){if(e.rank<1)throw new Error(`tf.scatterND() expects the indices to be rank 1 or higher, but the rank was ${e.rank}.`);if(t.rank<1)throw new Error(`tf.scatterND() expects the updates to be rank 1 or higher, but the rank was ${t.rank}.`);if(e.dtype!=="int32")throw new Error(`The dtype of 'indices' should be int32, but got dtype: ${e.dtype}`);if(n.length<1)throw new Error(`Output rank must be greater or equal to 1, but got shape: ${n}`);if(n.length===0){if(e.size===0)throw new Error(`Indices specified for empty output. indices shape: ${e.shape}`);if(t.size===0)throw new Error(`Updates specified for empty output. updates shape: ${t.shape}`)}W8(n,e,t)}function mf(t,e,n){const r=e.shape.length,s=r>1?e.shape[r-1]:1,o=n.length;let i=1;for(let f=s;f<o;++f)i*=n[f];const a=s<1?1:s,l=Te(e.shape)/a,c=[...Et(n.slice(0,s)),1],d=Te(n);return{sliceRank:s,numUpdates:l,sliceSize:i,strides:c,outputSize:d}}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Iue(t,e,n){const r=Q(t,"tensor","tensorScatterupdate"),s=Q(e,"indices","tensorScatterupdate","int32"),o=Q(n,"updates","tensorScatterupdate");if(T3(o,s,r.shape),r.dtype!==o.dtype)throw new Error(`tensor and updates must have the same dtype, instead they are ${r.dtype} and ${o.dtype}.`);const i={tensor:r,indices:s,updates:o},a={};return ae.runKernel(kA,i,a)}const kue=se({tensorScatterUpdate_:Iue});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tue(t,e=1,n=!0){const r=Q(t,"x","topk");if(r.rank===0)throw new Error("topk() expects the input to be of rank 1 or higher");const s=r.shape[r.shape.length-1];if(e<0)throw new Error(`'k' passed to topk() must be >= 0 but got ${e}`);if(e>s)throw new Error(`'k' passed to topk() must be <= the last dimension (${s}) but got ${e}`);const o={x:r},i={k:e,sorted:n},[a,l]=ae.runKernel(BA,o,i);return{values:a,indices:l}}const U8=se({topk_:Tue});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Aue(t,e=0,n=1,r,s){if(Ci(t),r!=null&&r==="bool")throw new Error("Unsupported data type $ { dtype }");const o=new g3(e,n,r,!0,s),i=Gt(t,r);for(let a=0;a<i.values.length;a++)i.values[a]=o.nextValue();return i.toTensor()}const A3=se({truncatedNormal_:Aue});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rue(t,e=0){const n=Q(t,"x","unique","string_or_numeric");Y(n.rank>0,()=>"The input tensor must be at least 1D");const r={x:n},s={axis:e},[o,i]=ae.runKernel(zA,r,s);return{values:o,indices:i}}const H8=se({unique_:Rue});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Due(t,e,n){const r=Q(t,"x","unsortedSegmentSum"),s=Q(e,"segmentIds","unsortedSegmentSum","int32");Y(Gh(n),()=>"numSegments must be of dtype int");const o={x:r,segmentIds:s},i={numSegments:n};return ae.runKernel(n2,o,i)}const R3=se({unsortedSegmentSum_:Due});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $ue(t,e=0){const n=Q(t,"x","unstack","string_or_numeric");Y(e>=-n.shape.length&&e<n.shape.length,()=>`Axis = ${e} is not in [-${n.shape.length}, ${n.shape.length})`);const r={value:n},s={axis:e};return ae.runKernel(t2,r,s)}const ra=se({unstack_:$ue});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Oue(t,e){return i3(t,e,"right")}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function G8(t,e=!0,n,r){return ae.makeVariable(t,e,n,r)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function D3(t,e){const n=[];for(let o=0;o<e.length;o++)e[o]&&n.push(o);const r=Gt(t,"int32"),s=Gt([n.length,t.length],"int32");for(let o=0;o<n.length;o++){const i=r.indexToLoc(n[o]),a=o*t.length;s.values.set(i,a)}return s.toTensor()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function _ue(t){const e=Q(t,"condition","whereAsync","bool"),n=await e.data(),r=D3(e.shape,n);return t!==e&&e.dispose(),r}const q8=_ue;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function Pue(t,e,n){const r=Q(t,"tensor","boolMask"),s=Q(e,"mask","boolMask","bool"),o=n??0,i=s.rank,a=r.shape;Y(i>0,()=>"mask cannot be scalar"),ti(a.slice(o,o+i),s.shape,"mask's shape must match the first K dimensions of tensor's shape,");let l=1;for(let b=o;b<o+i;b++)l*=a[b];const c=a.slice(0,o).concat([l],a.slice(o+i)),d=ce(r,c),f=ce(s,[-1]),p=await q8(f),g=Aa(p,[1]),x=D1(d,g,o);return t!==r&&r.dispose(),e!==s&&s.dispose(),g.dispose(),d.dispose(),f.dispose(),p.dispose(),x}const Fue=Pue;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mue(t,e,n){const r=Q(t,"x","transpose");if(e==null&&(e=r.shape.map((i,a)=>a).reverse()),Y(r.rank===e.length,()=>`Error in transpose: rank of input ${r.rank} must match length of perm ${e}.`),e.forEach(i=>{Y(i>=0&&i<r.rank,()=>`All entries in 'perm' must be between 0 and ${r.rank-1} but got ${e}`)}),r.rank<=1)return r.clone();const s={x:r},o={perm:e};return r.dtype==="complex64"?we(()=>{let i=Kg(r),a=c2(r);return i=ae.runKernel(Nh,{x:i},o),a=ae.runKernel(Nh,{x:a},o),n&&(a=Jn(a)),fu(i,a)}):ae.runKernel(Nh,s,o)}const an=se({transpose_:Mue});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lue(t,e,n,r,s=!0){const o=Q(t,"v","movingAverage"),i=Q(e,"x","movingAverage"),a=Q(n,"decay","movingAverage");Toe(o,i),Y(nn(o.shape,i.shape),()=>"Shape mismatch in v and x");const l=kt(1),c=lt(l,a);let d=ie(lt(i,o),c);if(s){Y(r!=null,()=>"When using zeroDebias: true, step is required.");const f=Q(r,"step","movingAverage");d=mt(d,lt(l,oc(a,f)))}return Ue(o,d)}const Bue=se({movingAverage_:Lue});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jue(t,e,n){Ci(n);const r=Q(t,"indices","scatterND","int32"),s=Q(e,"updates","scatterND");T3(s,r,n);const o={indices:r,updates:s},i={shape:n};return ae.runKernel(IA,o,i)}const zue=se({scatterND_:jue});function Vue(t,e,n,r){if(t.dtype!=="int32")throw new Error(`tf.sparseToDense() expects the indices to be int32 type, but the dtype was ${t.dtype}.`);if(t.rank>2)throw new Error(`sparseIndices should be a scalar, vector, or matrix, but got shape ${t.shape}.`);const s=t.rank>0?t.shape[0]:1,o=t.rank>1?t.shape[1]:1;if(n.length!==o)throw new Error(`outputShape has incorrect number of elements:, ${n.length}, should be: ${o}.`);const i=e.size;if(!(e.rank===0||e.rank===1&&i===s))throw new Error(`sparseValues has incorrect shape ${e.shape}, should be [] or [${s}]`);if(e.dtype!==r.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wue(t,e,n,r=0){Ci(n);const s=Q(t,"sparseIndices","sparseToDense","int32"),o=Q(e,"sparseValues","sparseToDense","string_or_numeric"),i=Q(r,"defaultValue","sparseToDense",o.dtype);Vue(s,o,n,i);const a={sparseIndices:s,sparseValues:o,defaultValue:i},l={outputShape:n};return ae.runKernel(OA,a,l)}const Uue=se({sparseToDense_:Wue});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hue(t,e){const n=Q(e,"indices","gatherND","int32"),s={params:Q(t,"x","gatherND","string_or_numeric"),indices:n};return ae.runKernel(aA,s)}const Gue=se({gatherND_:Hue});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function que(t,e){if(e==null)return t.shape.slice();if(nn(t.shape,e))return e;if(t.shape.length===e.length){const n=[];for(let r=0;r<t.shape.length;r++)e[r]==null&&t.shape[r]!=null?n.push(t.shape[r]):n.push(e[r]);return n}return e}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xue(t,e,n,r){const s=Q(t,"x","dropout");if(Y(s.dtype==="float32",()=>`x has to be a floating point tensor since it's going to be scaled, but got a ${s.dtype} tensor instead.`),Y(e>=0&&e<1,()=>`rate must be a float in the range [0, 1), but got ${e}.`),e===0)return t instanceof Tn?s.clone():s;const o=que(s,n),i=1-e,a=mt(R1(Ue(pf(o,0,1,"float32",r),i)),i);return ie(s,a)}const X8=se({dropout_:Xue});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function K8(t){return Math.floor(Math.pow(2,Math.ceil(Math.log(t)/Math.log(2))))}function $3(t,e,n){const r=1-t%2,s=new Float32Array(t);for(let o=0;o<t;++o){const i=2*Math.PI*o/(t+r-1);s[o]=e-n*Math.cos(i)}return cs(s,"float32")}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function Kue(t,e,n=1){const r=Q(t,"predictions","inTopK"),s=Q(e,"targets","inTopK");Y(r.rank>1,()=>`inTopK() expects the predictions to be of rank 2 or higher, but got ${r.rank}`),Y(r.rank-1===s.rank,()=>`predictions rank should be 1 larger than targets rank, but got predictions rank ${r.rank} and targets rank ${s.rank}`),ti(r.shape.slice(0,r.shape.length-1),s.shape,"predictions's shape should be align with the targets' shape, except the last dimension.");const o=r.shape[r.shape.length-1];Y(n>0&&n<=o,()=>`'k' passed to inTopK() must be > 0 && <= the predictions last dimension (${o}), but got ${n}`);const i=await r.data(),a=await s.data(),[l,c]=[i.length/o,o],d=Ss("bool",l);for(let f=0;f<l;f++){const p=f*c,g=i.subarray(p,p+c),x=[];for(let b=0;b<g.length;b++)x.push({value:g[b],index:b});x.sort((b,w)=>w.value-b.value),d[f]=0;for(let b=0;b<n;b++)if(x[b].index===a[f]){d[f]=1;break}}return t!==r&&r.dispose(),e!==s&&s.dispose(),ka(d,s.shape,"bool")}const Yue=Kue;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zue(t,e,n,r,s,o="NHWC",i){let a=t;t.rank===3&&(a=ce(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let l=e;l.rank===3&&(l=ce(e,[1,e.shape[0],e.shape[1],e.shape[2]])),Y(a.rank===4,()=>`Error in conv2dDerFilter: input must be rank 4, but got shape ${a.shape}.`),Y(l.rank===4,()=>`Error in conv2dDerFilter: dy must be rank 4, but got shape ${l.shape}.`),Y(n.length===4,()=>`Error in conv2dDerFilter: filterShape must be length 4, but got ${n}.`);const c=o==="NHWC"?a.shape[3]:a.shape[1],d=o==="NHWC"?l.shape[3]:l.shape[1];Y(c===n[2],()=>`Error in conv2dDerFilter: depth of input ${c}) must match input depth in filter (${n[2]}.`),Y(d===n[3],()=>`Error in conv2dDerFilter: depth of dy (${d}) must match output depth for filter (${n[3]}).`),co("conv2dDerFilter",s,i);const f={x:a,dy:l},p={strides:r,pad:s,dataFormat:o,dimRoundingMode:i,filterShape:n};return ae.runKernel(GT,f,p)}const O3=se({conv2DBackpropFilter_:Zue});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function S2(t,e,n){if(n==null||n==="linear")return t;if(n==="relu")return ie(t,$p(e));throw new Error(`Cannot compute gradient for fused activation ${n}.`)}function N2(t,e){let n=e;const r=es(t.shape,e.shape);return r.length>0&&(n=bt(n,r)),ce(n,t.shape)}function E2(t,e,n,r){if(e==="linear")return t;if(e==="relu")return $l(t);if(e==="elu")return T1(t);if(e==="relu6")return y3(t);if(e==="prelu")return x2(t,n);if(e==="leakyrelu")return u2(t,r);if(e==="sigmoid")return Ta(t);throw new Error(`Unknown fused activation ${e}.`)}const I2=(t,e)=>!(t>0)||e==="linear";/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Que({x:t,filter:e,strides:n,pad:r,dataFormat:s="NHWC",dilations:o=[1,1],dimRoundingMode:i,bias:a,activation:l="linear",preluActivationWeights:c,leakyreluAlpha:d}){if(l=l||"linear",I2(ae.state.gradientDepth,l)===!1){Y(s==="NHWC",()=>`Error in fused conv2d: got dataFormat of ${s} but only NHWC is currently supported for the case of gradient depth is 0 and the activation is not linear.`);let $=mu(t,e,n,r,s,o,i);return a!=null&&($=Ue($,a)),E2($,l,c,d)}const f=Q(t,"x","conv2d","float32"),p=Q(e,"filter","conv2d","float32");let g=f,x=!1;f.rank===3&&(x=!0,g=ce(f,[1,f.shape[0],f.shape[1],f.shape[2]])),Y(g.rank===4,()=>`Error in fused conv2d: input must be rank 4, but got rank ${g.rank}.`),Y(p.rank===4,()=>`Error in fused conv2d: filter must be rank 4, but got rank ${p.rank}.`),co("fused conv2d",r,i);const b=s==="NHWC"?g.shape[3]:g.shape[1];Y(p.shape[2]===b,()=>`Error in conv2d: depth of input (${b}) must match input depth for filter ${p.shape[2]}.`),Y(Es(n,o),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${o}'`);const w=ps(g.shape,p.shape,n,o,r,i);let C;a!=null&&(C=Q(a,"bias","fused conv2d"),[C]=wr(C,f),s==="NHWC"?jt(w.outShape,C.shape):(Y(C.shape.length<=1,()=>`Error in fused conv2d: only supports scalar or 1-D Tensor bias for NCHW format but got the bias of rank-${C.shape.length}.`),Y(C.shape.length===0||C.shape[0]===w.outChannels||C.shape[0]===1,()=>`Error in fused conv2d: bias shape (${C.shape}) is not compatible with the number of output channels (${w.outChannels})`)));let N;if(c!=null){const $=c.shape;if(Y($.length<=1||$.length===3,()=>`Error in fused conv2d: only supports scalar, 1-D Tensor or 3-D Tensor PReLU activation weights but got a tensor of rank-${$.length}.`),$.length===1)Y($[0]===1||$[0]===w.outChannels,()=>`Error in fused conv2d: PReLU activation weights (${$}) is not compatible with the number of output channels (${w.outChannels}).`);else if($.length===3)try{jt($,w.outShape)}catch{const F=`Error in fused conv2d: PReLU activation weights (${$}) is not compatible with the output shape of the conv2d (${w.outShape}).`;throw Error(F)}N=Q(c,"prelu weights","fused conv2d")}const k=($,O)=>{Y(s==="NHWC",()=>`Error in gradient of fused conv2D: got dataFormat of ${s} but only NHWC is currently supported.`);const[F,M,_,V]=O,B=S2($,_,l);Y(pu(o),()=>`Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${o}'`);const W=ZA(M.shape,B,F,n,r),q=O3(M,B,F.shape,n,r),j=[W,q];if(V!=null){const G=N2(V,B);j.push(G)}return j},I={x:g,filter:p,bias:C,preluActivationWeights:N},R={strides:n,pad:r,dataFormat:s,dilations:o,dimRoundingMode:i,activation:l,leakyreluAlpha:d};return a==null?ic((O,F,M)=>{let _=ae.runKernel(Db,I,R);return M([F,O,_]),x&&(_=ce(_,[_.shape[1],_.shape[2],_.shape[3]])),{value:_,gradFunc:k}})(g,p):ic((O,F,M,_)=>{let V=ae.runKernel(Db,I,R);return _([F,O,V,M]),x&&(V=ce(V,[V.shape[1],V.shape[2],V.shape[3]])),{value:V,gradFunc:k}})(g,p,C)}const Y8=se({fusedConv2d_:Que});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jue(t,e,n,r,s,o=[1,1],i){let a=t;t.rank===3&&(a=ce(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let l=e;l.rank===3&&(l=ce(e,[1,e.shape[0],e.shape[1],e.shape[2]]));const c={x:a,dy:l},d={strides:r,pad:s,dimRoundingMode:i,dilations:o,filterShape:n};return ae.runKernel(JT,c,d)}const Z8=se({depthwiseConv2dNativeBackpropFilter_:Jue});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ede(t,e,n,r,s,o=[1,1],i){let a=e,l=!1;e.rank===3&&(l=!0,a=ce(e,[1,e.shape[0],e.shape[1],e.shape[2]]));const c={dy:a,filter:n},d={strides:r,pad:s,dimRoundingMode:i,dilations:o,inputShape:t},f=ae.runKernel(eA,c,d);return l?ce(f,[f.shape[1],f.shape[2],f.shape[3]]):f}const Q8=se({depthwiseConv2dNativeBackpropInput_:ede});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tde({x:t,filter:e,strides:n,pad:r,dataFormat:s="NHWC",dilations:o=[1,1],dimRoundingMode:i,bias:a,activation:l="linear",preluActivationWeights:c,leakyreluAlpha:d}){if(I2(ae.state.gradientDepth,l)===!1){let R=k1(t,e,n,r,s,o,i);return a!=null&&(R=Ue(R,a)),E2(R,l,c,d)}const f=Q(t,"x","depthwiseConv2d","float32"),p=Q(e,"filter","depthwiseConv2d","float32");let g=f,x=!1;f.rank===3&&(x=!0,g=ce(f,[1,f.shape[0],f.shape[1],f.shape[2]])),Y(g.rank===4,()=>`Error in fused depthwiseConv2d: input must be rank 4, but got rank ${g.rank}.`),Y(p.rank===4,()=>`Error in fused depthwiseConv2d: filter must be rank 4, but got rank ${p.rank}.`),Y(g.shape[3]===p.shape[2],()=>`Error in fused depthwiseConv2d: number of input channels (${g.shape[3]}) must match the inChannels dimension in filter ${p.shape[2]}.`),o==null&&(o=[1,1]),Y(Es(n,o),()=>`Error in fused depthwiseConv2d: Either strides or dilations must be 1. Got strides ${n} and dilations '${o}'`),co("fused depthwiseConv2d",r,i);const b=ps(g.shape,p.shape,n,o,r,i,!0);let w;a!=null&&(w=Q(a,"bias","fused conv2d"),[w]=wr(w,f),jt(b.outShape,w.shape));let C;c!=null&&(C=Q(c,"prelu weights","fused depthwiseConv2d"));const N=(R,$)=>{Y(pu(o),()=>`Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '${o}'`);const[O,F,M,_]=$,V=S2(R,M,l),B=Q8(F.shape,V,O,n,r,o,i),W=Z8(F,V,O.shape,n,r,o,i);if(_!=null){const q=N2(w,V);return[B,W,q]}return[B,W]},k={x:g,filter:p,bias:w,preluActivationWeights:C},I={strides:n,pad:r,dataFormat:s,dilations:o,dimRoundingMode:i,activation:l,leakyreluAlpha:d};return a==null?ic(($,O,F)=>{let M=ae.runKernel($b,k,I);return F([O,$,M]),x&&(M=ce(M,[M.shape[1],M.shape[2],M.shape[3]])),{value:M,gradFunc:N}})(g,p):ic(($,O,F,M)=>{let _=ae.runKernel($b,k,I);return M([O,$,_,F]),x&&(_=ce(_,[_.shape[1],_.shape[2],_.shape[3]])),{value:_,gradFunc:N}})(g,p,w)}const nde=se({fusedDepthwiseConv2d_:tde});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rde({a:t,b:e,transposeA:n=!1,transposeB:r=!1,bias:s,activation:o="linear",preluActivationWeights:i,leakyreluAlpha:a=.2}){if(I2(ae.state.gradientDepth,o)===!1){let V=en(t,e,n,r);return s!=null&&(V=Ue(V,s)),E2(V,o,i,a)}let l=Q(t,"a","fused matMul"),c=Q(e,"b","fused matMul");[l,c]=wr(l,c);const d=n?l.shape[l.rank-2]:l.shape[l.rank-1],f=r?c.shape[c.rank-1]:c.shape[c.rank-2],p=n?l.shape[l.rank-1]:l.shape[l.rank-2],g=r?c.shape[c.rank-2]:c.shape[c.rank-1],x=l.shape.slice(0,-2),b=c.shape.slice(0,-2),w=Te(x),C=Te(b);Y(d===f,()=>`Error in fused matMul: inner shapes (${d}) and (${f}) of Tensors with shapes ${l.shape} and ${c.shape} and transposeA=${n} and transposeB=${r} must match.`);const k=jt(l.shape.slice(0,-2),c.shape.slice(0,-2)).concat([p,g]),I=n?ce(l,[w,d,p]):ce(l,[w,p,d]),R=r?ce(c,[C,g,f]):ce(c,[C,f,g]);let $;s!=null&&($=Q(s,"bias","fused matMul"),[$]=wr($,l),jt(k,$.shape));let O;i!=null&&(O=Q(i,"prelu weights","fused matMul"));const F=(V,B)=>{const[W,q,j,G]=B,Z=S2(ce(V,j.shape),j,o);let J,X;if(!n&&!r?(J=en(Z,q,!1,!0),X=en(W,Z,!0,!1)):!n&&r?(J=en(Z,q,!1,!1),X=en(Z,W,!0,!1)):n&&!r?(J=en(q,Z,!1,!0),X=en(W,Z,!1,!1)):(J=en(q,Z,!0,!0),X=en(Z,W,!0,!0)),s!=null){const ee=N2(G,Z);return[J,X,ee]}else return[J,X]},M={a:I,b:R,bias:$,preluActivationWeights:O},_={transposeA:n,transposeB:r,activation:o,leakyreluAlpha:a};return s==null?ic((B,W,q)=>{const j=ae.runKernel(Rb,M,_);return q([B,W,j]),{value:ce(j,k),gradFunc:F}})(I,R):ic((B,W,q,j)=>{const G=ae.runKernel(Rb,M,_);return j([B,W,G,q]),{value:ce(G,k),gradFunc:F}})(I,R,$)}const aI=se({fusedMatMul_:rde});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sde=Object.freeze(Object.defineProperty({__proto__:null,conv2d:Y8,depthwiseConv2d:nde,matMul:aI},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ode(t){return $3(t,.54,.46)}const ide=se({hammingWindow_:ode});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ade(t){return $3(t,.5,.5)}const J8=se({hannWindow_:ade});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lde(t,e,n,r=!1,s=0){let o=0;const i=[];for(;o+e<=t.size;)i.push(Pt(t,o,e)),o+=n;if(r)for(;o<t.size;){const a=o+e-t.size,l=yr([Pt(t,o,e-a),Rp([a],s)]);i.push(l),o+=n}return i.length===0?kd([],[0,e]):ce(yr(i),[i.length,e])}const ej=se({frame_:lde});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cde(t,e,n,r,s=J8){r==null&&(r=K8(e));const o=ej(t,e,n),i=ie(o,s(e));return C2(i,r)}const ude=se({stft_:cde});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dde(t,e,n,r,s="bilinear",o=0){const i=Q(t,"image","cropAndResize"),a=Q(e,"boxes","cropAndResize","float32"),l=Q(n,"boxInd","cropAndResize","int32"),c=a.shape[0];Y(i.rank===4,()=>`Error in cropAndResize: image must be rank 4,but got rank ${i.rank}.`),Y(a.rank===2&&a.shape[1]===4,()=>`Error in cropAndResize: boxes must be have size [${c},4] but had shape ${a.shape}.`),Y(l.rank===1&&l.shape[0]===c,()=>`Error in cropAndResize: boxInd must be have size [${c}] but had shape ${a.shape}.`),Y(r.length===2,()=>`Error in cropAndResize: cropSize must be of length 2, but got length ${r.length}.`),Y(r[0]>=1&&r[1]>=1,()=>`cropSize must be atleast [1,1], but was ${r}`),Y(s==="bilinear"||s==="nearest",()=>`method must be bilinear or nearest, but was ${s}`);const d={image:i,boxes:a,boxInd:l},f={method:s,extrapolationValue:o,cropSize:r};return ae.runKernel(YT,d,f)}const fde=se({cropAndResize_:dde});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hde(t){const e=Q(t,"image","flipLeftRight","float32");Y(e.rank===4,()=>`Error in flipLeftRight: image must be rank 4,but got rank ${e.rank}.`);const n={image:e};return ae.runKernel(iA,n,{})}const pde=se({flipLeftRight_:hde});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mde(t){const e=Q(t,"image","grayscaleToRGB"),n=e.rank-1,r=e.shape[n];Y(e.rank>=2,()=>`Error in grayscaleToRGB: images must be at least rank 2, but got rank ${e.rank}.`),Y(r===1,()=>`Error in grayscaleToRGB: last dimension of a grayscale image should be size 1, but got size ${r}.`);const s=new Array(e.rank);return s.fill(1,0,n),s[n]=3,Hi(e,s)}const gde=se({grayscaleToRGB_:mde});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xde(t){const e=Q(t,"image","RGBToGrayscale"),n=e.rank-1,r=e.shape[n];Y(e.rank>=2,()=>`Error in RGBToGrayscale: images must be at least rank 2, but got rank ${e.rank}.`),Y(r===3,()=>`Error in RGBToGrayscale: last dimension of an RGB image should be size 3, but got size ${r}.`);const s=e.dtype,o=nt(e,"float32"),i=cs([.2989,.587,.114]);let a;switch(e.rank){case 2:a=Kf("ij,j->i",o,i);break;case 3:a=Kf("ijk,k->ij",o,i);break;case 4:a=Kf("ijkl,l->ijk",o,i);break;case 5:a=Kf("ijklm,m->ijkl",o,i);break;case 6:a=Kf("ijklmn,n->ijklm",o,i);break;default:throw new Error("Not a valid tensor rank.")}return a=Ls(a,-1),nt(a,s)}const yde=se({rgbToGrayscale_:xde});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bde(t,e,n=0,r=.5){const s=Q(t,"image","rotateWithOffset","float32");Y(s.rank===4,()=>`Error in rotateWithOffset: image must be rank 4,but got rank ${s.rank}.`);const o={image:s},i={radians:e,fillValue:n,center:r};return ae.runKernel(VA,o,i)}const wde=se({rotateWithOffset_:bde});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Op(t,e,n,r,s,o){r==null&&(r=.5),s==null&&(s=Number.NEGATIVE_INFINITY),o==null&&(o=0);const i=t.shape[0];return n=Math.min(n,i),Y(0<=r&&r<=1,()=>`iouThreshold must be in [0, 1], but was '${r}'`),Y(t.rank===2,()=>`boxes must be a 2D tensor, but was of rank '${t.rank}'`),Y(t.shape[1]===4,()=>`boxes must have 4 columns, but 2nd dimension was ${t.shape[1]}`),Y(e.rank===1,()=>"scores must be a 1D tensor"),Y(e.shape[0]===i,()=>`scores has incompatible shape with boxes. Expected ${i}, but was ${e.shape[0]}`),Y(0<=o&&o<=1,()=>`softNmsSigma must be in [0, 1], but was '${o}'`),{maxOutputSize:n,iouThreshold:r,scoreThreshold:s,softNmsSigma:o}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vde(t,e,n,r=.5,s=Number.NEGATIVE_INFINITY){const o=Q(t,"boxes","nonMaxSuppression","float32"),i=Q(e,"scores","nonMaxSuppression","float32"),a=Op(o,i,n,r,s);n=a.maxOutputSize,r=a.iouThreshold,s=a.scoreThreshold;const l={maxOutputSize:n,iouThreshold:r,scoreThreshold:s};return ae.runKernel(gA,{boxes:o,scores:i},l)}const Cde=se({nonMaxSuppression_:vde});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Sde(t,e,n){const r=Nde(t,e,n),s=r<0?-(r+1):r;t.splice(s,0,e)}function Nde(t,e,n){return Ide(t,e,n||Ede)}function Ede(t,e){return t>e?1:t<e?-1:0}function Ide(t,e,n){let r=0,s=t.length,o=0,i=!1;for(;r<s;){o=r+(s-r>>>1);const a=n(e,t[o]);a>0?r=o+1:(s=o,i=!a)}return i?r:-r-1}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _3(t,e,n,r,s){return M3(t,e,n,r,s,0)}function P3(t,e,n,r,s,o){return M3(t,e,n,r,s,0,!1,o,!0)}function F3(t,e,n,r,s,o){return M3(t,e,n,r,s,o,!0)}function M3(t,e,n,r,s,o,i=!1,a=!1,l=!1){const c=[];for(let w=0;w<e.length;w++)e[w]>s&&c.push({score:e[w],boxIndex:w,suppressBeginIndex:0});c.sort(V4);const d=o>0?-.5/o:0,f=[],p=[];for(;f.length<n&&c.length>0;){const w=c.pop(),{score:C,boxIndex:N,suppressBeginIndex:k}=w;if(C<s)break;let I=!1;for(let R=f.length-1;R>=k;--R){const $=kde(t,N,f[R]);if($>=r){I=!0;break}if(w.score=w.score*Tde(r,d,$),w.score<=s)break}w.suppressBeginIndex=f.length,I||(w.score===C?(f.push(N),p.push(w.score)):w.score>s&&Sde(c,w,V4))}const g=f.length,x=n-g;a&&x>0&&(f.push(...new Array(x).fill(0)),p.push(...new Array(x).fill(0)));const b={selectedIndices:f};return i&&(b.selectedScores=p),l&&(b.validOutputs=g),b}function kde(t,e,n){const r=t.subarray(e*4,e*4+4),s=t.subarray(n*4,n*4+4),o=Math.min(r[0],r[2]),i=Math.min(r[1],r[3]),a=Math.max(r[0],r[2]),l=Math.max(r[1],r[3]),c=Math.min(s[0],s[2]),d=Math.min(s[1],s[3]),f=Math.max(s[0],s[2]),p=Math.max(s[1],s[3]),g=(a-o)*(l-i),x=(f-c)*(p-d);if(g<=0||x<=0)return 0;const b=Math.max(o,c),w=Math.max(i,d),C=Math.min(a,f),N=Math.min(l,p),k=Math.max(C-b,0)*Math.max(N-w,0);return k/(g+x-k)}function Tde(t,e,n){const r=Math.exp(e*n*n);return n<=t?r:0}function V4(t,e){return t.score-e.score||t.score===e.score&&e.boxIndex-t.boxIndex}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function Ade(t,e,n,r=.5,s=Number.NEGATIVE_INFINITY){const o=Q(t,"boxes","nonMaxSuppressionAsync"),i=Q(e,"scores","nonMaxSuppressionAsync"),a=Op(o,i,n,r,s);n=a.maxOutputSize,r=a.iouThreshold,s=a.scoreThreshold;const l=await Promise.all([o.data(),i.data()]),c=l[0],d=l[1],{selectedIndices:f}=_3(c,d,n,r,s);return o!==t&&o.dispose(),i!==e&&i.dispose(),cs(f,"int32")}const Rde=Ade;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dde(t,e,n,r=.5,s=Number.NEGATIVE_INFINITY,o=0){const i=Q(t,"boxes","nonMaxSuppression"),a=Q(e,"scores","nonMaxSuppression"),l=Op(i,a,n,r,s,o);n=l.maxOutputSize,r=l.iouThreshold,s=l.scoreThreshold,o=l.softNmsSigma;const c={boxes:i,scores:a},d={maxOutputSize:n,iouThreshold:r,scoreThreshold:s,softNmsSigma:o},f=ae.runKernel(yA,c,d);return{selectedIndices:f[0],selectedScores:f[1]}}const $de=se({nonMaxSuppressionWithScore_:Dde});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function Ode(t,e,n,r=.5,s=Number.NEGATIVE_INFINITY,o=0){const i=Q(t,"boxes","nonMaxSuppressionAsync"),a=Q(e,"scores","nonMaxSuppressionAsync"),l=Op(i,a,n,r,s,o);n=l.maxOutputSize,r=l.iouThreshold,s=l.scoreThreshold,o=l.softNmsSigma;const c=await Promise.all([i.data(),a.data()]),d=c[0],f=c[1],{selectedIndices:p,selectedScores:g}=F3(d,f,n,r,s,o);return i!==t&&i.dispose(),a!==e&&a.dispose(),{selectedIndices:cs(p,"int32"),selectedScores:cs(g)}}const _de=Ode;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pde(t,e,n,r=.5,s=Number.NEGATIVE_INFINITY,o=!1){const i=Q(t,"boxes","nonMaxSuppression"),a=Q(e,"scores","nonMaxSuppression"),l=Op(i,a,n,r,s,null),c=l.maxOutputSize,d=l.iouThreshold,f=l.scoreThreshold,p={boxes:i,scores:a},g={maxOutputSize:c,iouThreshold:d,scoreThreshold:f,padToMaxOutputSize:o},x=ae.runKernel(xA,p,g);return{selectedIndices:x[0],validOutputs:x[1]}}const Fde=se({nonMaxSuppressionPadded_:Pde});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function Mde(t,e,n,r=.5,s=Number.NEGATIVE_INFINITY,o=!1){const i=Q(t,"boxes","nonMaxSuppressionAsync"),a=Q(e,"scores","nonMaxSuppressionAsync"),l=Op(i,a,n,r,s,null),c=l.maxOutputSize,d=l.iouThreshold,f=l.scoreThreshold,[p,g]=await Promise.all([i.data(),a.data()]),{selectedIndices:x,validOutputs:b}=P3(p,g,c,d,f,o);return i!==t&&i.dispose(),a!==e&&a.dispose(),{selectedIndices:cs(x,"int32"),validOutputs:kt(b,"int32")}}const Lde=Mde;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bde(t,e,n=!1,r=!1){const s=Q(t,"images","resizeBilinear");Y(s.rank===3||s.rank===4,()=>`Error in resizeBilinear: x must be rank 3 or 4, but got rank ${s.rank}.`),Y(e.length===2,()=>`Error in resizeBilinear: new shape must 2D, but got shape ${e}.`),Y(r===!1||n===!1,()=>"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false.");let o=s,i=!1;s.rank===3&&(i=!0,o=ce(s,[1,s.shape[0],s.shape[1],s.shape[2]]));const a={images:o},l={alignCorners:n,halfPixelCenters:r,size:e},c=ae.runKernel(Gv,a,l);return i?ce(c,[c.shape[1],c.shape[2],c.shape[3]]):c}const tj=se({resizeBilinear_:Bde});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jde(t,e,n=!1,r=!1){const s=Q(t,"images","resizeNearestNeighbor");Y(s.rank===3||s.rank===4,()=>`Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank ${s.rank}.`),Y(e.length===2,()=>`Error in resizeNearestNeighbor: new shape must 2D, but got shape ${e}.`),Y(s.dtype==="float32"||s.dtype==="int32",()=>"`images` must have `int32` or `float32` as dtype"),Y(r===!1||n===!1,()=>"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false.");let o=s,i=!1;s.rank===3&&(i=!0,o=ce(s,[1,s.shape[0],s.shape[1],s.shape[2]]));const a={images:o},l={alignCorners:n,halfPixelCenters:r,size:e},c=ae.runKernel(Hv,a,l);return i?ce(c,[c.shape[1],c.shape[2],c.shape[3]]):c}const nj=se({resizeNearestNeighbor_:jde});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zde(t,e="binary",n=!1,r=.5){const s=Q(t,"image","threshold"),o=.2989,i=.587,a=.114,l=s.shape[0]*s.shape[1];let c=ie(cs([r]),255),d,f,p,g;if(Y(s.rank===3,()=>`Error in threshold: image must be rank 3,but got rank ${s.rank}.`),Y(s.shape[2]===3||s.shape[2]===1,()=>`Error in threshold: image color channel must be equal to 3 or 1but got ${s.shape[2]}.`),Y(s.dtype==="int32"||s.dtype==="float32",()=>`Error in dtype: image dtype must be int32 or float32,but got dtype ${s.dtype}.`),Y(e==="otsu"||e==="binary",()=>`Method must be binary or otsu, but was ${e}`),s.shape[2]===3){[d,f,p]=Ho(s,[1,1,1],-1);const w=ie(d,o),C=ie(f,i),N=ie(p,a);g=Ue(Ue(w,C),N)}else g=t;if(e==="otsu"){const w=u8(nt(b3(g),"int32"),ka([]),256);c=Vde(w,l)}const x=n?ff(g,c):ri(g,c);return nt(ie(x,255),"int32")}function Vde(t,e){let n=cs([-1]),r=cs([0]),s=cs([0]),o,i,a,l,c,d;for(let f=0;f<t.size-1;f++){o=Pt(t,0,f+1),i=Pt(t,f+1),c=mt(bt(o),e),d=mt(bt(i),e);const p=bt(ie(o,Qh(0,o.size)));a=mt(p,bt(o));const g=Rp(i.shape,o.size),x=Ue(Qh(0,i.size),g),b=ie(i,x);l=mt(bt(b),bt(i));const w=lt(a,l),C=lt(a,l),N=ie(c,d);s=ie(ie(N,w),C);const k=ri(s,r);r=js(k,s,r),n=js(k,cs([f]),n)}return n}const Wde=se({threshold_:zde});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ude(t,e,n="nearest",r="constant",s=0,o){const i=Q(t,"image","transform","float32"),a=Q(e,"transforms","transform","float32");Y(i.rank===4,()=>`Error in transform: image must be rank 4,but got rank ${i.rank}.`),Y(a.rank===2&&(a.shape[0]===i.shape[0]||a.shape[0]===1)&&a.shape[1]===8,()=>"Error in transform: Input transform should be batch x 8 or 1 x 8"),Y(o==null||o.length===2,()=>`Error in transform: outputShape must be [height, width] or null, but got ${o}.`);const l={image:i,transforms:a},c={interpolation:n,fillMode:r,fillValue:s,outputShape:o};return ae.runKernel(jA,l,c)}const Hde=se({transform_:Ude});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gde(t,e,n){const r=Q(t,"a","bandPart");Y(r.rank>=2,()=>`bandPart(): Rank must be at least 2, got ${r.rank}.`);const s=r.shape,[o,i]=r.shape.slice(-2);let a,l;typeof e=="number"?(Y(e%1===0,()=>`bandPart(): numLower must be an integer, got ${e}.`),Y(e<=o,()=>`bandPart(): numLower (${e}) must not be greater than the number of rows (${o}).`),a=Q(e<0?o:e,"numLower","bandPart")):(Y(e.dtype==="int32",()=>"bandPart(): numLower's dtype must be an int32."),a=js(Xg(e,0),o,Gd(e,o))),typeof n=="number"?(Y(n%1===0,()=>`bandPart(): numUpper must be an integer, got ${n}.`),Y(n<=i,()=>`bandPart(): numUpper (${n}) must not be greater than the number of columns (${i}).`),l=Q(n<0?i:n,"numUpper","bandPart")):(Y(n.dtype==="int32",()=>"bandPart(): numUpper's dtype must be an int32."),l=js(Xg(n,0),i,Gd(n,i)));const c=ce(Qh(0,o,1,"int32"),[-1,1]),d=Qh(0,i,1,"int32"),f=lt(c,d),p=Nl(ff(f,a),_u(f,Jn(l))),g=qr([o,i],r.dtype);return ce(Zo(ra(ce(r,[-1,o,i])).map(x=>js(p,x,g))),s)}const qde=se({bandPart_:Gde});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xde(t){let e;if(Array.isArray(t)){e=!1,Y(t!=null&&t.length>0,()=>"Gram-Schmidt process: input must not be null, undefined, or empty");const s=t[0].shape[0];for(let o=1;o<t.length;++o)Y(t[o].shape[0]===s,()=>`Gram-Schmidt: Non-unique lengths found in the input vectors: (${t[o].shape[0]} vs. ${s})`)}else e=!0,t=Ho(t,t.shape[0],0).map(s=>Aa(s,[0]));Y(t.length<=t[0].shape[0],()=>`Gram-Schmidt: Number of vectors (${t.length}) exceeds number of dimensions (${t[0].shape[0]}).`);const n=[],r=t;for(let s=0;s<t.length;++s)n.push(ae.tidy(()=>{let o=r[s];if(s>0)for(let i=0;i<s;++i){const a=ie(bt(ie(n[i],o)),n[i]);o=lt(o,a)}return mt(o,A1(o,"euclidean"))}));return e?Zo(n,0):n}const Kde=se({gramSchmidt_:Xde});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yde(t,e=!1){if(Y(t.rank>=2,()=>`qr() requires input tensor to have a rank >= 2, but got rank ${t.rank}`),t.rank===2)return W4(t,e);{const n=t.shape.slice(0,t.shape.length-2).reduce((l,c)=>l*c),r=ra(ce(t,[n,t.shape[t.shape.length-2],t.shape[t.shape.length-1]]),0),s=[],o=[];r.forEach(l=>{const[c,d]=W4(l,e);s.push(c),o.push(d)});const i=ce(Zo(s,0),t.shape),a=ce(Zo(o,0),t.shape);return[i,a]}}function W4(t,e=!1){return ae.tidy(()=>{Y(t.shape.length===2,()=>`qr2d() requires a 2D Tensor, but got a ${t.shape.length}D Tensor.`);const n=t.shape[0],r=t.shape[1];let s=r3(n),o=Zl(t);const i=kd([[1]],[1,1]);let a=Zl(i);const l=n>=r?r:n;for(let c=0;c<l;++c){const d=o,f=a,p=s;[a,o,s]=ae.tidy(()=>{const g=Pt(o,[c,c],[n-c,1]),x=A1(g),b=Pt(o,[c,c],[1,1]),w=js(ri(b,0),kd([[-1]]),kd([[1]])),C=lt(b,ie(w,x)),N=mt(g,C);N.shape[0]===1?a=Zl(i):a=yr([i,Pt(N,[1,0],[N.shape[0]-1,N.shape[1]])],0);const k=Jn(mt(en(w,C),x)),I=Pt(o,[c,0],[n-c,r]),R=ie(k,a),$=an(a);if(c===0)o=lt(I,en(R,en($,I)));else{const M=lt(I,en(R,en($,I)));o=yr([Pt(o,[0,0],[c,r]),M],0)}const O=an(R),F=Pt(s,[0,c],[n,s.shape[1]-c]);if(c===0)s=lt(F,en(en(F,a),O));else{const M=lt(F,en(en(F,a),O));s=yr([Pt(s,[0,0],[n,c]),M],1)}return[a,o,s]}),Yt([d,f,p])}return!e&&n>r&&(s=Pt(s,[0,0],[n,r]),o=Pt(o,[0,0],[r,r])),[s,o]})}const Zde=se({qr_:Yde});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var xo;(function(t){t[t.NONE=0]="NONE",t[t.MEAN=1]="MEAN",t[t.SUM=2]="SUM",t[t.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"})(xo||(xo={}));function Qde(t,e,n=xo.SUM_BY_NONZERO_WEIGHTS){const r=Q(t,"losses","computeWeightedLoss");let s=null;e!=null&&(s=Q(e,"weights","computeWeightedLoss"));const o=s==null?r:ie(r,s);if(n===xo.NONE)return o;if(n===xo.SUM)return bt(o);if(n===xo.MEAN){if(s==null)return gr(o);{const i=r.size/s.size,a=mt(bt(o),bt(s));return i>1?mt(a,kt(i)):a}}if(n===xo.SUM_BY_NONZERO_WEIGHTS){if(s==null)return mt(bt(o),kt(r.size));{const i=ie(s,jo(r.shape)),a=nt(bt(Zh(i,kt(0))),"float32");return mt(bt(o),a)}}throw Error(`Unknown reduction: ${n}`)}const xc=se({computeWeightedLoss_:Qde});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jde(t,e,n,r=xo.SUM_BY_NONZERO_WEIGHTS){const s=Q(t,"labels","absoluteDifference"),o=Q(e,"predictions","absoluteDifference");let i=null;n!=null&&(i=Q(n,"weights","absoluteDifference")),ti(s.shape,o.shape,"Error in absoluteDifference: ");const a=Ur(lt(s,o));return xc(a,i,r)}const efe=se({absoluteDifference_:Jde});function tfe(t,e,n,r,s=xo.SUM_BY_NONZERO_WEIGHTS){const o=Q(t,"labels","cosineDistance"),i=Q(e,"predictions","cosineDistance");let a=null;r!=null&&(a=Q(r,"weights","cosineDistance")),ti(o.shape,i.shape,"Error in cosineDistance: ");const l=kt(1),c=lt(l,bt(ie(o,i),n,!0));return xc(c,a,s)}const nfe=se({cosineDistance_:tfe});function rfe(t,e,n,r=xo.SUM_BY_NONZERO_WEIGHTS){let s=Q(t,"labels","hingeLoss");const o=Q(e,"predictions","hingeLoss");let i=null;n!=null&&(i=Q(n,"weights","hingeLoss")),ti(s.shape,o.shape,"Error in hingeLoss: ");const a=kt(1);s=lt(ie(kt(2),s),a);const l=$l(lt(a,ie(s,o)));return xc(l,i,r)}const sfe=se({hingeLoss_:rfe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ofe(t,e,n,r=1,s=xo.SUM_BY_NONZERO_WEIGHTS){const o=Q(t,"labels","huberLoss"),i=Q(e,"predictions","huberLoss");let a=null;n!=null&&(a=Q(n,"weights","huberLoss")),ti(o.shape,i.shape,"Error in huberLoss: ");const l=kt(r),c=Ur(lt(i,o)),d=Gd(c,l),f=lt(c,d),p=Ue(ie(kt(.5),Fn(d)),ie(l,f));return xc(p,a,s)}const ife=se({huberLoss_:ofe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function afe(t,e,n,r=1e-7,s=xo.SUM_BY_NONZERO_WEIGHTS){const o=Q(t,"labels","logLoss"),i=Q(e,"predictions","logLoss");let a=null;n!=null&&(a=Q(n,"weights","logLoss")),ti(o.shape,i.shape,"Error in logLoss: ");const l=kt(1),c=kt(r),d=Jn(ie(o,xi(Ue(i,c)))),f=ie(lt(l,o),xi(Ue(lt(l,i),c))),p=lt(d,f);return xc(p,a,s)}const lfe=se({logLoss_:afe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cfe(t,e,n,r=xo.SUM_BY_NONZERO_WEIGHTS){const s=Q(t,"labels","meanSquaredError"),o=Q(e,"predictions","meanSquaredError");let i=null;n!=null&&(i=Q(n,"weights","meanSquaredError")),ti(s.shape,o.shape,"Error in meanSquaredError: ");const a=k3(s,o);return xc(a,i,r)}const ufe=se({meanSquaredError_:cfe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dfe(t,e){const n=Q(t,"labels","sigmoidCrossEntropyWithLogits"),r=Q(e,"logits","sigmoidCrossEntropyWithLogits");ti(n.shape,r.shape,"Error in sigmoidCrossEntropyWithLogits: ");const s=$l(r),o=ie(r,n),i=d2(Yo(Jn(Ur(r))));return Ue(lt(s,o),i)}function ffe(t,e,n,r=0,s=xo.SUM_BY_NONZERO_WEIGHTS){let o=Q(t,"multiClassLabels","sigmoidCrossEntropy");const i=Q(e,"logits","sigmoidCrossEntropy");let a=null;if(n!=null&&(a=Q(n,"weights","sigmoidCrossEntropy")),ti(o.shape,i.shape,"Error in sigmoidCrossEntropy: "),r>0){const c=kt(r),d=kt(1),f=kt(.5);o=Ue(ie(o,lt(d,c)),ie(f,c))}const l=dfe(o,i);return xc(l,a,s)}const hfe=se({sigmoidCrossEntropy_:ffe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pfe(t,e,n=-1){if(n===-1&&(n=e.rank-1),n!==e.rank-1)throw Error(`Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank ${e.rank} and dim was ${n}`);return ic((s,o,i)=>{const l=f2(o,[n],!0),c=lt(nt(o,"float32"),l);i([s,c]);const d=Jn(ie(c,s));return{value:bt(d,[n]),gradFunc:(g,x)=>{const[b,w]=x,C=Dr(g.shape,[n]);return[ie(ce(g,C),lt(nt(b,"float32"),Yo(w))),ie(ce(g,C),lt(Yo(w),nt(b,"float32")))]}}})(t,e)}function mfe(t,e,n,r=0,s=xo.SUM_BY_NONZERO_WEIGHTS){let o=Q(t,"onehotLabels","softmaxCrossEntropy");const i=Q(e,"logits","softmaxCrossEntropy");let a=null;if(n!=null&&(a=Q(n,"weights","softmaxCrossEntropy")),ti(o.shape,i.shape,"Error in softmaxCrossEntropy: "),r>0){const c=kt(r),d=kt(1),f=kt(o.shape[1]);o=Ue(ie(o,lt(d,c)),mt(c,f))}const l=pfe(o,i);return xc(l,a,s)}const gfe=se({softmaxCrossEntropy_:mfe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xfe(t,e,n,r){const s=Q(t,"indices","sparseFillEmptyRows","int32"),o=Q(e,"values","sparseFillEmptyRows"),i=Q(n,"denseShape","sparseFillEmptyRows","int32"),a=Q(r,"defaultValue","sparseFillEmptyRows",o.dtype);if(s.rank!==2)throw new Error(`Indices should be Tensor2D but received shape
        ${s.shape}`);if(o.rank!==1)throw new Error(`Values should be Tensor1D but received shape ${o.shape}`);if(i.rank!==1)throw new Error(`Dense shape should be Tensor1D but received shape ${i.shape}`);if(a.rank!==0)throw new Error(`Default value should be a scalar but received shape ${a.shape}`);const l={indices:s,values:o,denseShape:i,defaultValue:a},c=ae.runKernel(AA,l);return{outputIndices:c[0],outputValues:c[1],emptyRowIndicator:c[2],reverseIndexMap:c[3]}}const yfe=se({sparseFillEmptyRows_:xfe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bfe(t,e,n){const r=Q(t,"inputIndices","sparseReshape","int32"),s=Q(e,"inputShape","sparseReshape","int32"),o=Q(n,"newShape","sparseReshape","int32");if(r.rank!==2)throw new Error(`Input indices should be Tensor2D but received shape
        ${r.shape}`);if(s.rank!==1)throw new Error(`Input shape should be Tensor1D but received shape ${s.shape}`);if(o.rank!==1)throw new Error(`New shape should be Tensor1D but received shape ${o.shape}`);const i={inputIndices:r,inputShape:s,newShape:o},a=ae.runKernel(RA,i);return{outputIndices:a[0],outputShape:a[1]}}const wfe=se({sparseReshape_:bfe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vfe(t,e,n){const r=Q(t,"data","sparseSegmentMean"),s=Q(e,"indices","sparseSegmentMean","int32"),o=Q(n,"segmentIds","sparseSegmentMean","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(s.rank!==1)throw new Error(`Indices should be Tensor1D but received shape
          ${s.shape}`);if(o.rank!==1)throw new Error(`Segment ids should be Tensor1D but received shape
          ${o.shape}`);const i={data:r,indices:s,segmentIds:o};return ae.runKernel(DA,i)}const Cfe=se({sparseSegmentMean_:vfe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Sfe(t,e,n){const r=Q(t,"data","sparseSegmentSum"),s=Q(e,"indices","sparseSegmentSum","int32"),o=Q(n,"segmentIds","sparseSegmentSum","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(s.rank!==1)throw new Error(`Indices should be Tensor1D but received shape
         ${s.shape}`);if(o.rank!==1)throw new Error(`Segment ids should be Tensor1D but received shape
         ${o.shape}`);const i={data:r,indices:s,segmentIds:o};return ae.runKernel($A,i)}const Nfe=se({sparseSegmentSum_:Sfe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Efe(t,e,n,r,s,o,i,a){const l=Q(t,"data","stringNGrams","string");if(l.dtype!=="string")throw new Error("Data must be of datatype string");if(l.shape.length!==1)throw new Error(`Data must be a vector, saw: ${l.shape}`);const c=Q(e,"dataSplits","stringNGrams");if(c.dtype!=="int32")throw new Error("Data splits must be of datatype int32");const d={separator:n,nGramWidths:r,leftPad:s,rightPad:o,padWidth:i,preserveShortSequences:a},f={data:l,dataSplits:c},p=ae.runKernel(FA,f,d);return{nGrams:p[0],nGramsSplits:p[1]}}const Ife=se({stringNGrams_:Efe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kfe(t,e,n=!0){const r=Q(t,"input","stringSplit","string"),s=Q(e,"delimiter","stringSplit","string");if(r.rank!==1)throw new Error(`Input should be Tensor1D but received shape ${r.shape}`);if(s.rank!==0)throw new Error(`Delimiter should be a scalar but received shape ${s.shape}`);const o={skipEmpty:n},i={input:r,delimiter:s},a=ae.runKernel(MA,i,o);return{indices:a[0],values:a[1],shape:a[2]}}const Tfe=se({stringSplit_:kfe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Afe(t,e){const n=Q(t,"input","stringToHashBucketFast","string"),r={numBuckets:e};if(e<=0)throw new Error("Number of buckets must be at least 1");const s={input:n};return ae.runKernel(LA,s,r)}const Rfe=se({stringToHashBucketFast_:Afe});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dfe(t,e,n,r=!0){const s=Q(t,"input","staticRegexReplace","string"),o={pattern:e,rewrite:n,replaceGlobal:r};return ae.runKernel(e2,{x:s},o)}const $fe=se({staticRegexReplace_:Dfe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ofe={fft:v2,ifft:Zg,rfft:C2,irfft:I3},_fe={hammingWindow:ide,hannWindow:J8,frame:ej,stft:ude},Gi={flipLeftRight:pde,grayscaleToRGB:gde,resizeNearestNeighbor:nj,resizeBilinear:tj,rgbToGrayscale:yde,rotateWithOffset:wde,cropAndResize:fde,nonMaxSuppression:Cde,nonMaxSuppressionAsync:Rde,nonMaxSuppressionWithScore:$de,nonMaxSuppressionWithScoreAsync:_de,nonMaxSuppressionPadded:Fde,nonMaxSuppressionPaddedAsync:Lde,threshold:Wde,transform:Hde},rj={bandPart:qde,gramSchmidt:Kde,qr:Zde},Pfe={absoluteDifference:efe,computeWeightedLoss:xc,cosineDistance:nfe,hingeLoss:sfe,huberLoss:ife,logLoss:lfe,meanSquaredError:ufe,sigmoidCrossEntropy:hfe,softmaxCrossEntropy:gfe},Ffe={sparseFillEmptyRows:yfe,sparseReshape:wfe,sparseSegmentMean:Cfe,sparseSegmentSum:Nfe},Mfe={stringNGrams:Ife,stringSplit:Tfe,stringToHashBucketFast:Rfe,staticRegexReplace:$fe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Lfe=new Map,Bfe=new Map;class _p{getClassName(){return this.constructor.className}static fromConfig(e,n){return new e(n)}}class Bi{constructor(){this.classNameMap={}}static getMap(){return Bi.instance==null&&(Bi.instance=new Bi),Bi.instance}static register(e){Bi.getMap().classNameMap[e.className]=[e,e.fromConfig]}}function qe(t,e,n){Y(t.className!=null,()=>"Class being registered does not have the static className property defined."),Y(typeof t.className=="string",()=>"className is required to be a string, but got type "+typeof t.className),Y(t.className.length>0,()=>"Class being registered has an empty-string as its className, which is disallowed."),typeof e>"u"&&(e="Custom"),typeof n>"u"&&(n=t.className);const r=n,s=e+">"+r;return Bi.register(t),Lfe.set(s,t),Bfe.set(t,s),t}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Fu extends _p{minimize(e,n=!1,r){const{value:s,grads:o}=this.computeGradients(e,r);if(r!=null){const i=r.map(a=>({name:a.name,tensor:o[a.name]}));this.applyGradients(i)}else this.applyGradients(o);return Yt(o),n?s:(s.dispose(),null)}get iterations(){return this.iterations_==null&&(this.iterations_=0),this.iterations_}incrementIterations(){this.iterations_=this.iterations+1}computeGradients(e,n){return fle(e,n)}dispose(){this.iterations_!=null&&Yt(this.iterations_)}async saveIterations(){return this.iterations_==null&&(this.iterations_=0),{name:"iter",tensor:kt(this.iterations_,"int32")}}async getWeights(){throw new Error("getWeights() is not implemented for this optimizer yet.")}async setWeights(e){throw new Error(`setWeights() is not implemented for this optimizer class ${this.getClassName()}`)}async extractIterations(e){return this.iterations_=(await e[0].tensor.data())[0],e.slice(1)}}Object.defineProperty(Fu,Symbol.hasInstance,{value:t=>t.minimize!=null&&t.computeGradients!=null&&t.applyGradients!=null});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class sj extends Fu{static get className(){return"Adadelta"}constructor(e,n,r=null){super(),this.learningRate=e,this.rho=n,this.epsilon=r,this.accumulatedGrads=[],this.accumulatedUpdates=[],r==null&&(this.epsilon=ae.backend.epsilon())}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,s)=>{const o=ae.registeredVariables[r],i=!1;this.accumulatedGrads[s]==null&&(this.accumulatedGrads[s]={originalName:`${r}/accum_grad`,variable:we(()=>ln(o).variable(i))}),this.accumulatedUpdates[s]==null&&(this.accumulatedUpdates[s]={originalName:`${r}/accum_var`,variable:we(()=>ln(o).variable(i))});const a=Array.isArray(e)?e[s].tensor:e[r];if(a==null)return;const l=this.accumulatedGrads[s].variable,c=this.accumulatedUpdates[s].variable;we(()=>{const d=Ue(ie(l,this.rho),ie(Fn(a),1-this.rho)),f=ie(mt(Ns(Ue(c,this.epsilon)),Ns(Ue(l,this.epsilon))),a),p=Ue(ie(c,this.rho),ie(Fn(f),1-this.rho));l.assign(d),c.assign(p);const g=Ue(ie(f,-this.learningRate),o);o.assign(g)})}),this.incrementIterations()}dispose(){this.accumulatedUpdates!=null&&(Yt(this.accumulatedGrads.map(e=>e.variable)),Yt(this.accumulatedUpdates.map(e=>e.variable)))}async getWeights(){const e=[...this.accumulatedGrads,...this.accumulatedUpdates];return[await this.saveIterations()].concat(e.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=e.length/2,r=!1;this.accumulatedGrads=e.slice(0,n).map(s=>({originalName:s.name,variable:s.tensor.variable(r)})),this.accumulatedUpdates=e.slice(n,n*2).map(s=>({originalName:s.name,variable:s.tensor.variable(r)}))}getConfig(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}static fromConfig(e,n){return new e(n.learningRate,n.rho,n.epsilon)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class oj extends Fu{static get className(){return"Adagrad"}constructor(e,n=.1){super(),this.learningRate=e,this.initialAccumulatorValue=n,this.accumulatedGrads=[]}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,s)=>{const o=ae.registeredVariables[r];this.accumulatedGrads[s]==null&&(this.accumulatedGrads[s]={originalName:`${r}/accumulator`,variable:we(()=>Rp(o.shape,this.initialAccumulatorValue).variable(!1))});const i=Array.isArray(e)?e[s].tensor:e[r];if(i==null)return;const a=this.accumulatedGrads[s].variable;we(()=>{const l=Ue(a,Fn(i));a.assign(l);const c=Ue(ie(mt(i,Ns(Ue(l,ae.backend.epsilon()))),-this.learningRate),o);o.assign(c)})}),this.incrementIterations()}dispose(){this.accumulatedGrads!=null&&Yt(this.accumulatedGrads.map(e=>e.variable))}async getWeights(){return[await this.saveIterations()].concat(this.accumulatedGrads.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=!1;this.accumulatedGrads=e.map(r=>({originalName:r.name,variable:r.tensor.variable(n)}))}getConfig(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}static fromConfig(e,n){return new e(n.learningRate,n.initialAccumulatorValue)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ij extends Fu{static get className(){return"Adam"}constructor(e,n,r,s=null){super(),this.learningRate=e,this.beta1=n,this.beta2=r,this.epsilon=s,this.accumulatedFirstMoment=[],this.accumulatedSecondMoment=[],we(()=>{this.accBeta1=kt(n).variable(),this.accBeta2=kt(r).variable()}),s==null&&(this.epsilon=ae.backend.epsilon())}applyGradients(e){const n=Array.isArray(e)?e.map(r=>r.name):Object.keys(e);we(()=>{const r=lt(1,this.accBeta1),s=lt(1,this.accBeta2);n.forEach((o,i)=>{const a=ae.registeredVariables[o],l=!1;this.accumulatedFirstMoment[i]==null&&(this.accumulatedFirstMoment[i]={originalName:`${o}/m`,variable:we(()=>ln(a).variable(l))}),this.accumulatedSecondMoment[i]==null&&(this.accumulatedSecondMoment[i]={originalName:`${o}/v`,variable:we(()=>ln(a).variable(l))});const c=Array.isArray(e)?e[i].tensor:e[o];if(c==null)return;const d=this.accumulatedFirstMoment[i].variable,f=this.accumulatedSecondMoment[i].variable,p=Ue(ie(d,this.beta1),ie(c,1-this.beta1)),g=Ue(ie(f,this.beta2),ie(Fn(c),1-this.beta2)),x=mt(p,r),b=mt(g,s);d.assign(p),f.assign(g);const w=Ue(ie(mt(x,Ue(Ns(b),this.epsilon)),-this.learningRate),a);a.assign(w)}),this.accBeta1.assign(ie(this.accBeta1,this.beta1)),this.accBeta2.assign(ie(this.accBeta2,this.beta2))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.accBeta2.dispose(),this.accumulatedFirstMoment!=null&&Yt(this.accumulatedFirstMoment.map(e=>e.variable)),this.accumulatedSecondMoment!=null&&Yt(this.accumulatedSecondMoment.map(e=>e.variable))}async getWeights(){const e=[...this.accumulatedFirstMoment,...this.accumulatedSecondMoment];return[await this.saveIterations()].concat(e.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(e){e=await this.extractIterations(e),we(()=>{this.accBeta1.assign(oc(this.beta1,this.iterations_+1)),this.accBeta2.assign(oc(this.beta2,this.iterations_+1))});const n=e.length/2,r=!1;this.accumulatedFirstMoment=e.slice(0,n).map(s=>({originalName:s.name,variable:s.tensor.variable(r)})),this.accumulatedSecondMoment=e.slice(n,n*2).map(s=>({originalName:s.name,variable:s.tensor.variable(r)}))}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}static fromConfig(e,n){return new e(n.learningRate,n.beta1,n.beta2,n.epsilon)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class aj extends Fu{static get className(){return"Adamax"}constructor(e,n,r,s=null,o=0){super(),this.learningRate=e,this.beta1=n,this.beta2=r,this.epsilon=s,this.decay=o,this.accumulatedFirstMoment=[],this.accumulatedWeightedInfNorm=[],we(()=>{this.iteration=kt(0).variable(),this.accBeta1=kt(n).variable()}),s==null&&(this.epsilon=ae.backend.epsilon())}applyGradients(e){const n=Array.isArray(e)?e.map(r=>r.name):Object.keys(e);we(()=>{const r=lt(1,this.accBeta1),s=mt(-this.learningRate,Ue(ie(this.iteration,this.decay),1));n.forEach((o,i)=>{const a=ae.registeredVariables[o],l=!1;this.accumulatedFirstMoment[i]==null&&(this.accumulatedFirstMoment[i]={originalName:`${o}/m`,variable:ln(a).variable(l)}),this.accumulatedWeightedInfNorm[i]==null&&(this.accumulatedWeightedInfNorm[i]={originalName:`${o}/v`,variable:ln(a).variable(l)});const c=Array.isArray(e)?e[i].tensor:e[o];if(c==null)return;const d=this.accumulatedFirstMoment[i].variable,f=this.accumulatedWeightedInfNorm[i].variable,p=Ue(ie(d,this.beta1),ie(c,1-this.beta1)),g=ie(f,this.beta2),x=Ur(c),b=gc(g,x);d.assign(p),f.assign(b);const w=Ue(ie(mt(s,r),mt(p,Ue(b,this.epsilon))),a);a.assign(w)}),this.iteration.assign(Ue(this.iteration,1)),this.accBeta1.assign(ie(this.accBeta1,this.beta1))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.iteration.dispose(),this.accumulatedFirstMoment!=null&&Yt(this.accumulatedFirstMoment.map(e=>e.variable)),this.accumulatedWeightedInfNorm!=null&&Yt(this.accumulatedWeightedInfNorm.map(e=>e.variable))}async getWeights(){throw new Error("getWeights() is not implemented for Adamax yet.")}async setWeights(e){throw new Error("setWeights() is not implemented for Adamax yet.")}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}static fromConfig(e,n){return new e(n.learningRate,n.beta1,n.beta2,n.epsilon,n.decay)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class L3 extends Fu{static get className(){return"SGD"}constructor(e){super(),this.learningRate=e,this.setLearningRate(e)}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,s)=>{const o=Array.isArray(e)?e[s].tensor:e[r];if(o==null)return;const i=ae.registeredVariables[r];we(()=>{const a=Ue(ie(this.c,o),i);i.assign(a)})}),this.incrementIterations()}setLearningRate(e){this.learningRate=e,this.c!=null&&this.c.dispose(),this.c=ls(kt(-e))}dispose(){this.c.dispose()}async getWeights(){return[await this.saveIterations()]}async setWeights(e){if(e=await this.extractIterations(e),e.length!==0)throw new Error("SGD optimizer does not have settable weights.")}getConfig(){return{learningRate:this.learningRate}}static fromConfig(e,n){return new e(n.learningRate)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class lj extends L3{static get className(){return"Momentum"}constructor(e,n,r=!1){super(e),this.learningRate=e,this.momentum=n,this.useNesterov=r,this.accumulations=[],this.m=kt(this.momentum)}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,s)=>{const o=ae.registeredVariables[r];this.accumulations[s]==null&&(this.accumulations[s]={originalName:`${r}/momentum`,variable:we(()=>ln(o).variable(!1))});const i=this.accumulations[s].variable,a=Array.isArray(e)?e[s].tensor:e[r];a!=null&&we(()=>{let l;const c=Ue(ie(this.m,i),a);this.useNesterov?l=Ue(ie(this.c,Ue(a,ie(c,this.m))),o):l=Ue(ie(this.c,c),o),i.assign(c),o.assign(l)})}),this.incrementIterations()}dispose(){this.m.dispose(),this.accumulations!=null&&Yt(this.accumulations.map(e=>e.variable))}setMomentum(e){this.momentum=e}async getWeights(){return[await this.saveIterations()].concat(this.accumulations.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=!1;this.accumulations=e.map(r=>({originalName:r.name,variable:r.tensor.variable(n)}))}getConfig(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}static fromConfig(e,n){return new e(n.learningRate,n.momentum,n.useNesterov)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class cj extends Fu{static get className(){return"RMSProp"}constructor(e,n=.9,r=0,s=null,o=!1){if(super(),this.learningRate=e,this.decay=n,this.momentum=r,this.epsilon=s,this.accumulatedMeanSquares=[],this.accumulatedMoments=[],this.accumulatedMeanGrads=[],this.centered=o,s==null&&(this.epsilon=ae.backend.epsilon()),e==null)throw new Error("learningRate for RMSPropOptimizer must be defined.")}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,s)=>{const o=ae.registeredVariables[r],i=!1;this.accumulatedMeanSquares[s]==null&&(this.accumulatedMeanSquares[s]={originalName:`${r}/rms`,variable:we(()=>ln(o).variable(i))}),this.accumulatedMoments[s]==null&&(this.accumulatedMoments[s]={originalName:`${r}/momentum`,variable:we(()=>ln(o).variable(i))}),this.accumulatedMeanGrads[s]==null&&this.centered&&(this.accumulatedMeanGrads[s]={originalName:`${r}/mg`,variable:we(()=>ln(o).variable(i))});const a=Array.isArray(e)?e[s].tensor:e[r];if(a==null)return;const l=this.accumulatedMeanSquares[s].variable,c=this.accumulatedMoments[s].variable;we(()=>{const d=Ue(ie(l,this.decay),ie(Fn(a),1-this.decay));if(this.centered){const f=this.accumulatedMeanGrads[s].variable,p=Ue(ie(f,this.decay),ie(a,1-this.decay)),g=mt(ie(a,this.learningRate),Ns(lt(d,Ue(Fn(p),this.epsilon)))),x=Ue(ie(c,this.momentum),g);l.assign(d),f.assign(p),c.assign(x);const b=lt(o,x);o.assign(b)}else{const f=Ue(ie(l,this.decay),ie(Fn(a),1-this.decay)),p=Ue(ie(c,this.momentum),mt(ie(a,this.learningRate),Ns(Ue(f,this.epsilon))));l.assign(f),c.assign(p);const g=lt(o,p);o.assign(g)}})}),this.incrementIterations()}dispose(){this.accumulatedMeanSquares!=null&&Yt(this.accumulatedMeanSquares.map(e=>e.variable)),this.accumulatedMeanGrads!=null&&this.centered&&Yt(this.accumulatedMeanGrads.map(e=>e.variable)),this.accumulatedMoments!=null&&Yt(this.accumulatedMoments.map(e=>e.variable))}async getWeights(){const e=[...this.accumulatedMeanSquares,...this.accumulatedMoments];return this.centered&&e.push(...this.accumulatedMeanGrads),[await this.saveIterations()].concat(e.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=this.centered?e.length/3:e.length/2,r=!1;this.accumulatedMeanSquares=e.slice(0,n).map(s=>({originalName:s.name,variable:s.tensor.variable(r)})),this.accumulatedMoments=e.slice(n,n*2).map(s=>({originalName:s.name,variable:s.tensor.variable(r)})),this.centered&&(this.accumulatedMeanGrads=e.slice(n*2,n*3).map(s=>({originalName:s.name,variable:s.tensor.variable(r)})))}getConfig(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}static fromConfig(e,n){return new e(n.learningRate,n.decay,n.momentum,n.epsilon,n.centered)}}/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jfe=[sj,oj,ij,aj,lj,cj,L3];function zfe(){for(const t of jfe)qe(t)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Vfe="model",Wfe=".json",Ufe=".weights.bin";function U4(t){return new Promise(e=>setTimeout(e)).then(t)}class qd{constructor(e){if(!Ee().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");e.startsWith(qd.URL_SCHEME)&&(e=e.slice(qd.URL_SCHEME.length)),(e==null||e.length===0)&&(e=Vfe),this.modelJsonFileName=e+Wfe,this.weightDataFileName=e+Ufe}async save(e){if(typeof document>"u")throw new Error("Browser downloads are not supported in this environment since `document` is not present");const n=za.join(e.weightData),r=window.URL.createObjectURL(new Blob([n],{type:"application/octet-stream"}));if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");{const s=[{paths:["./"+this.weightDataFileName],weights:e.weightSpecs}],o=zB(e,s),i=window.URL.createObjectURL(new Blob([JSON.stringify(o)],{type:"application/json"})),a=this.modelJsonAnchor==null?document.createElement("a"):this.modelJsonAnchor;if(a.download=this.modelJsonFileName,a.href=i,await U4(()=>a.dispatchEvent(new MouseEvent("click"))),e.weightData!=null){const l=this.weightDataAnchor==null?document.createElement("a"):this.weightDataAnchor;l.download=this.weightDataFileName,l.href=r,await U4(()=>l.dispatchEvent(new MouseEvent("click")))}return{modelArtifactsInfo:N1(e)}}}}qd.URL_SCHEME="downloads://";class Hfe{constructor(e){if(e==null||e.length<1)throw new Error(`When calling browserFiles, at least 1 file is required, but received ${e}`);this.jsonFile=e[0],this.weightsFiles=e.slice(1)}async load(){return new Promise((e,n)=>{const r=new FileReader;r.onload=s=>{const o=JSON.parse(s.target.result),i=o.modelTopology;if(i==null){n(new Error(`modelTopology field is missing from file ${this.jsonFile.name}`));return}if(o.weightsManifest==null){n(new Error(`weightManifest field is missing from file ${this.jsonFile.name}`));return}if(this.weightsFiles.length===0){e({modelTopology:i});return}const l=GA(o,c=>this.loadWeights(c));e(l)},r.onerror=s=>n(`Failed to read model topology and weights manifest JSON from file '${this.jsonFile.name}'. BrowserFiles supports loading Keras-style tf.Model artifacts only.`),r.readAsText(this.jsonFile)})}loadWeights(e){const n=[],r=[];for(const i of e)n.push(...i.weights),r.push(...i.paths);const s=this.checkManifestAndWeightFiles(e),o=r.map(i=>this.loadWeightsFile(i,s[i]));return Promise.all(o).then(i=>[n,i])}loadWeightsFile(e,n){return new Promise((r,s)=>{const o=new FileReader;o.onload=i=>{const a=i.target.result;r(a)},o.onerror=i=>s(`Failed to weights data from file of path '${e}'.`),o.readAsArrayBuffer(n)})}checkManifestAndWeightFiles(e){const n=[],r=this.weightsFiles.map(o=>z4(o.name)),s={};for(const o of e)o.paths.forEach(i=>{const a=z4(i);if(n.indexOf(a)!==-1)throw new Error(`Duplicate file basename found in weights manifest: '${a}'`);if(n.push(a),r.indexOf(a)===-1)throw new Error(`Weight file with basename '${a}' is not provided.`);s[i]=this.weightsFiles[r.indexOf(a)]});if(n.length!==this.weightsFiles.length)throw new Error(`Mismatch in the number of files in weights manifest (${n.length}) and the number of weight files provided (${this.weightsFiles.length}).`);return s}}const Gfe=t=>Ee().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(qd.URL_SCHEME)?qfe(t.slice(qd.URL_SCHEME.length)):null;cr.registerSaveRouter(Gfe);function qfe(t="model"){return new qd(t)}function Xfe(t){return new Hfe(t)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function H4(t,e,n,r){i(t),n=n??0,r=r??1,a(n,r);let s=0;const o=l=>(l.then(c=>{const d=n+ ++s/t.length*(r-n);return e(d),c}),l);function i(l){Y(l!=null&&Array.isArray(l)&&l.length>0,()=>"promises must be a none empty array")}function a(l,c){Y(l>=0&&l<=1,()=>`Progress fraction must be in range [0, 1], but got startFraction ${l}`),Y(c>=0&&c<=1,()=>`Progress fraction must be in range [0, 1], but got endFraction ${c}`),Y(c>=l,()=>`startFraction must be no more than endFraction, but got startFraction ${l} and endFraction ${c}`)}return Promise.all(t.map(o))}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function uj(t,e){e==null&&(e={});const n=e.fetchFunc==null?Ee().platform.fetch:e.fetchFunc,r=t.map(f=>n(f,e.requestInit,{isBinary:!0})),a=(e.onProgress==null?await Promise.all(r):await H4(r,e.onProgress,0,.5)).map(f=>f.arrayBuffer());return e.onProgress==null?await Promise.all(a):await H4(a,e.onProgress,.5,1)}function Kfe(t,e){var n;const r=e.fetchFunc==null?Ee().platform.fetch:e.fetchFunc;let s=0,o;return(n=e.onProgress)===null||n===void 0||n.call(e,0),new ReadableStream({pull:async i=>{for(var a;s<t.length;){o||(o=(await r(t[s],e.requestInit,{isBinary:!0})).body.getReader());const{done:l,value:c}=await o.read();if(l){s++,o=void 0,(a=e.onProgress)===null||a===void 0||a.call(e,s/t.length);continue}i.enqueue(c);return}i.close()}})}async function Yfe(t,e="",n,r){return dj(i=>uj(i,{requestInit:r}))(t,e,n)}function dj(t){return async(e,n="",r)=>{const s=e.map(()=>!1),o={},i=r!=null?r.map(()=>!1):[],a=[];if(e.forEach((g,x)=>{let b=0;g.weights.forEach(w=>{const C="quantization"in w?w.quantization.dtype:w.dtype,N=zd[C]*Te(w.shape),k=()=>{s[x]=!0,o[x]==null&&(o[x]=[]),o[x].push({manifestEntry:w,groupOffset:b,sizeBytes:N})};r!=null?r.forEach((I,R)=>{I===w.name&&(k(),i[R]=!0)}):k(),a.push(w.name),b+=N})}),!i.every(g=>g)){const g=r.filter((x,b)=>!i[b]);throw new Error(`Could not find weights in manifest with names: ${g.join(", ")}. 
Manifest JSON has weights with names: ${a.join(", ")}.`)}const l=s.reduce((g,x,b)=>(x&&g.push(b),g),[]),c=[];l.forEach(g=>{e[g].paths.forEach(x=>{const b=n+(n.endsWith("/")?"":"/")+x;c.push(b)})});const d=await t(c),f={};let p=0;return l.forEach(g=>{const x=e[g].paths.length,b=new za(d.slice(p,p+x));o[g].forEach(C=>{const N=b.slice(C.groupOffset,C.groupOffset+C.sizeBytes),k=MB(N,[C.manifestEntry]);for(const I in k)f[I]=k[I]}),p+=x}),f}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Zfe="application/octet-stream",Qfe="application/json";class B3{constructor(e,n){if(this.DEFAULT_METHOD="POST",n==null&&(n={}),this.weightPathPrefix=n.weightPathPrefix,this.weightUrlConverter=n.weightUrlConverter,n.fetchFunc!=null?(Y(typeof n.fetchFunc=="function",()=>"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"),this.fetch=n.fetchFunc):this.fetch=Ee().platform.fetch,Y(e!=null&&e.length>0,()=>"URL path for http must not be null, undefined or empty."),Array.isArray(e)&&Y(e.length===2,()=>`URL paths for http must have a length of 2, (actual length is ${e.length}).`),this.path=e,n.requestInit!=null&&n.requestInit.body!=null)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=n.requestInit||{},this.loadOptions=n}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");const n=Object.assign({method:this.DEFAULT_METHOD},this.requestInit);n.body=new FormData;const r=[{paths:["./model.weights.bin"],weights:e.weightSpecs}],s=zB(e,r);if(n.body.append("model.json",new Blob([JSON.stringify(s)],{type:Qfe}),"model.json"),e.weightData!=null){const i=za.join(e.weightData);n.body.append("model.weights.bin",new Blob([i],{type:Zfe}),"model.weights.bin")}const o=await this.fetch(this.path,n);if(o.ok)return{modelArtifactsInfo:N1(e),responses:[o]};throw new Error(`BrowserHTTPRequest.save() failed due to HTTP response status ${o.status}.`)}async loadModelJSON(){const e=await this.fetch(this.path,this.requestInit);if(!e.ok)throw new Error(`Request to ${this.path} failed with status code ${e.status}. Please verify this URL points to the model JSON of the model to load.`);let n;try{n=await e.json()}catch{let i=`Failed to parse model JSON of response from ${this.path}.`;throw this.path.endsWith(".pb")?i+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":i+=" Please make sure the server is serving valid JSON for this request.",new Error(i)}const r=n.modelTopology,s=n.weightsManifest;if(r==null&&s==null)throw new Error(`The JSON from HTTP path ${this.path} contains neither model topology or manifest for weights.`);return n}async load(){if(this.loadOptions.streamWeights)return this.loadStream();const e=await this.loadModelJSON();return GA(e,n=>this.loadWeights(n))}async loadStream(){const e=await this.loadModelJSON(),n=await this.getWeightUrls(e.weightsManifest),r=tI(e.weightsManifest),s=()=>Kfe(n,this.loadOptions);return Object.assign(Object.assign({},e),{weightSpecs:r,getWeightStream:s})}async getWeightUrls(e){const n=Array.isArray(this.path)?this.path[1]:this.path,[r,s]=Jfe(n),o=this.weightPathPrefix||r,i=[],a=[];for(const l of e)for(const c of l.paths)this.weightUrlConverter!=null?a.push(this.weightUrlConverter(c)):i.push(o+c+s);return this.weightUrlConverter&&i.push(...await Promise.all(a)),i}async loadWeights(e){const n=await this.getWeightUrls(e),r=tI(e),s=await uj(n,this.loadOptions);return[r,s]}}B3.URL_SCHEME_REGEX=/^https?:\/\//;function Jfe(t){const e=t.lastIndexOf("/"),n=t.lastIndexOf("?"),r=t.substring(0,e),s=n>e?t.substring(n):"";return[r+"/",s]}function lI(t){return t.match(B3.URL_SCHEME_REGEX)!=null}const fj=(t,e)=>{if(typeof fetch>"u"&&(e==null||e.fetchFunc==null))return null;{let n=!0;if(Array.isArray(t)?n=t.every(r=>lI(r)):n=lI(t),n)return j3(t,e)}return null};cr.registerSaveRouter(fj);cr.registerLoadRouter(fj);function j3(t,e){return new B3(t,e)}function ehe(t,e){return j3(t,e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class eN{constructor(e){this.modelArtifacts=e}load(){return this.modelArtifacts}}class hj{constructor(e){this.saveHandler=e}save(e){return this.saveHandler(e)}}class the{constructor(e){e.load&&(this.load=()=>Promise.resolve(e.load())),e.save&&(this.save=n=>Promise.resolve(e.save(n)))}}function nhe(t,e,n,r){const s=arguments;return new the(pj(...s))}function pj(t,e,n,r){return arguments.length===1?t.modelTopology!=null||t.weightSpecs!=null?new eN(t):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new eN({modelTopology:t})):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new eN({modelTopology:t,weightSpecs:e,weightData:n,trainingConfig:r}))}function rhe(t){return new hj(t)}function she(t){return new hj(t)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mj=Object.freeze(Object.defineProperty({__proto__:null,CompositeArrayBuffer:za,browserFiles:Xfe,browserHTTPRequest:ehe,concatenateArrayBuffers:jB,copyModel:aie,decodeWeights:MB,decodeWeightsStream:BB,encodeWeights:eI,fromMemory:nhe,fromMemorySync:pj,getLoadHandlers:qoe,getModelArtifactsForJSON:GA,getModelArtifactsForJSONSync:VB,getModelArtifactsInfoForJSON:N1,getSaveHandlers:WB,getWeightSpecs:tI,http:j3,isHTTPScheme:lI,listModels:oie,loadWeights:Yfe,moveModel:lie,registerLoadRouter:Goe,registerSaveRouter:Hoe,removeModel:iie,weightsLoaderFactory:dj,withSaveHandler:rhe,withSaveHandlerSync:she},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let Xu;function ohe(t,e=3){if(e>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(t==null)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");let n=!1,r=!1,s=!1,o=!1,i=!1,a=!1;if(t.data instanceof Uint8Array)n=!0;else if(typeof ImageData<"u"&&t instanceof ImageData)r=!0;else if(typeof HTMLVideoElement<"u"&&t instanceof HTMLVideoElement)s=!0;else if(typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement)o=!0;else if(t.getContext!=null)i=!0;else if(typeof ImageBitmap<"u"&&t instanceof ImageBitmap)a=!0;else throw new Error(`pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, but was ${t.constructor.name}`);if(qE(HE,ae.backendName)!=null){const x={pixels:t},b={numChannels:e};return ae.runKernel(HE,x,b)}const[c,d]=s?[t.videoWidth,t.videoHeight]:[t.width,t.height];let f;if(i)f=t.getContext("2d").getImageData(0,0,c,d).data;else if(r||n)f=t.data;else if(o||s||a){if(Xu==null)if(typeof document>"u")if(typeof OffscreenCanvas<"u"&&typeof OffscreenCanvasRenderingContext2D<"u")Xu=new OffscreenCanvas(1,1).getContext("2d");else throw new Error("Cannot parse input in current context. Reason: OffscreenCanvas Context2D rendering is not supported.");else Xu=document.createElement("canvas").getContext("2d",{willReadFrequently:!0});Xu.canvas.width=c,Xu.canvas.height=d,Xu.drawImage(t,0,0,c,d),f=Xu.getImageData(0,0,c,d).data}let p;if(e===4)p=new Int32Array(f);else{const x=c*d;p=new Int32Array(x*e);for(let b=0;b<x;b++)for(let w=0;w<e;++w)p[b*e+w]=f[b*4+w]}return V8(p,[d,c,e],"int32")}const ihe=se({fromPixels_:ohe});function z3(t,e){const n=t.shape.length,r=e.shape.length;if(n<1)throw new Error(`tf.gatherND() expects the input to be rank 1 or higher, but the rank was ${n}.`);if(r<1)throw new Error(`tf.gatherND() expects the indices to be rank 1 or higher, but the rank was ${r}.`);if(e.dtype!=="int32")throw new Error(`tf.gatherND() expects the indices to be int32 type, but the dtype was ${e.dtype}.`);if(e.shape[r-1]>n)throw new Error(`index innermost dimension length must be <= tensor rank; saw: ${e.shape[r-1]} vs. ${n}`);if(Te(t.shape)===0)throw new Error(`Requested more than 0 entries, but input is empty. Input shape: ${t.shape}.`);const s=e.shape,o=s[s.length-1];let i=1;for(let f=0;f<s.length-1;++f)i*=s[f];const a=t.shape,l=s.slice();l.pop();let c=1;for(let f=o;f<n;++f)c*=a[f],l.push(a[f]);const d=[...Et(t.shape).map(f=>f/c),1].slice(0,o);return[l,i,c,d]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cI=-2,ahe=-1;function V3(t,e,n){const r=t.shape.length;Y(r===e.length,()=>`Error in slice${r}D: Length of begin ${e} must match the rank of the array (${r}).`),Y(r===n.length,()=>`Error in slice${r}D: Length of size ${n} must match the rank of the array (${r}).`);for(let s=0;s<r;++s)Y(e[s]+n[s]<=t.shape[s],()=>`Error in slice${r}D: begin[${s}] + size[${s}] (${e[s]+n[s]}) would overflow input.shape[${s}] (${t.shape[s]})`)}function lhe(t){const e=[];let n=0;for(;t>0;)t&1&&e.push(n),t/=2,n++;return e}function W3(t,e,n){const r=[];for(let s=0;s<t.length;s++)r[s]=Math.ceil((e[s]-t[s])/n[s]);return r}function gj(t,e,n,r){const s=[...t];for(let o=s.length;o<r.length;o++)s.push(1);for(let o=0;o<n;o++)o===0?s[e]=1:(s.splice(e,0,1),s.pop());return s}function xj(t,e,n){return n<=t?n:n-(e-1)}function yj(t,e){const n=[];for(let r=0;r<t;r++)n.push(e+r);return n}function che(t,e,n,r,s,o,i,a,l){const c=t.length;let d=new Array(c),f=new Array(c),p=new Array(c);if(e.length&&n>0){const g=e[0],x=n+1;d=bj(i,g,x,r,t),f=wj(a,g,x,s,t),p=gj(o,g,x,t)}else for(let g=0;g<c;g++)d[g]=Cj(i,r,o,t,g,l),f[g]=Sj(a,s,o,t,g,l),p[g]=vj(o,g,l);return{begin:d,end:f,strides:p}}function bj(t,e,n,r,s){const o=[...s],i=yj(n,e);for(let a=0;a<o.length;a++)if(i.indexOf(a)>-1)o[a]=0;else{const l=xj(e,n,a);let c=r[l];t&1<<l&&(c=0),o[a]=c}return o}function wj(t,e,n,r,s){const o=[...s],i=yj(n,e);for(let a=0;a<o.length;a++)if(i.indexOf(a)>-1)o[a]=Number.MAX_SAFE_INTEGER;else{const l=xj(e,n,a);let c=r[l];t&1<<l&&(c=Number.MAX_SAFE_INTEGER),o[a]=c}for(let a=0;a<o.length;a++){const l=s[a];o[a]<0&&(o[a]+=l),o[a]=Ld(0,o[a],s[a])}return o}function vj(t,e,n){let r=t[e];return(n&1<<e||r==null)&&(r=1),r}function Cj(t,e,n,r,s,o){let i=e[s];const a=n[s]||1;(t&1<<s||o&1<<s||i==null)&&(a>0?i=Number.MIN_SAFE_INTEGER:i=Number.MAX_SAFE_INTEGER);const l=r[s];return i<0&&(i+=l),i=Ld(0,i,l-1),i}function Sj(t,e,n,r,s,o){let i=e[s];const a=n[s]||1;(t&1<<s||o&1<<s||i==null)&&(a>0?i=Number.MAX_SAFE_INTEGER:i=Number.MIN_SAFE_INTEGER);const l=r[s];return i<0&&(i+=l),a>0?i=Ld(0,i,l):i=Ld(-1,i,l-1),i}function U3(t,e,n){let r=n.length;for(let s=0;s<n.length;s++)if(n[s]>1){r=s;break}for(let s=r+1;s<n.length;s++)if(e[s]>0||n[s]!==t[s])return!1;return!0}function H3(t,e){let n=t.length>0?t[t.length-1]:1;for(let r=0;r<t.length-1;r++)n+=t[r]*e[r];return n}function k2(t,e,n){let r;const s=t.shape.length;typeof e=="number"?r=[e,...new Array(s-1).fill(0)]:e.length<s?r=e.concat(new Array(s-e.length).fill(0)):r=e.slice(),r.forEach(i=>{Y(i!==-1,()=>"slice() does not support negative begin indexing.")});let o;return n==null?o=new Array(s).fill(-1):typeof n=="number"?o=[n,...new Array(s-1).fill(-1)]:n.length<s?o=n.concat(new Array(s-n.length).fill(-1)):o=n,o=o.map((i,a)=>i>=0?i:(Y(i===-1,()=>`Negative size values should be exactly -1 but got ${i} for the slice() size at index ${a}.`),t.shape[a]-r[a])),[r,o]}function G3(t,e,n,r,s,o,i,a,l){let c;if(r==null?(c=new Array(e.length),c.fill(1)):c=r,i!=null&&i&i-1)throw new Error("Multiple ellipses in slice is not allowed.");let d=!1;const f={dims:c.length,numAddAxisAfterEllipsis:0,begin:e.slice(),end:n.slice(),strides:c.slice(),beginMask:s,endMask:o,ellipsisMask:i,newAxisMask:a,shrinkAxisMask:l};for(let k=0;k<f.dims;k++)d&&1<<k&a&&f.numAddAxisAfterEllipsis++,1<<k&i&&(d=!0);d||(f.ellipsisMask|=1<<f.dims,f.dims++);const p={dims:t.length,beginMask:0,endMask:0,beginValid:!1,endValid:!1};uhe(f,p);let g=!0,x=!0,b=!0;const w=[],C=[];for(let k=0;k<t.length;++k){if(p.strides[k]===0)throw Error(`strides[${k}] must be non-zero`);const I=!!(p.shrinkAxisMask&1<<k),R=t[k];if(R===-1){w.push(I?1:-1);continue}const $=[p.beginMask&1<<k,p.endMask&1<<k],O=[p.strides[k]>0?0:-1,p.strides[k]>0?R:R-1];if(I&&p.strides[k]<=0)throw Error("only stride 1 allowed on non-range indexing.");b=b&&p.strides[k]===1;const F=!!(p.beginMask&1<<k&&p.endMask&1<<k);if(p.beginValid&&p.endValid){if(I){const B=p.begin[k]<0?R+p.begin[k]:p.begin[k];if(p.begin[k]=B,p.end[k]=p.begin[k]+1,B<0||B>=R)throw Error(`slice index ${p.begin[k]} of dimension ${k} out of bounds.`)}else p.begin[k]=G4(p.begin[k],0,p.strides[k],R,$,O),p.end[k]=G4(p.end[k],1,p.strides[k],R,$,O);const V=p.strides[k]===1&&p.begin[k]===0&&p.end[k]===R;g=g&&V,x=x&&(k===0&&p.strides[k]===1||V)}else g=g&&p.strides[k]===1&&F,x=x&&(k===0&&p.strides[k]===1||F);let M,_=!1;if(p.beginValid&&p.endValid?(M=p.end[k]-p.begin[k],_=!0):I?(M=1,_=!0):F&&R>=0&&(p.strides[k]<0?M=-R:M=R,_=!0),_){let V;M===0||M<0!=p.strides[k]<0?V=0:V=Math.trunc(M/p.strides[k])+(M%p.strides[k]!==0?1:0),w.push(V)}else w.push(-1)}for(let k=0;k<p.finalShapeGatherIndices.length;++k){const I=p.finalShapeGatherIndices[k];I>=0?C.push(w[I]):I===cI&&C.push(1)}return{finalShapeSparse:C.filter((k,I)=>p.finalShapeGatherIndices[I]!==cI),finalShape:C,isIdentity:g,sliceDim0:x,isSimpleSlice:b,begin:p.begin,end:p.end,strides:p.strides}}function uhe(t,e){e.beginMask=0,e.endMask=0,e.shrinkAxisMask=0;let n=0;e.beginValid=t.begin!=null,e.endValid=t.end!=null,e.begin=new Array(e.dims),e.end=new Array(e.dims),e.strides=new Array(e.dims),e.finalShapeGatherIndices=[],e.finalShapeGatherIndicesSparse=[],e.inputShapeGatherIndicesSparse=new Array(e.dims);for(let r=0;r<t.dims;r++)if(1<<r&t.ellipsisMask){const s=Math.min(e.dims-(t.dims-r)+1+t.numAddAxisAfterEllipsis,e.dims);for(;n<s;n++)e.begin[n]=0,e.end[n]=0,e.strides[n]=1,e.beginMask|=1<<n,e.endMask|=1<<n,e.finalShapeGatherIndices.push(n),e.finalShapeGatherIndicesSparse.push(-1),e.inputShapeGatherIndicesSparse[n]=r}else if(1<<r&t.newAxisMask)e.finalShapeGatherIndices.push(cI),e.finalShapeGatherIndicesSparse.push(-1);else{if(n===e.begin.length)throw Error(`Index out of range using input dim ${n}; input has only ${e.dims} dims, ${e.begin.length}.`);t.begin!=null&&(e.begin[n]=t.begin[r]),t.end!=null&&(e.end[n]=t.end[r]),e.strides[n]=t.strides[r],t.beginMask&1<<r&&(e.beginMask|=1<<n),t.endMask&1<<r&&(e.endMask|=1<<n),t.shrinkAxisMask&1<<r?(e.finalShapeGatherIndices.push(ahe),e.finalShapeGatherIndicesSparse.push(-1),e.shrinkAxisMask|=1<<n):(e.finalShapeGatherIndices.push(n),e.finalShapeGatherIndicesSparse.push(r)),e.inputShapeGatherIndicesSparse[n]=r,n++}}function G4(t,e,n,r,s,o){if(s[e])return n>0?o[e]:o[e+1&1];{const i=t<0?r+t:t;return i<o[0]?o[0]:i>o[1]?o[1]:i}}const dhe=Object.freeze(Object.defineProperty({__proto__:null,assertParamsValid:V3,computeFlatOffset:H3,computeOutShape:W3,getNormalizedAxes:che,isSliceContinous:U3,maskToAxes:lhe,parseSliceParams:k2,sliceInfo:G3,startForAxis:Cj,startIndicesWithElidedDims:bj,stopForAxis:Sj,stopIndicesWithElidedDims:wj,stridesForAxis:vj,stridesWithElidedDims:gj},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class fhe{static sgd(e){return new L3(e)}static momentum(e,n,r=!1){return new lj(e,n,r)}static rmsprop(e,n=.9,r=0,s=null,o=!1){return new cj(e,n,r,s,o)}static adam(e=.001,n=.9,r=.999,s=null){return new ij(e,n,r,s)}static adadelta(e=.001,n=.95,r=null){return new sj(e,n,r)}static adamax(e=.002,n=.9,r=.999,s=null,o=0){return new aj(e,n,r,s,o)}static adagrad(e,n=.1){return new oj(e,n)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Pf=fhe;/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hhe=typeof requestAnimationFrame<"u"?requestAnimationFrame:typeof setImmediate<"u"?setImmediate:t=>t();function Nj(){return new Promise(t=>hhe(()=>t()))}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function q3(t,e){const n=t[0].length;t.forEach((s,o)=>{Y(s.length===n,()=>`Error in concat${n}D: rank of tensors[${o}] must be the same as the rank of the rest (${n})`)}),Y(e>=0&&e<n,()=>`Error in concat${n}D: axis must be between 0 and ${n-1}.`);const r=t[0];t.forEach((s,o)=>{for(let i=0;i<n;i++)Y(i===e||s[i]===r[i],()=>`Error in concat${n}D: Shape of tensors[${o}] (${s}) does not match the shape of the rest (${r}) along the non-concatenated axis ${o}.`)})}function xl(t,e){const n=t[0].slice();for(let r=1;r<t.length;r++)n[e]+=t[r][e];return n}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var Sa;(function(t){t[t.FIRST_DIM_SIZE=0]="FIRST_DIM_SIZE",t[t.VALUE_ROWIDS=1]="VALUE_ROWIDS",t[t.ROW_LENGTHS=2]="ROW_LENGTHS",t[t.ROW_SPLITS=3]="ROW_SPLITS",t[t.ROW_LIMITS=4]="ROW_LIMITS",t[t.ROW_STARTS=5]="ROW_STARTS"})(Sa||(Sa={}));function Ej(t,e,n){let r=new Array;if(n==null&&e==null)return r;if(e==null)for(;r.length<t+n.length;)r.push(-1);else r=e.slice();if(n==null)return r;if(t+n.length!==r.length)throw new Error(`rt input.shape and shape=${e} are incompatible: rt input.rank = ${t+n.length}, but shape.rank = ${r.length}`);for(let s=1;s<n.length;++s){const o=n[s],i=r[r.length-n.length+s],a=r[i];if(o>=0)if(a>=0){if(a!==o)throw new Error(`rt input.shape and shape=${e} are incompatible: rt input.shape[${s+t}] = ${o} but shape[${s+t}] = ${a}`)}else r[i]=o}return r}function Ij(t){const e={FIRST_DIM_SIZE:Sa.FIRST_DIM_SIZE,VALUE_ROWIDS:Sa.VALUE_ROWIDS,ROW_LENGTHS:Sa.ROW_LENGTHS,ROW_SPLITS:Sa.ROW_SPLITS,ROW_LIMITS:Sa.ROW_LIMITS,ROW_STARTS:Sa.ROW_STARTS},n=[];for(const r of t)if(r in e)n.push(e[r]);else break;return n}function kj(t){return t.length===0?0:t[0]===Sa.FIRST_DIM_SIZE?t.length-1:t.length}function Tj(t,e){if(t==null||e==null)return;const n=t.length,r=e.length;if(n>=r)throw new Error(`defaultValue.shape=${t} and ragged tensor flatValues.shape=${e}, are incompatible: defaultValue.rank = ${n} must be less than ragged tensor input flatValues.rank = ${r})`);for(let s=0;s<Math.min(n,r-1);++s){const o=t[s],i=e[s+1];if(o>=0&&i>=0&&o!==1&&o!==i)throw new Error(`defaultValue.shape=${t}, and ragged tensor input flatValues.shape=${e} are incompatible: defaultValue.shape[${s-t.length}] = ${o} but ragged tensor input.flatValues.shape[${s-t.length}] = ${i}`)}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const X3=30;function T2(t){return t<=X3?t:VE(t,Math.floor(Math.sqrt(t)))}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function K3(t,e,n){const r=n*(typeof t=="number"?t:t[0]),s=e*(typeof t=="number"?t:t[1]);return[r,s]}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $1(t,e,n,r=!0){let s=[];if(r)s=s.concat(e.slice(0)),s.push(t[0]/n),s=s.concat(t.slice(1));else{s=s.concat(t[0]);const o=e.length;for(let i=0;i<o;++i)s=s.concat([t[i+1]/e[i],e[i]]);s=s.concat(t.slice(o+1))}return s}function O1(t,e,n=!0){const r=[];if(n){r.push(e);for(let s=e+1;s<t;++s)s<=2*e?(r.push(s),r.push(s-(e+1))):r.push(s)}else{const s=[],o=[];for(let i=1;i<t;++i)i>=e*2+1||i%2===1?o.push(i):s.push(i);r.push(...s),r.push(0),r.push(...o)}return r}function _1(t,e,n,r=!0){const s=[];r?s.push(t[0]/n):s.push(t[0]*n);for(let o=1;o<t.length;++o)o<=e.length?r?s.push(e[o-1]*t[o]):s.push(t[o]/e[o-1]):s.push(t[o]);return s}function Y3(t,e){const n=[0];for(let r=0;r<e;++r)n.push(t[r][0]);return n}function Z3(t,e,n){const r=t.slice(0,1);for(let s=0;s<n;++s)r.push(t[s+1]-e[s][0]-e[s][1]);return r}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const A2=1.7580993408473768,R2=1.0507009873554805;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Q3=.3275911,J3=.254829592,eR=-.284496736,tR=1.421413741,nR=-1.453152027,rR=1.061405429;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ac(t,e){if(t.length!==e.length)throw new Error(`Cannot merge real and imag arrays of different lengths. real:${t.length}, imag: ${e.length}.`);const n=new Float32Array(t.length*2);for(let r=0;r<n.length;r+=2)n[r]=t[r/2],n[r+1]=e[r/2];return n}function Aj(t){const e=new Float32Array(t.length/2),n=new Float32Array(t.length/2);for(let r=0;r<t.length;r+=2)e[r/2]=t[r],n[r/2]=t[r+1];return{real:e,imag:n}}function Rj(t){const e=Math.ceil(t.length/4),n=new Float32Array(e),r=new Float32Array(e);for(let s=0;s<t.length;s+=4)n[Math.floor(s/4)]=t[s],r[Math.floor(s/4)]=t[s+1];return{real:n,imag:r}}function Dj(t){const e=Math.floor(t.length/4),n=new Float32Array(e),r=new Float32Array(e);for(let s=2;s<t.length;s+=4)n[Math.floor(s/4)]=t[s],r[Math.floor(s/4)]=t[s+1];return{real:n,imag:r}}function sR(t,e){const n=t[e*2],r=t[e*2+1];return{real:n,imag:r}}function $j(t,e,n,r){t[r*2]=e,t[r*2+1]=n}function Oj(t,e){const n=new Float32Array(t/2),r=new Float32Array(t/2);for(let s=0;s<Math.ceil(t/2);s++){const o=(e?2:-2)*Math.PI*(s/t);n[s]=Math.cos(o),r[s]=Math.sin(o)}return{real:n,imag:r}}function _j(t,e,n){const r=(n?2:-2)*Math.PI*(t/e),s=Math.cos(r),o=Math.sin(r);return{real:s,imag:o}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tN="->",phe=/->/g,q4=",",X4="...";function oR(t,e){t=t.replace(/\s/g,"");const n=(t.length-t.replace(phe,"").length)/tN.length;if(n<1)throw new Error("Equations without an arrow are not supported.");if(n>1)throw new Error(`Equation must contain exactly one arrow ("${tN}").`);const[r,s]=t.split(tN);Y(r.indexOf(X4)===-1,()=>`The ellipsis notation ("${X4}") is not supported yet.`);const o=r.split(q4),i=o.length;if(e!==i)throw new Error(`Expected ${i} input tensors, received ${e}`);if(i>2)throw new Error("Support for more than 2 input tensors is not implemented yet.");const a=[];for(let p=0;p<s.length;++p){const g=s[p];if(!o.some(x=>x.indexOf(g)!==-1))throw new Error(`Output subscripts contain the label ${g} not present in the input subscripts.`);a.indexOf(g)===-1&&a.push(g)}for(let p=0;p<r.length;++p){const g=r[p];a.indexOf(g)===-1&&g!==q4&&a.push(g)}const l=new Array(o.length);for(let p=0;p<i;++p){if(new Set(o[p].split("")).size!==o[p].length)throw new Error(`Found duplicate axes in input component ${o[p]}. Support for duplicate axes in input is not implemented yet.`);l[p]=[];for(let g=0;g<o[p].length;++g)l[p].push(a.indexOf(o[p][g]))}const c=a.length,d=s.length,f=[];for(let p=d;p<c;++p)f.push(p);return{allDims:a,summedDims:f,idDims:l}}function iR(t,e){let n=new Array(t);n.fill(-1);for(let s=0;s<e.length;++s)n[e[s]]=s;const r=[];for(let s=0;s<t;++s)n[s]===-1&&r.push(s);return n=n.filter(s=>s!==-1),{permutationIndices:n,expandDims:r}}function aR(t,e,n){const r=new Array(t);for(let s=0;s<n.length;++s){const o=n[s].shape;for(let i=0;i<e[s].length;++i)r[e[s][i]]===void 0?r[e[s][i]]=o[i]:Y(r[e[s][i]]===o[i],()=>`Expected dimension ${r[e[s][i]]} at axis ${i} of input shaped ${JSON.stringify(o)}, but got dimension ${o[i]}`)}}function lR(t,e){const n=t,r=[];let s=0;t.length===0&&n.push(-1),s=t.length+1;for(let i=0;i<s;++i)r.push([]);const o=[];for(let i=0;i<n.length;++i){const a=n[i],l=mhe(e,a);for(const c of l)o.indexOf(c)===-1&&(r[i].push(c),o.push(c))}return{path:n,steps:r}}function cR(t){return t.every((e,n)=>e===n)}function mhe(t,e){const n=[];for(let r=0;r<t.length;++r)(t[r].length===0||t[r].indexOf(e)!==-1||e===-1)&&n.push(r);return n}function uR(t,e,n=0){let r=[];if(typeof e=="number")Y(t.shape[n]%e===0,()=>"Number of splits must evenly divide the axis."),r=new Array(e).fill(t.shape[n]/e);else{const s=e.reduce((i,a)=>(a===-1&&(i+=1),i),0);Y(s<=1,()=>"There should be only one negative value in split array.");const o=e.indexOf(-1);if(o!==-1){const i=e.reduce((a,l)=>l>0?a+l:a);e[o]=t.shape[n]-i}Y(t.shape[n]===e.reduce((i,a)=>i+a),()=>"The sum of sizes must match the size of the axis dimension."),r=e}return r}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pj(t){return`Received SparseTensor with denseShape[0] = 0 but
  indices.shape[0] = ${t}`}function Fj(t,e){return`indices(${t}, 0) is invalid: ${e} < 0`}function Mj(t,e,n){return`indices(${t}, 0) is invalid: ${e} >= ${n}`}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lj(t,e){return`only one output dimension may be -1, not both ${t} and ${e}`}function Bj(t,e){return`size ${t} must be non-negative, not ${e}`}function jj(){return"reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero"}function zj(t,e){const n=Te(t),r=Te(e);return`Input to reshape is a SparseTensor with ${n}
  dense values, but the requested shape requires a multiple of ${r}. inputShape=${t} outputShape= ${e}`}function Vj(t,e){const n=Te(t),r=Te(e);return`Input to reshape is a tensor with ${n} dense values, but the requested shape has ${r}. inputShape=${t} outputShape=${e}`}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uI(){return"segment ids must be >= 0"}function Wj(){return"segment ids are not increasing"}function Uj(t,e){return`Segment id ${t} out of range [0, ${e}), possibly because segmentIds input is not sorted.`}function Hj(t,e,n){return`Bad: indices[${t}] == ${e} out of range [0, ${n})`}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gj(t,e){let n=!1,r;for(t<=X3?(r=t,n=!0):r=VE(t,Math.floor(Math.sqrt(t)));!n;)r>e||r===t?n=!0:r=VE(t,r+1);return r}function qj(t,e,n){const r=[],s=t.length;for(let o=0;o<s;o++)o!==e?r.push(t[o]):r.push(n);return r}function dR(t,e,n,r){const s=e.shape.length,o=t.shape.length;if(r!==0&&(r<-s||r>s))throw new Error(`Expect batchDims in the range of [-${s}, ${s}], but got ${r}`);if(r<0&&(r+=s),r>o)throw new Error(`batchDims (${r}) must be less than rank(x) (
    ${o}).`);if(n<r)throw new Error(`batchDims (${r}) must be less than or equal to axis (${n}).`);for(let f=0;f<r;++f)if(t.shape[f]!==e.shape[f])throw new Error(`x.shape[${f}]: ${t.shape[f]} should be equal to indices.shape[${f}]: ${e.shape[f]}.`);const i=t.shape[n],a=[];let l=1,c=1,d=1;for(let f=0;f<r;++f)a.push(t.shape[f]),l*=t.shape[f];for(let f=r;f<n;f++)a.push(t.shape[f]),c*=t.shape[f];for(let f=r;f<s;f++)a.push(e.shape[f]);for(let f=n+1;f<o;f++)a.push(t.shape[f]),d*=t.shape[f];return{batchSize:l,sliceSize:d,outerSize:c,dimSize:i,outputShape:a}}const ghe=Object.freeze(Object.defineProperty({__proto__:null,collectGatherOpShapeInfo:dR,computeOutShape:qj,segOpComputeOptimalWindowSize:Gj},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lc(t){try{return t.map(e=>du(e))}catch(e){throw new Error(`Failed to decode encoded string bytes into utf-8, error: ${e}`)}}function Xj(t){return t.map(e=>su(e))}const xhe=Object.freeze(Object.defineProperty({__proto__:null,ERF_A1:J3,ERF_A2:eR,ERF_A3:tR,ERF_A4:nR,ERF_A5:rR,ERF_P:Q3,PARALLELIZE_THRESHOLD:X3,get RowPartitionType(){return Sa},SELU_SCALE:R2,SELU_SCALEALPHA:A2,applyActivation:E2,assertAndGetBroadcastShape:jt,assertAxesAreInnerMostDims:Is,assertParamsConsistent:q3,assignToTypedArray:$j,axesAreInnerMostDims:n3,calculateShapes:mf,checkEinsumDimSizes:aR,checkPadOnDimRoundingMode:co,combineLocations:C8,combineRaggedTensorToTensorShapes:Ej,complexWithEvenIndex:Rj,complexWithOddIndex:Dj,computeConv2DInfo:ps,computeConv3DInfo:$u,computeDefaultPad:KA,computeDilation2DInfo:E1,computeOptimalWindowSize:T2,computeOutAndReduceShapes:ms,computeOutShape:xl,computePool2DInfo:ia,computePool3DInfo:pc,convertConv2DDataFormat:mc,decodeEinsumEquation:oR,eitherStridesOrDilationsAreOne:Es,expandShapeToKeepDim:Dr,exponent:_j,exponents:Oj,fromStringArrayToUint8:Xj,fromUint8ToStringArray:lc,getAxesPermutation:fr,getBroadcastDims:Yh,getComplexWithIndex:sR,getEinsumComputePath:lR,getEinsumPermutation:iR,getFusedBiasGradient:N2,getFusedDyActivation:S2,getImageCenter:K3,getInnerMostAxes:$r,getPermuted:O1,getRaggedRank:kj,getReductionAxes:es,getReshaped:$1,getReshapedPermuted:_1,getRowPartitionTypesHelper:Ij,getSliceBeginCoords:Y3,getSliceSize:Z3,getSparseFillEmptyRowsIndicesDenseShapeMismatch:Pj,getSparseFillEmptyRowsNegativeIndexErrorMessage:Fj,getSparseFillEmptyRowsOutOfRangeIndexErrorMessage:Mj,getSparseReshapeEmptyTensorZeroOutputDimErrorMessage:jj,getSparseReshapeInputOutputMismatchErrorMessage:Vj,getSparseReshapeInputOutputMultipleErrorMessage:zj,getSparseReshapeMultipleNegativeOneOutputDimErrorMessage:Lj,getSparseReshapeNegativeOutputDimErrorMessage:Bj,getSparseSegmentReductionIndicesOutOfRangeErrorMessage:Hj,getSparseSegmentReductionNegativeSegmentIdsErrorMessage:uI,getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage:Wj,getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage:Uj,getUndoAxesPermutation:Ou,isIdentityPermutation:cR,log:aoe,mergeRealAndImagArrays:ac,prepareAndValidate:z3,prepareSplitSize:uR,segment_util:ghe,shouldFuse:I2,slice_util:dhe,splitRealAndImagArrays:Aj,stridesOrDilationsArePositive:Ud,tupleValuesAreOne:pu,upcastType:Xo,validateDefaultValueShape:Tj,validateInput:T3,validateUpdateShape:W8,warn:ci},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */zfe();/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Kj={kernelName:tv,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ie(t,$p(nt(n,"float32"),-1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yhe={kernelName:A0,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const r=Fn(nt(n,"float32")),s=Ns(lt(kt(1),r));return Jn(mt(t,s))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bhe={kernelName:R0,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const r=Ns(lt(Fn(nt(n,"float32")),1));return mt(t,r)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const whe={kernelName:Ap,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,s=jt(n.shape,r.shape);return{a:()=>{let a=t;const l=es(n.shape,s);return l.length>0&&(a=bt(a,l)),ce(a,n.shape)},b:()=>{let a=t;const l=es(r.shape,s);return l.length>0&&(a=bt(a,l)),ce(a,r.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vhe={kernelName:nv,saveAllInputs:!0,gradFunc:(t,e)=>{const n={};return e.forEach((r,s)=>{n[s]=()=>t.clone()}),n}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Che={kernelName:rv,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ln(n)}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const She={kernelName:sv,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ln(n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Nhe={kernelName:D0,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>mt(t,Ns(lt(kt(1),Fn(nt(n,"float32")))))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ehe={kernelName:$0,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const r=Ns(Ue(kt(1),Fn(nt(n,"float32"))));return mt(t,r)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ihe={kernelName:P0,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,s=jt(n.shape,r.shape);return{a:()=>{const a=Ue(Fn(n),Fn(r));let l=ie(t,mt(r,a));const c=es(n.shape,s);return c.length>0&&(l=bt(l,c)),ce(l,n.shape)},b:()=>{const a=Ue(Fn(n),Fn(r));let l=Jn(ie(t,mt(n,a)));const c=es(r.shape,s);return c.length>0&&(l=bt(l,c)),ce(l,r.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const khe={kernelName:O0,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>mt(t,Ue(Fn(nt(n,"float32")),1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const The={kernelName:_0,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>mt(t,lt(kt(1),Fn(nt(n,"float32"))))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ahe(t,e,n,r,s,o){const i=Q(t,"dy","avgPool3dGrad"),a=Q(e,"input","avgPool3dGrad");let l=i,c=a,d=!1;a.rank===4&&(d=!0,l=ce(i,[1,i.shape[0],i.shape[1],i.shape[2],i.shape[3]]),c=ce(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]])),Y(l.rank===5,()=>`Error in avgPool3dGrad: dy must be rank 5 but got rank ${l.rank}.`),Y(c.rank===5,()=>`Error in avgPool3dGrad: input must be rank 5 but got rank ${c.rank}.`),co("avgPool3dGrad",s,o);const f={dy:l,input:c},p={filterSize:n,strides:r,pad:s,dimRoundingMode:o},g=ae.runKernel(VT,f,p);return d?ce(g,[g.shape[1],g.shape[2],g.shape[3],g.shape[4]]):g}const Rhe=se({avgPool3dGrad_:Ahe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Dhe={kernelName:iv,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{filterSize:s,strides:o,pad:i,dimRoundingMode:a}=n;return{x:()=>Rhe(t,r,s,o,i,a)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $he(t,e,n,r,s){const o=Q(t,"dy","avgPoolGrad"),i=Q(e,"input","avgPoolGrad");Y(i.rank===o.rank,()=>`Rank of input (${i.rank}) does not match rank of dy (${o.rank})`);let a=i,l=o,c=!1;i.rank===3&&(c=!0,a=ce(i,[1,i.shape[0],i.shape[1],i.shape[2]]),l=ce(o,[1,o.shape[0],o.shape[1],o.shape[2]])),Y(l.rank===4,()=>`Error in avgPoolGrad: dy must be rank 4 but got rank ${l.rank}.`),Y(a.rank===4,()=>`Error in avgPoolGrad: input must be rank 4 but got rank ${a.rank}.`);const d={dy:l,input:a},f={filterSize:n,strides:r,pad:s},p=ae.runKernel(zT,d,f);return c?ce(p,[p.shape[1],p.shape[2],p.shape[3]]):p}const Ohe=se({avgPoolGrad_:$he});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _he={kernelName:ov,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{filterSize:s,strides:o,pad:i}=n;return{x:()=>Ohe(t,r,s,o,i)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Phe={kernelName:av,inputsToSave:["a","b"],gradFunc:(t,e,n)=>{const[r,s]=e,{transposeA:o,transposeB:i}=n;return!o&&!i?{a:()=>en(t,s,!1,!0),b:()=>en(r,t,!0,!1)}:!o&&i?{a:()=>en(t,s,!1,!1),b:()=>en(t,r,!0,!1)}:o&&!i?{a:()=>en(s,t,!1,!0),b:()=>en(r,t,!1,!1)}:{a:()=>en(s,t,!0,!0),b:()=>en(t,r,!0,!0)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Fhe={kernelName:lv,gradFunc:(t,e,n)=>{const{blockShape:r,crops:s}=n;return{x:()=>g2(t,r,s)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Mhe={kernelName:soe,gradFunc:(t,e,n)=>{const r=n,s=r.inputShape,o=r.shape,i=Array.from(o);for(let l=s.length-1;l>=0;l--)if(s[l]===o[l])i[l]=1;else if(s[l]!==1)throw new Error(`broadcastTo(): [${s}] cannot be broadcast to [${o}].`);const a=[];for(let l=0;l<i.length;l++)i[l]>1&&a.push(l);return{x:()=>bt(t,a,!0)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Lhe={kernelName:F0,gradFunc:t=>({x:()=>t.clone()})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Bhe={kernelName:M0,gradFunc:t=>({x:()=>ln(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jhe={kernelName:L0,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{clipValueMin:s,clipValueMax:o}=n;return{x:()=>js(Nl(_u(r,s),ff(r,o)),t,ln(t))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zhe={kernelName:uv,inputsToSave:["x"],gradFunc:Kj.gradFunc};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Vhe={kernelName:dv,saveAllInputs:!0,gradFunc:(t,e,n)=>{const r=e.map(l=>l.shape),{axis:s}=n,o=Zt(s,e[0].shape)[0],i=r.map(l=>l[o]);return Ho(t,i,o).map(l=>()=>l)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Whe={kernelName:fv,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const[r,s]=e,{dilations:o,strides:i,pad:a,dataFormat:l}=n;return Y(pu(o),()=>`Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${o}'`),{x:()=>ZA(r.shape,t,s,i,a,l),filter:()=>O3(r,t,s.shape,i,a,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Uhe={kernelName:hv,inputsToSave:["dy","filter"],gradFunc:(t,e,n)=>{const[r,s]=e,{strides:o,pad:i,dataFormat:a,dimRoundingMode:l}=n;return{dy:()=>mu(t,s,o,i,a,1,l),filter:()=>O3(t,r,s.shape,o,i,a,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hhe(t,e,n,r,s){let o=t;t.rank===4&&(o=ce(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]]));let i=e;i.rank===4&&(i=ce(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]])),Y(o.rank===5,()=>`Error in conv3dDerFilter: input must be rank 5, but got shape ${o.shape}.`),Y(i.rank===5,()=>`Error in conv3dDerFilter: dy must be rank 5, but got shape ${i.shape}.`),Y(n.length===5,()=>`Error in conv3dDerFilter: filterShape must be length 5, but got ${n}.`),Y(o.shape[4]===n[3],()=>`Error in conv3dDerFilter: depth of input ${o.shape[4]}) must match input depth in filter (${n[3]}.`),Y(i.shape[4]===n[4],()=>`Error in conv3dDerFilter: depth of dy (${i.shape[4]}) must match output depth for filter (${n[4]}).`);const a={x:o,dy:i},l={strides:r,pad:s,filterShape:n};return ae.runKernel(qT,a,l)}const Ghe=se({conv3DBackpropFilter_:Hhe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qhe={kernelName:pv,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const{dilations:r,strides:s,pad:o}=n;Y(pu(r),()=>`Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${r}'`);const[i,a]=e;return{x:()=>g8(i.shape,t,a,s,o),filter:()=>Ghe(i,t,a.shape,s,o)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Xhe={kernelName:B0,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ie(Jn(S3(nt(n,"float32"))),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Khe={kernelName:j0,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ie(N3(nt(n,"float32")),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Yhe={kernelName:mv,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{axis:s,exclusive:o,reverse:i}=n;return{x:()=>{const a=fr([s],r.rank);let l=e3(t,s,o,!i);return a!=null&&(l=an(l,a)),l}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Zhe={kernelName:gv,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const{dilations:r,strides:s,pad:o,dimRoundingMode:i}=n,a=r??[1,1];Y(pu(a),()=>`Error in gradient of depthwiseConv2dNative: dilation rates greater than 1 are not yet supported. Got dilations '${a}'`);const[l,c]=e;return Y(l.rank===4,()=>`Error in gradient of depthwiseConv2dNative: input must be rank 4, but got rank ${l.rank}.`),Y(c.rank===4,()=>`Error in gradient of depthwiseConv2dNative: filter must be rank 4, but got rank ${c.rank}.`),Y(l.shape[3]===c.shape[2],()=>`Error in gradient of depthwiseConv2d: number of input channels (${l.shape[3]}) must match the inChannels dimension in filter ${c.shape[2]}.`),Y(Es(s,a),()=>`Error in gradient of depthwiseConv2d: Either strides or dilations must be  1. Got strides ${s} and dilations '${a}'.`),co("depthwiseConv2d",o,i),{x:()=>Q8(l.shape,t,c,s,o,a,i),filter:()=>Z8(l,t,c.shape,s,o,a,i)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Qhe={kernelName:xv,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const[r,s]=e,o={x:r,filter:s,dy:t},i={x:r,filter:s,dy:t};return{x:()=>ae.runKernel(WE,o,n),filter:()=>ae.runKernel(UE,i,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Jhe={kernelName:V0,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e,r={dy:t,y:n};return{x:()=>ae.runKernel(rA,r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const epe={kernelName:W0,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e,r=ie(Yo(Jn(Fn(n))),2/Math.sqrt(Math.PI));return{x:()=>ie(t,r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tpe={kernelName:U0,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ie(t,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const npe={kernelName:bv,inputsToSave:["input"],gradFunc:(t,e)=>{const[n]=e;return{input:()=>ce(t,n.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rpe={kernelName:H0,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ie(t,Yo(n))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const spe={kernelName:G0,gradFunc:t=>({x:()=>ln(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ope={kernelName:q0,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,s=jt(n.shape,r.shape);return{a:()=>{const a=mt(t,nt(r,"float32")),l=es(n.shape,s);return l.length>0?ce(bt(a,l),n.shape):a},b:()=>{let a=ie(t,nt(n,"float32"));const l=es(r.shape,s);l.length>0&&(a=ce(bt(a,l),r.shape));const c=Fn(r);return Jn(mt(a,nt(c,"float32")))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ipe={kernelName:wv,inputsToSave:["x","mean","variance","scale"],gradFunc:(t,e,n)=>{const{varianceEpsilon:r}=n,[s,o,i,a]=e,l=a??kt(1),c=es(o.shape,s.shape),d=[];if(o.rank===1){for(let I=0;I<s.shape.length-1;++I)d.push(s.shape[I]);d.push(1)}const f=lt(s,o),p=ie(t,l),g=w3(Ue(i,kt(r))),x=ie(ie(ie(g,g),g),kt(-.5));return{x:()=>o.rank===1?ce(ie(ie(t,Hi(ce(g,[1,1,1,o.shape[0]]),d)),l),s.shape):ce(ie(ie(t,g),l),s.shape),mean:()=>{let I=ie(ie(g,kt(-1)),p);return o.rank===1&&(I=bt(I,c)),ce(I,o.shape)},variance:()=>{let I=ie(ie(x,f),p);return o.rank===1&&(I=bt(I,c)),ce(I,o.shape)},scale:()=>{const I=ie(f,g);let R=ie(t,I);return o.rank===1&&(R=bt(R,c)),ce(R,o.shape)},offset:()=>{let I=t;return o.rank===1&&(I=bt(I,c)),ce(I,o.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ape={kernelName:vv,inputsToSave:["x","indices"],gradFunc:(t,e,n)=>{const[r,s]=e,{axis:o,batchDims:i}=n,a=Zt(o,r.shape)[0],l=(c,d,f)=>()=>{const p=c.shape,g=d.size,x=p.slice(0,a),b=x.length,w=p.slice(o,p.length).slice(1),C=w.length,N=K4(0,b),k=K4(b+1,b+1+C),I=Y4([x,[g],w]),R=ce(f,I),$=ce(d,[g]),O=Y4([[b],N,k]),F=an(R,O);let M=R3(F,$,c.shape[a]);const _=Ou(O);return M=an(M,_),M};if(i===1){const c=r.shape[0],d=r.split(c,0);return{x:()=>Zo(d.map((g,x)=>l(g,s.slice(x,1),t.slice(x,1))())).reshape(r.shape),indices:()=>s}}else return{x:l(r,s,t),indices:()=>s}}};function K4(t,e){const n=[];for(let r=t;r<e;++r)n.push(r);return n}function Y4(t){const e=[];for(let n=0;n<t.length;++n)for(let r=0;r<t[n].length;++r)e.push(t[n][r]);return e}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lpe={kernelName:X0,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e;return{a:()=>ln(n),b:()=>ln(r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cpe={kernelName:K0,gradFunc:t=>({x:()=>nt(t,"float32")})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const upe={kernelName:Y0,gradFunc:t=>({x:()=>ln(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dpe={kernelName:Z0,gradFunc:t=>({x:()=>ln(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fpe={kernelName:Q0,gradFunc:t=>({x:()=>ln(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hpe={kernelName:Sv,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{alpha:s}=n,o=ri(r,0);return{x:()=>js(o,t,ie(t,s))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ppe={kernelName:e1,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>mt(t,Ue(n,1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mpe={kernelName:J0,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>mt(t,nt(n,"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gpe={kernelName:ioe,inputsToSave:[],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r]=e,{axis:s}=n;return{logits:()=>{const i=Yo(r);return lt(t,ie(bt(t,s,!0),i))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xpe(t,e,n,r=5,s=1,o=1,i=.5){const a={x:t,y:e,dy:n},l={depthRadius:r,bias:s,alpha:o,beta:i};return ae.runKernel(dA,a,l)}const ype=se({localResponseNormalizationBackprop_:xpe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bpe={kernelName:Av,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r,s]=e,{depthRadius:o,bias:i,alpha:a,beta:l}=n;return{x:()=>ype(r,s,t,o,i,a,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yj(t,e,n,r){return e.rank<n.rank&&(e=ce(e,Dr(e.shape,r))),t.rank<n.rank&&(t=ce(t,Dr(t.shape,r))),{x:()=>ie(t,nt(Oa(n,e),t.dtype))}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Z4={kernelName:Rv,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const r=n,{reductionIndices:s}=r,o=e[0],i=e[1],a=Zt(s,o.shape),l=Yj(t,i,o,a);return{x:()=>l.x()}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wpe={kernelName:t1,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e;return{a:()=>ie(t,nt(_u(n,r),"float32")),b:()=>ie(t,nt(Xg(n,r),"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vpe(t,e,n,r,s,o,i){const a=Q(t,"dy","maxPool3dGrad"),l=Q(e,"input","maxPool3dGrad"),c=Q(n,"output","maxPool3dGrad");let d=a,f=l,p=c,g=!1;l.rank===4&&(g=!0,d=ce(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]]),f=ce(l,[1,l.shape[0],l.shape[1],l.shape[2],l.shape[3]]),p=ce(c,[1,c.shape[0],c.shape[1],c.shape[2],c.shape[3]])),Y(d.rank===5,()=>`Error in maxPool3dGrad: dy must be rank 5 but got rank ${d.rank}.`),Y(f.rank===5,()=>`Error in maxPool3dGrad: input must be rank 5 but got rank ${f.rank}.`),Y(p.rank===5,()=>`Error in maxPool3dGrad: output must be rank 5 but got rank ${p.rank}.`),co("maxPool3dGrad",o,i);const x={dy:d,input:f,output:p},b={filterSize:r,strides:s,pad:o,dimRoundingMode:i},w=ae.runKernel(hA,x,b);return g?ce(w,[w.shape[1],w.shape[2],w.shape[3],w.shape[4]]):w}const Cpe=se({maxPool3dGrad_:vpe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Spe={kernelName:$v,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r,s]=e,{filterSize:o,strides:i,pad:a,dimRoundingMode:l}=n;return{x:()=>Cpe(t,r,s,o,i,a,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Npe(t,e,n,r,s,o,i){const a=Q(t,"dy","maxPoolGrad"),l=Q(e,"input","maxPoolGrad"),c=Q(n,"output","maxPoolGrad");Y(l.rank===a.rank,()=>`Rank of input (${l.rank}) does not match rank of dy (${a.rank})`),Y(a.rank===4,()=>`Error in maxPoolGrad: dy must be rank 4 but got rank ${a.rank}.`),Y(l.rank===4,()=>`Error in maxPoolGrad: input must be rank 4 but got rank ${l.rank}.`),co("maxPoolGrad",o,i);const d={dy:a,input:l,output:c},f={filterSize:r,strides:s,pad:o,dimRoundingMode:i};return ae.runKernel(fA,d,f)}const Epe=se({maxPoolGrad_:Npe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ipe={kernelName:Dv,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r,s]=e,{filterSize:o,strides:i,pad:a}=n;return{x:()=>Epe(t,r,s,o,i,a)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kpe={kernelName:Ov,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{axis:s}=n,o=Zt(s,r.shape),a=ms(r.shape,o)[1],l=Te(a);return{x:()=>{const d=r.shape.slice();o.forEach(g=>{d[g]=1});const f=ce(t,d);return mt(ie(f,jo(r.shape,"float32")),l)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Tpe={kernelName:_v,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const r=n,{axis:s}=r,[o,i]=e,a=Zt(s,o.shape),l=Yj(t,i,o,a);return{x:()=>l.x()}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ape={kernelName:n1,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e;return{a:()=>ie(t,nt(ff(n,r),"float32")),b:()=>ie(t,nt(ri(n,r),"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Rpe={kernelName:Pv,inputsToSave:["x"],gradFunc:(t,e,n)=>{const r=e[0],{paddings:s}=n,o=s.map(i=>i[0]);return{x:()=>Pt(t,o,r.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Dpe={kernelName:r1,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,s=jt(n.shape,r.shape);return{a:()=>{const a=es(n.shape,s);return a.length>0?ce(bt(t,a),n.shape):t},b:()=>{const a=ie(t,Jn(R1(mt(n,r)))),l=es(r.shape,s);return l.length>0?ce(bt(a,l),r.shape):a}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $pe={kernelName:s1,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,s=jt(n.shape,r.shape);return{a:()=>{const a=ie(t,nt(r,"float32")),l=es(n.shape,s);return l.length>0?ce(bt(a,l),n.shape):a},b:()=>{const a=ie(t,nt(n,"float32")),l=es(r.shape,s);return l.length>0?ce(bt(a,l),r.shape):a}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ope={kernelName:Fv,gradFunc:t=>({x:()=>Jn(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _pe={kernelName:Bv,inputsToSave:["indices"],gradFunc:(t,e)=>{const n=e[0];return{indices:()=>qr(n.shape,"float32")}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ppe={kernelName:Lv,gradFunc:t=>({x:()=>ln(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Fpe={kernelName:jv,saveAllInputs:!0,gradFunc:(t,e,n)=>{const{axis:r}=n;return ra(t,r).map(o=>()=>o)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Q4={kernelName:zv,inputsToSave:["x"],gradFunc:(t,e,n)=>{const r=e[0],{paddings:s}=n,o=s.map(i=>i[0]);return{x:()=>Pt(t,o,r.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Mpe={kernelName:o1,inputsToSave:["a","b"],outputsToSave:[!0],gradFunc:(t,e)=>{const[n,r,s]=e,o=n,i=r,a=jt(o.shape,i.shape);return{a:()=>{const d=nt(i,"float32");let f=ie(t,ie(d,oc(o,lt(d,kt(1)))));const p=es(o.shape,a);return p.length>0&&(f=bt(f,p)),ce(f,o.shape)},b:()=>{const d=ri(o,0),f=js(d,xi(o),ln(o));let p=ie(t,ie(s,f));const g=es(i.shape,a);return g.length>0&&(p=bt(p,g)),ce(p,i.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Lpe={kernelName:Vv,inputsToSave:["x","alpha"],gradFunc:(t,e)=>{const[n,r]=e,s=ri(n,0);return{x:()=>js(s,t,ie(t,r)),alpha:()=>{let o=js(s,ln(t),ie(t,n));const i=es(r.shape,t.shape);return i.length>0&&(o=bt(o,i)),ce(o,r.shape)}}}};/**
 * @license
 * Copyright 2022 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bpe(t,e,n){const r=t.shape.slice();r[n]=1;const s=ce(e,r),o=Lb(t,n,!0,!1),i=Lb(t,n,!0,!0),a=ie(o,i);return ie(s,a)}function jpe(t,e,n){const r=t.shape.length,s=r-n.length,o=fr(n,r);let i=t;o!=null&&(i=an(t,o));const a=i.shape.slice(),c=a.splice(r-n.length,n.length).reduce((p,g)=>p*g,1);a.push(c);const d=i.reshape(a);let f=Bpe(d,e,s);if(f=f.reshape(i.shape),o!=null){const p=Ou(o);f=an(f,p)}return f}const zpe={kernelName:Wv,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{axis:s}=n;let o=[];return s==null?o=r.shape.map((i,a)=>a):typeof s=="number"?o=[s]:o=s,{x:()=>jpe(r,t,o)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Vpe={kernelName:z0,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,s=jt(n.shape,r.shape);return{a:()=>{const a=mt(t,nt(r,"float32")),l=es(n.shape,s);return l.length>0?ce(bt(a,l),n.shape):a},b:()=>{let a=ie(t,nt(n,"float32"));const l=es(r.shape,s);l.length>0&&(a=ce(bt(a,l),r.shape));const c=Fn(r);return Jn(mt(a,nt(c,"float32")))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Wpe={kernelName:i1,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>mt(t,Jn(Fn(n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Upe={kernelName:l1,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e,r=ie(ff(n,6),$p(n));return{x:()=>ie(t,nt(r,"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Hpe={kernelName:a1,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ie(t,nt($p(n),"float32"))}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Gpe={kernelName:Uv,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ce(t,n.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qpe={kernelName:Gv,inputsToSave:["images"],gradFunc:(t,e,n)=>{const[r]=e,s={dy:t,images:r};return{images:()=>ae.runKernel(EA,s,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Xpe={kernelName:Hv,inputsToSave:["images"],gradFunc:(t,e,n)=>{const[r]=e,s={dy:t,images:r};return{images:()=>ae.runKernel(NA,s,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Kpe={kernelName:qv,gradFunc:(t,e,n)=>{const{dims:r}=n,s=Zt(r,t.shape);return{x:()=>na(t,s)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ype={kernelName:c1,gradFunc:t=>({x:()=>ln(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Zpe={kernelName:u1,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Jn(mt(t,ie(oc(n,1.5),2)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Qpe={kernelName:Xv,inputsToSave:["condition"],gradFunc:(t,e)=>{const[n]=e;return{condition:()=>nt(ln(n),"float32"),t:()=>ie(t,nt(n,t.dtype)),e:()=>ie(t,nt(h2(n),t.dtype))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Jpe={kernelName:d1,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const r=ri(n,kt(0)),s=kt(A2),o=kt(R2),i=ie(t,o),a=ie(ie(t,s),Yo(nt(n,"float32")));return js(r,i,a)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eme={kernelName:m1,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ie(t,ie(n,lt(kt(1),n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tme={kernelName:p1,gradFunc:t=>({x:()=>ln(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nme={kernelName:f1,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ie(l2(nt(n,"float32")),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rme={kernelName:h1,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ie(JA(nt(n,"float32")),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sme={kernelName:Kv,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{begin:s,size:o}=n,i=r.shape,[a,l]=k2(r,s,o),c=[];for(let d=0;d<t.rank;d++)c.push([a[d],i[d]-a[d]-l[d]]);return{x:()=>Pu(t,c)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ome={kernelName:Jv,outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r]=e,{dim:s}=n,o=!0,i=ie(t,r);return{logits:()=>lt(i,ie(bt(i,[s],o),r))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ime={kernelName:g1,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ie(t,Ta(n))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const J4={kernelName:Zv,gradFunc:(t,e,n)=>{const{blockShape:r,paddings:s}=n;return{x:()=>i2(t,r,s)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const e_={kernelName:Qv,gradFunc:(t,e,n)=>{const{axis:r}=n;return{x:()=>yr(t,r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ame={kernelName:x1,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>mt(t,ie(Ns(nt(n,"float32")),2))}}};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lme={kernelName:_A,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ie(t,ie(nt(n,"float32"),2))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cme={kernelName:y1,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,s=kt(2);return{a:()=>ie(t,ie(s,lt(n,r))),b:()=>ie(t,ie(s,lt(r,n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ume={kernelName:S1,gradFunc:t=>({x:()=>ln(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dme={kernelName:b1,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,s=jt(n.shape,r.shape);return{a:()=>{let a=t;const l=es(n.shape,s);return l.length>0&&(a=bt(a,l)),ce(a,n.shape)},b:()=>{let a=t;const l=es(r.shape,s);return l.length>0&&(a=bt(a,l)),ce(Jn(a),r.shape)}}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fme={kernelName:Yv,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,s=r.shape.slice(),{axis:o}=n;Zt(o,r.shape).forEach(c=>{s[c]=1});const a=ce(t,s),l=ie(a,jo(r.shape,"float32"));return{x:()=>l}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hme={kernelName:w1,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>mt(t,Fn(l2(n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pme={kernelName:v1,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ie(lt(kt(1),Fn(n)),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mme={kernelName:C1,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{reps:s}=n;return{x:()=>{let i=ln(r);if(r.rank===1)for(let a=0;a<s[0];++a)i=Ue(i,Pt(t,[a*r.shape[0]],[r.shape[0]]));else if(r.rank===2)for(let a=0;a<s[0];++a)for(let l=0;l<s[1];++l)i=Ue(i,Pt(t,[a*r.shape[0],l*r.shape[1]],[r.shape[0],r.shape[1]]));else if(r.rank===3)for(let a=0;a<s[0];++a)for(let l=0;l<s[1];++l)for(let c=0;c<s[2];++c)i=Ue(i,Pt(t,[a*r.shape[0],l*r.shape[1],c*r.shape[2]],[r.shape[0],r.shape[1],r.shape[2]]));else if(r.rank===4)for(let a=0;a<s[0];++a)for(let l=0;l<s[1];++l)for(let c=0;c<s[2];++c)for(let d=0;d<s[3];++d)i=Ue(i,Pt(t,[a*r.shape[0],l*r.shape[1],c*r.shape[2],d*r.shape[3]],[r.shape[0],r.shape[1],r.shape[2],r.shape[3]]));else throw new Error(`Gradient for tile operation is not implemented for rank-${r.rank} tensors yet.`);return i}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gme={kernelName:Nh,gradFunc:(t,e,n)=>{const r=n,{perm:s}=r,o=Ou(s);return{x:()=>an(t,o)}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xme={kernelName:t2,gradFunc:(t,e,n)=>{const r=n,{axis:s}=r;return{value:()=>Zo(t,s)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yme={kernelName:n2,inputsToSave:["segmentIds"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>bme(t,n)}}};function bme(t,e){const n=gc(e,ln(e)),r=D1(t,n);let s=_u(e,kt(0,"int32"));const o=r.rank-s.rank;for(let a=0;a<o;++a)s=Ls(s,a+1);s=Nl(s,jo(r.shape,"bool"));const i=ln(r);return js(s,r,i)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wme={kernelName:r2,gradFunc:t=>({x:()=>ln(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vme=[Kj,yhe,bhe,whe,vhe,Che,She,Nhe,Ehe,Ihe,khe,The,Dhe,_he,Phe,Fhe,Mhe,Lhe,Bhe,jhe,zhe,Vhe,Uhe,Whe,qhe,Xhe,Khe,Yhe,Zhe,Qhe,Vpe,Jhe,epe,tpe,npe,rpe,ope,spe,ipe,ape,lpe,cpe,upe,dpe,fpe,hpe,ppe,mpe,gpe,bpe,Z4,Z4,wpe,Spe,Ipe,kpe,Tpe,Ape,Rpe,Dpe,$pe,Ope,_pe,Ppe,Fpe,Q4,Q4,Mpe,Lpe,zpe,Wpe,Upe,Hpe,Gpe,qpe,Xpe,Kpe,Ype,Zpe,Qpe,Jpe,eme,tme,nme,rme,sme,ome,ime,J4,J4,e_,e_,ame,cme,lme,ume,dme,fme,hme,pme,mme,gme,xme,yme,wme];for(const t of vme)loe(t);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */$e().prototype.abs=function(){return this.throwIfDisposed(),Ur(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */$e().prototype.acos=function(){return this.throwIfDisposed(),QB(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */$e().prototype.acosh=function(){return this.throwIfDisposed(),JB(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */$e().prototype.add=function(t){return this.throwIfDisposed(),Ue(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */$e().prototype.all=function(t,e){return this.throwIfDisposed(),XA(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */$e().prototype.any=function(t,e){return this.throwIfDisposed(),Mb(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */$e().prototype.argMax=function(t){return this.throwIfDisposed(),Kh(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */$e().prototype.argMin=function(t){return this.throwIfDisposed(),e8(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */$e().prototype.asScalar=function(){return this.throwIfDisposed(),Y(this.size===1,()=>"The array must have only 1 element."),ce(this,[])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */$e().prototype.asType=function(t){return this.throwIfDisposed(),nt(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */$e().prototype.as1D=function(){return this.throwIfDisposed(),ce(this,[this.size])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */$e().prototype.as2D=function(t,e){return this.throwIfDisposed(),ce(this,[t,e])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */$e().prototype.as3D=function(t,e,n){return this.throwIfDisposed(),ce(this,[t,e,n])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */$e().prototype.as4D=function(t,e,n,r){return this.throwIfDisposed(),ce(this,[t,e,n,r])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */$e().prototype.as5D=function(t,e,n,r,s){return this.throwIfDisposed(),ce(this,[t,e,n,r,s])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */$e().prototype.asin=function(){return this.throwIfDisposed(),t8(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */$e().prototype.asinh=function(){return this.throwIfDisposed(),n8(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */$e().prototype.atan=function(){return this.throwIfDisposed(),r8(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */$e().prototype.atan2=function(t){return this.throwIfDisposed(),s8(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */$e().prototype.atanh=function(){return this.throwIfDisposed(),o8(this)};$e().prototype.avgPool=function(t,e,n,r){return this.throwIfDisposed(),o2(this,t,e,n,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */$e().prototype.batchToSpaceND=function(t,e){return this.throwIfDisposed(),i2(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */$e().prototype.batchNorm=function(t,e,n,r,s){return this.throwIfDisposed(),I1(this,t,e,n,r,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */$e().prototype.broadcastTo=function(t){return this.throwIfDisposed(),kh(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */$e().prototype.cast=function(t){return this.throwIfDisposed(),nt(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */$e().prototype.ceil=function(){return this.throwIfDisposed(),d8(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */$e().prototype.clipByValue=function(t,e){return this.throwIfDisposed(),Ko(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */$e().prototype.concat=function(t,e){return this.throwIfDisposed(),t instanceof Tn&&(t=[t]),yr([this,...t],e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */$e().prototype.conv1d=function(t,e,n,r,s,o){return this.throwIfDisposed(),YA(this,t,e,n,r,s,o)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */$e().prototype.conv2dTranspose=function(t,e,n,r,s){return this.throwIfDisposed(),QA(this,t,e,n,r,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */$e().prototype.conv2d=function(t,e,n,r,s,o){return this.throwIfDisposed(),mu(this,t,e,n,r,s,o)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */$e().prototype.cos=function(){return this.throwIfDisposed(),l2(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */$e().prototype.cosh=function(){return this.throwIfDisposed(),JA(this)};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */$e().prototype.cumprod=function(t,e,n){return this.throwIfDisposed(),Lb(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */$e().prototype.cumsum=function(t,e,n){return this.throwIfDisposed(),e3(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */$e().prototype.depthToSpace=function(t,e){return this.throwIfDisposed(),y8(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */$e().prototype.depthwiseConv2d=function(t,e,n,r,s,o){return this.throwIfDisposed(),k1(this,t,e,n,r,s,o)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */$e().prototype.dilation2d=function(t,e,n,r,s){return this.throwIfDisposed(),b8(this,t,e,n,r,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */$e().prototype.divNoNan=function(t){return this.throwIfDisposed(),w8(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */$e().prototype.div=function(t){return this.throwIfDisposed(),mt(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */$e().prototype.dot=function(t){return this.throwIfDisposed(),v8(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */$e().prototype.elu=function(){return this.throwIfDisposed(),T1(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */$e().prototype.equal=function(t){return this.throwIfDisposed(),Oa(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */$e().prototype.erf=function(){return this.throwIfDisposed(),t3(this)};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */$e().prototype.euclideanNorm=function(t,e){return this.throwIfDisposed(),N8(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */$e().prototype.exp=function(){return this.throwIfDisposed(),Yo(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */$e().prototype.expandDims=function(t){return this.throwIfDisposed(),Ls(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */$e().prototype.expm1=function(){return this.throwIfDisposed(),E8(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */$e().prototype.fft=function(){return this.throwIfDisposed(),v2(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */$e().prototype.flatten=function(){return this.throwIfDisposed(),ce(this,[this.size])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */$e().prototype.floor=function(){return this.throwIfDisposed(),R1(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */$e().prototype.floorDiv=function(t){return this.throwIfDisposed(),qA(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */$e().prototype.gather=function(t,e,n){return this.throwIfDisposed(),D1(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */$e().prototype.greaterEqual=function(t){return this.throwIfDisposed(),_u(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */$e().prototype.greater=function(t){return this.throwIfDisposed(),ri(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */$e().prototype.ifft=function(){return this.throwIfDisposed(),Zg(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */$e().prototype.irfft=function(){return this.throwIfDisposed(),I3(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */$e().prototype.isFinite=function(){return this.throwIfDisposed(),I8(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */$e().prototype.isInf=function(){return this.throwIfDisposed(),k8(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */$e().prototype.isNaN=function(){return this.throwIfDisposed(),T8(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */$e().prototype.leakyRelu=function(t){return this.throwIfDisposed(),u2(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */$e().prototype.lessEqual=function(t){return this.throwIfDisposed(),ff(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */$e().prototype.less=function(t){return this.throwIfDisposed(),Xg(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */$e().prototype.localResponseNormalization=function(t,e,n,r){return this.throwIfDisposed(),A8(this,t,e,n,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */$e().prototype.logSigmoid=function(){return this.throwIfDisposed(),R8(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */$e().prototype.logSoftmax=function(t){return this.throwIfDisposed(),s3(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */$e().prototype.logSumExp=function(t,e){return this.throwIfDisposed(),f2(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */$e().prototype.log=function(){return this.throwIfDisposed(),xi(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */$e().prototype.log1p=function(){return this.throwIfDisposed(),d2(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */$e().prototype.logicalAnd=function(t){return this.throwIfDisposed(),Nl(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */$e().prototype.logicalNot=function(){return this.throwIfDisposed(),h2(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */$e().prototype.logicalOr=function(t){return this.throwIfDisposed(),o3(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */$e().prototype.logicalXor=function(t){return this.throwIfDisposed(),D8(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */$e().prototype.matMul=function(t,e,n){return this.throwIfDisposed(),en(this,t,e,n)};$e().prototype.maxPool=function(t,e,n,r){return this.throwIfDisposed(),p2(this,t,e,n,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */$e().prototype.max=function(t,e){return this.throwIfDisposed(),Zi(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */$e().prototype.maximum=function(t){return this.throwIfDisposed(),gc(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */$e().prototype.mean=function(t,e){return this.throwIfDisposed(),gr(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */$e().prototype.min=function(t,e){return this.throwIfDisposed(),qg(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */$e().prototype.minimum=function(t){return this.throwIfDisposed(),Gd(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */$e().prototype.mirrorPad=function(t,e){return this.throwIfDisposed(),O8(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */$e().prototype.mod=function(t){return this.throwIfDisposed(),_8(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */$e().prototype.mul=function(t){return this.throwIfDisposed(),ie(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */$e().prototype.neg=function(){return this.throwIfDisposed(),Jn(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */$e().prototype.norm=function(t,e,n){return this.throwIfDisposed(),A1(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */$e().prototype.notEqual=function(t){return this.throwIfDisposed(),Zh(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */$e().prototype.oneHot=function(t,e=1,n=0){return this.throwIfDisposed(),a3(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */$e().prototype.onesLike=function(){return this.throwIfDisposed(),yi(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */$e().prototype.pad=function(t,e){return this.throwIfDisposed(),Pu(this,t,e)};$e().prototype.pool=function(t,e,n,r,s,o){return this.throwIfDisposed(),P8(this,t,e,n,r,s,o)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */$e().prototype.pow=function(t){return this.throwIfDisposed(),oc(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */$e().prototype.prelu=function(t){return this.throwIfDisposed(),x2(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */$e().prototype.prod=function(t,e){return this.throwIfDisposed(),F8(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */$e().prototype.reciprocal=function(){return this.throwIfDisposed(),L8(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */$e().prototype.relu=function(){return this.throwIfDisposed(),$l(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */$e().prototype.relu6=function(){return this.throwIfDisposed(),y3(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */$e().prototype.reshapeAs=function(t){return this.throwIfDisposed(),ce(this,t.shape)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */$e().prototype.reshape=function(t){return this.throwIfDisposed(),ce(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */$e().prototype.resizeBilinear=function(t,e,n){return this.throwIfDisposed(),tj(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */$e().prototype.resizeNearestNeighbor=function(t,e,n){return this.throwIfDisposed(),nj(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */$e().prototype.reverse=function(t){return this.throwIfDisposed(),na(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */$e().prototype.rfft=function(){return this.throwIfDisposed(),C2(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */$e().prototype.round=function(){return this.throwIfDisposed(),b3(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */$e().prototype.rsqrt=function(){return this.throwIfDisposed(),w3(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */$e().prototype.selu=function(){return this.throwIfDisposed(),v3(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */$e().prototype.separableConv2d=function(t,e,n,r,s,o){return this.throwIfDisposed(),C3(this,t,e,n,r,s,o)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */$e().prototype.sigmoid=function(){return this.throwIfDisposed(),Ta(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */$e().prototype.sign=function(){return this.throwIfDisposed(),B8(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */$e().prototype.sin=function(){return this.throwIfDisposed(),S3(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */$e().prototype.sinh=function(){return this.throwIfDisposed(),N3(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */$e().prototype.slice=function(t,e){return this.throwIfDisposed(),Pt(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */$e().prototype.softmax=function(t){return this.throwIfDisposed(),w2(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */$e().prototype.softplus=function(){return this.throwIfDisposed(),Dp(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */$e().prototype.spaceToBatchND=function(t,e){return this.throwIfDisposed(),g2(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */$e().prototype.split=function(t,e){return this.throwIfDisposed(),Ho(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */$e().prototype.sqrt=function(){return this.throwIfDisposed(),Ns(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */$e().prototype.square=function(){return this.throwIfDisposed(),Fn(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */$e().prototype.squaredDifference=function(t){return this.throwIfDisposed(),k3(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */$e().prototype.squeeze=function(t){return this.throwIfDisposed(),Aa(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */$e().prototype.stack=function(t,e){this.throwIfDisposed();const n=t instanceof Tn?[this,t]:[this,...t];return Zo(n,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */$e().prototype.step=function(t){return this.throwIfDisposed(),$p(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */$e().prototype.stridedSlice=function(t,e,n,r,s,o,i,a){return this.throwIfDisposed(),j8(this,t,e,n,r,s,o,i,a)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */$e().prototype.sub=function(t){return this.throwIfDisposed(),lt(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */$e().prototype.sum=function(t,e){return this.throwIfDisposed(),bt(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */$e().prototype.tan=function(){return this.throwIfDisposed(),z8(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */$e().prototype.tanh=function(){return this.throwIfDisposed(),Hd(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */$e().prototype.tile=function(t){return this.throwIfDisposed(),Hi(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */$e().prototype.toBool=function(){return this.throwIfDisposed(),nt(this,"bool")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */$e().prototype.toFloat=function(){return this.throwIfDisposed(),nt(this,"float32")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */$e().prototype.toInt=function(){return this.throwIfDisposed(),nt(this,"int32")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */$e().prototype.topk=function(t,e){return this.throwIfDisposed(),U8(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */$e().prototype.transpose=function(t){return this.throwIfDisposed(),an(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */$e().prototype.unique=function(t){return this.throwIfDisposed(),H8(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */$e().prototype.unsortedSegmentSum=function(t,e){return this.throwIfDisposed(),R3(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */$e().prototype.unstack=function(t){return this.throwIfDisposed(),ra(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */$e().prototype.where=function(t,e){return this.throwIfDisposed(),js(t,this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */$e().prototype.zerosLike=function(){return this.throwIfDisposed(),ln(this)};/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class nl extends Error{constructor(e){super(e),Object.setPrototypeOf(this,nl.prototype)}}class qi extends Error{constructor(e){super(e),Object.setPrototypeOf(this,qi.prototype)}}class de extends Error{constructor(e){super(e),Object.setPrototypeOf(this,de.prototype)}}class Ht extends Error{constructor(e){super(e),Object.setPrototypeOf(this,Ht.prototype)}}class fR extends Error{constructor(e){super(e),Object.setPrototypeOf(this,fR.prototype)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Zj{constructor(e){this.maxEntries=e||100,this.cache=new Map}get(e){let n;return this.cache.has(e)&&(n=this.cache.get(e),this.cache.delete(e),this.cache.set(e,n)),n}put(e,n){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxEntries){const r=this.cache.keys().next().value;this.cache.delete(r)}this.cache.set(e,n)}getMaxEntries(){return this.maxEntries}setMaxEntries(e){if(e<0)throw new Error(`The maxEntries of LRU caches must be at least 0, but got ${e}.`);if(this.maxEntries>e)for(let n=0;n<this.maxEntries-e;n++){const r=this.cache.keys().next().value;this.cache.delete(r)}this.maxEntries=e}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Xd(t,e){if(Array.isArray(t)){let n=[];for(let r=0;r<e;r++)n=n.concat(t);return n}else{const n=new Array(e);return n.fill(t),n}}function rl(t,e){if(!t)throw new fR(e)}function t_(t,e){let n=0;for(const r of t)r===e&&n++;return n}function go(t){return t.length===1?t[0]:t}function kn(t){return Array.isArray(t)?t:[t]}function jl(t){const n=t.replace(/(.)([A-Z][a-z0-9]+)/g,"$1_$2").replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase();return n[0]!=="_"?n:"private"+n}function ud(t){return t.length<=1||t.indexOf("_")===-1?t:t.replace(/[_]+(\w|$)/g,(e,n)=>n.toUpperCase())}let Ai={};function hR(t){if(t==null)return null;const e={};return e.className=t.getClassName(),e.config=t.getConfig(),e}function dI(t){if(!(t==null||typeof t!="object"))if(Array.isArray(t))t.forEach(e=>dI(e));else{const e=Object.keys(t);for(const n of e){const r=t[n];r!=null&&typeof r=="object"&&(!Array.isArray(r)&&r.type==="ndarray"&&typeof r.value=="number"?t[n]=r.value:dI(r))}}}function P1(t,e={},n={},r="object",s=!1){if(typeof t=="string"){const o=t;let i;if(o in n)i=n[o];else if(o in Ai)i=Ai[o];else if(i=e[o],i==null)throw new de(`Unknown ${r}: ${t}. This may be due to one of the following reasons:
1. The ${r} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.
2. The custom ${r} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);return i}else{const o=t;if(o.className==null||o.config==null)throw new de(`${r}: Improper config format: ${JSON.stringify(o)}.
'className' and 'config' must set.`);const i=o.className;let a,l;if(i in n?[a,l]=n[i]:i in Ai?[a,l]=Ai.className:i in e&&([a,l]=e[i]),a==null)throw new de(`Unknown ${r}: ${i}. This may be due to one of the following reasons:
1. The ${r} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.
2. The custom ${r} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);if(l!=null){const c={};for(const g of Object.keys(Ai))c[g]=Ai[g];for(const g of Object.keys(n))c[g]=n[g];const d=o.config;d.customObjects=c;const f=Object.assign({},Ai);for(const g of Object.keys(n))Ai[g]=n[g];dI(o.config);const p=l(a,o.config,n,s);return Ai=Object.assign({},f),p}else{const c=Object.assign({},Ai);for(const f of Object.keys(n))Ai[f]=n[f];const d=new a(o.config);return Ai=Object.assign({},c),d}}}function Cme(t,e){return t<e?-1:t>e?1:0}function Hx(t,e){return-1*Cme(t,e)}function ou(t){if(t==null)return t;const e=[];for(const n of t)e.indexOf(n)===-1&&e.push(n);return e}function Sme(t){if(t==null)throw new de(`Invalid value in obj: ${JSON.stringify(t)}`);for(const e in t)if(t.hasOwnProperty(e))return!1;return!0}function gf(t,e,n){if(n!=null&&t.indexOf(n)<0)throw new de(`${n} is not a valid ${e}.  Valid values are ${t} or null/undefined.`)}function pR(t,e,n=0,r=1/0){return rl(n>=0),rl(r>=n),Array.isArray(t)&&t.length>=n&&t.length<=r&&t.every(s=>typeof s===e)}function us(t,e){Array.isArray(t)?(Y(t.length>0,()=>`${e} is unexpectedly an empty array.`),t.forEach((n,r)=>us(n,`element ${r+1} of ${e}`))):Y(Number.isInteger(t)&&t>0,()=>`Expected ${e} to be a positive integer, but got ${Qj(t)}.`)}function Qj(t){return t===null?"null":Array.isArray(t)?"["+t.map(e=>Qj(e)).join(",")+"]":typeof t=="string"?`"${t}"`:`${t}`}function Nme(t,e,n){let r=n!=null?n():po(),s;return(...i)=>{const a=n!=null?n():po();return a-r<e||(r=a,s=t(...i)),s}}function Jj(t){return t==="relu"?"relu":t==="linear"?"linear":t==="elu"?"elu":null}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let Eme=0;function e7(){return Eme++}const Gx={};function D2(t=""){return t in Gx||(Gx[t]=0),Gx[t]+=1,t+Gx[t].toString()}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const Ime=["channelsFirst","channelsLast"],kme=["nearest","bilinear"],Tme=["valid","same","causal"],Ame=["max","avg"],Rme=["sum","mul","concat","ave"];/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const Ff=new Map;function Or(t){gf(Ime,"DataFormat",t)}function Dme(t){gf(kme,"InterpolationFormat",t)}function Si(t){gf(Tme,"PaddingMode",t)}function t7(t){gf(Ame,"PoolMode",t)}const pg=[],n_="/";function Td(t,e){pg.push(t);try{const n=e();return pg.pop(),n}catch(n){throw pg.pop(),n}}function $me(){return pg.length===0?"":pg.join(n_)+n_}function n7(t){if(!s7(t))throw new Error("Not a valid tensor name: '"+t+"'");return $me()+t}function r7(t){if(!s7(t))throw new Error("Not a valid tensor name: '"+t+"'");Ff.has(t)||Ff.set(t,0);const e=Ff.get(t);if(Ff.set(t,Ff.get(t)+1),e>0){const n=`${t}_${e}`;return Ff.set(n,1),n}else return t}const Ome=new RegExp(/^[A-Za-z0-9][-A-Za-z0-9\._\/]*$/);function s7(t){return!!t.match(Ome)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function _me(t){return t===parseInt(t.toString(),10)}function iu(t,e,n){e==null&&(e=0),n==null&&(n=t.length);let r=1;for(let s=e;s<n;++s)r*=t[s];return r}function Jh(t){if(t.length===0)return Number.NaN;let e=Number.POSITIVE_INFINITY;for(let n=0;n<t.length;n++){const r=t[n];r<e&&(e=r)}return e}function gu(t){if(t.length===0)return Number.NaN;let e=Number.NEGATIVE_INFINITY;for(let n=0;n<t.length;n++){const r=t[n];r>e&&(e=r)}return e}function _a(t,e){if(e<t)throw new de(`end (${e}) < begin (${t}) is forbidden.`);const n=[];for(let r=t;r<e;++r)n.push(r);return n}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let nN;function Xr(){return nN==null&&(nN=FB().epsilon()),nN}function Pa(){return"channelsLast"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function yl(t,e){return nt(t,e)}function F1(t,e=-1){const n=t.shape.slice();return e<0&&(e=n.length+e+1),n.splice(e,0,1),ce(t,n)}function Pme(t,e){return we(()=>{if(t.shape.length!==2)throw new de(`repeat() expects a rank-2 tensor, but received a rank-${t.shape.length} tensor.`);const n=F1(t,1);return fI(n,[1,e,1])})}function Fme(t){const e=[iu(t.shape)];return ce(t,e)}function Mme(t){if(t.rank<=1)throw new de(`batchFlatten requires a minimum rank of 2. Got rank: ${t.rank}.`);const e=[t.shape[0],iu(t.shape,1)];return ce(t,e)}function Ad(t,e,n){return we(()=>{switch(t.rank){case 1:return y2(t,e,n);case 2:return E3(t,[e,0],[n,t.shape[1]]);case 3:return b2(t,[e,0,0],[n,t.shape[1],t.shape[2]]);case 4:return Yg(t,[e,0,0,0],[n,t.shape[1],t.shape[2],t.shape[3]]);case 5:return Pt(t,[e,0,0,0,0],[n,t.shape[1],t.shape[2],t.shape[3],t.shape[4]]);case 6:return Pt(t,[e,0,0,0,0,0],[n,t.shape[1],t.shape[2],t.shape[3],t.shape[4],t.shape[5]]);default:throw new de(`sliceAlongFirstAxis() received an unsupported tensor rank: ${t.rank}`)}})}function rN(t,e,n){return we(()=>{switch(t.rank){case 1:return y2(t,e,n);case 2:return E3(t,[0,e],[t.shape[0],n]);case 3:return b2(t,[0,0,e],[t.shape[0],t.shape[1],n]);case 4:return Yg(t,[0,0,0,e],[t.shape[0],t.shape[1],t.shape[2],n]);default:throw new de(`sliceAlongLastAxis() received an unsupported tensor rank: ${t.rank}`)}})}function qx(t,e,n,r){return we(()=>{switch(t.rank){case 1:return y2(t,e,n);case 2:switch(r){case 1:return Ad(t,e,n);case 2:return rN(t,e,n);default:throw new de(`The axis is not within the rank of the tensor ${r}`)}case 3:switch(r){case 1:return Ad(t,e,n);case 2:return b2(t,[0,e,0],[t.shape[0],n,t.shape[2]]);case 3:return rN(t,e,n);default:throw new de(`The axis is not within the rank of the tensor ${r}`)}case 4:switch(r){case 1:return Ad(t,e,n);case 2:return Yg(t,[0,e,0,0],[t.shape[0],n,t.shape[2],t.shape[3]]);case 3:return Yg(t,[0,0,e,0],[t.shape[0],t.shape[1],n,t.shape[3]]);case 4:return rN(t,e,n);default:throw new de(`The axis is not within the rank of the tensor ${r}`)}default:throw new de(`sliceAlongLastAxis() received an unsupported tensor rank: ${t.rank}`)}})}function mR(t,e=-1){let n;return e<0&&(n=t[0].rank,n!==0?e=n:e=0),e===t[0].rank&&(e=-1),yr(t,e)}function r_(t,e){switch(t.rank){case 1:return f8([t,e]);case 2:return a2([t,e],0);case 3:return h8([t,e],0);case 4:return p8([t,e],0);default:throw new de(`concatAlongFirstAxis() received an unsupported tensor rank: ${t.rank}`)}}function fI(t,e){if(Array.isArray(e)||(e=[e]),t.rank!==e.length)throw new de(`The length of input n (${e.length}) does not match the number of dimensions in input x (${t.rank})`);return Hi(t,e)}function $2(t,e=0,n=1,r,s){return x3(t,e,n,r,s)}function bl(t,e,n,r){if(t.rank<2||e.rank<2)throw new Ht(`dot requires both inputs to be rank >= 2 but got x shape = ${t.shape} and y shape = ${e.shape}`);if(e.rank>=3){const s=t.shape.slice(-1)[0],o=e.shape.slice(-2)[0];if(s!==o)throw new Ht(`If rank y >= 3, then the second last dim of y must equal the last dim of x but got x shape = ${t.shape} and  y shape = ${e.shape}`)}if(t.rank===2&&e.rank===2)return aI({a:t,b:e,transposeA:!1,transposeB:!1,bias:r?hI(t.rank,r,Pa()):null,activation:n});{const s=t.shape.slice(),o=s.pop();t=ce(t,[-1,o]);const i=e.shape.slice(),a=i.pop(),l=i.pop(),c=[...i,a],d=Array.from({length:e.rank},(x,b)=>b===0?e.rank-2:b<=e.rank-2?b-1:b);e=ce(an(e,d),[l,-1]);const f=[...s,...c];return ce(aI({a:t,b:e,transposeA:!1,transposeB:!1,bias:r?hI(t.rank,r,Pa()):null,activation:n}),f)}}function o7(t,e,n){return we(()=>(Array.isArray(e)?e=cs(e,"int32"):e=nt(e,"int32"),D1(t,e,n)))}function M1(t){return ie(t,t)}function hI(t,e,n){const r=e.shape;if(e.rank!==1&&e.rank!==t)throw new de(`Unexpected bias dimensions: ${e.rank}; expected it to be 1 or ${t}`);if(t===5){if(n==="channelsFirst")return r.length===1?ce(e,[1,r[0],1,1,1]):ce(e,[1,r[3],r[0],r[1],r[2]]);if(n==="channelsLast")return r.length===1?ce(e,[1,1,1,1,r[0]]):ce(e,[1].concat(r))}else if(t===4){if(n==="channelsFirst")return r.length===1?ce(e,[1,r[0],1,1]):ce(e,[1,r[2],r[0],r[1]]);if(n==="channelsLast")return r.length===1?ce(e,[1,1,1,r[0]]):ce(e,[1].concat(r))}else if(t===3){if(n==="channelsFirst")return r.length===1?ce(e,[1,r[0],1]):ce(e,[1,r[1],r[0]]);if(n==="channelsLast")return r.length===1?ce(e,[1,1,r[0]]):ce(e,[1].concat(r))}else if(t<3)return e;throw new de(`Unsupported input rank by biasAdd: ${e.rank}`)}function Va(t,e,n){return we(()=>(n==null&&(n=Pa()),Or(n),Ue(t,hI(t.rank,e,n))))}function Lme(t,e=1){if(e!==1)throw new Ht(`Support for alpha values other than 1 (${e}) is not implemented yet.`);return T1(t)}function Bme(t){return we(()=>mt(t,Ue(Ur(t),1)))}function i7(t,e,n,r){return we(()=>X8(t,e,n,r))}function jme(t){return we(()=>{const e=Ue(.5,ie(.2,t));return Ko(e,0,1)})}function L1(t,e,n=!1){return n?t():e()}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const zme=["fanIn","fanOut","fanAvg"],Vme=["normal","uniform","truncatedNormal"];/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Wme(t){gf(zme,"FanMode",t)}function Ume(t){gf(Vme,"Distribution",t)}class aa extends _p{fromConfigUsesCustomObjects(){return!1}getConfig(){return{}}}class a7 extends aa{apply(e,n){return qr(e,n)}}a7.className="Zeros";qe(a7);class gR extends aa{apply(e,n){return jo(e,n)}}gR.className="Ones";qe(gR);class l7 extends aa{constructor(e){if(super(),typeof e!="object")throw new de(`Expected argument of type ConstantConfig but got ${e}`);if(e.value===void 0)throw new de(`config must have value set but got ${e}`);this.value=e.value}apply(e,n){return we(()=>ie(kt(this.value),jo(e,n)))}getConfig(){return{value:this.value}}}l7.className="Constant";qe(l7);class c7 extends aa{constructor(e){super(),this.DEFAULT_MINVAL=-.05,this.DEFAULT_MAXVAL=.05,this.minval=e.minval||this.DEFAULT_MINVAL,this.maxval=e.maxval||this.DEFAULT_MAXVAL,this.seed=e.seed}apply(e,n){return pf(e,this.minval,this.maxval,n,this.seed)}getConfig(){return{minval:this.minval,maxval:this.maxval,seed:this.seed}}}c7.className="RandomUniform";qe(c7);class u7 extends aa{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,n){if(n=n||"float32",n!=="float32"&&n!=="int32")throw new Ht(`randomNormal does not support dType ${n}.`);return $2(e,this.mean,this.stddev,n,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}u7.className="RandomNormal";qe(u7);class d7 extends aa{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,n){if(n=n||"float32",n!=="float32"&&n!=="int32")throw new Ht(`truncatedNormal does not support dType ${n}.`);return A3(e,this.mean,this.stddev,n,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}d7.className="TruncatedNormal";qe(d7);class f7 extends aa{constructor(e){super(),this.gain=e.gain!=null?e.gain:1}apply(e,n){return we(()=>{if(e.length!==2||e[0]!==e[1])throw new de("Identity matrix initializer can only be used for 2D square matrices.");return ie(this.gain,r3(e[0]))})}getConfig(){return{gain:this.gain}}}f7.className="Identity";qe(f7);function Hme(t,e="channelsLast"){let n,r;if(Or(e),t.length===2)n=t[0],r=t[1];else if([3,4,5].indexOf(t.length)!==-1){if(e==="channelsFirst"){const s=iu(t,2);n=t[1]*s,r=t[0]*s}else if(e==="channelsLast"){const s=iu(t,0,t.length-2);n=t[t.length-2]*s,r=t[t.length-1]*s}}else{const s=iu(t);n=Math.sqrt(s),r=Math.sqrt(s)}return[n,r]}class Qo extends aa{constructor(e){if(super(),e.scale<0)throw new de(`scale must be a positive float. Got: ${e.scale}`);this.scale=e.scale==null?1:e.scale,this.mode=e.mode==null?"fanIn":e.mode,Wme(this.mode),this.distribution=e.distribution==null?"normal":e.distribution,Ume(this.distribution),this.seed=e.seed}apply(e,n){const r=Hme(e),s=r[0],o=r[1];let i=this.scale;if(this.mode==="fanIn"?i/=Math.max(1,s):this.mode==="fanOut"?i/=Math.max(1,o):i/=Math.max(1,(s+o)/2),this.distribution==="normal"){const a=Math.sqrt(i);if(n=n||"float32",n!=="float32"&&n!=="int32")throw new Ht(`${this.getClassName()} does not support dType ${n}.`);return A3(e,0,a,n,this.seed)}else{const a=Math.sqrt(3*i);return pf(e,-a,a,n,this.seed)}}getConfig(){return{scale:this.scale,mode:this.mode,distribution:this.distribution,seed:this.seed}}}Qo.className="VarianceScaling";qe(Qo);class xR extends Qo{constructor(e){super({scale:1,mode:"fanAvg",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return Qo.className}}xR.className="GlorotUniform";qe(xR);class yR extends Qo{constructor(e){super({scale:1,mode:"fanAvg",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return Qo.className}}yR.className="GlorotNormal";qe(yR);class bR extends Qo{constructor(e){super({scale:2,mode:"fanIn",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return Qo.className}}bR.className="HeNormal";qe(bR);class wR extends Qo{constructor(e){super({scale:2,mode:"fanIn",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return Qo.className}}wR.className="HeUniform";qe(wR);class vR extends Qo{constructor(e){super({scale:1,mode:"fanIn",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return Qo.className}}vR.className="LeCunNormal";qe(vR);class CR extends Qo{constructor(e){super({scale:1,mode:"fanIn",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return Qo.className}}CR.className="LeCunUniform";qe(CR);class h7 extends aa{constructor(e){super(),this.DEFAULT_GAIN=1,this.ELEMENTS_WARN_SLOW=2e3,this.gain=e.gain==null?this.DEFAULT_GAIN:e.gain,this.seed=e.seed}apply(e,n){return we(()=>{if(e.length<2)throw new Ht("Shape must be at least 2D.");if(n!=="int32"&&n!=="float32"&&n!==void 0)throw new TypeError(`Unsupported data type ${n}.`);n=n;const r=Te(e.slice(0,-1)),s=e[e.length-1],o=r*s;o>this.ELEMENTS_WARN_SLOW&&console.warn(`Orthogonal initializer is being called on a matrix with more than ${this.ELEMENTS_WARN_SLOW} (${o}) elements: Slowness may result.`);const i=[Math.max(s,r),Math.min(s,r)],a=$2(i,0,1,n,this.seed),l=rj.qr(a,!1);let c=l[0];const f=l[1].flatten().stridedSlice([0],[Math.min(s,r)*Math.min(s,r)],[Math.min(s,r)+1]);return c=ie(c,f.sign()),r<s&&(c=c.transpose()),ie(kt(this.gain),c.reshape(e))})}getConfig(){return{gain:this.gain,seed:this.seed}}}h7.className="Orthogonal";qe(h7);const s_={constant:"Constant",glorotNormal:"GlorotNormal",glorotUniform:"GlorotUniform",heNormal:"HeNormal",heUniform:"HeUniform",identity:"Identity",leCunNormal:"LeCunNormal",leCunUniform:"LeCunUniform",ones:"Ones",orthogonal:"Orthogonal",randomNormal:"RandomNormal",randomUniform:"RandomUniform",truncatedNormal:"TruncatedNormal",varianceScaling:"VarianceScaling",zeros:"Zeros"};function o_(t,e={}){return P1(t,Bi.getMap().classNameMap,e,"initializer")}function dr(t){return hR(t)}function sr(t){if(typeof t=="string"){const e=t in s_?s_[t]:t;if(e==="GlorotNormal")return new yR;if(e==="GlorotUniform")return new xR;if(e==="HeNormal")return new bR;if(e==="HeUniform")return new wR;if(e==="LeCunNormal")return new vR;if(e==="LeCunUniform")return new CR;{const n={};return n.className=e,n.config={},o_(n)}}else return t instanceof aa?t:o_(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function pI(t){return Array.isArray(t)&&Array.isArray(t[0])}function Bb(t){return t.length===0?[]:Array.isArray(t[0])?t:[t]}function Ft(t){let e;if(Array.isArray(t)){if(t.length!==1)throw new de(`Expected Tensor length to be 1; got ${t.length}`);e=t[0]}else e=t;return e}function mn(t){if(Array.isArray(t)&&Array.isArray(t[0])){if(t.length===1)return t=t,t[0];throw new de(`Expected exactly 1 Shape; got ${t.length}`)}else return t}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function jb(t){let e=0;for(const n of t)n.shape.length===0?e+=1:e+=n.shape.reduce((r,s)=>r*s);return e}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const i_="Variable";class Gme{constructor(e,n="float32",r=i_,s=!0,o=null){this.dtype=n??"float32",this.shape=e.shape,this.id=e7(),r=r??i_,this.originalName=n7(r),this.name=r7(this.originalName),this.trainable_=s,this.constraint=o,this.val=G8(e,this.trainable_,this.name,this.dtype)}read(){return this.assertNotDisposed(),this.val}write(e){return this.assertNotDisposed(),qme(this.val,e),this.val.id!==e.id&&(this.val.assign(e),this.constraint!=null&&this.val.assign(this.constraint.apply(this.val))),this}dispose(){this.assertNotDisposed(),this.val.dispose()}assertNotDisposed(){if(this.val.isDisposed)throw new Error(`LayersVariable ${this.name} is already disposed.`)}get trainable(){return this.trainable_}set trainable(e){this.trainable_=e,this.val.trainable=e}}function qme(t,e){if(t.shape.toString()!==e.shape.toString())throw new Error("Shape mismatch: "+JSON.stringify(t.shape)+" vs. "+JSON.stringify(e.shape))}function mI(t){return t.map(e=>e.read())}function SR(t){t.forEach(e=>{e[0].write(e[1])})}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Kr{constructor(e){this.dtype=e.dtype,this.shape=e.shape,e.shape!=null?this.ndim=e.shape.length:this.ndim=e.ndim,this.maxNDim=e.maxNDim,this.minNDim=e.minNDim,this.axes=e.axes||{}}}class El{constructor(e,n,r,s,o,i,a){this.dtype=e,this.shape=n,this.sourceLayer=r,this.inputs=s,this.callArgs=o,this.outputTensorIndex=a,this.id=e7(),i!=null&&(this.originalName=n7(i),this.name=r7(this.originalName)),this.rank=n.length}}let Xme=0,O2=class{constructor(e,n){this.callArgs=n,this.id=Xme++,this.outboundLayer=e.outboundLayer,this.inboundLayers=e.inboundLayers,this.nodeIndices=e.nodeIndices,this.tensorIndices=e.tensorIndices,this.inputTensors=e.inputTensors,this.outputTensors=e.outputTensors,this.inputMasks=e.inputMasks,this.outputMasks=e.outputMasks,this.inputShapes=e.inputShapes,this.outputShapes=e.outputShapes;for(const r of e.inboundLayers)r!=null&&r.outboundNodes.push(this);e.outboundLayer.inboundNodes.push(this)}getConfig(){const e=[];for(const n of this.inboundLayers)n!=null?e.push(n.name):e.push(null);return{outboundLayer:this.outboundLayer?this.outboundLayer.name:null,inboundLayers:e,nodeIndices:this.nodeIndices,tensorIndices:this.tensorIndices}}},Kme=0;class Qt extends _p{constructor(e={}){super(),this._callHook=null,this._addedWeightNames=[],this._stateful=!1,this.id=Kme++,this.activityRegularizer=null,this.inputSpec=null,this.supportsMasking=!1,this._trainableWeights=[],this._nonTrainableWeights=[],this._losses=[],this._updates=[],this._built=!1,this.inboundNodes=[],this.outboundNodes=[];let n=e.name;if(!n){const r=this.getClassName();n=jl(r)+"_"+D2(r)}if(this.name=n,this.trainable_=e.trainable==null?!0:e.trainable,e.inputShape!=null||e.batchInputShape!=null){let r;if(e.batchInputShape!=null)r=e.batchInputShape;else if(e.inputShape!=null){let o=null;e.batchSize!=null&&(o=e.batchSize),r=[o].concat(e.inputShape)}this.batchInputShape=r;let s=e.dtype;s==null&&(s=e.inputDType),s==null&&(s="float32"),this.dtype=s}e.weights!=null?this.initialWeights=e.weights:this.initialWeights=null,this._refCount=null,this.fastWeightInitDuringBuild=!1}static nodeKey(e,n){return e.name+"_ib-"+n.toString()}getNodeAtIndex(e,n){if(this.inboundNodes.length===0)throw new qi(`The layer has never been called and thus has no defined ${n}.`);if(this.inboundNodes.length<=e)throw new de(`Asked to get ${n} at node ${e}, but the layer has only ${this.inboundNodes.length} inbound nodes.`);return this.inboundNodes[e]}getInputAt(e){return go(this.getNodeAtIndex(e,"input").inputTensors)}getOutputAt(e){return go(this.getNodeAtIndex(e,"output").outputTensors)}get input(){if(this.inboundNodes.length>1)throw new nl(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer input" is ill-defined. Use \`getInputAt(nodeIndex)\` instead.`);if(this.inboundNodes.length===0)throw new nl(`Layer ${this.name} is not connected, no input to return.`);return go(this.getNodeAtIndex(0,"input").inputTensors)}get output(){if(this.inboundNodes.length===0)throw new nl(`Layer ${this.name} has no inbound nodes.`);if(this.inboundNodes.length>1)throw new nl(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer output" is ill-defined. Use \`getOutputAt(nodeIndex)\` instead.`);return go(this.getNodeAtIndex(0,"output").outputTensors)}get losses(){return this._losses}calculateLosses(){return this.losses.map(e=>e())}get updates(){return this._updates}get built(){return this._built}set built(e){this._built=e}get trainable(){return this.trainable_}set trainable(e){this._trainableWeights.forEach(n=>n.trainable=e),this.trainable_=e}get trainableWeights(){return this.trainable_?this._trainableWeights.filter(e=>e.trainable):[]}set trainableWeights(e){this._trainableWeights=e}get nonTrainableWeights(){return this.trainable?this._trainableWeights.filter(e=>!e.trainable).concat(this._nonTrainableWeights):this._trainableWeights.concat(this._nonTrainableWeights)}set nonTrainableWeights(e){this._nonTrainableWeights=e}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}get stateful(){return this._stateful}resetStates(){if(!this.stateful)throw new Error("Cannot call the resetStates() method of a non-stateful Layer object.")}assertInputCompatibility(e){const n=kn(e);if(this.inputSpec==null||this.inputSpec.length===0)return;const r=kn(this.inputSpec);if(n.length!==r.length)throw new de(`Layer ${this.name} expects ${r.length} inputs, but it received ${n.length} input tensors. Input received: ${e}`);for(let s=0;s<n.length;s++){const o=n[s],i=r[s];if(i==null)continue;const a=o.rank;if(i.ndim!=null&&a!==i.ndim)throw new de(`Input ${s} is incompatible with layer ${this.name}: expected ndim=${i.ndim}, found ndim=${a}`);if(i.maxNDim!=null&&a>i.maxNDim)throw new de(`Input ${s} is incompatible with layer ${this.name}: expected max_ndim=${i.maxNDim}, found ndim=${a}`);if(i.minNDim!=null&&a<i.minNDim)throw new de(`Input ${s} is incompatible with layer ${this.name}: expected min_ndim=${i.minNDim}, found ndim=${a}.`);if(i.dtype!=null&&o.dtype!==i.dtype)throw new de(`Input ${s} is incompatible with layer ${this.name} : expected dtype=${i.dtype}, found dtype=${o.dtype}.`);if(i.axes){const l=o.shape;for(const c in i.axes){const d=Number(c),f=i.axes[c],p=d>=0?l[d]:l[l.length+d];if(f!=null&&[f,null].indexOf(p)===-1)throw new de(`Input ${s} is incompatible with layer ${this.name}: expected axis ${d} of input shape to have value ${f} but got shape ${l}.`)}}if(i.shape!=null)for(let l=0;l<i.shape.length;++l){const c=i.shape[l],d=o.shape[l];if(c!=null&&d!=null&&c!==d)throw new de(`Input ${s} is incompatible with layer ${this.name}: expected shape=${i.shape}, found shape=${o.shape}.`)}}}call(e,n){return e}invokeCallHook(e,n){this._callHook!=null&&this._callHook(e,n)}setCallHook(e){this._callHook=e}clearCallHook(){this._callHook=null}apply(e,n){n=n||{},this.assertNotDisposed();const r=kn(e),s=Qme(e),o=Jme(e);if(s===o)throw new de("Arguments to apply() must be all SymbolicTensors or all Tensors");return Td(this.name,()=>{if(!this.built){this.assertInputCompatibility(e);const i=[];for(const a of kn(e))i.push(a.shape);this.build(go(i)),this.built=!0,this.initialWeights&&this.setWeights(this.initialWeights),this._refCount===null&&o&&(this._refCount=1)}if(this.assertInputCompatibility(e),o){let i=this.call(e,n);this.supportsMasking&&this.setMaskMetadata(e,i);const a=kn(i),l=[];for(let c of a)r.indexOf(c)!==-1&&(c=c.clone()),l.push(c);if(i=go(l),this.activityRegularizer!=null)throw new Ht("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return i}else{const i=Yme(e),a=this.computeOutputShape(i);let l;const c=Zme(e);if(this.warnOnIncompatibleInputShape(Array.isArray(e)?i[0]:i),a!=null&&a.length>0&&Array.isArray(a[0])?l=a.map((d,f)=>new El(c,d,this,kn(e),n,this.name,f)):l=new El(c,a,this,kn(e),n,this.name),this.addInboundNode(e,l,null,null,i,a,n),this._refCount++,this.activityRegularizer!=null)throw new Ht("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return l}})}warnOnIncompatibleInputShape(e){if(this.batchInputShape!=null)if(e.length!==this.batchInputShape.length)console.warn(`The rank of the input tensor provided (shape: ${JSON.stringify(e)}) does not match that of the batchInputShape (${JSON.stringify(this.batchInputShape)}) of the layer ${this.name}`);else{let n=!1;this.batchInputShape.forEach((r,s)=>{r!=null&&e[s]!=null&&e[s]!==r&&(n=!0)}),n&&console.warn(`The shape of the input tensor (${JSON.stringify(e)}) does not match the expectation of layer ${this.name}: ${JSON.stringify(this.batchInputShape)}`)}}get outputShape(){if(this.inboundNodes==null||this.inboundNodes.length===0)throw new nl(`The layer ${this.name} has never been called and thus has no defined output shape.`);const e=[];for(const n of this.inboundNodes){const r=JSON.stringify(n.outputShapes);e.indexOf(r)===-1&&e.push(r)}if(e.length===1){const n=this.inboundNodes[0].outputShapes;return Array.isArray(n)&&Array.isArray(n[0])&&n.length===1?n[0]:n}else throw new nl(`The layer ${this.name} has multiple inbound nodes with different output shapes. Hence the notion of "output shape" is ill-defined for the layer.`)}countParams(){if(!this.built)throw new qi(`You tried to call countParams() on ${this.name}, but the layer is not built yet. Build it first by calling build(batchInputShape).`);return jb(this.weights)}build(e){this.built=!0}getWeights(e=!1){return mI(e?this.trainableWeights:this.weights)}setWeights(e){we(()=>{const n=this.weights;if(n.length!==e.length)throw new de(`You called setWeights(weights) on layer "${this.name}" with a weight list of length ${e.length}, but the layer was expecting ${n.length} weights. Provided weights: ${e}...`);if(n.length===0)return;const r=[],s=mI(n);for(let o=0;o<s.length;++o){const i=s[o],a=n[o],l=e[o];if(!nn(i.shape,l.shape))throw new de(`Layer weight shape ${i.shape} not compatible with provided weight shape ${l.shape}`);r.push([a,l])}SR(r)})}addWeight(e,n,r,s,o,i,a,l){if(this._addedWeightNames.indexOf(e)!==-1)throw new de(`Duplicate weight name ${e} for layer ${this.name}`);this._addedWeightNames.push(e),r==null&&(r="float32"),this.fastWeightInitDuringBuild&&(s=l!=null?l():sr("zeros"));const c=s.apply(n,r),d=new Gme(c,r,e,i,a);return c.dispose(),o!=null&&this.addLoss(()=>o.apply(d.read())),i==null&&(i=!0),i?this._trainableWeights.push(d):this._nonTrainableWeights.push(d),d}setFastWeightInitDuringBuild(e){this.fastWeightInitDuringBuild=e}addLoss(e){e==null||Array.isArray(e)&&e.length===0||(e=kn(e),this._losses!==void 0&&this._losses!==null&&this.losses.push(...e))}computeOutputShape(e){return e}computeMask(e,n){if(!this.supportsMasking){if(n!=null)if(Array.isArray(n))n.forEach(r=>{if(r!=null)throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`)});else throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`);return null}return n}setMaskMetadata(e,n,r){if(!this.supportsMasking)return;const s=this.computeMask(e,r),o=kn(n),i=kn(s);if(o.length!==i.length)throw new Error(`${this.name} outputs ${o.length} tensors but ${o.length} masks for those tensors`);for(let a=0;a<o.length;a++)o[a].kerasMask=i[a]}addInboundNode(e,n,r,s,o,i,a=null){const l=kn(e);n=kn(n),r=kn(r),s=kn(s),o=Bb(o),i=Bb(i);const c=[],d=[],f=[];for(const p of l)c.push(p.sourceLayer),d.push(p.nodeIndex),f.push(p.tensorIndex);new O2({outboundLayer:this,inboundLayers:c,nodeIndices:d,tensorIndices:f,inputTensors:l,outputTensors:n,inputMasks:r,outputMasks:s,inputShapes:o,outputShapes:i},a);for(let p=0;p<n.length;p++)n[p].sourceLayer=this,n[p].nodeIndex=this.inboundNodes.length-1,n[p].tensorIndex=p}getConfig(){const e={name:this.name,trainable:this.trainable};return this.batchInputShape!=null&&(e.batchInputShape=this.batchInputShape),this.dtype!=null&&(e.dtype=this.dtype),e}disposeWeights(){return this.weights.forEach(e=>e.dispose()),this.weights.length}assertNotDisposed(){if(this._refCount===0)throw new Error(`Layer '${this.name}' is already disposed.`)}dispose(){if(!this.built)throw new Error(`Cannot dispose Layer ${this.name} because it has not been built yet.`);if(this._refCount===null)throw new Error(`Cannot dispose Layer ${this.name} because it has not been used yet.`);this.assertNotDisposed();let e=0;return--this._refCount===0&&(e=this.disposeWeights()),{refCountAfterDispose:this._refCount,numDisposedVariables:e}}}function Yme(t){t=kn(t);const e=[];for(const n of t)e.push(n.shape);return go(e)}function Zme(t){return"float32"}function p7(t,e,n){if((e==null||n!=null&&n>0)&&(e=t.sourceLayer,n=t.nodeIndex),e.inboundNodes.length===0)return[t];{const r=e.inboundNodes[n];if(r.inboundLayers.length===0)return r.inputTensors;{const s=[];for(let o=0;o<r.inboundLayers.length;o++){const i=r.inputTensors[o],a=r.inboundLayers[o],l=r.nodeIndices[o],c=p7(i,a,l);for(const d of c)s.indexOf(d)===-1&&s.push(d)}return s}}}function Qme(t){let e=!0;for(const n of kn(t))if(!(n instanceof El)){e=!1;break}return e}function Jme(t){let e=!0;for(const n of kn(t))if(n instanceof El){e=!1;break}return e}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class B1 extends Qt{constructor(e){if(super({dtype:e.dtype,name:e.name!=null?e.name:D2("input").toString()}),e.batchSize==null&&(e.batchSize=null),e.sparse==null&&(e.sparse=!1),this.trainable=!1,this.built=!0,this.sparse=e.sparse,e.inputShape!=null&&e.batchInputShape!=null)throw new de("Only provide the inputShape OR batchInputShape argument to inputLayer, not both at the same time.");let n=e.batchInputShape;if(n==null){if(e.inputShape==null)throw new de("An InputLayer should be passed either a `batchInputShape` or an `inputShape`.");n=[e.batchSize].concat(e.inputShape)}else if(e.batchSize!=null)throw new de("Cannot specify batchSize if batchInputShape is specified when creating an InputLayer.");const r=e.dtype||"float32";this.batchInputShape=n,this.dtype=r,this.inputSpec=[{shape:n}];const s=new El(this.dtype,this.batchInputShape,this,[],{},this.name);s.nodeIndex=0,s.tensorIndex=0,new O2({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:[s],outputTensors:[s],inputMasks:[null],outputMasks:[null],inputShapes:[n],outputShapes:[n]})}apply(e,n){throw new de(`Cannot pass any input to an InputLayer's apply() method. InputLayer name: ${this.name}`)}dispose(){return{refCountAfterDispose:this._refCount,numDisposedVariables:0}}getConfig(){return{batchInputShape:this.batchInputShape,dtype:this.dtype,sparse:this.sparse,name:this.name}}}B1.className="InputLayer";qe(B1);function ege(t){if(t.batchShape==null&&t.shape==null)throw new Error("Please provide to Input either a `shape` or a `batchShape` argument. Note that `shape` does not include the batch dimension.");if(t.batchShape!=null&&t.shape!=null)throw new de("Please provide either a `shape` or `batchShape` argument to Input, but not both.");let e=t.batchShape;t.shape!=null&&e==null&&(e=[null].concat(t.shape));let n=t.dtype;return n==null&&(n="float32"),new B1({batchInputShape:e,name:t.name,dtype:n,sparse:t.sparse}).inboundNodes[0].outputTensors[0]}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function tge(t,e){if(t.dtype==null||t.dtype===e.dtype)return e;try{return nt(e,t.dtype)}catch{throw new de(`The dtype of the feed (${e.dtype}) can not be cast to the dtype of the key '${t.name}' (${t.dtype}).`)}}class Hc{constructor(e){if(this.id2Value={},this.id2Mask={},this.name2Id={},e instanceof Hc)for(const n in e.id2Value)this.id2Value[n]=e.id2Value[n],n in e.id2Mask&&(this.id2Mask[n]=e.id2Mask[n]);else{if(e==null)return;for(const n of e)this.add(n.key,n.value)}}add(e,n,r){if(this.id2Value[e.id]==null)this.id2Value[e.id]=tge(e,n),this.name2Id[e.name]=e.id,r!=null&&(this.id2Mask[e.id]=r);else throw new de(`Duplicate key: name=${e.name}, id=${e.id}`);return this}addFeed(e){this.add(e.key,e.value)}hasKey(e){return this.id2Value[e.id]!=null}names(){return Object.keys(this.name2Id)}getValue(e){if(e instanceof El){if(this.id2Value[e.id]==null)throw new de(`Nonexistent key: ${e.name}`);return this.id2Value[e.id]}else{const n=this.name2Id[e];if(n==null)throw new de(`Feed dict has no SymbolicTensor name: ${e}`);return this.id2Value[n]}}getMask(e){if(e instanceof El){if(this.id2Value[e.id]==null)throw new de(`Nonexistent key: ${e.name}`);return this.id2Mask[e.id]}else{const n=this.name2Id[e];if(n==null)throw new de(`Feed dict has no SymbolicTensor name: ${e}`);return this.id2Mask[n]}}disposeMasks(){this.id2Mask!=null&&Yt(this.id2Mask)}}const zb=new Zj,Vb=new Zj;function nge(t){zb!=null&&zb.setMaxEntries(t),Vb!=null&&Vb.setMaxEntries(t)}function Gm(t,e,n,r){const s=n==null?!1:n.training,o=Array.isArray(t),i=o?t:[t],a=i.map(x=>x.name),l=[],c=e.names();for(const x of a)c.indexOf(x)!==-1?l.push(e.getValue(x)):l.push(null);const d=a.join(",")+"|"+e.names().sort().join(",");let f=zb.get(d),p;if(f==null){const x=rge(i,e);f=x.sorted,p=x.recipientCounts,zb.put(d,f),Vb.put(d,p)}p={},s||Object.assign(p,Vb.get(d));const g=new Hc(e);for(let x=0;x<f.length;++x){const b=f[x],w=b.sourceLayer;if(w instanceof B1)continue;const C=[],N=[],k=[];let I=!1;for(const M of b.inputs){const _=g.getValue(M),V=g.getMask(M);C.push(_),N.push(V),V!=null&&(I=!0),s||(p[M.name]--,p[M.name]===0&&!e.hasKey(M)&&a.indexOf(M.name)===-1&&!_.isDisposed&&M.sourceLayer.stateful!==!0&&k.push(_))}I&&(n=n||{},n.mask=N[0]);const R=kn(w.apply(C,n));let $=null;w.supportsMasking&&($=w.computeMask(C,N));const O=oge(b),F=Array.isArray(O)?O:[O];for(let M=0;M<F.length;++M){g.hasKey(F[M])||g.add(F[M],R[M],Array.isArray($)?$[0]:$);const _=a.indexOf(F[M].name);_!==-1&&(l[_]=R[M])}s||Yt(k)}return g.disposeMasks(),o?l:l[0]}function rge(t,e){Y(t!=null&&t.length>0,()=>"Expected at least one fetch, got none");let n=[],r={};if(t.length===1){const s=a_(t[0],e);n=s.sorted,r=s.recipientMap}else{const s=new Set;for(const o of t){const{sorted:i,recipientMap:a}=a_(o,e);for(const l of i)s.has(l.name)||(n.push(l),s.add(l.name));for(const l in a)r[l]==null&&(r[l]=new Set),a[l].forEach(c=>r[l].add(c))}}return{sorted:n,recipientCounts:sge(r)}}function sge(t){const e={};for(const n in t)e[n]=t[n].size;return e}function a_(t,e){const n=new Set,r=[],s={};for(const a of e.names())n.add(a);const o=[],i=[];for(o.push(t);o.length>0;){const a=o[o.length-1];if(n.has(a.name)){o.pop();continue}const l=i[i.length-1]===o.length-1;if(a.inputs.length===0||l)o.pop(),r.push(a),n.add(a.name),l&&i.pop();else{i.push(o.length-1);for(const c of a.inputs)s[c.name]==null&&(s[c.name]=new Set),s[c.name].add(a.name),!n.has(c.name)&&o.push(c)}}return{sorted:r,recipientMap:s}}function oge(t){let e;if(t.sourceLayer.inboundNodes.length===1)e=t.sourceLayer.output;else{let n=null;for(let r=0;r<t.sourceLayer.inboundNodes.length;++r)for(const s of t.sourceLayer.inboundNodes[r].outputTensors)if(s.id===t.id){n=r;break}e=t.sourceLayer.getOutputAt(n)}return e}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ige=Ee();ige.registerFlag("TOPOLOGICAL_SORT_CACHE_MAX_ENTRIES",()=>100,nge);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function NR(t,e){return we(()=>Ns(bt(ie(t,t),e,!0)))}class j1 extends _p{getConfig(){return{}}}class m7 extends j1{constructor(e){super(),this.defaultMaxValue=2,this.defaultAxis=0,this.maxValue=e.maxValue!=null?e.maxValue:this.defaultMaxValue,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return we(()=>{const n=NR(e,this.axis),r=Ko(n,0,this.maxValue);return ie(e,mt(r,Ue(Xr(),n)))})}getConfig(){return{maxValue:this.maxValue,axis:this.axis}}}m7.className="MaxNorm";qe(m7);class g7 extends j1{constructor(e){super(),this.defaultAxis=0,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return we(()=>mt(e,Ue(Xr(),NR(e,this.axis))))}getConfig(){return{axis:this.axis}}}g7.className="UnitNorm";qe(g7);class x7 extends j1{apply(e){return $l(e)}}x7.className="NonNeg";qe(x7);class y7 extends j1{constructor(e){super(),this.defaultMinValue=0,this.defaultMaxValue=1,this.defaultRate=1,this.defaultAxis=0,this.minValue=e.minValue!=null?e.minValue:this.defaultMinValue,this.maxValue=e.maxValue!=null?e.maxValue:this.defaultMaxValue,this.rate=e.rate!=null?e.rate:this.defaultRate,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return we(()=>{const n=NR(e,this.axis),r=Ue(ie(this.rate,Ko(n,this.minValue,this.maxValue)),ie(1-this.rate,n));return ie(e,mt(r,Ue(Xr(),n)))})}getConfig(){return{minValue:this.minValue,maxValue:this.maxValue,rate:this.rate,axis:this.axis}}}y7.className="MinMaxNorm";qe(y7);const l_={maxNorm:"MaxNorm",minMaxNorm:"MinMaxNorm",nonNeg:"NonNeg",unitNorm:"UnitNorm"};function Qr(t){return hR(t)}function c_(t,e={}){return P1(t,Bi.getMap().classNameMap,e,"constraint")}function Jr(t){if(t==null)return null;if(typeof t=="string"){const n={className:t in l_?l_[t]:t,config:{}};return c_(n)}else return t instanceof j1?t:c_(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */async function Ku(t){if(t==null)return;const e=[],n=[],r=[];for(const s in t){const o=t[s];if(typeof o!="number"){const i=o;e.push(i.data()),n.push(s),r.push(i)}}if(e.length>0){const s=await Promise.all(e);for(let o=0;o<s.length;++o)t[n[o]]=s[o][0];Yt(r)}}function b7(t){if(t!=null)for(const e in t){const n=t[e];typeof n!="number"&&n.dispose()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */var u_;(function(t){t[t.SILENT=0]="SILENT",t[t.VERBOSE=1]="VERBOSE"})(u_||(u_={}));const age=125;class Qg{constructor(){this.validationData=null}setParams(e){this.params=e}async onEpochBegin(e,n){}async onEpochEnd(e,n){}async onBatchBegin(e,n){}async onBatchEnd(e,n){}async onTrainBegin(e){}async onTrainEnd(e){}setModel(e){}}class lge{constructor(e,n=10){e==null&&(e=[]),this.callbacks=e,this.queueLength=n}append(e){this.callbacks.push(e)}setParams(e){for(const n of this.callbacks)n.setParams(e)}setModel(e){for(const n of this.callbacks)n.setModel(e)}async onEpochBegin(e,n){n==null&&(n={});for(const r of this.callbacks)await r.onEpochBegin(e,n)}async onEpochEnd(e,n){n==null&&(n={});for(const r of this.callbacks)await r.onEpochEnd(e,n)}async onBatchBegin(e,n){n==null&&(n={});for(const r of this.callbacks)await r.onBatchBegin(e,n)}async onBatchEnd(e,n){n==null&&(n={});for(const r of this.callbacks)await r.onBatchEnd(e,n)}async onTrainBegin(e){e==null&&(e={});for(const n of this.callbacks)await n.onTrainBegin(e)}async onTrainEnd(e){e==null&&(e={});for(const n of this.callbacks)await n.onTrainEnd(e)}}class cge extends Qg{constructor(){super()}async onEpochBegin(e){this.seen=0,this.totals={}}async onBatchEnd(e,n){n==null&&(n={});const r=n.size==null?0:n.size;this.seen+=r;for(const s in n){const o=n[s];if(typeof o=="number")this.totals.hasOwnProperty(s)||(this.totals[s]=0),this.totals[s]=this.totals[s]+o*r;else{let i;s in this.totals?i=this.totals[s]:this.totals[s]=0;const a=we(()=>Ue(this.totals[s],ie(o,r)));this.totals[s]=a,i!=null&&i.dispose()}}}async onEpochEnd(e,n){if(n!=null)for(const r of this.params.metrics)this.totals[r]!=null&&(typeof this.totals[r]=="number"?n[r]=this.totals[r]/this.seen:we(()=>{const s=ie(mt(1,this.seen),this.totals[r]);n[r]=s,this.totals[r].dispose(),ls(n[r])}))}}class uge extends Qg{async onTrainBegin(e){this.epoch=[],this.history={}}async onEpochEnd(e,n){n==null&&(n={}),this.epoch.push(e);for(const r in n)this.history[r]==null&&(this.history[r]=[]),this.history[r].push(n[r])}async syncData(){const e=[],n=[],r=[];for(const o in this.history){const i=this.history[o];for(let a=0;a<i.length;++a)if(typeof i[a]!="number"){const l=i[a];e.push(l.data()),n.push(o),r.push(a)}}const s=await Promise.all(e);for(let o=0;o<s.length;++o)this.history[n[o]][r[o]].dispose(),this.history[n[o]][r[o]]=s[o][0]}}class dge extends Qg{constructor(e,n){if(super(),this.currentEpoch=0,this.nowFunc=e.nowFunc,this.nextFrameFunc=e.nextFrameFunc||Nj,this.yieldEvery=n||"auto",this.yieldEvery==="auto"&&(this.yieldEvery=age),this.yieldEvery==="never"&&e.onYield!=null)throw new Error("yieldEvery is `never` but you provided an `onYield` callback. Either change `yieldEvery` or remove the callback");jE(this.yieldEvery)&&(this.maybeWait=Nme(this.maybeWait.bind(this),this.yieldEvery,this.nowFunc)),this.trainBegin=e.onTrainBegin,this.trainEnd=e.onTrainEnd,this.epochBegin=e.onEpochBegin,this.epochEnd=e.onEpochEnd,this.batchBegin=e.onBatchBegin,this.batchEnd=e.onBatchEnd,this.yield=e.onYield}async maybeWait(e,n,r){const s=[];this.yield!=null&&(await Ku(r),s.push(this.yield(e,n,r))),s.push(this.nextFrameFunc()),await Promise.all(s)}async onEpochBegin(e,n){this.currentEpoch=e,this.epochBegin!=null&&(await Ku(n),await this.epochBegin(e,n))}async onEpochEnd(e,n){const r=[];this.epochEnd!=null&&(await Ku(n),r.push(this.epochEnd(e,n))),this.yieldEvery==="epoch"&&r.push(this.nextFrameFunc()),await Promise.all(r)}async onBatchBegin(e,n){this.batchBegin!=null&&(await Ku(n),await this.batchBegin(e,n))}async onBatchEnd(e,n){const r=[];this.batchEnd!=null&&(await Ku(n),r.push(this.batchEnd(e,n))),this.yieldEvery==="batch"?r.push(this.nextFrameFunc()):jE(this.yieldEvery)&&r.push(this.maybeWait(this.currentEpoch,e,n)),await Promise.all(r)}async onTrainBegin(e){this.trainBegin!=null&&(await Ku(e),await this.trainBegin(e))}async onTrainEnd(e){this.trainEnd!=null&&(await Ku(e),await this.trainEnd(e))}}function w7(t,e){return t==null&&(t={}),t instanceof Qg?[t]:Array.isArray(t)&&t[0]instanceof Qg?t:kn(t).map(r=>new dge(r,e))}class $i{constructor(){}static registerCallbackConstructor(e,n){Y(e>=0&&Number.isInteger(e),()=>`Verbosity level is expected to be an integer >= 0, but got ${e}`),$i.checkForDuplicate(n),$i.constructors[e]==null&&($i.constructors[e]=[]),$i.constructors[e].push(n)}static checkForDuplicate(e){for(const n in $i.constructors)$i.constructors[+n].forEach(s=>{if(s===e)throw new de("Duplicate callback constructor.")})}static clear(){$i.constructors={}}static createCallbacks(e){const n=[];for(const r in $i.constructors){const s=+r;e>=s&&n.push(...$i.constructors[s])}return n.map(r=>new r)}}$i.constructors={};function v7(t,e,n,r,s,o,i,a,l){const c=new uge,d=[new cge,...$i.createCallbacks(e)];t!=null&&d.push(...t),d.push(c);const f=new lge(d);return f.setParams({epochs:n,initialEpoch:r,samples:s,steps:o,batchSize:i,verbose:e,doValidation:a,metrics:l}),{callbackList:f,history:c}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Ql(t,e={},n=!1){return P1(t,Bi.getMap().classNameMap,e,"layer",n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Wb(t,e){return we(()=>{t.dtype!=="float32"&&(t=nt(t,"float32"));const n=bt(M1(t),e,!0),r=Rp(n.shape,Xr()),s=Ns(gc(n,r));return mt(t,s)})}function _2(t,e){return we(()=>gr(M1(lt(e,t)),-1))}function ER(t,e){return we(()=>gr(Ur(lt(e,t)),-1))}function IR(t,e){return we(()=>{const n=lt(t,e),r=Ko(Ur(t),Xr(),Number.MAX_VALUE),s=Ur(mt(n,r));return ie(100,gr(s,-1))})}function fge(t,e){return we(()=>{const n=Ko(e,Xr(),Number.MAX_VALUE),r=xi(Ue(1,n)),s=Ko(t,Xr(),Number.MAX_VALUE),o=xi(Ue(1,s));return gr(M1(lt(r,o)),-1)})}function hge(t,e){return we(()=>{const n=gc(0,lt(1,ie(t,e)));return gr(M1(n),-1)})}function pge(t,e){return we(()=>{const n=gc(0,lt(1,ie(t,e)));return gr(n,-1)})}function mge(t,e){return we(()=>{const n=bt(ie(t,e),-1),r=Zi(ie(lt(1,t),e),-1);return gc(0,Ue(1,lt(r,n)))})}function gge(t,e){return we(()=>{const n=Math.log(2),r=lt(e,t),s=lt(Ue(r,Dp(ie(-2,r))),n);return gr(s,-1)})}function Jg(t,e,n=!1){return we(()=>{if(n)e=w2(e);else{const r=bt(e,e.shape.length-1,!0);e=mt(e,r)}return e=Ko(e,Xr(),1-Xr()),Jn(bt(ie(nt(t,"float32"),xi(e)),e.shape.length-1))})}function Ub(t,e,n=!1){return we(()=>{const r=nt(R1(Fme(t)),"int32");e=Ko(e,Xr(),1-Xr());const s=e.shape,o=ce(a3(r,s[s.length-1]),s);return Jg(o,e,n)})}function xge(t,e){if(!nn(t.shape,e.shape))throw new de(`logits and labels must have the same shape, but got shapes ${JSON.stringify(t.shape)} and ${JSON.stringify(e.shape)}`);return we(()=>{const n=$l(e),r=Jn(Ur(e));return Ue(lt(n,ie(e,t)),d2(Yo(r)))})}function P2(t,e){return we(()=>{let n;return n=Ko(e,Xr(),1-Xr()),n=xi(mt(n,lt(1,n))),gr(xge(t,n),-1)})}function yge(t,e){return we(()=>{const n=Ko(t,Xr(),1),r=Ko(e,Xr(),1);return bt(ie(t,xi(mt(n,r))),-1)})}function bge(t,e){return we(()=>{const n=xi(Ue(Xr(),e));return gr(lt(e,ie(t,n)),-1)})}function C7(t,e){return we(()=>{const n=Wb(t,-1),r=Wb(e,-1),s=ie(n,r);return Jn(bt(s,-1))})}const Hb={meanSquaredError:_2,meanAbsoluteError:ER,meanAbsolutePercentageError:IR,meanSquaredLogarithmicError:fge,squaredHinge:hge,hinge:pge,categoricalHinge:mge,logcosh:gge,categoricalCrossentropy:Jg,sparseCategoricalCrossentropy:Ub,binaryCrossentropy:P2,kullbackLeiblerDivergence:yge,poisson:bge,cosineProximity:C7};function sN(t){if(typeof t=="string"){if(t in Hb)return Hb[t];let e=`Unknown loss ${t}`;throw t.toLowerCase().includes("softmaxcrossentropy")&&(e=`Unknown loss ${t}. Use "categoricalCrossentropy" as the string name for tf.losses.softmaxCrossEntropy`),new de(e)}else return t}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function S7(t,e){return we(()=>{const n=ie(.5,yi(e)),r=yl(ri(e,n),t.dtype);return gr(Oa(t,r),-1)})}function N7(t,e){return we(()=>yl(Oa(Kh(t,-1),Kh(e,-1)),"float32"))}function wge(t,e){return we(()=>nt(bt(Nl(Oa(t,1),Oa(e,1))),"float32"))}function vge(t,e){return we(()=>nt(bt(Nl(Oa(t,0),Oa(e,1))),"float32"))}function Cge(t,e){return we(()=>{const n=wge(t,e),r=vge(t,e),s=Ue(n,r);return nt(js(ri(s,0),mt(n,s),0),"float32")})}function Sge(t,e){return P2(t,e)}function Nge(t,e){return t.rank===e.rank&&(t=Aa(t,[t.rank-1])),e=Kh(e,-1),e.dtype!==t.dtype&&(e=nt(e,t.dtype)),nt(Oa(t,e),"float32")}const Ege=_2,Ige=_2,kge=ER,Tge=ER,Age=IR,Rge=IR,E7=Jg,Dge=C7,I7=Ub,Gb={binaryAccuracy:S7,categoricalAccuracy:N7,precision:Cge,categoricalCrossentropy:E7,sparseCategoricalCrossentropy:I7,mse:Ege,MSE:Ige,mae:kge,MAE:Tge,mape:Age,MAPE:Rge,cosine:Dge};function $ge(t){if(typeof t=="string"&&t in Gb)return Gb[t];if(typeof t!="string"&&t!=null)return t;throw new de(`Unknown metric ${t}`)}function Xx(t){if(rl(t!==null,`Unknown LossOrMetricFn ${t}`),typeof t=="string")return t;{let e;for(const n of Object.keys(Hb))if(Hb[n]===t){e=n;break}if(e!==void 0)return e;for(const n of Object.keys(Gb))if(Gb[n]===t){e=n;break}return e!==void 0?e:t.name}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Oge(t){const e={Adagrad:()=>Pf.adagrad(.01),Adadelta:()=>Pf.adadelta(1,.95,Xr()),Adam:()=>Pf.adam(.001,.9,.999,Xr()),Adamax:()=>Pf.adamax(.002,.9,.999,Xr(),0),RMSProp:()=>Pf.rmsprop(.001,.9,0,Xr()),SGD:()=>Pf.sgd(.01)};if(e.adagrad=e.Adagrad,e.adadelta=e.Adadelta,e.adam=e.Adam,e.adamax=e.Adamax,e.rmsprop=e.RMSProp,e.sgd=e.SGD,t in e)return e[t]();throw new de(`Unknown Optimizer ${t}`)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const d_=1*1024*1024;function f_(t,e,n=!1){if(t==null||typeof t!="object"||Object.getPrototypeOf(t)!==Object.prototype||!gI(t))throw new Error("User-defined metadata is expected to be a JSON object, but is not.");if(n){const r=JSON.stringify(t);r.length>d_&&console.warn(`User-defined metadata of model "${e}" is too large in size (length=${r.length} when serialized). It is not recommended to store such large objects in user-defined metadata. Please make sure its serialized length is <= ${d_}.`)}}function gI(t){if(t===null)return!0;if(typeof t=="object")if(Object.getPrototypeOf(t)===Object.prototype){const e=Object.keys(t);for(const n of e)if(typeof n!="string"||!gI(t[n]))return!1;return!0}else if(Array.isArray(t)){for(const e of t)if(!gI(e))return!1;return!0}else return!1;else{const e=typeof t;return e==="string"||e==="number"||e==="boolean"}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function _ge(t,e,n,r=console.log){const s=Fge(t),o=["Layer (type)","Input Shape","Output shape","Param #"];s?(e=e||90,n=n||[.32,.61,.89,1]):(e=e||115,n=n||[.24,.48,.7,.8,1]),n[n.length-1]<=1&&(n=n.map(d=>Math.floor(e*d)));let i;if(!s){o.push("Receives inputs"),i=[];for(const d in t.nodesByDepth)i.push(...t.nodesByDepth[d])}r("_".repeat(e)),qb(o,n,r),r("=".repeat(e));const a=t.layers;for(let d=0;d<a.length;++d)s?Mge(a[d],n,r):Lge(a[d],n,i,r),r((d===a.length-1?"=":"_").repeat(e));t.checkTrainableWeightsConsistency();const l=Pge(t),c=jb(t.nonTrainableWeights);r(`Total params: ${l+c}`),r(`Trainable params: ${l}`),r(`Non-trainable params: ${c}`),r("_".repeat(e))}function Pge(t){let e;return t.collectedTrainableWeights!=null?e=jb(t.collectedTrainableWeights):e=jb(t.trainableWeights),e}function Fge(t){let e=!0;const n=[],r=[];for(const s in t.nodesByDepth)n.push(t.nodesByDepth[s]);for(const s of n){if(s.length>1||s.length===1&&s[0].inboundLayers.length>1){e=!1;break}r.push(...s)}if(e)for(const s of t.layers){let o=!1;for(const i of s.inboundNodes)if(r.indexOf(i)!==-1)if(o){e=!1;break}else o=!0;if(!e)break}return e}function qb(t,e,n=console.log){let r="";for(let s=0;s<t.length;++s)s>0&&(r=r.slice(0,r.length-1)+" "),r+=t[s],r=r.slice(0,e[s]),r+=" ".repeat(e[s]-r.length);n(r)}function Mge(t,e,n){let r,s;try{s=t.inboundNodes.map(l=>JSON.stringify(l.inputShapes)).join(",")}catch{s="multiple"}try{r=JSON.stringify(t.outputShape)}catch{r="multiple"}const o=t.name,i=t.getClassName(),a=[`${o} (${i})`,s,r,t.countParams().toString()];qb(a,e,n)}function Lge(t,e,n,r){let s,o;try{o=t.inboundNodes.map(f=>JSON.stringify(f.inputShapes)).join(",")}catch{o="multiple"}try{s=JSON.stringify(t.outputShape)}catch{s="multiple"}const i=[];for(const f of t.inboundNodes)if(!(n!=null&&n.length>0&&n.indexOf(f)===-1))for(let p=0;p<f.inboundLayers.length;++p){const g=f.inboundLayers[p].name,x=f.nodeIndices[p],b=f.tensorIndices[p];i.push(`${g}[${x}][${b}]`)}const a=t.name,l=t.getClassName(),c=i.length===0?"":i[0],d=[`${a} (${l})`,o,s,t.countParams().toString(),c];qb(d,e,r);for(let f=1;f<i.length;++f)qb(["","","","",i[f]],e,r)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function k7(t,e,n){return(t==="inboundNodes"||t==="outputLayers"||t==="inputLayers")&&e===0&&typeof n=="string"}function xI(t,e){if(t===null)return null;if(typeof t=="string")return ud(t);if(typeof t=="number"||typeof t=="boolean")return t;if(t instanceof Array){const n=[],r=t.length;for(let s=0;s<r;++s){const o=t[s];k7(e,s,o)?n.push(o):n.push(xI(o,e))}return n}else{const n={};for(const r of Object.keys(t)){const s=t[r];if(r==="name"&&typeof s=="string")n[r]=s;else{const o=ud(r);n[o]=xI(s,o)}}return n}}function yI(t,e){if(t==null)return null;if(typeof t=="string")return jl(t);if(typeof t=="number"||typeof t=="boolean")return t;if(t instanceof Array){const n=[],r=t.length;for(let s=0;s<r;++s){const o=t[s];k7(e,s,o)?n.push(o):n.push(yI(o,e))}return n}else{const n={};for(const r of Object.keys(t)){const s=t[r],o=jl(r);(r==="name"||r==="className")&&typeof s=="string"?n[o]=s:n[o]=yI(s,r)}return n}}/** @license See the LICENSE file. */const T7="4.22.0";/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const Bge=t=>{const e=Object.keys(t);if(e.length===0)return!1;const n=e[0].split("/");return!isNaN(parseInt(n[n.length-1],10))};class ga extends Qt{constructor(e){if(super({}),this.containerNodes=new Set,this.name=e.name,this.name==null){const N=this.getClassName().toLowerCase();this.name=D2(N)}if(this.supportsMasking=!1,this.trainable_=!0,Array.isArray(e.inputs)?this.inputs=e.inputs.slice():this.inputs=[e.inputs],Array.isArray(e.outputs)?this.outputs=e.outputs.slice():this.outputs=[e.outputs],ou(this.inputs).length!==this.inputs.length)throw new de(`The list of inputs passed to the model is redundant. All inputs should only appear once. Found: ${this.inputs.map(N=>N.name)}`);ou(this.outputs).length!==this.outputs.length&&console.warn(`The list of outputs passed to the model is redundant. All outputs should only appear once. Found: ${this.outputs.map(N=>N.name)}`),this.inputLayers=[],this.inputLayersNodeIndices=[],this.inputLayersTensorIndices=[],this.outputLayers=[],this.outputLayersNodeIndices=[],this.outputLayersTensorIndices=[],this.layers=[],this.internalContainerRefs=[];for(const N of this.outputs){const k=N.sourceLayer,I=N.nodeIndex,R=N.tensorIndex;this.outputLayers.push(k),this.outputLayersNodeIndices.push(I),this.outputLayersTensorIndices.push(R)}for(const N of this.inputs){const k=N.sourceLayer,I=N.nodeIndex,R=N.tensorIndex;rl(I===0,"input layer has >1 nodes"),rl(R===0,"input layer has >1 tensors"),this.inputLayers.push(k),this.inputLayersNodeIndices.push(I),this.inputLayersTensorIndices.push(R)}this.inputNames=[],this.outputNames=[],this.feedInputShapes=[],this.feedInputNames=[],this.feedOutputNames=[];for(let N=0;N<this.inputLayers.length;N++){const k=this.inputLayers[N];if(!(k instanceof B1))throw new TypeError(`Input layers to a LayersModel must be InputLayer objects. Received inputs: ${e.inputs}. Input ${N} (0-based) originates from layer type ${k.getClassName()}.`);this.inputNames.push(k.name),this.feedInputShapes.push(k.batchInputShape),this.feedInputNames.push(k.name)}for(const N of this.outputLayers)this.outputNames.push(N.name);this.internalInputShapes=this.inputs.map(N=>N.shape),this.internalOutputShapes=this.outputs.map(N=>N.shape);const n={},r={},s={},o={},i={},a=[],l=(N,k,I,R,$,O)=>{(R==null||$==null||O==null)&&(R=N.sourceLayer,$=N.nodeIndex,O=N.tensorIndex);const F=R.inboundNodes[$];if(I.indexOf(F)!==-1)throw new qi(`The tensor ${N.name} at layer "${R.name}" is part of a cycle.`);if(k.indexOf(F)!==-1)return;this.containerNodes.add(ga.nodeKey(R,$)),R.id in i||(i[R.id]=Object.keys(i).length),I.indexOf(F)===-1&&I.push(F);const M=F.inboundLayers.length;for(let _=0;_<M;_++){const V=F.inputTensors[_],B=F.inboundLayers[_],W=F.nodeIndices[_],q=F.tensorIndices[_];l(V,k,I,B,W,q)}for(k.push(F);I.indexOf(F)>=0;)I.splice(I.indexOf(F),1);a.push(F)},c=[],d=[];for(const N of this.outputs)l(N,c,d);const f=a.slice().reverse();for(const N of f){r[N.id]=N,N.id in n||(n[N.id]=0);let k=n[N.id];const I=s[N.outboundLayer.id]==null?0:s[N.outboundLayer.id];k=Math.max(k,I),s[N.outboundLayer.id]=k,o[N.outboundLayer.id]=N.outboundLayer,n[N.id]=k;for(let R=0;R<N.inboundLayers.length;R++){const $=N.inboundLayers[R],O=N.nodeIndices[R],F=$.inboundNodes[O],M=n[F.id]==null?0:n[F.id];n[F.id]=Math.max(k+1,M),r[F.id]=F}}const p={};for(const N in n){const k=n[N];k in p||(p[k]=[]),p[k].push(r[N])}const g={};for(const N in s){const k=s[N];k in g||(g[k]=[]),g[k].push(o[N])}let x=Object.keys(g).map(N=>parseInt(N,10)).sort(Hx);this.layers=[];for(const N of x){const k=g[N];k.sort((I,R)=>{const $=i[I.id],O=i[R.id];return $<O?-1:$>O?1:0});for(const I of k)I instanceof ga&&this.internalContainerRefs.push(I),this.layers.push(I)}this.layersByDepth=g,x=Object.keys(p).map(N=>parseInt(N,10)).sort(Hx);const b=this.inputs.slice(),w=[];for(const N of x)for(const k of p[N]){const I=k.outboundLayer;if(I!=null){for(const R of k.inputTensors)if(b.indexOf(R)===-1)throw new qi(`Graph disconnected: cannot obtain value for tensor ${R} at layer "${I.name}". The following previous layers were accessed without issue: ${w}`);for(const R of k.outputTensors)b.push(R);w.push(I.name)}}this.nodesByDepth=p;const C=this.layers.map(N=>N.name);for(const N of C){const k=C.filter(I=>I===N).length;if(k!==1)throw new qi(`The name "${N}" is used ${k} times in the model. All layer names should be unique. Layer names: `+JSON.stringify(C))}this.outboundNodes=[],this.inboundNodes=[],new O2({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:this.inputs.map(N=>null),outputMasks:this.outputs.map(N=>null),inputShapes:this.inputs.map(N=>N.shape),outputShapes:this.outputs.map(N=>N.shape)}),this.built=!0,this._refCount=1}assertNotDisposed(){if(this._refCount===0)throw new Error(`Container '${this.name}' is already disposed.`)}dispose(){this.assertNotDisposed();const e={refCountAfterDispose:null,numDisposedVariables:0};if(--this._refCount===0){for(const n of this.layers)e.numDisposedVariables+=n.dispose().numDisposedVariables;for(const n of this.internalContainerRefs)e.numDisposedVariables+=n.dispose().numDisposedVariables}return e.refCountAfterDispose=this._refCount,e}get trainable(){return this.trainable_}set trainable(e){this.layers.forEach(n=>{n._trainableWeights.forEach(r=>r.trainable=e)}),this.trainable_=e}get trainableWeights(){if(this._trainableWeights.length>0)throw new de("Container instance unexpectedly contains _trainableWeights.The trainable weights of a Container are a union of the trainable weights of its consituent Layers. Its own _trainableWeights must remain an empty Array.");if(!this.trainable)return[];let e=[];for(const n of this.layers)e=e.concat(n.trainableWeights);return e}get nonTrainableWeights(){const e=[];for(const n of this.layers)e.push(...n.nonTrainableWeights);if(!this.trainable){const n=[];for(const r of this.layers)n.push(...r.trainableWeights);return n.concat(e)}return e}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}loadWeights(e,n=!0){const r={};let s=0;const o=Bge(e);o&&this.parseWeights(e);for(const a of this.layers)for(const[l,c]of a.weights.entries()){const d=o?`${c.name.split("/").slice(0,-1).join("/")+"/"}${l}`:c.originalName;if(r[d]!=null)throw new de(`Duplicate weight name: ${d}`);r[d]=c,s++}const i=[];for(const a in e){let l=a;if(r[a]==null){const c=a.split("/");l=c.slice(0,-2).concat([c[c.length-1]]).join("/")}if(r[l]!=null)i.push([r[l],e[a]]);else if(n)throw new de(`Provided weight data has no target variable: ${a}`);delete r[l]}if(n){const a=[];for(const l in r)a.push(l);if(a.length>0)throw new de(`${a.length} of ${s} weights are not set: ${a}`)}SR(i)}parseWeights(e){for(const n in Object.keys(e)){const r=n.split("/"),s=["vars","layer_checkpoint_dependencies"],o=r.map(i=>i.startsWith("_")?i.slice(1):i).filter(i=>!s.includes(i)).join("/");o!==n&&(e[o]=e[n],delete e[n])}}updatedConfig(){const e=this.getConfig(),n={};return n.className=this.getClassName(),n.config=e,n.kerasVersion=`tfjs-layers ${T7}`,n.backend="TensorFlow.js",n}toJSON(e,n=!0){const r=yI(this.updatedConfig());return n?JSON.stringify(r):r}call(e,n){return we(()=>{e=kn(e);const r=new Hc;for(let s=0;s<this.inputs.length;++s)r.add(this.inputs[s],e[s]);return Gm(this.outputs,r,n)})}computeMask(e,n){return we(()=>{e=kn(e);let r;return n==null?r=Xd(null,e.length):r=kn(n),this.runInternalGraph(e,r)[1]})}computeOutputShape(e){const n=Bb(e);if(n.length!==this.inputLayers.length)throw new de(`Invalid inputShape argument ${e}: model has ${this.inputLayers.length} tensor inputs.`);const r={};for(let a=0;a<n.length;a++){const l=this.inputLayers[a],c=n[a],d=l.name+"_0_0";r[d]=c}const s=Object.keys(this.nodesByDepth).map(a=>parseInt(a,10)).sort(Hx);if(s.length>1)for(const a of s){const l=this.nodesByDepth[a];for(const c of l){const d=c.outboundLayer;if(this.inputLayers.map(b=>b.id).indexOf(d.id)!==-1)continue;const f=[];for(let b=0;b<c.inboundLayers.length;b++){const w=c.inboundLayers[b],C=c.nodeIndices[b],N=c.tensorIndices[b],k=`${w.name}_${C}_${N}`,I=r[k];f.push(I)}const p=d.computeOutputShape(go(f)),g=Bb(p),x=d.inboundNodes.indexOf(c);for(let b=0;b<g.length;b++){const w=`${d.name}_${x}_${b}`;r[w]=g[b]}}}const o=[],i=[];for(let a=0;a<this.outputLayers.length;a++){const l=this.outputLayers[a],c=this.outputLayersNodeIndices[a],d=this.outputLayersTensorIndices[a],f=`${l.name}_${c}_${d}`;i.push(f)}for(let a=0;a<i.length;a++){const l=i[a];rl(l in r),o.push(r[l])}return go(o)}runInternalGraph(e,n){n==null&&(n=Xd(null,e.length));const r={};for(let l=0;l<this.inputs.length;++l){const c=this.inputs[l],d=e[l],f=n[l];r[c.id]=[d,f]}const s=Object.keys(this.nodesByDepth).map(l=>parseInt(l,10)).sort(Hx);for(const l of s){const c=this.nodesByDepth[l];for(const d of c){const f=d.outboundLayer,p=d.inputTensors,g=d.outputTensors,x=new Array;for(const b of p)b.id in r&&x.push(r[b.id]);if(x.length===p.length){let b={},w,C,N,k;if(d.callArgs!=null&&(b=d.callArgs),x.length===1){const[I,R]=x[0];b.mask==null&&(b.mask=R),N=kn(f.call(I,b)),k=kn(f.computeMask(I,R)),w=[I],C=[R]}else w=x.map(I=>I[0]),C=x.map(I=>I[1]),b.mask==null&&(b.mask=C),N=kn(f.call(w,b)),k=kn(f.computeMask(w,C));if(f.activityRegularizer)throw new Ht("LayersModel invocation with concrete Tensor value(s) in the presence of activity regularizer(s) is not supported yet.");for(let I=0;I<g.length;++I){const R=g[I],$=N[I],O=k[I];r[R.id]=[$,O]}}}}const o=[],i=[],a=[];for(const l of this.outputs){rl(l.id in r,`Could not compute output ${l.name} : ${l.id}`);const[c,d]=r[l.id];a.push(c.shape),o.push(c),i.push(d)}return[o,i,a]}buildNodeConversionMap(e){const n={};let r;for(const s of this.layers){r=s instanceof ga?1:0;for(let o=0;o<s.inboundNodes.length;o++){const i=ga.nodeKey(s,o);this.containerNodes.has(i)&&(n[i]=r,r+=1)}}return n}getLayer(e,n){if(n!=null)return this.findLayer(n);if(e==null)throw new de("Provide either a layer name or layer index");if(typeof e=="number")return this.findLayer(e);for(const r of this.layers)if(r.name===e)return r;throw new de(`No such layer: ${e}`)}findLayer(e){if(this.layers.length<=e)throw new de(`Was asked to retrieve layer at index ${e}, but model only has ${this.layers.length} layer(s).`);return this.layers[e]}calculateLosses(){return we(()=>{const e=[];for(const n of this.layers)for(let r=0;r<n.inboundNodes.length;++r){const s=ga.nodeKey(n,r);this.containerNodes.has(s)&&e.push(...n.calculateLosses())}return e})}getConfig(){const e={name:this.name},n=this.buildNodeConversionMap(this.layers),r=[];for(const i of this.layers){const a=i.getClassName(),l=i.getConfig(),c=[];for(let f=0;f<i.inboundNodes.length;f++){const p=i.inboundNodes[f],g=ga.nodeKey(i,f);let x={};if(this.containerNodes.has(g)){if(p.callArgs)try{JSON.stringify(p.callArgs),x=p.callArgs}catch{console.warn(`Layer ${i.name} was passed non-serializable keyword arguments: ${p.callArgs}. They will not be included in the serialized model (and thus will be missing at deserialization time).`),x={}}if(p.inboundLayers.length>0){const b=[];for(let w=0;w<p.inboundLayers.length;w++){const C=p.inboundLayers[w],N=p.nodeIndices[w],k=p.tensorIndices[w],I=ga.nodeKey(C,N);let R=n[I];R==null&&(R=0),b.push([C.name,R,k,x])}c.push(b)}}}const d={};d.name=i.name,d.className=a,d.config=l,d.inboundNodes=c,r.push(d)}e.layers=r;const s=[];for(let i=0;i<this.inputLayers.length;i++){const a=this.inputLayers[i],l=this.inputLayersNodeIndices[i],c=ga.nodeKey(a,l);if(!this.containerNodes.has(c))continue;let d=n[c];d==null&&(d=0);const f=this.inputLayersTensorIndices[i];s.push([a.name,d,f])}e.inputLayers=s;const o=[];for(let i=0;i<this.outputLayers.length;i++){const a=this.outputLayers[i],l=this.outputLayersNodeIndices[i],c=ga.nodeKey(a,l);if(!this.containerNodes.has(c))continue;let d=n[c];d==null&&(d=0);const f=this.outputLayersTensorIndices[i];o.push([a.name,d,f])}return e.outputLayers=o,e}static fromConfig(e,n,r={},s=!1){const o={},i={};function a(w,C){w.name in i?i[w.name].push(C):i[w.name]=[C]}function l(w,C){const N=[];let k;for(const I of C){const R=I[0],$=I[1],O=I[2];if(k=I[3]==null?{}:I[3],!(R in o)){a(w,C);return}const F=o[R];if(F.inboundNodes.length<=$){a(w,C);return}const M=F.inboundNodes[$];N.push(M.outputTensors[O])}N.length>0&&w.apply(go(N),k)}function c(w){const C=w.name,N=Ql(w,n.customObjects!=null?n.customObjects:{});N.setFastWeightInitDuringBuild(s),o[C]=N,w.inboundNodes.forEach(I=>{if(!(I instanceof Array))throw new de(`Corrupted configuration, expected array for nodeData: ${I}`);a(N,I)})}const d=n.name,f=n.layers;for(const w of f)c(w);for(;!Sme(i);)for(const w of f){const C=o[w.name];if(C.name in i){const N=i[C.name];delete i[C.name];for(const k of N)l(C,k)}}const p=[],g=[],x=n.inputLayers;for(const w of x){const C=w[0],N=w[1],k=w[2];rl(C in o);const R=o[C].inboundNodes[N].outputTensors;p.push(R[k])}const b=n.outputLayers;for(const w of b){const C=w[0],N=w[1],k=w[2];rl(C in o);const R=o[C].inboundNodes[N].outputTensors;g.push(R[k])}return new e({inputs:p,outputs:g,name:d})}get stateful(){if(this._stateful)throw new de("Container instance unexpectedly has _stateful = true. The statefulness of a Container is determined by the Layers it contains. Its _stateful property must remain the default false.");for(const e of this.layers)if(e.stateful)return!0;return!1}resetStates(){we(()=>{this.layers.forEach(e=>{e.stateful&&e.resetStates()})})}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function jge(t,e,n){const r=e.length;if(t==null||Array.isArray(t)&&t.length===0)return e.map(s=>null);if(r===1)return Array.isArray(t)&&t.length===1?t:typeof t=="object"&&e[0]in t?[t[e[0]]]:[t];if(Array.isArray(t)){if(t.length!==r)throw new Error(`Provided ${n} is an array of ${t.length} element(s), but the model has ${r} outputs. Make sure a set of weights is provided for each model output.`);return t}else if(typeof t=="object"&&Object.keys(t).length>0&&typeof t[Object.keys(t)[0]]=="object"){const s=[];return e.forEach(o=>{o in t?s.push(t[o]):s.push(null)}),s}else throw new Error(`The model has multiple (${r}) outputs, so ${n} must be either an array with ${r} elements or an object with ${e} keys. Provided ${n} not understood: ${JSON.stringify(t)}`)}function A7(t,e){return jge(t,e,"classWeight")}async function R7(t,e,n,r){if(n!=null){const s=we(()=>{if(t.shape.length===1)return Zl(t);if(t.shape.length===2){if(t.shape[1]>1)return Kh(t,1);if(t.shape[1]===1)return ce(t,[t.shape[0]]);throw new Error(`Encountered unexpected last-dimension size (${t.shape[1]}) during handling of class weights. The size is expected to be >= 1.`)}else throw new Error(`Unexpected rank of target (y) tensor (${t.rank}) during handling of class weights. The rank is expected to be 1 or 2.`)}),o=Array.from(await s.data());Yt(s);const i=[];return o.forEach(a=>{if(n[a]==null)throw new Error(`classWeight must contain all classes in the training data. The class ${a} exists in the data but not in classWeight`);i.push(n[a])}),cs(i,"float32")}else return null}function zge(t,e){return ie(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const Vge=32;function D7(t,e){let n,r;const s=e;n=s.xs,r=s.ys,Y(n!=null&&r!=null,()=>`A Dataset iterator for fitDataset() is expected to generate objects of the form \`{xs: xVal, ys: yVal}\`, where the two values may be \`tf.Tensor\`, an array of Tensors, or a map of string to Tensor.  The provided Dataset instead generates ${e}`);const o=h_("input",t.inputNames,n),i=h_("output",t.outputNames,r),a=o[0].shape[0];Y(o.length===t.inputs.length,()=>`LayersModel has ${t.inputs.length} inputs, but the dataset provides ${o.length} inputs.  (Expected input keys: ${JSON.stringify(t.inputNames)})`),Y(i.length===t.outputs.length,()=>`LayersModel has ${t.outputs.length} outputs, but the dataset provides ${i.length} outputs.  (Expected output keys: ${JSON.stringify(t.outputNames)})`);for(let l=0;l<o.length;l++)Y(o[l].shape[0]===a,()=>`Batch size mismatch: input ${t.inputNames[l]} has ${o[l].shape[0]}; expected  ${a} based on input ${t.inputNames[0]}.`);for(let l=0;l<i.length;l++)Y(i[l].shape[0]===a,()=>`Batch size mismatch: output ${t.outputNames[l]} has ${i[l].shape[0]}; expected  ${a} based on input ${t.inputNames[0]}.`);return{xs:o,ys:i}}function h_(t,e,n){if(n instanceof Tn)return[n];if(Array.isArray(n))return Y(n.length===e.length,()=>`Received an array of ${n.length} Tensors, but expected ${e.length} to match the ${t} keys ${e}.`),n;{const r=[];for(const s of e){if(n[s]==null)throw new de(`The feature data generated by the dataset lacks the required ${t} key '${s}'.`);r.push(n[s])}return r}}function Wge(t){if(t.length===3)throw new Ht("Validation with sample weights is not implemented yet.");return{xs:t[0],ys:t[1]}}async function Uge(t,e,n){const r=n.batchesPerEpoch!=null;if(Y(t.optimizer!=null,()=>"You must compile a model before training/testing. Use LayersModel.compile(modelCompileConfig)."),Y(n!=null,()=>"For fitDataset(), the 2nd argument (config) is required, but it is not provided in this call."),Y(n.epochs!=null&&n.epochs>0&&Number.isInteger(n.epochs),()=>`For fitDataset(), config.epochs is expected to be a positive integer, but got ${n.epochs}`),Y(!r||n.batchesPerEpoch>0&&Number.isInteger(n.batchesPerEpoch),()=>`For fitDataset(), config.batchesPerEpoch is expected to be a positive integer if specified, but got ${n.batchesPerEpoch}`),Y(n.validationSplit==null,()=>"`validationSplit` is not supported by `fitDataset()`. Use validationData instead."),t.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");t.isTraining=!0;try{const s=n.validationData!=null;let o,i;if(s)if(p_(n.validationData))Y(n.validationBatches==null||n.validationBatches>0&&Number.isInteger(n.validationBatches),()=>`For fitDataset() with dataset-based validation, config.validationBatches is expected not to be provided, or to be a positive integer, but got ${n.validationBatches}`);else{const w=Wge(n.validationData);o=w.xs,i=w.ys}const a=t.makeTrainFunction(),l=t.getDedupedMetricsNames();let c;s?c=l.slice().concat(l.map(w=>"val_"+w)):c=l.slice();const d=w7(n.callbacks,n.yieldEvery),f=n.verbose==null?1:n.verbose,{callbackList:p,history:g}=v7(d,f,n.epochs,null,null,Hge(e,n),null,s,c);p.setModel(t),t.history=g,await p.onTrainBegin(),t.stopTraining_=!1;let x=n.initialEpoch==null?0:n.initialEpoch,b=await e.iterator();for(;x<n.epochs;){const w={};await p.onEpochBegin(x);let C=0,N=0;for(r||(b=await e.iterator());!r||C<n.batchesPerEpoch;){const k=await b.next();if(r&&k.done){console.warn(`You provided \`batchesPerEpoch\` as ${n.batchesPerEpoch}, but your dataset iterator ran out of data after ${C} batches; interrupting training. Make sure that your dataset can generate at least \`batchesPerEpoch * epochs\` batches (in this case, ${n.batchesPerEpoch*n.epochs} batches). You may need to use the repeat() function when building your dataset.`);break}if(k.value!=null){const{xs:I,ys:R}=D7(t,k.value),$={};$.batch=N,$.size=I[0].shape[0],await p.onBatchBegin(N,$);const O=[];if(n.classWeight!=null){const _=A7(n.classWeight,t.outputNames);for(let V=0;V<_.length;++V)O.push(await R7(R[V],null,_[V]))}const F=I.concat(R).concat(O),M=a(F);Yt(F);for(let _=0;_<l.length;++_){const V=l[_],B=M[_];$[V]=B,ls(B)}await p.onBatchEnd(N,$),b7($),N++,C++}if(r?C>=n.batchesPerEpoch:k.done){if(s){let I;p_(n.validationData)?I=kn(await t.evaluateDataset(n.validationData,{batches:n.validationBatches})):I=kn(t.evaluate(o,i,{batchSize:n.validationBatchSize==null?Vge:n.validationBatchSize,verbose:0}));for(let R=0;R<t.metricsNames.length;++R)w[`val_${t.metricsNames[R]}`]=I[R]}break}if(t.stopTraining_)break}if(await p.onEpochEnd(x,w),x++,t.stopTraining_)break}return await p.onTrainEnd(),await t.history.syncData(),t.history}finally{t.isTraining=!1}}function Hge(t,e){let n=null;return e.batchesPerEpoch!=null?n=e.batchesPerEpoch:Number.isFinite(t.size)&&(n=t.size),n}function p_(t){return typeof t.iterator=="function"}function Gge(t){return typeof t.next=="function"}async function qge(t,e,n){n=n||{};const r=n.batches!=null,s=t.testFunction;let o=[];if(n.verbose>0)throw new Ht("Verbose mode is not implemented yet.");Y(!r||n.batches>0&&Number.isInteger(n.batches),()=>`Test loop expects \`batches\` to be a positive integer, but received ${JSON.stringify(n.batches)}`);const i=Gge(e)?e:await e.iterator();let a=0,l=0;for(;!r||l<n.batches;){const c=await i.next();if(o=we(()=>{if(c.value){const{xs:d,ys:f}=D7(t,c.value),p=d.concat(f),g=we(()=>s(p));if(Yt(p),l===0)for(let b=0;b<g.length;++b)o.push(kt(0));const x=p[0].shape[0];for(let b=0;b<g.length;++b){const w=g[b],C=o[b];o[b]=we(()=>Ue(o[b],ie(x,w))),l>0&&Yt(C)}Yt(g),a+=x,++l}return o}),c.done){r&&console.warn(`Your dataset iterator ran out of data during evaluateDataset(). Interrupting evalution. Make sure that your dataset can generate at least \`batches\` batches (in this case, ${n.batches} batches). You may need to use the repeat() function when building your dataset.`);break}}for(let c=0;c<o.length;++c){const d=o[c];o[c]=mt(o[c],a),Yt(d)}return go(o)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function oN(t){Y(t>0&&Number.isInteger(t),()=>`batchSize is required to be a positive integer, but got ${t}`)}function Cm(t,e,n){return t==null?[null]:Array.isArray(t)?t.map(r=>Ad(r,e,n-e)):Ad(t,e,n-e)}function bI(t,e){return we(()=>t==null?null:Array.isArray(t)?t.map(n=>bI(n,e)):o7(t,e.dtype==="int32"?e:nt(e,"int32")))}function iN(t,e){const n=[];let r=0,s=null;for(;r<t;)s=r+e,s>=t&&(s=t),n.push([r,s]),r=s;return n}function $7(t){const e=[];t instanceof Tn&&(t=[t]);for(let n=0;n<t.length;++n){const r=t[n];if(r.rank===1)e.push(F1(r,1));else{if(r.rank===0)throw new Error("Expected tensor to be at least 1D, but received a 0D tensor (scalar).");e.push(r)}}return e}function pa(t,e){if(t==null)return;const n=[];if(e instanceof Tn)n.push(e.id);else if(Array.isArray(e))e.forEach(s=>n.push(s.id));else if(e!=null)for(const s in e){const o=e[s];n.push(o.id)}const r=[];if(t instanceof Tn)n.indexOf(t.id)===-1&&r.push(t);else if(Array.isArray(t))t.forEach(s=>{n.indexOf(s.id)===-1&&r.push(s)});else if(t!=null)for(const s in t){const o=t[s];n.indexOf(o.id)===-1&&r.push(o)}r.forEach(s=>{s.isDisposed||s.dispose()})}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Xge(t){return t instanceof Tn}function wI(t){return Array.isArray(t)}function m_(t){return!Xge(t)&&!wI(t)}function g_(t,e,n,r=!0,s=""){if(e==null||e.length===0){if(t!=null){let i=!1;if(wI(t)&&t.length>0)i=!0;else if(m_(t)){for(const a in t)if(t.hasOwnProperty(a)){i=!0;break}}else i=!0;if(i)throw new de(`Error when checking model ${s} expected no data, but got ${t}`)}return[]}if(t==null)return e.map(i=>null);let o;if(m_(t)){t=t,o=[];for(const i of e){if(t[i]==null)throw new de(`No data provided for "${i}". Need data for each key in: ${e}`);o.push(t[i])}}else if(wI(t)){if(t=t,t.length!==e.length)throw new de(`Error when checking model ${s}: the Array of Tensors that you are passing to your model is not the size the model expected. Expected to see ${e.length} Tensor(s), but instead got the following list of Tensor(s): ${t}`);o=t}else{if(t=t,e.length>1)throw new de(`The model ${s} expects ${e.length} Tensor(s), but only received one Tensor. Found: Tensor with shape ${t.shape}`);o=[t]}if(o=$7(o),n!=null)for(let i=0;i<e.length;++i){if(n[i]==null)continue;const a=o[i];if(a.shape.length!==n[i].length)throw new de(`Error when checking ${s}: expected ${e[i]} to have ${n[i].length} dimension(s). but got array with shape ${a.shape}`);for(let l=0;l<n[i].length;++l){if(l===0&&!r)continue;const c=a.shape[l],d=n[i][l];if(d!=null&&d>=0&&c!==d)throw new de(`${s} expected a batch of elements where each example has shape [${n[i].slice(1,n[i].length)}] (i.e.,tensor shape [*,${n[i].slice(1,n[i].length)}]) but the ${s} received an input with ${a.shape[0]} examples, each with shape [${a.shape.slice(1,a.shape.length)}] (tensor shape [${a.shape}])`)}}return o}function Kge(t,e,n){const r=ou(t.map(o=>o.shape[0]));r.sort();const s=ou(e.map(o=>o.shape[0]));if(s.sort(),r.length>1)throw new de(`All input Tensors (x) should have the same number of samples. Got array shapes: ${JSON.stringify(t.map(o=>o.shape))}`);if(s.length>1)throw new de(`All target Tensors (y) should have the same number of samples. Got array shapes: ${JSON.stringify(e.map(o=>o.shape))}`);if(r.length>0&&s.length>0&&!nn(r,s))throw new de(`Input Tensors should have the same number of samples as target Tensors. Found ${r[0]} input sample(s) and ${s[0]} target sample(s).`)}function Yge(t,e,n){const r=[_2,P2,Jg];for(let s=0;s<t.length;++s){const o=t[s],i=e[s],a=n[s];if(i!=null){if(i===Jg&&o.shape[o.shape.length-1]===1)throw new de(`You are passing a target array of shape ${o.shape} while using a loss 'categorical_crossentropy'. 'categorical_crossentropy'expects targets to be binary matrices (1s and 0s) of shape [samples, classes].`);if(r.indexOf(i)!==-1){const l=o.shape.slice(1),c=a.slice(1);for(let d=0;d<l.length;++d){const f=l[d],p=c[d];if(p!=null&&f!==p)throw new de(`A target Tensor with shape ${o.shape} was passed for an output of shape ${a}, while using a loss function that expects targets to have the same shape as the output.`)}}}}}function x_(t,e,n,r=!0,s=""){let o;if(Array.isArray(t)){if(t.length!==e.length)throw new de(`Error when checking model ${s}: the Array of Tensors that you are passing to your model is not the size the the model expected. Expected to see ${e.length} Tensor(s), but instead got ${t.length} Tensors(s).`);o=t}else{if(e.length>1)throw new de(`The model expects ${e.length} ${s} Tensors, but only received one Tensor. Found: array with shape ${JSON.stringify(t.shape)}.`);o=[t]}if(n!=null)for(let i=0;i<e.length;++i){if(n[i]==null)continue;const a=o[i];if(a.shape.length!==n[i].length)throw new de(`Error when checking ${s}: expected ${e[i]} to have ${n[i].length} dimension(s), but got array with shape ${JSON.stringify(a.shape)}`);for(let l=0;l<n[i].length;++l){if(l===0&&!r)continue;const c=a.shape[l],d=n[i][l];if(d!=null&&d!==c)throw new de(`Error when checking ${s}: expected ${e[i]} to have shape ${JSON.stringify(n[i])} but got array with shape ${JSON.stringify(a.shape)}.`)}}}function Zge(t,e){if(t==null||Array.isArray(t)&&t.length===0)return e.map(r=>[]);let n;if(typeof t=="string"||typeof t=="function")n=[t];else if(Array.isArray(t)||typeof t=="object")n=t;else throw new TypeError(`Type of metrics argument not understood. Expected an string,function, Array, or Object, found: ${t}`);if(Array.isArray(n))return e.map(r=>n);{const r=[];for(const s of e){let o=n.hasOwnProperty(s)?n[s]:[];Array.isArray(o)||(o=[o]),r.push(o)}return r}}const Qge="layers-model";class Th extends ga{constructor(e){super(e),this.isTraining=!1}summary(e,n,r=console.log){if(!this.built)throw new de("This model has never been called, thus its weights have not been created yet. So no summary can be displayed. Build the model first (e.g., by calling it on some test data).");_ge(this,e,n,r)}compile(e){if(e.loss==null&&(e.loss=[]),this.loss=e.loss,typeof e.optimizer=="string")this.optimizer_=Oge(e.optimizer),this.isOptimizerOwned=!0;else{if(!(e.optimizer instanceof Fu))throw new de("User-defined optimizer must be an instance of tf.Optimizer.");this.optimizer_=e.optimizer,this.isOptimizerOwned=!1}let n=[];if(!Array.isArray(e.loss)&&typeof e.loss!="string"&&typeof e.loss!="function"){e.loss=e.loss;for(const i in e.loss)if(this.outputNames.indexOf(i)===-1)throw new de(`Unknown entry in loss dictionary: "${i}". Only expected the following keys: ${this.outputNames}`);for(const i of this.outputNames)e.loss[i]==null&&console.warn(`Output "${i}" is missing from loss dictionary. We assume this was done on purpose, and we will not be expecting data to be passed to ${i} during training`),n.push(sN(e.loss[i]))}else if(Array.isArray(e.loss)){if(e.loss.length!==this.outputs.length)throw new de(`When passing an Array as loss, it should have one entry per model output. The model has ${this.outputs.length} output(s), but you passed loss=${e.loss}.`);n=e.loss.map(a=>sN(a))}else{const i=sN(e.loss);this.outputs.forEach(a=>{n.push(i)})}this.lossFunctions=n,this.feedOutputNames=[],this.feedOutputShapes=[],this.feedLossFns=[];for(let i=0;i<this.outputs.length;++i){const a=this.internalOutputShapes[i],l=this.outputNames[i];this.feedOutputNames.push(l),this.feedOutputShapes.push(a),this.feedLossFns.push(this.lossFunctions[i])}const r=[];this.metrics=e.metrics,this.metricsNames=["loss"],this.metricsTensors=[],Td("loss",()=>{for(let i=0;i<this.outputs.length;++i){if(r.indexOf(i)!==-1)continue;const a=this.lossFunctions[i];this.outputs.length>1&&(this.metricsTensors.push([a,i]),this.metricsNames.push(this.outputNames[i]+"_loss"))}});const s=Zge(e.metrics,this.outputNames),o=(i,a,l)=>{this.outputNames.length>1&&(a=this.outputNames[i]+"_"+a),this.metricsNames.push(a),this.metricsTensors.push([l,i])};Td("metric",()=>{for(let i=0;i<this.outputs.length;++i){if(r.indexOf(i)!==-1)continue;const a=s[i];(c=>{const d="";let f,p,g;for(const x of c){if(typeof x=="string"&&["accuracy","acc","crossentropy","ce"].indexOf(x)!==-1){const w=this.internalOutputShapes[i];w[w.length-1]===1||this.lossFunctions[i]===P2?["accuracy","acc"].indexOf(x)!==-1?p=S7:["crossentropy","ce"].indexOf(x)!==-1&&(p=Sge):this.lossFunctions[i]===Ub?["accuracy","acc"].indexOf(x)!==-1?p=Nge:["crossentropy","ce"].indexOf(x)!==-1&&(p=I7):["accuracy","acc"].indexOf(x)!==-1?p=N7:["crossentropy","ce"].indexOf(x)!==-1&&(p=E7);let C;["accuracy","acc"].indexOf(x)!==-1?C="acc":["crossentropy","ce"].indexOf(x)!==-1&&(C="ce"),g=p,f=d+C}else g=$ge(x),f=d+Xx(x);let b;Td(f,()=>{b=g}),o(i,f,b)}})(a)}}),this.collectedTrainableWeights=this.trainableWeights}checkTrainableWeightsConsistency(){this.collectedTrainableWeights!=null&&this.trainableWeights.length!==this.collectedTrainableWeights.length&&console.warn("Discrepancy between trainableweights and collected trainable weights. Did you set `model.trainable` without calling `model.compile()` afterwards?")}evaluate(e,n,r={}){const s=r.batchSize==null?32:r.batchSize;oN(s);const i=this.standardizeUserDataXY(e,n,!0,s);try{const a=i[0].concat(i[1]);this.makeTestFunction();const l=this.testFunction,c=this.testLoop(l,a,s,r.verbose,r.steps);return go(c)}finally{pa(i[0],e),pa(i[1],n)}}async evaluateDataset(e,n){return this.makeTestFunction(),qge(this,e,n)}checkNumSamples(e,n,r,s="steps"){let o;if(r!=null){if(o=null,n!=null)throw new de(`If ${s} is set, batchSize must be null or undefined.Got batchSize = ${n}`)}else if(e!=null)Array.isArray(e)?o=e[0].shape[0]:o=e.shape[0];else throw new de(`Either the input data should have a defined shape, or ${s} shoud be specified.`);return o}execute(e,n){if(Array.isArray(n)&&n.length===0)throw new de("`outputs` is an empty Array, which is not allowed.");const r=Array.isArray(n),s=r?n:[n],o=this.retrieveSymbolicTensors(s),i=new Hc;if(e instanceof Tn&&(e=[e]),Array.isArray(e)){if(e.length!==this.inputs.length)throw new de(`The number of inputs provided (${e.length}) does not match the number of inputs of this model (${this.inputs.length}).`);for(let l=0;l<this.inputs.length;++l)i.add(this.inputs[l],e[l])}else for(const l of this.inputs){const c=e[l.name];if(c==null)throw new de(`No value is provided for the model's input ${l.name}`);i.add(l,c)}const a=Gm(o,i);return r?a:a[0]}retrieveSymbolicTensors(e){const n=Xd(null,e.length);let r=e.length;for(const s of this.layers){const o=Array.isArray(s.output)?s.output:[s.output],i=o.map(a=>a.name);for(let a=0;a<e.length;++a){const l=i.indexOf(e[a]);if(l!==-1&&(n[a]=o[l],r--),r===0)break}if(r===0)break}if(r>0){const s=[];throw n.forEach((o,i)=>{o==null&&s.push(e[i])}),new de(`Cannot find SymbolicTensors for output name(s): ${JSON.stringify(s)}`)}return n}predictLoop(e,n=32,r=!1){return we(()=>{const s=this.checkNumSamples(e);if(r)throw new Ht("Verbose predictLoop() is not implemented yet.");const o=iN(s,n),i=this.outputs.map(a=>[]);for(let a=0;a<o.length;++a)we(()=>{const c=o[a][0],d=o[a][1],f=Cm(e,c,d),p=[];if(Array.isArray(f))for(let x=0;x<f.length;++x)p.push({key:this.inputs[x],value:f[x]});else p.push({key:this.inputs[0],value:f});const g=new Hc(p);return Gm(this.outputs,g)}).forEach((c,d)=>i[d].push(c));return go(i.map(a=>yr(a,0)))})}predict(e,n={}){const r=$7(e);x_(r,this.inputNames,this.feedInputShapes,!1);try{const s=n.batchSize==null?32:n.batchSize;return oN(s),this.predictLoop(r,s)}finally{pa(r,e)}}predictOnBatch(e){x_(e,this.inputNames,this.feedInputShapes,!0);const n=(Array.isArray(e)?e[0]:e).shape[0];return this.predictLoop(e,n)}standardizeUserDataXY(e,n,r=!0,s){if(this.optimizer_==null)throw new qi("You must compile a model before training/testing. Use LayersModel.compile(modelCompileArgs).");const o=[];for(let i=0;i<this.feedOutputShapes.length;++i){const a=this.feedOutputShapes[i];this.feedLossFns[i]===Ub?o.push(a.slice(0,a.length-1).concat([1])):o.push(a)}if(e=g_(e,this.feedInputNames,this.feedInputShapes,!1,"input"),n=g_(n,this.feedOutputNames,o,!1,"target"),Kge(e,n),Yge(n,this.feedLossFns,this.feedOutputShapes),this.stateful&&s!=null&&s>0&&e[0].shape[0]%s!==0)throw new de(`In a stateful network, you should only pass inputs with a number of samples that is divisible by the batch size ${s}. Found: ${e[0].shape[0]} sample(s).`);return[e,n]}async standardizeUserData(e,n,r,s,o=!0,i){const[a,l]=this.standardizeUserDataXY(e,n,o,i);if(r!=null)throw new Error("sample weight is not supported yet.");let c=null;if(s!=null){const d=A7(s,this.outputNames);c=[];for(let f=0;f<d.length;++f)c.push(await R7(l[f],null,d[f]))}return[a,l,c]}testLoop(e,n,r,s=0,o){return we(()=>{const i=this.checkNumSamples(n,r,o,"steps"),a=[];if(s>0)throw new Ht("Verbose mode is not implemented yet.");if(o!=null)throw new Ht("steps mode in testLoop() is not implemented yet");{const l=iN(i,r),c=cs(_a(0,i));for(let d=0;d<l.length;++d){const f=l[d][0],p=l[d][1],g=Ad(c,f,p-f),x=bI(n,g),b=e(x);if(d===0)for(let w=0;w<b.length;++w)a.push(kt(0));for(let w=0;w<b.length;++w){const C=b[w];a[w]=Ue(a[w],ie(p-f,C))}}for(let d=0;d<a.length;++d)a[d]=mt(a[d],i)}return a})}getDedupedMetricsNames(){const e=this.metricsNames,n=[];for(let r=0;r<e.length;++r){const s=e[r];let o=s;if(t_(e,s)>1){const i=t_(e.slice(0,r),s);o+=`_${i}`}n.push(o)}return n}makeTrainFunction(){return e=>{const n=[],r=e.slice(0,this.inputs.length),s=e.slice(this.inputs.length,this.inputs.length+this.outputs.length),o=e.slice(this.inputs.length+this.outputs.length,this.inputs.length+this.outputs.length*2),i=[],a=()=>{const f=[];for(let b=0;b<this.inputs.length;++b)f.push({key:this.inputs[b],value:r[b]});const p=new Hc(f),g=Gm(this.outputs,p,{training:!0});let x;for(let b=0;b<this.lossFunctions.length;++b){const w=this.lossFunctions[b];let C=w(s[b],g[b]);o[b]!=null&&(C=zge(C,o[b]));const N=gr(C);n.push(N),b===0?x=C:x=Ue(x,C)}for(let b=0;b<this.metricsTensors.length;++b){let w;if(this.outputs.length>1&&b<this.outputs.length)w=n[b];else{const C=this.metricsTensors[b][0],N=this.metricsTensors[b][1];w=gr(C(s[N],g[N]))}ls(w),i.push(w)}return x=gr(x),this.calculateLosses().forEach(b=>{x=Ue(x,b)}),x},l=this.collectedTrainableWeights.map(f=>f.read());return[this.optimizer_.minimize(a,!0,l)].concat(i)}}makeTestFunction(){this.testFunction=e=>we(()=>{const n=[];let r;const s=e.slice(0,this.inputs.length),o=e.slice(this.inputs.length,this.inputs.length+this.outputs.length),i=[];for(let c=0;c<this.inputs.length;++c)i.push({key:this.inputs[c],value:s[c]});const a=new Hc(i),l=Gm(this.outputs,a);for(let c=0;c<this.lossFunctions.length;++c){const d=this.lossFunctions[c],f=gr(d(o[c],l[c]));c===0?r=f:r=Ue(r,f),n.push(r)}for(let c=0;c<this.metricsTensors.length;++c){const d=this.metricsTensors[c][0],f=this.metricsTensors[c][1],p=gr(d(o[f],l[f]));n.push(p)}return n})}async fit(e,n,r={}){if(this.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");this.isTraining=!0;let s,o,i,a,l,c,d,f,p;try{const g=r.batchSize==null?32:r.batchSize;oN(g);const b=await this.standardizeUserData(e,n,r.sampleWeight,r.classWeight,!1,g);s=b[0],o=b[1],p=b[2];let w=!1,C;if(r.validationData!=null&&r.validationData.length>0){if(w=!0,r.validationData.length===2)l=r.validationData[0],c=r.validationData[1];else throw r.validationData.length===3?new Ht("validationData including sample weights is not supported yet."):new de(`When passing validation data, it must contain 2 (valX, valY) or 3 (valX, valY, valSampleWeight) items; ${r.validationData} is invalid.`);const _=await this.standardizeUserData(l,c,null,null,!0,g);d=_[0],f=_[1],C=d.concat(f)}else if(r.validationSplit!=null&&r.validationSplit>0&&r.validationSplit<1){w=!0;const M=Math.floor(s[0].shape[0]*(1-r.validationSplit)),_=s[0].shape[0];d=Cm(s,M,_),i=s,s=Cm(s,0,M),f=Cm(o,M,_),a=o,o=Cm(o,0,M),C=d.concat(f)}else r.validationSteps!=null&&(w=!0);const N=s.concat(o).concat(p);this.checkTrainableWeightsConsistency();const k=this.makeTrainFunction(),I=this.getDedupedMetricsNames();let R,$;w?(this.makeTestFunction(),R=this.testFunction,$=I.slice().concat(I.map(M=>"val_"+M))):(R=null,C=[],$=I.slice());const O=w7(r.callbacks,r.yieldEvery);return await this.fitLoop(k,N,I,g,r.epochs,r.verbose,O,R,C,r.shuffle,$,r.initialEpoch,null,null)}finally{this.isTraining=!1,pa(s,e),pa(o,n),pa(i,e),pa(a,n),pa(d,l),pa(f,c),p!=null&&Yt(p)}}async fitLoop(e,n,r,s,o,i,a,l,c,d,f,p,g,x){s==null&&(s=32),o==null&&(o=1),d==null&&(d=!0),p==null&&(p=0);let b=!1;if(l!=null&&c!=null&&(b=!0),x!=null&&(b=!0,g==null))throw new de("Can only use `validationSteps` when doing step-wise training, i.e., `stepsPerEpoch` must be set.");const w=this.checkNumSamples(n,s,g,"steps_per_epoch");let C;w!=null&&(C=_a(0,w)),i==null&&(i=1);const{callbackList:N,history:k}=v7(a,i,o,p,w,g,s,b,f);N.setModel(this),this.history=k,await N.onTrainBegin(),this.stopTraining_=!1;for(let I=p;I<o;++I){await N.onEpochBegin(I);const R={};if(g!=null)throw new Ht("stepsPerEpoch mode is not implemented yet.");{if(d==="batch")throw new Ht("batch shuffling is not implemneted yet");d&&Use(C);const $=cs(C),O=iN(w,s);for(let F=0;F<O.length;++F){const M={};if(await N.onBatchBegin(F,M),we(()=>{const _=O[F][0],V=O[F][1],B=Ad($,_,V-_);M.batch=F,M.size=V-_;const W=bI(n,B),q=e(W);for(let j=0;j<r.length;++j){const G=r[j],Z=q[j];M[G]=Z,ls(Z)}if(F===O.length-1&&b){const j=this.testLoop(l,c,s);for(let G=0;G<r.length;++G){const Z=r[G],J=j[G];ls(J),R["val_"+Z]=J}}}),await N.onBatchEnd(F,M),b7(M),this.stopTraining_)break}$.dispose()}if(await N.onEpochEnd(I,R),this.stopTraining_)break}return await N.onTrainEnd(),await this.history.syncData(),this.history}async fitDataset(e,n){return Uge(this,e,n)}async trainOnBatch(e,n){const r=await this.standardizeUserData(e,n),s=r[0],o=r[1],a=this.makeTrainFunction()(s.concat(o)),l=[];for(const c of a){const d=await c.data();l.push(d[0])}return Yt(a),pa(r[0],e),pa(r[1],n),go(l)}getNamedWeights(e){const n=[],r=e!=null&&e.trainableOnly,s=r?this.trainableWeights:this.weights,o=this.getWeights(r);for(let i=0;i<s.length;++i)r&&!s[i].trainable||n.push({name:s[i].originalName,tensor:o[i]});return n}set stopTraining(e){this.stopTraining_=e}get stopTraining(){return this.stopTraining_}get optimizer(){return this.optimizer_}set optimizer(e){this.optimizer_!==e&&(this.optimizer_=e,this.isOptimizerOwned=!1)}dispose(){const e=super.dispose();if(e.refCountAfterDispose===0&&this.optimizer!=null&&this.isOptimizerOwned){const n=L4().numTensors;this.optimizer_.dispose(),e.numDisposedVariables+=n-L4().numTensors}return e}getLossIdentifiers(){let e;if(typeof this.loss=="string")e=jl(this.loss);else if(Array.isArray(this.loss)){for(const n of this.loss)if(typeof n!="string")throw new Error("Serialization of non-string loss is not supported.");e=this.loss.map(n=>jl(n))}else{const n=Object.keys(this.loss);e={};const r=this.loss;for(const s of n)if(typeof r[s]=="string")e[s]=jl(r[s]);else throw new Error("Serialization of non-string loss is not supported.")}return e}getMetricIdentifiers(){if(typeof this.metrics=="string"||typeof this.metrics=="function")return[jl(Xx(this.metrics))];if(Array.isArray(this.metrics))return this.metrics.map(e=>jl(Xx(e)));{const e={};for(const n in this.metrics)e[n]=jl(Xx(this.metrics[n]));return e}}getTrainingConfig(){return{loss:this.getLossIdentifiers(),metrics:this.getMetricIdentifiers(),optimizer_config:{class_name:this.optimizer.getClassName(),config:this.optimizer.getConfig()}}}loadTrainingConfig(e){if(e.weighted_metrics!=null)throw new Error("Loading weight_metrics is not supported yet.");if(e.loss_weights!=null)throw new Error("Loading loss_weights is not supported yet.");if(e.sample_weight_mode!=null)throw new Error("Loading sample_weight_mode is not supported yet.");const n=xI(e.optimizer_config),r=Ql(n);let s;if(typeof e.loss=="string")s=ud(e.loss);else if(Array.isArray(e.loss))s=e.loss.map(i=>ud(i));else if(e.loss!=null){s={};for(const i in e.loss)s[i]=ud(e.loss[i])}let o;if(Array.isArray(e.metrics))o=e.metrics.map(i=>ud(i));else if(e.metrics!=null){o={};for(const i in e.metrics)o[i]=ud(e.metrics[i])}this.compile({loss:s,metrics:o,optimizer:r})}async save(e,n){if(typeof e=="string"){const c=WB(e);if(c.length===0)throw new de(`Cannot find any save handlers for URL '${e}'`);if(c.length>1)throw new de(`Found more than one (${c.length}) save handlers for URL '${e}'`);e=c[0]}if(e.save==null)throw new de("LayersModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");const r=await eI(this.getNamedWeights(n)),a={modelTopology:this.toJSON(null,!1),format:Qge,generatedBy:`TensorFlow.js tfjs-layers v${T7}`,convertedBy:null};if((n==null?!1:n.includeOptimizer)&&this.optimizer!=null){a.trainingConfig=this.getTrainingConfig();const c="optimizer",{data:d,specs:f}=await eI(await this.optimizer.getWeights(),c);r.specs.push(...f),r.data=jB([r.data,d])}return this.userDefinedMetadata!=null&&(f_(this.userDefinedMetadata,this.name,!0),a.userDefinedMetadata=this.userDefinedMetadata),a.weightData=r.data,a.weightSpecs=r.specs,e.save(a)}setUserDefinedMetadata(e){f_(e,this.name),this.userDefinedMetadata=e}getUserDefinedMetadata(){return this.userDefinedMetadata}}Th.className="Model";qe(Th);class O7 extends Th{}O7.className="Functional";qe(O7);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class e0 extends Th{constructor(e){if(super({inputs:[],outputs:[]}),e=e||{},this.trainable=!0,this.built=!1,this.name=e.name!=null?e.name:D2("sequential_"),e.layers!=null)for(const n of e.layers)this.add(n)}checkShape(e){if(e.inboundNodes[0].outputTensors[0].shape.some(r=>r<0))throw new de(`Negative dimension size caused by adding layer ${e.name} with input shape [${e.inboundNodes[0].inputTensors[0].shape}]`)}add(e){const n=e instanceof e0||e instanceof Th;let r;if(n){if(r=e,r.outputs.length!==1)throw new de("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");if(r.inputs.length!==1)throw new de("All layers in a Sequential model should have a single input tensor. For multi-input layers, use the functional API.")}if(this.outputs.length===0){if(e.inboundNodes.length===0){if(e.batchInputShape==null)throw new de("The first layer in a Sequential model must get an `inputShape` or `batchInputShape` argument.");const s=ege({batchShape:e.batchInputShape,dtype:e.dtype,name:e.name+"_input"});e.apply(s)}if(n)this.outputs=r.outputs,this.inputs=r.inputs;else{if(e.inboundNodes.length!==1)throw new de(`A layer added to a Sequential model must not already be connected somewhere else. LayersModel received layer ${e.name} which has ${e.inboundNodes.length} pre-existing inbound connections.`);if(e.inboundNodes[0].outputTensors.length!==1)throw new de("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[e.inboundNodes[0].outputTensors[0]],this.inputs=p7(this.outputs[0])}this.inboundNodes=[],new O2({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:Xd(null,this.inputs.length),outputMasks:[null],inputShapes:this.inputs.map(s=>s.shape),outputShapes:this.outputs[0].shape})}else{const s=e.apply(this.outputs[0]);if(Array.isArray(s))throw new TypeError("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[s],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}this.layers.push(e),this.built=!1}pop(){if(this.layers.length===0)throw new TypeError("There are no layers in the model.");if(this.layers.pop(),this.layers.length===0)this.outputs=[],this.inboundNodes=[],this.outboundNodes=[];else{const e=this.layers.length-1;this.layers[e].outboundNodes=[],this.outputs=[this.layers[e].output],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}}call(e,n){return this.model==null&&this.build(),this.model.call(e,n)}build(e){if(mn(e),this.inputs.length===0||this.outputs.length===0)throw new TypeError("Sequential model cannot be built: model is empty. Add some layers first.");this.model=new Th({inputs:this.inputs,outputs:this.outputs[0],name:this.name+"_model"}),this.model.trainable=this.trainable,this.supportsMasking=this.model.supportsMasking,this.inputLayers=this.model.inputLayers,this.inputLayersNodeIndices=this.model.inputLayersNodeIndices,this.inputLayersTensorIndices=this.model.inputLayersTensorIndices,this.outputLayers=this.model.outputLayers,this.outputLayersNodeIndices=this.model.outputLayersNodeIndices,this.outputLayersTensorIndices=this.model.outputLayersTensorIndices,this.nodesByDepth=this.model.nodesByDepth,this.containerNodes=this.model.containerNodes,this.outputNames=this.model.outputNames,this.inputNames=this.model.inputNames,this.built=!0}countParams(){return this.built||this.build(),super.countParams()}summary(e,n,r=console.log){this.built||this.build(),super.summary(e,n,r)}setWeights(e){this.model==null&&this.build(),this.model.setWeights(e)}evaluate(e,n,r={}){if(!this.built)throw new qi("The model needs to be compiled before being used.");return this.model.evaluate(e,n,r)}async evaluateDataset(e,n){if(!this.built)throw new qi("The model needs to be compiled before being used.");return this.model.evaluateDataset(e,n)}predict(e,n={}){return this.model==null&&this.build(),this.model.predict(e,n)}predictOnBatch(e){return this.model==null&&this.build(),this.model.predictOnBatch(e)}compile(e){this.build(),this.model.compile(e),this.optimizer_=this.model.optimizer,this.isOptimizerOwned=this.model.isOptimizerOwned,this.loss=this.model.loss,this.metrics=this.model.metrics,this.metricsTensors=this.model.metricsTensors,this.metricsNames=this.model.metricsNames}get optimizer(){return this.model==null?void 0:this.model.optimizer}set optimizer(e){this.model.optimizer=e}async fit(e,n,r={}){if(!this.built)throw new qi("The model needs to be compiled before being used.");return this.model.fit(e,n,r)}async fitDataset(e,n){if(!this.built)throw new qi("The model needs to be compiled before being used.");return this.model.fitDataset(e,n)}async trainOnBatch(e,n){return this.model.trainOnBatch(e,n)}static fromConfig(e,n,r={},s=!1){let o,i={};if(n instanceof Array){if(n[0].className==null||n[0].className==="Merge")throw new de("Legacy serialization format not supported yet.");o=n}else Y(n.layers!=null,()=>"When the config data for a Sequential model is not an Array, it must be an Object that contains the 'layers' field."),o=n.layers,delete n.layers,i=n;const a=new e(i);if(!(a instanceof e0))throw new Ht(`Sequential.fromConfig called on non-Sequential input: ${a}`);for(const l of o){const d=Ql(l,void 0,s);s&&d.setFastWeightInitDuringBuild(!0),a.add(d)}return a}set stopTraining(e){if(this.model==null)throw new de("Cannot set the stopTraining property of a sequential model before it is compiled.");this.model.stopTraining=e}get stopTraining(){if(this.model==null)throw new de("Cannot get the stopTraining property of a sequential model before it is compiled.");return this.model.stopTraining}getConfig(){const e=[];for(const n of this.layers){const r={};r.className=n.getClassName(),r.config=n.getConfig(),e.push(r)}return{name:this.name,layers:e}}}e0.className="Sequential";qe(e0);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let Hs=class extends _p{getConfig(){return{}}};class _7 extends Hs{apply(e,n=1){return Lme(e,n)}}_7.className="elu";qe(_7);class P7 extends Hs{apply(e){return v3(e)}}P7.className="selu";qe(P7);class F7 extends Hs{apply(e){return $l(e)}}F7.className="relu";qe(F7);class M7 extends Hs{apply(e){return we(()=>Gd(6,$l(e)))}}M7.className="relu6";qe(M7);class L7 extends Hs{apply(e){return e}}L7.className="linear";qe(L7);class B7 extends Hs{apply(e){return Ta(e)}}B7.className="sigmoid";qe(B7);class j7 extends Hs{apply(e){return jme(e)}}j7.className="hardSigmoid";qe(j7);class z7 extends Hs{apply(e){return Dp(e)}}z7.className="softplus";qe(z7);class V7 extends Hs{apply(e){return Bme(e)}}V7.className="softsign";qe(V7);class W7 extends Hs{apply(e){return Hd(e)}}W7.className="tanh";qe(W7);let kR=class extends Hs{apply(e,n=-1){return w2(e,n)}};kR.className="softmax";qe(kR);class U7 extends Hs{apply(e,n=-1){return s3(e,n)}}U7.className="logSoftmax";qe(U7);class H7 extends Hs{apply(e){return we(()=>we(()=>{const n=Math.sqrt(2),r=ie(.5,Ue(1,t3(mt(e,n))));return ie(e,r)}))}}H7.className="gelu";qe(H7);class G7 extends Hs{apply(e){return we(()=>ie(.5,ie(e,Ue(1,Hd(ie(Ns(mt(2,Math.PI)),Ue(e,ie(.044715,oc(e,3)))))))))}}G7.className="gelu_new";qe(G7);class q7 extends Hs{apply(e){return we(()=>ie(e,Hd(Dp(e))))}}q7.className="mish";qe(q7);class X7 extends Hs{apply(e,n=1){return we(()=>ie(Ta(ie(e,n)),e))}}X7.className="swish";qe(X7);function xu(t){return t.getClassName()}function aN(t,e={}){return P1(t,Bi.getMap().classNameMap,e,"activation")}function yu(t){if(t==null){const e={};return e.className="linear",e.config={},aN(e)}if(typeof t=="string"){const e={};return e.className=t,e.config={},aN(e)}else return t instanceof Hs?t:aN(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Jge(t){if(t!=null&&typeof t!="object")throw new Error(`Argument to L1L2 regularizer's constructor is expected to be an object, but received: ${t}`)}class K7 extends _p{}class Y7 extends K7{constructor(e){super(),Jge(e),this.l1=e==null||e.l1==null?.01:e.l1,this.l2=e==null||e.l2==null?.01:e.l2,this.hasL1=this.l1!==0,this.hasL2=this.l2!==0}apply(e){return we(()=>{let n=qr([1]);return this.hasL1&&(n=Ue(n,bt(ie(this.l1,Ur(e))))),this.hasL2&&(n=Ue(n,bt(ie(this.l2,M1(e))))),ce(n,[])})}getConfig(){return{l1:this.l1,l2:this.l2}}static fromConfig(e,n){return new e({l1:n.l1,l2:n.l2})}}Y7.className="L1L2";qe(Y7);const y_={l1l2:"L1L2"};function Mn(t){return hR(t)}function b_(t,e={}){return P1(t,Bi.getMap().classNameMap,e,"regularizer")}function or(t){if(t==null)return null;if(typeof t=="string"){const n={className:t in y_?y_[t]:t,config:{}};return b_(n)}else return t instanceof K7?t:b_(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Z7 extends Qt{constructor(e){super(e??{}),this.supportsMasking=!0,e!=null&&(this.maxValue=e.maxValue)}call(e,n){e=Ft(e);let r=$l(e);return this.maxValue!=null&&(r=Ko(r,0,this.maxValue)),r}computeOutputShape(e){return e}getConfig(){const e={maxValue:this.maxValue},n=super.getConfig();return Object.assign(e,n),e}}Z7.className="ReLU";qe(Z7);class Q7 extends Qt{constructor(e){super(e??{}),this.DEFAULT_ALPHA=.3,e==null&&(e={}),this.alpha=e.alpha==null?this.DEFAULT_ALPHA:e.alpha}call(e,n){const r=Ft(e);return u2(r,this.alpha)}computeOutputShape(e){return e}getConfig(){const e={alpha:this.alpha},n=super.getConfig();return Object.assign(e,n),e}}Q7.className="LeakyReLU";qe(Q7);class J7 extends Qt{constructor(e){if(super(e??{}),this.DEFAULT_ALPHA_INITIALIZER="zeros",e==null&&(e={}),this.supportsMasking=!0,this.alphaInitializer=sr(e.alphaInitializer||this.DEFAULT_ALPHA_INITIALIZER),this.alphaRegularizer=or(e.alphaRegularizer),this.alphaConstraint=Jr(e.alphaConstraint),e.sharedAxes==null)this.sharedAxes=null;else if(Array.isArray(e.sharedAxes))this.sharedAxes=e.sharedAxes;else if(typeof e.sharedAxes=="number")this.sharedAxes=[e.sharedAxes];else throw new de(`Expected sharedAxes to be a number or an array of numbers, but got ${e.sharedAxes}`)}build(e){e=mn(e);const n=e.slice(1);if(this.sharedAxes!=null)for(const s of this.sharedAxes)n[s-1]=1;this.alpha=this.addWeight("alpha",n,"float32",this.alphaInitializer,this.alphaRegularizer,!0,this.alphaConstraint);const r={};if(this.sharedAxes!=null)for(let s=1;s<e.length;++s)r[s]=e[s];this.inputSpec=[new Kr({ndim:e.length,axes:r})],this.built=!0}call(e,n){return e=Ft(e),x2(e,this.alpha.read())}getConfig(){const e={alphaInitializer:dr(this.alphaInitializer),alphaRegularizer:Mn(this.alphaRegularizer),alphaConstraint:Qr(this.alphaConstraint),sharedAxes:this.sharedAxes},n=super.getConfig();return Object.assign(e,n),e}}J7.className="PReLU";qe(J7);let ez=class extends Qt{constructor(e){if(super(e??{}),this.DEFAULT_ALPHA=1,e==null&&(e={}),e.alpha!=null&&e.alpha!==this.DEFAULT_ALPHA)throw new Ht(`Non-default alpha value (${e.alpha}) is not supported by the ELU layer yet.`);this.alpha=e.alpha==null?this.DEFAULT_ALPHA:e.alpha}call(e,n){const r=Ft(e);return T1(r)}computeOutputShape(e){return e}getConfig(){const e={alpha:this.alpha},n=super.getConfig();return Object.assign(e,n),e}};ez.className="ELU";qe(ez);class tz extends Qt{constructor(e){super(e??{}),this.DEFAULT_THETA=1,e==null&&(e={}),this.theta=e.theta==null?this.DEFAULT_THETA:e.theta}call(e,n){const r=Ft(e);return ie(r,nt(ri(r,this.theta),"float32"))}computeOutputShape(e){return e}getConfig(){const e={theta:this.theta},n=super.getConfig();return Object.assign(e,n),e}}tz.className="ThresholdedReLU";qe(tz);class nz extends Qt{constructor(e){super(e??{}),this.DEFAULT_AXIS=1,e==null&&(e={}),this.softmax=new kR().apply,this.axis=e.axis==null?this.DEFAULT_AXIS:e.axis}call(e,n){return we(()=>{let r=Ft(e);const s=n.mask;if(s!=null){const o=ie(lt(jo(r.shape),nt(s,r.dtype)),kt(-1e9));r=Ue(r,o)}return this.axis instanceof Array?this.axis.length>1?Yo(lt(r,f2(r,this.axis,!0))):this.softmax(r,this.axis[0]):this.softmax(r,this.axis)})}computeOutputShape(e){return e}getConfig(){const e={axis:this.axis},n=super.getConfig();return Object.assign(e,n),e}}nz.className="Softmax";qe(nz);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Ah(t,e,n){if(typeof t=="number")return Xd(t,e);if(t.length!==e)throw new de(`The ${n} argument must be an integer or tuple of ${e} integers. Received: ${t.length} elements.`);for(let r=0;r<e;++r){const s=t[r];if(!_me(s))throw new de(`The ${n} argument must be an integer or tuple of ${e} integers. Received: ${JSON.stringify(t)} including a non-integer number ${s}`)}return t}function Ra(t,e,n,r,s=1){if(t==null)return t;const o=e+(e-1)*(s-1);let i;return n==="same"?i=t:i=t-o+1,Math.floor((i+r-1)/r)}function sl(t,e,n,r){if(t==null)return null;if(r==="valid")t=t*e+gu([n-e,0]);else if(r==="same")t=t*e;else throw new de(`Unsupport padding mode: ${r}.`);return t}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function TR(t,e){return we(()=>(Or(e),e==="channelsFirst"?an(t,[0,2,3,1]):t))}function rz(t,e){return we(()=>(Or(e),e==="channelsFirst"?an(t,[0,2,3,4,1]):t))}function e0e(t,e,n,r=1,s="valid",o,i=1){return we(()=>{if(o==null&&(o=Pa()),Or(o),t.shape.length!==3)throw new de(`The input of a conv1dWithBias operation should be 3, but is ${t.shape.length} instead.`);if(e.shape.length!==3)throw new de(`The kernel for a conv1dWithBias operation should be 3, but is ${e.shape.length} instead`);if(n!=null&&n.shape.length!==1)throw new de(`The bias for a conv1dWithBias operation should be 1, but is ${n.shape.length} instead`);if(o==="channelsFirst"&&(t=an(t,[0,2,1])),s==="causal")throw new Ht("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");let a=YA(t,e,r,s==="same"?"same":"valid","NWC",i);return n!=null&&(a=Va(a,n)),a})}function w_(t,e,n,r=[1,1],s="valid",o,i,a=null){return we(()=>{if(o==null&&(o=Pa()),Or(o),t.rank!==3&&t.rank!==4)throw new de(`conv2dWithBiasActivation expects input to be of rank 3 or 4, but received ${t.rank}.`);if(e.rank!==3&&e.rank!==4)throw new de(`conv2dWithBiasActivation expects kernel to be of rank 3 or 4, but received ${t.rank}.`);let l=TR(t,o);if(s==="causal")throw new Ht("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");return l=Y8({x:l,filter:e,strides:r,pad:s==="same"?"same":"valid",dilations:i,dataFormat:"NHWC",bias:n,activation:a}),o==="channelsFirst"&&(l=an(l,[0,3,1,2])),l})}function t0e(t,e,n,r=[1,1,1],s="valid",o,i){return we(()=>{if(o==null&&(o=Pa()),Or(o),t.rank!==4&&t.rank!==5)throw new de(`conv3dWithBias expects input to be of rank 4 or 5, but received ${t.rank}.`);if(e.rank!==4&&e.rank!==5)throw new de(`conv3dWithBias expects kernel to be of rank 4 or 5, but received ${t.rank}.`);let a=rz(t,o);if(s==="causal")throw new Ht("The support for CAUSAL padding mode in conv3dWithBias is not implemented yet.");return a=m8(a,e,r,s==="same"?"same":"valid","NDHWC",i),n!=null&&(a=Va(a,n)),o==="channelsFirst"&&(a=an(a,[0,4,1,2,3])),a})}class F2 extends Qt{constructor(e,n){if(super(n),this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",F2.verifyArgs(n),this.rank=e,us(this.rank,"rank"),this.rank!==1&&this.rank!==2&&this.rank!==3)throw new Ht(`Convolution layer for rank other than 1, 2, or 3 (${this.rank}) is not implemented yet.`);if(this.kernelSize=Ah(n.kernelSize,e,"kernelSize"),this.strides=Ah(n.strides==null?1:n.strides,e,"strides"),this.padding=n.padding==null?"valid":n.padding,Si(this.padding),this.dataFormat=n.dataFormat==null?"channelsLast":n.dataFormat,Or(this.dataFormat),this.activation=yu(n.activation),this.useBias=n.useBias==null?!0:n.useBias,this.biasInitializer=sr(n.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.biasConstraint=Jr(n.biasConstraint),this.biasRegularizer=or(n.biasRegularizer),this.activityRegularizer=or(n.activityRegularizer),this.dilationRate=Ah(n.dilationRate==null?1:n.dilationRate,e,"dilationRate"),this.rank===1&&Array.isArray(this.dilationRate)&&this.dilationRate.length!==1)throw new de(`dilationRate must be a number or an array of a single number for 1D convolution, but received ${JSON.stringify(this.dilationRate)}`);if(this.rank===2){if(typeof this.dilationRate=="number")this.dilationRate=[this.dilationRate,this.dilationRate];else if(this.dilationRate.length!==2)throw new de(`dilationRate must be a number or array of two numbers for 2D convolution, but received ${JSON.stringify(this.dilationRate)}`)}else if(this.rank===3){if(typeof this.dilationRate=="number")this.dilationRate=[this.dilationRate,this.dilationRate,this.dilationRate];else if(this.dilationRate.length!==3)throw new de(`dilationRate must be a number or array of three numbers for 3D convolution, but received ${JSON.stringify(this.dilationRate)}`)}}static verifyArgs(e){if(rl("kernelSize"in e,"required key 'kernelSize' not in config"),typeof e.kernelSize!="number"&&!pR(e.kernelSize,"number",1,3))throw new de(`BaseConv expects config.kernelSize to be number or number[] with length 1, 2, or 3, but received ${JSON.stringify(e.kernelSize)}.`)}getConfig(){const e={kernelSize:this.kernelSize,strides:this.strides,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,activation:xu(this.activation),useBias:this.useBias,biasInitializer:dr(this.biasInitializer),biasRegularizer:Mn(this.biasRegularizer),activityRegularizer:Mn(this.activityRegularizer),biasConstraint:Qr(this.biasConstraint)},n=super.getConfig();return Object.assign(e,n),e}}class Pp extends F2{constructor(e,n){super(e,n),this.kernel=null,Pp.verifyArgs(n),this.filters=n.filters,us(this.filters,"filters"),this.kernelInitializer=sr(n.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.kernelConstraint=Jr(n.kernelConstraint),this.kernelRegularizer=or(n.kernelRegularizer)}build(e){e=mn(e);const n=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[n]==null)throw new de(`The channel dimension of the input should be defined. Found ${e[n]}`);const r=e[n],s=this.kernelSize.concat([r,this.filters]);this.kernel=this.addWeight("kernel",s,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[{ndim:this.rank+2,axes:{[n]:r}}],this.built=!0}call(e,n){return we(()=>{e=Ft(e);let r;const s=this.bias==null?null:this.bias.read(),o=Jj(this.activation.getClassName());if(o!=null&&this.rank===2)r=w_(e,this.kernel.read(),s,this.strides,this.padding,this.dataFormat,this.dilationRate,o);else{if(this.rank===1)r=e0e(e,this.kernel.read(),s,this.strides[0],this.padding,this.dataFormat,this.dilationRate[0]);else if(this.rank===2)r=w_(e,this.kernel.read(),s,this.strides,this.padding,this.dataFormat,this.dilationRate);else if(this.rank===3)r=t0e(e,this.kernel.read(),s,this.strides,this.padding,this.dataFormat,this.dilationRate);else throw new Ht("convolutions greater than 3D are not implemented yet.");this.activation!=null&&(r=this.activation.apply(r))}return r})}computeOutputShape(e){e=mn(e);const n=[],r=this.dataFormat==="channelsLast"?e.slice(1,e.length-1):e.slice(2);for(let o=0;o<r.length;++o){const i=Ra(r[o],this.kernelSize[o],this.padding,this.strides[o],typeof this.dilationRate=="number"?this.dilationRate:this.dilationRate[o]);n.push(i)}let s=[e[0]];return this.dataFormat==="channelsLast"?(s=s.concat(n),s.push(this.filters)):(s.push(this.filters),s=s.concat(n)),s}getConfig(){const e={filters:this.filters,kernelInitializer:dr(this.kernelInitializer),kernelRegularizer:Mn(this.kernelRegularizer),kernelConstraint:Qr(this.kernelConstraint)},n=super.getConfig();return Object.assign(e,n),e}static verifyArgs(e){if(!("filters"in e)||typeof e.filters!="number"||e.filters<1)throw new de(`Convolution layer expected config.filters to be a 'number' > 0 but got ${JSON.stringify(e.filters)}`)}}class z1 extends Pp{constructor(e){super(2,e),z1.verifyArgs(e)}getConfig(){const e=super.getConfig();return delete e.rank,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!pR(e.kernelSize,"number",1,2))throw new de(`Conv2D expects config.kernelSize to be number or number[] with length 1 or 2, but received ${JSON.stringify(e.kernelSize)}.`)}}z1.className="Conv2D";qe(z1);class V1 extends Pp{constructor(e){super(3,e),V1.verifyArgs(e)}getConfig(){const e=super.getConfig();return delete e.rank,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!(Array.isArray(e.kernelSize)&&(e.kernelSize.length===1||e.kernelSize.length===3)))throw new de(`Conv3D expects config.kernelSize to be number or [number, number, number], but received ${JSON.stringify(e.kernelSize)}.`)}}V1.className="Conv3D";qe(V1);class sz extends z1{constructor(e){if(super(e),this.inputSpec=[new Kr({ndim:4})],this.padding!=="same"&&this.padding!=="valid")throw new de(`Conv2DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ${this.padding}`)}build(e){if(e=mn(e),e.length!==4)throw new de("Input should have rank 4; Received input shape: "+JSON.stringify(e));const n=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[n]==null)throw new de("The channel dimension of the inputs should be defined. Found `None`.");const r=e[n],s=this.kernelSize.concat([this.filters,r]);this.kernel=this.addWeight("kernel",s,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new Kr({ndim:4,axes:{[n]:r}})],this.built=!0}call(e,n){return we(()=>{let r=Ft(e);if(r.shape.length!==4)throw new de(`Conv2DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-${r.shape.length}`);const s=r.shape,o=s[0];let i,a;this.dataFormat==="channelsFirst"?(i=2,a=3):(i=1,a=2);const l=s[i],c=s[a],d=this.kernelSize[0],f=this.kernelSize[1],p=this.strides[0],g=this.strides[1],x=sl(l,p,d,this.padding),b=sl(c,g,f,this.padding),w=[o,x,b,this.filters];this.dataFormat!=="channelsLast"&&(r=an(r,[0,2,3,1]));let C=QA(r,this.kernel.read(),w,this.strides,this.padding);return this.dataFormat!=="channelsLast"&&(C=an(C,[0,3,1,2])),this.bias!=null&&(C=Va(C,this.bias.read(),this.dataFormat)),this.activation!=null&&(C=this.activation.apply(C)),C})}computeOutputShape(e){e=mn(e);const n=e.slice();let r,s,o;this.dataFormat==="channelsFirst"?(r=1,s=2,o=3):(r=3,s=1,o=2);const i=this.kernelSize[0],a=this.kernelSize[1],l=this.strides[0],c=this.strides[1];return n[r]=this.filters,n[s]=sl(n[s],l,i,this.padding),n[o]=sl(n[o],c,a,this.padding),n}getConfig(){const e=super.getConfig();return delete e.dilationRate,e}}sz.className="Conv2DTranspose";qe(sz);class oz extends V1{constructor(e){if(super(e),this.inputSpec=[new Kr({ndim:5})],this.padding!=="same"&&this.padding!=="valid")throw new de(`Conv3DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ${this.padding}`)}build(e){if(e=mn(e),e.length!==5)throw new de("Input should have rank 5; Received input shape: "+JSON.stringify(e));const n=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[n]==null)throw new de("The channel dimension of the inputs should be defined. Found `None`.");const r=e[n],s=this.kernelSize.concat([this.filters,r]);this.kernel=this.addWeight("kernel",s,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new Kr({ndim:5,axes:{[n]:r}})],this.built=!0}call(e,n){return we(()=>{let r=Ft(e);if(r.shape.length!==5)throw new de(`Conv3DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-${r.shape.length}`);const s=r.shape,o=s[0];let i,a,l;this.dataFormat==="channelsFirst"?(l=2,i=3,a=4):(l=1,i=2,a=3);const c=s[l],d=s[i],f=s[a],p=this.kernelSize[0],g=this.kernelSize[1],x=this.kernelSize[2],b=this.strides[0],w=this.strides[1],C=this.strides[2],N=sl(c,b,p,this.padding),k=sl(d,w,g,this.padding),I=sl(f,C,x,this.padding),R=[o,N,k,I,this.filters];this.dataFormat!=="channelsLast"&&(r=an(r,[0,2,3,4,1]));let $=x8(r,this.kernel.read(),R,this.strides,this.padding);return this.dataFormat!=="channelsLast"&&($=an($,[0,4,1,2,3])),this.bias!==null&&($=Va($,this.bias.read(),this.dataFormat)),this.activation!==null&&($=this.activation.apply($)),$})}computeOutputShape(e){e=mn(e);const n=e.slice();let r,s,o,i;this.dataFormat==="channelsFirst"?(r=1,s=2,o=3,i=4):(r=4,s=1,o=2,i=3);const a=this.kernelSize[0],l=this.kernelSize[1],c=this.kernelSize[2],d=this.strides[0],f=this.strides[1],p=this.strides[2];return n[r]=this.filters,n[s]=sl(n[s],d,a,this.padding),n[o]=sl(n[o],f,l,this.padding),n[i]=sl(n[i],p,c,this.padding),n}getConfig(){const e=super.getConfig();return delete e.dilationRate,e}}oz.className="Conv3DTranspose";qe(oz);class iz extends Pp{constructor(e,n){if(super(e,n),this.DEFAULT_DEPTHWISE_INITIALIZER="glorotUniform",this.DEFAULT_POINTWISE_INITIALIZER="glorotUniform",this.depthwiseKernel=null,this.pointwiseKernel=null,n.filters==null)throw new de("The `filters` configuration field is required by SeparableConv, but is unspecified.");if(n.kernelInitializer!=null||n.kernelRegularizer!=null||n.kernelConstraint!=null)throw new de("Fields kernelInitializer, kernelRegularizer and kernelConstraint are invalid for SeparableConv2D. Use depthwiseInitializer, depthwiseRegularizer, depthwiseConstraint, pointwiseInitializer, pointwiseRegularizer and pointwiseConstraint instead.");if(n.padding!=null&&n.padding!=="same"&&n.padding!=="valid")throw new de(`SeparableConv${this.rank}D supports only padding modes: 'same' and 'valid', but received ${JSON.stringify(n.padding)}`);this.depthMultiplier=n.depthMultiplier==null?1:n.depthMultiplier,this.depthwiseInitializer=sr(n.depthwiseInitializer||this.DEFAULT_DEPTHWISE_INITIALIZER),this.depthwiseRegularizer=or(n.depthwiseRegularizer),this.depthwiseConstraint=Jr(n.depthwiseConstraint),this.pointwiseInitializer=sr(n.depthwiseInitializer||this.DEFAULT_POINTWISE_INITIALIZER),this.pointwiseRegularizer=or(n.pointwiseRegularizer),this.pointwiseConstraint=Jr(n.pointwiseConstraint)}build(e){if(e=mn(e),e.length<this.rank+2)throw new de(`Inputs to SeparableConv${this.rank}D should have rank ${this.rank+2}, but received input shape: ${JSON.stringify(e)}`);const n=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[n]==null||e[n]<0)throw new de(`The channel dimension of the inputs should be defined, but found ${JSON.stringify(e[n])}`);const r=e[n],s=this.kernelSize.concat([r,this.depthMultiplier]),o=[];for(let a=0;a<this.rank;++a)o.push(1);o.push(r*this.depthMultiplier,this.filters);const i=!0;this.depthwiseKernel=this.addWeight("depthwise_kernel",s,"float32",this.depthwiseInitializer,this.depthwiseRegularizer,i,this.depthwiseConstraint),this.pointwiseKernel=this.addWeight("pointwise_kernel",o,"float32",this.pointwiseInitializer,this.pointwiseRegularizer,i,this.pointwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,i,this.biasConstraint):this.bias=null,this.inputSpec=[new Kr({ndim:this.rank+2,axes:{[n]:r}})],this.built=!0}call(e,n){return we(()=>{e=Ft(e);let r;if(this.rank===1)throw new Ht("1D separable convolution is not implemented yet.");return this.rank===2&&(this.dataFormat==="channelsFirst"&&(e=an(e,[0,2,3,1])),r=C3(e,this.depthwiseKernel.read(),this.pointwiseKernel.read(),this.strides,this.padding,this.dilationRate,"NHWC")),this.useBias&&(r=Va(r,this.bias.read(),this.dataFormat)),this.activation!=null&&(r=this.activation.apply(r)),this.dataFormat==="channelsFirst"&&(r=an(r,[0,3,1,2])),r})}getConfig(){const e=super.getConfig();return delete e.rank,delete e.kernelInitializer,delete e.kernelRegularizer,delete e.kernelConstraint,e.depthwiseInitializer=dr(this.depthwiseInitializer),e.pointwiseInitializer=dr(this.pointwiseInitializer),e.depthwiseRegularizer=Mn(this.depthwiseRegularizer),e.pointwiseRegularizer=Mn(this.pointwiseRegularizer),e.depthwiseConstraint=Qr(this.depthwiseConstraint),e.pointwiseConstraint=Qr(this.pointwiseConstraint),e}}iz.className="SeparableConv";class az extends iz{constructor(e){super(2,e)}}az.className="SeparableConv2D";qe(az);class M2 extends Pp{constructor(e){super(1,e),M2.verifyArgs(e),this.inputSpec=[{ndim:3}]}getConfig(){const e=super.getConfig();return delete e.rank,delete e.dataFormat,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!pR(e.kernelSize,"number",1,1))throw new de(`Conv1D expects config.kernelSize to be number or number[] with length 1, but received ${JSON.stringify(e.kernelSize)}.`)}}M2.className="Conv1D";qe(M2);class lz extends Qt{constructor(e){super(e),typeof e.cropping=="number"?this.cropping=[[e.cropping,e.cropping],[e.cropping,e.cropping]]:typeof e.cropping[0]=="number"?this.cropping=[[e.cropping[0],e.cropping[0]],[e.cropping[1],e.cropping[1]]]:this.cropping=e.cropping,this.dataFormat=e.dataFormat===void 0?"channelsLast":e.dataFormat,this.inputSpec=[{ndim:4}]}computeOutputShape(e){return this.dataFormat==="channelsFirst"?[e[0],e[1],e[2]-this.cropping[0][0]-this.cropping[0][1],e[3]-this.cropping[1][0]-this.cropping[1][1]]:[e[0],e[1]-this.cropping[0][0]-this.cropping[0][1],e[2]-this.cropping[1][0]-this.cropping[1][1],e[3]]}call(e,n){return we(()=>{if(e=Ft(e),this.dataFormat==="channelsLast"){const r=qx(e,this.cropping[0][0],e.shape[1]-this.cropping[0][0]-this.cropping[0][1],2);return qx(r,this.cropping[1][0],e.shape[2]-this.cropping[1][1]-this.cropping[1][0],3)}else{const r=qx(e,this.cropping[0][0],e.shape[2]-this.cropping[0][0]-this.cropping[0][1],3);return qx(r,this.cropping[1][0],e.shape[3]-this.cropping[1][1]-this.cropping[1][0],4)}})}getConfig(){const e={cropping:this.cropping,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}lz.className="Cropping2D";qe(lz);class cz extends Qt{constructor(e){super(e),this.DEFAULT_SIZE=[2,2],this.inputSpec=[{ndim:4}],this.size=e.size==null?this.DEFAULT_SIZE:e.size,this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,Or(this.dataFormat),this.interpolation=e.interpolation==null?"nearest":e.interpolation,Dme(this.interpolation)}computeOutputShape(e){if(this.dataFormat==="channelsFirst"){const n=e[2]==null?null:this.size[0]*e[2],r=e[3]==null?null:this.size[1]*e[3];return[e[0],e[1],n,r]}else{const n=e[1]==null?null:this.size[0]*e[1],r=e[2]==null?null:this.size[1]*e[2];return[e[0],n,r,e[3]]}}call(e,n){return we(()=>{let r=Ft(e);const s=r.shape;if(this.dataFormat==="channelsFirst"){r=an(r,[0,2,3,1]);const o=this.size[0]*s[2],i=this.size[1]*s[3],a=this.interpolation==="nearest"?Gi.resizeNearestNeighbor(r,[o,i]):Gi.resizeBilinear(r,[o,i]);return an(a,[0,3,1,2])}else{const o=this.size[0]*s[1],i=this.size[1]*s[2];return this.interpolation==="nearest"?Gi.resizeNearestNeighbor(r,[o,i]):Gi.resizeBilinear(r,[o,i])}})}getConfig(){const e={size:this.size,dataFormat:this.dataFormat,interpolation:this.interpolation},n=super.getConfig();return Object.assign(e,n),e}}cz.className="UpSampling2D";qe(cz);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function n0e(t,e,n=[1,1],r="valid",s,o){return we(()=>{s==null&&(s=Pa()),Or(s);let i=TR(t,s);if(t.rank!==4)throw new de(`Input for depthwiseConv2d is required to be 4-D, but is instead ${t.rank}-D`);if(e.rank!==4)throw new de(`depthwiseKernel is required to be 4-D, but is instead ${e.rank}-D`);return i=k1(i,e,n,r==="same"?"same":"valid","NHWC",o),s==="channelsFirst"&&(i=an(i,[0,3,1,2])),i})}class uz extends F2{constructor(e){super(2,e),this.depthwiseKernel=null,this.depthMultiplier=e.depthMultiplier==null?1:e.depthMultiplier,this.depthwiseInitializer=sr(e.depthwiseInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.depthwiseConstraint=Jr(e.depthwiseConstraint),this.depthwiseRegularizer=or(e.depthwiseRegularizer)}build(e){if(e=mn(e),e.length<4)throw new de(`Inputs to DepthwiseConv2D should have rank 4. Received input shape: ${JSON.stringify(e)}.`);const n=this.dataFormat==="channelsFirst"?1:3;if(e[n]==null||e[n]<0)throw new de(`The channel dimension of the inputs to DepthwiseConv2D should be defined, but is not (${e[n]}).`);const r=e[n],s=[this.kernelSize[0],this.kernelSize[1],r,this.depthMultiplier];this.depthwiseKernel=this.addWeight("depthwise_kernel",s,null,this.depthwiseInitializer,this.depthwiseRegularizer,!0,this.depthwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[r*this.depthMultiplier],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,n){return we(()=>{e=Ft(e);let r=n0e(e,this.depthwiseKernel.read(),this.strides,this.padding,this.dataFormat,null);return this.useBias&&(r=Va(r,this.bias.read(),this.dataFormat)),this.activation!=null&&(r=this.activation.apply(r)),r})}computeOutputShape(e){e=mn(e);const n=this.dataFormat==="channelsFirst"?e[2]:e[1],r=this.dataFormat==="channelsFirst"?e[3]:e[2],s=this.dataFormat==="channelsFirst"?e[1]*this.depthMultiplier:e[3]*this.depthMultiplier,o=Ra(n,this.kernelSize[0],this.padding,this.strides[0]),i=Ra(r,this.kernelSize[1],this.padding,this.strides[1]);return this.dataFormat==="channelsFirst"?[e[0],s,o,i]:[e[0],o,i,s]}getConfig(){const e=super.getConfig();return e.depthMultiplier=this.depthMultiplier,e.depthwiseInitializer=dr(this.depthwiseInitializer),e.depthwiseRegularizer=Mn(this.depthwiseRegularizer),e.depthwiseConstraint=Qr(this.depthwiseRegularizer),e}}uz.className="DepthwiseConv2D";qe(uz);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function dz(t,e,n,r){if(Array.isArray(t)){if(e!=null||n!=null)throw new de("When inputs is an array, neither initialState or constants should be provided");r!=null&&(n=t.slice(t.length-r,t.length),t=t.slice(0,t.length-r)),t.length>1&&(e=t.slice(1,t.length)),t=t[0]}function s(o){return o==null||Array.isArray(o)?o:[o]}return e=s(e),n=s(n),{inputs:t,initialState:e,constants:n}}function fz(t,e,n,r=!1,s,o,i=!1,a=!1){return we(()=>{const l=e.shape.length;if(l<3)throw new de(`Input should be at least 3D, but is ${l}D.`);const c=[1,0].concat(_a(2,l));e=an(e,c),i&&console.warn("Backend rnn(): the unroll = true option is not applicable to the imperative deeplearn.js backend."),s!=null&&(s=nt(nt(s,"bool"),"float32"),s.rank===l-1&&(s=Ls(s,-1)),s=an(s,c)),r&&(e=na(e,0),s!=null&&(s=na(s,0)));const d=[];let f,p=n;const g=e.shape[0],x=ra(e);let b;s!=null&&(b=ra(s));for(let C=0;C<g;++C){const N=x[C],k=we(()=>t(N,p));if(s==null)f=k[0],p=k[1];else{const I=we(()=>{const R=b[C],$=lt(yi(R),R),O=Ue(ie(k[0],R),ie(p[0],$)),F=p.map((M,_)=>Ue(ie(k[1][_],R),ie(M,$)));return{output:O,newStates:F}});f=I.output,p=I.newStates}a&&d.push(f)}let w;return a&&(w=Zo(d,1)),[f,w,p]})}class Mu extends Qt{constructor(e){super(e);let n;if(e.cell==null)throw new de("cell property is missing for the constructor of RNN.");if(Array.isArray(e.cell)?n=new DR({cells:e.cell}):n=e.cell,n.stateSize==null)throw new de("The RNN cell should have an attribute `stateSize` (tuple of integers, one integer per RNN state).");this.cell=n,this.returnSequences=e.returnSequences==null?!1:e.returnSequences,this.returnState=e.returnState==null?!1:e.returnState,this.goBackwards=e.goBackwards==null?!1:e.goBackwards,this._stateful=e.stateful==null?!1:e.stateful,this.unroll=e.unroll==null?!1:e.unroll,this.supportsMasking=!0,this.inputSpec=[new Kr({ndim:3})],this.stateSpec=null,this.states_=null,this.numConstants=null,this.keptStates=[]}getStates(){if(this.states_==null){const e=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;return _a(0,e).map(n=>null)}else return this.states_}setStates(e){this.states_=e}computeOutputShape(e){pI(e)&&(e=e[0]),e=e;let n=this.cell.stateSize;Array.isArray(n)||(n=[n]);const r=n[0];let s;if(this.returnSequences?s=[e[0],e[1],r]:s=[e[0],r],this.returnState){const o=[];for(const i of n)o.push([e[0],i]);return[s].concat(o)}else return s}computeMask(e,n){return we(()=>{Array.isArray(n)&&(n=n[0]);const r=this.returnSequences?n:null;if(this.returnState){const s=this.states.map(o=>null);return[r].concat(s)}else return r})}get states(){if(this.states_==null){const e=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1,n=[];for(let r=0;r<e;++r)n.push(null);return n}else return this.states_}set states(e){this.states_=e}build(e){if(this.numConstants!=null)throw new Ht("Constants support is not implemented in RNN yet.");pI(e)&&(e=e[0]),e=e;const n=this.stateful?e[0]:null,r=e.slice(2);this.inputSpec[0]=new Kr({shape:[n,null,...r]});const s=[e[0]].concat(e.slice(2));this.cell.build(s);let o;if(Array.isArray(this.cell.stateSize)?o=this.cell.stateSize:o=[this.cell.stateSize],this.stateSpec!=null){if(!nn(this.stateSpec.map(i=>i.shape[i.shape.length-1]),o))throw new de(`An initialState was passed that is not compatible with cell.stateSize. Received stateSpec=${this.stateSpec}; However cell.stateSize is ${this.cell.stateSize}`)}else this.stateSpec=o.map(i=>new Kr({shape:[null,i]}));this.stateful&&this.resetStates()}resetStates(e,n=!1){we(()=>{if(!this.stateful)throw new nl("Cannot call resetStates() on an RNN Layer that is not stateful.");const r=this.inputSpec[0].shape[0];if(r==null)throw new de("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(this.states_==null)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(s=>qr([r,s])):this.states_=[qr([r,this.cell.stateSize])];else if(e==null)Yt(this.states_),this.keptStates!=null&&(Yt(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(s=>qr([r,s])):this.states_[0]=qr([r,this.cell.stateSize]);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new de(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${e.length} state value(s). Input received: ${e}`);n===!0?this.keptStates.push(this.states_.slice()):Yt(this.states_);for(let s=0;s<this.states_.length;++s){const o=e[s],i=Array.isArray(this.cell.stateSize)?this.cell.stateSize[s]:this.cell.stateSize,a=[r,i];if(!nn(o.shape,a))throw new de(`State ${s} is incompatible with layer ${this.name}: expected shape=${a}, received shape=${o.shape}`);this.states_[s]=o}}this.states_=this.states_.map(s=>ls(s.clone()))})}apply(e,n){let r=n==null?null:n.initialState,s=n==null?null:n.constants;n==null&&(n={});const o=dz(e,r,s,this.numConstants);e=o.inputs,r=o.initialState,s=o.constants;let i=[],a=[];if(r!=null){n.initialState=r,i=i.concat(r),this.stateSpec=[];for(const c of r)this.stateSpec.push(new Kr({shape:c.shape}));a=a.concat(this.stateSpec)}if(s!=null&&(n.constants=s,i=i.concat(s),this.numConstants=s.length),i[0]instanceof El){const c=[e].concat(i),d=this.inputSpec.concat(a),f=this.inputSpec;this.inputSpec=d;const p=super.apply(c,n);return this.inputSpec=f,p}else return super.apply(e,n)}call(e,n){return we(()=>{const r=n==null?null:n.mask,s=n==null?null:n.training;let o=n==null?null:n.initialState;e=Ft(e),o==null&&(this.stateful?o=this.states_:o=this.getInitialState(e));const i=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;if(o.length!==i)throw new de(`RNN Layer has ${i} state(s) but was passed ${o.length} initial state(s).`);this.unroll&&console.warn("Ignoring unroll = true for RNN layer, due to imperative backend.");const a={training:s},c=fz((x,b)=>{const w=this.cell.call([x].concat(b),a);return[w[0],w.slice(1)]},e,o,this.goBackwards,r,null,this.unroll,this.returnSequences),d=c[0],f=c[1],p=c[2];this.stateful&&this.resetStates(p,s);const g=this.returnSequences?f:d;return this.returnState?[g].concat(p):g})}getInitialState(e){return we(()=>{let n=qr(e.shape);return n=bt(n,[1,2]),n=F1(n),Array.isArray(this.cell.stateSize)?this.cell.stateSize.map(r=>r>1?fI(n,[1,r]):n):this.cell.stateSize>1?[fI(n,[1,this.cell.stateSize])]:[n]})}get trainableWeights(){return this.trainable?this.cell.trainableWeights:[]}get nonTrainableWeights(){return this.trainable?this.cell.nonTrainableWeights:this.cell.weights}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),this.cell!=null&&this.cell.setFastWeightInitDuringBuild(e)}getConfig(){const e=super.getConfig(),n={returnSequences:this.returnSequences,returnState:this.returnState,goBackwards:this.goBackwards,stateful:this.stateful,unroll:this.unroll};this.numConstants!=null&&(n.numConstants=this.numConstants);const r=this.cell.getConfig();return this.getClassName()===Mu.className&&(n.cell={className:this.cell.getClassName(),config:r}),Object.assign(Object.assign(Object.assign({},r),e),n)}static fromConfig(e,n,r={}){const s=n.cell,o=Ql(s,r);return new e(Object.assign(n,{cell:o}))}}Mu.className="RNN";qe(Mu);class L2 extends Qt{}class AR extends L2{constructor(e){super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=e.units,us(this.units,"units"),this.activation=yu(e.activation==null?this.DEFAULT_ACTIVATION:e.activation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=sr(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=sr(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=sr(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=or(e.kernelRegularizer),this.recurrentRegularizer=or(e.recurrentRegularizer),this.biasRegularizer=or(e.biasRegularizer),this.kernelConstraint=Jr(e.kernelConstraint),this.recurrentConstraint=Jr(e.recurrentConstraint),this.biasConstraint=Jr(e.biasConstraint),this.dropout=Jh([1,gu([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=Jh([1,gu([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){e=mn(e),this.kernel=this.addWeight("kernel",[e[e.length-1],this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,n){return we(()=>{if(e=e,e.length!==2)throw new de(`SimpleRNNCell expects 2 input Tensors, got ${e.length}.`);let r=e[1];e=e[0];const s=n.training==null?!1:n.training;0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=bu({ones:()=>yi(e),rate:this.dropout,training:s,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=bu({ones:()=>yi(r),rate:this.recurrentDropout,training:s,dropoutFunc:this.dropoutFunc}));let o;const i=this.dropoutMask,a=this.recurrentDropoutMask;i!=null?o=bl(ie(e,i),this.kernel.read()):o=bl(e,this.kernel.read()),this.bias!=null&&(o=Va(o,this.bias.read())),a!=null&&(r=ie(r,a));let l=Ue(o,bl(r,this.recurrentKernel.read()));return this.activation!=null&&(l=this.activation.apply(l)),[l,l]})}getConfig(){const e=super.getConfig(),n={units:this.units,activation:xu(this.activation),useBias:this.useBias,kernelInitializer:dr(this.kernelInitializer),recurrentInitializer:dr(this.recurrentInitializer),biasInitializer:dr(this.biasInitializer),kernelRegularizer:Mn(this.kernelRegularizer),recurrentRegularizer:Mn(this.recurrentRegularizer),biasRegularizer:Mn(this.biasRegularizer),activityRegularizer:Mn(this.activityRegularizer),kernelConstraint:Qr(this.kernelConstraint),recurrentConstraint:Qr(this.recurrentConstraint),biasConstraint:Qr(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout};return Object.assign(Object.assign({},e),n)}}AR.className="SimpleRNNCell";qe(AR);class hz extends Mu{constructor(e){e.cell=new AR(e),super(e)}call(e,n){return we(()=>{this.cell.dropoutMask!=null&&(Yt(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(Yt(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const r=n==null?null:n.mask,s=n==null?null:n.training,o=n==null?null:n.initialState;return super.call(e,{mask:r,training:s,initialState:o})})}static fromConfig(e,n){return new e(n)}}hz.className="SimpleRNN";qe(hz);class RR extends L2{constructor(e){if(super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",e.resetAfter)throw new de("GRUCell does not support reset_after parameter set to true.");this.units=e.units,us(this.units,"units"),this.activation=yu(e.activation===void 0?this.DEFAULT_ACTIVATION:e.activation),this.recurrentActivation=yu(e.recurrentActivation===void 0?this.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=sr(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=sr(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=sr(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=or(e.kernelRegularizer),this.recurrentRegularizer=or(e.recurrentRegularizer),this.biasRegularizer=or(e.biasRegularizer),this.kernelConstraint=Jr(e.kernelConstraint),this.recurrentConstraint=Jr(e.recurrentConstraint),this.biasConstraint=Jr(e.biasConstraint),this.dropout=Jh([1,gu([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=Jh([1,gu([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.implementation=e.implementation,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){e=mn(e);const n=e[e.length-1];this.kernel=this.addWeight("kernel",[n,this.units*3],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units*3],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units*3],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,n){return we(()=>{if(e=e,e.length!==2)throw new de(`GRUCell expects 2 input Tensors (inputs, h, c), got ${e.length}.`);const r=n.training==null?!1:n.training;let s=e[1];e=e[0],0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=bu({ones:()=>yi(e),rate:this.dropout,training:r,count:3,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=bu({ones:()=>yi(s),rate:this.recurrentDropout,training:r,count:3,dropoutFunc:this.dropoutFunc}));const o=this.dropoutMask,i=this.recurrentDropoutMask;let a,l,c;0<this.dropout&&this.dropout<1&&(e=ie(e,o[0]));let d=bl(e,this.kernel.read());this.useBias&&(d=Va(d,this.bias.read())),0<this.recurrentDropout&&this.recurrentDropout<1&&(s=ie(s,i[0]));const f=this.recurrentKernel.read(),[p,g]=Ho(f,[2*this.units,this.units],f.rank-1),x=bl(s,p),[b,w,C]=Ho(d,3,d.rank-1),[N,k]=Ho(x,2,x.rank-1);a=this.recurrentActivation.apply(Ue(b,N)),l=this.recurrentActivation.apply(Ue(w,k));const I=bl(ie(l,s),g);c=this.activation.apply(Ue(C,I));const R=Ue(ie(a,s),ie(Ue(1,Jn(a)),c));return[R,R]})}getConfig(){const e=super.getConfig(),n={units:this.units,activation:xu(this.activation),recurrentActivation:xu(this.recurrentActivation),useBias:this.useBias,kernelInitializer:dr(this.kernelInitializer),recurrentInitializer:dr(this.recurrentInitializer),biasInitializer:dr(this.biasInitializer),kernelRegularizer:Mn(this.kernelRegularizer),recurrentRegularizer:Mn(this.recurrentRegularizer),biasRegularizer:Mn(this.biasRegularizer),activityRegularizer:Mn(this.activityRegularizer),kernelConstraint:Qr(this.kernelConstraint),recurrentConstraint:Qr(this.recurrentConstraint),biasConstraint:Qr(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation,resetAfter:!1};return Object.assign(Object.assign({},e),n)}}RR.className="GRUCell";qe(RR);class pz extends Mu{constructor(e){e.implementation===0&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new RR(e),super(e)}call(e,n){return we(()=>{this.cell.dropoutMask!=null&&(Yt(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(Yt(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const r=n==null?null:n.mask,s=n==null?null:n.training,o=n==null?null:n.initialState;return super.call(e,{mask:r,training:s,initialState:o})})}static fromConfig(e,n){return n.implmentation===0&&(n.implementation=1),new e(n)}}pz.className="GRU";qe(pz);class B2 extends L2{constructor(e){super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=e.units,us(this.units,"units"),this.activation=yu(e.activation===void 0?this.DEFAULT_ACTIVATION:e.activation),this.recurrentActivation=yu(e.recurrentActivation===void 0?this.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=sr(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=sr(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=sr(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.unitForgetBias=e.unitForgetBias,this.kernelRegularizer=or(e.kernelRegularizer),this.recurrentRegularizer=or(e.recurrentRegularizer),this.biasRegularizer=or(e.biasRegularizer),this.kernelConstraint=Jr(e.kernelConstraint),this.recurrentConstraint=Jr(e.recurrentConstraint),this.biasConstraint=Jr(e.biasConstraint),this.dropout=Jh([1,gu([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=Jh([1,gu([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.implementation=e.implementation,this.stateSize=[this.units,this.units],this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){var n;e=mn(e);const r=e[e.length-1];this.kernel=this.addWeight("kernel",[r,this.units*4],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units*4],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint);let s;if(this.useBias){if(this.unitForgetBias){const o=this.biasInitializer,i=this.units;s=new(n=class extends aa{apply(l,c){const d=o.apply([i]),f=new gR().apply([i]),p=o.apply([i*2]);return r_(r_(d,f),p)}},n.className="CustomInit",n)}else s=this.biasInitializer;this.bias=this.addWeight("bias",[this.units*4],null,s,this.biasRegularizer,!0,this.biasConstraint)}else this.bias=null;this.built=!0}call(e,n){return we(()=>{const r=n.training==null?!1:n.training;if(e=e,e.length!==3)throw new de(`LSTMCell expects 3 input Tensors (inputs, h, c), got ${e.length}.`);let s=e[1];const o=e[2];e=e[0],0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=bu({ones:()=>yi(e),rate:this.dropout,training:r,count:4,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=bu({ones:()=>yi(s),rate:this.recurrentDropout,training:r,count:4,dropoutFunc:this.dropoutFunc}));const i=this.dropoutMask,a=this.recurrentDropoutMask;let l,c,d,f;0<this.dropout&&this.dropout<1&&(e=ie(e,i[0]));let p=bl(e,this.kernel.read());0<this.recurrentDropout&&this.recurrentDropout<1&&(s=ie(s,a[0])),p=Ue(p,bl(s,this.recurrentKernel.read())),this.useBias&&(p=Va(p,this.bias.read()));const[g,x,b,w]=Ho(p,4,p.rank-1);l=this.recurrentActivation.apply(g),c=this.recurrentActivation.apply(x),d=Ue(ie(c,o),ie(l,this.activation.apply(b))),f=this.recurrentActivation.apply(w);const C=ie(f,this.activation.apply(d));return[C,C,d]})}getConfig(){const e=super.getConfig(),n={units:this.units,activation:xu(this.activation),recurrentActivation:xu(this.recurrentActivation),useBias:this.useBias,kernelInitializer:dr(this.kernelInitializer),recurrentInitializer:dr(this.recurrentInitializer),biasInitializer:dr(this.biasInitializer),unitForgetBias:this.unitForgetBias,kernelRegularizer:Mn(this.kernelRegularizer),recurrentRegularizer:Mn(this.recurrentRegularizer),biasRegularizer:Mn(this.biasRegularizer),activityRegularizer:Mn(this.activityRegularizer),kernelConstraint:Qr(this.kernelConstraint),recurrentConstraint:Qr(this.recurrentConstraint),biasConstraint:Qr(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation};return Object.assign(Object.assign({},e),n)}}B2.className="LSTMCell";qe(B2);class mz extends Mu{constructor(e){e.implementation===0&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new B2(e),super(e)}call(e,n){return we(()=>{this.cell.dropoutMask!=null&&(Yt(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(Yt(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const r=n==null?null:n.mask,s=n==null?null:n.training,o=n==null?null:n.initialState;return super.call(e,{mask:r,training:s,initialState:o})})}static fromConfig(e,n){return n.implmentation===0&&(n.implementation=1),new e(n)}}mz.className="LSTM";qe(mz);class DR extends L2{constructor(e){super(e),this.cells=e.cells}get stateSize(){const e=[];for(const n of this.cells.slice().reverse())Array.isArray(n.stateSize)?e.push(...n.stateSize):e.push(n.stateSize);return e}call(e,n){return we(()=>{e=e;let r=e.slice(1);const s=[];for(const a of this.cells.slice().reverse())Array.isArray(a.stateSize)?s.push(r.splice(0,a.stateSize.length)):s.push(r.splice(0,1));s.reverse();const o=[];let i;for(let a=0;a<this.cells.length;++a){const l=this.cells[a];r=s[a],a===0?i=[e[0]].concat(r):i=[i[0]].concat(r),i=l.call(i,n),o.push(i.slice(1))}r=[];for(const a of o.slice().reverse())r.push(...a);return[i[0]].concat(r)})}build(e){pI(e)&&(e=e[0]),e=e;let n;this.cells.forEach((r,s)=>{Td(`RNNCell_${s}`,()=>{r.build(e),Array.isArray(r.stateSize)?n=r.stateSize[0]:n=r.stateSize,e=[e[0],n]})}),this.built=!0}getConfig(){const e=super.getConfig(),n=o=>({className:o.getClassName(),config:o.getConfig()}),s={cells:this.cells.map(n)};return Object.assign(Object.assign({},e),s)}static fromConfig(e,n,r={}){const s=[];for(const o of n.cells)s.push(Ql(o,r));return new e({cells:s})}get trainableWeights(){if(!this.trainable)return[];const e=[];for(const n of this.cells)e.push(...n.trainableWeights);return e}get nonTrainableWeights(){const e=[];for(const n of this.cells)e.push(...n.nonTrainableWeights);if(!this.trainable){const n=[];for(const r of this.cells)n.push(...r.trainableWeights);return n.concat(e)}return e}getWeights(){const e=[];for(const n of this.cells)e.push(...n.weights);return mI(e)}setWeights(e){const n=[];for(const r of this.cells){const s=r.weights.length,o=e.splice(s);for(let i=0;i<r.weights.length;++i)n.push([r.weights[i],o[i]])}SR(n)}}DR.className="StackedRNNCells";qe(DR);function bu(t){const{ones:e,rate:n,training:r=!1,count:s=1,dropoutFunc:o}=t,i=()=>o!=null?o(e(),n):i7(e(),n),a=()=>L1(i,e,r);return!s||s<=1?ls(a().clone()):Array(s).fill(void 0).map(a).map(c=>ls(c.clone()))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */var r0e=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n};class gz extends Mu{constructor(e){if(e.unroll)throw new Ht("Unrolling is not possible with convolutional RNNs.");if(Array.isArray(e.cell))throw new Ht("It is not possible at the moment to stack convolutional cells.");super(e),this.inputSpec=[new Kr({ndim:5})]}call(e,n){return we(()=>{if(this.cell.dropoutMask!=null&&(Yt(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(Yt(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null),n&&n.constants)throw new de("ConvRNN2D cell does not support constants");const r=n==null?null:n.mask,s=n==null?null:n.training,o=n==null?null:n.initialState;return super.call(e,{mask:r,training:s,initialState:o})})}computeOutputShape(e){let n=this.computeSingleOutputShape(e);return this.returnSequences||(n=[n[0],...n.slice(2)]),this.returnState&&(n=[n,...Array(2).fill([e[0],...n.slice(-3)])]),n}getInitialState(e){return we(()=>{const{stateSize:n}=this.cell,r=e.shape,s=this.computeSingleOutputShape(r),o=[s[0],...s.slice(2)],i=qr(o);return Array.isArray(n)?Array(n.length).fill(i):[i]})}resetStates(e,n=!1){we(()=>{if(!this.stateful)throw new nl("Cannot call resetStates() on an RNN Layer that is not stateful.");const r=this.inputSpec[0].shape,s=this.computeSingleOutputShape(r),o=[s[0],...s.slice(2)];if(r[0]==null)throw new de("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(this.getStates()==null)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>qr(o)):this.states_=[qr(o)];else if(e==null)Yt(this.states_),this.keptStates!=null&&(Yt(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>qr(o)):this.states_[0]=qr(o);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new de(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${e.length} state value(s). Input received: ${e}`);n?this.keptStates.push(this.states_.slice()):Yt(this.states_);for(let a=0;a<this.states_.length;++a){const l=e[a],c=o;if(!nn(l.shape,c))throw new de(`State ${a} is incompatible with layer ${this.name}: expected shape=${c}, received shape=${l.shape}`);this.states_[a]=l}}this.states_=this.states_.map(a=>ls(a.clone()))})}computeSingleOutputShape(e){const{dataFormat:n,filters:r,kernelSize:s,padding:o,strides:i,dilationRate:a}=this.cell,l=n==="channelsFirst",c=e[l?3:2],d=e[l?4:3],f=Ra(c,s[0],o,i[0],a[0]),p=Ra(d,s[1],o,i[1],a[1]);return[...e.slice(0,2),...l?[r,f,p]:[f,p,r]]}}gz.className="ConvRNN2D";class $R extends B2{constructor(e){const{filters:n,kernelSize:r,strides:s,padding:o,dataFormat:i,dilationRate:a}=e;super(Object.assign(Object.assign({},e),{units:n})),this.filters=n,us(this.filters,"filters"),this.kernelSize=Ah(r,2,"kernelSize"),this.kernelSize.forEach(l=>us(l,"kernelSize")),this.strides=Ah(s||1,2,"strides"),this.strides.forEach(l=>us(l,"strides")),this.padding=o||"valid",Si(this.padding),this.dataFormat=i||"channelsLast",Or(this.dataFormat),this.dilationRate=Ah(a||1,2,"dilationRate"),this.dilationRate.forEach(l=>us(l,"dilationRate"))}build(e){var n;e=mn(e);const r=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[r]==null)throw new de(`The channel dimension of the input should be defined. Found ${e[r]}`);const s=e[r],o=4,i=this.kernelSize.concat([s,this.filters*o]);this.kernel=this.addWeight("kernel",i,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint);const a=this.kernelSize.concat([this.filters,this.filters*o]);if(this.recurrentKernel=this.addWeight("recurrent_kernel",a,null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){let l;if(this.unitForgetBias){const c=this.biasInitializer,d=this.filters;l=new(n=class extends aa{apply(p,g){const x=c.apply([d]),b=jo([d]),w=c.apply([d*2]);return mR([x,b,w])}},n.className="CustomInit",n)}else l=this.biasInitializer;this.bias=this.addWeight("bias",[this.filters*o],null,l,this.biasRegularizer,!0,this.biasConstraint)}this.built=!0}call(e,n){return we(()=>{if(e.length!==3)throw new de(`ConvLSTM2DCell expects 3 input Tensors (inputs, h, c), got ${e.length}.`);const r=n.training||!1,s=e[0],o=e[1],i=e[2],a=4;0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=bu({ones:()=>yi(s),rate:this.dropout,training:r,count:a,dropoutFunc:this.dropoutFunc}));const l=this.dropoutMask,c=(ee,ne,oe)=>!ne||!ne[oe]?ee:ie(ne[oe],ee);let d=c(s,l,0),f=c(s,l,1),p=c(s,l,2),g=c(s,l,3);0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=bu({ones:()=>yi(o),rate:this.recurrentDropout,training:r,count:a,dropoutFunc:this.dropoutFunc}));const x=this.recurrentDropoutMask;let b=c(o,x,0),w=c(o,x,1),C=c(o,x,2),N=c(o,x,3);const k=3,[I,R,$,O]=Ho(this.kernel.read(),a,k),[F,M,_,V]=this.useBias?Ho(this.bias.read(),a):[null,null,null,null];d=this.inputConv(d,I,F,this.padding),f=this.inputConv(f,R,M,this.padding),p=this.inputConv(p,$,_,this.padding),g=this.inputConv(g,O,V,this.padding);const[B,W,q,j]=Ho(this.recurrentKernel.read(),a,k);b=this.recurrentConv(b,B),w=this.recurrentConv(w,W),C=this.recurrentConv(C,q),N=this.recurrentConv(N,j);const G=this.recurrentActivation.apply(Ue(d,b)),Z=this.recurrentActivation.apply(Ue(f,w)),J=Ue(ie(Z,i),ie(G,this.activation.apply(Ue(p,C)))),X=ie(this.recurrentActivation.apply(Ue(g,N)),this.activation.apply(J));return[X,X,J]})}getConfig(){const e=super.getConfig(),{units:n}=e,r=r0e(e,["units"]),s={filters:this.filters,kernelSize:this.kernelSize,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,strides:this.strides};return Object.assign(Object.assign({},r),s)}inputConv(e,n,r,s){const o=mu(e,n,this.strides,s||"valid",this.dataFormat==="channelsFirst"?"NCHW":"NHWC",this.dilationRate);return r?Va(o,r,this.dataFormat):o}recurrentConv(e,n){return mu(e,n,1,"same",this.dataFormat==="channelsFirst"?"NCHW":"NHWC")}}$R.className="ConvLSTM2DCell";qe($R);class xz extends gz{constructor(e){const n=new $R(e);super(Object.assign(Object.assign({},e),{cell:n}))}static fromConfig(e,n){return new e(n)}}xz.className="ConvLSTM2D";qe(xz);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class OR extends Qt{constructor(e){super(e),this.rate=Math.max(Math.min(e.rate,1),0),this.noiseShape=e.noiseShape,this.seed=e.seed,this.supportsMasking=!0}getNoiseShape(e){if(this.noiseShape==null)return this.noiseShape;const n=e.shape,r=[];for(let s=0;s<this.noiseShape.length;++s)r.push(this.noiseShape[s]==null?n[s]:this.noiseShape[s]);return r}call(e,n){return we(()=>{this.invokeCallHook(e,n);const r=Ft(e);if(0<this.rate&&this.rate<1){const s=n.training==null?!1:n.training,o=this.getNoiseShape(r);return L1(()=>i7(r,this.rate,o,this.seed),()=>r,s)}return e})}getConfig(){const e={rate:this.rate,noiseShape:this.noiseShape,seed:this.seed},n=super.getConfig();return Object.assign(e,n),e}dispose(){return super.dispose()}}OR.className="Dropout";qe(OR);class yz extends OR{constructor(e){super(e),this.inputSpec=[{ndim:3}]}getNoiseShape(e){const n=e.shape;return[n[0],1,n[2]]}}yz.className="SpatialDropout1D";qe(yz);class bz extends Qt{constructor(e){if(super(e),this.activation=null,this.useBias=!0,this.kernel=null,this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",e.batchInputShape==null&&e.inputShape==null&&e.inputDim!=null){let n=null;e.batchSize!=null&&(n=e.batchSize),this.batchInputShape=[n,e.inputDim]}this.units=e.units,us(this.units,"units"),this.activation=yu(e.activation),e.useBias!=null&&(this.useBias=e.useBias),this.kernelInitializer=sr(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.biasInitializer=sr(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelConstraint=Jr(e.kernelConstraint),this.biasConstraint=Jr(e.biasConstraint),this.kernelRegularizer=or(e.kernelRegularizer),this.biasRegularizer=or(e.biasRegularizer),this.activityRegularizer=or(e.activityRegularizer),this.supportsMasking=!0,this.inputSpec=[{minNDim:2}]}build(e){e=mn(e);const n=e[e.length-1];this.kernel==null&&(this.kernel=this.addWeight("kernel",[n,this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint))),this.inputSpec=[{minNDim:2,axes:{[-1]:n}}],this.built=!0}computeOutputShape(e){e=mn(e);const n=e.slice();return n[n.length-1]=this.units,n}call(e,n){return we(()=>{this.invokeCallHook(e,n);const r=Ft(e),s=Jj(this.activation.getClassName());let o;return s!=null?o=bl(r,this.kernel.read(),s,this.bias?this.bias.read():null):(o=bl(r,this.kernel.read()),this.bias!=null&&(o=Va(o,this.bias.read())),this.activation!=null&&(o=this.activation.apply(o))),o})}getConfig(){const e={units:this.units,activation:xu(this.activation),useBias:this.useBias,kernelInitializer:dr(this.kernelInitializer),biasInitializer:dr(this.biasInitializer),kernelRegularizer:Mn(this.kernelRegularizer),biasRegularizer:Mn(this.biasRegularizer),activityRegularizer:Mn(this.activityRegularizer),kernelConstraint:Qr(this.kernelConstraint),biasConstraint:Qr(this.biasConstraint)},n=super.getConfig();return Object.assign(e,n),e}}bz.className="Dense";qe(bz);class wz extends Qt{constructor(e){e=e||{},super(e),this.inputSpec=[{minNDim:3}],this.dataFormat=e.dataFormat}computeOutputShape(e){e=mn(e);for(const n of e.slice(1))if(n==null)throw new de(`The shape of the input to "Flatten" is not fully defined (got ${e.slice(1)}). Make sure to pass a complete "input_shape" or "batch_input_shape" argument to the first layer in your model.`);return[e[0],iu(e,1)]}call(e,n){return we(()=>{this.invokeCallHook(e,n);let r=Ft(e);if(this.dataFormat==="channelsFirst"&&r.rank>1){const s=[0];for(let o=2;o<r.rank;++o)s.push(o);s.push(1),r=an(r,s)}return Mme(r)})}getConfig(){const e={};this.dataFormat!=null&&(e.dataFormat=this.dataFormat);const n=super.getConfig();return Object.assign(e,n),e}}wz.className="Flatten";qe(wz);class vz extends Qt{constructor(e){super(e),this.supportsMasking=!0,this.activation=yu(e.activation)}call(e,n){return we(()=>{this.invokeCallHook(e,n);const r=Ft(e);return this.activation.apply(r)})}getConfig(){const e={activation:xu(this.activation)},n=super.getConfig();return Object.assign(e,n),e}}vz.className="Activation";qe(vz);class Cz extends Qt{constructor(e){super(e),this.n=e.n,this.inputSpec=[{ndim:2}]}computeOutputShape(e){return[e[0],this.n,e[1]]}call(e,n){return we(()=>(e=Ft(e),Pme(e,this.n)))}getConfig(){const e={n:this.n},n=super.getConfig();return Object.assign(e,n),e}}Cz.className="RepeatVector";qe(Cz);class Sz extends Qt{constructor(e){super(e),this.targetShape=e.targetShape;for(let n=0;n<this.targetShape.length;++n)this.isUnknown(this.targetShape[n])&&(this.targetShape[n]=null)}isUnknown(e){return e<0||e==null}fixUnknownDimension(e,n){const r="Total size of new array must be unchanged.",s=n.slice();let o=1,i=null;for(let l=0;l<s.length;++l){const c=s[l];if(this.isUnknown(c))if(i===null)i=l;else throw new de("Can only specifiy one unknown dimension.");else o*=c}const a=iu(e);if(i!==null){if(o===0||a%o!==0)throw new de(r);s[i]=a/o}else if(a!==o)throw new de(r);return s}computeOutputShape(e){let n=!1;for(let r=0;r<e.length;++r)if(this.isUnknown(e[r])){n=!0;break}return n?e.slice(0,1).concat(this.targetShape):e.slice(0,1).concat(this.fixUnknownDimension(e.slice(1),this.targetShape))}call(e,n){return we(()=>{this.invokeCallHook(e,n);const r=Ft(e),s=r.shape,o=s.slice(0,1).concat(this.fixUnknownDimension(s.slice(1),this.targetShape));return ce(r,o)})}getConfig(){const e={targetShape:this.targetShape},n=super.getConfig();return Object.assign(e,n),e}}Sz.className="Reshape";qe(Sz);class Nz extends Qt{constructor(e){if(super(e),e.dims==null)throw new Error("Required configuration field `dims` is missing during Permute constructor call.");if(!Array.isArray(e.dims))throw new Error(`Permute constructor requires \`dims\` to be an Array, but received ${e.dims} instead.`);const n=_a(1,e.dims.length+1);if(!nn(e.dims.slice().sort(),n))throw new Error("Invalid permutation `dims`: "+JSON.stringify(e.dims)+" `dims` must contain consecutive integers starting from 1.");this.dims=e.dims,this.dimsIncludingBatch=[0].concat(this.dims),this.inputSpec=[new Kr({ndim:this.dims.length+1})]}computeOutputShape(e){e=mn(e);const n=e.slice();return this.dims.forEach((r,s)=>{n[s+1]=e[r]}),n}call(e,n){return an(Ft(e),this.dimsIncludingBatch)}getConfig(){const e={dims:this.dims},n=super.getConfig();return Object.assign(e,n),e}}Nz.className="Permute";qe(Nz);class Ez extends Qt{constructor(e){super(e??{}),this.supportsMasking=!0,e!=null?this.maskValue=e.maskValue==null?0:e.maskValue:this.maskValue=0}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),n={maskValue:this.maskValue};return Object.assign(n,e),n}computeMask(e,n){const r=Ft(e);return Mb(Zh(r,this.maskValue),-1)}call(e,n){return we(()=>{this.invokeCallHook(e,n);const r=Ft(e),i=Mb(Zh(r,this.maskValue),-1,!0);return ie(r,nt(i,r.dtype))})}}Ez.className="Masking";qe(Ez);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Iz extends Qt{constructor(e){if(super(e),this.embeddings=null,this.DEFAULT_EMBEDDINGS_INITIALIZER="randomUniform",e.batchInputShape==null&&e.inputShape==null){let n=null;e.batchSize!=null&&(n=e.batchSize),e.inputLength==null?this.batchInputShape=[n,null]:this.batchInputShape=[n].concat(kn(e.inputLength))}this.inputDim=e.inputDim,us(this.inputDim,"inputDim"),this.outputDim=e.outputDim,us(this.outputDim,"outputDim"),this.embeddingsInitializer=sr(e.embeddingsInitializer||this.DEFAULT_EMBEDDINGS_INITIALIZER),this.embeddingsRegularizer=or(e.embeddingsRegularizer),this.activityRegularizer=or(e.activityRegularizer),this.embeddingsConstraint=Jr(e.embeddingsConstraint),this.maskZero=e.maskZero,this.supportsMasking=e.maskZero,this.inputLength=e.inputLength}build(e){this.embeddings=this.addWeight("embeddings",[this.inputDim,this.outputDim],this.dtype,this.embeddingsInitializer,this.embeddingsRegularizer,!0,this.embeddingsConstraint),this.built=!0}warnOnIncompatibleInputShape(e){}computeMask(e,n){return we(()=>this.maskZero?(e=Ft(e),Zh(e,ln(e))):null)}computeOutputShape(e){if(e=mn(e),this.inputLength==null)return[...e,this.outputDim];const n=kn(this.inputLength);if(n.length!==e.length-1)throw new de(`"inputLength" is ${this.inputLength}, but received input shape has shape ${e}`);{let r=0;for(let s=0;s<n.length;++s){const o=n[s],i=e[s+1];if(o!=null&&i!=null&&o!==i)throw new de(`"inputLength" is ${this.inputLength}, but received input shape has shape ${e}`);o==null&&(n[r]=i),r++}}return[e[0],...n,this.outputDim]}call(e,n){return we(()=>{this.invokeCallHook(e,n);let r=Ft(e);r.dtype!=="int32"&&(r=yl(r,"int32"));const s=o7(this.embeddings.read(),ce(r,[r.size]));return ce(s,mn(this.computeOutputShape(r.shape)))})}getConfig(){const e={inputDim:this.inputDim,outputDim:this.outputDim,embeddingsInitializer:dr(this.embeddingsInitializer),embeddingsRegularizer:Mn(this.embeddingsRegularizer),activityRegularizer:Mn(this.activityRegularizer),embeddingsConstraint:Qr(this.embeddingsConstraint),maskZero:this.maskZero,inputLength:this.inputLength},n=super.getConfig();return Object.assign(e,n),e}}Iz.className="Embedding";qe(Iz);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class xf extends Qt{constructor(e){super(e||{}),this.supportsMasking=!0}mergeFunction(e){throw new Ht}computeElementwiseOpOutputShape(e,n){if(e==null||n==null)return null;if(e.length<n.length)return this.computeElementwiseOpOutputShape(n,e);if(n.length===0)return e;const r=e.slice(0,e.length-n.length);for(let s=0;s<n.length;++s){const o=e[e.length-n.length+s],i=n[s];if(o==null||i==null||o<0||i<0)r.push(null);else if(o===1)r.push(i);else if(i===1)r.push(o);else{if(o!==i)throw new de("Operands could not be broadcast together with shapes "+JSON.stringify(e)+" "+JSON.stringify(n));r.push(o)}}return r}build(e){if(Array.isArray(e)&&!Array.isArray(e[0])&&(e=[mn(e)]),e=e,e.length<2)throw new de(`A merge layer should be called on an Array of at least 2 inputs. Got ${e.length} input(s).`);let n=[];for(const o of e)o!=null&&o[0]!==null&&n.push(o[0]);if(n=ou(n),n.length>1)throw new de(`Can not merge tensors with different batch sizes. Got tensors with shapes: ${JSON.stringify(e)}.`);let r=e[0]==null?null:e[0].slice(1);for(let o=1;o<e.length;++o){const i=e[o]==null?null:e[o].slice(1);r=this.computeElementwiseOpOutputShape(r,i)}const s=e.map(o=>o.length);e.indexOf(null)===-1&&ou(s).length===1?this.reshapeRequired=!1:this.reshapeRequired=!0}call(e,n){return we(()=>{if(e=e,this.reshapeRequired){const r=[],s=e.map(o=>o.rank);if(s.indexOf(null)===-1){const o=gu(s);for(let i of e){const a=i.rank;for(let l=0;l<o-a;++l)i=F1(i,1);r.push(i)}return this.mergeFunction(r)}else{let o=!1;for(const l of e){const c=l.rank;if(c==null){const d=l.shape,f=d[0],p=d.slice(1).concat([f]);let g=ce(l,[f].concat(iu(d.slice(1))));g=an(g,[1,0]),g=ce(g,p),r.push(g),o=!0}else if(c>1){const d=_a(1,c).concat([0]);r.push(an(l,d)),o=!0}else r.push(l)}let i=this.mergeFunction(r);const a=i.rank;if(o){if(a==null){const l=i.shape,c=l.length,d=l[c-1],f=[d].concat(l.slice(0,l.length-1));i=ce(an(ce(i,[-1,d]),[1,0]),f)}else if(a>1){const l=[a-1].concat(_a(0,a-1));i=an(i,l)}}return i}}else return this.mergeFunction(e)})}computeOutputShape(e){e=e;let n;e[0]==null?n=null:n=e[0].slice(1);for(let s=1;s<e.length;++s){const o=e[s]==null?null:e[s].slice(1);n=this.computeElementwiseOpOutputShape(n,o)}let r=[];for(const s of e)s!=null&&s[0]!==null&&r.push(s[0]);return r=ou(r),r.length===1?n=r.concat(n):n=[null].concat(n),n}computeMask(e,n){return we(()=>{if(n==null)return null;if(!Array.isArray(n))throw new de("`mask` should be an Array");if(!Array.isArray(e))throw new de("`inputs` should be an Array");if(n.length!==e.length)throw new de(`The Array 'inputs' and 'mask' are expected to have the same length, but have different lengths (${e.length} vs ${n.length})`);if(n.every(s=>s==null))return null;n=n.map(s=>s==null?s:Ls(s,0));let r=n[0];for(let s=1;s<n.length-1;++s)r=Nl(r,n[s]);return r})}}class kz extends xf{constructor(e){super(e)}mergeFunction(e){return we(()=>{let n=e[0].clone();for(let r=1;r<e.length;++r)n=Ue(n,e[r]);return n})}}kz.className="Add";qe(kz);class Tz extends xf{constructor(e){super(e)}mergeFunction(e){return we(()=>{let n=e[0].clone();for(let r=1;r<e.length;++r)n=ie(n,e[r]);return n})}}Tz.className="Multiply";qe(Tz);class Az extends xf{constructor(e){super(e)}mergeFunction(e){return we(()=>{let n=e[0].clone();for(let r=1;r<e.length;++r)n=Ue(n,e[r]);return ie(1/e.length,n)})}}Az.className="Average";qe(Az);class Rz extends xf{constructor(e){super(e)}mergeFunction(e){return we(()=>{let n=e[0];for(let r=1;r<e.length;++r)n=gc(n,e[r]);return n})}}Rz.className="Maximum";qe(Rz);class Dz extends xf{constructor(e){super(e)}mergeFunction(e){return we(()=>{let n=e[0];for(let r=1;r<e.length;++r)n=Gd(n,e[r]);return n})}}Dz.className="Minimum";qe(Dz);class $z extends xf{constructor(e){super(e),this.DEFAULT_AXIS=-1,e==null&&(e={}),this.axis=e.axis==null?this.DEFAULT_AXIS:e.axis,this.supportsMasking=!0,this.reshapeRequired=!1}build(e){if(!(Array.isArray(e)&&Array.isArray(e[0]))||e.length===1)throw new de("A `Concatenate` layer should be called on a list of at least 2 inputs");e=e;let n=!0;for(const s of e)if(s!=null){n=!1;break}if(n)return;const r=[];for(let s=0;s<e.length;++s){const o=e[s].slice();o.splice(this.axis,1);let i=!1;for(const a of r)if(nn(a,o)){i=!0;break}i||r.push(o)}if(r.length>1)throw new de("A `Concatenate` layer requires inputs with matching shapes except for the concat axis. Got input shapes: "+JSON.stringify(e))}mergeFunction(e){return we(()=>mR(e,this.axis))}computeOutputShape(e){if(!(Array.isArray(e)&&Array.isArray(e[0])))throw new de("A `Concatenate` layer should be called on a list of inputs.");const n=e,r=n[0].slice(),s=this.axis<0?r.length+this.axis:this.axis;for(const o of n.slice(1)){if(r[s]==null||o[s]==null){r[s]=null;break}r[s]+=o[s]}return r}computeMask(e,n){if(n==null)return null;if(!Array.isArray(n))throw new de("`mask` should be an array for Concatenate");if(!Array.isArray(e))throw new de("`inputs` should be an array for Concatenate");if(n.length!==e.length)throw new de(`Mismatch in the length of mask (${n.length}) and the legnth of inputs (${e.length})`);return we(()=>{let r=!0;if(n.forEach(i=>{if(i!=null){r=!1;return}}),r)return null;const s=[];for(let i=0;i<e.length;++i)n[i]==null?s.push(nt(yi(e[i]),"bool")):n[i].rank<e[i].rank?s.push(Ls(n[i],-1)):s.push(n[i]);const o=yr(s,this.axis);return XA(o,-1,!1)})}getConfig(){const e={axis:this.axis},n=super.getConfig();return Object.assign(e,n),e}}$z.className="Concatenate";qe($z);function Sm(t,e){for(;t<0;)t+=e;return t}function s0e(t,e,n){if(t.shape.length>3||e.shape.length>3)throw new Ht("batchDot is not implemented for tensors of 4D or higher rank yet");if(Y(t.shape.length>=2,()=>`batchDot requires the rank of x to be >= 2, but got ${t.shape.length}`),Y(t.shape.length>=2,()=>`batchDot requires the rank of y to be >= 2, but got ${e.shape.length}`),typeof n=="number"&&(n=[n,n]),t.dtype==="complex64"||e.dtype==="complex64")throw new Ht("batchDot is not implemented for complex64-type Tensors yet.");const r=t.shape.length,s=e.shape.length;n==null&&(n=[r-1,s-2]);const o=n;return we(()=>{let i;if(r>s){i=r-s;const l=[];for(let c=0;c<i;++c)l.push(1);e=ce(e,e.shape.concat(l))}else if(s>r){i=s-r;const l=[];for(let c=0;c<i;++c)l.push(1);t=ce(t,t.shape.concat(l))}else i=0;let a;if(t.shape.length===2&&e.shape.length===2)o[0]===o[1]?a=bt(ie(t,e),o[0]):a=bt(ie(an(t,[1,0]),e),o[1]);else{const l=o[0]!==t.shape.length-1,c=o[1]===e.shape.length-1;a=en(t,e,l,c)}if(i>0){let l;r>s?l=r+s-3:l=r-1;const c=[];for(let d=l;d<l+i;++d)c.push(d);a=Aa(a,c)}return a.shape.length===1&&(a=Ls(a,1)),a})}class Oz extends xf{constructor(e){super(e),this.axes=e.axes,this.normalize=e.normalize==null?!1:e.normalize,this.supportsMasking=!0,this.reshapeRequired=!1}build(e){Y(Array.isArray(e)&&e.length===2&&Array.isArray(e[0])&&Array.isArray(e[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");const n=e[0],r=e[1];if(n.length>3||r.length>3)throw new Ht("Dot layer does not support tensors of 4D or higher rank yet.");const s=this.interpretAxes(n,r);if(n[s[0]]!==r[s[1]])throw new de(`Dimension incompatibility: ${n[s[0]]} !== ${r[s[1]]}`)}mergeFunction(e){if(e.length!==2)throw new de(`A \`Dot\` layer must be called on exactly 2 inputs, but received ${e.length} input(s).`);let n=e[0],r=e[1],s;return Array.isArray(this.axes)?s=this.axes.map((o,i)=>Sm(o,e[i].shape.length)):s=[Sm(this.axes,n.shape.length),Sm(this.axes,r.shape.length)],this.normalize&&(n=Wb(n,s[0]),r=Wb(r,s[1])),s0e(n,r,s)}interpretAxes(e,n){let r;return Array.isArray(this.axes)?r=this.axes:r=[Sm(this.axes,e.length),Sm(this.axes,n.length)],r}computeOutputShape(e){Y(Array.isArray(e)&&e.length===2&&Array.isArray(e[0])&&Array.isArray(e[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");const n=e[0].slice(),r=e[1].slice();if(n.length>3||r.length>3)throw new Ht("Dot layer does not support tensors of 4D or higher rank yet.");const s=this.interpretAxes(n,r);n.splice(s[0],1),r.splice(s[1],1),r.splice(0,1);const o=n.concat(r);return o.length===1&&o.push(1),o}computeMask(e,n){return null}getConfig(){const e={axes:this.axes,normalize:this.normalize},n=super.getConfig();return Object.assign(e,n),e}}Oz.className="Dot";qe(Oz);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class _z extends Qt{constructor(e){super(e),this.supportsMasking=!0,this.stddev=e.stddev}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),n={stddev:this.stddev};return Object.assign(n,e),n}call(e,n){return we(()=>{this.invokeCallHook(e,n);const r=Ft(e);return L1(()=>Ue($2(r.shape,0,this.stddev),r),()=>r,n.training||!1)})}}_z.className="GaussianNoise";qe(_z);class Pz extends Qt{constructor(e){super(e),this.supportsMasking=!0,this.rate=e.rate}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),n={rate:this.rate};return Object.assign(n,e),n}call(e,n){return we(()=>{this.invokeCallHook(e,n);const r=Ft(e);return this.rate>0&&this.rate<1?L1(()=>{const o=Math.sqrt(this.rate/(1-this.rate));return ie(r,$2(r.shape,1,o))},()=>r,n.training||!1):r})}}Pz.className="GaussianDropout";qe(Pz);class Fz extends Qt{constructor(e){super(e),this.supportsMasking=!0,this.rate=e.rate,this.noiseShape=e.noiseShape}_getNoiseShape(e){return this.noiseShape||Ft(e).shape}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),n={rate:this.rate};return Object.assign(n,e),n}call(e,n){return we(()=>{if(this.rate<1&&this.rate>0){const r=this._getNoiseShape(e);return L1(()=>{const o=Ft(e),a=-1.6732632423543772*1.0507009873554805;let l=_u(pf(r),this.rate);l=yl(l,"float32");const c=((1-this.rate)*(1+this.rate*a**2))**-.5,d=-c*a*this.rate,f=Ue(ie(o,l),ie(Ue(l,-1),a));return Ue(ie(f,c),d)},()=>Ft(e),n.training||!1)}return e})}}Fz.className="AlphaDropout";qe(Fz);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function t0(t,e,n,r,s,o=.001){let i;if(t.rank===2)i=a8(t,e,n,r,s,o);else if(t.rank===3)i=l8(t,e,n,r,s,o);else if(t.rank===4)i=c8(t,e,n,r,s,o);else throw new Ht(`batchNormalization is not implemented for array of rank ${t.rank} yet`);return i}function o0e(t,e,n,r,s=.001){return we(()=>{const o=m2(t,r),i=o.mean,a=o.variance;return[t0(t,i,a,n,e,s),i,a]})}function i0e(t,e,n,r,s=.001){return we(()=>{const o=m2(t,r),i=o.mean,a=o.variance,l=[];for(const x of _a(0,t.rank))r.indexOf(x)!==-1?l.push(1):l.push(t.shape[x]);const c=ce(i,l),d=ce(a,l),f=e==null?null:ce(e,l),p=n==null?null:ce(n,l);return[t0(t,c,d,p,f,s),i,a]})}function a0e(t,e,n,r,s=.001){return nn(r.slice().sort(),_a(0,t.rank-1))?o0e(t,e,n,r,s):i0e(t,e,n,r,s)}class Mz extends Qt{constructor(e){e==null&&(e={}),super(e),this.supportsMasking=!0,this.axis=e.axis==null?-1:e.axis,this.momentum=e.momentum==null?.99:e.momentum,this.epsilon=e.epsilon==null?.001:e.epsilon,this.center=e.center==null?!0:e.center,this.scale=e.scale==null?!0:e.scale,this.betaInitializer=sr(e.betaInitializer||"zeros"),this.gammaInitializer=sr(e.gammaInitializer||"ones"),this.movingMeanInitializer=sr(e.movingMeanInitializer||"zeros"),this.movingVarianceInitializer=sr(e.movingVarianceInitializer||"ones"),this.betaConstraint=Jr(e.betaConstraint),this.gammaConstraint=Jr(e.gammaConstraint),this.betaRegularizer=or(e.betaRegularizer),this.gammaRegularizer=or(e.gammaRegularizer)}build(e){e=mn(e);const n=this.axis>=0?this.axis:this.axis+e.length,r=e[n];if(r==null)throw new de(`Axis ${n} of input tensor should have a defined dimension but the layer received an input with shape ${JSON.stringify(e)}.`);this.inputSpec=[new Kr({ndim:e.length,axes:{[n]:r}})];const s=[r];this.scale&&(this.gamma=this.addWeight("gamma",s,null,this.gammaInitializer,this.gammaRegularizer,!0,this.gammaConstraint)),this.center&&(this.beta=this.addWeight("beta",s,null,this.betaInitializer,this.betaRegularizer,!0,this.betaConstraint)),this.movingMean=this.addWeight("moving_mean",s,null,this.movingMeanInitializer,null,!1),this.movingVariance=this.addWeight("moving_variance",s,null,this.movingVarianceInitializer,null,!1),this.built=!0}call(e,n){return we(()=>{const r=n.training==null?!1:n.training,s=Ft(e),o=s.shape,i=o.length,a=_a(0,i),l=this.axis>=0?this.axis:this.axis+i;a.splice(l,1);const c=Xd(1,i);c[l]=o[l];const d=a.slice();d.sort();const f=!nn(d,_a(0,i).slice(0,i-1)),p=()=>{if(f){const N=ce(this.movingMean.read(),c),k=ce(this.movingVariance.read(),c),I=this.center?ce(this.beta.read(),c):null,R=this.scale?ce(this.gamma.read(),c):null;return t0(s,N,k,I,R,this.epsilon)}else return t0(s,this.movingMean.read(),this.movingVariance.read(),this.beta==null?null:this.beta.read(),this.gamma==null?null:this.gamma.read(),this.epsilon)};if(!r)return p();const[g,x,b]=a0e(s,this.gamma.read(),this.beta.read(),a,this.epsilon),w=(N,k,I)=>{we(()=>{const R=1-I,$=N.read(),O=ie(lt($,k),R);N.write(lt($,O))})};return(()=>{w(this.movingMean,x,this.momentum),w(this.movingVariance,b,this.momentum)})(),g})}getConfig(){const e={axis:this.axis,momentum:this.momentum,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:dr(this.betaInitializer),gammaInitializer:dr(this.gammaInitializer),movingMeanInitializer:dr(this.movingMeanInitializer),movingVarianceInitializer:dr(this.movingVarianceInitializer),betaRegularizer:Mn(this.betaRegularizer),gammaRegularizer:Mn(this.gammaRegularizer),betaConstraint:Qr(this.betaConstraint),gammaConstraint:Qr(this.gammaConstraint)},n=super.getConfig();return Object.assign(e,n),e}}Mz.className="BatchNormalization";qe(Mz);class Lz extends Qt{constructor(e){if(e==null&&(e={}),super(e),this.axis=e.axis==null?-1:e.axis,typeof this.axis=="number"){if(!Number.isInteger(this.axis))throw new Error(`Expected axis to be an integer, but received ${this.axis}`)}else if(Array.isArray(this.axis)){for(const n of this.axis)if(!Number.isInteger(n))throw new Error(`Expected axis to be an array of integers, but received ${JSON.stringify(this.axis)}`)}else throw new Error(`Expected axis to be an integer or an array of integers, but received ${JSON.stringify(this.axis)}`);this.epsilon=e.epsilon==null?.001:e.epsilon,this.center=e.center==null?!0:e.center,this.scale=e.scale==null?!0:e.scale,this.betaInitializer=sr(e.betaInitializer||"zeros"),this.gammaInitializer=sr(e.gammaInitializer||"ones"),this.betaRegularizer=or(e.betaRegularizer),this.gammaRegularizer=or(e.gammaRegularizer),this.supportsMasking=!0}build(e){e=mn(e);const n=e.length;typeof this.axis=="number"&&(this.axis=[this.axis]);for(let o=0;o<this.axis.length;++o)this.axis[o]<0&&(this.axis[o]+=n);for(const o of this.axis)if(o<0||o>=n)throw new Error(`Invalid axis: ${o}`);if(this.axis.length!==ou(this.axis).length)throw new Error(`Found duplicate axes in: ${this.axis}`);const r=this.axis.map(o=>e[o]),s=!0;this.scale?this.gamma=this.addWeight("gamma",r,"float32",this.gammaInitializer,this.gammaRegularizer,s):this.gamma=null,this.center?this.beta=this.addWeight("beta",r,"float32",this.betaInitializer,this.betaRegularizer,s):this.beta=null,this.built=!0}call(e,n){const r=Ft(e),s=r.shape,o=s.length;return we(()=>{let{mean:a,variance:l}=m2(r,this.axis,!0);const c=Xd(1,o);for(const b of this.axis)c[b]=s[b];const d=b=>b!=null&&b.shape.length!==o?ce(b,c):b;let f=this.scale?d(this.gamma.read()):null,p=this.center?d(this.beta.read()):null;const g=[],x=[];for(let b=0;b<o;++b)this.axis.indexOf(b)!==-1?(g.push(s[b]),x.push(1)):(g.push(1),x.push(s[b]));return a=Hi(a,g),l=Hi(l,g),f!=null&&(f=Hi(f,x)),p!=null&&(p=Hi(p,x)),t0(r,a,l,p,f,this.epsilon)})}getConfig(){const e={axis:this.axis,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:dr(this.betaInitializer),gammaInitializer:dr(this.gammaInitializer),betaRegularizer:Mn(this.betaRegularizer),gammaRegularizer:Mn(this.gammaRegularizer)},n=super.getConfig();return Object.assign(e,n),e}}Lz.className="LayerNormalization";qe(Lz);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function l0e(t,e,n){return we(()=>{if(t.rank!==4)throw new de(`temporalPadding expects input tensor to be 4-D, but received a ${t.rank}-D tensor.`);if(e==null&&(e=[[1,1],[1,1]]),e.length!==2||e[0].length!==2||e[1].length!==2)throw new de("spatial2dPadding expects `padding` to be an Array of two Arrays, each of which is an Array of two integers.");if(n==null&&(n=Pa()),n!=="channelsLast"&&n!=="channelsFirst")throw new de(`Unknown data format: ${n}. Supported data formats are 'channelsLast' and 'channelsFirst.`);let r;return n==="channelsFirst"?r=[[0,0],[0,0],e[0],e[1]]:r=[[0,0],e[0],e[1],[0,0]],Pu(t,r)})}class Bz extends Qt{constructor(e){if(e==null&&(e={}),super(e),this.dataFormat=e.dataFormat==null?Pa():e.dataFormat,e.padding==null)this.padding=[[1,1],[1,1]];else if(typeof e.padding=="number")this.padding=[[e.padding,e.padding],[e.padding,e.padding]];else{if(e.padding=e.padding,e.padding.length!==2)throw new de(`ZeroPadding2D expects padding to be a length-2 array, but received a length-${e.padding.length} array.`);let n,r;if(typeof e.padding[0]=="number")n=[e.padding[0],e.padding[0]],r=[e.padding[1],e.padding[1]];else{if(e.padding=e.padding,e.padding[0].length!==2)throw new de(`ZeroPadding2D expects height padding to be a length-2 array, but received a length-${e.padding[0].length} array.`);if(n=e.padding[0],e.padding[1].length!==2)throw new de(`ZeroPadding2D expects width padding to be a length-2 array, but received a length-${e.padding[1].length} array.`);r=e.padding[1]}this.padding=[n,r]}this.inputSpec=[new Kr({ndim:4})]}computeOutputShape(e){e=mn(e);let n,r;return this.dataFormat==="channelsFirst"?(e[2]!=null&&e[2]>=0?n=e[2]+this.padding[0][0]+this.padding[0][1]:n=null,e[3]!=null&&e[3]>=0?r=e[3]+this.padding[1][0]+this.padding[1][1]:r=null,[e[0],e[1],n,r]):(e[1]!=null&&e[1]>=0?n=e[1]+this.padding[0][0]+this.padding[0][1]:n=null,e[2]!=null&&e[2]>=0?r=e[2]+this.padding[1][0]+this.padding[1][1]:r=null,[e[0],n,r,e[3]])}call(e,n){return we(()=>l0e(Ft(e),this.padding,this.dataFormat))}getConfig(){const e={padding:this.padding,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}Bz.className="ZeroPadding2D";qe(Bz);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function j2(t,e,n,r,s,o){return we(()=>{Or(s),t7(o),Si(r),n==null&&(n=[1,1]),r==null&&(r="valid"),s==null&&(s=Pa()),o==null&&(o="max"),t=TR(t,s);let i;const a=r==="same"?"same":"valid";return o==="max"?i=p2(t,e,n,a):i=o2(t,e,n,a),s==="channelsFirst"&&(i=an(i,[0,3,1,2])),i})}function jz(t,e,n,r,s,o){return we(()=>{Or(s),t7(o),Si(r),n==null&&(n=[1,1,1]),r==null&&(r="valid"),s==null&&(s=Pa()),o==null&&(o="max"),t=rz(t,s);let i;const a=r==="same"?"same":"valid";return o==="max"?i=$8(t,e,n,a):i=i8(t,e,n,a),s==="channelsFirst"&&(i=an(i,[0,4,1,2,3])),i})}class zz extends Qt{constructor(e){if(e.poolSize==null&&(e.poolSize=2),super(e),typeof e.poolSize=="number")this.poolSize=[e.poolSize];else if(Array.isArray(e.poolSize)&&e.poolSize.length===1&&typeof e.poolSize[0]=="number")this.poolSize=e.poolSize;else throw new de(`poolSize for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(e.poolSize)}`);if(us(this.poolSize,"poolSize"),e.strides==null)this.strides=this.poolSize;else if(typeof e.strides=="number")this.strides=[e.strides];else if(Array.isArray(e.strides)&&e.strides.length===1&&typeof e.strides[0]=="number")this.strides=e.strides;else throw new de(`strides for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(e.strides)}`);us(this.strides,"strides"),this.padding=e.padding==null?"valid":e.padding,Si(this.padding),this.inputSpec=[new Kr({ndim:3})]}computeOutputShape(e){e=mn(e);const n=Ra(e[1],this.poolSize[0],this.padding,this.strides[0]);return[e[0],n,e[2]]}call(e,n){return we(()=>{this.invokeCallHook(e,n),e=F1(Ft(e),2);const r=this.poolingFunction(Ft(e),[this.poolSize[0],1],[this.strides[0],1],this.padding,"channelsLast");return Aa(r,[2])})}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides},n=super.getConfig();return Object.assign(e,n),e}}class Vz extends zz{constructor(e){super(e)}poolingFunction(e,n,r,s,o){return Or(o),Si(s),j2(e,n,r,s,o,"max")}}Vz.className="MaxPooling1D";qe(Vz);class Wz extends zz{constructor(e){super(e)}poolingFunction(e,n,r,s,o){return Or(o),Si(s),j2(e,n,r,s,o,"avg")}}Wz.className="AveragePooling1D";qe(Wz);class Uz extends Qt{constructor(e){if(e.poolSize==null&&(e.poolSize=[2,2]),super(e),this.poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize],e.strides==null)this.strides=this.poolSize;else if(Array.isArray(e.strides)){if(e.strides.length!==2)throw new de(`If the strides property of a 2D pooling layer is an Array, it is expected to have a length of 2, but received length ${e.strides.length}.`);this.strides=e.strides}else this.strides=[e.strides,e.strides];us(this.poolSize,"poolSize"),us(this.strides,"strides"),this.padding=e.padding==null?"valid":e.padding,this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,Or(this.dataFormat),Si(this.padding),this.inputSpec=[new Kr({ndim:4})]}computeOutputShape(e){e=mn(e);let n=this.dataFormat==="channelsFirst"?e[2]:e[1],r=this.dataFormat==="channelsFirst"?e[3]:e[2];return n=Ra(n,this.poolSize[0],this.padding,this.strides[0]),r=Ra(r,this.poolSize[1],this.padding,this.strides[1]),this.dataFormat==="channelsFirst"?[e[0],e[1],n,r]:[e[0],n,r,e[3]]}call(e,n){return we(()=>(this.invokeCallHook(e,n),this.poolingFunction(Ft(e),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}class Hz extends Uz{constructor(e){super(e)}poolingFunction(e,n,r,s,o){return Or(o),Si(s),j2(e,n,r,s,o,"max")}}Hz.className="MaxPooling2D";qe(Hz);class Gz extends Uz{constructor(e){super(e)}poolingFunction(e,n,r,s,o){return Or(o),Si(s),j2(e,n,r,s,o,"avg")}}Gz.className="AveragePooling2D";qe(Gz);class qz extends Qt{constructor(e){if(e.poolSize==null&&(e.poolSize=[2,2,2]),super(e),this.poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize,e.poolSize],e.strides==null)this.strides=this.poolSize;else if(Array.isArray(e.strides)){if(e.strides.length!==3)throw new de(`If the strides property of a 3D pooling layer is an Array, it is expected to have a length of 3, but received length ${e.strides.length}.`);this.strides=e.strides}else this.strides=[e.strides,e.strides,e.strides];us(this.poolSize,"poolSize"),us(this.strides,"strides"),this.padding=e.padding==null?"valid":e.padding,this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,Or(this.dataFormat),Si(this.padding),this.inputSpec=[new Kr({ndim:5})]}computeOutputShape(e){e=mn(e);let n=this.dataFormat==="channelsFirst"?e[2]:e[1],r=this.dataFormat==="channelsFirst"?e[3]:e[2],s=this.dataFormat==="channelsFirst"?e[4]:e[3];return n=Ra(n,this.poolSize[0],this.padding,this.strides[0]),r=Ra(r,this.poolSize[1],this.padding,this.strides[1]),s=Ra(s,this.poolSize[2],this.padding,this.strides[2]),this.dataFormat==="channelsFirst"?[e[0],e[1],n,r,s]:[e[0],n,r,s,e[4]]}call(e,n){return we(()=>(this.invokeCallHook(e,n),this.poolingFunction(Ft(e),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}class Xz extends qz{constructor(e){super(e)}poolingFunction(e,n,r,s,o){return Or(o),Si(s),jz(e,n,r,s,o,"max")}}Xz.className="MaxPooling3D";qe(Xz);class Kz extends qz{constructor(e){super(e)}poolingFunction(e,n,r,s,o){return Or(o),Si(s),jz(e,n,r,s,o,"avg")}}Kz.className="AveragePooling3D";qe(Kz);class Yz extends Qt{constructor(e){super(e),this.inputSpec=[new Kr({ndim:3})]}computeOutputShape(e){return[e[0],e[2]]}call(e,n){throw new Ht}}class Zz extends Yz{constructor(e){super(e||{})}call(e,n){return we(()=>{const r=Ft(e);return gr(r,1)})}}Zz.className="GlobalAveragePooling1D";qe(Zz);class Qz extends Yz{constructor(e){super(e||{})}call(e,n){return we(()=>{const r=Ft(e);return Zi(r,1)})}}Qz.className="GlobalMaxPooling1D";qe(Qz);class Jz extends Qt{constructor(e){super(e),this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,Or(this.dataFormat),this.inputSpec=[new Kr({ndim:4})]}computeOutputShape(e){return e=e,this.dataFormat==="channelsLast"?[e[0],e[3]]:[e[0],e[1]]}call(e,n){throw new Ht}getConfig(){const e={dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}class eV extends Jz{call(e,n){return we(()=>{const r=Ft(e);return this.dataFormat==="channelsLast"?gr(r,[1,2]):gr(r,[2,3])})}}eV.className="GlobalAveragePooling2D";qe(eV);class tV extends Jz{call(e,n){return we(()=>{const r=Ft(e);return this.dataFormat==="channelsLast"?Zi(r,[1,2]):Zi(r,[2,3])})}}tV.className="GlobalMaxPooling2D";qe(tV);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class nV extends Qt{constructor(e){super(e),this.layer=e.layer}build(e){this.built=!0}get trainable(){return this.layer!=null?this.layer.trainable:!1}set trainable(e){this.layer!=null&&(this.layer.trainable=e)}get trainableWeights(){return this.layer.trainableWeights}get nonTrainableWeights(){return this.layer.nonTrainableWeights}get updates(){return this.layer._updates}get losses(){return this.layer.losses}getWeights(){return this.layer.getWeights()}setWeights(e){this.layer.setWeights(e)}getConfig(){const e={layer:{className:this.layer.getClassName(),config:this.layer.getConfig()}},n=super.getConfig();return Object.assign(e,n),e}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),this.layer!=null&&this.layer.setFastWeightInitDuringBuild(e)}static fromConfig(e,n,r={}){const s=n.layer,o=Ql(s,r);delete n.layer;const i={layer:o};return Object.assign(i,n),new e(i)}}class rV extends nV{constructor(e){super(e),this.supportsMasking=!0}build(e){if(e=mn(e),e.length<3)throw new de(`TimeDistributed layer expects an input shape >= 3D, but received input shape ${JSON.stringify(e)}`);this.inputSpec=[{shape:e}];const n=[e[0]].concat(e.slice(2));this.layer.built||(this.layer.build(n),this.layer.built=!0),super.build(e)}computeOutputShape(e){e=mn(e);const n=[e[0]].concat(e.slice(2)),r=this.layer.computeOutputShape(n),s=e[1];return[r[0],s].concat(r.slice(1))}call(e,n){return we(()=>(e=Ft(e),fz((i,a)=>[Ft(this.layer.call(i,n)),[]],e,[],!1,null,null,!1,!0)[1]))}}rV.className="TimeDistributed";qe(rV);function c0e(t){gf(Rme,"BidirectionalMergeMode",t)}const u0e="concat";class sV extends nV{constructor(e){super(e);const n=e.layer.getConfig(),r={};r.className=e.layer.getClassName(),r.config=n,this.forwardLayer=Ql(r),n.goBackwards=n.goBackwards!==!0;const s={};if(s.className=e.layer.getClassName(),s.config=n,this.backwardLayer=Ql(s),this.forwardLayer.name="forward_"+this.forwardLayer.name,this.backwardLayer.name="backward_"+this.backwardLayer.name,this.mergeMode=e.mergeMode===void 0?u0e:e.mergeMode,c0e(this.mergeMode),e.weights)throw new Ht("weights support is not implemented for Bidirectional layer yet.");this._stateful=e.layer.stateful,this.returnSequences=e.layer.returnSequences,this.returnState=e.layer.returnState,this.supportsMasking=!0,this._trainable=!0,this.inputSpec=e.layer.inputSpec,this.numConstants=null}get trainable(){return this._trainable}set trainable(e){this._trainable=e,this.forwardLayer!=null&&(this.forwardLayer.trainable=e),this.backwardLayer!=null&&(this.backwardLayer.trainable=e)}getWeights(){return this.forwardLayer.getWeights().concat(this.backwardLayer.getWeights())}setWeights(e){const n=e.length,r=Math.floor(n/2);this.forwardLayer.setWeights(e.slice(0,r)),this.backwardLayer.setWeights(e.slice(r))}computeOutputShape(e){let n=this.forwardLayer.computeOutputShape(e);Array.isArray(n)&&Array.isArray(n[0])||(n=[n]),n=n;let r,s,o;return this.returnState&&(o=n.slice(1)),r=n[0],r=r,this.mergeMode==="concat"?(r[r.length-1]*=2,s=[r]):this.mergeMode==null?s=[r,r.slice()]:s=[r],this.returnState?this.mergeMode==null?s.concat(o).concat(o.slice()):[r].concat(o).concat(o.slice()):go(s)}apply(e,n){let r=n==null?null:n.initialState,s=n==null?null:n.constants;n==null&&(n={});const o=dz(e,r,s,this.numConstants);if(e=o.inputs,r=o.initialState,s=o.constants,Array.isArray(e)&&(r=e.slice(1),e=e[0]),(r==null||r.length===0)&&s==null)return super.apply(e,n);const i=[],a=[];if(r!=null){const c=r.length;if(c%2>0)throw new de("When passing `initialState` to a Bidrectional RNN, the state should be an Array containing the states of the underlying RNNs.");n.initialState=r,i.push(...r);const d=r.map(f=>new Kr({shape:f.shape}));this.forwardLayer.stateSpec=d.slice(0,c/2),this.backwardLayer.stateSpec=d.slice(c/2),a.push(...d)}if(s!=null)throw new Ht("Support for constants in Bidirectional layers is not implemented yet.");const l=i[0]instanceof El;for(const c of i)if(c instanceof El!==l)throw new de("The initial state of a Bidirectional layer cannot be specified as a mix of symbolic and non-symbolic tensors");if(l){const c=[e].concat(i),d=this.inputSpec.concat(a),f=this.inputSpec;this.inputSpec=d;const p=super.apply(c,n);return this.inputSpec=f,p}else return super.apply(e,n)}call(e,n){return we(()=>{const r=n.initialState;let s,o;if(r==null)s=this.forwardLayer.call(e,n),o=this.backwardLayer.call(e,n);else{const l=r.slice(0,r.length/2),c=r.slice(r.length/2);s=this.forwardLayer.call(e,Object.assign(n,{initialState:l})),o=this.backwardLayer.call(e,Object.assign(n,{initialState:c}))}let i;this.returnState&&(Array.isArray(s)&&(i=s.slice(1).concat(o.slice(1))),s=s[0],o=o[0]),this.returnSequences&&(o=na(o,1));let a;return this.mergeMode==="concat"?a=mR([s,o]):this.mergeMode==="sum"?a=Ue(s,o):this.mergeMode==="ave"?a=ie(.5,Ue(s,o)):this.mergeMode==="mul"?a=ie(s,o):this.mergeMode==null&&(a=[s,o]),this.returnState?this.mergeMode==null?a.concat(i):[a].concat(i):a})}resetStates(e){this.forwardLayer.resetStates(),this.backwardLayer.resetStates()}build(e){Td(this.forwardLayer.name,()=>{this.forwardLayer.build(e)}),Td(this.backwardLayer.name,()=>{this.backwardLayer.build(e)}),this.built=!0}computeMask(e,n){Array.isArray(n)&&(n=n[0]);let r;if(this.returnSequences?this.mergeMode==null?r=[n,n]:r=n:this.mergeMode==null?r=[null,null]:r=null,this.returnState){const o=this.forwardLayer.states.map(i=>null);return Array.isArray(r)?r.concat(o).concat(o):[r].concat(o).concat(o)}else return r}get trainableWeights(){return this.forwardLayer.trainableWeights.concat(this.backwardLayer.trainableWeights)}get nonTrainableWeights(){return this.forwardLayer.nonTrainableWeights.concat(this.backwardLayer.nonTrainableWeights)}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),this.forwardLayer!=null&&this.forwardLayer.setFastWeightInitDuringBuild(e),this.backwardLayer!=null&&this.backwardLayer.setFastWeightInitDuringBuild(e)}getConfig(){const e={mergeMode:this.mergeMode},n=super.getConfig();return Object.assign(e,n),e}static fromConfig(e,n){const r=Ql(n.layer);if(delete n.layer,n.numConstants!=null)throw new Ht("Deserialization of a Bidirectional layer with numConstants present is not supported yet.");const s=n;return s.layer=r,new e(s)}}sV.className="Bidirectional";qe(sV);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class oV extends Qt{constructor(e){super(e),this.scale=e.scale,e.offset?this.offset=e.offset:this.offset=0}getConfig(){const e={scale:this.scale,offset:this.offset},n=super.getConfig();return Object.assign(e,n),e}call(e,n){return we(()=>(e=Ft(e),e.dtype!=="float32"&&(e=yl(e,"float32")),Ue(ie(e,this.scale),this.offset)))}}oV.className="Rescaling";qe(oV);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const{resizeBilinear:d0e,cropAndResize:f0e}=Gi;class iV extends Qt{constructor(e){super(e),this.height=e.height,this.width=e.width}centerCrop(e,n,r,s,o,i,a,l){return we(()=>{let c,d=!1;const f=n/i,p=r/a,g=(s+n)/i,x=(o+r)/a,b=[f,p,g,x],w=[];e.rank===3?(d=!0,c=Zo([e])):c=e;for(let R=0;R<c.shape[0];R++)w.push(b);const C=ka(w,[w.length,4]),N=Qh(0,w.length,1,"int32"),I=f0e(c,C,N,[s,o],"nearest");return yl(d?Ft(ra(I)):I,l)})}upsize(e,n,r,s){return we(()=>{const o=d0e(e,[n,r]);return yl(o,s)})}call(e,n){return we(()=>{const r=Ft(e),s=r.dtype,o=r.shape,i=o[o.length-3],a=o[o.length-2];let l=0;i!==this.height&&(l=Math.floor((i-this.height)/2));let c=0;return a!==this.width&&(c=Math.floor((a-this.width)/2),c===0&&(c=1)),l>=0&&c>=0?this.centerCrop(r,l,c,this.height,this.width,i,a,s):this.upsize(e,this.height,this.width,s)})}getConfig(){const e={height:this.height,width:this.width},n=super.getConfig();return Object.assign(e,n),e}computeOutputShape(e){e=mn(e);const n=e.length-3,r=e.length-2;return e[n]=this.height,e[r]=this.width,e}}iV.className="CenterCrop";qe(iV);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function h0e(t,e,n,r){let s=Ft(t);if(s.dtype!=="int32"&&(s=yl(s,"int32")),e==="int")return s;const o=s.shape;if(s.rank===0&&(s=Ls(s,-1)),e==="oneHot"&&s.shape[s.shape.length-1]!==1&&(s=Ls(s,-1)),s.rank>2)throw new de(`When outputMode is not int, maximum output rank is 2 Received outputMode ${e} and input shape ${o} which would result in output rank ${s.rank}.`);const i=["multiHot","oneHot"].includes(e),a=s;let l;if(typeof r<"u"&&e==="count"?l=iI(a,r,n,i):l=iI(a,[],n,i),e!=="tfIdf")return l;if(r)return ie(l,r);throw new de("When outputMode is 'tfIdf', weights must be provided.")}/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class aV extends Qt{constructor(e){super(e),this.numTokens=e.numTokens,e.outputMode?this.outputMode=e.outputMode:this.outputMode="multiHot"}getConfig(){const e={numTokens:this.numTokens,outputMode:this.outputMode},n=super.getConfig();return Object.assign(e,n),e}computeOutputShape(e){return e=mn(e),e==null?[this.numTokens]:this.outputMode==="oneHot"&&e[e.length-1]!==1?(e.push(this.numTokens),e):(e[e.length-1]=this.numTokens,e)}call(e,n){return we(()=>{e=Ft(e),e.dtype!=="int32"&&(e=yl(e,"int32"));let r;if(typeof n.countWeights<"u"){if(this.outputMode!=="count")throw new de(`countWeights is not used when outputMode !== count.
              Received countWeights=${n.countWeights}`);r=Ft(n.countWeights)}const s=Zi(e),o=qg(e),i=ri(this.numTokens,s).bufferSync().get(0),a=_u(o,0).bufferSync().get(0);if(!(i&&a))throw new de(`Input values must be between 0 < values <= numTokens with numTokens=${this.numTokens}`);return h0e(e,this.outputMode,this.numTokens,r)})}}aV.className="CategoryEncoding";qe(aV);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const p0e=["bilinear","nearest"],v_=new Set(p0e);class lV extends Qt{constructor(e){if(super(e),this.height=e.height,this.width=e.width,e.interpolation)if(v_.has(e.interpolation))this.interpolation=e.interpolation;else throw new de(`Invalid interpolation parameter: ${e.interpolation} is not implemented`);else this.interpolation="bilinear";this.cropToAspectRatio=!!e.cropToAspectRatio}computeOutputShape(e){e=mn(e);const n=e[2];return[this.height,this.width,n]}getConfig(){const e={height:this.height,width:this.width,interpolation:this.interpolation,cropToAspectRatio:this.cropToAspectRatio},n=super.getConfig();return Object.assign(e,n),e}call(e,n){return we(()=>{const r=[this.height,this.width];if(this.interpolation==="bilinear")return Gi.resizeBilinear(e,r,!this.cropToAspectRatio);if(this.interpolation==="nearest")return Gi.resizeNearestNeighbor(e,r,!this.cropToAspectRatio);throw new Error(`Interpolation is ${this.interpolation} but only ${[...v_]} are supported`)})}}lV.className="Resizing";qe(lV);/**
 * @license
 * Copyright 2023 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class cV{constructor(e){this.seed=e}next(){if(this.seed!==void 0)return this.seed++}}cV.className="RandomSeed";/**
 * @license
 * Copyright 2023 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class uV extends Qt{constructor(e){super(e),this.randomGenerator=new cV(e.seed)}getConfig(){const e={seed:this.randomGenerator.seed},n=super.getConfig();return Object.assign(e,n),e}}uV.className="BaseRandomLayer";/**
 * @license
 * Copyright 2023 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const m0e=["bilinear","nearest"],C_=new Set(m0e);class dV extends uV{constructor(e){super(e);const{factor:n,interpolation:r="bilinear"}=e;if(this.factor=n,Array.isArray(this.factor)&&this.factor.length===2)this.widthLower=this.factor[0],this.widthUpper=this.factor[1];else if(!Array.isArray(this.factor)&&this.factor>0)this.widthLower=-this.factor,this.widthUpper=this.factor;else throw new de(`Invalid factor: ${this.factor}. Must be positive number or tuple of 2 numbers`);if(this.widthLower<-1||this.widthUpper<-1)throw new de(`factor must have values larger than -1. Got: ${this.factor}`);if(this.widthUpper<this.widthLower)throw new de(`factor cannot have upper bound less than lower bound.
        Got upper bound: ${this.widthUpper}.
        Got lower bound: ${this.widthLower}
      `);if(r)if(C_.has(r))this.interpolation=r;else throw new de(`Invalid interpolation parameter: ${r} is not implemented`)}getConfig(){const e={factor:this.factor,interpolation:this.interpolation},n=super.getConfig();return Object.assign(e,n),e}computeOutputShape(e){e=mn(e);const n=e[2];return[this.imgHeight,-1,n]}call(e,n){return we(()=>{const r=Ft(e);this.imgHeight=r.shape[r.shape.length-3];const s=r.shape[r.shape.length-2];this.widthFactor=pf([1],1+this.widthLower,1+this.widthUpper,"float32",this.randomGenerator.next());let o=this.widthFactor.dataSync()[0]*s;o=Math.round(o);const i=[this.imgHeight,o];switch(this.interpolation){case"bilinear":return Gi.resizeBilinear(e,i);case"nearest":return Gi.resizeNearestNeighbor(e,i);default:throw new Error(`Interpolation is ${this.interpolation}
          but only ${[...C_]} are supported`)}})}}dV.className="RandomWidth";qe(dV);/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const g0e=Ee();g0e.registerFlag("KEEP_INTERMEDIATE_TENSORS",()=>!1,t=>{t&&console.warn("Keep intermediate tensors is ON. This will print the values of all intermediate tensors during model inference. Not all models support this mode. For details, check e2e/benchmarks/ model_config.js. This significantly impacts performance.")});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */var Do;(function(t){t[t.DT_INVALID=0]="DT_INVALID",t[t.DT_FLOAT=1]="DT_FLOAT",t[t.DT_DOUBLE=2]="DT_DOUBLE",t[t.DT_INT32=3]="DT_INT32",t[t.DT_UINT8=4]="DT_UINT8",t[t.DT_INT16=5]="DT_INT16",t[t.DT_INT8=6]="DT_INT8",t[t.DT_STRING=7]="DT_STRING",t[t.DT_COMPLEX64=8]="DT_COMPLEX64",t[t.DT_INT64=9]="DT_INT64",t[t.DT_BOOL=10]="DT_BOOL",t[t.DT_QINT8=11]="DT_QINT8",t[t.DT_QUINT8=12]="DT_QUINT8",t[t.DT_QINT32=13]="DT_QINT32",t[t.DT_BFLOAT16=14]="DT_BFLOAT16",t[t.DT_QINT16=15]="DT_QINT16",t[t.DT_QUINT16=16]="DT_QUINT16",t[t.DT_UINT16=17]="DT_UINT16",t[t.DT_COMPLEX128=18]="DT_COMPLEX128",t[t.DT_HALF=19]="DT_HALF",t[t.DT_RESOURCE=20]="DT_RESOURCE",t[t.DT_VARIANT=21]="DT_VARIANT",t[t.DT_UINT32=22]="DT_UINT32",t[t.DT_UINT64=23]="DT_UINT64",t[t.DT_FLOAT_REF=101]="DT_FLOAT_REF",t[t.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",t[t.DT_INT32_REF=103]="DT_INT32_REF",t[t.DT_UINT8_REF=104]="DT_UINT8_REF",t[t.DT_INT16_REF=105]="DT_INT16_REF",t[t.DT_INT8_REF=106]="DT_INT8_REF",t[t.DT_STRING_REF=107]="DT_STRING_REF",t[t.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",t[t.DT_INT64_REF=109]="DT_INT64_REF",t[t.DT_BOOL_REF=110]="DT_BOOL_REF",t[t.DT_QINT8_REF=111]="DT_QINT8_REF",t[t.DT_QUINT8_REF=112]="DT_QUINT8_REF",t[t.DT_QINT32_REF=113]="DT_QINT32_REF",t[t.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF",t[t.DT_QINT16_REF=115]="DT_QINT16_REF",t[t.DT_QUINT16_REF=116]="DT_QUINT16_REF",t[t.DT_UINT16_REF=117]="DT_UINT16_REF",t[t.DT_COMPLEX128_REF=118]="DT_COMPLEX128_REF",t[t.DT_HALF_REF=119]="DT_HALF_REF",t[t.DT_RESOURCE_REF=120]="DT_RESOURCE_REF",t[t.DT_VARIANT_REF=121]="DT_VARIANT_REF",t[t.DT_UINT32_REF=122]="DT_UINT32_REF",t[t.DT_UINT64_REF=123]="DT_UINT64_REF"})(Do||(Do={}));var S_;(function(t){(function(e){e[e.LEGACY=0]="LEGACY",e[e.V1=1]="V1",e[e.V2=2]="V2"})(t.CheckpointFormatVersion||(t.CheckpointFormatVersion={}))})(S_||(S_={}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const x0e={};function fV(t){return x0e[t]}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function L(t,e,n,r,s){const o=e.inputParams[t];if(o&&o.inputIndexStart!==void 0){const a=o.inputIndexStart,l=o.inputIndexEnd===0?void 0:o.inputIndexEnd===void 0?a+1:o.inputIndexEnd,c=a<0?e.inputNames.length+a:a;if(o.type==="tensor")return bs(e.inputNames[c],n,r,s);if(o.type==="tensors"){const p=e.inputs.slice(a,l);return e.inputNames.slice(a,l).filter((x,b)=>{var w;return((w=p[b])===null||w===void 0?void 0:w.op)!=="NoOp"}).map(x=>bs(x,n,r,s))}const d=bs(e.inputNames[c],n,r,s),f=d.dataSync();return o.type==="number"?f[0]:Yi(d.shape,f)}const i=e.attrParams[t];return i&&i.value}function bs(t,e,n,r){const[s,o]=$o(t,n);if(r!=null){const a=r.getHashTableHandleByName(s);if(a!=null)return a}const i=n.currentContextIds.find(a=>!!e[Xb(s,a)]);return i!==void 0?e[Xb(s,i)][o]:void 0}function N_(t,e,n){return e[Xb(t,n.currentContextId)]}function zl(t,e){const[n,r,s]=$o(t,e);return[Xb(n,e&&e.currentContextId),r,s]}function Xb(t,e){return e?`${t}-${e}`:t}function $o(t,e){if(t==="")return["",0,void 0];const n=e!=null&&e.parseNodeNameCache!=null;if(n){const o=e.parseNodeNameCache.get(t);if(o!=null)return o}const r=t.split(":");let s;if(r.length===1)s=[t,0,void 0];else{const o=r[0],i=r.length===3?r[1]:void 0,a=Number(r[r.length-1]);s=[o,a,i]}return n&&e.parseNodeNameCache.set(t,s),s}function _y(t,e,n){let r=L("pad",t,e,n);if(r==="explicit"){r=L("explicitPaddings",t,e,n);const s=[[0,0],[0,0],[0,0],[0,0]];for(let o=0;o<4;o++)s[o][0]=r[o*2],s[o][1]=r[o*2+1];return s}return r}function Vl(t){return t.kept?t:Zl(t)}/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const y0e=[{tfOpName:"Add",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddV2",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddN",category:"arithmetic",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"BiasAdd",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"Sub",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"RealDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Div",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"DivNoNan",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mul",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Maximum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Minimum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Pow",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SquaredDifference",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorMod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],b0e=Object.freeze(Object.defineProperty({__proto__:null,json:y0e},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const w0e=[{tfOpName:"Abs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan2",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ceil",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ClipByValue",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"clipValueMin",type:"number"},{start:2,name:"clipValueMax",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Complex",category:"basic_math",inputs:[{start:0,name:"real",type:"tensor"},{start:1,name:"imag",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ComplexAbs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Elu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Exp",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Floor",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Imag",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Neg",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Real",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Prelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"alpha",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu6",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Selu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sigmoid",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Rsqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Square",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sign",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Round",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Expm1",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log1p",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Reciprocal",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Softplus",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Erf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LeakyRelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"alpha",name:"alpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsNan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsFinite",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsInf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],v0e=Object.freeze(Object.defineProperty({__proto__:null,json:w0e},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const C0e=[{tfOpName:"EmptyTensorList",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"maxNumElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"LoopCond",category:"control",inputs:[{start:0,name:"pred",type:"tensor"}]},{tfOpName:"Switch",category:"control",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"pred",type:"tensor"}]},{tfOpName:"Merge",category:"control",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"Enter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"frame_name",name:"frameName",type:"string"},{tfName:"is_constant",name:"isConstant",type:"bool"}]},{tfOpName:"Exit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NextIteration",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayV3",category:"control",inputs:[{start:0,name:"size",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"dynamic_size",name:"dynamicSize",type:"bool"},{tfName:"clear_after_read",name:"clearAfterRead",type:"bool"},{tfName:"identical_element_shapes",name:"identicalElementShapes",type:"bool"},{tfName:"tensor_array_name",name:"name",type:"string"}]},{tfOpName:"TensorArrayWriteV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayReadV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayGatherV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"}]},{tfOpName:"TensorArrayScatterV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArrayConcatV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape_except0",name:"elementShapeExcept0",type:"shape",notSupported:!0}]},{tfOpName:"TensorArraySplitV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"tensor",type:"tensor"},{start:2,name:"lengths",type:"number[]"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArraySizeV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}]},{tfOpName:"TensorArrayCloseV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"}]},{tfOpName:"StatelessIf",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"If",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"StatelessWhile",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"While",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"TensorListScatter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListScatterV2",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"},{start:3,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGather",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListSetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListReserve",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListFromTensor",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListStack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"},{tfName:"num_elements",name:"numElements",type:"dtype"}]},{tfOpName:"TensorListSplit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"},{start:2,name:"lengths",type:"number[]"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcat",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcatV2",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPopBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPushBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListLength",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}]},{tfOpName:"TensorListResize",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"size",type:"number"}]}],S0e=Object.freeze(Object.defineProperty({__proto__:null,json:C0e},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const N0e=[{tfOpName:"AvgPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[],notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPoolWithArgmax",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"include_batch_in_index",name:"includeBatchInIndex",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AvgPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Conv1D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"stride",name:"stride",type:"number"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NWC"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"dilation",name:"dilation",type:"number",defaultValue:1}]},{tfOpName:"Conv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"useCudnnOnGpu",name:"useCudnnOnGpu",type:"bool"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"_FusedConv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"use_cudnn_on_gpu",name:"useCudnnOnGpu",type:"bool",defaultValue:!0},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2}]},{tfOpName:"Conv2DBackpropInput",category:"convolution",inputs:[{start:2,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:0,name:"outputShape",type:"number[]"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]",notSupported:!0}]},{tfOpName:"DepthwiseConv2d",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"DepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"FusedDepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]}]},{tfOpName:"Conv3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"Dilation2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"rates",name:"dilations",type:"number[]"},{tfName:"padding",name:"pad",type:"string"}]}],E0e=Object.freeze(Object.defineProperty({__proto__:null,json:N0e},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const I0e=[{tfOpName:"Fill",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"},{start:1,name:"value",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"LinSpace",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"num",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"OneHot",category:"creation",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"depth",type:"number"},{start:2,name:"onValue",type:"number",defaultValue:1},{start:3,name:"offValue",type:"number",defaultValue:0}],attrs:[{tfName:"axis",name:"axis",type:"number",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Ones",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"OnesLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"RandomStandardNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"RandomUniform",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number",defaultValue:0},{tfName:"maxval",name:"maxval",type:"number",defaultValue:1},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"RandomUniformInt",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number"},{tfName:"maxval",name:"maxval",type:"number"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Range",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"step",type:"number",defaultValue:0}],attrs:[{tfName:"Tidx",name:"dtype",type:"dtype"}]},{tfOpName:"TruncatedNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"means",name:"mean",type:"number",defaultValue:0},{tfName:"stddev",name:"stdDev",type:"number",defaultValue:1},{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Zeros",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"ZerosLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Multinomial",category:"creation",inputs:[{start:0,name:"logits",type:"tensor"},{start:1,name:"numSamples",type:"number"}],attrs:[{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number"},{tfName:"T",name:"dtype",type:"dtype"},{tfName:"output_dtype",name:"output_dtype",type:"dtype"}]}],k0e=Object.freeze(Object.defineProperty({__proto__:null,json:I0e},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const T0e=[{tfOpName:"NonMaxSuppressionV2",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV3",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV4",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"T_threshold",name:"threshold",type:"dtype",notSupported:!0},{tfName:"pad_to_max_output_size",name:"padToMaxOutputSize",type:"bool"}]},{tfOpName:"NonMaxSuppressionV5",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"},{start:5,name:"softNmsSigma",type:"number"}]},{tfOpName:"Where",category:"dynamic",inputs:[{start:0,name:"condition",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ListDiff",category:"dynamic",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],A0e=Object.freeze(Object.defineProperty({__proto__:null,json:T0e},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const R0e=[{tfOpName:"LowerBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"TopKV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"k",type:"number"}],attrs:[{tfName:"sorted",name:"sorted",type:"bool"}]},{tfOpName:"UpperBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"Unique",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"UniqueV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]}],D0e=Object.freeze(Object.defineProperty({__proto__:null,json:R0e},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $0e=[{tfOpName:"PlaceholderWithDefault",category:"graph",inputs:[{start:0,name:"default",type:"tensor"}],attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Placeholder",category:"graph",attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Const",category:"graph"},{tfOpName:"Identity",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IdentityN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Snapshot",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Rank",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Size",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Shape",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"ShapeN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Print",category:"graph",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"data",type:"tensors"}],attrs:[{tfName:"message",name:"message",type:"string"},{tfName:"first_n",name:"firstN",type:"number",notSupported:!0},{tfName:"summarize",name:"summarize",type:"number",defaultValue:3}]},{tfOpName:"NoOp",category:"graph",inputs:[]},{tfOpName:"StopGradient",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"FakeQuantWithMinMaxVars",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"min",name:"min",type:"number"},{tfName:"max",name:"max",type:"number"}]}],O0e=Object.freeze(Object.defineProperty({__proto__:null,json:$0e},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _0e=[{tfOpName:"HashTable",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"HashTableV2",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"LookupTableImport",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableImportV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFind",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFindV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableSize",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"LookupTableSizeV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"InitializeTable",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}]},{tfOpName:"InitializeTableV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}]}],P0e=Object.freeze(Object.defineProperty({__proto__:null,json:_0e},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const F0e=[{tfOpName:"ResizeBilinear",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ResizeNearestNeighbor",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"CropAndResize",category:"image",inputs:[{start:0,name:"image",type:"tensor"},{start:1,name:"boxes",type:"tensor"},{start:2,name:"boxInd",type:"tensor"},{start:3,name:"cropSize",type:"number[]"}],attrs:[{tfName:"method",name:"method",type:"string"},{tfName:"extrapolation_value",name:"extrapolationValue",type:"number"}]},{tfOpName:"ImageProjectiveTransformV3",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"transforms",type:"tensor"},{start:2,name:"outputShape",type:"number[]"},{start:3,name:"fillValue",type:"number"}],attrs:[{tfName:"interpolation",name:"interpolation",type:"string"},{tfName:"fill_mode",name:"fillMode",type:"string"}]}],M0e=Object.freeze(Object.defineProperty({__proto__:null,json:F0e},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const L0e=[{tfOpName:"Equal",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NotEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Greater",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"GreaterEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Less",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LessEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalAnd",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalNot",category:"logical",inputs:[{start:0,name:"a",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalOr",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Select",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SelectV2",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BitwiseAnd",category:"logical",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}]}],B0e=Object.freeze(Object.defineProperty({__proto__:null,json:L0e},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const j0e=[{tfOpName:"_FusedMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMulV2",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Transpose",category:"matrices",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"perm",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Einsum",category:"matrices",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"equation",name:"equation",type:"string"},{tfName:"N",name:"n",type:"number",defaultValue:2},{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"MatrixBandPart",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"numLower",type:"tensor"},{start:1,name:"numUpper",type:"tensor"}]}],z0e=Object.freeze(Object.defineProperty({__proto__:null,json:j0e},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const V0e=[{tfOpName:"EuclideanNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool",defaultValue:!1}]},{tfOpName:"FusedBatchNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV2",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV3",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"LRN",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"depth_radius",name:"radius",type:"number",defaultValue:5},{tfName:"bias",name:"bias",type:"number",defaultValue:1},{tfName:"alpha",name:"alpha",type:"number",defaultValue:1},{tfName:"beta",name:"beta",type:"number",defaultValue:.5}]},{tfOpName:"Softmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"LogSoftmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]}],W0e=Object.freeze(Object.defineProperty({__proto__:null,json:V0e},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const U0e=[{tfOpName:"Bincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}]},{tfOpName:"DenseBincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}],attrs:[{tfName:"binary_output",name:"binaryOutput",type:"bool"}]},{tfOpName:"Max",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Mean",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Min",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Sum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"All",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Any",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"ArgMax",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"ArgMin",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"Prod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cumprod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]},{tfOpName:"Cumsum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]}],H0e=Object.freeze(Object.defineProperty({__proto__:null,json:U0e},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const G0e=[{tfOpName:"ConcatV2",category:"slice_join",inputs:[{start:0,end:-1,name:"tensors",type:"tensors"},{start:-1,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"Concat",category:"slice_join",inputs:[{start:1,end:0,name:"tensors",type:"tensors"},{start:0,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"GatherV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"axis",type:"number",defaultValue:0}],attrs:[{tfName:"batch_dims",name:"batchDims",type:"number",defaultValue:0}]},{tfOpName:"Gather",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",notSupported:!0}]},{tfOpName:"Reverse",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"dims",type:"bool[]"}]},{tfOpName:"ReverseV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}]},{tfOpName:"Slice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"size",type:"number[]"}]},{tfOpName:"StridedSlice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"end",type:"number[]"},{start:3,name:"strides",type:"number[]"}],attrs:[{tfName:"begin_mask",name:"beginMask",type:"number",defaultValue:0},{tfName:"end_mask",name:"endMask",type:"number",defaultValue:0},{tfName:"new_axis_mask",name:"newAxisMask",type:"number",defaultValue:0},{tfName:"ellipsis_mask",name:"ellipsisMask",type:"number",defaultValue:0},{tfName:"shrink_axis_mask",name:"shrinkAxisMask",type:"number",defaultValue:0}]},{tfOpName:"Pack",category:"slice_join",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0}]},{tfOpName:"Unpack",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0},{tfName:"num",name:"num",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Tile",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"reps",type:"number[]"}]},{tfOpName:"Split",category:"slice_join",inputs:[{start:0,name:"axis",type:"number",defaultValue:0},{start:1,name:"x",type:"tensor"}],attrs:[{tfName:"num_split",name:"numOrSizeSplits",type:"number",defaultValue:1}]},{tfOpName:"SplitV",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"numOrSizeSplits",type:"number[]"},{start:2,name:"axis",type:"number",defaultValue:0}]},{tfOpName:"ScatterNd",category:"slice_join",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"shape",type:"number[]"}]},{tfOpName:"GatherNd",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}]},{tfOpName:"SparseToDense",category:"slice_join",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!1,notSupported:!0}]},{tfOpName:"TensorScatterUpdate",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"values",type:"tensor"}]}],q0e=Object.freeze(Object.defineProperty({__proto__:null,json:G0e},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const X0e=[{tfOpName:"SparseFillEmptyRows",category:"sparse",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"denseShape",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}]},{tfOpName:"SparseReshape",category:"sparse",inputs:[{start:0,name:"inputIndices",type:"tensor"},{start:1,name:"inputShape",type:"tensor"},{start:2,name:"newShape",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SparseSegmentMean",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]},{tfOpName:"SparseSegmentSum",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]}],K0e=Object.freeze(Object.defineProperty({__proto__:null,json:X0e},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Y0e=[{tfOpName:"FFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"RFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]},{tfOpName:"IRFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]}],Z0e=Object.freeze(Object.defineProperty({__proto__:null,json:Y0e},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Q0e=[{tfOpName:"StaticRegexReplace",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"pattern",name:"pattern",type:"string"},{tfName:"rewrite",name:"rewrite",type:"string"},{tfName:"replace_global",name:"replaceGlobal",type:"bool"}]},{tfOpName:"StringNGrams",category:"string",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"dataSplits",type:"tensor"}],attrs:[{tfName:"separator",name:"separator",type:"string"},{tfName:"ngram_widths",name:"nGramWidths",type:"number[]"},{tfName:"left_pad",name:"leftPad",type:"string"},{tfName:"right_pad",name:"rightPad",type:"string"},{tfName:"pad_width",name:"padWidth",type:"number"},{tfName:"preserve_short_sequences",name:"preserveShortSequences",type:"bool"}],outputs:["ngrams","ngrams_splits"]},{tfOpName:"StringSplit",category:"string",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"delimiter",type:"tensor"}],attrs:[{tfName:"skip_empty",name:"skipEmpty",type:"bool"}],outputs:["indices","values","shape"]},{tfOpName:"StringToHashBucketFast",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"num_buckets",name:"numBuckets",type:"number"}]}],J0e=Object.freeze(Object.defineProperty({__proto__:null,json:Q0e},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const e1e=[{tfOpName:"Cast",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"SrcT",name:"sdtype",type:"dtype",notSupported:!0},{tfName:"DstT",name:"dtype",type:"dtype"}]},{tfOpName:"ExpandDims",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"MirrorPad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"mode",name:"mode",type:"string"}]},{tfOpName:"Pad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"constant_value",name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"PadV2",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"},{start:2,name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"Reshape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"EnsureShape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"Squeeze",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"axis",tfDeprecatedName:"squeeze_dims",name:"axis",type:"number[]"}]},{tfOpName:"SpaceToBatchND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"paddings",type:"number[]"}]},{tfOpName:"BatchToSpaceND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"crops",type:"number[]"}]},{tfOpName:"DepthToSpace",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"block_size",name:"blockSize",type:"number"},{tfName:"data_format",name:"dataFormat",type:"string"}]},{tfOpName:"BroadcastTo",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}],attrs:[]},{tfOpName:"BroadcastArgs",category:"transformation",inputs:[{start:0,name:"s0",type:"tensor"},{start:1,name:"s1",type:"tensor"}],attrs:[]}],t1e=Object.freeze(Object.defineProperty({__proto__:null,json:e1e},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class E_{static get Instance(){return this._instance||(this._instance=new this)}constructor(){const e=[b0e,v0e,S0e,E0e,k0e,A0e,D0e,O0e,P0e,M0e,B0e,z0e,W0e,H0e,q0e,K0e,Z0e,J0e,t1e],n=[].concat(...e.map(r=>r.json));this.opMappers=n.reduce((r,s)=>(r[s.tfOpName]=s,r),{})}transformGraph(e,n={}){const r=e.node,s=[],o=[],i=[],a=r.reduce((b,w)=>(b[w.name]=this.mapNode(w),w.op.startsWith("Placeholder")?s.push(b[w.name]):w.op==="Const"?o.push(b[w.name]):(w.input==null||w.input.length===0)&&i.push(b[w.name]),b),{});let l=[];const c=[];let d={},f={};n!=null&&(d=this.mapSignatureEntries(n.inputs),f=this.mapSignatureEntries(n.outputs));const p=Object.keys(a);p.forEach(b=>{const w=a[b];w.inputNames.forEach((C,N)=>{const[k,,I]=zl(C),R=a[k];if(R.outputs!=null){const $=R.outputs.indexOf(I);if($!==-1){const O=`${k}:${$}`;w.inputNames[N]=O}}w.inputs.push(R),R.children.push(w)})}),Object.keys(f).length===0?p.forEach(b=>{const w=a[b];w.children.length===0&&c.push(w)}):Object.keys(f).forEach(b=>{const[w]=zl(b),C=a[w];C!=null&&(C.signatureKey=f[b],c.push(C))}),Object.keys(d).length>0?Object.keys(d).forEach(b=>{const[w]=zl(b),C=a[w];C&&(C.signatureKey=d[b],l.push(C))}):l=s;let g={};e.library!=null&&e.library.function!=null&&(g=e.library.function.reduce((b,w)=>(b[w.signature.name]=this.mapFunction(w),b),{}));const x={nodes:a,inputs:l,outputs:c,weights:o,placeholders:s,signature:n,functions:g};return i.length>0&&(x.initNodes=i),x}mapSignatureEntries(e){return Object.keys(e||{}).reduce((n,r)=>(n[e[r].name]=r,n),{})}mapNode(e){const n=fV(e.op)||this.opMappers[e.op]||{};e.attr==null&&(e.attr={});const r={name:e.name,op:e.op,category:n.category,inputNames:(e.input||[]).map(s=>s.startsWith("^")?s.slice(1):s),inputs:[],children:[],inputParams:{},attrParams:{},rawAttrs:e.attr,outputs:n.outputs};return n.inputs!=null&&(r.inputParams=n.inputs.reduce((s,o)=>(s[o.name]={type:o.type,inputIndexStart:o.start,inputIndexEnd:o.end},s),{})),n.attrs!=null&&(r.attrParams=n.attrs.reduce((s,o)=>{const i=o.type;let a;switch(o.type){case"string":a=vI(e.attr,o.tfName,o.defaultValue),a===void 0&&o.tfDeprecatedName&&(a=vI(e.attr,o.tfDeprecatedName,o.defaultValue));break;case"string[]":a=TI(e.attr,o.tfName,o.defaultValue),a===void 0&&o.tfDeprecatedName&&(a=TI(e.attr,o.tfDeprecatedName,o.defaultValue));break;case"number":a=SI(e.attr,o.tfName,o.defaultValue||0),a===void 0&&o.tfDeprecatedName&&(a=SI(e.attr,o.tfDeprecatedName,o.defaultValue));break;case"number[]":a=kI(e.attr,o.tfName,o.defaultValue),a===void 0&&o.tfDeprecatedName&&(a=kI(e.attr,o.tfDeprecatedName,o.defaultValue));break;case"bool":a=CI(e.attr,o.tfName,o.defaultValue),a===void 0&&o.tfDeprecatedName&&(a=CI(e.attr,o.tfDeprecatedName,o.defaultValue));break;case"bool[]":a=RI(e.attr,o.tfName,o.defaultValue),a===void 0&&o.tfDeprecatedName&&(a=RI(e.attr,o.tfDeprecatedName,o.defaultValue));break;case"shape":a=II(e.attr,o.tfName,o.defaultValue),a===void 0&&o.tfDeprecatedName&&(a=II(e.attr,o.tfDeprecatedName,o.defaultValue));break;case"shape[]":a=AI(e.attr,o.tfName,o.defaultValue),a===void 0&&o.tfDeprecatedName&&(a=AI(e.attr,o.tfDeprecatedName,o.defaultValue));break;case"dtype":a=NI(e.attr,o.tfName,o.defaultValue),a===void 0&&o.tfDeprecatedName&&(a=NI(e.attr,o.tfDeprecatedName,o.defaultValue));break;case"dtype[]":a=EI(e.attr,o.tfName,o.defaultValue),a===void 0&&o.tfDeprecatedName&&(a=EI(e.attr,o.tfDeprecatedName,o.defaultValue));break;case"func":a=I_(e.attr,o.tfName,o.defaultValue),a===void 0&&o.tfDeprecatedName&&(a=I_(e.attr,o.tfDeprecatedName,o.defaultValue));break;case"tensor":case"tensors":break;default:throw new Error(`Unsupported param type: ${o.type} for op: ${e.op}`)}return s[o.name]={value:a,type:i},s},{})),r}mapFunction(e){const n=e.nodeDef,r=[],s=[];let o={};n!=null&&(o=n.reduce((f,p)=>(f[p.name]=this.mapNode(p),p.op==="Const"&&s.push(f[p.name]),f),{}));const i=[],a=[];e.signature.inputArg.forEach(f=>{const[p]=zl(f.name),g={name:p,op:"Placeholder",inputs:[],inputNames:[],category:"graph",inputParams:{},attrParams:{dtype:{value:_R(f.type),type:"dtype"}},children:[]};g.signatureKey=f.name,i.push(g),o[p]=g}),Object.keys(o).forEach(f=>{const p=o[f];p.inputNames.forEach((g,x)=>{const[b,,w]=zl(g),C=o[b];if(C.outputs!=null){const N=C.outputs.indexOf(w);if(N!==-1){const k=`${b}:${N}`;p.inputNames[x]=k}}p.inputs.push(C),C.children.push(p)})});const c=e.ret;e.signature.outputArg.forEach(f=>{const[p,g]=zl(c[f.name]),x=o[p];x!=null&&(x.defaultOutput=g,a.push(x))});const d=this.mapArgsToSignature(e);return{nodes:o,inputs:i,outputs:a,weights:s,placeholders:r,signature:d}}mapArgsToSignature(e){return{methodName:e.signature.name,inputs:e.signature.inputArg.reduce((n,r)=>(n[r.name]=this.mapArgToTensorInfo(r),n),{}),outputs:e.signature.outputArg.reduce((n,r)=>(n[r.name]=this.mapArgToTensorInfo(r,e.ret),n),{})}}mapArgToTensorInfo(e,n){let r=e.name;return n!=null&&(r=n[r]),{name:r,dtype:e.type}}}function n1e(t){const e=Ee().global;if(typeof e.atob<"u")return e.atob(t);if(typeof Buffer<"u")return new Buffer(t,"base64").toString();throw new Error("Unable to decode base64 in this environment. Missing built-in atob() or Buffer()")}function hV(t,e){const n=Array.isArray(t)?String.fromCharCode.apply(null,t):n1e(t);return e?n:n.toLowerCase()}function vI(t,e,n,r=!1){const s=t[e];return s!=null?hV(s.s,r):n}function CI(t,e,n){const r=t[e];return r?r.b:n}function SI(t,e,n){const r=t[e]||{},s=r.i!=null?r.i:r.f!=null?r.f:n;return typeof s=="number"?s:parseInt(s,10)}function _R(t){switch(typeof t=="string"&&(t=Do[t]),t){case Do.DT_FLOAT:case Do.DT_HALF:return"float32";case Do.DT_INT32:case Do.DT_INT64:case Do.DT_INT8:case Do.DT_UINT8:return"int32";case Do.DT_BOOL:return"bool";case Do.DT_DOUBLE:return"float32";case Do.DT_STRING:return"string";case Do.DT_COMPLEX64:case Do.DT_COMPLEX128:return"complex64";default:return null}}function I_(t,e,n){const r=t[e];return r&&r.func?r.func.name:n}function NI(t,e,n){const r=t[e];return r&&r.type?_R(r.type):n}function EI(t,e,n){const r=t[e];return r&&r.list&&r.list.type?r.list.type.map(s=>_R(s)):n}function pV(t){if(!t.unknownRank)return t.dim!=null?t.dim.map(e=>typeof e.size=="number"?e.size:parseInt(e.size,10)):[]}function II(t,e,n){const r=t[e];return r&&r.shape?pV(r.shape):n}function kI(t,e,n){const r=t[e];return r?((r.list.f&&r.list.f.length?r.list.f:r.list.i)||[]).map(s=>typeof s=="number"?s:parseInt(s,10)):n}function TI(t,e,n,r=!1){const s=t[e];return s&&s.list&&s.list.s?s.list.s.map(o=>hV(o,r)):n}function AI(t,e,n){const r=t[e];return r&&r.list&&r.list.shape?r.list.shape.map(s=>pV(s)):n}function RI(t,e,n){const r=t[e];return r&&r.list&&r.list.b?r.list.b:n}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class r1e{constructor(e,n,r){this.node=e,this.tensorMap=n,this.context=r,this.inputs=[],this.attrs={},this.inputs=e.inputNames.map(s=>this.getInput(s)),e.rawAttrs!=null&&(this.attrs=Object.keys(e.rawAttrs).reduce((s,o)=>(s[o]=this.getAttr(o),s),{}))}getInput(e){return bs(e,this.tensorMap,this.context)}getAttr(e,n){const r=this.node.rawAttrs[e];if(r.tensor!=null)return bs(e,this.tensorMap,this.context);if(r.i!=null||r.f!=null)return SI(this.node.rawAttrs,e,n);if(r.s!=null)return vI(this.node.rawAttrs,e,n);if(r.b!=null)return CI(this.node.rawAttrs,e,n);if(r.shape!=null)return II(this.node.rawAttrs,e,n);if(r.type!=null)return NI(this.node.rawAttrs,e,n);if(r.list!=null){if(r.list.i!=null||r.list.f!=null)return kI(this.node.rawAttrs,e,n);if(r.list.s!=null)return TI(this.node.rawAttrs,e,n);if(r.list.shape!=null)return AI(this.node.rawAttrs,e,n);if(r.list.b!=null)return RI(this.node.rawAttrs,e,n);if(r.list.type!=null)return EI(this.node.rawAttrs,e,n)}return n}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ks=Object.freeze(Object.defineProperty({__proto__:null,OP_SCOPE_SUFFIX:OB,abs:Ur,acos:QB,acosh:JB,add:Ue,addN:Sie,all:XA,any:Mb,argMax:Kh,argMin:e8,asin:t8,asinh:n8,atan:r8,atan2:s8,atanh:o8,avgPool:o2,avgPool3d:i8,basicLSTMCell:Gie,batchNorm:I1,batchNorm2d:a8,batchNorm3d:l8,batchNorm4d:c8,batchToSpaceND:i2,bincount:u8,bitwiseAnd:tae,booleanMaskAsync:Fue,broadcastArgs:rae,broadcastTo:kh,buffer:Gt,cast:nt,ceil:d8,clipByValue:Ko,clone:Zl,complex:fu,concat:yr,concat1d:f8,concat2d:a2,concat3d:h8,concat4d:p8,conv1d:YA,conv2d:mu,conv2dTranspose:QA,conv3d:m8,conv3dTranspose:x8,cos:l2,cosh:JA,cosineWindow:$3,cumprod:Lb,cumsum:e3,denseBincount:iI,depthToSpace:y8,depthwiseConv2d:k1,diag:Iae,dilation2d:b8,div:mt,divNoNan:w8,dot:v8,dropout:X8,einsum:Kf,elu:T1,enclosingPowerOfTwo:K8,ensureShape:Fae,equal:Oa,erf:t3,euclideanNorm:N8,exp:Yo,expandDims:Ls,expm1:E8,eye:r3,fft:v2,fill:Rp,floor:R1,floorDiv:qA,fused:sde,gather:D1,gatherND:Gue,greater:ri,greaterEqual:_u,ifft:Zg,imag:c2,image:Gi,inTopKAsync:Yue,irfft:I3,isFinite:I8,isInf:k8,isNaN:T8,leakyRelu:u2,less:Xg,lessEqual:ff,linalg:rj,linspace:lle,localResponseNormalization:A8,log:xi,log1p:d2,logSigmoid:R8,logSoftmax:s3,logSumExp:f2,logicalAnd:Nl,logicalNot:h2,logicalOr:o3,logicalXor:D8,losses:Pfe,lowerBound:Nle,matMul:en,max:Zi,maxPool:p2,maxPool3d:$8,maxPoolWithArgmax:Tle,maximum:gc,mean:gr,meshgrid:Dle,min:qg,minimum:Gd,mirrorPad:O8,mod:_8,moments:m2,movingAverage:Bue,mul:ie,multiRNNCell:Mle,multinomial:Ble,neg:Jn,norm:A1,notEqual:Zh,oneHot:a3,ones:jo,onesLike:yi,op:se,outerProduct:Ule,pad:Pu,pad1d:qle,pad2d:Kle,pad3d:Zle,pad4d:Jle,pool:P8,pow:oc,prelu:x2,print:ZB,prod:F8,raggedGather:ace,raggedRange:cce,raggedTensorToTensor:dce,rand:hce,randomGamma:$ce,randomNormal:x3,randomStandardNormal:Pce,randomUniform:pf,randomUniformInt:Lce,range:Qh,real:Kg,reciprocal:L8,relu:$l,relu6:y3,reshape:ce,reverse:na,reverse1d:Hce,reverse2d:qce,reverse3d:Kce,reverse4d:Zce,rfft:C2,round:b3,rsqrt:w3,scalar:kt,scatterND:zue,searchSorted:i3,selu:v3,separableConv2d:C3,setdiff1dAsync:rue,sigmoid:Ta,sign:B8,signal:_fe,sin:S3,sinh:N3,slice:Pt,slice1d:y2,slice2d:E3,slice3d:b2,slice4d:Yg,softmax:w2,softplus:Dp,spaceToBatchND:g2,sparse:Ffe,sparseToDense:Uue,spectral:Ofe,split:Ho,sqrt:Ns,square:Fn,squaredDifference:k3,squeeze:Aa,stack:Zo,step:$p,stridedSlice:j8,string:Mfe,sub:lt,sum:bt,tan:z8,tanh:Hd,tensor:ka,tensor1d:cs,tensor2d:kd,tensor3d:V8,tensor4d:Sue,tensor5d:Nue,tensor6d:Eue,tensorScatterUpdate:kue,tile:Hi,topk:U8,transpose:an,truncatedNormal:A3,unique:H8,unsortedSegmentSum:R3,unstack:ra,upperBound:Oue,variable:G8,where:js,whereAsync:q8,zeros:qr,zerosLike:ln},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const s1e=(t,e,n,r=ks)=>{switch(t.op){case"BiasAdd":case"AddV2":case"Add":return[r.add(L("a",t,e,n),L("b",t,e,n))];case"AddN":return[r.addN(L("tensors",t,e,n))];case"FloorMod":case"Mod":return[r.mod(L("a",t,e,n),L("b",t,e,n))];case"Mul":return[r.mul(L("a",t,e,n),L("b",t,e,n))];case"RealDiv":case"Div":return[r.div(L("a",t,e,n),L("b",t,e,n))];case"DivNoNan":return[r.divNoNan(L("a",t,e,n),L("b",t,e,n))];case"FloorDiv":return[r.floorDiv(L("a",t,e,n),L("b",t,e,n))];case"Sub":return[r.sub(L("a",t,e,n),L("b",t,e,n))];case"Minimum":return[r.minimum(L("a",t,e,n),L("b",t,e,n))];case"Maximum":return[r.maximum(L("a",t,e,n),L("b",t,e,n))];case"Pow":return[r.pow(L("a",t,e,n),L("b",t,e,n))];case"SquaredDifference":return[r.squaredDifference(L("a",t,e,n),L("b",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const o1e=(t,e,n,r=ks)=>{switch(t.op){case"Abs":case"ComplexAbs":return[r.abs(L("x",t,e,n))];case"Acos":return[r.acos(L("x",t,e,n))];case"Acosh":return[r.acosh(L("x",t,e,n))];case"Asin":return[r.asin(L("x",t,e,n))];case"Asinh":return[r.asinh(L("x",t,e,n))];case"Atan":return[r.atan(L("x",t,e,n))];case"Atan2":return[r.atan2(L("x",t,e,n),L("y",t,e,n))];case"Atanh":return[r.atanh(L("x",t,e,n))];case"Ceil":return[r.ceil(L("x",t,e,n))];case"Complex":return[r.complex(L("real",t,e,n),L("imag",t,e,n))];case"Cos":return[r.cos(L("x",t,e,n))];case"Cosh":return[r.cosh(L("x",t,e,n))];case"Elu":return[r.elu(L("x",t,e,n))];case"Erf":return[r.erf(L("x",t,e,n))];case"Exp":return[r.exp(L("x",t,e,n))];case"Expm1":return[r.expm1(L("x",t,e,n))];case"Floor":return[r.floor(L("x",t,e,n))];case"Log":return[r.log(L("x",t,e,n))];case"Log1p":return[r.log1p(L("x",t,e,n))];case"Imag":return[r.imag(L("x",t,e,n))];case"Neg":return[r.neg(L("x",t,e,n))];case"Reciprocal":return[r.reciprocal(L("x",t,e,n))];case"Real":return[r.real(L("x",t,e,n))];case"Relu":return[r.relu(L("x",t,e,n))];case"Round":return[r.round(L("x",t,e,n))];case"Selu":return[r.selu(L("x",t,e,n))];case"Sigmoid":return[r.sigmoid(L("x",t,e,n))];case"Sin":return[r.sin(L("x",t,e,n))];case"Sign":return[r.sign(L("x",t,e,n))];case"Sinh":return[r.sinh(L("x",t,e,n))];case"Softplus":return[r.softplus(L("x",t,e,n))];case"Sqrt":return[r.sqrt(L("x",t,e,n))];case"Square":return[r.square(L("x",t,e,n))];case"Tanh":return[r.tanh(L("x",t,e,n))];case"Tan":return[r.tan(L("x",t,e,n))];case"ClipByValue":return[r.clipByValue(L("x",t,e,n),L("clipValueMin",t,e,n),L("clipValueMax",t,e,n))];case"Relu6":return[r.relu6(L("x",t,e,n))];case"Rsqrt":return[r.rsqrt(bs(t.inputNames[0],e,n))];case"LeakyRelu":return[r.leakyRelu(L("x",t,e,n),L("alpha",t,e,n))];case"Prelu":return[r.prelu(L("x",t,e,n),L("alpha",t,e,n))];case"IsNan":return[r.isNaN(bs(t.inputNames[0],e,n))];case"IsInf":return[r.isInf(bs(t.inputNames[0],e,n))];case"IsFinite":return[r.isFinite(bs(t.inputNames[0],e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Oi(t,e,n=""){if(!(typeof t=="number"||typeof e=="number")){Y(t.length===e.length,()=>n+` Shapes ${t} and ${e} must match`);for(let r=0;r<t.length;r++){const s=t[r],o=e[r];Y(s<0||o<0||s===o,()=>n+` Shapes ${t} and ${e} must match`)}}}function k_(t){return!(typeof t=="number"||t.some(e=>e<0))}function Nm(t,e,n){let r=DI(t,n);const s=!k_(r);if(s&&e.length===0)throw new Error(`Tried to calculate elements of an empty list with non-fully-defined elementShape: ${r}`);if(s&&e.forEach(o=>{r=DI(o.shape,r)}),!k_(r))throw new Error(`Non-fully-defined elementShape: ${r}`);return r}function DI(t,e){if(typeof t=="number")return e;if(typeof e=="number")return t;if(t.length!==e.length)throw new Error(`Incompatible ranks during merge: ${t} vs. ${e}`);const n=[];for(let r=0;r<t.length;++r){const s=t[r],o=e[r];if(s>=0&&o>=0&&s!==o)throw new Error(`Incompatible shape during merge: ${t} vs. ${e}`);n[r]=s>=0?s:o}return n}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class i1e{constructor(e,n,r,s,o,i,a){this.name=e,this.dtype=n,this.maxSize=r,this.elementShape=s,this.identicalElementShapes=o,this.dynamicSize=i,this.clearAfterRead=a,this.tensors=[],this.closed_=!1,this.idTensor=kt(0),ls(this.idTensor)}get id(){return this.idTensor.id}get closed(){return this.closed_}clearAndClose(e){this.tensors.forEach(n=>{(e==null||!e.has(n.tensor.id))&&n.tensor.dispose()}),this.tensors=[],this.closed_=!0,this.idTensor.dispose()}size(){return this.tensors.length}read(e){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(e<0||e>=this.size())throw new Error(`Tried to read from index ${e}, but array size is: ${this.size()}`);const n=this.tensors[e];if(n.cleared)throw new Error(`TensorArray ${this.name}: Could not read index ${e} twice because it was cleared after a previous read (perhaps try setting clear_after_read = false?).`);return this.clearAfterRead&&(n.cleared=!0),n.read=!0,n.tensor}readMany(e){return e.map(n=>this.read(n))}write(e,n){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(e<0||!this.dynamicSize&&e>=this.maxSize)throw new Error(`Tried to write to index ${e}, but array is not resizeable and size is: ${this.maxSize}`);const r=this.tensors[e]||{};if(n.dtype!==this.dtype)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e},
          because the value dtype is ${n.dtype}, but TensorArray dtype is ${this.dtype}.`);if(this.size()===0&&(this.elementShape==null||this.elementShape.length===0)&&(this.elementShape=n.shape),Oi(this.elementShape,n.shape,`TensorArray ${this.name}: Could not write to TensorArray index ${e}.`),r.read)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e}, because it has already been read.`);if(r.written)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e}, because it has already been written.`);r.tensor=n,ls(n),r.written=!0,this.tensors[e]=r}writeMany(e,n){if(e.length!==n.length)throw new Error(`TensorArray ${this.name}: could not write multiple tensors,because the index size: ${e.length} is not the same as tensors size: ${n.length}.`);e.forEach((r,s)=>this.write(r,n[s]))}gather(e,n){if(n&&n!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but gather requested dtype ${n}`);if(e)e=e.slice(0,this.size());else{e=[];for(let s=0;s<this.size();s++)e.push(s)}if(e.length===0)return ka([],[0].concat(this.elementShape));const r=this.readMany(e);return Oi(this.elementShape,r[0].shape,"TensorArray shape mismatch: "),Zo(r,0)}concat(e){if(e&&e!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but concat requested dtype ${e}`);if(this.size()===0)return ka([],[0].concat(this.elementShape));const n=[];for(let s=0;s<this.size();s++)n.push(s);const r=this.readMany(n);return Oi(this.elementShape,r[0].shape,`TensorArray shape mismatch: tensor array shape (${this.elementShape}) vs first tensor shape (${r[0].shape})`),yr(r,0)}scatter(e,n){if(n.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${n.dtype}`);if(e.length!==n.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${e.length} vs. ${n.shape[0]}`);const r=Math.max(...e);if(!this.dynamicSize&&r>=this.maxSize)throw new Error(`Max index must be < array size (${r}  vs. ${this.maxSize})`);this.writeMany(e,ra(n,0))}split(e,n){if(n.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${n.dtype}`);let r=0;const s=e.map(l=>(r+=l,r));if(r!==n.shape[0])throw new Error(`Expected sum of lengths to be equal to
          tensor.shape[0], but sum of lengths is
        ${r}, and tensor's shape is: ${n.shape}`);if(!this.dynamicSize&&e.length!==this.maxSize)throw new Error(`TensorArray's size is not equal to the size of lengths (${this.maxSize} vs. ${e.length}), and the TensorArray is not marked as dynamically resizeable`);const o=r===0?0:n.size/r,i=[];we(()=>{n=ce(n,[1,r,o]);for(let l=0;l<e.length;++l){const d=[0,l===0?0:s[l-1],0],f=[1,e[l],o];i[l]=ce(Pt(n,d,f),this.elementShape)}return i});const a=[];for(let l=0;l<e.length;l++)a[l]=l;this.writeMany(a,i)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Kd{get id(){return this.idTensor.id}constructor(e,n,r,s=-1){this.tensors=e,this.elementShape=n,this.elementDtype=r,e!=null&&e.forEach(o=>{if(r!==o.dtype)throw new Error(`Invalid data types; op elements ${r}, but list elements ${o.dtype}`);Oi(n,o.shape,"TensorList shape mismatch: "),ls(o)}),this.idTensor=kt(0),this.maxNumElements=s,ls(this.idTensor)}copy(){return new Kd([...this.tensors],this.elementShape,this.elementDtype)}clearAndClose(e){this.tensors.forEach(n=>{(e==null||!e.has(n.id))&&n.dispose()}),this.tensors.length=0,this.idTensor.dispose()}size(){return this.tensors.length}stack(e,n,r=-1){if(n!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${this.elementDtype}`);if(r!==-1&&this.tensors.length!==r)throw new Error(`Operation expected a list with ${r} elements but got a list with ${this.tensors.length} elements.`);Oi(e,this.elementShape,"TensorList shape mismatch: ");const s=Nm(this.elementShape,this.tensors,e);return we(()=>{const o=this.tensors.map(i=>ce(i,s));return Zo(o,0)})}popBack(e,n){if(n!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${this.elementDtype}`);if(this.size()===0)throw new Error("Trying to pop from an empty list.");const r=Nm(this.elementShape,this.tensors,e),s=this.tensors.pop();return s.kept=!1,Oi(s.shape,e,"TensorList shape mismatch: "),ce(s,r)}pushBack(e){if(e.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${e.dtype}, but list elements ${this.elementDtype}`);if(Oi(e.shape,this.elementShape,"TensorList shape mismatch: "),this.maxNumElements===this.size())throw new Error("Trying to push element into a full list.");ls(e),this.tensors.push(e)}resize(e){if(e<0)throw new Error(`TensorListResize expects size to be non-negative. Got: ${e}`);if(this.maxNumElements!==-1&&e>this.maxNumElements)throw new Error(`TensorListResize input size ${e} is greater maxNumElement ${this.maxNumElements}.`);const n=new Kd([],this.elementShape,this.elementDtype,this.maxNumElements);n.tensors.length=e;for(let r=0;r<Math.min(this.tensors.length,e);++r)n.tensors[r]=this.tensors[r];return n}getItem(e,n,r){if(r!==this.elementDtype)throw new Error(`Invalid data types; op elements ${r}, but list elements ${this.elementDtype}`);if(e<0||e>this.tensors.length)throw new Error(`Trying to access element ${e} in a list with ${this.tensors.length} elements.`);if(this.tensors[e]==null)throw new Error(`element at index ${e} is null.`);Oi(this.tensors[e].shape,n,"TensorList shape mismatch: ");const s=Nm(this.elementShape,this.tensors,n);return ce(this.tensors[e],s)}setItem(e,n){if(n.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n.dtype}, but list elements ${this.elementDtype}`);if(e<0||this.maxNumElements!==-1&&e>=this.maxNumElements)throw new Error(`Trying to set element ${e} in a list with max ${this.maxNumElements} elements.`);Oi(this.elementShape,n.shape,"TensorList shape mismatch: "),ls(n),this.tensors[e]!=null&&(this.tensors[e].kept=!1),this.tensors[e]=n}gather(e,n,r){if(n!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${this.elementDtype}`);Oi(this.elementShape,r,"TensorList shape mismatch: "),e=e.slice(0,this.size());const s=Nm(this.elementShape,this.tensors,r);return e.length===0?ka([],[0].concat(s)):we(()=>{const o=e.map(i=>ce(this.tensors[i],s));return Zo(o,0)})}concat(e,n){if(e&&e!==this.elementDtype)throw new Error(`TensorList dtype is ${this.elementDtype} but concat requested dtype ${e}`);Oi(this.elementShape,n,"TensorList shape mismatch: ");const r=Nm(this.elementShape,this.tensors,n);return this.size()===0?ka([],[0].concat(r)):we(()=>{const s=this.tensors.map(o=>ce(o,r));return yr(s,0)})}}function a1e(t,e,n){const r=t.dtype;if(t.shape.length<1)throw new Error(`Tensor must be at least a vector, but saw shape: ${t.shape}`);if(t.dtype!==n)throw new Error(`Invalid data types; op elements ${t.dtype}, but list elements ${n}`);const s=t.shape.slice(1);Oi(s,e,"TensorList shape mismatch: ");const o=ra(t);return new Kd(o,e,r)}function l1e(t,e,n,r){return new Kd([],t,e,r)}function c1e(t,e,n,r){if(e.length!==t.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${e.length} vs. ${t.shape[0]}`);const s=Math.max(...e);if(r!=null&&r!==-1&&s>=r)throw new Error(`Max index must be < array size (${s}  vs. ${r})`);const o=new Kd([],n,t.dtype,r),i=ra(t,0);return e.forEach((a,l)=>{o.setItem(a,i[l])}),o}function u1e(t,e,n){let r=0;const s=e.map(d=>(r+=d,r));if(r!==t.shape[0])throw new Error(`Expected sum of lengths to be equal to
          tensor.shape[0], but sum of lengths is
        ${r}, and tensor's shape is: ${t.shape}`);const o=t.shape.slice(1),i=DI(o,n),a=r===0?0:t.size/r,l=we(()=>{const d=[];t=ce(t,[1,r,a]);for(let f=0;f<e.length;++f){const g=[0,f===0?0:s[f-1],0],x=[1,e[f],a];d[f]=ce(Pt(t,g,x),i)}return t.dispose(),d}),c=new Kd([],n,t.dtype,e.length);for(let d=0;d<l.length;d++)c.setItem(d,l[d]);return c}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const d1e=async(t,e,n)=>{switch(t.op){case"If":case"StatelessIf":{const r=L("thenBranch",t,e,n),s=L("elseBranch",t,e,n),o=L("cond",t,e,n),i=L("args",t,e,n);return(await o.data())[0]?n.functionMap[r].executeFunctionAsync(i,n.tensorArrayMap,n.tensorListMap):n.functionMap[s].executeFunctionAsync(i,n.tensorArrayMap,n.tensorListMap)}case"While":case"StatelessWhile":{const r=L("body",t,e,n),s=L("cond",t,e,n),o=L("args",t,e,n),i=await n.functionMap[s].executeFunctionAsync(o,n.tensorArrayMap,n.tensorListMap),a=o.map(d=>d.id);let l=await i[0].data();i.forEach(d=>{!d.kept&&a.indexOf(d.id)===-1&&d.dispose()});let c=o;for(;l[0];){const d=c;c=await n.functionMap[r].executeFunctionAsync(c,n.tensorArrayMap,n.tensorListMap);const f=c.map(g=>g.id);d.forEach(g=>{!g.kept&&a.indexOf(g.id)===-1&&f.indexOf(g.id)===-1&&g.dispose()});const p=await n.functionMap[s].executeFunctionAsync(c,n.tensorArrayMap,n.tensorListMap);l=await p[0].data(),p.forEach(g=>{!g.kept&&a.indexOf(g.id)===-1&&f.indexOf(g.id)===-1&&g.dispose()})}return c}case"LoopCond":{const r=L("pred",t,e,n);return[Vl(r)]}case"Switch":{const r=L("pred",t,e,n);let s=L("data",t,e,n);return s.kept||(s=Vl(s)),(await r.data())[0]?[void 0,s]:[s,void 0]}case"Merge":{const r=t.inputNames.find(s=>bs(s,e,n)!==void 0);if(r){const s=bs(r,e,n);return[Vl(s)]}return}case"Enter":{const r=L("frameName",t,e,n),s=L("tensor",t,e,n);return n.enterFrame(r),[Vl(s)]}case"Exit":{const r=L("tensor",t,e,n);return n.exitFrame(),[Vl(r)]}case"NextIteration":{const r=L("tensor",t,e,n);return n.nextIteration(),[Vl(r)]}case"TensorArrayV3":{const r=L("size",t,e,n),s=L("dtype",t,e,n),o=L("elementShape",t,e,n),i=L("dynamicSize",t,e,n),a=L("clearAfterRead",t,e,n),l=L("identicalElementShapes",t,e,n),c=L("name",t,e,n),d=new i1e(c,s,r,o,l,i,a);return n.addTensorArray(d),[d.idTensor,kt(1)]}case"TensorArrayWriteV3":{const r=L("tensorArrayId",t,e,n),s=L("index",t,e,n),o=L("tensor",t,e,n),i=n.getTensorArray(r.id);return i.write(s,o),[i.idTensor]}case"TensorArrayReadV3":{const r=L("tensorArrayId",t,e,n),s=L("index",t,e,n);return[n.getTensorArray(r.id).read(s)]}case"TensorArrayGatherV3":{const r=L("tensorArrayId",t,e,n),s=L("indices",t,e,n),o=L("dtype",t,e,n);return[n.getTensorArray(r.id).gather(s,o)]}case"TensorArrayScatterV3":{const r=L("tensorArrayId",t,e,n),s=L("indices",t,e,n),o=L("tensor",t,e,n),i=n.getTensorArray(r.id);return i.scatter(s,o),[i.idTensor]}case"TensorArrayConcatV3":{const r=L("tensorArrayId",t,e,n),s=n.getTensorArray(r.id),o=L("dtype",t,e,n);return[s.concat(o)]}case"TensorArraySplitV3":{const r=L("tensorArrayId",t,e,n),s=L("tensor",t,e,n),o=L("lengths",t,e,n),i=n.getTensorArray(r.id);return i.split(o,s),[i.idTensor]}case"TensorArraySizeV3":{const r=L("tensorArrayId",t,e,n),s=n.getTensorArray(r.id);return[kt(s.size(),"int32")]}case"TensorArrayCloseV3":{const r=L("tensorArrayId",t,e,n),s=n.getTensorArray(r.id);return s.clearAndClose(),[s.idTensor]}case"TensorListSetItem":{const r=L("tensorListId",t,e,n),s=L("index",t,e,n),o=L("tensor",t,e,n),i=n.getTensorList(r.id);return i.setItem(s,o),[i.idTensor]}case"TensorListGetItem":{const r=L("tensorListId",t,e,n),s=L("index",t,e,n),o=L("elementShape",t,e,n),i=L("elementDType",t,e,n);return[n.getTensorList(r.id).getItem(s,o,i)]}case"TensorListScatterV2":case"TensorListScatter":{const r=L("indices",t,e,n),s=L("tensor",t,e,n),o=L("elementShape",t,e,n),i=L("numElements",t,e,n),a=c1e(s,r,o,i);return n.addTensorList(a),[a.idTensor]}case"TensorListReserve":case"EmptyTensorList":{const r=L("elementShape",t,e,n),s=L("elementDType",t,e,n);let o;t.op==="TensorListReserve"?o="numElements":o="maxNumElements";const i=L(o,t,e,n),a=t.op==="TensorListReserve"?-1:i,l=l1e(r,s,i,a);return n.addTensorList(l),[l.idTensor]}case"TensorListGather":{const r=L("tensorListId",t,e,n),s=L("indices",t,e,n),o=L("elementShape",t,e,n),i=L("elementDType",t,e,n);return[n.getTensorList(r.id).gather(s,i,o)]}case"TensorListStack":{const r=L("tensorListId",t,e,n),s=L("elementShape",t,e,n),o=L("elementDType",t,e,n),i=L("numElements",t,e,n);return[n.getTensorList(r.id).stack(s,o,i)]}case"TensorListFromTensor":{const r=L("tensor",t,e,n),s=L("elementShape",t,e,n),o=L("elementDType",t,e,n),i=a1e(r,s,o);return n.addTensorList(i),[i.idTensor]}case"TensorListConcat":case"TensorListConcatV2":{const r=L("tensorListId",t,e,n),s=n.getTensorList(r.id),o=L("dtype",t,e,n),i=L("elementShape",t,e,n);return[s.concat(o,i)]}case"TensorListPushBack":{const r=L("tensorListId",t,e,n),s=L("tensor",t,e,n),o=n.getTensorList(r.id);return o.pushBack(s),[o.idTensor]}case"TensorListPopBack":{const r=L("tensorListId",t,e,n),s=L("elementShape",t,e,n),o=L("elementDType",t,e,n);return[n.getTensorList(r.id).popBack(s,o)]}case"TensorListSplit":{const r=L("tensor",t,e,n),s=L("elementShape",t,e,n),o=L("lengths",t,e,n),i=u1e(r,o,s);return n.addTensorList(i),[i.idTensor]}case"TensorListLength":{const r=L("tensorListId",t,e,n),s=n.getTensorList(r.id);return[kt(s.size(),"int32")]}case"TensorListResize":{const r=L("tensorListId",t,e,n),s=L("size",t,e,n),i=n.getTensorList(r.id).resize(s);return n.addTensorList(i),[i.idTensor]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function T_(t,e,n){const[r,s]=L("fusedOps",t,e,n),o=r==="biasadd",i=!o,a=s==="prelu",l=r==="fusedbatchnorm",c=L("numArgs",t,e,n);if(o){if(a&&c!==2)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!a&&o&&c!==1)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd must have one extra argument: bias.")}if(l)throw new Error("FusedConv2d and DepthwiseConv2d with FusedBatchNorm is not supported");const d=L("strides",t,e,n),f=_y(t,e,n),p=L("dataFormat",t,e,n).toUpperCase(),g=L("dilations",t,e,n);let[x,b]=L("args",t,e,n);i&&(b=x,x=void 0);const w=L("leakyreluAlpha",t,e,n);return{stride:d,pad:f,dataFormat:p,dilations:g,biasArg:x,preluArg:b,activationFunc:s,leakyreluAlpha:w}}const f1e=(t,e,n,r=ks)=>{switch(t.op){case"Conv1D":{const s=L("stride",t,e,n),o=L("pad",t,e,n),i=L("dataFormat",t,e,n).toUpperCase(),a=L("dilation",t,e,n);return[r.conv1d(L("x",t,e,n),L("filter",t,e,n),s,o,i,a)]}case"Conv2D":{const s=L("strides",t,e,n),o=_y(t,e,n),i=L("dataFormat",t,e,n).toUpperCase(),a=L("dilations",t,e,n);return[r.conv2d(L("x",t,e,n),L("filter",t,e,n),[s[1],s[2]],o,i,[a[1],a[2]])]}case"_FusedConv2D":{const{stride:s,pad:o,dataFormat:i,dilations:a,biasArg:l,preluArg:c,activationFunc:d,leakyreluAlpha:f}=T_(t,e,n);return[r.fused.conv2d({x:L("x",t,e,n),filter:L("filter",t,e,n),strides:[s[1],s[2]],pad:o,dataFormat:i,dilations:[a[1],a[2]],bias:l,activation:d,preluActivationWeights:c,leakyreluAlpha:f})]}case"FusedDepthwiseConv2dNative":{const{stride:s,pad:o,dataFormat:i,dilations:a,biasArg:l,preluArg:c,activationFunc:d,leakyreluAlpha:f}=T_(t,e,n);return[r.fused.depthwiseConv2d({x:L("x",t,e,n),filter:L("filter",t,e,n),strides:[s[1],s[2]],pad:o,dataFormat:i,dilations:[a[1],a[2]],bias:l,activation:d,preluActivationWeights:c,leakyreluAlpha:f})]}case"Conv2DBackpropInput":case"Conv2dTranspose":{const s=L("outputShape",t,e,n),o=L("strides",t,e,n),i=_y(t,e,n);return[r.conv2dTranspose(L("x",t,e,n),L("filter",t,e,n),s,[o[1],o[2]],i)]}case"DepthwiseConv2dNative":case"DepthwiseConv2d":{const s=L("strides",t,e,n),o=_y(t,e,n),i=L("dilations",t,e,n),a=L("dataFormat",t,e,n).toUpperCase();return[r.depthwiseConv2d(L("input",t,e,n),L("filter",t,e,n),[s[1],s[2]],o,a,[i[1],i[2]])]}case"Conv3D":{const s=L("strides",t,e,n),o=L("pad",t,e,n),i=L("dataFormat",t,e,n).toUpperCase(),a=L("dilations",t,e,n);return[r.conv3d(L("x",t,e,n),L("filter",t,e,n),[s[1],s[2],s[3]],o,i,[a[1],a[2],a[3]])]}case"AvgPool":{const s=L("strides",t,e,n),o=L("pad",t,e,n),i=L("kernelSize",t,e,n);return[r.avgPool(L("x",t,e,n),[i[1],i[2]],[s[1],s[2]],o)]}case"MaxPool":{const s=L("strides",t,e,n),o=L("pad",t,e,n),i=L("kernelSize",t,e,n);return[r.maxPool(L("x",t,e,n),[i[1],i[2]],[s[1],s[2]],o)]}case"MaxPoolWithArgmax":{const s=L("strides",t,e,n),o=L("pad",t,e,n),i=L("kernelSize",t,e,n),a=L("includeBatchInIndex",t,e,n),{result:l,indexes:c}=r.maxPoolWithArgmax(L("x",t,e,n),[i[1],i[2]],[s[1],s[2]],o,a);return[l,c]}case"AvgPool3D":{const s=L("strides",t,e,n),o=L("pad",t,e,n),i=L("kernelSize",t,e,n);return[r.avgPool3d(L("x",t,e,n),[i[1],i[2],i[3]],[s[1],s[2],s[3]],o)]}case"MaxPool3D":{const s=L("strides",t,e,n),o=L("pad",t,e,n),i=L("kernelSize",t,e,n);return[r.maxPool3d(L("x",t,e,n),[i[1],i[2],i[3]],[s[1],s[2],s[3]],o)]}case"Dilation2D":{const s=L("strides",t,e,n),o=L("pad",t,e,n),i=L("dilations",t,e,n),a=s[1],l=s[2],c=i[1],d=i[2];return[r.dilation2d(L("x",t,e,n),L("filter",t,e,n),[a,l],o,[c,d],"NHWC")]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const h1e=(t,e,n,r=ks)=>{switch(t.op){case"Fill":{const s=L("shape",t,e,n),o=L("dtype",t,e,n),i=L("value",t,e,n);return[r.fill(s,i,o)]}case"LinSpace":{const s=L("start",t,e,n),o=L("stop",t,e,n),i=L("num",t,e,n);return[r.linspace(s,o,i)]}case"Multinomial":{const s=L("logits",t,e,n),o=L("numSamples",t,e,n),i=L("seed",t,e,n);return[r.multinomial(s,o,i)]}case"OneHot":{const s=L("indices",t,e,n),o=L("depth",t,e,n),i=L("onValue",t,e,n),a=L("offValue",t,e,n),l=L("dtype",t,e,n);return[r.oneHot(s,o,i,a,l)]}case"Ones":return[r.ones(L("shape",t,e,n),L("dtype",t,e,n))];case"OnesLike":return[r.onesLike(L("x",t,e,n))];case"RandomStandardNormal":return[r.randomStandardNormal(L("shape",t,e,n),L("dtype",t,e,n),L("seed",t,e,n))];case"RandomUniform":return[r.randomUniform(L("shape",t,e,n),L("minval",t,e,n),L("maxval",t,e,n),L("dtype",t,e,n))];case"RandomUniformInt":return[r.randomUniformInt(L("shape",t,e,n),L("minval",t,e,n),L("maxval",t,e,n),L("seed",t,e,n))];case"Range":{const s=L("start",t,e,n),o=L("stop",t,e,n),i=L("step",t,e,n);return[r.range(s,o,i,L("dtype",t,e,n))]}case"TruncatedNormal":{const s=L("shape",t,e,n),o=L("mean",t,e,n),i=L("stdDev",t,e,n),a=L("seed",t,e,n);return[r.truncatedNormal(s,o,i,L("dtype",t,e,n),a)]}case"Zeros":return[r.zeros(L("shape",t,e,n),L("dtype",t,e,n))];case"ZerosLike":return[r.zerosLike(L("x",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lN(t,e,n){const r=L("boxes",t,e,n),s=L("scores",t,e,n),o=L("maxOutputSize",t,e,n),i=L("iouThreshold",t,e,n),a=L("scoreThreshold",t,e,n),l=L("softNmsSigma",t,e,n);return{boxes:r,scores:s,maxOutputSize:o,iouThreshold:i,scoreThreshold:a,softNmsSigma:l}}const p1e=async(t,e,n,r,s=ks)=>{switch(t.op){case"NonMaxSuppressionV5":{const{boxes:o,scores:i,maxOutputSize:a,iouThreshold:l,scoreThreshold:c,softNmsSigma:d}=lN(t,e,n),f=await s.image.nonMaxSuppressionWithScoreAsync(o,i,a,l,c,d);return[f.selectedIndices,f.selectedScores]}case"NonMaxSuppressionV4":{const{boxes:o,scores:i,maxOutputSize:a,iouThreshold:l,scoreThreshold:c}=lN(t,e,n),d=L("padToMaxOutputSize",t,e,n),f=await s.image.nonMaxSuppressionPaddedAsync(o,i,a,l,c,d);return[f.selectedIndices,f.validOutputs]}case"NonMaxSuppressionV3":case"NonMaxSuppressionV2":{const{boxes:o,scores:i,maxOutputSize:a,iouThreshold:l,scoreThreshold:c}=lN(t,e,n);return[await s.image.nonMaxSuppressionAsync(o,i,a,l,c)]}case"Where":{const o=s.cast(L("condition",t,e,n),"bool"),i=[await s.whereAsync(o)];return o.dispose(),i}case"ListDiff":return s.setdiff1dAsync(L("x",t,e,n),L("y",t,e,n));default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const m1e=(t,e,n,r=ks)=>{switch(t.op){case"LowerBound":{const s=L("sortedSequence",t,e,n),o=L("values",t,e,n);return[r.lowerBound(s,o)]}case"TopKV2":{const s=L("x",t,e,n),o=L("k",t,e,n),i=L("sorted",t,e,n),a=r.topk(s,o,i);return[a.values,a.indices]}case"UpperBound":{const s=L("sortedSequence",t,e,n),o=L("values",t,e,n);return[r.upperBound(s,o)]}case"Unique":{const s=L("x",t,e,n),o=r.unique(s);return[o.values,o.indices]}case"UniqueV2":{const s=L("x",t,e,n),o=L("axis",t,e,n),i=r.unique(s,o);return[i.values,i.indices]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const g1e=(t,e,n,r=ks)=>{switch(t.op){case"Const":return e[t.name];case"PlaceholderWithDefault":const s=L("default",t,e,n);return[bs(t.name,e,n)||s];case"Placeholder":return[bs(t.name,e,n)];case"Identity":case"StopGradient":case"FakeQuantWithMinMaxVars":{const d=L("x",t,e,n);return[Vl(d)]}case"IdentityN":return L("x",t,e,n).map(d=>Vl(d));case"Snapshot":const o=L("x",t,e,n);return[Vl(o)];case"Shape":return[r.tensor1d(L("x",t,e,n).shape,"int32")];case"ShapeN":return L("x",t,e,n).map(d=>r.tensor1d(d.shape));case"Size":return[r.scalar(L("x",t,e,n).size,"int32")];case"Rank":return[r.scalar(L("x",t,e,n).rank,"int32")];case"NoOp":return[r.scalar(1)];case"Print":const i=L("x",t,e,n),a=L("data",t,e,n),l=L("message",t,e,n),c=L("summarize",t,e,n);console.warn("The graph has a tf.print() operation,usually used for debugging, which slows down performance."),console.log(l);for(let d=0;d<a.length;d++)console.log(Array.prototype.slice.call(a[d].dataSync()).slice(0,c));return[i];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class x1e{get id(){return this.handle.id}constructor(e,n){this.keyDType=e,this.valueDType=n,this.handle=kt(0),this.tensorMap=new Map,ls(this.handle)}clearAndClose(){this.tensorMap.forEach(e=>e.dispose()),this.tensorMap.clear(),this.handle.dispose()}size(){return this.tensorMap.size}tensorSize(){return kt(this.size(),"int32")}async import(e,n){this.checkKeyAndValueTensor(e,n);const r=await e.data();return this.tensorMap.forEach(s=>s.dispose()),this.tensorMap.clear(),we(()=>{const s=ra(n),o=r.length,i=s.length;Y(o===i,()=>`The number of elements doesn't match, keys has ${o} elements, the values has ${i} elements.`);for(let a=0;a<o;a++){const l=r[a],c=s[a];ls(c),this.tensorMap.set(l,c)}return this.handle})}async find(e,n){this.checkKeyAndValueTensor(e,n);const r=await e.data();return we(()=>{const s=[];for(let o=0;o<r.length;o++){const i=r[o],a=this.findWithDefault(i,n);s.push(a)}return Zo(s)})}findWithDefault(e,n){const r=this.tensorMap.get(e);return r??n}checkKeyAndValueTensor(e,n){if(e.dtype!==this.keyDType)throw new Error(`Expect key dtype ${this.keyDType}, but got ${e.dtype}`);if(n.dtype!==this.valueDType)throw new Error(`Expect value dtype ${this.valueDType}, but got ${n.dtype}`)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const y1e=async(t,e,n,r)=>{switch(t.op){case"HashTable":case"HashTableV2":{const s=r.getHashTableHandleByName(t.name);if(s!=null)return[s];{const o=L("keyDType",t,e,n),i=L("valueDType",t,e,n),a=new x1e(o,i);return r.addHashTable(t.name,a),[a.handle]}}case"InitializeTable":case"InitializeTableV2":case"LookupTableImport":case"LookupTableImportV2":{const s=L("tableHandle",t,e,n,r),o=L("keys",t,e,n),i=L("values",t,e,n);return[await r.getHashTableById(s.id).import(o,i)]}case"LookupTableFind":case"LookupTableFindV2":{const s=L("tableHandle",t,e,n,r),o=L("keys",t,e,n),i=L("defaultValue",t,e,n);return[await r.getHashTableById(s.id).find(o,i)]}case"LookupTableSize":case"LookupTableSizeV2":{const s=L("tableHandle",t,e,n,r);return[r.getHashTableById(s.id).tensorSize()]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const b1e=(t,e,n,r=ks)=>{switch(t.op){case"ResizeBilinear":{const s=L("images",t,e,n),o=L("size",t,e,n),i=L("alignCorners",t,e,n),a=L("halfPixelCenters",t,e,n);return[r.image.resizeBilinear(s,[o[0],o[1]],i,a)]}case"ResizeNearestNeighbor":{const s=L("images",t,e,n),o=L("size",t,e,n),i=L("alignCorners",t,e,n),a=L("halfPixelCenters",t,e,n);return[r.image.resizeNearestNeighbor(s,[o[0],o[1]],i,a)]}case"CropAndResize":{const s=L("image",t,e,n),o=L("boxes",t,e,n),i=L("boxInd",t,e,n),a=L("cropSize",t,e,n),l=L("method",t,e,n),c=L("extrapolationValue",t,e,n);return[r.image.cropAndResize(s,o,i,a,l,c)]}case"ImageProjectiveTransformV3":{const s=L("images",t,e,n),o=L("transforms",t,e,n),i=L("outputShape",t,e,n),a=L("fillValue",t,e,n),l=L("interpolation",t,e,n),c=L("fillMode",t,e,n);return[r.image.transform(s,o,l.toLowerCase(),c.toLowerCase(),a,i)]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const w1e=(t,e,n,r=ks)=>{switch(t.op){case"Equal":return[r.equal(L("a",t,e,n),L("b",t,e,n))];case"NotEqual":return[r.notEqual(L("a",t,e,n),L("b",t,e,n))];case"Greater":return[r.greater(L("a",t,e,n),L("b",t,e,n))];case"GreaterEqual":return[r.greaterEqual(L("a",t,e,n),L("b",t,e,n))];case"Less":return[r.less(L("a",t,e,n),L("b",t,e,n))];case"LessEqual":return[r.lessEqual(L("a",t,e,n),L("b",t,e,n))];case"LogicalAnd":return[r.logicalAnd(L("a",t,e,n),L("b",t,e,n))];case"LogicalNot":return[r.logicalNot(L("a",t,e,n))];case"LogicalOr":return[r.logicalOr(L("a",t,e,n),L("b",t,e,n))];case"Select":case"SelectV2":return[r.where(L("condition",t,e,n),L("a",t,e,n),L("b",t,e,n))];case"BitwiseAnd":return[r.bitwiseAnd(L("a",t,e,n),L("b",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const v1e=(t,e,n,r=ks)=>{switch(t.op){case"BatchMatMul":case"BatchMatMulV2":case"MatMul":return[r.matMul(L("a",t,e,n),L("b",t,e,n),L("transposeA",t,e,n),L("transposeB",t,e,n))];case"Einsum":return[r.einsum(L("equation",t,e,n),...L("tensors",t,e,n))];case"Transpose":return[r.transpose(L("x",t,e,n),L("perm",t,e,n))];case"_FusedMatMul":const[s,o]=L("fusedOps",t,e,n),i=s==="biasadd",a=o==="prelu",l=L("numArgs",t,e,n),c=L("leakyreluAlpha",t,e,n);if(i){if(a&&l!==2)throw new Error("Fused MatMul with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!a&&l!==1)throw new Error("Fused MatMul with BiasAdd must have one extra argument: bias.")}const[d,f]=L("args",t,e,n);return[r.fused.matMul({a:L("a",t,e,n),b:L("b",t,e,n),transposeA:L("transposeA",t,e,n),transposeB:L("transposeB",t,e,n),bias:d,activation:o,preluActivationWeights:f,leakyreluAlpha:c})];case"MatrixBandPart":return[r.linalg.bandPart(L("a",t,e,n),L("numLower",t,e,n),L("numUpper",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const C1e=(t,e,n,r=ks)=>{switch(t.op){case"EuclideanNorm":return[r.euclideanNorm(L("x",t,e,n),L("axis",t,e,n),L("keepDims",t,e,n))];case"FusedBatchNorm":case"FusedBatchNormV2":return[r.batchNorm(L("x",t,e,n),L("mean",t,e,n),L("variance",t,e,n),L("offset",t,e,n),L("scale",t,e,n),L("epsilon",t,e,n))];case"FusedBatchNormV3":return[r.batchNorm(L("x",t,e,n),L("mean",t,e,n),L("variance",t,e,n),L("offset",t,e,n),L("scale",t,e,n),L("epsilon",t,e,n))];case"LRN":return[r.localResponseNormalization(L("x",t,e,n),L("radius",t,e,n),L("bias",t,e,n),L("alpha",t,e,n),L("beta",t,e,n))];case"Softmax":return[r.softmax(L("x",t,e,n))];case"LogSoftmax":return[r.logSoftmax(L("x",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const S1e=(t,e,n,r=ks)=>{switch(t.op){case"RaggedGather":{const{outputNestedSplits:s,outputDenseValues:o}=r.raggedGather(L("paramsNestedSplits",t,e,n),L("paramsDenseValues",t,e,n),L("indices",t,e,n),L("outputRaggedRank",t,e,n));return s.concat(o)}case"RaggedRange":{const{rtNestedSplits:s,rtDenseValues:o}=r.raggedRange(L("starts",t,e,n),L("limits",t,e,n),L("splits",t,e,n));return[s,o]}case"RaggedTensorToTensor":return[r.raggedTensorToTensor(L("shape",t,e,n),L("values",t,e,n),L("defaultValue",t,e,n),L("rowPartitionTensors",t,e,n),L("rowPartitionTypes",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const N1e=(t,e,n,r=ks)=>{switch(t.op){case"Max":{const a=L("axis",t,e,n),l=L("keepDims",t,e,n);return[r.max(L("x",t,e,n),a,l)]}case"Mean":{const a=L("axis",t,e,n),l=L("keepDims",t,e,n);return[r.mean(L("x",t,e,n),a,l)]}case"Min":{const a=L("axis",t,e,n),l=L("keepDims",t,e,n);return[r.min(L("x",t,e,n),a,l)]}case"Sum":{const a=L("axis",t,e,n),l=L("keepDims",t,e,n);return[r.sum(L("x",t,e,n),a,l)]}case"All":{const a=L("axis",t,e,n),l=L("keepDims",t,e,n);return[r.all(L("x",t,e,n),a,l)]}case"Any":{const a=L("axis",t,e,n),l=L("keepDims",t,e,n);return[r.any(L("x",t,e,n),a,l)]}case"ArgMax":{const a=L("axis",t,e,n);return[r.argMax(L("x",t,e,n),a)]}case"ArgMin":{const a=L("axis",t,e,n);return[r.argMin(L("x",t,e,n),a)]}case"Prod":{const a=L("axis",t,e,n),l=L("keepDims",t,e,n);return[r.prod(L("x",t,e,n),a,l)]}case"Cumprod":{const a=L("axis",t,e,n),l=L("exclusive",t,e,n),c=L("reverse",t,e,n);return[r.cumprod(L("x",t,e,n),a,l,c)]}case"Cumsum":{const a=L("axis",t,e,n),l=L("exclusive",t,e,n),c=L("reverse",t,e,n);return[r.cumsum(L("x",t,e,n),a,l,c)]}case"Bincount":const s=L("x",t,e,n),o=L("weights",t,e,n),i=L("size",t,e,n);return[r.bincount(s,o,i)];case"DenseBincount":{const a=L("x",t,e,n),l=L("weights",t,e,n),c=L("size",t,e,n),d=L("binaryOutput",t,e,n);return[r.denseBincount(a,l,c,d)]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const E1e=(t,e,n,r=ks)=>{switch(t.op){case"ConcatV2":case"Concat":{const s=L("n",t,e,n),o=L("axis",t,e,n);let i=L("tensors",t,e,n);return i=i.slice(0,s),[r.concat(i,o)]}case"Gather":{const s=L("x",t,e,n),o=L("indices",t,e,n);return[r.gather(s,r.cast(o,"int32"),0)]}case"GatherV2":{const s=L("axis",t,e,n),o=L("batchDims",t,e,n),i=L("x",t,e,n),a=L("indices",t,e,n);return[r.gather(i,r.cast(a,"int32"),s,o)]}case"Reverse":{const s=L("dims",t,e,n),o=[];for(let a=0;a<s.length;a++)s[a]&&o.push(a);const i=L("x",t,e,n);return[r.reverse(i,o)]}case"ReverseV2":{const s=L("axis",t,e,n),o=L("x",t,e,n);return[r.reverse(o,s)]}case"Slice":{const s=L("begin",t,e,n),o=L("size",t,e,n);return[r.slice(L("x",t,e,n),s,o)]}case"StridedSlice":{const s=L("begin",t,e,n),o=L("end",t,e,n),i=L("strides",t,e,n),a=L("beginMask",t,e,n),l=L("endMask",t,e,n),c=L("ellipsisMask",t,e,n),d=L("newAxisMask",t,e,n),f=L("shrinkAxisMask",t,e,n),p=L("x",t,e,n);return[r.stridedSlice(p,s,o,i,a,l,c,d,f)]}case"Pack":return we(()=>{const s=L("axis",t,e,n),o=L("tensors",t,e,n),i=o[0].shape,a=r.squeeze(o[0]).shape,l=o.map(c=>{const d=nn(c.shape,i);if(!d&&!nn(r.squeeze(c).shape,a))throw new Error("the input tensors shape does not match");return d?c:r.reshape(c,i)});return[r.stack(l,s)]});case"Unpack":{const s=L("axis",t,e,n),o=L("tensor",t,e,n);return r.unstack(o,s)}case"Tile":{const s=L("reps",t,e,n);return[r.tile(L("x",t,e,n),s)]}case"Split":case"SplitV":{const s=L("axis",t,e,n),o=L("numOrSizeSplits",t,e,n),i=L("x",t,e,n);return r.split(i,o,s)}case"ScatterNd":{const s=L("indices",t,e,n),o=L("values",t,e,n),i=L("shape",t,e,n);return[r.scatterND(s,o,i)]}case"GatherNd":{const s=L("x",t,e,n),o=L("indices",t,e,n);return[r.gatherND(s,o)]}case"SparseToDense":{const s=L("sparseIndices",t,e,n),o=L("outputShape",t,e,n),i=L("sparseValues",t,e,n),a=L("defaultValue",t,e,n);return[r.sparseToDense(s,i,o,i.dtype===a.dtype?a:r.cast(a,i.dtype))]}case"TensorScatterUpdate":{const s=L("indices",t,e,n),o=L("values",t,e,n),i=L("tensor",t,e,n);return[r.tensorScatterUpdate(i,s,o)]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const I1e=(t,e,n,r=ks)=>{switch(t.op){case"SparseFillEmptyRows":{const{outputIndices:s,outputValues:o,emptyRowIndicator:i,reverseIndexMap:a}=r.sparse.sparseFillEmptyRows(L("indices",t,e,n),L("values",t,e,n),L("denseShape",t,e,n),L("defaultValue",t,e,n));return[s,o,i,a]}case"SparseReshape":{const{outputIndices:s,outputShape:o}=r.sparse.sparseReshape(L("inputIndices",t,e,n),L("inputShape",t,e,n),L("newShape",t,e,n));return[s,o]}case"SparseSegmentMean":return[r.sparse.sparseSegmentMean(L("data",t,e,n),L("indices",t,e,n),L("segmentIds",t,e,n))];case"SparseSegmentSum":return[r.sparse.sparseSegmentSum(L("data",t,e,n),L("indices",t,e,n),L("segmentIds",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const k1e=(t,e,n,r=ks)=>{switch(t.op){case"FFT":return[r.fft(L("x",t,e,n))];case"IFFT":return[r.ifft(L("x",t,e,n))];case"RFFT":return[r.rfft(L("x",t,e,n))];case"IRFFT":return[r.irfft(L("x",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const T1e=(t,e,n,r=ks)=>{switch(t.op){case"StaticRegexReplace":return[r.string.staticRegexReplace(L("input",t,e,n),L("pattern",t,e,n),L("rewrite",t,e,n),L("replaceGlobal",t,e,n))];case"StringNGrams":{const{nGrams:s,nGramsSplits:o}=r.string.stringNGrams(L("data",t,e,n),L("dataSplits",t,e,n),L("separator",t,e,n),L("nGramWidths",t,e,n),L("leftPad",t,e,n),L("rightPad",t,e,n),L("padWidth",t,e,n),L("preserveShortSequences",t,e,n));return[s,o]}case"StringSplit":{const{indices:s,values:o,shape:i}=r.string.stringSplit(L("input",t,e,n),L("delimiter",t,e,n),L("skipEmpty",t,e,n));return[s,o,i]}case"StringToHashBucketFast":return[r.string.stringToHashBucketFast(L("input",t,e,n),L("numBuckets",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const A1e=(t,e,n,r=ks)=>{switch(t.op){case"Cast":return[r.cast(L("x",t,e,n),L("dtype",t,e,n))];case"ExpandDims":{const s=L("axis",t,e,n);return[r.expandDims(L("x",t,e,n),s)]}case"Squeeze":{const s=L("axis",t,e,n);return[r.squeeze(L("x",t,e,n),s)]}case"Reshape":return[r.reshape(L("x",t,e,n),L("shape",t,e,n))];case"EnsureShape":return[r.ensureShape(L("x",t,e,n),L("shape",t,e,n))];case"MirrorPad":return[r.mirrorPad(L("x",t,e,n),L("padding",t,e,n),L("mode",t,e,n))];case"PadV2":case"Pad":return[r.pad(L("x",t,e,n),L("padding",t,e,n),L("constantValue",t,e,n))];case"SpaceToBatchND":{const s=L("blockShape",t,e,n),o=L("paddings",t,e,n);return[r.spaceToBatchND(L("x",t,e,n),s,o)]}case"BatchToSpaceND":{const s=L("blockShape",t,e,n),o=L("crops",t,e,n);return[r.batchToSpaceND(L("x",t,e,n),s,o)]}case"DepthToSpace":{const s=L("blockSize",t,e,n),o=L("dataFormat",t,e,n).toUpperCase();return[r.depthToSpace(L("x",t,e,n),s,o)]}case"BroadcastTo":return[r.broadcastTo(L("x",t,e,n),L("shape",t,e,n))];case"BroadcastArgs":return[r.broadcastArgs(L("s0",t,e,n),L("s1",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function A_(t,e,n,r,s=we){const o=((i,a,l)=>{switch(i.category){case"arithmetic":return s(()=>s1e(i,a,l));case"basic_math":return s(()=>o1e(i,a,l));case"control":return d1e(i,a,l);case"convolution":return s(()=>f1e(i,a,l));case"creation":return s(()=>h1e(i,a,l));case"dynamic":return p1e(i,a,l);case"evaluation":return s(()=>m1e(i,a,l));case"image":return s(()=>b1e(i,a,l));case"graph":return s(()=>g1e(i,a,l));case"logical":return s(()=>w1e(i,a,l));case"matrices":return s(()=>v1e(i,a,l));case"normalization":return s(()=>C1e(i,a,l));case"ragged":return s(()=>S1e(i,a,l));case"reduction":return s(()=>N1e(i,a,l));case"slice_join":return s(()=>E1e(i,a,l));case"sparse":return s(()=>I1e(i,a,l));case"spectral":return s(()=>k1e(i,a,l));case"string":return s(()=>T1e(i,a,l));case"transformation":return s(()=>A1e(i,a,l));case"hash_table":return y1e(i,a,l,r);case"custom":const c=fV(i.op);if(c&&c.customExecutor)return c.customExecutor(new r1e(i,a,l));throw TypeError(`Custom op ${i.op} is not registered.`);default:throw TypeError(`Unknown op '${i.op}'. File an issue at https://github.com/tensorflow/tfjs/issues so we can add it, or register a custom execution with tf.registerOp()`)}})(t,e,n);return Bd(o)?o.then(i=>[].concat(i)):[].concat(o)}class R_{constructor(e={},n={},r={},s={},o){this.weightMap=e,this.tensorArrayMap=n,this.tensorListMap=r,this.functionMap=s,this.parseNodeNameCache=o,this.rootContext={id:0,frameName:"",iterationId:0},this.contexts=[this.rootContext],this.lastId=0,this.generateCurrentContextIds()}newFrame(e,n){return{id:e,frameName:n,iterationId:0}}set currentContext(e){this.contexts!==e&&(this.contexts=e,this.generateCurrentContextIds())}get currentContext(){return this.contexts}get currentContextId(){return this._currentContextIds[0]}get currentContextIds(){return this._currentContextIds}generateCurrentContextIds(){const e=[];for(let n=0;n<this.contexts.length-1;n++){const r=this.contexts.slice(0,this.contexts.length-n);e.push(this.contextIdforContexts(r))}e.push(""),this._currentContextIds=e}contextIdforContexts(e){return e?e.map(n=>n.id===0&&n.iterationId===0?"":`${n.frameName}-${n.iterationId}`).join("/"):""}enterFrame(e){this.contexts&&(this.lastId++,this.contexts=this.contexts.slice(),this.contexts.push(this.newFrame(this.lastId,e)),this._currentContextIds.unshift(this.contextIdforContexts(this.contexts)))}exitFrame(){if(this.contexts&&this.contexts.length>1)this.contexts=this.contexts.slice(),this.contexts.splice(-1),this.currentContextIds.shift();else throw new Error("Cannot exit frame, the context is empty")}nextIteration(){if(this.contexts&&this.contexts.length>0){this.contexts=this.contexts.slice(),this.lastId++;const e=Object.assign({},this.contexts[this.contexts.length-1]);e.iterationId+=1,e.id=this.lastId,this.contexts.splice(-1,1,e),this._currentContextIds.splice(0,1,this.contextIdforContexts(this.contexts))}else throw new Error("Cannot increase frame iteration, the context is empty")}getWeight(e){return this.weightMap[e]}addTensorArray(e){this.tensorArrayMap[e.id]=e}getTensorArray(e){return this.tensorArrayMap[e]}addTensorList(e){this.tensorListMap[e.id]=e}getTensorList(e){return this.tensorListMap[e]}dispose(e){for(const n in this.tensorArrayMap)this.tensorArrayMap[n].clearAndClose(e);for(const n in this.tensorListMap)this.tensorListMap[n].clearAndClose(e)}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function D_(t,e,n,r){const s=new Set,o=[];let i=null,a=null;const l=new Set,c=new Set(Object.keys(t).map(p=>$o(p)[0]));r=r||[];const d=new Set(r.map(p=>$o(p.name)[0])),f=[...e];for(;f.length>0;){const p=f.pop();if((dd(p)||M1e(p)||L1e(p))&&i==null&&(i=p,a=i.children.map(g=>g.name).filter(g=>s.has(g))),s.add(p.name),n[p.name]==null&&!c.has(p.name)&&!d.has(p.name)){if(p.inputs.length===0){o.push(p.name);continue}p.inputs.forEach(g=>{l.has(g.name)||(l.add(g.name),f.push(g))})}}return{inputs:t,outputs:e,usedNodes:s,missingInputs:o,dynamicNode:i,syncInputs:a}}function R1e(t,e){const{usedNodes:n,inputs:r}=e,s=Object.keys(r).map(w=>$o(w)[0]).map(w=>t.nodes[w]),o=t.initNodes||[],i=w=>n.has(typeof w=="string"?w:w.name);function a(w){return[...new Map(w.map(C=>[C.name,C])).values()]}const l=a([...s,...t.weights,...o]).filter(i),c=a([...l,...Object.values(t.nodes)]).filter(i),d=new Map(c.map(w=>[w.name,w])),f={};for(const w of c){f[w.name]=f[w.name]||0;for(const C of w.children)i(C)||(f[C.name]=Number.POSITIVE_INFINITY),f[C.name]=(f[C.name]||0)+1}const p=Object.entries(f).filter(([,w])=>w===0).map(([w])=>w),g=[...p];for(;p.length>0;){const w=p.pop(),C=d.get(w);for(const N of C.children.filter(i))--f[N.name]===0&&(g.push(N.name),p.push(N.name))}const x=g.map(w=>d.get(w)),b=D1e(x,l);return $1e(b,l),b}function D1e(t,e){const n=new Map(t.map(i=>[i.name,i])),r=e.map(i=>i.name),s=new Set(r);for(;r.length>0;){const i=r.pop(),a=n.get(i);for(const l of a.children)!n.has(l.name)||s.has(l.name)||(s.add(l.name),r.push(l.name))}return t.filter(i=>s.has(i.name))}class Kx extends Error{constructor(e){super(`NodesExecutionOrderError: ${e}`)}}function $1e(t,e){const n=new Map(t.map((a,l)=>[a.name,l])),r=new Set(e.map(a=>a.name)),s=a=>r.has(typeof a=="string"?a:a.name),o=new Set(t.map(a=>a.name)),i=a=>o.has(typeof a=="string"?a:a.name);for(const a of t){for(const l of a.children.filter(i)){if(!n.has(l.name))throw new Kx(`Child ${l.name} of node ${a.name} is unreachable.`);if(n.get(a.name)>n.get(l.name))throw new Kx(`Node ${a.name} is scheduled to run after its child ${l.name}.`)}if(!s(a))for(const l of a.inputs){if(!n.has(l.name))throw new Kx(`Input ${l.name} of node ${a.name} is unreachable.`);if(n.get(l.name)>n.get(a.name))throw new Kx(`Node ${a.name} is scheduled to run before its input ${l.name}.`)}}}function O1e(t){const e=new Map(t.map((a,l)=>[a.name,l])),n=Number.MAX_SAFE_INTEGER,r=t.map((a,l)=>dd(a)?n:l),s=a=>{const l=r[e.get(a.name)];return l??-1},o=t.map((a,l)=>a.children.map(s).reduce((c,d)=>Math.max(c,d),r[l])),i=new Map;for(let a=0;a<t.length;++a){const l=o[a];if(l===n)continue;const c=t[a],d=t[l];i.has(d.name)||i.set(d.name,[]),i.get(d.name).push(c)}return i}const _1e=new Set(["Switch","Merge","Enter","Exit","NextIteration","StatelessIf","StatelessWhile","if","While"]),P1e=new Set(["NonMaxSuppressionV2","NonMaxSuppressionV3","NonMaxSuppressionV5","Where"]),F1e=new Set(["HashTable","HashTableV2","LookupTableImport","LookupTableImportV2","LookupTableFind","LookupTableFindV2","LookupTableSize","LookupTableSizeV2"]);function dd(t){return _1e.has(t.op)}function M1e(t){return P1e.has(t.op)}function L1e(t){return F1e.has(t.op)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Kb{get weightIds(){return this.parent?this.parent.weightIds:this._weightIds}get functionExecutorMap(){return this.parent?this.parent.functionExecutorMap:this._functionExecutorMap}get weightMap(){return this.parent?this.parent.weightMap:this._weightMap}set weightMap(e){const n=Object.keys(e).map(r=>e[r].map(s=>s.id));this._weightIds=[].concat(...n),this._weightMap=e}set resourceManager(e){this._resourceManager=e}get inputs(){return this._inputs.map(e=>({name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0}))}get outputs(){return this._outputs.map(e=>({name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0}))}get inputNodes(){return this._inputs.map(e=>e.signatureKey||e.name)}get outputNodes(){return this._outputs.map(e=>{const n=e.signatureKey||e.name;return e.defaultOutput?`${n}:${e.defaultOutput}`:n})}get functions(){return Object.keys(this._functions).reduce((e,n)=>(e[n]=this._functions[n].signature,e),{})}constructor(e,n){this.graph=e,this.parent=n,this.compiledMap=new Map,this.parseNodeNameCache=new Map,this._weightMap={},this.SEPARATOR=",",this._functions={},this._functionExecutorMap={},this.keepIntermediateTensors=!1,this._outputs=e.outputs,this._inputs=e.inputs,this._initNodes=e.initNodes,this._signature=e.signature,this._functions=e.functions,e.functions!=null&&Object.keys(e.functions).forEach(r=>{this._functionExecutorMap[r]=new Kb(e.functions[r],this)})}getCompilationKey(e,n){const r=e.map(o=>o.name).sort(),s=n.map(o=>o.name).sort();return r.join(this.SEPARATOR)+"--"+s.join(this.SEPARATOR)}compile(e,n){const r=D_(e,n,this.weightMap,this._initNodes),{missingInputs:s,dynamicNode:o,syncInputs:i}=r;if(o!=null)throw new Error(`This execution contains the node '${o.name}', which has the dynamic op '${o.op}'. Please use model.executeAsync() instead. Alternatively, to avoid the dynamic ops, specify the inputs [${i}]`);if(s.length>0){const c=n.map(f=>f.name),d=Object.keys(e);throw new Error(`Cannot compute the outputs [${c}] from the provided inputs [${d}]. Missing the following inputs: [${s}]`)}const a=R1e(this.graph,r),l=O1e(a);return{orderedNodes:a,nodeLiveUntilMap:l}}cloneAndKeepTensor(e){if(e==null)return null;const n=e.clone();return ls(n),n}cloneTensorList(e){return e?e.map(r=>this.cloneAndKeepTensor(r)):null}cloneTensorMap(e){return Object.fromEntries(Object.entries(e).map(([n,r])=>[n,this.cloneTensorList(r)]))}execute(e,n){this.disposeIntermediateTensors(),e=this.mapInputs(e);const r=Object.keys(e).sort();this.checkInputs(e),this.checkInputShapeAndType(e),n=this.mapOutputs(n),this.checkOutputs(n);const s=r.map(p=>this.graph.nodes[$o(p)[0]]),o=n.map(p=>$o(p)[0]),i=new Set(o);let a=o.map(p=>this.graph.nodes[p]);a.length===0&&(a=this._outputs);const l=this.getCompilationKey(s,a);let c=this.compiledMap.get(l);c==null&&(c=this.compile(e,a),this.compiledMap.set(l,c));try{this.keepIntermediateTensors=Ee().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(p){this.keepIntermediateTensors=!1,console.warn(p.message)}const d={},f={};return we(()=>{const p=new R_(this.weightMap,d,f,this.functionExecutorMap,this.parseNodeNameCache),g=Object.assign({},this.weightMap);this.keepIntermediateTensors&&(this.clonedTensorsMap=this.cloneTensorMap(this.weightMap)),Object.keys(e).forEach(C=>{const[N,k]=$o(C,p),I=[];I[k]=e[C],g[N]=I,this.keepIntermediateTensors&&(this.clonedTensorsMap[N]=this.cloneTensorList(I))});const x=this.getFrozenTensorIds(g),{orderedNodes:b,nodeLiveUntilMap:w}=c;for(const C of b){if(g[C.name])continue;const N=A_(C,g,p,this._resourceManager);if(Bd(N))throw new Error(`The execution of the op '${C.op}' returned a promise. Please use model.executeAsync() instead.`);g[C.name]=N,this.keepIntermediateTensors&&(this.clonedTensorsMap[C.name]=this.cloneTensorList(N)),this.checkTensorForDisposalWithNodeLiveUntilInfo(C,g,p,x,i,w.get(C.name))}return this.parent==null&&p.dispose(x),n.map(C=>bs(C,g,p))})}getFrozenTensorIds(e){const n=[].concat.apply([],Object.keys(e).map(r=>e[r]).map(r=>r.map(s=>s.id)));return new Set(n)}checkTensorForDisposal(e,n,r,s,o,i,a){if(!(dd(n)||i.has(e))){for(const l of r[e])l!=null&&(a[l.id]=(a[l.id]||0)+n.children.length);for(const l of n.inputs){if(dd(l))continue;const c=N_(l.name,r,s);if(c!=null)for(const d of c){if(!d||d.kept||o.has(d.id))continue;const f=a[d.id];f===1?(d.dispose(),delete a[d.id]):f!=null&&a[d.id]--}}}}checkTensorForDisposalWithNodeLiveUntilInfo(e,n,r,s,o,i){function a(l){return dd(l)||o.has(l.name)}if(!(dd(e)||i==null))for(const l of i){if(a(l))continue;const c=N_(l.name,n,r);for(const d of c)!d||d.kept||s.has(d.id)||d.dispose()}}async executeAsync(e,n){return this._executeAsync(e,n)}disposeIntermediateTensors(){this.clonedTensorsMap&&(Object.values(this.clonedTensorsMap).forEach(e=>{for(const n of e)n&&!n.isDisposed&&n.dispose()}),this.clonedTensorsMap=null)}getIntermediateTensors(){return this.clonedTensorsMap}async _executeAsync(e,n,r=!1,s={},o={}){this.disposeIntermediateTensors(),r||(e=this.mapInputs(e),this.checkInputs(e),this.checkInputShapeAndType(e),n=this.mapOutputs(n),this.checkOutputs(n));try{this.keepIntermediateTensors=Ee().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(p){this.keepIntermediateTensors=!1,console.warn(p.message)}const i=new R_(this.weightMap,s,o,this.functionExecutorMap,this.parseNodeNameCache);this.keepIntermediateTensors&&(this.clonedTensorsMap=this.cloneTensorMap(this.weightMap));const a=await this.executeWithControlFlow(e,i,n,r),l=n.map(p=>bs(p,a,i)),c=l.map(p=>p.id),d=Object.keys(e).map(p=>e[p].id),f=new Set([...c,...d,...this.weightIds]);return Object.values(a).forEach(p=>{p.forEach(g=>{g&&!g.isDisposed&&!f.has(g.id)&&g.dispose()})}),this.parent==null&&i.dispose(f),l}async executeFunctionAsync(e,n,r){const s=e.reduce((o,i,a)=>(o[this.inputs[a].name]=i,o),{});return this._executeAsync(s,this.outputNodes,!0,n,r)}async executeWithControlFlow(e,n,r,s){const o=Object.keys(e),i=o.map(I=>this.graph.nodes[$o(I)[0]]),a=r.map(I=>$o(I)[0]),l=new Set(a);let c=a.map(I=>this.graph.nodes[I]);c.length===0&&(c=this._outputs);const{usedNodes:d,missingInputs:f,dynamicNode:p,syncInputs:g}=D_(e,c,this.weightMap,this._initNodes),x=[...i,...this.graph.weights,...this._initNodes||[]].map(I=>({node:I,contexts:n.currentContext})),b=Object.assign({},this.weightMap);Object.keys(e).forEach(I=>{const[R,$]=$o(I),O=[];O[$]=e[I],b[R]=O});const w={},C=this.getFrozenTensorIds(b),N={};for(;x.length>0;){const I=this.processStack(i,x,n,b,N,C,l,w,d);await Promise.all(I)}p==null&&!s&&console.warn("This model execution did not contain any nodes with control flow or dynamic output shapes. You can use model.execute() instead.");const k=c.filter(I=>!dd(I)&&!bs(I.name,b,n)).map(I=>I.name);if(k.length>0){let I="";throw p!=null&&(I=`Alternatively, to avoid the dynamic ops, use model.execute() and specify the inputs [${g}]`),new Error(`Cannot compute the outputs [${k}] from the provided inputs [${o}]. Consider providing the following inputs: [${f}]. ${I}`)}return b}processStack(e,n,r,s,o,i,a,l,c){const d=[];for(;n.length>0;){const f=n.pop();r.currentContext=f.contexts;let p="";if(f.node.op==="Enter"&&L("isConstant",f.node,s,r)&&([p]=zl(f.node.name,r)),s[f.node.name]==null){const g=A_(f.node,s,r,this._resourceManager);p||([p]=zl(f.node.name,r));const x=r.currentContext;Bd(g)?d.push(g.then(b=>(s[p]=b,this.keepIntermediateTensors&&(this.clonedTensorsMap[p]=this.cloneTensorList(b)),r.currentContext=x,this.checkTensorForDisposal(p,f.node,s,r,i,a,l),this.processChildNodes(f.node,n,r,s,o,c),b))):(s[p]=g,this.keepIntermediateTensors&&(this.clonedTensorsMap[p]=this.cloneTensorList(g)),this.checkTensorForDisposal(p,f.node,s,r,i,a,l),this.processChildNodes(f.node,n,r,s,o,c))}else this.processChildNodes(f.node,n,r,s,o,c)}return d}processChildNodes(e,n,r,s,o,i){e.children.forEach(a=>{const[l]=zl(a.name,r);o[l]||!i.has(a.name)||(a.op==="Merge"?a.inputNames.some(c=>!!bs(c,s,r))&&(o[l]=!0,n.push({contexts:r.currentContext,node:a})):a.inputNames.every(c=>!!bs(c,s,r))&&(o[l]=!0,n.push({contexts:r.currentContext,node:a})))})}dispose(){Object.keys(this.weightMap).forEach(e=>this.weightMap[e].forEach(n=>n.dispose()))}checkInputShapeAndType(e){Object.keys(e).forEach(n=>{const r=e[n],[s]=$o(n),o=this.graph.nodes[s];if(o.attrParams.shape&&o.attrParams.shape.value){const i=o.attrParams.shape.value,a=i.length===r.shape.length&&r.shape.every((l,c)=>i[c]===-1||i[c]===l);Y(a,()=>`The shape of dict['${o.name}'] provided in model.execute(dict) must be [${i}], but was [${r.shape}]`)}o.attrParams.dtype&&o.attrParams.dtype.value&&Y(r.dtype===o.attrParams.dtype.value,()=>`The dtype of dict['${o.name}'] provided in model.execute(dict) must be ${o.attrParams.dtype.value}, but was ${r.dtype}`)})}mapInputs(e){var n,r;const s={};for(const o in e){const i=(r=(n=this._signature)===null||n===void 0?void 0:n.inputs)===null||r===void 0?void 0:r[o];i!=null?s[i.name]=e[o]:s[o]=e[o]}return s}checkInputs(e){const n=Object.keys(e).filter(r=>{const[s]=$o(r);return this.graph.nodes[s]==null});if(n.length>0)throw new Error(`The dict provided in model.execute(dict) has keys: [${n}] that are not part of graph`)}mapOutputs(e){return e.map(n=>{var r,s;const o=(s=(r=this._signature)===null||r===void 0?void 0:r.outputs)===null||s===void 0?void 0:s[n];return o!=null?o.name:n},{})}checkOutputs(e){e.forEach(n=>{const[r]=$o(n);if(!this.graph.nodes[r])throw new Error(`The output '${n}' is not found in the graph`)})}}class B1e{constructor(e={},n={}){this.hashTableNameToHandle=e,this.hashTableMap=n}addHashTable(e,n){this.hashTableNameToHandle[e]=n.handle,this.hashTableMap[n.id]=n}getHashTableHandleByName(e){return this.hashTableNameToHandle[e]}getHashTableById(e){return this.hashTableMap[e]}dispose(){for(const e in this.hashTableMap)this.hashTableMap[e].clearAndClose(),delete this.hashTableMap[e];for(const e in this.hashTableNameToHandle)this.hashTableNameToHandle[e].dispose(),delete this.hashTableNameToHandle[e]}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const j1e="?tfjs-format=file",z1e="model.json";class V1e{get modelVersion(){return this.version}get inputNodes(){return this.executor.inputNodes}get outputNodes(){return this.executor.outputNodes}get inputs(){return this.executor.inputs}get outputs(){return this.executor.outputs}get weights(){return this.executor.weightMap}get metadata(){return this.artifacts.userDefinedMetadata}get modelSignature(){return this.signature}get modelStructuredOutputKeys(){return this.structuredOutputKeys}constructor(e,n={},r=mj){this.modelUrl=e,this.loadOptions=n,this.version="n/a",this.io=r,n==null&&(this.loadOptions={}),this.resourceManager=new B1e}findIOHandler(){const e=this.modelUrl;if(e.load!=null)this.handler=e;else if(this.loadOptions.requestInit!=null)this.handler=this.io.browserHTTPRequest(e,this.loadOptions);else{const n=this.io.getLoadHandlers(e,this.loadOptions);if(n.length===0)n.push(this.io.browserHTTPRequest(e,this.loadOptions));else if(n.length>1)throw new Error(`Found more than one (${n.length}) load handlers for URL '${[e]}'`);this.handler=n[0]}}load(){if(this.findIOHandler(),this.handler.load==null)throw new Error("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");const e=this.handler.load();return Bd(e)?e.then(n=>n.getWeightStream==null?this.loadSync(n):this.loadStreaming(n)):this.loadSync(e)}loadSync(e){const n=this.io.decodeWeights(e.weightData,e.weightSpecs);return this.loadWithWeightMap(e,n)}async loadStreaming(e){if(e.getWeightStream==null)throw new Error("Model artifacts missing streamWeights function");const n=await BB(e.getWeightStream(),e.weightSpecs);return this.loadWithWeightMap(e,n)}loadWithWeightMap(e,n){this.artifacts=e;const r=this.artifacts.modelTopology;let s=this.artifacts.signature;if(this.artifacts.userDefinedMetadata!=null){const o=this.artifacts.userDefinedMetadata;o.signature!=null&&(s=o.signature),o.structuredOutputKeys!=null&&(this.structuredOutputKeys=o.structuredOutputKeys)}if(this.signature=s,this.version=`${r.versions.producer}.${r.versions.minConsumer}`,this.executor=new Kb(E_.Instance.transformGraph(r,this.signature)),this.executor.weightMap=this.convertTensorMapToTensorsMap(n),this.executor.resourceManager=this.resourceManager,e.modelInitializer!=null&&e.modelInitializer.node!=null){const o=E_.Instance.transformGraph(e.modelInitializer);this.initializer=new Kb(o),this.initializer.weightMap=this.executor.weightMap,this.initializer.resourceManager=this.resourceManager,this.initializerSignature=e.initializerSignature}return!0}async save(e,n){if(typeof e=="string"){const r=this.io.getSaveHandlers(e);if(r.length===0)throw new Error(`Cannot find any save handlers for URL '${e}'`);if(r.length>1)throw new Error(`Found more than one (${r.length}) save handlers for URL '${e}'`);e=r[0]}if(e.save==null)throw new Error("GraphModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");return e.save(this.artifacts)}addStructuredOutputNames(e){if(this.structuredOutputKeys){const n=e instanceof Tn?[e]:e,r={};return n.forEach((s,o)=>r[this.structuredOutputKeys[o]]=s),r}return e}predict(e,n){const r=this.execute(e,this.outputNodes);return this.addStructuredOutputNames(r)}async predictAsync(e,n){const r=await this.executeAsync(e,this.outputNodes);return this.addStructuredOutputNames(r)}normalizeInputs(e){var n;if(!(e instanceof Tn)&&!Array.isArray(e)){const o=(n=this.signature)===null||n===void 0?void 0:n.inputs;if(o!=null)for(const i in o){const a=o[i];a.resourceId!=null&&(e[i]=this.resourceIdToCapturedInput[a.resourceId])}return e}e=Array.isArray(e)?e:[e];const r=Object.keys(this.resourceIdToCapturedInput).length;if(e.length+r!==this.inputNodes.length)throw new Error(`Input tensor count mismatch, the graph model has ${this.inputNodes.length-r} non-resource placeholders, while there are ${e.length} input tensors provided.`);let s=0;return this.inputNodes.reduce((o,i)=>{var a,l,c;const d=(c=(l=(a=this.signature)===null||a===void 0?void 0:a.inputs)===null||l===void 0?void 0:l[i])===null||c===void 0?void 0:c.resourceId;return d!=null?o[i]=this.resourceIdToCapturedInput[d]:o[i]=e[s++],o},{})}normalizeOutputs(e){return e=e||this.outputNodes,Array.isArray(e)?e:[e]}executeInitializerGraph(){return this.initializer==null?[]:this.initializerSignature==null?this.initializer.execute({},[]):this.initializer.execute({},Object.keys(this.initializerSignature.outputs))}async executeInitializerGraphAsync(){return this.initializer==null?[]:this.initializerSignature==null?this.initializer.executeAsync({},[]):this.initializer.executeAsync({},Object.keys(this.initializerSignature.outputs))}setResourceIdToCapturedInput(e){if(this.resourceIdToCapturedInput={},this.initializerSignature){const n=this.initializerSignature.outputs,r=Object.keys(n);for(let s=0;s<r.length;s++){const o=r[s],i=n[o];this.resourceIdToCapturedInput[i.resourceId]=e[s]}}}execute(e,n){this.resourceIdToCapturedInput==null&&this.setResourceIdToCapturedInput(this.executeInitializerGraph()),e=this.normalizeInputs(e),n=this.normalizeOutputs(n);const r=this.executor.execute(e,n);return r.length>1?r:r[0]}async executeAsync(e,n){this.resourceIdToCapturedInput==null&&this.setResourceIdToCapturedInput(await this.executeInitializerGraphAsync()),e=this.normalizeInputs(e),n=this.normalizeOutputs(n);const r=await this.executor.executeAsync(e,n);return r.length>1?r:r[0]}getIntermediateTensors(){return this.executor.getIntermediateTensors()}disposeIntermediateTensors(){this.executor.disposeIntermediateTensors()}convertTensorMapToTensorsMap(e){return Object.keys(e).reduce((n,r)=>(n[r]=[e[r]],n),{})}dispose(){this.executor.dispose(),this.initializer&&(this.initializer.dispose(),this.resourceIdToCapturedInput&&Yt(this.resourceIdToCapturedInput)),this.resourceManager.dispose()}}async function $_(t,e={},n=mj){if(t==null)throw new Error("modelUrl in loadGraphModel() cannot be null. Please provide a url or an IOHandler that loads the model");e==null&&(e={}),e.fromTFHub&&typeof t=="string"&&(t=W1e(t));const r=new V1e(t,e,n);return await r.load(),r}function W1e(t){return t.endsWith("/")||(t=t+"/"),`${t}${z1e}${j1e}`}var PR={exports:{}};PR.exports;(function(t){(function(e,n,r){function s(l){var c=this,d=a();c.next=function(){var f=2091639*c.s0+c.c*23283064365386963e-26;return c.s0=c.s1,c.s1=c.s2,c.s2=f-(c.c=f|0)},c.c=1,c.s0=d(" "),c.s1=d(" "),c.s2=d(" "),c.s0-=d(l),c.s0<0&&(c.s0+=1),c.s1-=d(l),c.s1<0&&(c.s1+=1),c.s2-=d(l),c.s2<0&&(c.s2+=1),d=null}function o(l,c){return c.c=l.c,c.s0=l.s0,c.s1=l.s1,c.s2=l.s2,c}function i(l,c){var d=new s(l),f=c&&c.state,p=d.next;return p.int32=function(){return d.next()*4294967296|0},p.double=function(){return p()+(p()*2097152|0)*11102230246251565e-32},p.quick=p,f&&(typeof f=="object"&&o(f,d),p.state=function(){return o(d,{})}),p}function a(){var l=4022871197,c=function(d){d=String(d);for(var f=0;f<d.length;f++){l+=d.charCodeAt(f);var p=.02519603282416938*l;l=p>>>0,p-=l,p*=l,l=p>>>0,p-=l,l+=p*4294967296}return(l>>>0)*23283064365386963e-26};return c}n&&n.exports?n.exports=i:this.alea=i})(Gn,t)})(PR);var U1e=PR.exports,FR={exports:{}};FR.exports;(function(t){(function(e,n,r){function s(a){var l=this,c="";l.x=0,l.y=0,l.z=0,l.w=0,l.next=function(){var f=l.x^l.x<<11;return l.x=l.y,l.y=l.z,l.z=l.w,l.w^=l.w>>>19^f^f>>>8},a===(a|0)?l.x=a:c+=a;for(var d=0;d<c.length+64;d++)l.x^=c.charCodeAt(d)|0,l.next()}function o(a,l){return l.x=a.x,l.y=a.y,l.z=a.z,l.w=a.w,l}function i(a,l){var c=new s(a),d=l&&l.state,f=function(){return(c.next()>>>0)/4294967296};return f.double=function(){do var p=c.next()>>>11,g=(c.next()>>>0)/4294967296,x=(p+g)/(1<<21);while(x===0);return x},f.int32=c.next,f.quick=f,d&&(typeof d=="object"&&o(d,c),f.state=function(){return o(c,{})}),f}n&&n.exports?n.exports=i:this.xor128=i})(Gn,t)})(FR);var H1e=FR.exports,MR={exports:{}};MR.exports;(function(t){(function(e,n,r){function s(a){var l=this,c="";l.next=function(){var f=l.x^l.x>>>2;return l.x=l.y,l.y=l.z,l.z=l.w,l.w=l.v,(l.d=l.d+362437|0)+(l.v=l.v^l.v<<4^(f^f<<1))|0},l.x=0,l.y=0,l.z=0,l.w=0,l.v=0,a===(a|0)?l.x=a:c+=a;for(var d=0;d<c.length+64;d++)l.x^=c.charCodeAt(d)|0,d==c.length&&(l.d=l.x<<10^l.x>>>4),l.next()}function o(a,l){return l.x=a.x,l.y=a.y,l.z=a.z,l.w=a.w,l.v=a.v,l.d=a.d,l}function i(a,l){var c=new s(a),d=l&&l.state,f=function(){return(c.next()>>>0)/4294967296};return f.double=function(){do var p=c.next()>>>11,g=(c.next()>>>0)/4294967296,x=(p+g)/(1<<21);while(x===0);return x},f.int32=c.next,f.quick=f,d&&(typeof d=="object"&&o(d,c),f.state=function(){return o(c,{})}),f}n&&n.exports?n.exports=i:this.xorwow=i})(Gn,t)})(MR);var G1e=MR.exports,LR={exports:{}};LR.exports;(function(t){(function(e,n,r){function s(a){var l=this;l.next=function(){var d=l.x,f=l.i,p,g;return p=d[f],p^=p>>>7,g=p^p<<24,p=d[f+1&7],g^=p^p>>>10,p=d[f+3&7],g^=p^p>>>3,p=d[f+4&7],g^=p^p<<7,p=d[f+7&7],p=p^p<<13,g^=p^p<<9,d[f]=g,l.i=f+1&7,g};function c(d,f){var p,g=[];if(f===(f|0))g[0]=f;else for(f=""+f,p=0;p<f.length;++p)g[p&7]=g[p&7]<<15^f.charCodeAt(p)+g[p+1&7]<<13;for(;g.length<8;)g.push(0);for(p=0;p<8&&g[p]===0;++p);for(p==8?g[7]=-1:g[p],d.x=g,d.i=0,p=256;p>0;--p)d.next()}c(l,a)}function o(a,l){return l.x=a.x.slice(),l.i=a.i,l}function i(a,l){a==null&&(a=+new Date);var c=new s(a),d=l&&l.state,f=function(){return(c.next()>>>0)/4294967296};return f.double=function(){do var p=c.next()>>>11,g=(c.next()>>>0)/4294967296,x=(p+g)/(1<<21);while(x===0);return x},f.int32=c.next,f.quick=f,d&&(d.x&&o(d,c),f.state=function(){return o(c,{})}),f}n&&n.exports?n.exports=i:this.xorshift7=i})(Gn,t)})(LR);var q1e=LR.exports,BR={exports:{}};BR.exports;(function(t){(function(e,n,r){function s(a){var l=this;l.next=function(){var d=l.w,f=l.X,p=l.i,g,x;return l.w=d=d+1640531527|0,x=f[p+34&127],g=f[p=p+1&127],x^=x<<13,g^=g<<17,x^=x>>>15,g^=g>>>12,x=f[p]=x^g,l.i=p,x+(d^d>>>16)|0};function c(d,f){var p,g,x,b,w,C=[],N=128;for(f===(f|0)?(g=f,f=null):(f=f+"\0",g=0,N=Math.max(N,f.length)),x=0,b=-32;b<N;++b)f&&(g^=f.charCodeAt((b+32)%f.length)),b===0&&(w=g),g^=g<<10,g^=g>>>15,g^=g<<4,g^=g>>>13,b>=0&&(w=w+1640531527|0,p=C[b&127]^=g+w,x=p==0?x+1:0);for(x>=128&&(C[(f&&f.length||0)&127]=-1),x=127,b=4*128;b>0;--b)g=C[x+34&127],p=C[x=x+1&127],g^=g<<13,p^=p<<17,g^=g>>>15,p^=p>>>12,C[x]=g^p;d.w=w,d.X=C,d.i=x}c(l,a)}function o(a,l){return l.i=a.i,l.w=a.w,l.X=a.X.slice(),l}function i(a,l){a==null&&(a=+new Date);var c=new s(a),d=l&&l.state,f=function(){return(c.next()>>>0)/4294967296};return f.double=function(){do var p=c.next()>>>11,g=(c.next()>>>0)/4294967296,x=(p+g)/(1<<21);while(x===0);return x},f.int32=c.next,f.quick=f,d&&(d.X&&o(d,c),f.state=function(){return o(c,{})}),f}n&&n.exports?n.exports=i:this.xor4096=i})(Gn,t)})(BR);var X1e=BR.exports,jR={exports:{}};jR.exports;(function(t){(function(e,n,r){function s(a){var l=this,c="";l.next=function(){var f=l.b,p=l.c,g=l.d,x=l.a;return f=f<<25^f>>>7^p,p=p-g|0,g=g<<24^g>>>8^x,x=x-f|0,l.b=f=f<<20^f>>>12^p,l.c=p=p-g|0,l.d=g<<16^p>>>16^x,l.a=x-f|0},l.a=0,l.b=0,l.c=-1640531527,l.d=1367130551,a===Math.floor(a)?(l.a=a/4294967296|0,l.b=a|0):c+=a;for(var d=0;d<c.length+20;d++)l.b^=c.charCodeAt(d)|0,l.next()}function o(a,l){return l.a=a.a,l.b=a.b,l.c=a.c,l.d=a.d,l}function i(a,l){var c=new s(a),d=l&&l.state,f=function(){return(c.next()>>>0)/4294967296};return f.double=function(){do var p=c.next()>>>11,g=(c.next()>>>0)/4294967296,x=(p+g)/(1<<21);while(x===0);return x},f.int32=c.next,f.quick=f,d&&(typeof d=="object"&&o(d,c),f.state=function(){return o(c,{})}),f}n&&n.exports?n.exports=i:this.tychei=i})(Gn,t)})(jR);var K1e=jR.exports,mV={exports:{}};(function(t){(function(e,n,r){var s=256,o=6,i=52,a="random",l=r.pow(s,o),c=r.pow(2,i),d=c*2,f=s-1,p;function g(I,R,$){var O=[];R=R==!0?{entropy:!0}:R||{};var F=C(w(R.entropy?[I,k(n)]:I??N(),3),O),M=new x(O),_=function(){for(var V=M.g(o),B=l,W=0;V<c;)V=(V+W)*s,B*=s,W=M.g(1);for(;V>=d;)V/=2,B/=2,W>>>=1;return(V+W)/B};return _.int32=function(){return M.g(4)|0},_.quick=function(){return M.g(4)/4294967296},_.double=_,C(k(M.S),n),(R.pass||$||function(V,B,W,q){return q&&(q.S&&b(q,M),V.state=function(){return b(M,{})}),W?(r[a]=V,B):V})(_,F,"global"in R?R.global:this==r,R.state)}function x(I){var R,$=I.length,O=this,F=0,M=O.i=O.j=0,_=O.S=[];for($||(I=[$++]);F<s;)_[F]=F++;for(F=0;F<s;F++)_[F]=_[M=f&M+I[F%$]+(R=_[F])],_[M]=R;(O.g=function(V){for(var B,W=0,q=O.i,j=O.j,G=O.S;V--;)B=G[q=f&q+1],W=W*s+G[f&(G[q]=G[j=f&j+B])+(G[j]=B)];return O.i=q,O.j=j,W})(s)}function b(I,R){return R.i=I.i,R.j=I.j,R.S=I.S.slice(),R}function w(I,R){var $=[],O=typeof I,F;if(R&&O=="object")for(F in I)try{$.push(w(I[F],R-1))}catch{}return $.length?$:O=="string"?I:I+"\0"}function C(I,R){for(var $=I+"",O,F=0;F<$.length;)R[f&F]=f&(O^=R[f&F]*19)+$.charCodeAt(F++);return k(R)}function N(){try{var I;return p&&(I=p.randomBytes)?I=I(s):(I=new Uint8Array(s),(e.crypto||e.msCrypto).getRandomValues(I)),k(I)}catch{var R=e.navigator,$=R&&R.plugins;return[+new Date,e,$,e.screen,k(n)]}}function k(I){return String.fromCharCode.apply(0,I)}if(C(r.random(),n),t.exports){t.exports=g;try{p=p3}catch{}}else r["seed"+a]=g})(typeof self<"u"?self:Gn,[],Math)})(mV);var Y1e=mV.exports,Z1e=U1e,Q1e=H1e,J1e=G1e,exe=q1e,txe=X1e,nxe=K1e,Fp=Y1e;Fp.alea=Z1e;Fp.xor128=Q1e;Fp.xorwow=J1e;Fp.xorshift7=exe;Fp.xor4096=txe;Fp.tychei=nxe;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */var O_;(function(t){t[t.FAIL=0]="FAIL",t[t.SHORTEST=1]="SHORTEST",t[t.LONGEST=2]="LONGEST"})(O_||(O_={}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wt(t,e){Array.isArray(t)||(t=[t]),t.forEach(n=>{n!=null&&Y(n.dtype!=="complex64",()=>`${e} does not support complex64 tensors in the CPU backend.`)})}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rxe=D3;class z2 extends PT{nextDataId(){return z2.nextDataId++}constructor(){super(),this.blockSize=48,this.firstUse=!0,this.data=new iB(this,tl())}write(e,n,r){this.firstUse&&(this.firstUse=!1,Ee().get("IS_NODE")&&ci(`
============================
Hi, looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, visit https://github.com/tensorflow/tfjs-node for more details. 
============================`));const s={id:this.nextDataId()};return this.data.set(s,{values:e,dtype:r,refCount:1}),s}makeTensorInfo(e,n,r){let s;if(n==="string"&&r!=null&&r.length>0&&T0(r[0])){const o=r.map(i=>su(i));s=this.write(o,e,n)}else s=this.write(r,e,n);return{dataId:s,shape:e,dtype:n}}refCount(e){return this.data.has(e)?this.data.get(e).refCount:0}incRef(e){const n=this.data.get(e);n.refCount++}decRef(e){if(this.data.has(e)){const n=this.data.get(e);n.refCount--}}move(e,n,r,s,o){this.data.set(e,{values:n,dtype:s,refCount:o})}numDataIds(){return this.data.numDataIds()}async read(e){return this.readSync(e)}readSync(e){const{dtype:n,complexTensorInfos:r}=this.data.get(e);if(n==="complex64"){const s=this.readSync(r.real.dataId),o=this.readSync(r.imag.dataId);return ac(s,o)}return Zse(this.data.get(e).values,n)}bufferSync(e){const n=this.readSync(e.dataId);if(e.dtype==="string")try{const r=n.map(s=>du(s));return Gt(e.shape,e.dtype,r)}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return Gt(e.shape,e.dtype,n)}makeOutput(e,n,r){return tl().makeTensorFromTensorInfo(this.makeTensorInfo(n,r,e),this)}disposeData(e,n=!1){if(this.data.has(e)){if(this.data.get(e).refCount--,!n&&this.data.get(e).refCount>0)return!1;const{complexTensorInfos:r}=this.data.get(e);r!=null&&(this.disposeData(r.real.dataId,!0),this.disposeData(r.imag.dataId,!0)),this.data.delete(e)}return!0}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}async time(e){const n=po();return e(),{kernelMs:po()-n}}memory(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}}where(e){wt([e],"where");const n=this.readSync(e.dataId);return rxe(e.shape,n)}dispose(){}floatPrecision(){return 32}epsilon(){return super.epsilon()}}z2.nextDataId=0;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gV(t){const e=new Float32Array(t.length);for(let n=0;n<t.length;++n)e[n]=Math.abs(t[n]);return e}const sxe=t=>{const{x:e}=t.inputs,n=t.backend;wt(e,"abs");let r=new Float32Array(Te(e.shape));const s=n.data.get(e.dataId).values;return r=gV(s),n.makeOutput(r,e.shape,e.dtype)},oxe={kernelName:tv,backendName:"cpu",kernelFunc:sxe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _r(t){return(e,n,r,s,o)=>{const i=jt(e,n),a=i.length,l=Et(i),c=Te(i),d=Ss(o,c),f=e.length,p=n.length,g=Et(e),x=Et(n),b=Yh(e,i),w=Yh(n,i);if(b.length+w.length===0)for(let C=0;C<d.length;++C)d[C]=t(r[C%r.length],s[C%s.length]);else for(let C=0;C<d.length;++C){const N=Tp(C,a,l),k=N.slice(-f);b.forEach(O=>k[O]=0);const I=gl(k,f,g),R=N.slice(-p);w.forEach(O=>R[O]=0);const $=gl(R,p,x);d[C]=t(r[I],s[$])}return[d,i]}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mo(t){const{inputs:e,backend:n}=t,{real:r,imag:s}=e,o=n.data.get(r.dataId).values,i=n.data.get(s.dataId).values,a=n.makeTensorInfo(r.shape,"complex64"),l=n.data.get(a.dataId);return l.complexTensorInfos={real:n.makeTensorInfo(r.shape,"float32",o),imag:n.makeTensorInfo(s.shape,"float32",i)},a}const ixe={kernelName:HT,backendName:"cpu",kernelFunc:Mo};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yb(t,e,n="float32"){if(n==="complex64"){const s=Yb(t,e,"float32"),o=Yb(t,e,"float32");return Mo({inputs:{real:s,imag:o},backend:t})}const r=Vs(Te(e),n);return t.makeTensorInfo(e,n,r)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Il(t){const{inputs:e,backend:n}=t,{x:r}=e;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}const axe={kernelName:K0,backendName:"cpu",kernelFunc:Il};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yd(t){const{inputs:e,backend:n}=t,{input:r}=e,s=n.data.get(r.dataId).complexTensorInfos.real,o=n.data.get(s.dataId).values;return n.makeTensorInfo(s.shape,s.dtype,o)}const lxe={kernelName:SA,backendName:"cpu",kernelFunc:Yd};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xV(t,e,n,r){if(r==="int32"){const s=Int32Array.from(t);return[e,"int32",s]}if(r==="bool"){const s=df([0],n),[o,i]=_r((a,l)=>a!==l?1:0)(e,[],t,s,"bool");return[i,"bool",o]}throw new Error(`Error in Cast: failed to cast ${n} to ${r}`)}function wu(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{dtype:o}=r;if(o==="complex64"){if(s.dtype==="complex64")return Il({inputs:{x:s},backend:n});const d=Yb(n,s.shape,s.dtype),f=wu({inputs:{x:s},backend:n,attrs:{dtype:"float32"}}),p=Mo({inputs:{real:f,imag:d},backend:n});return n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(f),p}if(s.dtype==="complex64"){const d=Yd({inputs:{input:s},backend:n}),f=wu({inputs:{x:d},backend:n,attrs:{dtype:o}});return n.disposeIntermediateTensorInfo(d),f}if(!lB(s.dtype,o)){const d=Il({inputs:{x:s},backend:n});return{dataId:d.dataId,shape:d.shape,dtype:o}}const i=n.data.get(s.dataId).values,[a,l,c]=xV(i,s.shape,s.dtype,o);return n.makeTensorInfo(a,l,c)}const cxe={kernelName:F0,backendName:"cpu",kernelFunc:wu};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ns(t,e,n,r){return n==null?({inputs:s,backend:o})=>{const{a:i,b:a}=s,l=o;wt([i,a],t);const c=l.data.get(i.dataId).values,d=l.data.get(a.dataId).values,f=i.dtype==="string"?lc(c):c,p=i.dtype==="string"?lc(d):d,g=r||i.dtype,[x,b]=e(i.shape,a.shape,f,p,g);return l.makeTensorInfo(b,g,x)}:({inputs:s,backend:o})=>{const{a:i,b:a}=s,l=o;if(i.dtype==="complex64"||a.dtype==="complex64"){const c=wu({inputs:{x:i},backend:l,attrs:{dtype:"complex64"}}),d=l.data.get(c.dataId),f=d.complexTensorInfos.real,p=d.complexTensorInfos.imag,g=l.data.get(f.dataId).values,x=l.data.get(p.dataId).values,b=wu({inputs:{x:a},backend:l,attrs:{dtype:"complex64"}}),w=l.data.get(b.dataId),C=w.complexTensorInfos.real,N=w.complexTensorInfos.imag,k=l.data.get(C.dataId).values,I=l.data.get(N.dataId).values,[R,$,O]=n(i.shape,a.shape,g,x,k,I),F=l.makeTensorInfo(O,"float32",R),M=l.makeTensorInfo(O,"float32",$),_=Mo({inputs:{real:F,imag:M},backend:l});return l.disposeIntermediateTensorInfo(c),l.disposeIntermediateTensorInfo(b),l.disposeIntermediateTensorInfo(F),l.disposeIntermediateTensorInfo(M),_}else{const c=l.data.get(i.dataId).values,d=l.data.get(a.dataId).values,f=r||i.dtype,[p,g]=e(i.shape,a.shape,c,d,f);return l.makeTensorInfo(g,f,p)}}}function zR(t){return(e,n,r,s,o,i)=>{const a=jt(e,n),l=Te(a),c=a.length,d=Et(a),f=Ss("float32",l),p=Ss("float32",l),g=Yh(e,a),x=Yh(n,a),b=ac(r,s),w=ac(o,i),C=e.length,N=Et(e),k=n.length,I=Et(n);if(g.length+x.length===0)for(let R=0;R<f.length;R++){const $=R%b.length,O=R%w.length,F=t(b[$*2],b[$*2+1],w[O*2],w[O*2+1]);f[R]=F.real,p[R]=F.imag}else for(let R=0;R<f.length;R++){const $=Tp(R,c,d),O=$.slice(-C);g.forEach(B=>O[B]=0);const F=gl(O,C,N),M=$.slice(-k);x.forEach(B=>M[B]=0);const _=gl(M,k,I),V=t(b[F*2],b[F*2+1],w[_*2],w[_*2+1]);f[R]=V.real,p[R]=V.imag}return[f,p,a]}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yV=_r((t,e)=>t+e),uxe=zR((t,e,n,r)=>({real:t+n,imag:e+r})),ep=ns(Ap,yV,uxe),dxe={kernelName:Ap,backendName:"cpu",kernelFunc:ep};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VR(t,e,n,r,s){const o=Te(r),i=Vs(s,n);for(let a=0;a<t.length;a++){const l=t[a];if(l<0)throw new Error("Input x must be non-negative!");l>=s||(o>0?i[l]+=e[a]:i[l]+=1)}return i}function bV(t,e,n,r=!1){const s=t.shape[0],o=t.shape[1],i=Gt([s,n],e.dtype);for(let a=0;a<s;a++)for(let l=0;l<o;l++){const c=t.get(a,l);if(c<0)throw new Error("Input x must be non-negative!");c>=n||(r?i.set(1,a,c):e.size>0?i.set(i.get(a,c)+e.get(a,l),a,c):i.set(i.get(a,c)+1,a,c))}return i}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wV=_r((t,e)=>t&e),fxe=ns(cv,wV),hxe={kernelName:cv,backendName:"cpu",kernelFunc:fxe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ol(t){return(e,n,r)=>{const s=Ar(n,e.length);for(let o=0;o<e.length;++o)s[o]=t(e[o],r);return s}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function An(t,e,n){const r=Ol(e);return Lu(t,r,n)}function Lu(t,e,n){return({inputs:r,attrs:s,backend:o})=>{const{x:i}=r;wt(i,t);const a=o,l=a.data.get(i.dataId).values;let c;if(i.dtype==="string"){if(!Array.isArray(l))throw new Error("String tensor's value was not an instance of Array");c=lc(l)}else c=l;const d=n||i.dtype,f=e(c,d,s);return a.makeTensorInfo(i.shape,d,f)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vV=Ol(t=>Math.ceil(t)),pxe=Lu(M0,vV),mxe={kernelName:M0,backendName:"cpu",kernelFunc:pxe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CV(t,e,n,r){const s=Ar(n,Te(e));if(r&&n!=="string"){let o=0;t.forEach(i=>{const a=Te(i.shape);s.set(i.vals,o),o+=a})}else{let o=0;t.forEach(i=>{const a=n==="string"?lc(i.vals):i.vals;let l=0;for(let c=0;c<i.shape[0];++c){const d=c*e[1]+o;for(let f=0;f<i.shape[1];++f)s[d+f]=a[l++]}o+=i.shape[1]})}return s}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SV=_r((t,e)=>t===e?1:0),NV=ns(yv,SV,null,"bool"),gxe={kernelName:yv,backendName:"cpu",kernelFunc:NV};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const EV=Ol(t=>Math.exp(t)),IV=Lu(U0,EV,"float32"),xxe={kernelName:U0,backendName:"cpu",kernelFunc:IV};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kV=Ol(t=>Math.expm1(t)),yxe=Lu(H0,kV),bxe={kernelName:H0,backendName:"cpu",kernelFunc:yxe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const TV=Ol(t=>Math.floor(t)),wxe=Lu(G0,TV),vxe={kernelName:G0,backendName:"cpu",kernelFunc:wxe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const AV=_r((t,e)=>Math.floor(t/e)),Cxe=ns(q0,AV,null,"int32"),Sxe={kernelName:q0,backendName:"cpu",kernelFunc:Cxe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RV(t,e,n,r,s,o,i,a,l){const c=Gt([r,o],n);for(let d=0;d<r;d++){const f=[];let p=0;for(let g=0;g<s;g++){const x=t[d*s+g];p+=x*i[g],f.push(x)}if(p<0||p>=l/o)throw new Error(`Invalid indices: ${f} does not index into ${a}`);for(let g=0;g<o;g++)c.values[d*o+g]=e.get(...e.indexToLoc(p*o+g))}return c}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DV(t,e,n){const r=Gt(n,t.dtype);for(let s=0;s<r.size;++s){const i=r.indexToLoc(s).slice(),a=i[0],l=i[2],c=e.locToIndex([a,l]);i[2]=e.values[c];const d=t.locToIndex(i);0<=d&&d<t.values.length&&(r.values[s]=t.values[d])}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $V=_r((t,e)=>t>e?1:0),Nxe=ns(Cv,$V,null,"bool"),Exe={kernelName:Cv,backendName:"cpu",kernelFunc:Nxe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const OV=_r((t,e)=>t>=e?1:0),Ixe=ns(X0,OV,null,"bool"),kxe={kernelName:X0,backendName:"cpu",kernelFunc:Ixe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _V=_r((t,e)=>t<e?1:0),Txe=ns(Nv,_V,null,"bool"),Axe={kernelName:Nv,backendName:"cpu",kernelFunc:Txe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const PV=_r((t,e)=>t<=e?1:0),Rxe=ns(Ev,PV,null,"bool"),Dxe={kernelName:Ev,backendName:"cpu",kernelFunc:Rxe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FV(t,e,n){const r=(e-t)/(n-1),s=Vs(n,"float32");s[0]=t;for(let o=1;o<s.length;o++)s[o]=s[o-1]+r;return s}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const MV=Ol(t=>Math.log(t)),$xe=Lu(J0,MV),Oxe={kernelName:J0,backendName:"cpu",kernelFunc:$xe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LV(t,e,n,r){const s=Ss(r,Te(n));for(let o=0;o<s.length;++o){const i=o*e;let a=t[i];for(let l=0;l<e;++l){const c=t[i+l];(Number.isNaN(c)||c>a)&&(a=c)}s[o]=a}return s}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const BV=_r((t,e)=>Math.max(t,e)),_xe=ns(t1,BV),Pxe={kernelName:t1,backendName:"cpu",kernelFunc:_xe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jV=_r((t,e)=>Math.min(t,e)),Fxe=ns(n1,jV),Mxe={kernelName:n1,backendName:"cpu",kernelFunc:Fxe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const WR=_r((t,e)=>t*e),Lxe=zR((t,e,n,r)=>({real:t*n-e*r,imag:t*r+e*n})),V2=ns(s1,WR,Lxe),Bxe={kernelName:s1,backendName:"cpu",kernelFunc:V2};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zV(t,e,n){const r=Au(-1,n);return WR([],e,r,t,n)}function jxe(t){const{inputs:e,backend:n}=t,{x:r}=e;wt(r,"neg");const s=n.data.get(r.dataId).values,[o,i]=zV(s,r.shape,r.dtype);return n.makeTensorInfo(i,r.dtype,o)}const zxe={kernelName:Fv,backendName:"cpu",kernelFunc:jxe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const VV=_r((t,e)=>t!==e?1:0),Vxe=ns(Mv,VV,null,"bool"),Wxe={kernelName:Mv,backendName:"cpu",kernelFunc:Vxe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UR(t,e,n,r,s){const o=e.length,i=Te(e),a=Et(e),l=Et(s),c=Ss(n,Te(s));for(let d=0;d<i;++d){const f=Tp(d,o,a),p=new Array(f.length);for(let x=0;x<p.length;x++)p[x]=f[r[x]];const g=gl(p,o,l);c[g]=t[d]}return c}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wo(t){const{inputs:e,attrs:n,backend:r}=t,{x:s}=e,{perm:o}=n;wt(s,"transpose");const i=s.shape.length,a=new Array(i);for(let f=0;f<a.length;f++)a[f]=s.shape[o[f]];const l=r.data.get(s.dataId).values,c=UR(l,s.shape,s.dtype,o,a);return{dataId:r.write(c,a,s.dtype),shape:a,dtype:s.dtype}}const Uxe={kernelName:Nh,backendName:"cpu",kernelFunc:wo};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WV(t,e,n,r){const[s,o]=ms(t,r),i=Xo(e,"int32"),a=Vs(Te(s),i),l=Te(o);for(let c=0;c<a.length;++c){const d=c*l;let f=1;for(let p=0;p<l;++p)f*=n[d+p];a[c]=f}return{outVals:a,outShape:s,outDtype:i}}function Hxe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:o,keepDims:i}=r;wt(s,"prod");const a=s.shape.length,l=Zt(o,s.shape),c=fr(l,a);let d=l,f=s;const p=[];c!=null&&(f=wo({inputs:{x:s},backend:n,attrs:{perm:c}}),p.push(f),d=$r(d.length,a));const g=n.data.get(f.dataId).values,{outVals:x,outShape:b,outDtype:w}=WV(f.shape,f.dtype,g,d);let C=b;return i&&(C=Dr(b,l)),p.forEach(N=>n.disposeIntermediateTensorInfo(N)),n.makeTensorInfo(C,w,x)}const Gxe={kernelName:Wv,backendName:"cpu",kernelFunc:Hxe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qxe(t,e,n){t.forEach((r,s)=>{if(r<0||r>=n){const o=Tp(s,e.length,Et(e)).join(",");throw new Error(`indices[${o}] = ${r} is not in [0, ${n})`)}})}function Xxe(t,e){for(let n=0;n<t.length;++n){const r=t[n],s=n===t.length-1?e:t[n+1].length;if(r.length===0)throw new Error("Ragged splits may not be empty");if(r[0]<0)throw new Error("Ragged splits must be non-negative");if(r[r.length-1]>s)throw new Error("Ragged splits must not point past values");for(let o=1;o<r.length;++o)if(r[o-1]>r[o])throw new Error("Ragged splits must be sorted in ascending order")}}function Kxe(t,e,n,r){const s=[];let o=0;const i=e.length-1+n.length,a=new Array(i).fill(null).map(()=>[0]);Xxe(n,r);let l=1;for(let c=0;c<e.length-1;++c){l*=e[c];const d=e[c+1];for(let f=1;f<l+1;++f)a[c].push(f*d)}for(let c=0;c<t.length;++c){let d=t[c],f=t[c]+1;for(let p=0;p<n.length;++p){const g=n[p],x=p+e.length-1;if(x>=0){const b=a[x],w=b[b.length-1]-g[d];for(let C=d;C<f;++C)a[x].push(g[C+1]+w)}d=g[d],f=g[f]}f!==d&&(s.push([d,f]),o+=f-d)}return{outSplits:a,valueSlices:s,numValues:o}}function Yxe(t){const e=[];for(let n=0;n<t.length;++n){const r=t[n].length,s=Ar("int32",r);e.push(s),t[n].forEach((o,i)=>s[i]=o)}return e}function __(t,e){const n=t.slice(0,e);for(;n.length<e;)n.push(1);for(let r=e;r<t.length;r++)n[e-1]*=t[r];return n}function Zxe(t,e,n,r,s,o){const i=__(e,2)[1],a=__(o,2)[1];let l=0;for(const c of n)for(let d=c[0];d<c[1];++d){for(let f=0;f<r;++f)s[l*a+f]=t[d*i+f];++l}}function Qxe(t,e,n,r,s){const o=e.slice();o[0]=s;const i=Ar(n,Te(o)),a=t.length,l=a===0?0:a/e[0];return Zxe(t,e,r,l,i,o),[i,o]}function UV(t,e,n,r,s,o,i,a){if(t.length===0)throw new Error("paramsNestedSplits must be non empty");if(e[0].length===0)throw new Error("Split tensors must not be scalars");const l=e[0][0]-1;if(qxe(o,i,l),r.length===0)throw new Error("params.rank must be nonzero");const c=r[0],{outSplits:d,valueSlices:f,numValues:p}=Kxe(o,i,t,c),g=Yxe(d),x=Qxe(n,r,s,f,p);return[g,x[0],x[1]]}/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const P_=2147483647;function HV(t,e,n,r,s,o,i){if(e.length>1)throw new Error("starts must be a scalar or vector");if(s.length>1)throw new Error("limits must be a scalar or vector");if(i.length>1)throw new Error("deltas must be a scalar or vector");const a=e.length===0,l=s.length===0,c=i.length===0,d=[];a||d.push(e[0]),l||d.push(s[0]),c||d.push(i[0]);for(let w=1;w<d.length;++w)if(d[w]!==d[w-1])throw new Error("starts, limits, and deltas must have the same shape");const f=d.length===0?1:d[0],p=Ar("int32",f+1);p[0]=0;for(let w=0;w<f;++w){const C=a?t[0]:t[w],N=l?r[0]:r[w],k=c?o[0]:o[w];if(k===0)throw new Error("Requires delta != 0");let I;if(k>0&&N<C||k<0&&N>C)I=0;else if(I=Math.ceil(Math.abs((N-C)/k)),I>P_)throw new Error(`Requires ((limit - start) / delta) <= ${P_}`);p[w+1]=p[w]+I}const g=p[f],x=Ar(n,g);let b=0;for(let w=0;w<f;++w){const C=p[w+1]-p[w];let N=a?t[0]:t[w];const k=c?o[0]:o[w];for(let I=0;I<C;++I)x[b++]=N,N+=k}return[p,x]}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var Ri=Sa;class Zb{constructor(e,n,r,s,o,i,a,l,c,d){this.shape=e,this.shapeShape=n,this.values=r,this.valuesShape=s,this.valuesDType=o,this.defaultValue=i,this.defaultValueShape=a,this.rowPartitionValues=l,this.rowPartitionValuesShapes=c,this.rowPartitionTypes=Ij(d),this.raggedRank=kj(this.rowPartitionTypes)}getRowPartitionTypeByDimension(e){return this.rowPartitionTypes[0]===Ri.FIRST_DIM_SIZE?this.rowPartitionTypes[e+1]:this.rowPartitionTypes[e]}getRowPartitionTensor(e){return this.rowPartitionTypes[0]===Ri.FIRST_DIM_SIZE?this.rowPartitionValues[e+1]:this.rowPartitionValues[e]}getMaxWidth(e){const n=this.getRowPartitionTensor(e-1);switch(this.getRowPartitionTypeByDimension(e-1)){case Ri.VALUE_ROWIDS:return Zb.getMaxWidthValueRowID(n);case Ri.ROW_SPLITS:return Zb.getMaxWidthRowSplit(n);default:throw new Error(`Cannot handle partition type ${Ri[this.getRowPartitionTypeByDimension(e-1)]}`)}}static getMaxWidthRowSplit(e){const n=e.length;if(n===0||n===1)return 0;let r=0;for(let s=0;s<n-1;++s){const o=e[s+1]-e[s];o>r&&(r=o)}return r}static getMaxWidthValueRowID(e){const n=e.length;if(n===0)return 0;let r=0,s=e[0],o=0;for(let i=1;i<n;++i){const a=e[i];a!==s&&(s=a,o=Math.max(i-r,o),r=i)}return Math.max(n-r,o)}tensorShapeFromTensor(e,n,r=!0){if(n.length===0){if(e[0]===-1)return[];throw new Error("The only valid scalar shape tensor is the fully unknown shape specified as -1.")}return M_(e,r)}calculateOutputSize(e){const n=this.valuesShape,r=this.defaultValueShape;Tj(r,n);const s=this.tensorShapeFromTensor(this.shape,this.shapeShape),i=Ej(this.raggedRank,s,n);i[0]<0&&(i[0]=e);for(let a=1;a<=this.raggedRank;++a)i[a]<0&&(i[a]=this.getMaxWidth(a));return i}calculateFirstParentOutputIndex(e,n,r){const s=Math.min(e,r),o=[];let i=0;for(let a=0;a<s;++a,i+=n)o.push(i);for(let a=s;a<e;++a)o.push(-1);return Y(o.length===e,()=>"Final length of result must be equal to firstDimension."),o}calculateOutputIndexRowSplit(e,n,r,s){const o=e.length,i=[];for(let a=0;a<o-1;++a){const l=e[a+1]-e[a];let c=Math.min(s,l),d=n[a];d===-1&&(c=0);for(let f=0;f<c;++f)i.push(d),d+=r;for(let f=0;f<l-c;++f)i.push(-1)}if(o>0&&i.length!==e[o-1])throw new Error("Invalid row split size.");return i}calculateOutputIndexValueRowID(e,n,r,s){const o=e.length,i=[];if(o===0)return[];let a=0,l=e[0];if(l>=n.length)throw new Error(`Got currentValueRowId=${l}, which is not less than ${n.length}`);let c=n[l];i.push(c);for(let d=1;d<o;++d){const f=e[d];if(f===l)c>=0&&(++a,a<s?c+=r:c=-1);else{if(a=0,l=f,f>=n.length)throw new Error(`Got nextValueRowId=${f} which is not less than ${n.length}`);c=n[f]}i.push(c)}if(i.length!==e.length)throw new Error("Invalid row ids.");return i}calculateOutputIndex(e,n,r,s){const o=this.getRowPartitionTensor(e),i=this.getRowPartitionTypeByDimension(e);switch(i){case Ri.VALUE_ROWIDS:return this.calculateOutputIndexValueRowID(o,n,r,s);case Ri.ROW_SPLITS:if(o.length-1>n.length)throw new Error(`Row partition size is greater than output size: ${o.length-1} > ${n.length}`);return this.calculateOutputIndexRowSplit(o,n,r,s);default:throw new Error(`Unsupported partition type: ${Ri[i]}`)}}getFirstDimensionSize(){const e=this.rowPartitionValues[0];if(this.rowPartitionTypes.length===0)throw new Error("No row_partition_types given.");const n=this.rowPartitionTypes[0];switch(n){case Ri.FIRST_DIM_SIZE:return e[0];case Ri.VALUE_ROWIDS:throw new Error("Cannot handle VALUE_ROWIDS in first dimension.");case Ri.ROW_SPLITS:return this.rowPartitionValuesShapes[0][0]-1;default:throw new Error(`Cannot handle type ${Ri[n]}`)}}compute(){if(this.rowPartitionValues[0].length<=0)throw new Error("Invalid first partition input. Tensor requires at least one element.");const n=this.getFirstDimensionSize(),r=this.calculateOutputSize(n),s=new Array(this.raggedRank+1);s[s.length-1]=1;for(let l=s.length-2;l>=0;--l)s[l]=s[l+1]*r[l+1];const o=M_(r,!1),i=Ar(this.valuesDType,Te(o));if(s[0]*r[0]>0){let l=this.calculateFirstParentOutputIndex(n,s[0],r[0]);for(let c=1;c<=this.raggedRank;++c)l=this.calculateOutputIndex(c-1,l,s[c],r[c]);this.setOutput(this.raggedRank,l,i,o)}return[o,i]}setOutput(e,n,r,s){if(r.length===0)return;const o=this.values,i=r;let a=s.slice();a=a.slice(e+1);const l=Te(a),c=n.length;let d=this.defaultValue;if(d.length!==l&&d.length!==1){const x=this.defaultValueShape;we(()=>{const b=ce(d,x);d=kh(b,a).dataSync()})}let f=0,p=0,g=0;for(let x=0;x<=c;++x){let b=x<c?n[x]:-1;if(b===g){++g;continue}if(p<g){const w=o.subarray(f*l),C=i.subarray(p*l),N=(g-p)*l;F_(C,w,N)}if(x>=c){const w=r.length;b=Math.floor(w/l)}if(b>g)if(this.defaultValue.length===1)i.subarray(g*l,b*l).fill(this.defaultValue[0]),g=b;else for(;b>g;){const w=i.slice(g*l);F_(w,d,l),++g}b<0?(f=x+1,p=g):(f=x,p=g,g=p+1)}}}function F_(t,e,n){for(let r=0;r<n;r++)t[r]=e[r]}function M_(t,e){const n=[];for(let r of t){if(r<0){if(!e)throw new Error(`Dimension ${r} must be >= 0`);if(r<-1)throw new Error(`Dimension ${r} must be >= -1`);r=-1}n.push(r)}return n}function GV(t,e,n,r,s,o,i,a,l,c){return new Zb(t,e,n,r,s,o,i,a,l,c).compute()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qV(t,e,n,r){const s=t===e,o=t<e&&n<0,i=e<t&&n>1;if(s||o||i)return Vs(0,r);const a=Math.abs(Math.ceil((e-t)/n)),l=Vs(a,r);e<t&&n===1&&(n=-1),l[0]=t;for(let c=1;c<l.length;c++)l[c]=l[c-1]+n;return l}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const XV=Ol(t=>1/Math.sqrt(t)),Jxe=Lu(u1,XV),eye={kernelName:u1,backendName:"cpu",kernelFunc:Jxe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vd(t,e,n,r,s,o,i,a,l,c){const d=[r/s,s],f=t.values,p=e.values;if(r===0)return Gt(n,e.dtype);const g=l instanceof Zr?l:Gt(d,e.dtype);typeof l=="string"||typeof l=="number"?g.values.fill(l):typeof l=="boolean"&&g.values.fill(+l);for(let x=0;x<o;x++){const b=[];let w=0;for(let C=0;C<i;C++){const N=f[x*i+C];b.push(N),w+=N*a[C]}if(w<0||w>=r/s)throw new Error(`Invalid indices: ${b} does not index into ${n}`);for(let C=0;C<s;C++)c?g.values[w*s+C]+=p[x*s+C]:g.values[w*s+C]=e.rank===0?p[0]:p[x*s+C]}return g}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tye=Ol(t=>1/(1+Math.exp(-t))),KV=An(m1,t=>1/(1+Math.exp(-t))),nye={kernelName:m1,backendName:"cpu",kernelFunc:KV};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YV(t,e,n,r,s){const o=U3(r,e,n),i=Te(n),a=Et(r);if(o){const f=H3(e,a);return s==="string"?t.slice(f,f+i):t.subarray(f,f+i)}const l=s==="string"?lc(t):t,c=Gt(r,s,l),d=Gt(n,s);for(let f=0;f<d.size;++f){const p=d.indexToLoc(f),g=p.map((x,b)=>x+e[b]);d.set(c.get(...g),...p)}return s==="string"?Xj(d.values):d.values}function Zd(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{begin:o,size:i}=r;wt(s,"slice");const[a,l]=k2(s,o,i);V3(s,a,l);const c=n.data.get(s.dataId).values,d=YV(c,a,l,s.shape,s.dtype);return n.makeTensorInfo(l,s.dtype,d)}const rye={kernelName:Kv,backendName:"cpu",kernelFunc:Zd};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZV(t,e,n,r,s,o,i){const a=e[0],l=o[0],c=new Array(l),d=new Array(a),f=e[1];if(l===0){if(a!==0)throw new Error(Pj(a));const w=Ar(n,0),C=Ar(s,0);return[w,[0,f],C,c,d]}let p=!0,g=0;const x=new Array(l).fill(0);for(let w=0;w<a;++w){const C=t[w*f];if(C<0)throw new Error(Fj(w,C));if(C>=l)throw new Error(Mj(w,C,l));++x[C],p=p&&C>=g,g=C}let b=!0;for(let w=0;w<l;++w){const C=x[w]===0;c[w]=C,b=b&&!C,x[w]=Math.max(x[w],1),w>0&&(x[w]+=x[w-1])}if(b&&p){const w=t,C=r;for(let N=0;N<a;++N)d[N]=N;return[w,[a,f],C,c,d]}else{const w=x[l-1],C=Ar(n,w*f),N=Ar(s,w),k=new Array(l).fill(0);for(let I=0;I<a;++I){const R=t[I*f],$=k[R],O=(R===0?0:x[R-1])+$;k[R]++;for(let F=0;F<f;++F)C[O*f+F]=t[I*f+F];N[O]=r[I],d[I]=O}for(let I=0;I<l;++I)if(k[I]===0){const $=I===0?0:x[I-1];C[$*f+0]=I;for(let O=1;O<f;++O)C[$*f+O]=0;N[$]=i}return[C,[w,f],N,c,d]}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QV(t,e,n,r,s){const o=Te(r),i=e[0],a=s.length,l=[];let c=1,d=-1;for(let w=0;w<a;++w){const C=s[w];if(C===-1){if(d!==-1)throw new Error(Lj(d,w));d=w,l.push(1)}else{if(C<0)throw new Error(Bj(w,C));c*=C,l.push(C)}}if(d!==-1){if(c<=0)throw new Error(jj());const w=Math.trunc(o/c);if(c*w!==o)throw new Error(zj(r,l));l[d]=w}if(Te(l)!==o)throw new Error(Vj(r,l));const p=r.length,g=[];if(p>0){g[p-1]=1;for(let w=p-2;w>=0;--w)g[w]=g[w+1]*r[w+1]}const x=[];if(a>0){x[a-1]=1;for(let w=a-2;w>=0;--w)x[w]=x[w+1]*l[w+1]}const b=Ar(n,i*a);for(let w=0;w<i;++w){let C=0;for(let N=0;N<p;++N)C+=t[w*p+N]*g[N];for(let N=0;N<a;++N)b[w*a+N]=Math.trunc(C/x[N]),C%=x[N]}return[b,[i,a],l]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HR(t,e,n,r,s,o=!1,i=0){const a=r.length,l=[e[0],t.length/e[0]],c=l[1],f=a>0?s[a-1]+1:0;if(f<0)throw new Error(uI());const p=e.slice();p[0]=f;const g=p.reduce((k,I)=>k*I,1),x=Ar(n,g);if(a===0)return f>0&&x.fill(i),[x,p];if(f<=0)throw new Error(uI());let b=0,w=1,C=0,N=s[b];for(;;){let k=0;if(w<a){if(k=s[w],N===k){++w;continue}if(N>=k)throw new Error(Wj())}if(N<0||N>=f)throw new Error(Uj(N,f));N>C&&x.fill(i,C*c,N*c);for(let I=b;I<w;++I){const R=r[I];if(R<0||R>=l[0])throw new Error(Hj(I,r[I],l[0]));for(let $=0;$<c;$++)x[N*c+$]+=t[R*c+$]}if(o)for(let I=0;I<c;I++)x[N*c+I]/=w-b;if(b=w,++w,C=N+1,N=k,w>a)break}return C<f&&x.fill(i,C*c,f*c),[x,p]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sye=Ol(t=>Math.sqrt(t)),oye=An(x1,t=>Math.sqrt(t)),iye={kernelName:x1,backendName:"cpu",kernelFunc:oye};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const JV=_r((t,e)=>{const n=t-e;return n*n}),aye=ns(y1,JV),lye={kernelName:y1,backendName:"cpu",kernelFunc:aye};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const e9=Ol((t,e)=>{const{pattern:n,replaceGlobal:r,rewrite:s}=e;return t.replace(new RegExp(n,r?"g":""),s)}),cye=Lu(e2,e9),uye={kernelName:e2,backendName:"cpu",kernelFunc:cye};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function t9(t,e,n,r){const s=Gt(t,e.dtype);for(let o=0;o<s.size;o++){const i=s.indexToLoc(o),a=new Array(i.length);for(let l=0;l<a.length;l++)a[l]=i[l]*n[l]+r[l];s.set(e.get(...a),...i)}return s}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class dye{constructor(e,n,r,s,o,i){this.separator=su(e),this.nGramWidths=n,this.leftPad=su(r),this.rightPad=su(s),this.padWidth=o,this.preserveShort=i}getPadWidth(e){return Math.min(this.padWidth<0?e-1:this.padWidth,e-1)}getNumNGrams(e,n){const r=this.getPadWidth(n);return Math.max(0,e+2*r-n+1)}createNGrams(e,n,r,s,o,i){for(let a=0;a<o;++a){const l=this.getPadWidth(i),c=Math.max(0,l-a),d=Math.max(0,l-(o-(a+1))),f=i-(c+d),p=n+(c>0?0:a-l);let g=0;g+=c*this.leftPad.length;for(let N=0;N<f;++N)g+=e[p+N].length;g+=d*this.rightPad.length;const x=c+d+f-1;g+=x*this.separator.length,r[s+a]=new Uint8Array(g);const b=r[s+a];let w=0;const C=N=>N.forEach(k=>b[w++]=k);for(let N=0;N<c;++N)C(this.leftPad),C(this.separator);for(let N=0;N<f-1;++N)C(e[p+N]),C(this.separator);if(f>0){C(e[p+f-1]);for(let N=0;N<d;++N)C(this.separator),C(this.rightPad)}else{for(let N=0;N<d-1;++N)C(this.rightPad),C(this.separator);C(this.rightPad)}}}compute(e,n){const r=e.length,s=n.length;if(s>0){let l=n[0];if(l!==0)throw new Error(`First split value must be 0, got ${l}`);for(let c=1;c<s;++c){let d=n[c]>=l;if(d=d&&n[c]<=r,!d)throw new Error(`Invalid split value ${n[c]}, must be in [${l}, ${r}]`);l=n[c]}if(l!==r)throw new Error(`Last split value must be data size. Expected ${r}, got ${l}`)}const o=s-1,i=Ar("int32",s);if(r===0||s===0){const l=new Array(r);for(let c=0;c<=o;++c)i[c]=0;return[l,i]}i[0]=0;for(let l=1;l<=o;++l){const c=n[l]-n[l-1];let d=0;this.nGramWidths.forEach(f=>{d+=this.getNumNGrams(c,f)}),this.preserveShort&&c>0&&d===0&&(d=1),i[l]=i[l-1]+d}const a=new Array(i[o]);for(let l=0;l<o;++l){const c=n[l];let d=i[l];if(this.nGramWidths.forEach(f=>{const p=n[l+1]-n[l],g=this.getNumNGrams(p,f);this.createNGrams(e,c,a,d,g,f),d+=g}),this.preserveShort&&d===i[l]){const f=n[l+1]-n[l];if(f===0)continue;const p=f+2*this.padWidth;this.createNGrams(e,c,a,d,1,p)}}return[a,i]}}function n9(t,e,n,r,s,o,i,a){return new dye(n,r,s,o,i,a).compute(t,e)}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fye(t,e,n,r){if(!t.length)return;if(e.length===0){for(let o=0;o<t.length;++o)r.push(t.subarray(o,o+1));return}if(e.length===1){const o=e[0];let i=t.indexOf(o);for(;i!==-1;){const a=t.subarray(0,i);(!n||a.length!==0)&&r.push(a),t=t.subarray(i+1),i=t.indexOf(o)}(!n||t.length!==0)&&r.push(t);return}let s=0;for(let o=0;o<t.length+1;o++)if(o===t.length||e.indexOf(t[o])!==-1){const i=t.subarray(s,o);(!n||i.length!==0)&&r.push(i),s=o+1}}function r9(t,e,n){const r=t.length,s=[];let o=0,i=0;const a=new Array(r);for(let p=0;p<r;++p){const g=s.length;fye(t[p],e,n,s);const x=s.length-g;a[p]=x,o+=x,i=Math.max(i,x)}const l=Ar("int32",o*2),c=new Array(o),d=[r,i];let f=0;for(let p=0;p<r;++p)for(let g=0;g<a[p];++g)l[f*2]=p,l[f*2+1]=g,c[f]=s[f],++f;return[l,c,d]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function s9(t,e){const n=Ar("int32",t.length);for(let r=0;r<t.length;++r)n[r]=goe(t[r]).modulo(e).getLowBitsUnsigned();return n}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const o9=_r((t,e)=>t-e),hye=zR((t,e,n,r)=>({real:t-n,imag:e-r})),GR=ns(b1,o9,hye),pye={kernelName:b1,backendName:"cpu",kernelFunc:GR};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function i9(t,e){const n=new Array(t.rank);for(let s=0;s<n.length;s++)n[s]=t.shape[s]*e[s];const r=Gt(n,t.dtype);for(let s=0;s<r.values.length;++s){const o=r.indexToLoc(s),i=new Array(t.rank);for(let l=0;l<i.length;l++)i[l]=o[l]%t.shape[l];const a=t.locToIndex(i);r.values[s]=t.values[a]}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qm=(t,e)=>{const n=e.value-t.value;return n===0?t.index-e.index:n};function a9(t,e,n=0,r=t.length-1){for(;r>n;){if(r-n>600){const a=r-n+1,l=e-n+1,c=Math.log(a),d=.5*Math.exp(2*c/3),f=.5*Math.sqrt(c*d*(a-d)/a)*Math.sign(l-a/2),p=Math.max(n,Math.floor(e-l*d/a+f)),g=Math.min(r,Math.floor(e+(a-l)*d/a+f));a9(t,e,p,g)}const s=t[e];let o=n,i=r;for(Gf(t,n,e),qm(t[r],s)>0&&Gf(t,n,r);o<i;){for(Gf(t,o,i),o++,i--;qm(t[o],s)<0;)o=o+1;for(;qm(t[i],s)>0;)i=i-1}qm(t[n],s)===0?Gf(t,n,i):(i=i+1,Gf(t,i,r)),i<=e&&(n=i+1),e<=i&&(r=i-1)}}function l9(t,e,n,r,s){const o=e[e.length-1],[i,a]=[t.length/o,o],l=Ss(n,i*r),c=Ss("int32",i*r);for(let f=0;f<i;f++){const p=f*a,g=t.subarray(p,p+a);let x=new Array(g.length);g.forEach((N,k)=>x[k]={value:N,index:k}),r<x.length&&(a9(x,r),x=x.slice(0,r)),s&&x.sort(qm);const b=f*r,w=l.subarray(b,b+r),C=c.subarray(b,b+r);for(let N=0;N<r;N++)w[N]=x[N].value,C[N]=x[N].index}const d=e.slice();return d[d.length-1]=r,[Gt(d,n,l),Gt(d,"int32",c)]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function c9(t,e,n,r){const s=Zt(e,n)[0],o=[1,n[0],1];for(let x=0;x<s;x++)o[0]*=n[x];o[1]=n[s];for(let x=s+1;x<n.length;x++)o[2]*=n[x];const i=new Map,a=new Int32Array(n[s]),l=new Zr(o,r,t),c=[],d=o[0]===1&&o[2]===1;for(let x=0;x<n[s];x++){let b;if(d)b=t[x].toString();else{const C=[];for(let N=0;N<o[0];N++)for(let k=0;k<o[2];k++)C.push(l.get(N,x,k));b=C.join(",")}const w=i.get(b);if(w!=null)a[x]=w;else{const C=i.size;i.set(b,C),a[x]=C,c.push(x)}}const f=o.slice();f[1]=i.size;const p=new Zr(f,r);c.forEach((x,b)=>{for(let w=0;w<o[0];w++)for(let C=0;C<o[2];C++)p.set(l.get(w,x,C),w,b,C)});const g=n.slice();return g[s]=f[1],{outputValues:p.values,outputShape:g,indices:a}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mye=Object.freeze(Object.defineProperty({__proto__:null,addImpl:yV,bincountImpl:VR,bincountReduceImpl:bV,bitwiseAndImpl:wV,castImpl:xV,ceilImpl:vV,concatImpl:CV,equalImpl:SV,expImpl:EV,expm1Impl:kV,floorDivImpl:AV,floorImpl:TV,gatherNdImpl:RV,gatherV2Impl:DV,greaterEqualImpl:OV,greaterImpl:$V,lessEqualImpl:PV,lessImpl:_V,linSpaceImpl:FV,logImpl:MV,maxImpl:LV,maximumImpl:BV,minimumImpl:jV,multiplyImpl:WR,negImpl:zV,notEqualImpl:VV,prodImpl:WV,raggedGatherImpl:UV,raggedRangeImpl:HV,raggedTensorToTensorImpl:GV,rangeImpl:qV,rsqrtImpl:XV,scatterImpl:vd,sigmoidImpl:tye,simpleAbsImpl:gV,sliceImpl:YV,sparseFillEmptyRowsImpl:ZV,sparseReshapeImpl:QV,sparseSegmentReductionImpl:HR,sqrtImpl:sye,squaredDifferenceImpl:JV,staticRegexReplaceImpl:e9,stridedSliceImpl:t9,stringNGramsImpl:n9,stringSplitImpl:r9,stringToHashBucketFastImpl:s9,subImpl:o9,tileImpl:i9,topKImpl:l9,transposeImpl:UR,uniqueImpl:c9},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */PB("cpu",()=>new z2,1);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const u9=An(V0,t=>t>=0?t:Math.exp(t)-1),gye={kernelName:V0,backendName:"cpu",kernelFunc:u9};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function d9(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{alpha:o}=r;wt([s],"leakyRelu");const i=Te(s.shape),a=n.data.get(s.dataId).values,l=Ss("float32",i);for(let c=0;c<a.length;c++)l[c]=a[c]<0?o*a[c]:a[c];return n.makeTensorInfo(s.shape,"float32",l)}const xye={kernelName:Sv,backendName:"cpu",kernelFunc:d9};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yye=_r((t,e)=>t<0?e*t:t);function f9(t){const{inputs:e,backend:n}=t,{x:r,alpha:s}=e;wt([r,s],"prelu");const o=n.data.get(r.dataId).values,i=n.data.get(s.dataId).values,[a,l]=yye(r.shape,s.shape,o,i,"float32");return n.makeTensorInfo(l,"float32",a)}const bye={kernelName:Vv,backendName:"cpu",kernelFunc:f9};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const h9=An(a1,t=>Math.max(0,t)),wye={kernelName:a1,backendName:"cpu",kernelFunc:h9};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const p9=An(l1,t=>Math.min(Math.max(0,t),6)),vye={kernelName:l1,backendName:"cpu",kernelFunc:p9};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qb(t,e,n,r,s){if(n==="linear")return Il({inputs:{x:e},backend:t});if(n==="relu")return h9({inputs:{x:e},backend:t});if(n==="elu")return u9({inputs:{x:e},backend:t});if(n==="relu6")return p9({inputs:{x:e},backend:t});if(n==="prelu")return f9({inputs:{x:e,alpha:r},backend:t});if(n==="leakyrelu")return d9({inputs:{x:e},backend:t,attrs:{alpha:s}});if(n==="sigmoid")return KV({inputs:{x:e},backend:t});throw new Error(`Activation ${n} has not been implemented for the CPU backend.`)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qn(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{shape:o}=r,i=Te(s.shape),a=aB(o,i),l=Te(a);Y(i===l,()=>`The new shape (${a}) has ${l} elements and the old shape (${s.shape}) has ${i} elements. The new shape and old shape must have the same number of elements.`),n.incRef(s.dataId);const c=n.data.get(s.dataId);if(c.complexTensorInfos!=null){const d=c.complexTensorInfos.real,f=c.complexTensorInfos.imag;d.shape=a,f.shape=a}return{dataId:s.dataId,shape:a,dtype:s.dtype}}const Cye={kernelName:Uv,backendName:"cpu",kernelFunc:qn};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function m9(t){const{inputs:e,backend:n,attrs:r}=t,{a:s,b:o}=e,{transposeA:i,transposeB:a}=r;wt([s,o],"matMul");const l=s.shape.length,c=o.shape.length,d=i?s.shape[l-2]:s.shape[l-1],f=a?o.shape[c-1]:o.shape[c-2],p=i?s.shape[l-1]:s.shape[l-2],g=a?o.shape[c-2]:o.shape[c-1],x=s.shape.slice(0,-2),b=o.shape.slice(0,-2),w=Te(x),C=Te(b),k=jt(s.shape.slice(0,-2),o.shape.slice(0,-2)).concat([p,g]);Y(d===f,()=>`Error in matMul: inner shapes (${d}) and (${f}) of Tensors with shapes ${s.shape} and ${o.shape} and transposeA=${i} and transposeB=${a} must match.`);const I=i?[w,d,p]:[w,p,d],R=a?[C,g,f]:[C,f,g],$=qn({inputs:{x:s},backend:n,attrs:{shape:I}}),O=qn({inputs:{x:o},backend:n,attrs:{shape:R}}),F=i?$.shape[1]:$.shape[2],M=i?$.shape[2]:$.shape[1],_=a?O.shape[1]:O.shape[2],V=Math.max(w,C),B=n.data.get($.dataId).values,W=n.data.get(O.dataId).values,q=Et($.shape),j=Et(O.shape),[G,Z,J]=i?[q[0],1,q[1]]:[q[0],q[1],1],[X,ee,ne]=a?[1,j[1],j[0]]:[j[1],1,j[0]],oe=M*_,ye=Gt([V,M,_],$.dtype),ge=ye.values,ve=n.blockSize;for(let he=0;he<V;he++){const Me=he%w,ze=he%C;for(let Oe=0;Oe<M;Oe+=ve){const Ie=Math.min(Oe+ve,M);for(let me=0;me<_;me+=ve){const ke=Math.min(me+ve,_);for(let pe=0;pe<F;pe+=ve){const Pe=Math.min(pe+ve,F);for(let Ve=Oe;Ve<Ie;Ve++)for(let Fe=me;Fe<ke;Fe++){let Be=0;for(let be=pe;be<Pe;be++){const je=B[Me*G+Ve*Z+be*J],Se=W[be*X+Fe*ee+ze*ne];Be+=je*Se}ge[he*oe+(Ve*_+Fe)]+=Be}}}}}return n.disposeIntermediateTensorInfo($),n.disposeIntermediateTensorInfo(O),n.makeTensorInfo(k,ye.dtype,ye.values)}const Sye={kernelName:av,backendName:"cpu",kernelFunc:m9};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nye(t){const{inputs:e,backend:n,attrs:r}=t,{a:s,b:o,bias:i,preluActivationWeights:a}=e,{transposeA:l,transposeB:c,activation:d,leakyreluAlpha:f}=r;let p,g,x;const b=[];p=m9({inputs:{a:s,b:o},attrs:{transposeA:l,transposeB:c},backend:n}),i&&(g=ep({inputs:{a:p,b:i},backend:n}),b.push(p),p=g),d&&(x=Qb(n,p,d,a,f),b.push(p),p=x);for(const C of b)n.disposeIntermediateTensorInfo(C);return p}const Eye={kernelName:Rb,backendName:"cpu",kernelFunc:Nye};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Iye=An(A0,t=>Math.acos(t)),kye={kernelName:A0,backendName:"cpu",kernelFunc:Iye};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Tye=An(R0,t=>Math.acosh(t)),Aye={kernelName:R0,backendName:"cpu",kernelFunc:Tye};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rye(t){const{inputs:e,backend:n}=t,r=e;wt(e,"addN");const s=r.map(a=>n.data.get(a.dataId).values),o=Gt(r[0].shape,r[0].dtype),i=o.values;for(let a=0;a<r.length;a++){const l=s[a];for(let c=0;c<i.length;c++)i[c]+=l[c]}return n.makeTensorInfo(o.shape,o.dtype,o.values)}const Dye={kernelName:nv,backendName:"cpu",kernelFunc:Rye};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $ye(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:o,keepDims:i}=r;wt(s,"all");const a=Zt(o,s.shape);let l=a;const c=fr(l,s.shape.length);let d=s;c!=null&&(d=wo({inputs:{x:s},backend:n,attrs:{perm:c}}),l=$r(l.length,s.shape.length)),Is("all",l,d.shape.length);const[f,p]=ms(d.shape,l),g=Te(p),x=Vs(Te(f),d.dtype),b=n.data.get(d.dataId).values;for(let C=0;C<x.length;++C){const N=C*g;let k=b[N];for(let I=0;I<g;++I){const R=b[N+I];k=k&&R}x[C]=k}c!=null&&n.disposeIntermediateTensorInfo(d);const w=n.makeTensorInfo(f,d.dtype,x);if(i){const C=Dr(f,a),N=qn({inputs:{x:w},backend:n,attrs:{shape:C}});return n.disposeIntermediateTensorInfo(w),N}return w}const Oye={kernelName:BT,backendName:"cpu",kernelFunc:$ye};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _ye(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:o,keepDims:i}=r;wt(s,"any");const a=Zt(o,s.shape);let l=a;const c=fr(l,s.shape.length);let d=s;c!=null&&(d=wo({inputs:{x:s},backend:n,attrs:{perm:c}}),l=$r(l.length,s.shape.length)),Is("any",l,d.shape.length);const[f,p]=ms(d.shape,l),g=Te(p),x=Vs(Te(f),d.dtype),b=n.data.get(d.dataId).values;for(let C=0;C<x.length;++C){const N=C*g;let k=b[N];for(let I=0;I<g;++I){const R=b[N+I];k=k||R}x[C]=k}c!=null&&n.disposeIntermediateTensorInfo(d);const w=n.makeTensorInfo(f,d.dtype,x);if(i){const C=Dr(f,a),N=qn({inputs:{x:w},backend:n,attrs:{shape:C}});return n.disposeIntermediateTensorInfo(w),N}return w}const Pye={kernelName:jT,backendName:"cpu",kernelFunc:_ye};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fye(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:o}=r;wt(s,"argMax");let i=Zt(o,s.shape);const a=fr(i,s.shape.length);let l=s;const c=[];a!=null&&(l=wo({inputs:{x:s},backend:n,attrs:{perm:a}}),c.push(l),i=$r(i.length,l.shape.length)),i=[i[0]],Is("argMax",i,l.shape.length);const[d,f]=ms(l.shape,i),p=Te(d),g=Vs(p,"int32"),x=Te(f),b=n.data.get(l.dataId).values;for(let w=0;w<g.length;++w){const C=w*x;let N=b[C],k=0;for(let I=0;I<x;++I){const R=b[C+I];R>N&&(N=R,k=I)}g[w]=k}return c.forEach(w=>n.disposeIntermediateTensorInfo(w)),n.makeTensorInfo(d,"int32",g)}const Mye={kernelName:rv,backendName:"cpu",kernelFunc:Fye};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lye(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:o}=r;wt(s,"argMin");let i=Zt(o,s.shape);const a=fr(i,s.shape.length);let l=s;const c=[];a!=null&&(l=wo({inputs:{x:s},backend:n,attrs:{perm:a}}),c.push(l),i=$r(i.length,l.shape.length)),i=[i[0]],Is("argMin",i,l.shape.length);const[d,f]=ms(l.shape,i),p=Te(d),g=Vs(p,"int32"),x=Te(f),b=n.data.get(l.dataId).values;for(let w=0;w<g.length;++w){const C=w*x;let N=b[C],k=0;for(let I=0;I<x;++I){const R=b[C+I];R<N&&(N=R,k=I)}g[w]=k}return c.forEach(w=>n.disposeIntermediateTensorInfo(w)),n.makeTensorInfo(d,"int32",g)}const Bye={kernelName:sv,backendName:"cpu",kernelFunc:Lye};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jye=An(D0,t=>Math.asin(t)),zye={kernelName:D0,backendName:"cpu",kernelFunc:jye};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Vye=An($0,t=>Math.asinh(t)),Wye={kernelName:$0,backendName:"cpu",kernelFunc:Vye};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Uye=An(O0,t=>Math.atan(t)),Hye={kernelName:O0,backendName:"cpu",kernelFunc:Uye};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Gye=_r((t,e)=>Math.atan2(t,e)),qye=ns(P0,Gye),Xye={kernelName:P0,backendName:"cpu",kernelFunc:qye};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Kye=An(_0,t=>Math.atanh(t)),Yye={kernelName:_0,backendName:"cpu",kernelFunc:Kye};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qR(t,e,n,r,s,o){const i=s.strideHeight,a=s.strideWidth,l=s.dilationHeight,c=s.dilationWidth,d=s.effectiveFilterHeight,f=s.effectiveFilterWidth,p=s.padInfo.top,g=s.padInfo.left,x=o==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,b=Gt(s.outShape,n),w=b.values,C=s.outShape[1]*s.outShape[2]*s.outShape[3],N=s.outShape[2]*s.outShape[3],k=s.outShape[3];for(let I=0;I<s.batchSize;++I){const R=I*C,$=I*r[0];for(let O=0;O<s.inChannels;++O)for(let F=0;F<s.outHeight;++F){const M=F*i-p,_=Math.max(0,M),V=Math.min(s.inHeight,d+M),B=R+F*N;for(let W=0;W<s.outWidth;++W){const q=W*a-g,j=Math.max(0,q),G=Math.min(s.inWidth,f+q);let Z=x,J=0,X=0;for(let ne=_;ne<V;ne+=l){const oe=$+ne*r[1];for(let ye=j;ye<G;ye+=c){const ge=oe+ye*r[2],ve=t[ge+O];o==="max"&&ve>Z?Z=ve:o==="avg"&&(J+=ve,X++)}if(isNaN(Z))break}const ee=B+W*k+O;w[ee]=o==="avg"?J/X:Z}}}return b}function g9(t,e,n,r,s=!1,o=!1){const i=Gt(r.outShape,"int32"),a=r.strideHeight,l=r.strideWidth,c=r.dilationHeight,d=r.dilationWidth,f=r.effectiveFilterHeight,p=r.effectiveFilterWidth,g=r.padInfo.top,x=r.padInfo.left,b=Gt(e,n,t);for(let w=0;w<r.batchSize;++w)for(let C=0;C<r.inChannels;++C)for(let N=0;N<r.outHeight;++N){const k=N*a-g;let I=k;for(;I<0;)I+=c;const R=Math.min(r.inHeight,f+k);for(let $=0;$<r.outWidth;++$){const O=$*l-x;let F=O;for(;F<0;)F+=d;const M=Math.min(r.inWidth,p+O);let _=Number.NEGATIVE_INFINITY,V=-1;for(let B=I;B<R;B+=c){const W=B-k;for(let q=F;q<M;q+=d){const j=q-O,G=b.get(w,B,q,C);G>_&&(_=G,s?V=o?((w*r.inHeight+B)*r.inWidth+q)*r.inChannels+C:(B*r.inWidth+q)*r.inChannels+C:V=W*p+j)}}i.set(V,w,N,$,C)}}return i}function x9(t,e,n,r,s,o){const i=s.strideDepth,a=s.strideHeight,l=s.strideWidth,c=s.dilationDepth,d=s.dilationHeight,f=s.dilationWidth,p=s.effectiveFilterDepth,g=s.effectiveFilterHeight,x=s.effectiveFilterWidth,b=s.padInfo.front,w=s.padInfo.top,C=s.padInfo.left,N=o==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,k=Gt(s.outShape,n),I=k.values,R=s.outShape[1]*s.outShape[2]*s.outShape[3]*s.outShape[4],$=s.outShape[2]*s.outShape[3]*s.outShape[4],O=s.outShape[3]*s.outShape[4],F=s.outShape[4];for(let M=0;M<s.batchSize;++M){const _=M*R,V=M*r[0];for(let B=0;B<s.inChannels;++B)for(let W=0;W<s.outDepth;++W){const q=W*i-b;let j=q;for(;j<0;)j+=c;const G=Math.min(s.inDepth,p+q),Z=_+W*$;for(let J=0;J<s.outHeight;++J){const X=J*a-w;let ee=X;for(;ee<0;)ee+=d;const ne=Math.min(s.inHeight,g+X),oe=Z+J*O;for(let ye=0;ye<s.outWidth;++ye){const ge=ye*l-C;let ve=ge;for(;ve<0;)ve+=f;const he=Math.min(s.inWidth,x+ge),Me=oe+ye*F;let ze=N,Oe=0,Ie=0;for(let ke=j;ke<G;ke+=c){const pe=V+ke*r[1];for(let Pe=ee;Pe<ne;Pe+=d){const Ve=pe+Pe*r[2];for(let Fe=ve;Fe<he;Fe+=f){const Be=Ve+Fe*r[3],be=t[Be+B];if(o==="max"&&be>ze?ze=be:o==="avg"&&(Oe+=be,Ie++),isNaN(ze))break}if(isNaN(ze))break}if(isNaN(ze))break}const me=Me+B;I[me]=o==="avg"?Oe/Math.max(Ie,1):ze}}}}return k}function Zye(t,e){const n=Gt(e.outShape,"int32"),r=e.strideDepth,s=e.strideHeight,o=e.strideWidth,i=e.dilationDepth,a=e.dilationHeight,l=e.dilationWidth,c=e.effectiveFilterDepth,d=e.effectiveFilterHeight,f=e.effectiveFilterWidth,p=e.padInfo.front,g=e.padInfo.top,x=e.padInfo.left;for(let b=0;b<e.batchSize;++b)for(let w=0;w<e.inChannels;++w)for(let C=0;C<e.outDepth;++C){const N=C*r-p;let k=N;for(;k<0;)k+=i;const I=Math.min(e.inDepth,c+N);for(let R=0;R<e.outHeight;++R){const $=R*s-g;let O=$;for(;O<0;)O+=a;const F=Math.min(e.inHeight,d+$);for(let M=0;M<e.outWidth;++M){const _=M*o-x;let V=_;for(;V<0;)V+=l;const B=Math.min(e.inWidth,f+_);let W=Number.NEGATIVE_INFINITY,q=-1;for(let j=k;j<I;j+=i){const G=j-N;for(let Z=O;Z<F;Z+=a){const J=Z-$;for(let X=V;X<B;X+=l){const ee=X-_,ne=t.get(b,j,Z,X,w);ne>=W&&(W=ne,q=G*d*f+J*d+ee)}}}n.set(q,b,C,R,M,w)}}}return n}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qye(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e;wt(s,"avgPool");const{filterSize:o,strides:i,pad:a,dimRoundingMode:l}=r,c=1;Y(Es(i,c),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${i} and dilations '${c}'`);const d=ia(s.shape,o,i,c,a,l);let f;if(d.filterWidth===1&&d.filterHeight===1&&nn(d.inShape,d.outShape))f=Il({inputs:{x:s},backend:n});else{const p=n.data.get(s.dataId).values,g=Et(s.shape),x=qR(p,s.shape,s.dtype,g,d,"avg");f=n.makeTensorInfo(d.outShape,s.dtype,x.values)}return f}const Jye={kernelName:ov,backendName:"cpu",kernelFunc:Qye};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ebe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{filterSize:o,strides:i,pad:a,dimRoundingMode:l,dataFormat:c}=r;wt(s,"avgPool3d");const d=pc(s.shape,o,i,1,a,l,c),f=n.data.get(s.dataId).values,p=x9(f,s.shape,s.dtype,Et(s.shape),d,"avg");return n.makeTensorInfo(p.shape,"float32",p.values)}const tbe={kernelName:iv,backendName:"cpu",kernelFunc:ebe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nbe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,input:o}=e,{filterSize:i,strides:a,pad:l,dimRoundingMode:c}=r;wt([s,o],"avgPool3DGrad");const d=pc(o.shape,i,a,1,l,c),f=d.strideDepth,p=d.strideHeight,g=d.strideWidth,x=d.filterDepth,b=d.filterHeight,w=d.filterWidth,C=d.dilationDepth,N=d.dilationHeight,k=d.dilationWidth,I=d.effectiveFilterDepth,R=d.effectiveFilterHeight,$=d.effectiveFilterWidth,O=I-1-d.padInfo.front,F=$-1-d.padInfo.left,M=R-1-d.padInfo.top,_=Gt(o.shape,"float32"),V=1/(x*b*w),B=n.bufferSync(s);for(let W=0;W<d.batchSize;++W)for(let q=0;q<d.inChannels;++q)for(let j=0;j<d.inDepth;++j)for(let G=0;G<d.inHeight;++G)for(let Z=0;Z<d.inWidth;++Z){const J=j-O,X=G-M,ee=Z-F;let ne=0;for(let oe=0;oe<I;oe+=C){const ye=(J+oe)/f;if(!(ye<0||ye>=d.outDepth||Math.floor(ye)!==ye))for(let ge=0;ge<R;ge+=N){const ve=(X+ge)/p;if(!(ve<0||ve>=d.outHeight||Math.floor(ve)!==ve))for(let he=0;he<$;he+=k){const Me=(ee+he)/g;if(Me<0||Me>=d.outWidth||Math.floor(Me)!==Me)continue;const ze=B.get(W,ye,ve,Me,q);ne+=ze}}}_.set(ne*V,W,j,G,Z,q)}return n.makeTensorInfo(_.shape,_.dtype,_.values)}const rbe={kernelName:VT,backendName:"cpu",kernelFunc:nbe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sbe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,input:o}=e,i=o;wt([s,o],"avgPoolGrad");const{filterSize:a,strides:l,pad:c}=r,d=ia(i.shape,a,l,1,c),f=d.strideHeight,p=d.strideWidth,g=d.filterHeight,x=d.filterWidth,b=d.dilationHeight,w=d.dilationWidth,C=d.effectiveFilterHeight,N=d.effectiveFilterWidth,k=N-1-d.padInfo.left,I=C-1-d.padInfo.top,R=Gt(i.shape,"float32"),$=1/(g*x),O=n.data.get(s.dataId).values,F=Gt(s.shape,"float32",O);for(let M=0;M<d.batchSize;++M)for(let _=0;_<d.inChannels;++_)for(let V=0;V<d.inHeight;++V)for(let B=0;B<d.inWidth;++B){const W=V-I,q=B-k;let j=0;for(let G=0;G<C;G+=b){const Z=(W+G)/f;if(!(Z<0||Z>=d.outHeight||Math.floor(Z)!==Z))for(let J=0;J<N;J+=w){const X=(q+J)/p;if(X<0||X>=d.outWidth||Math.floor(X)!==X)continue;const ee=F.get(M,Z,X,_);j+=ee}}R.set(j*$,M,V,B,_)}return n.makeTensorInfo(R.shape,R.dtype,R.values)}const obe={kernelName:zT,backendName:"cpu",kernelFunc:sbe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ibe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,scale:o,offset:i,mean:a,variance:l}=e;Y(a.shape.length===l.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),Y(i==null||a.shape.length===i.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),Y(o==null||a.shape.length===o.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks."),wt([s,a,l,o,i],"batchNorm");let{varianceEpsilon:c}=r;c==null&&(c=.001);const d=n.data.get(s.dataId).values,f=n.data.get(a.dataId).values,p=n.data.get(l.dataId).values,g=o?n.data.get(o.dataId).values:new Float32Array([1]),x=i?n.data.get(i.dataId).values:new Float32Array([0]),b=new Float32Array(d.length),w=x.length,C=g.length,N=p.length,k=f.length;let I=0,R=0,$=0,O=0;for(let F=0;F<d.length;++F)b[F]=x[I++]+(d[F]-f[R++])*g[$++]/Math.sqrt(p[O++]+c),I>=w&&(I=0),R>=k&&(R=0),$>=C&&($=0),O>=N&&(O=0);return n.makeTensorInfo(s.shape,s.dtype,b)}const abe={kernelName:wv,backendName:"cpu",kernelFunc:ibe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lbe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{blockShape:o,crops:i}=r;wt([s],"batchToSpaceND");const a=o.reduce((C,N)=>C*N),l=$1(s.shape,o,a),c=O1(l.length,o.length),d=_1(s.shape,o,a),f=Y3(i,o.length),p=Z3(d,i,o.length),g=qn({inputs:{x:s},backend:n,attrs:{shape:l}}),x=wo({inputs:{x:g},backend:n,attrs:{perm:c}}),b=qn({inputs:{x},backend:n,attrs:{shape:d}}),w=Zd({inputs:{x:b},backend:n,attrs:{begin:f,size:p}});return n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(x),n.disposeIntermediateTensorInfo(b),w}const cbe={kernelName:lv,backendName:"cpu",kernelFunc:lbe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ube(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,weights:o}=e,{size:i}=r,a=n.data.get(s.dataId).values,l=n.data.get(o.dataId).values,c=VR(a,l,o.dtype,o.shape,i);return n.makeTensorInfo([i],o.dtype,c)}const dbe={kernelName:WT,backendName:"cpu",kernelFunc:ube};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fbe(t){const{inputs:e,backend:n}=t,{s0:r,s1:s}=e,o=n.data.get(r.dataId).values,i=n.data.get(s.dataId).values,a=jt(Array.from(o),Array.from(i));return n.makeTensorInfo([a.length],"int32",Int32Array.from(a))}const hbe={kernelName:UT,backendName:"cpu",kernelFunc:fbe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pbe=An(L0,(t,e)=>{const n=e;return t>n.clipValueMax?n.clipValueMax:t<n.clipValueMin?n.clipValueMin:t}),mbe={kernelName:L0,backendName:"cpu",kernelFunc:pbe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gbe=t=>{const{x:e}=t.inputs,n=t.backend,r=new Float32Array(Te(e.shape)),s=n.data.get(e.dataId),o=s.complexTensorInfos.real,i=s.complexTensorInfos.imag,a=n.data.get(o.dataId).values,l=n.data.get(i.dataId).values;for(let c=0;c<a.length;c++){const d=a[c],f=l[c];r[c]=Math.hypot(d,f)}return n.makeOutput(r,e.shape,"float32")},xbe={kernelName:uv,backendName:"cpu",kernelFunc:gbe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tp(t){const{inputs:e,backend:n}=t,{input:r}=e,s=n.data.get(r.dataId).complexTensorInfos.imag,o=n.data.get(s.dataId).values;return n.makeTensorInfo(s.shape,s.dtype,o)}const ybe={kernelName:cA,backendName:"cpu",kernelFunc:tp};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function np(t){const{inputs:e,backend:n,attrs:r}=t,{axis:s}=r,o=Zt(s,e[0].shape)[0],i=e.map(b=>b.shape);q3(i,o);let a=xl(e.map(b=>b.shape),o);if(Te(a)===0)return n.makeTensorInfo(a,e[0].dtype,[]);const l=e.filter(b=>Te(b.shape)>0);if(l.length===1)return Il({inputs:{x:l[0]},backend:n});if(l[0].dtype==="complex64"){const b=l.map(I=>Yd({inputs:{input:I},backend:n})),w=l.map(I=>tp({inputs:{input:I},backend:n})),C=np({inputs:b,backend:n,attrs:{axis:o}}),N=np({inputs:w,backend:n,attrs:{axis:o}}),k=Mo({inputs:{real:C,imag:N},backend:n});return b.forEach(I=>n.disposeIntermediateTensorInfo(I)),w.forEach(I=>n.disposeIntermediateTensorInfo(I)),n.disposeIntermediateTensorInfo(C),n.disposeIntermediateTensorInfo(N),k}const c=l.map(b=>{const C=[-1,Te(b.shape.slice(o))];return qn({inputs:{x:b},backend:n,attrs:{shape:C}})}),d=c.map(b=>({vals:n.data.get(b.dataId).values,shape:b.shape}));a=xl(c.map(b=>b.shape),1);const f=c[0].shape[0]===1,p=CV(d,a,e[0].dtype,f),g=xl(l.map(b=>b.shape),o),x=n.makeTensorInfo(g,e[0].dtype,p);return c.forEach(b=>n.disposeIntermediateTensorInfo(b)),x}const bbe={kernelName:dv,backendName:"cpu",kernelFunc:np};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function y9(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:o}=e,{strides:i,pad:a,dataFormat:l,dilations:c,dimRoundingMode:d}=r;wt([s,o],"conv2d");const f=mc(l),p=ps(s.shape,o.shape,i,c,a,d,!1,f),g=p.filterHeight,x=p.filterWidth,b=p.dilationHeight,w=p.dilationWidth,C=p.padInfo.left,N=p.padInfo.top,k=p.dataFormat==="channelsLast",I=new Zr(p.outShape,s.dtype),R=Et(s.shape),$=Et(o.shape),O=R[0],F=k?R[1]:R[2],M=k?R[2]:1,_=k?1:R[1],V=I.strides[0],B=k?I.strides[1]:I.strides[2],W=k?I.strides[2]:1,q=k?1:I.strides[1],j=n.data.get(s.dataId).values,G=n.data.get(o.dataId).values,Z=I.values;for(let J=0;J<p.batchSize;++J){const X=J*O,ee=J*V;for(let ne=0;ne<p.outHeight;++ne){const oe=ee+ne*B,ye=ne*p.strideHeight-N;for(let ge=0;ge<g;++ge){const ve=ye+ge*b;if(ve<0||ve>=p.inHeight)continue;const he=ge*$[0],Me=X+ve*F;for(let ze=0;ze<p.outWidth;++ze){const Oe=oe+ze*W,Ie=ze*p.strideWidth-C;for(let me=0;me<x;++me){const ke=Ie+me*w;if(ke<0||ke>=p.inWidth)continue;const pe=he+me*$[1],Pe=Me+ke*M;let Ve=pe;for(let Fe=0;Fe<p.inChannels;++Fe){const Be=j[Pe+Fe*_];for(let be=0;be<p.outChannels;++be)Z[Oe+be*q]+=Be*G[Ve+be];Ve+=p.outChannels}}}}}}return n.makeTensorInfo(I.shape,I.dtype,Z)}const wbe={kernelName:fv,backendName:"cpu",kernelFunc:y9};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vbe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,dy:o}=e,{strides:i,pad:a,dataFormat:l,dimRoundingMode:c,filterShape:d}=r;wt([s,o],"conv2dBackpropFilter");const f=mc(l),p=ps(s.shape,d,i,1,a,c,!1,f),{strideHeight:g,strideWidth:x,filterHeight:b,filterWidth:w}=p,C=p.dataFormat==="channelsLast",N=new Zr(p.filterShape,"float32"),k=p.padInfo.left,I=p.padInfo.top,R=n.data.get(s.dataId).values,$=n.data.get(o.dataId).values,O=new Zr(s.shape,s.dtype,R),F=new Zr(o.shape,o.dtype,$);for(let M=0;M<b;++M){const _=Math.max(0,Math.ceil((I-M)/g)),V=Math.min(p.outHeight,(p.inHeight+I-M)/g);for(let B=0;B<w;++B){const W=Math.max(0,Math.ceil((k-B)/x)),q=Math.min(p.outWidth,(p.inWidth+k-B)/x);for(let j=0;j<p.inChannels;++j)for(let G=0;G<p.outChannels;++G){let Z=0;for(let J=0;J<p.batchSize;++J)for(let X=_;X<V;++X){const ee=M+X*g-I;for(let ne=W;ne<q;++ne){const oe=B+ne*x-k;C?Z+=O.get(J,ee,oe,j)*F.get(J,X,ne,G):Z+=O.get(J,j,ee,oe)*F.get(J,G,X,ne)}}N.set(Z,M,B,j,G)}}}return n.makeTensorInfo(N.shape,N.dtype,N.values)}const Cbe={kernelName:GT,backendName:"cpu",kernelFunc:vbe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Sbe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,filter:o}=e,{inputShape:i,strides:a,pad:l,dataFormat:c,dimRoundingMode:d}=r;wt([s,o],"conv2dBackpropInput");const f=Et(o.shape),p=Et(s.shape);let g=mc(c);const x=ps(i,o.shape,a,1,l,d,!1,g),b=new Zr(x.inShape,"float32"),w=b.values,C=n.data.get(s.dataId).values,N=n.data.get(o.dataId).values,[k,I,R]=f,{batchSize:$,filterHeight:O,filterWidth:F,inChannels:M,inHeight:_,inWidth:V,outChannels:B,outHeight:W,outWidth:q,strideHeight:j,strideWidth:G}=x;g=x.dataFormat;const Z=O-1-x.padInfo.top,J=F-1-x.padInfo.left,X=g==="channelsLast",ee=b.strides[0],ne=X?b.strides[1]:b.strides[2],oe=X?b.strides[2]:1,ye=X?1:b.strides[1],ge=p[0],ve=X?p[1]:p[2],he=X?p[2]:1,Me=X?1:p[1];for(let ze=0;ze<$;++ze)for(let Oe=0;Oe<M;++Oe)for(let Ie=0;Ie<_;++Ie){const me=Ie-Z,ke=Math.max(0,Math.ceil(me/j)),pe=Math.min(W,(O+me)/j);for(let Pe=0;Pe<V;++Pe){const Ve=Pe-J,Fe=Math.max(0,Math.ceil(Ve/G)),Be=Math.min(q,(F+Ve)/G);let be=0;for(let Se=ke;Se<pe;++Se){const ue=Se*j-me;for(let He=Fe;He<Be;++He){const It=He*G-Ve,ot=ge*ze+ve*Se+he*He,Vt=k*(O-1-ue)+I*(F-1-It)+R*Oe;for(let Xt=0;Xt<B;++Xt){const Ln=C[ot+Me*Xt],hn=N[Vt+Xt];be+=Ln*hn}}}const je=ee*ze+ne*Ie+oe*Pe+ye*Oe;w[je]=be}}return n.makeTensorInfo(b.shape,b.dtype,b.values)}const Nbe={kernelName:hv,backendName:"cpu",kernelFunc:Sbe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ebe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:o}=e,{strides:i,pad:a,dilations:l}=r;wt([s,o],"conv3d");const c=$u(s.shape,o.shape,i,l,a),{filterDepth:d,filterHeight:f,filterWidth:p,dilationDepth:g,dilationHeight:x,dilationWidth:b,padInfo:w}=c,C=w.front,N=w.left,k=w.top,I=new Zr(c.outShape,s.dtype),R=n.data.get(s.dataId).values,$=n.data.get(o.dataId).values,O=I.values,F=Et(s.shape),M=Et(o.shape);for(let _=0;_<c.batchSize;++_){const V=_*F[0],B=_*I.strides[0];for(let W=0;W<c.outDepth;++W){const q=B+W*I.strides[1],j=W*c.strideDepth-C;for(let G=0;G<d;++G){const Z=j+G*g;if(Z<0||Z>=c.inDepth)continue;const J=G*M[0],X=V+Z*F[1];for(let ee=0;ee<c.outHeight;++ee){const ne=q+ee*I.strides[2],oe=ee*c.strideHeight-k;for(let ye=0;ye<f;++ye){const ge=oe+ye*x;if(ge<0||ge>=c.inHeight)continue;const ve=J+ye*M[1],he=X+ge*F[2];for(let Me=0;Me<c.outWidth;++Me){const ze=ne+Me*c.outChannels,Oe=Me*c.strideWidth-N;for(let Ie=0;Ie<p;++Ie){const me=Oe+Ie*b;if(me<0||me>=c.inWidth)continue;const ke=ve+Ie*M[2],pe=he+me*c.inChannels;let Pe=ke;for(let Ve=0;Ve<c.inChannels;++Ve){const Fe=R[pe+Ve];for(let Be=0;Be<c.outChannels;++Be)O[ze+Be]+=Fe*$[Pe+Be];Pe+=c.outChannels}}}}}}}}return n.makeTensorInfo(I.shape,I.dtype,I.values)}const Ibe={kernelName:pv,backendName:"cpu",kernelFunc:Ebe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kbe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,dy:o}=e,{strides:i,pad:a,filterShape:l}=r;wt([s,o],"conv3dBackpropFilterV2");const c=Et(s.shape),d=Et(o.shape),f=$u(s.shape,l,i,1,a),p=f.strideDepth,g=f.strideHeight,x=f.strideWidth,b=f.filterDepth,w=f.filterHeight,C=f.filterWidth,N=new Zr(f.filterShape,"float32"),k=N.values,[I,R,$,O]=N.strides,F=n.data.get(o.dataId).values,[M,_,V,B]=d,W=n.data.get(s.dataId).values,[q,j,G,Z]=c,J=f.padInfo.front,X=f.padInfo.left,ee=f.padInfo.top;for(let ne=0;ne<b;++ne){const oe=Math.max(0,Math.ceil((J-ne)/p)),ye=Math.min(f.outDepth,(f.inDepth+J-ne)/p),ge=ne*I;for(let ve=0;ve<w;++ve){const he=Math.max(0,Math.ceil((ee-ve)/g)),Me=Math.min(f.outHeight,(f.inHeight+ee-ve)/g),ze=ve*R+ge;for(let Oe=0;Oe<C;++Oe){const Ie=Math.max(0,Math.ceil((X-Oe)/x)),me=Math.min(f.outWidth,(f.inWidth+X-Oe)/x),ke=Oe*$+ze;for(let pe=0;pe<f.inChannels;++pe){const Pe=pe*O+ke;for(let Ve=0;Ve<f.outChannels;++Ve){let Fe=0;for(let Be=0;Be<f.batchSize;++Be){const be=Be*q,je=Be*M;for(let Se=oe;Se<ye;++Se){const He=(ne+Se*p-J)*j+be,It=Se*_+je;for(let ot=he;ot<Me;++ot){const Xt=(ve+ot*g-ee)*G+He,Ln=ot*V+It;for(let hn=Ie;hn<me;++hn){const Ot=(Oe+hn*x-X)*Z+Xt,Ct=hn*B+Ln;Fe+=W[Ot+pe]*F[Ct+Ve]}}}}k[Pe+Ve]=Fe}}}}}return n.makeTensorInfo(N.shape,N.dtype,N.values)}const Tbe={kernelName:qT,backendName:"cpu",kernelFunc:kbe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Abe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,filter:o}=e,{pad:i,strides:a,inputShape:l}=r;wt([s],"conv3dBackpropInputV2");const c=Et(s.shape),d=Et(o.shape),f=$u(l,o.shape,a,1,i),p=new Zr(f.inShape,"float32"),g=p.values,[x,b,w,C]=p.strides,N=n.data.get(s.dataId).values,[k,I,R,$]=c,O=n.data.get(o.dataId).values,[F,M,_,V]=d,{batchSize:B,filterDepth:W,filterHeight:q,filterWidth:j,inChannels:G,inDepth:Z,inHeight:J,inWidth:X,outChannels:ee,outDepth:ne,outHeight:oe,outWidth:ye,strideDepth:ge,strideHeight:ve,strideWidth:he}=f,Me=W-1-f.padInfo.front,ze=q-1-f.padInfo.top,Oe=j-1-f.padInfo.left;for(let Ie=0;Ie<B;++Ie)for(let me=0;me<G;++me)for(let ke=0;ke<Z;++ke){const pe=ke-Me,Pe=Math.max(0,Math.ceil(pe/ge)),Ve=Math.min(ne,(W+pe)/ge);for(let Fe=0;Fe<J;++Fe){const Be=Fe-ze,be=Math.max(0,Math.ceil(Be/ve)),je=Math.min(oe,(q+Be)/ve);for(let Se=0;Se<X;++Se){const ue=Se-Oe,He=Math.max(0,Math.ceil(ue/he)),It=Math.min(ye,(j+ue)/he);let ot=0;for(let Vt=Pe;Vt<Ve;++Vt){const Xt=Vt*ge-pe;for(let Ln=be;Ln<je;++Ln){const hn=Ln*ve-Be;for(let ft=He;ft<It;++ft){const Ot=ft*he-ue,Ct=k*Ie+I*Vt+R*Ln+$*ft,cn=F*(W-1-Xt)+M*(q-1-hn)+_*(j-1-Ot)+V*me;for(let Bt=0;Bt<ee;++Bt){const Xe=N[Ct+Bt],et=O[cn+Bt];ot+=Xe*et}}}}g[x*Ie+b*ke+w*Fe+C*Se+me]=ot}}}return n.makeTensorInfo(p.shape,p.dtype,p.values)}const Rbe={kernelName:XT,backendName:"cpu",kernelFunc:Abe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Dbe=An(B0,t=>Math.cos(t)),$be={kernelName:B0,backendName:"cpu",kernelFunc:Dbe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Obe=An(j0,t=>Math.cosh(t)),_be={kernelName:j0,backendName:"cpu",kernelFunc:Obe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pbe(t){const{inputs:e,backend:n,attrs:r}=t,{image:s,boxes:o,boxInd:i}=e,{cropSize:a,method:l,extrapolationValue:c}=r,[d,f,p,g]=s.shape,x=o.shape[0],[b,w]=a,C=Gt([x,b,w,g],"float32"),N=n.data.get(o.dataId).values,k=n.data.get(i.dataId).values,I=n.data.get(s.dataId).values,R=Et(s.shape),$=Et(C.shape);for(let O=0;O<x;O++){const F=O*4,M=N[F],_=N[F+1],V=N[F+2],B=N[F+3],W=k[O];if(W>=d)continue;const q=b>1?(V-M)*(f-1)/(b-1):0,j=w>1?(B-_)*(p-1)/(w-1):0;for(let G=0;G<b;G++){const Z=b>1?M*(f-1)+G*q:.5*(M+V)*(f-1);if(Z<0||Z>f-1){for(let J=0;J<w;J++)for(let X=0;X<g;X++){const ee=X+J*$[2]+G*$[1]+O*$[0];C.values[ee]=c}continue}if(l==="bilinear"){const J=Math.floor(Z),X=Math.ceil(Z),ee=Z-J;for(let ne=0;ne<w;ne++){const oe=w>1?_*(p-1)+ne*j:.5*(_+B)*(p-1);if(oe<0||oe>p-1){for(let he=0;he<g;he++){const Me=he+ne*$[2]+G*$[1]+O*$[0];C.values[Me]=c}continue}const ye=Math.floor(oe),ge=Math.ceil(oe),ve=oe-ye;for(let he=0;he<g;he++){let Me=he+ye*R[2]+J*R[1]+W*R[0];const ze=I[Me];Me=he+ge*R[2]+J*R[1]+W*R[0];const Oe=I[Me];Me=he+ye*R[2]+X*R[1]+W*R[0];const Ie=I[Me];Me=he+ge*R[2]+X*R[1]+W*R[0];const me=I[Me],ke=ze+(Oe-ze)*ve,pe=Ie+(me-Ie)*ve;Me=he+ne*$[2]+G*$[1]+O*$[0],C.values[Me]=ke+(pe-ke)*ee}}}else for(let J=0;J<w;++J){const X=w>1?_*(p-1)+J*j:.5*(_+B)*(p-1);if(X<0||X>p-1){for(let oe=0;oe<g;oe++){const ye=oe+J*$[2]+G*$[1]+O*$[0];C.values[ye]=c}continue}const ee=Math.round(X),ne=Math.round(Z);for(let oe=0;oe<g;oe++){const ye=oe+ee*R[2]+ne*R[1]+W*R[0],ge=oe+J*$[2]+G*$[1]+O*$[0];C.values[ge]=I[ye]}}}}return n.makeTensorInfo(C.shape,C.dtype,C.values)}const Fbe={kernelName:YT,backendName:"cpu",kernelFunc:Pbe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mbe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:o,exclusive:i,reverse:a}=r;wt(s,"cumprod");const l=fr([o],s.shape.length);let c=s;l!=null&&(c=wo({inputs:{x:s},backend:n,attrs:{perm:l}}));const d=$r(1,s.shape.length)[0];if(d!==c.shape.length-1)throw new Error(`backend.cumprod in CPU expects an inner-most axis=${c.shape.length-1} but got axis=${d}`);const f=Xo(c.dtype,"int32"),p=MT(Te(c.shape),f),g=n.data.get(c.dataId).values,x=c.shape[c.shape.length-1],b=a?(C,N)=>C+x-N-1:(C,N)=>C+N;for(let C=0;C<g.length;C+=x)for(let N=0;N<x;N++){const k=b(C,N);if(N===0)p[k]=i?1:g[k];else{const I=b(C,N-1);p[k]=i?g[I]*p[I]:g[k]*p[I]}}const w=n.makeTensorInfo(c.shape,f,p);if(l!=null){const C=Ou(l),N=wo({inputs:{x:w},backend:n,attrs:{perm:C}});return n.disposeIntermediateTensorInfo(w),n.disposeIntermediateTensorInfo(c),N}return w}const Lbe={kernelName:KT,backendName:"cpu",kernelFunc:Mbe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bbe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:o,exclusive:i,reverse:a}=r;wt(s,"cumsum");const l=fr([o],s.shape.length);let c=s;l!=null&&(c=wo({inputs:{x:s},backend:n,attrs:{perm:l}}));const d=$r(1,s.shape.length)[0];if(d!==c.shape.length-1)throw new Error(`backend.cumsum in CPU expects an inner-most axis=${c.shape.length-1} but got axis=${d}`);const f=Xo(c.dtype,"int32"),p=Vs(Te(c.shape),f),g=n.data.get(c.dataId).values,x=c.shape[c.shape.length-1],b=a?(C,N)=>C+x-N-1:(C,N)=>C+N;for(let C=0;C<g.length;C+=x)for(let N=0;N<x;N++){const k=b(C,N);if(N===0)p[k]=i?0:g[k];else{const I=b(C,N-1);p[k]=i?g[I]+p[I]:g[k]+p[I]}}const w=n.makeTensorInfo(c.shape,f,p);if(l!=null){const C=Ou(l),N=wo({inputs:{x:w},backend:n,attrs:{perm:C}});return n.disposeIntermediateTensorInfo(w),n.disposeIntermediateTensorInfo(c),N}return w}const jbe={kernelName:mv,backendName:"cpu",kernelFunc:Bbe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zbe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,weights:o}=e,{size:i,binaryOutput:a}=r;if(s.shape.length===1){const l=n.data.get(s.dataId).values,c=n.data.get(o.dataId).values,d=VR(l,c,o.dtype,o.shape,i);return n.makeTensorInfo([i],o.dtype,d)}else if(s.shape.length===2){const l=n.bufferSync(s),c=n.bufferSync(o),d=bV(l,c,i,a);return n.makeTensorInfo(d.shape,o.dtype,d.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${s.shape.length}.`)}const Vbe={kernelName:ZT,backendName:"cpu",kernelFunc:zbe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wbe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{blockSize:o,dataFormat:i}=r;Y(i==="NHWC",()=>`Only NHWC dataFormat supported on CPU for depthToSpace. Got ${i}`);const a=s.shape[0],l=s.shape[1],c=s.shape[2],d=s.shape[3],f=l*o,p=c*o,g=d/(o*o),x=n.data.get(s.dataId).values,b=new Float32Array(a*f*p*g);let w=0;for(let C=0;C<a;++C)for(let N=0;N<f;++N){const k=Math.floor(N/o),I=N%o;for(let R=0;R<p;++R){const $=Math.floor(R/o),O=R%o,F=(I*o+O)*g;for(let M=0;M<g;++M){const V=M+F+d*($+c*(k+l*C));b[w++]=x[V]}}}return n.makeTensorInfo([a,f,p,g],s.dtype,b)}const Ube={kernelName:QT,backendName:"cpu",kernelFunc:Wbe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function b9(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:o}=e,{strides:i,pad:a,dilations:l,dimRoundingMode:c}=r;wt([s,o],"depthwiseConv2DNative");const d=Et(s.shape),f=Et(o.shape);let p=l;p==null&&(p=[1,1]),Y(Es(i,p),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${i} and dilations '${p}'`);const g=ps(s.shape,o.shape,i,p,a,c,!0),{filterHeight:x,filterWidth:b,dilationHeight:w,dilationWidth:C,padInfo:N}=g,k=N.left,I=N.top,R=g.outChannels/g.inChannels,$=new Zr(g.outShape,s.dtype),O=n.data.get(s.dataId).values,F=n.data.get(o.dataId).values,M=$.values;for(let _=0;_<g.batchSize;++_){const V=_*d[0],B=_*$.strides[0];for(let W=0;W<g.outHeight;++W){const q=B+W*$.strides[1],j=W*g.strideHeight-I;for(let G=0;G<x;++G){const Z=j+G*w;if(Z<0||Z>=g.inHeight)continue;const J=G*f[0],X=V+Z*d[1];for(let ee=0;ee<g.outWidth;++ee){const ne=q+ee*$.strides[2],oe=ee*g.strideWidth-k;for(let ye=0;ye<b;++ye){const ge=oe+ye*C;if(ge<0||ge>=g.inWidth)continue;const ve=J+ye*f[1],he=X+ge*g.inChannels;let Me=ne,ze=ve;for(let Oe=0;Oe<g.inChannels;++Oe){const Ie=O[he+Oe];for(let me=0;me<R;++me)M[Me+me]+=Ie*F[ze+me];Me+=R,ze+=R}}}}}}return n.makeTensorInfo($.shape,$.dtype,$.values)}const Hbe={kernelName:gv,backendName:"cpu",kernelFunc:b9};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gbe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,dy:o}=e,{strides:i,dilations:a,pad:l,dimRoundingMode:c,filterShape:d}=r;wt([s,o],"depthwiseConv2dNativeBackpropFilter");const f=ps(s.shape,d,i,a,l,c,!0),{strideHeight:p,strideWidth:g,filterHeight:x,filterWidth:b}=f,w=new Zr(f.filterShape,"float32"),C=f.padInfo.left,N=f.padInfo.top,k=f.outChannels/f.inChannels,I=n.data.get(s.dataId).values,R=new Zr(s.shape,s.dtype,I),$=n.data.get(o.dataId).values,O=new Zr(o.shape,o.dtype,$);for(let F=0;F<x;++F){const M=Math.max(0,Math.ceil((N-F)/p)),_=Math.min(f.outHeight,(f.inHeight+N-F)/p);for(let V=0;V<b;++V){const B=Math.max(0,Math.ceil((C-V)/g)),W=Math.min(f.outWidth,(f.inWidth+C-V)/g);for(let q=0;q<f.outChannels;++q){const j=Math.trunc(q/k),G=q%k;let Z=0;for(let J=0;J<f.batchSize;++J)for(let X=M;X<_;++X){const ee=F+X*p-N;for(let ne=B;ne<W;++ne){const oe=V+ne*g-C;Z+=R.get(J,ee,oe,j)*O.get(J,X,ne,q)}}w.set(Z,F,V,j,G)}}}return n.makeTensorInfo(w.shape,w.dtype,w.values)}const qbe={kernelName:JT,backendName:"cpu",kernelFunc:Gbe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xbe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,filter:o}=e,{strides:i,dilations:a,pad:l,dimRoundingMode:c,inputShape:d}=r;wt([s,o],"depthwiseConv2DNativeBackpropInput");const f=Et(s.shape),p=Et(o.shape),g=ps(d,o.shape,i,a,l,c,!0),x=new Zr(g.inShape,"float32"),b=x.values,[w,C,N]=x.strides,k=n.data.get(s.dataId).values,[I,R,$]=f,O=n.data.get(o.dataId).values,[F,M,_]=p,{batchSize:V,filterHeight:B,filterWidth:W,inChannels:q,inHeight:j,inWidth:G,outChannels:Z,outHeight:J,outWidth:X,strideHeight:ee,strideWidth:ne}=g,oe=B-1-g.padInfo.top,ye=W-1-g.padInfo.left,ge=Z/q;for(let ve=0;ve<V;++ve)for(let he=0;he<q;++he)for(let Me=0;Me<j;++Me){const ze=Me-oe,Oe=Math.max(0,Math.ceil(ze/ee)),Ie=Math.min(J,(B+ze)/ee);for(let me=0;me<G;++me){const ke=me-ye,pe=Math.max(0,Math.ceil(ke/ne)),Pe=Math.min(X,(W+ke)/ne);let Ve=0;for(let Fe=Oe;Fe<Ie;++Fe){const Be=Fe*ee-ze;for(let be=pe;be<Pe;++be){const je=be*ne-ke,Se=I*ve+R*Fe+$*be,ue=F*(B-1-Be)+M*(W-1-je)+_*he;for(let He=0;He<ge;++He){const It=he*ge+He,ot=k[Se+It],Vt=O[ue+He];Ve+=ot*Vt}}}b[w*ve+C*Me+N*me+he]=Ve}}return n.makeTensorInfo(x.shape,x.dtype,x.values)}const Kbe={kernelName:eA,backendName:"cpu",kernelFunc:Xbe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ybe(t){const{inputs:e,backend:n}=t,{x:r}=e,s=Te(r.shape),o=n.data.get(r.dataId).values,i=Gt([s,s],r.dtype),a=i.values;for(let c=0;c<o.length;c++)a[c*s+c]=o[c];const l=[...r.shape,...r.shape];return n.makeTensorInfo(l,i.dtype,i.values)}const Zbe={kernelName:tA,backendName:"cpu",kernelFunc:Ybe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Qbe={kernelName:xv,backendName:"cpu",kernelFunc:({inputs:t,backend:e,attrs:n})=>{const{x:r,filter:s}=t,{strides:o,pad:i,dilations:a}=n,l=e,c=l.data.get(r.dataId).values,d=r.shape.length,f=l.data.get(s.dataId).values,p=s.shape.length,{batchSize:g,inHeight:x,inWidth:b,inChannels:w,outHeight:C,outWidth:N,padInfo:k,strideHeight:I,strideWidth:R,filterHeight:$,filterWidth:O,dilationHeight:F,dilationWidth:M,outShape:_}=E1(r.shape,s.shape,o,i,"NHWC",a),V=Te(_),B=_.length,W=Ar(r.dtype,V);for(let j=0;j<g;++j)for(let G=0;G<C;++G){const Z=G*I-k.top;for(let J=0;J<N;++J){const X=J*R-k.left;for(let ee=0;ee<w;++ee){let ne=Number.MIN_SAFE_INTEGER;for(let ye=0;ye<$;++ye){const ge=Z+ye*F;if(ge>=0&&ge<x)for(let ve=0;ve<O;++ve){const he=X+ve*M;if(he>=0&&he<b){const Me=gl([j,ge,he,ee],d,Et(r.shape)),ze=gl([ye,ve,ee],p,Et(s.shape)),Oe=c[Me]+f[ze];Oe>ne&&(ne=Oe)}}}const oe=gl([j,G,J,ee],B,Et(_));W[oe]=ne}}}return{dataId:l.write(df(W,r.dtype),_,r.dtype),shape:_,dtype:r.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Jbe={kernelName:UE,backendName:"cpu",kernelFunc:({inputs:t,backend:e,attrs:n})=>{const{x:r,filter:s,dy:o}=t,{strides:i,pad:a,dilations:l}=n,c=e,d=Yi(r.shape,c.data.get(r.dataId).values),f=Yi(s.shape,c.data.get(s.dataId).values),{batchSize:p,inHeight:g,inWidth:x,inChannels:b,outHeight:w,outWidth:C,padInfo:N,strideHeight:k,strideWidth:I,filterHeight:R,filterWidth:$,dilationHeight:O,dilationWidth:F,outShape:M}=E1(r.shape,s.shape,i,a,"NHWC",l);Y(o.rank===M.length,()=>`Error in ${UE}, dy must have the same rank as output ${M.length}, but got ${o.rank}`);const _=Yi(M,c.data.get(o.dataId).values),V=uB(s.shape,s.dtype);for(let W=0;W<p;++W)for(let q=0;q<w;++q){const j=q*k-N.top;for(let G=0;G<C;++G){const Z=G*I-N.left;for(let J=0;J<b;++J){let X=Number.MIN_SAFE_INTEGER,ee=0,ne=0;for(let oe=0;oe<R;++oe){const ye=j+oe*O;if(ye>=0&&ye<g)for(let ge=0;ge<$;++ge){const ve=Z+ge*F;if(ve>=0&&ve<x){const he=d[W][ye][ve][J]+f[oe][ge][J];he>X&&(X=he,ee=oe,ne=ge)}}}V[ee][ne][J]+=_[W][q][G][J]}}}return{dataId:c.write(df(V,r.dtype),s.shape,s.dtype),shape:s.shape,dtype:s.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ewe={kernelName:WE,backendName:"cpu",kernelFunc:({inputs:t,backend:e,attrs:n})=>{const{x:r,filter:s,dy:o}=t,{strides:i,pad:a,dilations:l}=n,c=e,d=Yi(r.shape,c.data.get(r.dataId).values),f=Yi(s.shape,c.data.get(s.dataId).values),{batchSize:p,inHeight:g,inWidth:x,inChannels:b,outHeight:w,outWidth:C,padInfo:N,strideHeight:k,strideWidth:I,filterHeight:R,filterWidth:$,dilationHeight:O,dilationWidth:F,outShape:M}=E1(r.shape,s.shape,i,a,"NHWC",l);Y(o.rank===M.length,()=>`Error in ${WE}, dy must have the same rank as output ${M.length}, but got ${o.rank}`);const _=Yi(M,c.data.get(o.dataId).values),V=uB(r.shape,r.dtype);for(let W=0;W<p;++W)for(let q=0;q<w;++q){const j=q*k-N.top;for(let G=0;G<C;++G){const Z=G*I-N.left;for(let J=0;J<b;++J){let X=Number.MIN_SAFE_INTEGER,ee=j<0?0:j,ne=Z<0?0:Z;for(let oe=0;oe<R;++oe){const ye=j+oe*O;if(ye>=0&&ye<g)for(let ge=0;ge<$;++ge){const ve=Z+ge*F;if(ve>=0&&ve<x){const he=d[W][ye][ve][J]+f[oe][ge][J];he>X&&(X=he,ee=ye,ne=ve)}}}V[W][ee][ne][J]+=_[W][q][G][J]}}}return{dataId:c.write(df(V,r.dtype),r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function twe(t){const{inputs:e,backend:n,attrs:r}=t,{image:s}=e,{canvas:o,options:i}=r,{contextOptions:a,imageOptions:l}=i||{},c=(l==null?void 0:l.alpha)||1,d=(a==null?void 0:a.contextType)||"2d";if(d!=="2d")throw new Error(`Context type ${a.contextType} is not supported by the CPU backend.`);const f=o.getContext(d,(a==null?void 0:a.contextAttributes)||{});if(f==null)throw new Error(`Could not get the context with ${d} type.`);const[p,g]=s.shape.slice(0,2),x=s.shape.length===2?1:s.shape[2],b=n.data.get(s.dataId).values,w=s.dtype==="float32"?255:1,C=new Uint8ClampedArray(g*p*4);for(let k=0;k<p*g;++k){const I=[0,0,0,255*c];for(let $=0;$<x;$++){const O=b[k*x+$];if(s.dtype==="float32"){if(O<0||O>1)throw new Error(`Tensor values for a float32 Tensor must be in the range [0 - 1] but encountered ${O}.`)}else if(s.dtype==="int32"&&(O<0||O>255))throw new Error(`Tensor values for a int32 Tensor must be in the range [0 - 255] but encountered ${O}.`);x===1?(I[0]=O*w,I[1]=O*w,I[2]=O*w):I[$]=O*w}const R=k*4;C[R+0]=Math.round(I[0]),C[R+1]=Math.round(I[1]),C[R+2]=Math.round(I[2]),C[R+3]=Math.round(I[3])}o.width=g,o.height=p;const N=new ImageData(C,g,p);return f.putImageData(N,0,0),s}const nwe={kernelName:ooe,backendName:"cpu",kernelFunc:twe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function W1(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:o,keepDims:i}=r;wt(s,"sum");let a;s.dtype==="bool"?a=wu({inputs:{x:s},backend:n,attrs:{dtype:"int32"}}):a=Il({inputs:{x:s},backend:n});const l=a.shape.length,c=Zt(o,a.shape),d=fr(c,l);let f=c,p=a;d!=null&&(p=wo({inputs:{x:a},backend:n,attrs:{perm:d}}),f=$r(f.length,l)),Is("sum",f,p.shape.length);const[g,x]=ms(p.shape,f),b=Xo(p.dtype,"int32");let w=Yb(n,g,b);const C=Te(x),N=n.data.get(w.dataId).values,k=n.data.get(p.dataId).values;for(let I=0;I<N.length;++I){const R=I*C;let $=0;for(let O=0;O<C;++O)$+=k[R+O];N[I]=$}if(i){const I=Dr(w.shape,c),R=w;w=qn({inputs:{x:w},backend:n,attrs:{shape:I}}),n.disposeIntermediateTensorInfo(R)}return n.disposeIntermediateTensorInfo(a),d!=null&&n.disposeIntermediateTensorInfo(p),w}const rwe={kernelName:Yv,backendName:"cpu",kernelFunc:W1};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function swe(t){const{inputs:e,backend:n,attrs:r}=t,{equation:s}=r,o=e,{allDims:i,summedDims:a,idDims:l}=oR(s,o.length);aR(i.length,l,o);const{path:c,steps:d}=lR(a,l),f=d.length;let p=null,g=i.length;const x=[];for(let b=0;b<f;++b){for(const w of d[b]){const{permutationIndices:C,expandDims:N}=iR(g,l[w]);let k;cR(C)?k=o[w]:(k=wo({inputs:{x:o[w]},backend:n,attrs:{perm:C}}),x.push(k));const I=k.shape.slice();for(let R=0;R<N.length;++R)I.splice(N[R],0,1);nn(k.shape,I)||(k=qn({inputs:{x:k},backend:n,attrs:{shape:I}}),x.push(k)),p===null?p=k:(p=V2({inputs:{a:k,b:p},backend:n}),x.push(p))}b<f-1&&(c[b]>=0&&(p=W1({inputs:{x:p},backend:n,attrs:{axis:c[b]-(i.length-g),keepDims:!1}}),x.push(p)),g--)}for(const b of x)b!==p&&n.disposeIntermediateTensorInfo(b);return p}const owe={kernelName:nA,backendName:"cpu",kernelFunc:swe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iwe(t){const{inputs:e,backend:n}=t,{dy:r,y:s}=e;wt([r,s],"eluGrad");const o=new Float32Array(Te(s.shape)),i=n.data.get(s.dataId).values,a=n.data.get(r.dataId).values;for(let l=0;l<i.length;++l){const c=i[l];c>=0?o[l]=a[l]:o[l]=a[l]*(c+1)}return n.makeTensorInfo(s.shape,"float32",o)}const awe={kernelName:rA,backendName:"cpu",kernelFunc:iwe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lwe=Q3,cwe=J3,uwe=eR,dwe=tR,fwe=nR,hwe=rR,pwe=An(W0,t=>{const e=Math.sign(t),n=Math.abs(t),r=1/(1+lwe*n);return e*(1-((((hwe*r+fwe)*r+dwe)*r+uwe)*r+cwe)*r*Math.exp(-n*n))}),mwe={kernelName:W0,backendName:"cpu",kernelFunc:pwe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jb(t){const{inputs:e,backend:n,attrs:r}=t,{input:s}=e,{dim:o}=r,i=s.shape.length,a=s.shape.slice();let l=o;return o<0&&(Y(-(i+1)<=o,()=>`Axis must be in the interval [${-(i+1)}, ${i}]`),l=i+o+1),a.splice(l,0,1),qn({inputs:{x:s},backend:n,attrs:{shape:a}})}const gwe={kernelName:bv,backendName:"cpu",kernelFunc:Jb};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xwe=_r((t,e)=>t/e),XR=ns(z0,xwe),$I={kernelName:z0,backendName:"cpu",kernelFunc:XR};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function w9(t,e,n){const r=t.shape,s=r[0],o=r[1],i=n.data.get(t.dataId),a=i.complexTensorInfos.real,l=i.complexTensorInfos.imag,c=[s,o],d=Te(c),f=Ss("float32",d),p=Ss("float32",d);for(let w=0;w<s;w++){const C=Zd({inputs:{x:a},backend:n,attrs:{begin:[w,0],size:[1,o]}}),N=Zd({inputs:{x:l},backend:n,attrs:{begin:[w,0],size:[1,o]}}),k=Mo({inputs:{real:C,imag:N},backend:n}),{real:I,imag:R}=ywe(k,e,n),$=ac(I,R);for(let O=0;O<o;O++){const F=sR($,O);f[w*o+O]=F.real,p[w*o+O]=F.imag}n.disposeIntermediateTensorInfo(C),n.disposeIntermediateTensorInfo(N),n.disposeIntermediateTensorInfo(k)}const g=n.makeTensorInfo(c,"float32",f),x=n.makeTensorInfo(c,"float32",p),b=Mo({inputs:{real:g,imag:x},backend:n});return n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(x),b}function ywe(t,e,n){const r=Te(t.shape),s=n.data.get(t.dataId),o=n.data.get(s.complexTensorInfos.real.dataId).values,i=n.data.get(s.complexTensorInfos.imag.dataId).values;if(bwe(r)){const a=OI(o,i,r,e,n),l=[t.shape[0],t.shape[1]];if(e){const c=n.makeTensorInfo(l,"float32",a.real),d=n.makeTensorInfo(l,"float32",a.imag),f=n.makeTensorInfo([],"float32",Au(r,"float32")),p=Il({inputs:{x:f},backend:n}),g=$I.kernelFunc({inputs:{a:c,b:f},backend:n}),x=$I.kernelFunc({inputs:{a:d,b:p},backend:n}),b=n.data.get(g.dataId).values,w=n.data.get(x.dataId).values;return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(x),{real:b,imag:w}}return a}else{const a=ac(o,i),l=wwe(a,r,e);return Aj(l)}}function bwe(t){return(t&t-1)===0}function OI(t,e,n,r,s){if(n===1)return{real:t,imag:e};const o=ac(t,e),i=n/2,a=Rj(o),l=a.real,c=a.imag,d=[l.length],f=s.makeTensorInfo(d,"float32",l),p=s.makeTensorInfo(d,"float32",c),g=Mo({inputs:{real:f,imag:p},backend:s}),x=Dj(o),b=x.real,w=x.imag,C=[b.length],N=s.makeTensorInfo(C,"float32",b),k=s.makeTensorInfo(C,"float32",w),I=Mo({inputs:{real:N,imag:k},backend:s}),R=OI(l,c,i,r,s),$=R.real,O=R.imag,F=[$.length],M=s.makeTensorInfo(F,"float32",$),_=s.makeTensorInfo(F,"float32",O),V=Mo({inputs:{real:M,imag:_},backend:s}),B=OI(b,w,i,r,s),W=B.real,q=B.imag,j=[W.length],G=s.makeTensorInfo(j,"float32",W),Z=s.makeTensorInfo(j,"float32",q),J=Mo({inputs:{real:G,imag:Z},backend:s}),X=Oj(n,r),ee=[X.real.length],ne=s.makeTensorInfo(ee,"float32",X.real),oe=s.makeTensorInfo(ee,"float32",X.imag),ye=Mo({inputs:{real:ne,imag:oe},backend:s}),ge=V2({inputs:{a:ye,b:J},backend:s}),ve=ep({inputs:{a:V,b:ge},backend:s}),he=GR({inputs:{a:V,b:ge},backend:s}),Me=Yd({inputs:{input:ve},backend:s}),ze=Yd({inputs:{input:he},backend:s}),Oe=tp({inputs:{input:ve},backend:s}),Ie=tp({inputs:{input:he},backend:s}),me=np({inputs:[Me,ze],backend:s,attrs:{axis:0}}),ke=np({inputs:[Oe,Ie],backend:s,attrs:{axis:0}}),pe=s.data.get(me.dataId).values,Pe=s.data.get(ke.dataId).values;return s.disposeIntermediateTensorInfo(f),s.disposeIntermediateTensorInfo(p),s.disposeIntermediateTensorInfo(g),s.disposeIntermediateTensorInfo(N),s.disposeIntermediateTensorInfo(k),s.disposeIntermediateTensorInfo(I),s.disposeIntermediateTensorInfo(M),s.disposeIntermediateTensorInfo(_),s.disposeIntermediateTensorInfo(V),s.disposeIntermediateTensorInfo(G),s.disposeIntermediateTensorInfo(Z),s.disposeIntermediateTensorInfo(J),s.disposeIntermediateTensorInfo(ne),s.disposeIntermediateTensorInfo(oe),s.disposeIntermediateTensorInfo(ye),s.disposeIntermediateTensorInfo(ge),s.disposeIntermediateTensorInfo(ve),s.disposeIntermediateTensorInfo(he),s.disposeIntermediateTensorInfo(Me),s.disposeIntermediateTensorInfo(Oe),s.disposeIntermediateTensorInfo(ze),s.disposeIntermediateTensorInfo(Ie),s.disposeIntermediateTensorInfo(me),s.disposeIntermediateTensorInfo(ke),{real:pe,imag:Pe}}function wwe(t,e,n){const r=new Float32Array(e*2);for(let s=0;s<e;s++){let o=0,i=0;for(let a=0;a<e;a++){const l=_j(s*a,e,n),c=sR(t,a);o+=c.real*l.real-c.imag*l.imag,i+=c.real*l.imag+c.imag*l.real}n&&(o/=e,i/=e),$j(r,o,i,s)}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vwe(t){const{inputs:e,backend:n}=t,{input:r}=e,s=Te(r.shape),o=r.shape[r.shape.length-1],i=s/o,a=qn({inputs:{x:r},backend:n,attrs:{shape:[i,o]}}),l=w9(a,!1,n),c=qn({inputs:{x:l},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(l),c}const Cwe={kernelName:sA,backendName:"cpu",kernelFunc:vwe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KR(t){const{backend:e,attrs:n}=t,{shape:r,value:s,dtype:o}=n,i=o||kp(s),a=Ar(i,Te(r));return Nwe(a,s,i),e.makeTensorInfo(r,i,a)}const Swe={kernelName:oA,backendName:"cpu",kernelFunc:KR};function Nwe(t,e,n){t.fill(e)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ewe={kernelName:iA,backendName:"cpu",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{image:r}=t,s=n,o=Ss(r.dtype,Te(r.shape)),[i,a,l,c]=r.shape,d=s.data.get(r.dataId).values;for(let p=0;p<i;p++){const g=p*l*a*c;for(let x=0;x<a;x++){const b=x*(l*c);for(let w=0;w<l;w++){const C=w*c;for(let N=0;N<c;N++){const k=Math.round(l-w-1),I=g+b+C+N;let R=d[I];if(k>=0&&k<l){const $=k*c,O=g+b+$+N;R=d[O]}o[I]=R}}}}return{dataId:s.write(o,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Iwe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:o,bias:i,preluActivationWeights:a}=e,{strides:l,pad:c,dataFormat:d,dilations:f,dimRoundingMode:p,activation:g,leakyreluAlpha:x}=r;let b=y9({inputs:{x:s,filter:o},backend:n,attrs:{strides:l,pad:c,dataFormat:d,dilations:f,dimRoundingMode:p}});if(i){const w=b;if(d==="NCHW"&&i.shape.length===1&&i.shape[0]!==1){const C=qn({inputs:{x:i},backend:n,attrs:{shape:[i.shape[0],1,1]}});b=ep({inputs:{a:b,b:C},backend:n}),n.disposeIntermediateTensorInfo(C)}else b=ep({inputs:{a:b,b:i},backend:n});n.disposeIntermediateTensorInfo(w)}if(g){const w=b;if(d==="NCHW"&&g==="prelu"&&a.shape.length===1&&a.shape[0]!==1){const C=qn({inputs:{x:a},backend:n,attrs:{shape:[a.shape[0],1,1]}});b=Qb(n,b,g,C,x),n.disposeIntermediateTensorInfo(C)}else b=Qb(n,b,g,a,x);n.disposeIntermediateTensorInfo(w)}return b}const kwe={kernelName:Db,backendName:"cpu",kernelFunc:Iwe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Twe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:o,bias:i,preluActivationWeights:a}=e,{strides:l,pad:c,dataFormat:d,dilations:f,dimRoundingMode:p,activation:g,leakyreluAlpha:x}=r;let b=b9({inputs:{x:s,filter:o},backend:n,attrs:{strides:l,pad:c,dataFormat:d,dilations:f,dimRoundingMode:p}});if(i){const w=b;b=ep({inputs:{a:b,b:i},backend:n}),n.disposeIntermediateTensorInfo(w)}if(g){const w=b;b=Qb(n,b,g,a,x),n.disposeIntermediateTensorInfo(w)}return b}const Awe={kernelName:$b,backendName:"cpu",kernelFunc:Twe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rwe(t){const{inputs:e,backend:n}=t,{params:r,indices:s}=e,o=Te(r.shape),i=s.shape,a=i[i.length-1],[l,c,d,f]=z3(r,s);if(c===0)return n.makeTensorInfo(l,r.dtype,[]);const p=n.data.get(s.dataId).values,g=n.bufferSync(r),x=RV(p,g,r.dtype,c,a,d,f,r.shape,o);return n.makeTensorInfo(l,r.dtype,x.values)}const Dwe={kernelName:aA,backendName:"cpu",kernelFunc:Rwe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $we(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,indices:o}=e,{axis:i,batchDims:a}=r;wt([s,o],"gatherV2");const l=Zt(i,s.shape)[0],c=n.data.get(o.dataId).values,d=s.shape[l];for(let I=0;I<c.length;++I){const R=c[I];Y(R<=d-1&&R>=0,()=>`GatherV2: the index value ${R} is not in [0, ${d-1}]`)}let f=a;a==null&&(f=0);const p=Te(o.shape),g=dR(s,o,l,f),x=qn({inputs:{x:s},backend:n,attrs:{shape:[g.batchSize,g.outerSize,g.dimSize,g.sliceSize]}}),b=qn({inputs:{x:o},backend:n,attrs:{shape:[g.batchSize,p/g.batchSize]}}),w=[g.batchSize,g.outerSize,p/g.batchSize,g.sliceSize],C=n.bufferSync(b),N=n.bufferSync(x),k=DV(N,C,w);return n.disposeIntermediateTensorInfo(x),n.disposeIntermediateTensorInfo(b),n.makeTensorInfo(g.outputShape,k.dtype,k.values)}const Owe={kernelName:vv,backendName:"cpu",kernelFunc:$we};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _we(t){const{inputs:e,backend:n}=t,{input:r}=e,s=Te(r.shape),o=r.shape[r.shape.length-1],i=s/o,a=qn({inputs:{x:r},backend:n,attrs:{shape:[i,o]}}),l=w9(a,!0,n),c=qn({inputs:{x:l},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(l),c}const Pwe={kernelName:lA,backendName:"cpu",kernelFunc:_we};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Fwe=An(Y0,t=>Number.isFinite(t)?1:0,"bool"),Mwe={kernelName:Y0,backendName:"cpu",kernelFunc:Fwe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Lwe=An(Z0,t=>Math.abs(t)===1/0?1:0,"bool"),Bwe={kernelName:Z0,backendName:"cpu",kernelFunc:Lwe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jwe=An(Q0,t=>Number.isNaN(t)?1:0,"bool"),zwe={kernelName:Q0,backendName:"cpu",kernelFunc:jwe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vwe(t){const{backend:e,attrs:n}=t,{start:r,stop:s,num:o}=n,i=FV(r,s,o);return e.makeTensorInfo([i.length],"float32",i)}const Wwe={kernelName:uA,backendName:"cpu",kernelFunc:Vwe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Uwe=An(e1,t=>Math.log1p(t)),Hwe={kernelName:e1,backendName:"cpu",kernelFunc:Uwe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Gwe=_r((t,e)=>t&&e),qwe=ns(Iv,Gwe,null,"bool"),Xwe={kernelName:Iv,backendName:"cpu",kernelFunc:qwe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Kwe=An(kv,t=>t?0:1,"bool"),Ywe={kernelName:kv,backendName:"cpu",kernelFunc:Kwe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Zwe=_r((t,e)=>t||e),Qwe=ns(Tv,Zwe,null,"bool"),Jwe={kernelName:Tv,backendName:"cpu",kernelFunc:Qwe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eve(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{depthRadius:o,bias:i,alpha:a,beta:l}=r;wt(s,"LRN");const c=s.shape[3],d=c-1,f=n.data.get(s.dataId).values,p=Te(s.shape),g=new Float32Array(p);function x(b){const w=b%c;let C=b-w+Math.max(0,w-o);const N=b-w+Math.min(w+o,d);let k=0;for(;C<=N;C++){const I=f[C];k+=I*I}return k}for(let b=0;b<p;b++){const w=x(b),C=f[b]*Math.pow(i+a*w,-l);g[b]=C}return n.makeTensorInfo(s.shape,s.dtype,g)}const tve={kernelName:Av,backendName:"cpu",kernelFunc:eve};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nve(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,y:o,dy:i}=e,{depthRadius:a,bias:l,alpha:c,beta:d}=r;wt(i,"LRNGrad");const f=Te(i.shape),p=i.shape[3],g=n.data.get(i.dataId).values,x=n.data.get(s.dataId).values,b=n.data.get(o.dataId).values,w=new Float32Array(f),C=f;for(let N=0;N<C;N++){const k=N%p,I=N-k+Math.max(0,k-a),R=N-k+Math.min(p,k+a+1);let $=0;for(let O=I;O<R;O++)$+=Math.pow(x[O],2);$=c*$+l;for(let O=I;O<R;O++){let F=-2*c*d*x[O]*b[N]/$;N===O&&(F+=Math.pow($,-d)),F*=g[N],w[O]+=F}}return n.makeTensorInfo(i.shape,s.dtype,w)}const rve={kernelName:dA,backendName:"cpu",kernelFunc:nve};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function v9(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{reductionIndices:o,keepDims:i}=r,a=n;let l=s.shape;const c=l.length,d=Zt(o,l);let f=d;const p=fr(f,c);let g=a.data.get(s.dataId).values;if(p!=null){const I=new Array(c);for(let R=0;R<I.length;R++)I[R]=l[p[R]];g=UR(g,l,s.dtype,p,I),f=$r(f.length,c),l=I}wt(s,"max"),Is("max",f,c);const[x,b]=ms(l,f),w=Te(b),C=LV(g,w,x,s.dtype),N=a.write(C,x,s.dtype);let k=x;return i&&(k=Dr(x,d)),{dataId:N,shape:k,dtype:s.dtype}}const sve={kernelName:Rv,backendName:"cpu",kernelFunc:v9};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ove(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e;wt(s,"maxPool");const{filterSize:o,strides:i,pad:a,dimRoundingMode:l}=r,c=1;Y(Es(i,c),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${i} and dilations '${c}'`);const d=ia(s.shape,o,i,c,a,l);let f;if(d.filterWidth===1&&d.filterHeight===1&&nn(d.inShape,d.outShape))f=Il({inputs:{x:s},backend:n});else{const p=n.data.get(s.dataId).values,g=Et(s.shape),x=qR(p,s.shape,s.dtype,g,d,"max");f=n.makeTensorInfo(d.outShape,s.dtype,x.values)}return f}const ive={kernelName:Dv,backendName:"cpu",kernelFunc:ove};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ave(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{filterSize:o,strides:i,pad:a,dimRoundingMode:l,dataFormat:c}=r;wt(s,"maxPool3d");const d=pc(s.shape,o,i,1,a,l,c),f=n.data.get(s.dataId).values,p=x9(f,s.shape,s.dtype,Et(s.shape),d,"max");return n.makeTensorInfo(p.shape,"float32",p.values)}const lve={kernelName:$v,backendName:"cpu",kernelFunc:ave};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cve(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,input:o}=e,{filterSize:i,strides:a,pad:l,dimRoundingMode:c}=r;wt([s,o],"maxPool3DGrad");const d=pc(o.shape,i,a,1,l,c),f=n.bufferSync(o),p=Zye(f,d),g=d.strideDepth,x=d.strideHeight,b=d.strideWidth,w=d.dilationDepth,C=d.dilationHeight,N=d.dilationWidth,k=d.effectiveFilterDepth,I=d.effectiveFilterHeight,R=d.effectiveFilterWidth,$=k-1-d.padInfo.front,O=R-1-d.padInfo.left,F=I-1-d.padInfo.top,M=Gt(o.shape,"float32"),_=n.bufferSync(s);for(let V=0;V<d.batchSize;++V)for(let B=0;B<d.inChannels;++B)for(let W=0;W<d.inDepth;++W)for(let q=0;q<d.inHeight;++q)for(let j=0;j<d.inWidth;++j){const G=W-$,Z=q-F,J=j-O;let X=0;for(let ee=0;ee<k;ee+=w){const ne=(G+ee)/g;if(!(ne<0||ne>=d.outDepth||Math.floor(ne)!==ne))for(let oe=0;oe<I;oe+=C){const ye=(Z+oe)/x;if(!(ye<0||ye>=d.outHeight||Math.floor(ye)!==ye))for(let ge=0;ge<R;ge+=N){const ve=(J+ge)/b;if(ve<0||ve>=d.outWidth||Math.floor(ve)!==ve)continue;const he=k*I*R-1-p.get(V,ne,ye,ve,B),Me=ee*I*R+oe*R+ge,ze=he===Me?1:0;if(ze===0)continue;const Oe=_.get(V,ne,ye,ve,B);X+=Oe*ze}}}M.set(X,V,W,q,j,B)}return n.makeTensorInfo(M.shape,M.dtype,M.values)}const uve={kernelName:hA,backendName:"cpu",kernelFunc:cve};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dve(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,input:o,output:i}=e,a=o;wt([o,i],"maxPoolGrad");const{filterSize:l,strides:c,pad:d,dimRoundingMode:f}=r,p=ia(a.shape,l,c,1,d,f),g=n.data.get(a.dataId).values,x=Gt(p.outShape,a.dtype,g9(g,a.shape,a.dtype,p).values),b=p.strideHeight,w=p.strideWidth,C=p.dilationHeight,N=p.dilationWidth,k=p.effectiveFilterHeight,I=p.effectiveFilterWidth,R=I-1-p.padInfo.left,$=k-1-p.padInfo.top,O=Gt(a.shape,"float32"),F=n.data.get(s.dataId).values,M=Gt(s.shape,"float32",F);for(let _=0;_<p.batchSize;++_)for(let V=0;V<p.inChannels;++V)for(let B=0;B<p.inHeight;++B)for(let W=0;W<p.inWidth;++W){const q=B-$,j=W-R;let G=0;for(let Z=0;Z<k;Z+=C){const J=(q+Z)/b;if(!(J<0||J>=p.outHeight||Math.floor(J)!==J))for(let X=0;X<I;X+=N){const ee=(j+X)/w;if(ee<0||ee>=p.outWidth||Math.floor(ee)!==ee)continue;const ne=k*I-1-x.get(_,J,ee,V),oe=Z*I+X,ye=ne===oe?1:0;if(ye===0)continue;const ge=M.get(_,J,ee,V);G+=ge*ye}}O.set(G,_,B,W,V)}return n.makeTensorInfo(O.shape,O.dtype,O.values)}const fve={kernelName:fA,backendName:"cpu",kernelFunc:dve};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hve(t,e,n,r,s){const o=Et(e),i=qR(t,e,n,o,s,"max"),a=g9(t,e,n,s,!0,r);return[i.values,a.values]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pve={kernelName:pA,backendName:"cpu",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:r}=t,{filterSize:s,strides:o,pad:i,includeBatchInIndex:a}=e,l=n;wt(r,"MaxPoolWithArgmax");const c=l.data.get(r.dataId).values,d=ia(r.shape,s,o,[1,1],i),[f,p]=hve(c,r.shape,r.dtype,a,d),g=l.write(f,d.outShape,r.dtype),x=l.write(p,d.outShape,r.dtype);return[{dataId:g,shape:d.outShape,dtype:r.dtype},{dataId:x,shape:d.outShape,dtype:"int32"}]}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mve(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:o,keepDims:i}=r,a=Zt(o,s.shape),c=ms(s.shape,a)[1],d=Te(c),f=[],p=n.makeTensorInfo([],"float32",new Float32Array([d]));f.push(p);const g=wu({inputs:{x:s},backend:n,attrs:{dtype:"float32"}});f.push(g);const x=XR({inputs:{a:g,b:p},backend:n});f.push(x);const b=W1({inputs:{x},backend:n,attrs:{axis:o,keepDims:i}});return f.forEach(w=>n.disposeIntermediateTensorInfo(w)),b}const gve={kernelName:Ov,backendName:"cpu",kernelFunc:mve};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xve(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:o,keepDims:i}=r;wt(s,"min");const a=Zt(o,s.shape);let l=a;const c=fr(l,s.shape.length);let d=s;c!=null&&(d=wo({inputs:{x:s},backend:n,attrs:{perm:c}}),l=$r(l.length,s.shape.length)),Is("min",l,d.shape.length);const[f,p]=ms(d.shape,l),g=Te(p),x=Vs(Te(f),d.dtype),b=n.data.get(d.dataId).values;for(let C=0;C<x.length;++C){const N=C*g;let k=b[N];for(let I=0;I<g;++I){const R=b[N+I];(Number.isNaN(R)||R<k)&&(k=R)}x[C]=k}c!=null&&n.disposeIntermediateTensorInfo(d);const w=n.makeTensorInfo(f,d.dtype,x);if(i){const C=Dr(f,a),N=qn({inputs:{x:w},backend:n,attrs:{shape:C}});return n.disposeIntermediateTensorInfo(w),N}return w}const yve={kernelName:_v,backendName:"cpu",kernelFunc:xve};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bve(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{paddings:o,mode:i}=r;wt(s,"mirrorPad");const a=o.map((k,I)=>k[0]+s.shape[I]+k[1]),l=o.map(k=>k[0]),c=o.map((k,I)=>k[0]+s.shape[I]),d=i==="reflect"?0:1,f=n.data.get(s.dataId).values,p=s.shape.length,g=Et(s.shape),x=Te(a),b=a.length,w=Et(a),C=Ss(s.dtype,x);for(let k=0;k<x;k++){let I=Tp(k,b,w);for(let $=0;$<b;$++)I[$]<l[$]?I[$]=l[$]*2-I[$]-d:I[$]>=c[$]&&(I[$]=(c[$]-1)*2-I[$]+d);I=I.map(($,O)=>$-l[O]);const R=gl(I,p,g);C[k]=f[R]}return{dataId:n.write(C,a,s.dtype),shape:a,dtype:s.dtype}}const wve={kernelName:Pv,backendName:"cpu",kernelFunc:bve};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vve=_r((t,e)=>{const n=t%e;return t<0&&e<0||t>=0&&e>=0?n:(n+e)%e}),Cve=ns(r1,vve),Sve={kernelName:r1,backendName:"cpu",kernelFunc:Cve};var YR={exports:{}};YR.exports;(function(t){(function(e,n,r){function s(l){var c=this,d=a();c.next=function(){var f=2091639*c.s0+c.c*23283064365386963e-26;return c.s0=c.s1,c.s1=c.s2,c.s2=f-(c.c=f|0)},c.c=1,c.s0=d(" "),c.s1=d(" "),c.s2=d(" "),c.s0-=d(l),c.s0<0&&(c.s0+=1),c.s1-=d(l),c.s1<0&&(c.s1+=1),c.s2-=d(l),c.s2<0&&(c.s2+=1),d=null}function o(l,c){return c.c=l.c,c.s0=l.s0,c.s1=l.s1,c.s2=l.s2,c}function i(l,c){var d=new s(l),f=c&&c.state,p=d.next;return p.int32=function(){return d.next()*4294967296|0},p.double=function(){return p()+(p()*2097152|0)*11102230246251565e-32},p.quick=p,f&&(typeof f=="object"&&o(f,d),p.state=function(){return o(d,{})}),p}function a(){var l=4022871197,c=function(d){d=String(d);for(var f=0;f<d.length;f++){l+=d.charCodeAt(f);var p=.02519603282416938*l;l=p>>>0,p-=l,p*=l,l=p>>>0,p-=l,l+=p*4294967296}return(l>>>0)*23283064365386963e-26};return c}n&&n.exports?n.exports=i:this.alea=i})(Gn,t)})(YR);var Nve=YR.exports,ZR={exports:{}};ZR.exports;(function(t){(function(e,n,r){function s(a){var l=this,c="";l.x=0,l.y=0,l.z=0,l.w=0,l.next=function(){var f=l.x^l.x<<11;return l.x=l.y,l.y=l.z,l.z=l.w,l.w^=l.w>>>19^f^f>>>8},a===(a|0)?l.x=a:c+=a;for(var d=0;d<c.length+64;d++)l.x^=c.charCodeAt(d)|0,l.next()}function o(a,l){return l.x=a.x,l.y=a.y,l.z=a.z,l.w=a.w,l}function i(a,l){var c=new s(a),d=l&&l.state,f=function(){return(c.next()>>>0)/4294967296};return f.double=function(){do var p=c.next()>>>11,g=(c.next()>>>0)/4294967296,x=(p+g)/(1<<21);while(x===0);return x},f.int32=c.next,f.quick=f,d&&(typeof d=="object"&&o(d,c),f.state=function(){return o(c,{})}),f}n&&n.exports?n.exports=i:this.xor128=i})(Gn,t)})(ZR);var Eve=ZR.exports,QR={exports:{}};QR.exports;(function(t){(function(e,n,r){function s(a){var l=this,c="";l.next=function(){var f=l.x^l.x>>>2;return l.x=l.y,l.y=l.z,l.z=l.w,l.w=l.v,(l.d=l.d+362437|0)+(l.v=l.v^l.v<<4^(f^f<<1))|0},l.x=0,l.y=0,l.z=0,l.w=0,l.v=0,a===(a|0)?l.x=a:c+=a;for(var d=0;d<c.length+64;d++)l.x^=c.charCodeAt(d)|0,d==c.length&&(l.d=l.x<<10^l.x>>>4),l.next()}function o(a,l){return l.x=a.x,l.y=a.y,l.z=a.z,l.w=a.w,l.v=a.v,l.d=a.d,l}function i(a,l){var c=new s(a),d=l&&l.state,f=function(){return(c.next()>>>0)/4294967296};return f.double=function(){do var p=c.next()>>>11,g=(c.next()>>>0)/4294967296,x=(p+g)/(1<<21);while(x===0);return x},f.int32=c.next,f.quick=f,d&&(typeof d=="object"&&o(d,c),f.state=function(){return o(c,{})}),f}n&&n.exports?n.exports=i:this.xorwow=i})(Gn,t)})(QR);var Ive=QR.exports,JR={exports:{}};JR.exports;(function(t){(function(e,n,r){function s(a){var l=this;l.next=function(){var d=l.x,f=l.i,p,g;return p=d[f],p^=p>>>7,g=p^p<<24,p=d[f+1&7],g^=p^p>>>10,p=d[f+3&7],g^=p^p>>>3,p=d[f+4&7],g^=p^p<<7,p=d[f+7&7],p=p^p<<13,g^=p^p<<9,d[f]=g,l.i=f+1&7,g};function c(d,f){var p,g=[];if(f===(f|0))g[0]=f;else for(f=""+f,p=0;p<f.length;++p)g[p&7]=g[p&7]<<15^f.charCodeAt(p)+g[p+1&7]<<13;for(;g.length<8;)g.push(0);for(p=0;p<8&&g[p]===0;++p);for(p==8?g[7]=-1:g[p],d.x=g,d.i=0,p=256;p>0;--p)d.next()}c(l,a)}function o(a,l){return l.x=a.x.slice(),l.i=a.i,l}function i(a,l){a==null&&(a=+new Date);var c=new s(a),d=l&&l.state,f=function(){return(c.next()>>>0)/4294967296};return f.double=function(){do var p=c.next()>>>11,g=(c.next()>>>0)/4294967296,x=(p+g)/(1<<21);while(x===0);return x},f.int32=c.next,f.quick=f,d&&(d.x&&o(d,c),f.state=function(){return o(c,{})}),f}n&&n.exports?n.exports=i:this.xorshift7=i})(Gn,t)})(JR);var kve=JR.exports,eD={exports:{}};eD.exports;(function(t){(function(e,n,r){function s(a){var l=this;l.next=function(){var d=l.w,f=l.X,p=l.i,g,x;return l.w=d=d+1640531527|0,x=f[p+34&127],g=f[p=p+1&127],x^=x<<13,g^=g<<17,x^=x>>>15,g^=g>>>12,x=f[p]=x^g,l.i=p,x+(d^d>>>16)|0};function c(d,f){var p,g,x,b,w,C=[],N=128;for(f===(f|0)?(g=f,f=null):(f=f+"\0",g=0,N=Math.max(N,f.length)),x=0,b=-32;b<N;++b)f&&(g^=f.charCodeAt((b+32)%f.length)),b===0&&(w=g),g^=g<<10,g^=g>>>15,g^=g<<4,g^=g>>>13,b>=0&&(w=w+1640531527|0,p=C[b&127]^=g+w,x=p==0?x+1:0);for(x>=128&&(C[(f&&f.length||0)&127]=-1),x=127,b=4*128;b>0;--b)g=C[x+34&127],p=C[x=x+1&127],g^=g<<13,p^=p<<17,g^=g>>>15,p^=p>>>12,C[x]=g^p;d.w=w,d.X=C,d.i=x}c(l,a)}function o(a,l){return l.i=a.i,l.w=a.w,l.X=a.X.slice(),l}function i(a,l){a==null&&(a=+new Date);var c=new s(a),d=l&&l.state,f=function(){return(c.next()>>>0)/4294967296};return f.double=function(){do var p=c.next()>>>11,g=(c.next()>>>0)/4294967296,x=(p+g)/(1<<21);while(x===0);return x},f.int32=c.next,f.quick=f,d&&(d.X&&o(d,c),f.state=function(){return o(c,{})}),f}n&&n.exports?n.exports=i:this.xor4096=i})(Gn,t)})(eD);var Tve=eD.exports,tD={exports:{}};tD.exports;(function(t){(function(e,n,r){function s(a){var l=this,c="";l.next=function(){var f=l.b,p=l.c,g=l.d,x=l.a;return f=f<<25^f>>>7^p,p=p-g|0,g=g<<24^g>>>8^x,x=x-f|0,l.b=f=f<<20^f>>>12^p,l.c=p=p-g|0,l.d=g<<16^p>>>16^x,l.a=x-f|0},l.a=0,l.b=0,l.c=-1640531527,l.d=1367130551,a===Math.floor(a)?(l.a=a/4294967296|0,l.b=a|0):c+=a;for(var d=0;d<c.length+20;d++)l.b^=c.charCodeAt(d)|0,l.next()}function o(a,l){return l.a=a.a,l.b=a.b,l.c=a.c,l.d=a.d,l}function i(a,l){var c=new s(a),d=l&&l.state,f=function(){return(c.next()>>>0)/4294967296};return f.double=function(){do var p=c.next()>>>11,g=(c.next()>>>0)/4294967296,x=(p+g)/(1<<21);while(x===0);return x},f.int32=c.next,f.quick=f,d&&(typeof d=="object"&&o(d,c),f.state=function(){return o(c,{})}),f}n&&n.exports?n.exports=i:this.tychei=i})(Gn,t)})(tD);var Ave=tD.exports,C9={exports:{}};(function(t){(function(e,n,r){var s=256,o=6,i=52,a="random",l=r.pow(s,o),c=r.pow(2,i),d=c*2,f=s-1,p;function g(I,R,$){var O=[];R=R==!0?{entropy:!0}:R||{};var F=C(w(R.entropy?[I,k(n)]:I??N(),3),O),M=new x(O),_=function(){for(var V=M.g(o),B=l,W=0;V<c;)V=(V+W)*s,B*=s,W=M.g(1);for(;V>=d;)V/=2,B/=2,W>>>=1;return(V+W)/B};return _.int32=function(){return M.g(4)|0},_.quick=function(){return M.g(4)/4294967296},_.double=_,C(k(M.S),n),(R.pass||$||function(V,B,W,q){return q&&(q.S&&b(q,M),V.state=function(){return b(M,{})}),W?(r[a]=V,B):V})(_,F,"global"in R?R.global:this==r,R.state)}function x(I){var R,$=I.length,O=this,F=0,M=O.i=O.j=0,_=O.S=[];for($||(I=[$++]);F<s;)_[F]=F++;for(F=0;F<s;F++)_[F]=_[M=f&M+I[F%$]+(R=_[F])],_[M]=R;(O.g=function(V){for(var B,W=0,q=O.i,j=O.j,G=O.S;V--;)B=G[q=f&q+1],W=W*s+G[f&(G[q]=G[j=f&j+B])+(G[j]=B)];return O.i=q,O.j=j,W})(s)}function b(I,R){return R.i=I.i,R.j=I.j,R.S=I.S.slice(),R}function w(I,R){var $=[],O=typeof I,F;if(R&&O=="object")for(F in I)try{$.push(w(I[F],R-1))}catch{}return $.length?$:O=="string"?I:I+"\0"}function C(I,R){for(var $=I+"",O,F=0;F<$.length;)R[f&F]=f&(O^=R[f&F]*19)+$.charCodeAt(F++);return k(R)}function N(){try{var I;return p&&(I=p.randomBytes)?I=I(s):(I=new Uint8Array(s),(e.crypto||e.msCrypto).getRandomValues(I)),k(I)}catch{var R=e.navigator,$=R&&R.plugins;return[+new Date,e,$,e.screen,k(n)]}}function k(I){return String.fromCharCode.apply(0,I)}if(C(r.random(),n),t.exports){t.exports=g;try{p=p3}catch{}}else r["seed"+a]=g})(typeof self<"u"?self:Gn,[],Math)})(C9);var Rve=C9.exports,Dve=Nve,$ve=Eve,Ove=Ive,_ve=kve,Pve=Tve,Fve=Ave,yf=Rve;yf.alea=Dve;yf.xor128=$ve;yf.xorwow=Ove;yf.xorshift7=_ve;yf.xor4096=Pve;yf.tychei=Fve;var Mve=yf;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function S9(t){const{inputs:e,backend:n,attrs:r}=t,{logits:s}=e,{dim:o}=r,i=s.shape.length;let a=o;if(a===-1&&(a=i-1),a!==i-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${i} and dim was ${a}`);const l=Zt([a],s.shape),c=v9({inputs:{x:s},backend:n,attrs:{reductionIndices:l,keepDims:!1}}),d=Dr(c.shape,l),f=qn({inputs:{x:c},backend:n,attrs:{shape:d}}),p=GR({inputs:{a:s,b:f},backend:n}),g=IV({inputs:{x:p},backend:n}),x=W1({inputs:{x:g},backend:n,attrs:{axis:l,keepDims:!1}}),b=qn({inputs:{x},backend:n,attrs:{shape:d}}),w=XR({inputs:{a:g,b},backend:n});return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(x),n.disposeIntermediateTensorInfo(b),w}const Lve={kernelName:Jv,backendName:"cpu",kernelFunc:S9};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bve(t){const{inputs:e,backend:n,attrs:r}=t,{logits:s}=e,{numSamples:o,seed:i,normalized:a}=r;wt(s,"multinomial");const l=a?s:S9({inputs:{logits:s},backend:n,attrs:{dim:-1}}),c=l.shape[0],d=l.shape[1],f=n.data.get(l.dataId).values,p=[c,o],g=Vs(Te(p),"int32");for(let x=0;x<c;++x){const b=x*d,w=new Float32Array(d-1);w[0]=f[b];for(let k=1;k<w.length;++k)w[k]=w[k-1]+f[b+k];const C=Mve.alea(i.toString()),N=x*o;for(let k=0;k<o;++k){const I=C();g[N+k]=w.length;for(let R=0;R<w.length;R++)if(I<w[R]){g[N+k]=R;break}}}return a||n.disposeIntermediateTensorInfo(l),n.makeTensorInfo(p,"int32",g)}const jve={kernelName:mA,backendName:"cpu",kernelFunc:Bve};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zve=_3;function Vve(t){const{inputs:e,backend:n,attrs:r}=t,{boxes:s,scores:o}=e,{maxOutputSize:i,iouThreshold:a,scoreThreshold:l}=r;wt(s,"NonMaxSuppression");const c=n.data.get(s.dataId).values,d=n.data.get(o.dataId).values,{selectedIndices:f}=zve(c,d,i,a,l);return n.makeTensorInfo([f.length],"int32",new Int32Array(f))}const Wve={kernelName:gA,backendName:"cpu",kernelFunc:Vve};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Uve=P3;function Hve(t){const{inputs:e,backend:n,attrs:r}=t,{boxes:s,scores:o}=e,{maxOutputSize:i,iouThreshold:a,scoreThreshold:l,padToMaxOutputSize:c}=r;wt(s,"NonMaxSuppressionPadded");const d=n.data.get(s.dataId).values,f=n.data.get(o.dataId).values,{selectedIndices:p,validOutputs:g}=Uve(d,f,i,a,l,c);return[n.makeTensorInfo([p.length],"int32",new Int32Array(p)),n.makeTensorInfo([],"int32",new Int32Array([g]))]}const Gve={kernelName:xA,backendName:"cpu",kernelFunc:Hve};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qve=F3;function Xve(t){const{inputs:e,backend:n,attrs:r}=t,{boxes:s,scores:o}=e,{maxOutputSize:i,iouThreshold:a,scoreThreshold:l,softNmsSigma:c}=r;wt(s,"NonMaxSuppressionWithScore");const d=n.data.get(s.dataId).values,f=n.data.get(o.dataId).values,p=i,g=a,x=l,b=c,{selectedIndices:w,selectedScores:C}=qve(d,f,p,g,x,b);return[n.makeTensorInfo([w.length],"int32",new Int32Array(w)),n.makeTensorInfo([C.length],"float32",new Float32Array(C))]}const Kve={kernelName:yA,backendName:"cpu",kernelFunc:Xve};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yve(t){const{inputs:e,backend:n,attrs:r}=t,{indices:s}=e,{dtype:o,depth:i,onValue:a,offValue:l}=r;wt(s,"oneHot");const c=Te(s.shape),d=new Float32Array(c*i);d.fill(l);const f=n.data.get(s.dataId).values;for(let p=0;p<c;++p)f[p]>=0&&f[p]<i&&(d[p*i+f[p]]=a);return n.makeTensorInfo([...s.shape,i],o,d)}const Zve={kernelName:Bv,backendName:"cpu",kernelFunc:Yve};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ew(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="string")throw new Error("zerosLike is not supported for string tensors");if(r.dtype==="complex64"){const s=Yd({inputs:{input:r},backend:n}),o=ew({inputs:{x:s},backend:n}),i=tp({inputs:{input:r},backend:n}),a=ew({inputs:{x:i},backend:n}),l=Mo({inputs:{real:o,imag:a},backend:n});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(a),l}else return KR({backend:n,attrs:{shape:r.shape,value:0,dtype:r.dtype}})}const Qve={kernelName:r2,backendName:"cpu",kernelFunc:ew};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function N9(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="string")throw new Error("onesLike is not supported for string tensors");if(r.dtype==="complex64"){const s=Yd({inputs:{input:r},backend:n}),o=N9({inputs:{x:s},backend:n}),i=tp({inputs:{input:r},backend:n}),a=ew({inputs:{x:i},backend:n}),l=Mo({inputs:{real:o,imag:a},backend:n});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(a),l}else return KR({backend:n,attrs:{shape:r.shape,value:1,dtype:r.dtype}})}const Jve={kernelName:Lv,backendName:"cpu",kernelFunc:N9};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function E9(t){const{inputs:e,backend:n,attrs:r}=t,{axis:s}=r;if(e.length===1)return Jb({inputs:{input:e[0]},backend:n,attrs:{dim:s}});const o=e[0].shape,i=e[0].dtype;e.forEach(d=>{ti(o,d.shape,"All tensors passed to stack must have matching shapes"),Y(i===d.dtype,()=>"All tensors passed to stack must have matching dtypes")});const a=[],l=e.map(d=>{const f=Jb({inputs:{input:d},backend:n,attrs:{dim:s}});return a.push(f),f}),c=np({inputs:l,backend:n,attrs:{axis:s}});return a.forEach(d=>n.disposeIntermediateTensorInfo(d)),c}const e2e={kernelName:jv,backendName:"cpu",kernelFunc:E9};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function t2e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{paddings:o,constantValue:i}=r;wt(s,"pad");const a=o.map((N,k)=>N[0]+s.shape[k]+N[1]),l=o.map(N=>N[0]),c=n.data.get(s.dataId).values,d=Te(s.shape),f=s.shape.length,p=Et(s.shape),g=Te(a),x=a.length,b=Et(a),w=Ss(s.dtype,g);i!==0&&w.fill(i);for(let N=0;N<d;N++){const I=Tp(N,f,p).map(($,O)=>$+l[O]),R=gl(I,x,b);w[R]=c[N]}return{dataId:n.write(w,a,s.dtype),shape:a,dtype:s.dtype}}const I9={kernelName:zv,backendName:"cpu",kernelFunc:t2e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const n2e=_r((t,e)=>Math.pow(t,e)),r2e=ns(o1,n2e),s2e={kernelName:o1,backendName:"cpu",kernelFunc:r2e};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function o2e(t){const{inputs:e,backend:n,attrs:r}=t,{paramsNestedSplits:s,paramsDenseValues:o,indices:i}=e,{outputRaggedRank:a}=r,l=s.map(C=>n.data.get(C.dataId).values),c=s.map(C=>C.shape),d=n.data.get(o.dataId).values,f=n.data.get(i.dataId).values,[p,g,x]=UV(l,c,d,o.shape,o.dtype,f,i.shape),b=p.map(C=>n.makeTensorInfo([C.length],"int32",C)),w=n.makeTensorInfo(x,o.dtype,g);return b.concat([w])}const i2e={kernelName:bA,backendName:"cpu",kernelFunc:o2e};/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function a2e(t){const{inputs:e,backend:n}=t,{starts:r,limits:s,deltas:o}=e,i=n.data.get(r.dataId).values,a=n.data.get(s.dataId).values,l=n.data.get(o.dataId).values,[c,d]=HV(i,r.shape,r.dtype,a,s.shape,l,o.shape),f=n.makeTensorInfo([c.length],"int32",c),p=n.makeTensorInfo([d.length],r.dtype,d);return[f,p]}const l2e={kernelName:wA,backendName:"cpu",kernelFunc:a2e};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function c2e(t){const{inputs:e,backend:n,attrs:r}=t,{shape:s,values:o,defaultValue:i,rowPartitionTensors:a}=e,{rowPartitionTypes:l}=r,c=n.data.get(s.dataId).values,d=n.data.get(o.dataId).values,f=n.data.get(i.dataId).values,p=a.map(w=>n.data.get(w.dataId).values),g=a.map(w=>w.shape),[x,b]=GV(c,s.shape,d,o.shape,o.dtype,f,i.shape,p,g,l);return n.makeTensorInfo(x,o.dtype,b)}const u2e={kernelName:vA,backendName:"cpu",kernelFunc:c2e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function d2e(t){const{backend:e,attrs:n}=t,{start:r,stop:s,dtype:o,step:i}=n,a=qV(r,s,i,o);return e.makeTensorInfo([a.length],o,a)}const f2e={kernelName:CA,backendName:"cpu",kernelFunc:d2e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const h2e=An(i1,t=>1/t),p2e={kernelName:i1,backendName:"cpu",kernelFunc:h2e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function m2e(t){const{inputs:e,backend:n,attrs:r}=t,{images:s}=e,{alignCorners:o,halfPixelCenters:i,size:a}=r;wt(s,"resizeBilinear");const l=Et(s.shape),[c,d]=a,[f,p,g,x]=s.shape,b=n.data.get(s.dataId).values,w=new Float32Array(Te([f,c,d,x])),C=[o&&c>1?p-1:p,o&&d>1?g-1:g],N=[o&&c>1?c-1:c,o&&d>1?d-1:d];let k=0;const I=C[0]/N[0],R=C[1]/N[1];for(let $=0;$<f;$++)for(let O=0;O<c;O++){let F;i?F=I*(O+.5)-.5:F=I*O;const M=Math.max(0,Math.floor(F)),_=F-M,V=Math.min(p-1,Math.ceil(F)),B=$*l[0]+M*l[1],W=$*l[0]+V*l[1];for(let q=0;q<d;q++){let j;i?j=R*(q+.5)-.5:j=R*q;const G=Math.max(0,Math.floor(j)),Z=j-G,J=Math.min(g-1,Math.ceil(j)),X=B+G*l[2],ee=W+G*l[2],ne=B+J*l[2],oe=W+J*l[2];for(let ye=0;ye<x;ye++){const ge=b[X+ye],ve=b[ee+ye],he=b[ne+ye],Me=b[oe+ye],ze=ge+(he-ge)*Z,Oe=ve+(Me-ve)*Z,Ie=ze+(Oe-ze)*_;w[k++]=Ie}}}return n.makeTensorInfo([f,c,d,x],"float32",w)}const g2e={kernelName:Gv,backendName:"cpu",kernelFunc:m2e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function x2e(t){const{inputs:e,backend:n,attrs:r}=t,{images:s,dy:o}=e,{alignCorners:i}=r;wt([o,s],"resizeBilinearGrad");const a=Et(s.shape),[l,c,d,f]=s.shape,[,p,g]=o.shape,x=new Float32Array(l*c*d*f),b=[i&&p>1?c-1:c,i&&g>1?d-1:d],w=[i&&p>1?p-1:p,i&&g>1?g-1:g],C=b[0]/w[0],N=b[1]/w[1],k=n.data.get(o.dataId).values;let I=0;for(let R=0;R<l;R++){const $=R*a[0];for(let O=0;O<p;O++){const F=O*C,M=Math.floor(F),_=Math.min(Math.ceil(F),c-1),V=$+M*a[1],B=$+_*a[1],W=F-M,q=1-W;for(let j=0;j<g;j++){const G=j*N,Z=Math.floor(G),J=Math.min(Math.ceil(G),d-1),X=G-Z,ee=1-X,ne=V+Z*a[2],oe=V+J*a[2],ye=B+Z*a[2],ge=B+J*a[2],ve=q*ee,he=q*X,Me=W*ee,ze=W*X;for(let Oe=0;Oe<f;Oe++){const Ie=k[I++];x[ne+Oe]+=Ie*ve,x[oe+Oe]+=Ie*he,x[ye+Oe]+=Ie*Me,x[ge+Oe]+=Ie*ze}}}}return n.makeTensorInfo([l,d,c,f],"float32",x)}const y2e={kernelName:EA,backendName:"cpu",kernelFunc:x2e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function b2e(t){const{inputs:e,backend:n,attrs:r}=t,{images:s}=e,{alignCorners:o,halfPixelCenters:i,size:a}=r;wt(s,"resizeNearestNeighbor");const l=Et(s.shape),[c,d]=a,[f,p,g,x]=s.shape,b=n.data.get(s.dataId).values,w=new Float32Array(f*c*d*x),C=[o&&c>1?p-1:p,o&&d>1?g-1:g],N=[o&&c>1?c-1:c,o&&d>1?d-1:d],k=C[0]/N[0],I=C[1]/N[1];let R=0;for(let $=0;$<f;$++){const O=$*l[0];for(let F=0;F<c;F++){const M=i?k*(F+.5):k*F;let _=Math.min(p-1,o?Math.round(M):Math.floor(M));i&&(_=Math.max(0,_));const V=O+_*l[1];for(let B=0;B<d;B++){const W=i?I*(B+.5):I*B;let q=Math.min(g-1,o?Math.round(W):Math.floor(W));i&&(q=Math.max(0,q));const j=V+q*l[2];for(let G=0;G<x;G++){const Z=b[j+G];w[R++]=Z}}}}return n.makeTensorInfo([f,c,d,x],s.dtype,w)}const w2e={kernelName:Hv,backendName:"cpu",kernelFunc:b2e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function v2e(t){const{inputs:e,backend:n,attrs:r}=t,{images:s,dy:o}=e,{alignCorners:i}=r;wt([o,s],"resizeNearestNeighborGrad");const a=Et(s.shape),l=Et(o.shape),[c,d,f,p]=s.shape,[,g,x]=o.shape,b=new Float32Array(c*d*f*p),w=n.data.get(o.dataId).values,C=[i&&g>1?d-1:d,i&&x>1?f-1:f],N=[i&&g>1?g-1:g,i&&x>1?x-1:x],k=C[0]/N[0],I=C[1]/N[1],R=1/k,$=1/I,O=Math.ceil(R)*2+2,F=Math.ceil($)*2+2;for(let M=0;M<c;M++){const _=M*a[0];for(let V=0;V<d;V++){const B=_+V*a[1],W=Math.floor(V*R),q=Math.floor(W-O/2);for(let j=0;j<f;j++){const G=B+j*a[2],Z=Math.floor(j*$),J=Math.floor(Z-F/2);for(let X=0;X<p;X++){let ee=0;for(let ne=0;ne<O;ne++){const oe=ne+q;if(oe<0||oe>=g)continue;const ye=_+oe*l[1],ge=oe*k,ve=Math.min(d-1,i?Math.round(ge):Math.floor(ge));if(V===ve)for(let he=0;he<F;he++){const Me=he+J;if(Me<0||Me>=x)continue;const ze=ye+Me*l[2],Oe=Me*I,Ie=Math.min(f-1,i?Math.round(Oe):Math.floor(Oe));j===Ie&&(ee+=w[ze+X])}}b[G+X]=ee}}}}return n.makeTensorInfo(s.shape,s.dtype,b)}const C2e={kernelName:NA,backendName:"cpu",kernelFunc:v2e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function S2e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{dims:o}=r;wt(s,"reverse");const i=s.shape.length,a=Zt(o,s.shape);if(i===0)return Il({inputs:{x:s},backend:n});const l=new Zr(s.shape,s.dtype),c=n.bufferSync(s);for(let d=0;d<l.size;d++){const f=l.indexToLoc(d),p=f.slice();a.forEach(g=>p[g]=s.shape[g]-1-p[g]),l.set(c.get(...p),...f)}return n.makeTensorInfo(l.shape,l.dtype,l.values)}const N2e={kernelName:qv,backendName:"cpu",kernelFunc:S2e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const E2e={kernelName:VA,backendName:"cpu",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{image:r}=t,{radians:s,fillValue:o,center:i}=e,a=n,l=Ss(r.dtype,Te(r.shape)),[c,d,f,p]=r.shape,[g,x]=K3(i,d,f),b=255,w=Math.sin(s),C=Math.cos(s),N=a.data.get(r.dataId).values;for(let I=0;I<c;I++){const R=I*f*d*p;for(let $=0;$<d;$++){const O=$*(f*p);for(let F=0;F<f;F++){const M=F*p;for(let _=0;_<p;_++){const V=[c,$,F,_],B=V[2],W=V[1];let q=(B-g)*C-(W-x)*w,j=(B-g)*w+(W-x)*C;q=Math.round(q+g),j=Math.round(j+x);let G=o;if(typeof o!="number"&&(_===3?G=b:G=o[_]),q>=0&&q<f&&j>=0&&j<d){const J=j*(f*p),X=q*p,ee=R+J+X+_;G=N[ee]}const Z=R+O+M+_;l[Z]=G}}}}return{dataId:a.write(l,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const I2e=An(c1,t=>{const e=Math.floor(t);return t-e<.5?Math.floor(t):t-e>.5?Math.ceil(t):e%2===0?e:e+1}),k2e={kernelName:c1,backendName:"cpu",kernelFunc:I2e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function T2e(t){const{inputs:e,backend:n,attrs:r}=t,{indices:s,updates:o}=e,{shape:i}=r,{sliceRank:a,numUpdates:l,sliceSize:c,strides:d,outputSize:f}=mf(o,s,i),p=!0,g=n.bufferSync(s),x=n.bufferSync(o),b=vd(g,x,i,f,c,l,a,d,0,p);return n.makeTensorInfo(i,b.dtype,b.values)}const A2e={kernelName:IA,backendName:"cpu",kernelFunc:T2e};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function R2e(t,e){let n=0,r=t.length,s=0;for(;n<r;)s=Math.floor((n+r)/2),t[s]<e?n=s+1:r=s;return r}function D2e(t,e){let n=0,r=t.length,s=0;for(;n<r;)s=Math.floor((n+r)/2),t[s]<=e?n=s+1:r=s;return r}function $2e(t,e,n,r,s,o){const i=Ar("int32",n*s);for(let a=0;a<n;++a){const l=t.slice(a*r,(a+1)*r),c=a*s;for(let d=0;d<s;++d)i[c+d]=o==="left"?R2e(l,e[d+c]):D2e(l,e[d+c])}return i}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function O2e(t){const{inputs:e,backend:n,attrs:r}=t,{sortedSequence:s,values:o}=e,{side:i}=r,a=n.data.get(s.dataId).values,l=n.data.get(o.dataId).values,c=$2e(a,l,s.shape[0],s.shape[1],o.shape[1],i);return n.makeTensorInfo(o.shape,"int32",c)}const _2e={kernelName:TA,backendName:"cpu",kernelFunc:O2e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function P2e(t){const{inputs:e,backend:n}=t,{condition:r,t:s,e:o}=e;wt([r,s,o],"select");const i=r.shape.length,a=n.data.get(r.dataId).values,l=n.data.get(s.dataId).values,c=n.data.get(o.dataId).values,d=Xo(s.dtype,o.dtype),f=Vs(Te(s.shape),d);let p=0;const g=i===0||i>1||s.shape.length===1?1:Te(s.shape.slice(1));for(let x=0;x<a.length;x++)for(let b=0;b<g;b++)a[x]===1?f[p++]=l[x]:f[p++]=c[x];return n.makeTensorInfo(s.shape,d,f)}const F2e={kernelName:Xv,backendName:"cpu",kernelFunc:P2e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const M2e=A2,L2e=R2,B2e=An(d1,t=>t>=0?L2e*t:M2e*(Math.exp(t)-1)),j2e={kernelName:d1,backendName:"cpu",kernelFunc:B2e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const z2e=An(p1,t=>t<0?-1:t>0?1:0),V2e={kernelName:p1,backendName:"cpu",kernelFunc:z2e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const W2e=An(f1,t=>Math.sin(t)),U2e={kernelName:f1,backendName:"cpu",kernelFunc:W2e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const H2e=An(h1,t=>Math.sinh(t)),G2e={kernelName:h1,backendName:"cpu",kernelFunc:H2e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const q2e=11920928955078125e-23,L_=Math.log(q2e)+2,X2e=An(g1,t=>{const e=t>-L_,n=t<L_,r=Math.exp(t);let s;return n?s=r:e?s=t:s=Math.log(1+r),s}),K2e={kernelName:g1,backendName:"cpu",kernelFunc:X2e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Y2e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{blockShape:o,paddings:i}=r;wt([s],"spaceToBatchND");const a=Te(o),l=[[0,0]];l.push(...i);for(let $=1+o.length;$<s.shape.length;++$)l.push([0,0]);const c=I9.kernelFunc({inputs:{x:s},backend:n,attrs:{paddings:l,constantValue:0}}),d=$1(c.shape,o,a,!1),f=O1(d.length,o.length,!1),p=_1(c.shape,o,a,!1),b=qn({inputs:{x:c},backend:n,attrs:{shape:d}}),N=wo({inputs:{x:b},backend:n,attrs:{perm:f}}),R=qn({inputs:{x:N},backend:n,attrs:{shape:p}});return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(b),n.disposeIntermediateTensorInfo(N),R}const Z2e={kernelName:Zv,backendName:"cpu",kernelFunc:Y2e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Q2e(t){const{inputs:e,backend:n}=t,{indices:r,values:s,denseShape:o,defaultValue:i}=e;if(o.shape.length!==1)throw new Error(`Dense shape must be a vector, saw:
        ${o.shape}`);if(r.shape.length!==2)throw new Error(`Indices must be a matrix, saw:
        ${r.shape}`);if(s.shape.length!==1)throw new Error(`Values must be a vector, saw:
        ${s.shape}`);if(i.shape.length!==0)throw new Error(`Default value must be a scalar, saw:
        ${i.shape}`);const a=n.data.get(r.dataId).values,l=n.data.get(s.dataId).values,c=n.data.get(o.dataId).values,d=n.data.get(i.dataId).values[0],[f,p,g,x,b]=ZV(a,r.shape,r.dtype,l,s.dtype,c,d);return[n.makeTensorInfo(p,r.dtype,f),n.makeTensorInfo([p[0]],s.dtype,g),n.makeTensorInfo([x.length],"bool",new Uint8Array(x.map(w=>Number(w)))),n.makeTensorInfo([b.length],r.dtype,new Int32Array(b))]}const J2e={kernelName:AA,backendName:"cpu",kernelFunc:Q2e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eCe(t){const{inputs:e,backend:n}=t,{inputIndices:r,inputShape:s,newShape:o}=e;if(r.shape.length!==2)throw new Error(`Input indices should be a matrix but received shape
        ${r.shape}`);if(s.shape.length!==1)throw new Error(`Input shape should be a vector but received shape
        ${s.shape}`);if(o.shape.length!==1)throw new Error(`Target shape should be a vector but received shape ${o.shape}`);const i=Array.from(n.data.get(s.dataId).values),a=n.data.get(r.dataId).values,l=Array.from(n.data.get(o.dataId).values),[c,d,f]=QV(a,r.shape,r.dtype,i,l);return[n.makeTensorInfo(d,r.dtype,c),n.makeTensorInfo([f.length],o.dtype,new Int32Array(f))]}const tCe={kernelName:RA,backendName:"cpu",kernelFunc:eCe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nCe(t){const{inputs:e,backend:n}=t,{data:r,indices:s,segmentIds:o}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(s.shape.length!==1)throw new Error(`Indices should be a vector but received shape
          ${s.shape}`);if(o.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
          ${o.shape}`);if(s.shape[0]!==o.shape[0])throw new Error("segmentIds and indices should have same size.");const i=n.data.get(r.dataId).values,a=n.data.get(s.dataId).values,l=n.data.get(o.dataId).values,[c,d]=HR(i,r.shape,r.dtype,a,l,!0);return n.makeTensorInfo(d,r.dtype,c)}const rCe={kernelName:DA,backendName:"cpu",kernelFunc:nCe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sCe(t){const{inputs:e,backend:n}=t,{data:r,indices:s,segmentIds:o}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(s.shape.length!==1)throw new Error(`Indices should be a vector but received shape
         ${s.shape}`);if(o.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
         ${o.shape}`);if(s.shape[0]!==o.shape[0])throw new Error("segmentIds and indices should have same size.");const i=n.data.get(r.dataId).values,a=n.data.get(s.dataId).values,l=n.data.get(o.dataId).values,[c,d]=HR(i,r.shape,r.dtype,a,l);return n.makeTensorInfo(d,r.dtype,c)}const oCe={kernelName:$A,backendName:"cpu",kernelFunc:sCe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iCe(t){const{inputs:e,backend:n,attrs:r}=t,{sparseIndices:s,sparseValues:o,defaultValue:i}=e,{outputShape:a}=r,{sliceRank:l,numUpdates:c,sliceSize:d,strides:f,outputSize:p}=mf(o,s,a),g=!1,x=n.bufferSync(s);let b;switch(o.dtype){case"bool":{const w=n.bufferSync(o),C=!!n.data.get(i.dataId).values[0];b=vd(x,w,a,p,d,c,l,f,C,g);break}case"float32":{const w=n.bufferSync(o),C=n.data.get(i.dataId).values[0];b=vd(x,w,a,p,d,c,l,f,C,g);break}case"int32":{const w=n.bufferSync(o),C=n.data.get(i.dataId).values[0];b=vd(x,w,a,p,d,c,l,f,C,g);break}case"string":{const w=n.bufferSync(o),C=du(n.data.get(i.dataId).values[0]);b=vd(x,w,a,p,d,c,l,f,C,g);break}default:throw new Error(`Unsupported type ${o.dtype}`)}return n.makeTensorInfo(a,b.dtype,b.values)}const aCe={kernelName:OA,backendName:"cpu",kernelFunc:iCe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lCe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{numOrSizeSplits:o,axis:i}=r,a=Zt(i,s.shape)[0],l=uR(s,o,a),c=new Array(s.shape.length).fill(0),d=s.shape.slice();return l.map(f=>{const p=[...d];p[a]=f;const g=Zd({inputs:{x:s},backend:n,attrs:{begin:c,size:p}});return c[a]+=f,g})}const cCe={kernelName:Qv,backendName:"cpu",kernelFunc:lCe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uCe={kernelName:_A,backendName:"cpu",kernelFunc:({inputs:t,backend:e})=>{const{x:n}=t,r=e;wt(n,"square");const s=r.data.get(n.dataId).values,o=new Float32Array(s.length);for(let a=0;a<s.length;++a){const l=s[a];o[a]=l*l}return{dataId:r.write(o,n.shape,n.dtype),shape:n.shape,dtype:n.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dCe=An(S1,(t,e)=>{const n=e;return isNaN(t)?NaN:t>0?1:n.alpha}),fCe={kernelName:S1,backendName:"cpu",kernelFunc:dCe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hCe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{begin:o,end:i,strides:a,beginMask:l,endMask:c,ellipsisMask:d,newAxisMask:f,shrinkAxisMask:p}=r;wt(s,"stridedSlice");const{finalShapeSparse:g,finalShape:x,isIdentity:b,sliceDim0:w,isSimpleSlice:C,begin:N,end:k,strides:I}=G3(s.shape,o,i,a,l,c,d,f,p);let R;if(b)R=qn({inputs:{x:s},backend:n,attrs:{shape:x}});else if(w||C){Y(s.shape.length>=1,()=>`Input must have rank at least 1, got: ${s.shape.length}`);const $=W3(N,k,I),O=Zd({inputs:{x:s},backend:n,attrs:{begin:N,size:$}});R=qn({inputs:{x:O},backend:n,attrs:{shape:x}}),n.disposeIntermediateTensorInfo(O)}else{const $=n.bufferSync(s),O=t9(g,$,I,N);R=n.makeTensorInfo(x,O.dtype,O.values)}return R}const pCe={kernelName:PA,backendName:"cpu",kernelFunc:hCe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mCe(t){const{inputs:e,backend:n,attrs:r}=t,{separator:s,nGramWidths:o,leftPad:i,rightPad:a,padWidth:l,preserveShortSequences:c}=r,{data:d,dataSplits:f}=e,p=n.data.get(d.dataId).values,g=n.data.get(f.dataId).values,[x,b]=n9(p,g,s,o,i,a,l,c);return[n.makeTensorInfo([x.length],"string",x),n.makeTensorInfo(f.shape,"int32",b)]}const gCe={kernelName:FA,backendName:"cpu",kernelFunc:mCe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xCe(t){const{inputs:e,backend:n,attrs:r}=t,{skipEmpty:s}=r,{input:o,delimiter:i}=e;if(o.dtype!=="string")throw new Error("Input must be of datatype string");if(o.shape.length!==1)throw new Error(`Input must be a vector, got shape: ${o.shape}`);if(i.shape.length!==0)throw new Error(`Delimiter must be a scalar, got shape: ${i.shape}`);const a=n.data.get(o.dataId).values,l=n.data.get(i.dataId).values[0],[c,d,f]=r9(a,l,s),p=d.length;return[n.makeTensorInfo([p,2],"int32",c),n.makeTensorInfo([p],"string",d),n.makeTensorInfo([2],"int32",new Int32Array(f))]}const yCe={kernelName:MA,backendName:"cpu",kernelFunc:xCe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bCe(t){const{inputs:e,backend:n,attrs:r}=t,{numBuckets:s}=r,{input:o}=e;if(o.dtype!=="string")throw new Error("Input must be of datatype string");if(s<=0)throw new Error("Number of buckets must be at least 1");const i=n.data.get(o.dataId).values,a=s9(i,s);return n.makeTensorInfo(o.shape,"int32",a)}const wCe={kernelName:LA,backendName:"cpu",kernelFunc:bCe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vCe=An(w1,t=>Math.tan(t)),CCe={kernelName:w1,backendName:"cpu",kernelFunc:vCe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SCe=An(v1,t=>Math.tanh(t)),NCe={kernelName:v1,backendName:"cpu",kernelFunc:SCe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ECe(t){const{inputs:e,backend:n}=t,{tensor:r,indices:s,updates:o}=e,{sliceRank:i,numUpdates:a,sliceSize:l,strides:c,outputSize:d}=mf(o,s,r.shape),f=!1,p=n.bufferSync(s),g=n.bufferSync(o),x=n.bufferSync(r),b=vd(p,g,r.shape,d,l,a,i,c,x,f);return n.makeTensorInfo(r.shape,b.dtype,b.values)}const ICe={kernelName:kA,backendName:"cpu",kernelFunc:ECe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kCe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{reps:o}=r;wt(s,"tile");const i=i9(n.bufferSync(s),o);return n.makeTensorInfo(i.shape,i.dtype,i.values)}const TCe={kernelName:C1,backendName:"cpu",kernelFunc:kCe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ACe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{k:o,sorted:i}=r;wt(s,"topk");const a=n.data.get(s.dataId).values,[l,c]=l9(a,s.shape,s.dtype,o,i);return[n.makeTensorInfo(l.shape,l.dtype,l.values),n.makeTensorInfo(c.shape,c.dtype,c.values)]}const RCe={kernelName:BA,backendName:"cpu",kernelFunc:ACe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DCe(t){const{inputs:e,attrs:n,backend:r}=t,{image:s,transforms:o}=e,{interpolation:i,fillMode:a,fillValue:l,outputShape:c}=n,[d,f,p,g]=s.shape,[x,b]=c??[f,p],w=[d,x,b,g],C=Et(s.shape),N=C[0],k=C[1],I=C[2],R=Et(w),$=R[0],O=R[1],F=R[2],M=Ss(s.dtype,Te(w));M.fill(l);const _=r.data.get(s.dataId).values,V=r.data.get(o.dataId).values;for(let W=0;W<d;++W){const q=o.shape[0]===1?V:V.subarray(W*8,W*8+8);for(let j=0;j<x;++j)for(let G=0;G<b;++G)for(let Z=0;Z<g;++Z){let J;const X=q[6]*G+q[7]*j+1;if(X===0)continue;const ee=(q[0]*G+q[1]*j+q[2])/X,ne=(q[3]*G+q[4]*j+q[5])/X,oe=B_(ee,p,a),ye=B_(ne,f,a);switch(i){case"nearest":J=MCe(_,f,p,N,k,I,W,ye,oe,Z,l);break;case"bilinear":J=LCe(_,f,p,N,k,I,W,ye,oe,Z,l);break;default:throw new Error(`Error in Transform: Expect 'nearest' or 'bilinear', but got ${i}`)}const ge=W*$+j*O+G*F+Z;M[ge]=J}return r.makeTensorInfo(w,s.dtype,M)}return{dataId:r.write(M,w,s.dtype),shape:s.shape,dtype:s.dtype}}const $Ce={kernelName:jA,backendName:"cpu",kernelFunc:DCe};function B_(t,e,n){switch(n){case"reflect":return OCe(t,e);case"wrap":return _Ce(t,e);case"nearest":return FCe(t,e);case"constant":default:return PCe(t)}}function OCe(t,e){let n=t;if(n<0)if(e<=1)n=0;else{const r=2*e;n<r&&(n=r*Math.trunc(-n/r)+n),n=n<-e?n+r:-n-1}else if(n>e-1)if(e<=1)n=0;else{const r=2*e;n-=r*Math.trunc(n/r),n>=e&&(n=r-n-1)}return Ld(0,n,e-1)}function _Ce(t,e){let n=t;if(n<0)if(e<=1)n=0;else{const r=e-1;n+=e*(Math.trunc(-n/r)+1)}else if(n>e-1)if(e<=1)n=0;else{const r=e-1;n-=e*Math.trunc(n/r)}return Ld(0,n,e-1)}function PCe(t,e){return t}function FCe(t,e){return Ld(0,t,e-1)}function Xm(t,e,n,r,s,o,i,a,l,c,d){const f=i*r+a*s+l*o+c;return 0<=a&&a<e&&0<=l&&l<n?t[f]:d}function MCe(t,e,n,r,s,o,i,a,l,c,d){const f=Math.round(a),p=Math.round(l);return Xm(t,e,n,r,s,o,i,f,p,c,d)}function LCe(t,e,n,r,s,o,i,a,l,c,d){const f=Math.floor(a),p=Math.floor(l),g=f+1,x=p+1,b=(x-l)*Xm(t,e,n,r,s,o,i,f,p,c,d)+(l-p)*Xm(t,e,n,r,s,o,i,f,x,c,d),w=(x-l)*Xm(t,e,n,r,s,o,i,g,p,c,d)+(l-p)*Xm(t,e,n,r,s,o,i,g,x,c,d);return(g-a)*b+(a-f)*w}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BCe(t){const{inputs:e,attrs:n,backend:r}=t,{axis:s}=n,{x:o}=e;wt(o,"unique");const i=r.data.get(o.dataId).values,{outputValues:a,outputShape:l,indices:c}=c9(i,s,o.shape,o.dtype);return[r.makeTensorInfo(l,o.dtype,a),r.makeTensorInfo([c.length],"int32",c)]}const jCe={kernelName:zA,backendName:"cpu",kernelFunc:BCe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zCe(t){const{inputs:e,backend:n,attrs:r}=t,{value:s}=e;let{axis:o}=r;o<0&&(o+=s.shape.length);const i=s.shape.length,a=s.shape[o],l=new Array(i-1);let c=0;for(let g=0;g<i;g++)g!==o&&(l[c++]=s.shape[g]);const d=new Array(i).fill(0),f=s.shape.slice();f[o]=1;const p=new Array(a);for(let g=0;g<p.length;g++){d[o]=g;const x=Zd({inputs:{x:s},backend:n,attrs:{begin:d,size:f}});p[g]=qn({inputs:{x},backend:n,attrs:{shape:l}}),n.disposeIntermediateTensorInfo(x)}return p}const VCe={kernelName:t2,backendName:"cpu",kernelFunc:zCe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WCe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,segmentIds:o}=e,{numSegments:i}=r;wt(s,"unsortedSegmentSum");const a=s.shape.length,l=o.shape.length,c=[],d=[],f=a-l;let p=o;for(let x=0;x<f;++x){const b=Jb({inputs:{input:p},backend:n,attrs:{dim:x+1}});p=b,d.push(b)}for(let x=0;x<i;++x){const b=Au(x,"int32"),w=n.makeTensorInfo([],"int32",b),C=NV({inputs:{a:w,b:p},backend:n}),N=wu({inputs:{x:C},backend:n,attrs:{dtype:"float32"}}),k=V2({inputs:{a:N,b:s},backend:n}),I=W1({inputs:{x:k},backend:n,attrs:{axis:0,keepDims:!1}});c.push(I),d.push(w),d.push(C),d.push(N),d.push(k),d.push(I)}const g=E9({inputs:c,backend:n,attrs:{axis:0}});return d.forEach(x=>n.disposeIntermediateTensorInfo(x)),g}const UCe={kernelName:n2,backendName:"cpu",kernelFunc:WCe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const HCe=[Eye,oxe,kye,Aye,dxe,Dye,Oye,Pye,Mye,Bye,zye,Wye,Hye,Xye,Yye,Jye,tbe,rbe,obe,Sye,abe,cbe,dbe,hxe,hbe,cxe,mxe,mbe,ixe,xbe,bbe,wbe,Cbe,Nbe,Ibe,Tbe,Rbe,$be,_be,Fbe,Lbe,jbe,Vbe,Ube,Hbe,qbe,Kbe,Zbe,Qbe,Jbe,ewe,nwe,owe,gye,awe,gxe,mwe,xxe,gwe,bxe,Cwe,Swe,Ewe,vxe,Sxe,kwe,Awe,Dwe,Owe,Exe,kxe,axe,Pwe,ybe,Mwe,Bwe,zwe,xye,Axe,Dxe,Wwe,Oxe,Hwe,Xwe,Ywe,Jwe,tve,rve,sve,Pxe,ive,lve,uve,fve,pve,gve,yve,Mxe,wve,Sve,jve,Bxe,zxe,Wve,Gve,Kve,Wxe,Zve,Jve,e2e,I9,s2e,bye,Gxe,i2e,l2e,u2e,f2e,lxe,$I,p2e,wye,vye,Cye,g2e,y2e,w2e,C2e,N2e,E2e,k2e,eye,A2e,_2e,F2e,j2e,nye,V2e,U2e,G2e,rye,Lve,K2e,Z2e,J2e,tCe,rCe,oCe,aCe,cCe,iye,uCe,lye,uye,fCe,pCe,gCe,yCe,wCe,pye,rwe,CCe,NCe,ICe,TCe,RCe,$Ce,Uxe,jCe,VCe,UCe,Qve];for(const t of HCe)hB(t);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fd={},Yx={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function GCe(t,e){fd[t]=e}function Fa(t,e){if(!(t in fd)||e!=null){const r=XCe(t,e);if(r!==null)fd[t]=r;else return console.log("Could not get context for WebGL version",t),null}const n=fd[t];return n==null||n.isContextLost()?(delete fd[t],Fa(t)):(n.disable(n.DEPTH_TEST),n.disable(n.STENCIL_TEST),n.disable(n.BLEND),n.disable(n.DITHER),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SAMPLE_COVERAGE),n.enable(n.SCISSOR_TEST),n.enable(n.CULL_FACE),n.cullFace(n.BACK),fd[t])}function qCe(t){if(!Ee().getBool("IS_SAFARI")&&typeof OffscreenCanvas<"u"&&t===2)return new OffscreenCanvas(300,150);if(typeof document<"u")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}function XCe(t,e){if(t!==1&&t!==2)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");const n=e??qCe(t);return n.addEventListener("webglcontextlost",r=>{r.preventDefault(),delete fd[t]},!1),Ee().getBool("SOFTWARE_WEBGL_ENABLED")&&(Yx.failIfMajorPerformanceCaveat=!1),t===1?n.getContext("webgl",Yx)||n.getContext("experimental-webgl",Yx):n.getContext("webgl2",Yx)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var n0;(function(t){t[t.DENSE=0]="DENSE",t[t.SHARED_BATCH=1]="SHARED_BATCH"})(n0||(n0={}));var fi;(function(t){t[t.RENDER=0]="RENDER",t[t.UPLOAD=1]="UPLOAD",t[t.PIXELS=2]="PIXELS",t[t.DOWNLOAD=3]="DOWNLOAD"})(fi||(fi={}));var ws;(function(t){t[t.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",t[t.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",t[t.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",t[t.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",t[t.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"})(ws||(ws={}));function U1(t,e){return[e,t]}function KCe(t,e){return t*e}function Zx(t){const e=Te(t),n=Math.ceil(e/4);return BE(n)}function Mp(t,e){return[Math.max(1,Math.ceil(e/2)),Math.max(1,Math.ceil(t/2))]}function YCe(t,e){const[n,r]=Mp(t,e);return n*r*4}function nD(t,e){const n=t;let r,s,o,i,a,l,c,d,f,p;return Ee().getNumber("WEBGL_VERSION")===2?(r=n.R32F,s=n.R16F,o=n.RGBA16F,i=n.RGBA32F,a=n.RED,c=4,d=1,f=n.HALF_FLOAT,p=n.FLOAT,l=n.RGBA8):(r=t.RGBA,s=t.RGBA,o=t.RGBA,i=n.RGBA,a=t.RGBA,c=4,d=4,f=e!=null?e.HALF_FLOAT_OES:null,p=t.FLOAT,l=t.RGBA),{internalFormatFloat:r,internalFormatHalfFloat:s,internalFormatPackedHalfFloat:o,internalFormatPackedFloat:i,textureFormatFloat:a,downloadTextureFormat:l,downloadUnpackNumChannels:c,defaultNumChannels:d,textureTypeHalfFloat:f,textureTypeFloat:p}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ct(t,e){const n=e();return Ee().getBool("DEBUG")&&ZCe(t),n}function ZCe(t){const e=t.getError();if(e!==t.NO_ERROR)throw new Error("WebGL Error: "+tSe(t,e))}const QCe=596e-10,JCe=65504;function eSe(t){return!!(Ee().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||t===0||QCe<Math.abs(t)&&Math.abs(t)<JCe)}function tSe(t,e){switch(e){case t.NO_ERROR:return"NO_ERROR";case t.INVALID_ENUM:return"INVALID_ENUM";case t.INVALID_VALUE:return"INVALID_VALUE";case t.INVALID_OPERATION:return"INVALID_OPERATION";case t.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case t.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case t.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return`Unknown error code ${e}`}}function Qx(t,e){return yc(t,()=>t.getExtension(e),'Extension "'+e+'" not supported on this browser.')}function nSe(t,e){const n=yc(t,()=>t.createShader(t.VERTEX_SHADER),"Unable to create vertex WebGLShader.");if(ct(t,()=>t.shaderSource(n,e)),ct(t,()=>t.compileShader(n)),t.getShaderParameter(n,t.COMPILE_STATUS)===!1)throw console.log(t.getShaderInfoLog(n)),new Error("Failed to compile vertex shader.");return n}function rSe(t,e){const n=yc(t,()=>t.createShader(t.FRAGMENT_SHADER),"Unable to create fragment WebGLShader.");if(ct(t,()=>t.shaderSource(n,e)),ct(t,()=>t.compileShader(n)),Ee().get("ENGINE_COMPILE_ONLY"))return n;if(t.getShaderParameter(n,t.COMPILE_STATUS)===!1)throw k9(e,t.getShaderInfoLog(n)),new Error("Failed to compile fragment shader.");return n}const sSe=/ERROR: [0-9]+:([0-9]+):/g;function k9(t,e){const n=sSe.exec(e);if(n==null){console.log(`Couldn't parse line number in error: ${e}`),console.log(t);return}const r=+n[1],s=t.split(`
`),o=s.length.toString().length+2,i=s.map((f,p)=>Sh((p+1).toString(),o)+f);let a=0;for(let f=0;f<i.length;f++)a=Math.max(i[f].length,a);const l=i.slice(0,r-1),c=i.slice(r-1,r),d=i.slice(r);console.log(l.join(`
`)),console.log(e.split(`
`)[0]),console.log(`%c ${Sh(c[0],a)}`,"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(d.join(`
`))}function oSe(t){return yc(t,()=>t.createProgram(),"Unable to create WebGLProgram.")}function iSe(t,e){if(ct(t,()=>t.linkProgram(e)),!Ee().get("ENGINE_COMPILE_ONLY")&&t.getProgramParameter(e,t.LINK_STATUS)===!1)throw console.log(t.getProgramInfoLog(e)),new Error("Failed to link vertex and fragment shaders.")}function cN(t,e){if(ct(t,()=>t.validateProgram(e)),t.getProgramParameter(e,t.VALIDATE_STATUS)===!1)throw console.log(t.getProgramInfoLog(e)),new Error("Shader program validation failed.")}function aSe(t,e){const n=yc(t,()=>t.createBuffer(),"Unable to create WebGLBuffer");return ct(t,()=>t.bindBuffer(t.ARRAY_BUFFER,n)),ct(t,()=>t.bufferData(t.ARRAY_BUFFER,e,t.STATIC_DRAW)),n}function lSe(t,e){const n=yc(t,()=>t.createBuffer(),"Unable to create WebGLBuffer");return ct(t,()=>t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,n)),ct(t,()=>t.bufferData(t.ELEMENT_ARRAY_BUFFER,e,t.STATIC_DRAW)),n}function cSe(t){return yc(t,()=>t.createTexture(),"Unable to create WebGLTexture.")}function uSe(t,e){const n=Ee().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(t<=0||e<=0){const r=`[${t}x${e}]`;throw new Error("Requested texture size "+r+" is invalid.")}if(t>n||e>n){const r=`[${t}x${e}]`,s=`[${n}x${n}]`;throw new Error("Requested texture size "+r+" greater than WebGL maximum on this browser / GPU "+s+".")}}function dSe(t){return yc(t,()=>t.createFramebuffer(),"Unable to create WebGLFramebuffer.")}function j_(t,e,n,r,s,o,i){const a=t.getAttribLocation(e,n);return a===-1?!1:(ct(t,()=>t.bindBuffer(t.ARRAY_BUFFER,r)),ct(t,()=>t.vertexAttribPointer(a,s,t.FLOAT,!1,o,i)),ct(t,()=>t.enableVertexAttribArray(a)),!0)}function fSe(t,e,n){xSe(t,n),ct(t,()=>t.activeTexture(t.TEXTURE0+n)),ct(t,()=>t.bindTexture(t.TEXTURE_2D,e))}function hSe(t,e,n){return yc(t,()=>t.getUniformLocation(e,n),'uniform "'+n+'" not present in program.')}function pSe(t,e,n){return t.getUniformLocation(e,n)}function mSe(t,e,n,r){ct(t,()=>fSe(t,e,r)),ct(t,()=>t.uniform1i(n,r))}function uN(t,e,n){ct(t,()=>t.bindFramebuffer(t.FRAMEBUFFER,n)),ct(t,()=>t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0))}function z_(t,e){ct(t,()=>t.bindFramebuffer(t.FRAMEBUFFER,e)),ct(t,()=>t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0))}function Jx(t){const e=t.checkFramebufferStatus(t.FRAMEBUFFER);if(e!==t.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+gSe(t,e))}function gSe(t,e){switch(e){case t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case t.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return`unknown error ${e}`}}function yc(t,e,n){const r=ct(t,()=>e());if(r==null)throw new Error(n);return r}function xSe(t,e){const n=t.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=e+t.TEXTURE0;if(r<t.TEXTURE0||r>n){const s=`[gl.TEXTURE0, gl.TEXTURE${n}]`;throw new Error(`textureUnit must be in ${s}.`)}}function rp(t,e=2){return Te(t.slice(0,t.length-e))}function sp(t){if(t.length===0)throw Error("Cannot get rows and columns of an empty shape array.");return[t.length>1?t[t.length-2]:1,t[t.length-1]]}function ey(t){let e=[1,1,1];return t.length===0||t.length===1&&t[0]===1||(e=[rp(t),...sp(t)]),e}function ySe(t,e=!1){let n=Ee().getNumber("WEBGL_MAX_TEXTURE_SIZE"),r=Ee().getNumber("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE");r===1/0&&Ee().getBool("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE")&&(r=n/2),e&&(n=n*2,r=r*2,t=t.map((a,l)=>l>=t.length-2?FT(t[l]):t[l]),t.length===1&&(t=[2,t[0]])),t.length!==2&&(t=Tu(t).newShape);let s=Te(t),o=null;t.length<=1&&s<=n?o=[1,s]:t.length===2&&t[0]<=n&&t[1]<=n?o=t:t.length===3&&t[0]*t[1]<=n&&t[2]<=n?o=[t[0]*t[1],t[2]]:t.length===3&&t[0]<=n&&t[1]*t[2]<=n?o=[t[0],t[1]*t[2]]:t.length===4&&t[0]*t[1]*t[2]<=n&&t[3]<=n?o=[t[0]*t[1]*t[2],t[3]]:t.length===4&&t[0]<=n&&t[1]*t[2]*t[3]<=n&&(o=[t[0],t[1]*t[2]*t[3]]);const i=o!=null&&Math.max(...o)>r&&Math.min(...o)<=(e?2:1)&&Math.min(...o)>0;if(o==null||i)if(e){const a=rp(t);let l=2,c=2;t.length&&([l,c]=sp(t)),s=a*(l/2)*(c/2),o=BE(s).map(d=>d*2)}else o=BE(s);return o}function ty(t){return t%2===0}function tw(t,e){if(t=t.slice(-2),e=e.slice(-2),nn(t,e)||!t.length||!e.length||t[0]===0||t[1]===0||e[0]===0||e[1]===0)return!0;if(t.length!==e.length){const n=t[t.length-1],r=e[e.length-1];if(n===r||ty(n)&&ty(r)&&(t[0]===1||e[0]===1))return!0}return t[1]===e[1]&&ty(t[0])&&ty(e[0])}let dN,fN;function bSe(t){if(dN==null){const e=Fa(t);dN=e.getParameter(e.MAX_TEXTURE_SIZE)}return dN}function wSe(t){if(fN==null){const e=Fa(t);fN=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,fN)}function vSe(t){if(t===0)return 0;let e;const n=Fa(t);return Xi(n,"EXT_disjoint_timer_query_webgl2")&&t===2?e=2:Xi(n,"EXT_disjoint_timer_query")?e=1:e=0,e}function Xi(t,e){return t.getExtension(e)!=null}function V_(t){try{if(Fa(t)!=null)return!0}catch(e){return console.log("Error when getting WebGL context: ",e),!1}return!1}function CSe(t){if(t===0)return!1;const e=Fa(t);if(t===1){if(!Xi(e,"OES_texture_float"))return!1}else if(!Xi(e,"EXT_color_buffer_float"))return!1;return _I(e)}function SSe(t){if(t===0)return!1;const e=Fa(t);if(t===1){if(!Xi(e,"OES_texture_float")||!Xi(e,"WEBGL_color_buffer_float"))return!1}else{if(Xi(e,"EXT_color_buffer_float"))return _I(e);const r="EXT_color_buffer_half_float";if(Xi(e,r)){const s=e.getExtension(r);return NSe(e,s)}return!1}return _I(e)}function _I(t){const e=nD(t),n=t.createTexture();t.bindTexture(t.TEXTURE_2D,n),t.texImage2D(t.TEXTURE_2D,0,e.internalFormatFloat,1,1,0,e.textureFormatFloat,e.textureTypeFloat,null);const o=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,o),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,n,0);const i=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(n),t.deleteFramebuffer(o),i}function NSe(t,e){const n=nD(t,e),r=t.createTexture();t.bindTexture(t.TEXTURE_2D,r),t.texImage2D(t.TEXTURE_2D,0,n.internalFormatHalfFloat,1,1,0,n.textureFormatFloat,n.textureTypeHalfFloat,null);const i=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,i),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,r,0);const a=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(r),t.deleteFramebuffer(i),a}function ESe(t){return t!==2?!1:Fa(t).fenceSync!=null}function H1(t,e){Array.isArray(t)||(t=[t]),t.forEach(n=>{n!=null&&Y(n.dtype!=="complex64",()=>`${e} does not support complex64 tensors in the WebGL backend.`)})}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const St=Ee();St.registerFlag("HAS_WEBGL",()=>St.getNumber("WEBGL_VERSION")>0);St.registerFlag("WEBGL_VERSION",()=>V_(2)?2:V_(1)?1:0);St.registerFlag("WEBGL_CHECK_NUMERICAL_PROBLEMS",()=>!1);St.registerFlag("WEBGL_BUFFER_SUPPORTED",()=>St.get("WEBGL_VERSION")===2);St.registerFlag("WEBGL_CPU_FORWARD",()=>!0);St.registerFlag("WEBGL_FORCE_F16_TEXTURES",()=>!1);St.registerFlag("WEBGL_PACK",()=>St.getBool("HAS_WEBGL"));St.registerFlag("WEBGL_PACK_NORMALIZATION",()=>St.getBool("WEBGL_PACK"));St.registerFlag("WEBGL_PACK_CLIP",()=>St.getBool("WEBGL_PACK"));St.registerFlag("WEBGL_PACK_DEPTHWISECONV",()=>St.getBool("WEBGL_PACK"));St.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",()=>St.getBool("WEBGL_PACK"));St.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",()=>St.getBool("WEBGL_PACK"));St.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",()=>St.getBool("WEBGL_PACK"));St.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",()=>St.getBool("WEBGL_PACK"));St.registerFlag("WEBGL_PACK_REDUCE",()=>St.getBool("WEBGL_PACK"));St.registerFlag("WEBGL_LAZILY_UNPACK",()=>St.getBool("WEBGL_PACK"));St.registerFlag("WEBGL_CONV_IM2COL",()=>St.getBool("WEBGL_PACK"));St.registerFlag("WEBGL_PACK_CONV2DTRANSPOSE",()=>St.getBool("WEBGL_PACK"));St.registerFlag("WEBGL_MAX_TEXTURE_SIZE",()=>bSe(St.getNumber("WEBGL_VERSION")));St.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",()=>wSe(St.getNumber("WEBGL_VERSION")));St.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",()=>{const t=St.getNumber("WEBGL_VERSION");return t===0?0:vSe(t)});St.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",()=>St.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!RB());St.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",()=>CSe(St.getNumber("WEBGL_VERSION")));St.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",()=>St.getBool("WEBGL_FORCE_F16_TEXTURES")?!1:St.getBool("WEBGL_RENDER_FLOAT32_CAPABLE"));St.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",()=>SSe(St.getNumber("WEBGL_VERSION")));St.registerFlag("WEBGL_FENCE_API_ENABLED",()=>ESe(St.getNumber("WEBGL_VERSION")));St.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",()=>St.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0);St.registerFlag("WEBGL_DELETE_TEXTURE_THRESHOLD",()=>-1,t=>{if(typeof t!="number")throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be a number but got ${t}.`);if(t<0&&t!==-1)throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be -1 (indicating never delete) or at least 0, but got ${t}.`)});St.registerFlag("WEBGL_FLUSH_THRESHOLD",()=>RB()?1:-1,t=>{if(typeof t!="number")throw new Error(`WEBGL_FLUSH_THRESHOLD must be a number but got ${t}.`);if(t<0&&t!==-1)throw new Error(`WEBGL_FLUSH_THRESHOLD must be -1 (indicating never manual flush) or at least 0, but got ${t}.`)});St.registerFlag("CPU_HANDOFF_SIZE_THRESHOLD",()=>128);St.registerFlag("WEBGL_USE_SHAPES_UNIFORMS",()=>!1);St.registerFlag("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD",()=>1e5);St.registerFlag("TOPK_K_CPU_HANDOFF_THRESHOLD",()=>128);St.registerFlag("WEBGL_EXP_CONV",()=>!1);St.registerFlag("SOFTWARE_WEBGL_ENABLED",()=>St.getBool("IS_TEST"));St.registerFlag("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE",()=>1/0);St.registerFlag("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE",()=>!1);St.registerFlag("WEBGL2_ISNAN_CUSTOM",()=>!1);St.registerFlag("ENGINE_COMPILE_ONLY",()=>!1);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uo(){let t,e,n,r,s,o,i,a,l,c;return Ee().getNumber("WEBGL_VERSION")===2?(t="#version 300 es",e="in",n="out",r="in",s="texture",o="outputColor",i="out vec4 outputColor;",a=Ee().getBool("WEBGL2_ISNAN_CUSTOM")?`
      bool isnan_custom(float val) {
        uint floatToUint = floatBitsToUint(val);
        return (floatToUint & 0x7fffffffu) > 0x7f800000u;
      }

      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan_custom(val.x),
          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));
      }

      #define isnan(value) isnan_custom(value)
    `:"",l="",c=`
      #define round(value) newRound(value)
      int newRound(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 newRound(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `):(t="",e="attribute",n="varying",r="varying",s="texture2D",o="gl_FragColor",i="",a=`
      #define isnan(value) isnan_custom(value)
      bool isnan_custom(float val) {
        return (val > 0. || val < 1. || val == 0.) ? false : true;
      }
      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));
      }
    `,l=`
      uniform float INFINITY;

      bool isinf(float val) {
        return abs(val) == INFINITY;
      }
      bvec4 isinf(vec4 val) {
        return equal(abs(val), vec4(INFINITY));
      }
    `,c=`
      int round(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 round(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `),{version:t,attribute:e,varyingVs:n,varyingFs:r,texture2D:s,output:o,defineOutput:i,defineSpecialNaN:a,defineSpecialInf:l,defineRound:c}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bf(t,e,n="index"){const r=Et(e);return r.map((s,o)=>{const i=`int ${t[o]} = ${n} / ${s}`,a=o===r.length-1?`int ${t[o+1]} = ${n} - ${t[o]} * ${s}`:`index -= ${t[o]} * ${s}`;return`${i}; ${a};`}).join("")}function W2(t,e,n="index"){const r=Et(e);return r.map((s,o)=>{const i=`int ${t[o]} = ${n} / outShapeStrides[${o}]`,a=o===r.length-1?`int ${t[o+1]} = ${n} - ${t[o]} * outShapeStrides[${o}]`:`index -= ${t[o]} * outShapeStrides[${o}]`;return`${i}; ${a};`}).join("")}function ISe(t,e){const n=t.length,r=t.map(o=>`${e}[${o}]`),s=new Array(n-1);s[n-2]=r[n-1];for(let o=n-3;o>=0;--o)s[o]=`(${s[o+1]} * ${r[o+1]})`;return s}function kSe(t,e,n="index"){const r=t.map((o,i)=>i),s=ISe(r,e);return s.map((o,i)=>{const a=`int ${t[i]} = ${n} / ${s[i]}`,l=i===s.length-1?`int ${t[i+1]} = ${n} - ${t[i]} * ${s[i]}`:`index -= ${t[i]} * ${s[i]}`;return`${a}; ${l};`}).join("")}function rD(t){const e=Et(t).map(n=>n.toString());return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * ${e[0]} + coords.y * ${e[1]} + coords.z;
  }
`}function sD(){return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;
  }
`}const T9=`
  const float FLOAT_MAX = 1.70141184e38;
  const float FLOAT_MIN = 1.17549435e-38;

  lowp vec4 encode_float(highp float v) {
    if (isnan(v)) {
      return vec4(255, 255, 255, 255);
    }

    highp float av = abs(v);

    if(av < FLOAT_MIN) {
      return vec4(0.0, 0.0, 0.0, 0.0);
    } else if(v > FLOAT_MAX) {
      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
    } else if(v < -FLOAT_MAX) {
      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
    }

    highp vec4 c = vec4(0,0,0,0);

    highp float e = floor(log2(av));
    highp float m = exp2(fract(log2(av))) - 1.0;

    c[2] = floor(128.0 * m);
    m -= c[2] / 128.0;
    c[1] = floor(32768.0 * m);
    m -= c[1] / 32768.0;
    c[0] = floor(8388608.0 * m);

    highp float ebias = e + 127.0;
    c[3] = floor(ebias / 2.0);
    ebias -= c[3] * 2.0;
    c[2] += floor(ebias) * 128.0;

    c[3] += 128.0 * step(0.0, -v);

    return c / 255.0;
  }
`;/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const{getBroadcastDims:A9}=xhe;function TSe(t,e,n){const r=[];if(t.forEach(g=>{const x=Te(g.shapeInfo.logicalShape);if(g.shapeInfo.isUniform?r.push(`uniform float ${g.name}${x>1?`[${x}]`:""};`):(r.push(`uniform sampler2D ${g.name};`),r.push(`uniform int offset${g.name};`)),n.enableShapeUniforms){const{uniformShape:b}=oD(n.packedInputs,g.shapeInfo.logicalShape,g.shapeInfo.texShape);switch(b.length){case 1:r.push(`uniform int ${g.name}Shape;`);break;case 2:r.push(`uniform ivec2 ${g.name}Shape;`);break;case 3:r.push(`uniform ivec3 ${g.name}Shape;`);break;case 4:r.push(`uniform ivec4 ${g.name}Shape;`);break}r.push(`uniform ivec2 ${g.name}TexShape;`)}}),n.enableShapeUniforms){switch(e.logicalShape.length){case 1:r.push("uniform int outShape;");break;case 2:r.push("uniform ivec2 outShape;"),r.push("uniform int outShapeStrides;");break;case 3:r.push("uniform ivec3 outShape;"),r.push("uniform ivec2 outShapeStrides;");break;case 4:r.push("uniform ivec4 outShape;"),r.push("uniform ivec3 outShapeStrides;");break}r.push("uniform ivec2 outTexShape;")}n.customUniforms&&n.customUniforms.forEach(g=>{r.push(`uniform ${g.type} ${g.name}${g.arrayIndex?`[${g.arrayIndex}]`:""};`)});const s=r.join(`
`),o=t.map(g=>ASe(g,e,n.packedInputs,n.enableShapeUniforms)).join(`
`),i=e.texShape,a=uo(),l=$Se(a);let c,d,f=PSe(a);return e.isPacked?(c=RSe(e.logicalShape,i,n.enableShapeUniforms),d=_Se(a)):(c=DSe(e.logicalShape,i,n.enableShapeUniforms),d=OSe(a)),n.packedInputs&&(f+=BSe),[f,l,d,s,c,o,n.userCode].join(`
`)}function Lp(t,e=!1){const n=t.shapeInfo.logicalShape;switch(n.length){case 0:return ZSe(t,e);case 1:return JSe(t,e);case 2:return tNe(t,e);case 3:return rNe(t,e);case 4:return oNe(t,e);case 5:return iNe(t);case 6:return aNe(t);default:throw new Error(`${n.length}-D input sampling is not yet supported`)}}function R9(t,e){switch(t.shapeInfo.logicalShape.length){case 0:return YSe(t);case 1:return QSe(t,e);case 2:return eNe(t,e);case 3:return nNe(t,e);default:return sNe(t,e)}}function ASe(t,e,n=!1,r){let s="";n?s+=R9(t,r):s+=Lp(t,r);const o=t.shapeInfo.logicalShape,i=e.logicalShape;return o.length<=i.length&&(n?s+=lNe(t,e):s+=cNe(t,e)),s}function RSe(t,e,n){switch(t.length){case 0:return D9();case 1:return jSe(t,e,n);case 2:return XSe(t,e,n);case 3:return VSe(t,e,n);default:return USe(t,e,n)}}function DSe(t,e,n){switch(t.length){case 0:return D9();case 1:return zSe(t,e,n);case 2:return KSe(t,e,n);case 3:return WSe(t,e,n);case 4:return HSe(t,e,n);case 5:return GSe(t,e);case 6:return qSe(t,e);default:throw new Error(`${t.length}-D output sampling is not yet supported`)}}function $Se(t){return`
    float sampleTexture(sampler2D textureSampler, vec2 uv) {
      return ${t.texture2D}(textureSampler, uv).r;
    }
  `}function OSe(t){return`
    void setOutput(float val) {
      ${t.output} = vec4(val, 0, 0, 0);
    }
  `}function _Se(t){return`
    void setOutput(vec4 val) {
      ${t.output} = val;
    }
  `}function PSe(t){return`${t.version}
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    ${t.varyingFs} vec2 resultUV;
    ${t.defineOutput}
    const vec2 halfCR = vec2(0.5, 0.5);

    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    uniform float NAN;
    ${t.defineSpecialNaN}
    ${t.defineSpecialInf}
    ${t.defineRound}

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    int idiv(int a, int b, float sign) {
      int res = a / b;
      int mod = imod(a, b);
      if (sign < 0. && mod != 0) {
        res -= 1;
      }
      return res;
    }

    //Based on the work of Dave Hoskins
    //https://www.shadertoy.com/view/4djSRW
    #define HASHSCALE1 443.8975
    float random(float seed){
      vec2 p = resultUV * seed;
      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);
      p3 += dot(p3, p3.yzx + 19.19);
      return fract((p3.x + p3.y) * p3.z);
    }

    ${FSe}
    ${MSe}
    ${LSe}
  `}const FSe=`
vec2 uvFromFlat(int texNumR, int texNumC, int index) {
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
  int texelIndex = index / 2;
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,MSe=`
vec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,
  int texNumC, int row, int col) {
  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,LSe=`
vec2 packedUVfrom3D(int texNumR, int texNumC,
    int texelsInBatch, int texelsInLogicalRow, int b,
    int row, int col) {
  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,BSe=`
  float getChannel(vec4 frag, vec2 innerDims) {
    vec2 modCoord = mod(innerDims, 2.);
    return modCoord.x == 0. ?
      (modCoord.y == 0. ? frag.r : frag.g) :
      (modCoord.y == 0. ? frag.b : frag.a);
  }
  float getChannel(vec4 frag, int dim) {
    float modCoord = mod(float(dim), 2.);
    return modCoord == 0. ? frag.r : frag.g;
  }
`;function D9(){return`
    int getOutputCoords() {
      return 0;
    }
  `}function jSe(t,e,n){const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)];return r[0]===1?n?`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ceil(float(outTexShape[1]) / 2.0));
      }
    `:`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ${r[1]}.0);
      }
    `:r[1]===1?n?`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ceil(float(outTexShape[0]) / 2.0));
      }
    `:`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ${r[0]}.0);
      }
    `:n?`
    int getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      return 2 * (resTexRC.x * packedTexShape[1] + resTexRC.y);
    }
  `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      return 2 * (resTexRC.x * ${r[1]} + resTexRC.y);
    }
  `}function zSe(t,e,n){return e[0]===1?n?`
      int getOutputCoords() {
        return int(resultUV.x * float(outTexShape[1]));
      }
    `:`
      int getOutputCoords() {
        return int(resultUV.x * ${e[1]}.0);
      }
    `:e[1]===1?n?`
      int getOutputCoords() {
        return int(resultUV.y * float(outTexShape[0]));
      }
    `:`
      int getOutputCoords() {
        return int(resultUV.y * ${e[0]}.0);
      }
    `:n?`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(outTexShape[0], outTexShape[1]));
      return resTexRC.x * outTexShape[1] + resTexRC.y;
    }
  `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      return resTexRC.x * ${e[1]} + resTexRC.y;
    }
  `}function VSe(t,e,n){if(n)return`
    ivec3 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      int texelsInLogicalRow = int(ceil(float(outShape[2]) / 2.0));
      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;

      int b = index / texelsInBatch;
      index -= b * texelsInBatch;

      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec3(b, r, c);
    }
  `;const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)],s=Math.ceil(t[2]/2),o=s*Math.ceil(t[1]/2);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      int index = resTexRC.x * ${r[1]} + resTexRC.y;

      int b = index / ${o};
      index -= b * ${o};

      int r = 2 * (index / ${s});
      int c = imod(index, ${s}) * 2;

      return ivec3(b, r, c);
    }
  `}function WSe(t,e,n){if(n)return`
  ivec3 getOutputCoords() {
    ivec2 resTexRC = ivec2(resultUV.yx *
                           vec2(outTexShape[0], outTexShape[1]));
    int index = resTexRC.x * outTexShape[1] + resTexRC.y;
    ${W2(["r","c","d"],t)}
    return ivec3(r, c, d);
  }
`;const r=bf(["r","c","d"],t);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      ${r}
      return ivec3(r, c, d);
    }
  `}function USe(t,e,n){if(n)return`
    ivec4 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;

      int texelsInLogicalRow = int(ceil(float(outShape[3]) / 2.0));
      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[2]) / 2.0));
      int texelsInBatchN = texelsInBatch * outShape[1];

      int b2 = index / texelsInBatchN;
      index -= b2 * texelsInBatchN;

      int b = index / texelsInBatch;
      index -= b * texelsInBatch;

      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec4(b2, b, r, c);
    }
  `;const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)],s=Math.ceil(t[t.length-1]/2),o=s*Math.ceil(t[t.length-2]/2);let i=o,a="",l="b, r, c";for(let c=2;c<t.length-1;c++)i*=t[t.length-c-1],a=`
      int b${c} = index / ${i};
      index -= b${c} * ${i};
    `+a,l=`b${c}, `+l;return`
    ivec${t.length} getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      int index = resTexRC.x * ${r[1]} + resTexRC.y;

      ${a}

      int b = index / ${o};
      index -= b * ${o};

      int r = 2 * (index / ${s});
      int c = imod(index, ${s}) * 2;

      return ivec${t.length}(${l});
    }
  `}function HSe(t,e,n){if(n)return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(outTexShape[0], outTexShape[1]));
      int index = resTexRC.x * outTexShape[1] + resTexRC.y;
      ${W2(["r","c","d","d2"],t)}
      return ivec4(r, c, d, d2);
    }
  `;const r=bf(["r","c","d","d2"],t);return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      ${r}
      return ivec4(r, c, d, d2);
    }
  `}function GSe(t,e){const n=bf(["r","c","d","d2","d3"],t);return`
    ivec5 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx * vec2(${e[0]},
                             ${e[1]}));

      int index = resTexRC.x * ${e[1]} + resTexRC.y;

      ${n}

      ivec5 outShape = ivec5(r, c, d, d2, d3);
      return outShape;
    }
  `}function qSe(t,e){const n=bf(["r","c","d","d2","d3","d4"],t);return`
    ivec6 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;

      ${n}

      ivec6 result = ivec6(r, c, d, d2, d3, d4);
      return result;
    }
  `}function XSe(t,e,n){const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)];if(nn(t,e))return n?`
      ivec2 getOutputCoords() {
        ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
        return 2 * ivec2(resultUV.yx * vec2(packedTexShape[0], packedTexShape[1]));
      }
    `:`
      ivec2 getOutputCoords() {
        return 2 * ivec2(resultUV.yx * vec2(${r[0]}, ${r[1]}));
      }
    `;const s=Math.ceil(t[1]/2);return n?`
    ivec2 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      int texelsInLogicalRow = int(ceil(float(outShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));

      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;
      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec2(r, c);
    }
  `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));

      int index = resTexRC.x * ${r[1]} + resTexRC.y;
      int r = 2 * (index / ${s});
      int c = imod(index, ${s}) * 2;

      return ivec2(r, c);
    }
  `}function KSe(t,e,n){return nn(t,e)?n?`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(outTexShape[0], outTexShape[1]));
      }
    `:`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(${e[0]}, ${e[1]}));
      }
    `:t[1]===1?n?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(outTexShape[0], outTexShape[1]));
        int index = resTexRC.x * outTexShape[1] + resTexRC.y;
        return ivec2(index, 0);
      }
    `:`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${e[0]}, ${e[1]}));
        int index = resTexRC.x * ${e[1]} + resTexRC.y;
        return ivec2(index, 0);
      }
    `:t[0]===1?n?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(outTexShape[0], outTexShape[1]));
        int index = resTexRC.x * outTexShape[1] + resTexRC.y;
        return ivec2(0, index);
      }
    `:`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${e[0]}, ${e[1]}));
        int index = resTexRC.x * ${e[1]} + resTexRC.y;
        return ivec2(0, index);
      }
    `:n?`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(outTexShape[0], outTexShape[1]));
      int index = resTexRC.x * outTexShape[1] + resTexRC.y;
      int r = index / outShape[1];
      int c = index - r * outShape[1];
      return ivec2(r, c);
    }
  `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      int r = index / ${t[1]};
      int c = index - r * ${t[1]};
      return ivec2(r, c);
    }
  `}function wf(t){return`offset${t}`}function YSe(t){const e=t.name,n="get"+e.charAt(0).toUpperCase()+e.slice(1),r=uo();return`
    vec4 ${n}() {
      return ${r.texture2D}(${e}, halfCR);
    }
  `}function ZSe(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(t.shapeInfo.isUniform)return`float ${r}() {return ${n};}`;const[s,o]=t.shapeInfo.texShape;if(s===1&&o===1)return`
      float ${r}() {
        return sampleTexture(${n}, halfCR);
      }
    `;const i=wf(n);if(e)return`
    float ${r}() {
      vec2 uv = uvFromFlat(${n}TexShape[0], ${n}TexShape[1], ${i});
      return sampleTexture(${n}, uv);
    }
  `;const[a,l]=t.shapeInfo.texShape;return`
    float ${r}() {
      vec2 uv = uvFromFlat(${a}, ${l}, ${i});
      return sampleTexture(${n}, uv);
    }
  `}function QSe(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),s=t.shapeInfo.texShape,o=uo();if(e)return`
    vec4 ${r}(int index) {
      ivec2 packedTexShape = ivec2(ceil(float(${n}TexShape[0]) / 2.0), ceil(float(${n}TexShape[1]) / 2.0));
      vec2 uv = packedUVfrom1D(
        packedTexShape[0], packedTexShape[1], index);
      return ${o.texture2D}(${n}, uv);
    }
  `;const i=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)];return`
    vec4 ${r}(int index) {
      vec2 uv = packedUVfrom1D(
        ${i[0]}, ${i[1]}, index);
      return ${o.texture2D}(${n}, uv);
    }
  `}function JSe(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(t.shapeInfo.isUniform)return`
      float ${r}(int index) {
        ${Bp(t)}
      }
    `;const s=t.shapeInfo.texShape,o=s[0],i=s[1];if(i===1&&o===1)return`
      float ${r}(int index) {
        return sampleTexture(${n}, halfCR);
      }
    `;const a=wf(n);return i===1?e?`
      float ${r}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${a}) + 0.5) / float(${n}TexShape[0]));
        return sampleTexture(${n}, uv);
      }
    `:`
      float ${r}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${a}) + 0.5) / ${o}.0);
        return sampleTexture(${n}, uv);
      }
    `:o===1?e?`
      float ${r}(int index) {
        vec2 uv = vec2((float(index + ${a}) + 0.5) / float(${n}TexShape[1]), 0.5);
        return sampleTexture(${n}, uv);
      }
    `:`
      float ${r}(int index) {
        vec2 uv = vec2((float(index + ${a}) + 0.5) / ${i}.0, 0.5);
        return sampleTexture(${n}, uv);
      }
    `:e?`
    float ${r}(int index) {
      vec2 uv = uvFromFlat(${n}TexShape[0], ${n}TexShape[1], index + ${a});
      return sampleTexture(${n}, uv);
    }
  `:`
    float ${r}(int index) {
      vec2 uv = uvFromFlat(${o}, ${i}, index + ${a});
      return sampleTexture(${n}, uv);
    }
  `}function eNe(t,e){const n=t.shapeInfo.logicalShape,r=t.name,s="get"+r.charAt(0).toUpperCase()+r.slice(1),o=t.shapeInfo.texShape,i=o[0],a=o[1],l=uo();if(o!=null&&nn(n,o))return e?`
      vec4 ${s}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);

        return ${l.texture2D}(${r}, uv);
      }
    `:`
      vec4 ${s}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${a}.0, ${i}.0);

        return ${l.texture2D}(${r}, uv);
      }
    `;if(e)return`
    vec4 ${s}(int row, int col) {
      ivec2 packedTexShape = ivec2(ceil(float(${r}TexShape[0]) / 2.0), ceil(float(${r}TexShape[1]) / 2.0));
      int valuesPerRow = int(ceil(float(${r}Shape[1]) / 2.0));
      vec2 uv = packedUVfrom2D(valuesPerRow, packedTexShape[0], packedTexShape[1], row, col);
      return ${l.texture2D}(${r}, uv);
    }
  `;const c=[Math.ceil(o[0]/2),Math.ceil(o[1]/2)],d=Math.ceil(n[1]/2);return`
    vec4 ${s}(int row, int col) {
      vec2 uv = packedUVfrom2D(${d}, ${c[0]}, ${c[1]}, row, col);
      return ${l.texture2D}(${r}, uv);
    }
  `}function tNe(t,e){const n=t.shapeInfo.logicalShape,r=t.name,s="get"+r.charAt(0).toUpperCase()+r.slice(1),o=t.shapeInfo.texShape;if(o!=null&&nn(n,o)){if(e)return`
      float ${s}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `;const p=o[0],g=o[1];return`
    float ${s}(int row, int col) {
      vec2 uv = (vec2(col, row) + halfCR) / vec2(${g}.0, ${p}.0);
      return sampleTexture(${r}, uv);
    }
  `}const{newShape:i,keptDims:a}=Tu(n),l=i;if(l.length<n.length){const p=jp(t,l),g=["row","col"];return`
      ${Lp(p,e)}
      float ${s}(int row, int col) {
        return ${s}(${zp(g,a)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${s}(int row, int col) {
        int index = round(dot(vec2(row, col), vec2(${n[1]}, 1)));
        ${Bp(t)}
      }
    `;const c=o[0],d=o[1],f=wf(r);return d===1?e?`
      float ${s}(int row, int col) {
        float index = dot(vec3(row, col, ${f}), vec3(${r}Shape[1], 1, 1));
        vec2 uv = vec2(0.5, (index + 0.5) / float(${r}TexShape[0]));
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${s}(int row, int col) {
      float index = dot(vec3(row, col, ${f}), vec3(${n[1]}, 1, 1));
      vec2 uv = vec2(0.5, (index + 0.5) / ${c}.0);
      return sampleTexture(${r}, uv);
    }
  `:c===1?e?`
      float ${s}(int row, int col) {
        float index = dot(vec3(row, col, ${f}), vec3(${r}Shape[1], 1, 1));
        vec2 uv = vec2((index + 0.5) / float(${r}TexShape[1]), 0.5);
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${s}(int row, int col) {
      float index = dot(vec3(row, col, ${f}), vec3(${n[1]}, 1, 1));
      vec2 uv = vec2((index + 0.5) / ${d}.0, 0.5);
      return sampleTexture(${r}, uv);
    }
  `:e?`
      float ${s}(int row, int col) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${r}Shape[1] + col + ${f};
        vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index);
        return sampleTexture(${r}, uv);
      }
    `:`
  float ${s}(int row, int col) {
    // Explicitly use integer operations as dot() only works on floats.
    int index = row * ${n[1]} + col + ${f};
    vec2 uv = uvFromFlat(${c}, ${d}, index);
    return sampleTexture(${r}, uv);
  }
`}function nNe(t,e){const n=t.shapeInfo.logicalShape,r=t.name,s="get"+r.charAt(0).toUpperCase()+r.slice(1),o=t.shapeInfo.texShape,i=[Math.ceil(o[0]/2),Math.ceil(o[1]/2)];if(n[0]===1){const p=n.slice(1),g=[1,2],x=jp(t,p),b=["b","row","col"];return`
        ${R9(x,e)}
        vec4 ${s}(int b, int row, int col) {
          return ${s}(${zp(b,g)});
        }
      `}const a=uo();if(e)return`
    vec4 ${s}(int b, int row, int col) {
      ivec2 packedTexShape = ivec2(ceil(float(${r}TexShape[0]) / 2.0), ceil(float(${r}TexShape[1]) / 2.0));
      int valuesPerRow = int(ceil(float(${r}Shape[2]) / 2.0));
      int texelsInBatch = valuesPerRow * int(ceil(float(${r}Shape[1]) / 2.0));
      vec2 uv = packedUVfrom3D(
        packedTexShape[0], packedTexShape[1], texelsInBatch, valuesPerRow, b, row, col);
      return ${a.texture2D}(${r}, uv);
    }
  `;const l=i[0],c=i[1],d=Math.ceil(n[2]/2),f=d*Math.ceil(n[1]/2);return`
    vec4 ${s}(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        ${l}, ${c}, ${f}, ${d}, b, row, col);
      return ${a.texture2D}(${r}, uv);
    }
  `}function rNe(t,e){const n=t.shapeInfo.logicalShape,r=t.name,s="get"+r.charAt(0).toUpperCase()+r.slice(1),o=n[1]*n[2],i=n[2],{newShape:a,keptDims:l}=Tu(n),c=a;if(c.length<n.length){const b=jp(t,c),w=["row","col","depth"];return`
        ${Lp(b,e)}
        float ${s}(int row, int col, int depth) {
          return ${s}(${zp(w,l)});
        }
      `}if(t.shapeInfo.isUniform)return`
      float ${s}(int row, int col, int depth) {
        int index = round(dot(vec3(row, col, depth),
                          vec3(${o}, ${i}, 1)));
        ${Bp(t)}
      }
    `;const d=t.shapeInfo.texShape,f=d[0],p=d[1],g=t.shapeInfo.flatOffset;if(p===o&&g==null)return e?`
      float ${s}(int row, int col, int depth) {
        int stride1 = ${r}Shape[2];
        float texR = float(row);
        float texC = dot(vec2(col, depth), vec2(stride1, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
        float ${s}(int row, int col, int depth) {
          float texR = float(row);
          float texC = dot(vec2(col, depth), vec2(${i}, 1));
          vec2 uv = (vec2(texC, texR) + halfCR) /
                     vec2(${p}.0, ${f}.0);
          return sampleTexture(${r}, uv);
        }
      `;if(p===i&&g==null)return e?`
      float ${s}(int row, int col, int depth) {
        float texR = dot(vec2(row, col), vec2(${r}Shape[1], 1));
        float texC = float(depth);
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${s}(int row, int col, int depth) {
      float texR = dot(vec2(row, col), vec2(${n[1]}, 1));
      float texC = float(depth);
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${p}.0, ${f}.0);
      return sampleTexture(${r}, uv);
    }
  `;const x=wf(r);return e?`
    float ${s}(int row, int col, int depth) {
      // Explicitly use integer operations as dot() only works on floats.
      int stride0 = ${r}Shape[1] * ${r}Shape[2];
      int stride1 = ${r}Shape[2];
      int index = row * stride0 + col * stride1 + depth + ${x};
      vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index);
      return sampleTexture(${r}, uv);
    }
    `:`
      float ${s}(int row, int col, int depth) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${o} + col * ${i} + depth + ${x};
        vec2 uv = uvFromFlat(${f}, ${p}, index);
        return sampleTexture(${r}, uv);
      }
  `}function sNe(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),s=uo();if(e)return`
    vec4 ${r}(int b2, int b, int row, int col) {
      int valuesPerRow = int(ceil(float(${n}Shape[3]) / 2.0));
      int texelsInBatch = valuesPerRow * int(ceil(float(${n}Shape[2]) / 2.0));
      int index = b * texelsInBatch + (row / 2) * valuesPerRow + (col / 2);
      texelsInBatch *= ${n}Shape[1];
      index = b2 * texelsInBatch + index;
      ivec2 packedTexShape = ivec2(ceil(float(${n}TexShape[0]) / 2.0), ceil(float(${n}TexShape[1]) / 2.0));
      int texR = index / packedTexShape[1];
      int texC = index - texR * packedTexShape[1];
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(packedTexShape[1], packedTexShape[0]); return ${s.texture2D}(${n}, uv);
    }
  `;const o=t.shapeInfo.logicalShape,i=o.length,a=t.shapeInfo.texShape,l=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)],c=l[0],d=l[1],f=Math.ceil(o[i-1]/2);let p=f*Math.ceil(o[i-2]/2),g="int b, int row, int col",x=`b * ${p} + (row / 2) * ${f} + (col / 2)`;for(let b=2;b<i-1;b++)g=`int b${b}, `+g,p*=o[i-b-1],x=`b${b} * ${p} + `+x;return`
    vec4 ${r}(${g}) {
      int index = ${x};
      int texR = index / ${d};
      int texC = index - texR * ${d};
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${d}, ${c});
      return ${s.texture2D}(${n}, uv);
    }
  `}function oNe(t,e){const n=t.shapeInfo.logicalShape,r=t.name,s="get"+r.charAt(0).toUpperCase()+r.slice(1),o=n[3],i=n[2]*o,a=n[1]*i,{newShape:l,keptDims:c}=Tu(n);if(l.length<n.length){const N=jp(t,l),k=["row","col","depth","depth2"];return`
      ${Lp(N,e)}
      float ${s}(int row, int col, int depth, int depth2) {
        return ${s}(${zp(k,c)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${s}(int row, int col, int depth, int depth2) {
        int index = round(dot(vec4(row, col, depth, depth2),
                          vec4(${a}, ${i}, ${o}, 1)));
        ${Bp(t)}
      }
    `;const d=t.shapeInfo.flatOffset,f=t.shapeInfo.texShape,p=f[0],g=f[1],x=`int stride2 = ${r}Shape[3];`,b=`int stride1 = ${r}Shape[2] * stride2;`,w=`int stride0 = ${r}Shape[1] * stride1;`;if(g===a&&d==null)return e?`
      float ${s}(int row, int col, int depth, int depth2) {
        ${x}
        ${b}
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(stride1, stride2, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
      float ${s}(int row, int col, int depth, int depth2) {
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(${i}, ${o}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${g}.0, ${p}.0);
        return sampleTexture(${r}, uv);
      }
    `;if(g===o&&d==null)return e?`
      float ${s}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${r}Shape[1] * ${r}Shape[2], ${r}Shape[2], 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
      float ${s}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${n[1]*n[2]}, ${n[2]}, 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${g}.0, ${p}.0);
        return sampleTexture(${r}, uv);
      }
    `;const C=wf(r);return e?`
    float ${s}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      ${x}
      ${b}
      ${w}
      int index = row * stride0 + col * stride1 +
          depth * stride2 + depth2;
      vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index + ${C});
      return sampleTexture(${r}, uv);
    }
  `:`
    float ${s}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${a} + col * ${i} +
          depth * ${o} + depth2;
      vec2 uv = uvFromFlat(${p}, ${g}, index + ${C});
      return sampleTexture(${r}, uv);
    }
  `}function iNe(t){const e=t.shapeInfo.logicalShape,n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),s=e[4],o=e[3]*s,i=e[2]*o,a=e[1]*i,{newShape:l,keptDims:c}=Tu(e);if(l.length<e.length){const b=jp(t,l),w=["row","col","depth","depth2","depth3"];return`
      ${Lp(b)}
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        return ${r}(${zp(w,c)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        float index = dot(
          vec4(row, col, depth, depth2),
          vec4(${a}, ${i}, ${o}, ${s})) +
          depth3;
        ${Bp(t)}
      }
    `;const d=t.shapeInfo.flatOffset,f=t.shapeInfo.texShape,p=f[0],g=f[1];if(g===a&&d==null)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
                         vec4(${i}, ${o}, ${s}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${g}.0, ${p}.0);
        return sampleTexture(${n}, uv);
      }
    `;if(g===s&&d==null)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        float texR = dot(
          vec4(row, col, depth, depth2),
          vec4(${e[1]*e[2]*e[3]},
               ${e[2]*e[3]}, ${e[3]}, 1));
        int texC = depth3;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${g}.0, ${p}.0);
        return sampleTexture(${n}, uv);
      }
    `;const x=wf(n);return`
    float ${r}(int row, int col, int depth, int depth2, int depth3) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${a} + col * ${i} + depth * ${o} +
          depth2 * ${s} + depth3 + ${x};
      vec2 uv = uvFromFlat(${p}, ${g}, index);
      return sampleTexture(${n}, uv);
    }
  `}function aNe(t){const e=t.shapeInfo.logicalShape,n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),{newShape:s,keptDims:o}=Tu(e);if(s.length<e.length){const w=jp(t,s),C=["row","col","depth","depth2","depth3","depth4"];return`
      ${Lp(w)}
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        return ${r}(${zp(C,o)});
      }
    `}const i=e[5],a=e[4]*i,l=e[3]*a,c=e[2]*l,d=e[1]*c;if(t.shapeInfo.isUniform)return`
      float ${r}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
        int index = round(dot(
          vec4(row, col, depth, depth2),
          vec4(${d}, ${c}, ${l}, ${a})) +
          dot(
            vec2(depth3, depth4),
            vec2(${i}, 1)));
        ${Bp(t)}
      }
    `;const f=t.shapeInfo.flatOffset,p=t.shapeInfo.texShape,g=p[0],x=p[1];if(x===d&&f==null)return`
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
          vec4(${c}, ${l}, ${a}, ${i})) +
               float(depth4);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${x}.0, ${g}.0);
        return sampleTexture(${n}, uv);
      }
    `;if(x===i&&f==null)return`
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        float texR = dot(vec4(row, col, depth, depth2),
          vec4(${e[1]*e[2]*e[3]*e[4]},
               ${e[2]*e[3]*e[4]},
               ${e[3]*e[4]},
               ${e[4]})) + float(depth3);
        int texC = depth4;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${x}.0, ${g}.0);
        return sampleTexture(${n}, uv);
      }
    `;const b=wf(n);return`
    float ${r}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${d} + col * ${c} + depth * ${l} +
          depth2 * ${a} + depth3 * ${i} + depth4 + ${b};
      vec2 uv = uvFromFlat(${g}, ${x}, index);
      return sampleTexture(${n}, uv);
    }
  `}function Bp(t){const e=t.name,n=Te(t.shapeInfo.logicalShape);return n<2?`return ${e};`:`
    for (int i = 0; i < ${n}; i++) {
      if (i == index) {
        return ${e}[i];
      }
    }
  `}function lNe(t,e){const n=t.name,r=n.charAt(0).toUpperCase()+n.slice(1),s="get"+r+"AtOutCoords",o=t.shapeInfo.logicalShape.length,i=e.logicalShape.length,a=A9(t.shapeInfo.logicalShape,e.logicalShape),l=On(i),c=i-o;let d;const f=["x","y","z","w","u","v"];o===0?d="":i<2&&a.length>=1?d="coords = 0;":d=a.map(N=>`coords.${f[N+c]} = 0;`).join(`
`);let p="";i<2&&o>0?p="coords":p=t.shapeInfo.logicalShape.map((N,k)=>`coords.${f[k+c]}`).join(", ");let g="return outputValue;";const b=Te(t.shapeInfo.logicalShape)===1,C=Te(e.logicalShape)===1;if(o===1&&!b&&!C)g=`
      return vec4(outputValue.xy, outputValue.xy);
    `;else if(b&&!C)i===1?g=`
        return vec4(outputValue.x, outputValue.x, 0., 0.);
      `:g=`
        return vec4(outputValue.x);
      `;else if(a.length){const N=o-2,k=o-1;a.indexOf(N)>-1&&a.indexOf(k)>-1?g="return vec4(outputValue.x);":a.indexOf(N)>-1?g="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":a.indexOf(k)>-1&&(g="return vec4(outputValue.xx, outputValue.zz);")}return`
    vec4 ${s}() {
      ${l} coords = getOutputCoords();
      ${d}
      vec4 outputValue = get${r}(${p});
      ${g}
    }
  `}function cNe(t,e){const n=t.name,r=n.charAt(0).toUpperCase()+n.slice(1),s="get"+r+"AtOutCoords",o=e.texShape,i=t.shapeInfo.texShape,a=t.shapeInfo.logicalShape.length,l=e.logicalShape.length;if(!t.shapeInfo.isUniform&&a===l&&t.shapeInfo.flatOffset==null&&nn(i,o))return`
      float ${s}() {
        return sampleTexture(${n}, resultUV);
      }
    `;const c=On(l),d=A9(t.shapeInfo.logicalShape,e.logicalShape),f=l-a;let p;const g=["x","y","z","w","u","v"];a===0?p="":l<2&&d.length>=1?p="coords = 0;":p=d.map(b=>`coords.${g[b+f]} = 0;`).join(`
`);let x="";return l<2&&a>0?x="coords":x=t.shapeInfo.logicalShape.map((b,w)=>`coords.${g[w+f]}`).join(", "),`
    float ${s}() {
      ${c} coords = getOutputCoords();
      ${p}
      return get${r}(${x});
    }
  `}function On(t){if(t<=1)return"int";if(t===2)return"ivec2";if(t===3)return"ivec3";if(t===4)return"ivec4";if(t===5)return"ivec5";if(t===6)return"ivec6";throw Error(`GPU for rank ${t} is not yet supported`)}function oD(t,e,n){const{newShape:r,keptDims:s}=Tu(e),o=e.length,i=t&&o===3&&e[0]===1,a=i?e.slice(1):r,l=!t&&o>1&&!nn(e,n)&&r.length<o||i;return{useSqueezeShape:l,uniformShape:l?a:e,keptDims:s}}function jp(t,e){const n=JSON.parse(JSON.stringify(t));return n.shapeInfo.logicalShape=e,n}function zp(t,e){return e.map(n=>t[n]).join(", ")}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uNe(t,e,n,r){const s=n.map((d,f)=>{const p={logicalShape:d.shape,texShape:d.isUniform?null:d.texData.texShape,isUniform:d.isUniform,isPacked:d.isUniform?!1:d.texData.isPacked,flatOffset:null};return d.texData!=null&&d.texData.slice!=null&&d.texData.slice.flatOffset>0&&(p.flatOffset=d.texData.slice.flatOffset),{name:e.variableNames[f],shapeInfo:p}}),o=s.map(d=>d.shapeInfo),i={logicalShape:r.shape,texShape:r.texData.texShape,isUniform:!1,isPacked:r.texData.isPacked,flatOffset:null},a=TSe(s,i,e),l=rSe(t.gl,a),c=t.createProgram(l);return Ee().get("ENGINE_COMPILE_ONLY")?{program:e,fragmentShader:l,source:a,webGLProgram:c,inShapeInfos:o,outShapeInfo:i,variablesLocations:null,customUniformLocations:null,infLoc:null,nanLoc:null,outShapeLocation:null,outShapeStridesLocation:null,outTexShapeLocation:null}:(t.buildVao(c),Object.assign({program:e,fragmentShader:l,source:a,webGLProgram:c,inShapeInfos:o,outShapeInfo:i},$9(t,e,c)))}function $9(t,e,n){const r=[],s=[];let o,i,a,l=null,c=null;c=t.getUniformLocation(n,"NAN",!1),Ee().getNumber("WEBGL_VERSION")===1&&(l=t.getUniformLocation(n,"INFINITY",!1));const d=!1;for(const f of e.variableNames){const p={name:f,uniform:t.getUniformLocation(n,f,d),offset:t.getUniformLocation(n,`offset${f}`,d)};e.enableShapeUniforms&&(p.shape=t.getUniformLocation(n,`${f}Shape`,d),p.texShape=t.getUniformLocation(n,`${f}TexShape`,d)),r.push(p)}if(e.enableShapeUniforms&&(o=t.getUniformLocation(n,"outShape",d),a=t.getUniformLocation(n,"outShapeStrides",d),i=t.getUniformLocation(n,"outTexShape",d)),e.customUniforms)for(const f of e.customUniforms)s.push(t.getUniformLocation(n,f.name,d));return{variablesLocations:r,customUniformLocations:s,infLoc:l,nanLoc:c,outShapeLocation:o,outShapeStridesLocation:a,outTexShapeLocation:i}}function W_(t,e){if(t.length!==e.length)throw Error(`Binary was compiled with ${t.length} inputs, but was executed with ${e.length} inputs`);t.forEach((n,r)=>{const s=n.logicalShape,o=e[r],i=o.shape;if(!nn(s,i))throw Error(`Binary was compiled with different shapes than the current args. Shapes ${s} and ${i} must match`);if(n.isUniform&&o.isUniform)return;const a=n.texShape,l=o.isUniform?null:o.texData.texShape;if(!nn(a,l))throw Error(`Binary was compiled with different texture shapes than the current args. Shape ${a} and ${l} must match`)})}function dNe(t,e,n,r,s){e.program.enableShapeUniforms||(W_(e.inShapeInfos,n),W_([e.outShapeInfo],[r]));const o=r.texData.texture,i=r.texData.texShape;r.texData.isPacked?t.setOutputPackedMatrixTexture(o.texture,i[0],i[1]):t.setOutputMatrixTexture(o.texture,i[0],i[1]),t.setProgram(e.webGLProgram),t.bindVertexArray(e.webGLProgram.vao),Ee().getNumber("WEBGL_VERSION")===1&&e.infLoc!==null&&t.gl.uniform1f(e.infLoc,1/0),e.nanLoc!==null&&t.gl.uniform1f(e.nanLoc,NaN);for(let l=0;l<n.length;++l){const c=n[l],{uniform:d,offset:f,shape:p,texShape:g}=e.variablesLocations[l];if(p){const{uniformShape:x}=oD(e.program.packedInputs,c.shape,c.texData.texShape);switch(x.length){case 1:t.gl.uniform1iv(p,new Int32Array(x));break;case 2:t.gl.uniform2iv(p,new Int32Array(x));break;case 3:t.gl.uniform3iv(p,new Int32Array(x));break;case 4:t.gl.uniform4iv(p,new Int32Array(x));break}}if(g&&t.gl.uniform2i(g,c.texData.texShape[0],c.texData.texShape[1]),d!=null){if(c.isUniform){if(Te(c.shape)<2)t.gl.uniform1f(d,c.uniformValues[0]);else{let x=c.uniformValues;x instanceof Float32Array||(x=new Float32Array(x)),t.gl.uniform1fv(d,x)}continue}c.texData.slice!=null&&f!=null&&t.gl.uniform1i(f,c.texData.slice.flatOffset),t.setInputMatrixTexture(c.texData.texture.texture,d,l)}}const a=e.outShapeLocation;if(a)switch(r.shape.length){case 1:t.gl.uniform1iv(a,new Int32Array(r.shape));break;case 2:t.gl.uniform2iv(a,new Int32Array(r.shape));break;case 3:t.gl.uniform3iv(a,new Int32Array(r.shape));break;case 4:t.gl.uniform4iv(a,new Int32Array(r.shape));break}if(e.outShapeStridesLocation){const l=Et(r.shape);switch(r.shape.length){case 2:t.gl.uniform1iv(e.outShapeStridesLocation,new Int32Array(l));break;case 3:t.gl.uniform2iv(e.outShapeStridesLocation,new Int32Array(l));break;case 4:t.gl.uniform3iv(e.outShapeStridesLocation,new Int32Array(l));break}}if(e.outTexShapeLocation&&t.gl.uniform2i(e.outTexShapeLocation,r.texData.texShape[0],r.texData.texShape[1]),e.program.customUniforms&&s)for(let l=0;l<e.program.customUniforms.length;++l){const c=e.program.customUniforms[l],d=e.customUniformLocations[l],f=s[l];if(c.type==="float")t.gl.uniform1fv(d,f);else if(c.type==="vec2")t.gl.uniform2fv(d,f);else if(c.type==="vec3")t.gl.uniform3fv(d,f);else if(c.type==="vec4")t.gl.uniform4fv(d,f);else if(c.type==="int")t.gl.uniform1iv(d,f);else if(c.type==="ivec2")t.gl.uniform2iv(d,f);else if(c.type==="ivec3")t.gl.uniform3iv(d,f);else if(c.type==="ivec4")t.gl.uniform4iv(d,f);else throw Error(`uniform type ${c.type} is not supported yet.`)}t.executeProgram()}function fNe(t,e,n){let r="";e.concat(n).forEach(i=>{const a=i.texData!=null&&i.texData.slice!=null&&i.texData.slice.flatOffset>0;if(t.enableShapeUniforms&&!i.isUniform){const l=i.texData.texShape,{useSqueezeShape:c,uniformShape:d,keptDims:f}=oD(t.packedInputs,i.shape,l);let p="",g="",x="";if(d.length===1&&t.packedInputs){const R=[Math.ceil(l[0]/2),Math.ceil(l[1]/2)];p=`${R[0]>1}_${R[1]>1}`}else if(d.length===2&&!t.packedInputs)g=`${d[0]>1}_${d[1]>1}`;else if(d.length>2&&!t.packedInputs){const R=Et(d);x=`${R[0]===l[1]}_${R[R.length-1]===l[1]}`}const b=i.shape.length,w=d.length===2&&nn(i.shape,l),C=Te(i.shape)===1,N=Yh(i.shape,n.shape),k=!t.packedInputs&&b===n.shape.length&&nn(l,n.texData.texShape),I=t.packedInputs||d.length>2?"":`${l[0]>1}_${l[1]>1}`;r+=`${b}_${k}_${c?f:""}_${d.length}_${C}_${N}_${w}_${p}_${g}_${x}_${I}_${a}`}else{const l=i.isUniform?"uniform":i.texData.texShape;r+=`${i.shape}_${l}_${a}`}});const s=t.userCode;let o=t.constructor.name;return o+="_"+r+"_"+s+`${Ee().getNumber("WEBGL_VERSION")}`,o}function Gs(t){return Ee().getBool("WEBGL_USE_SHAPES_UNIFORMS")&&t<=4}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class hNe{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=n0.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const n=uo();this.outputShape=e,this.enableShapeUniforms=Gs(this.outputShape.length),this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${this.enableShapeUniforms?W2(["r","c","d"],e):bf(["r","c","d"],e)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));
        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getA(rc.x, rc.y, rc.z);
        }

        ${n.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class pNe{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=n0.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const n=uo();this.outputShape=e,this.enableShapeUniforms=Gs(this.outputShape.length),this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${this.enableShapeUniforms?W2(["r","c","d"],e):bf(["r","c","d"],e)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));
        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));
        }

        ${n.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class mNe{constructor(e){this.variableNames=["A"],this.outTexUsage=fi.DOWNLOAD;const n=uo();this.outputShape=e,this.userCode=`
      ${T9}

      void main() {
        float x = getAAtOutCoords();
        ${n.output} = encode_float(x);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class gNe{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=fi.DOWNLOAD;const n=uo();this.outputShape=e,this.userCode=`
      ${T9}

      void main() {
        ivec3 coords = getOutputCoords();
        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));
        ${n.output} = encode_float(x);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xNe={R:0,G:1,B:2,A:3};class U_{constructor(e,n=!1,r="RGBA"){this.variableNames=["A"],this.customUniforms=[{name:"texShape",type:"ivec2"}];const s=uo();this.outputShape=e,this.enableShapeUniforms=Gs(this.outputShape.length);let o="result";n&&(o="floor(result * 255. + 0.5)");let i="";for(let a=0;a<r.length;a++){const l=r[a];i+=`
          if(offset == ${a}) {
            result = values[${xNe[l]}];
          }`}this.userCode=`
      ${this.enableShapeUniforms?sD():rD(e)}

      void main() {
        ivec3 coords = getOutputCoords();
        int flatIndex = getFlatIndex(coords);
        float result = 0.;
        int offset = imod(flatIndex, ${r.length});

        flatIndex = idiv(flatIndex, ${r.length}, 1.);

        int r = flatIndex / texShape[1];
        if (r < texShape[0]) {
          int c = imod(flatIndex, texShape[1]);
          vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);
          vec4 values = ${s.texture2D}(A, uv);
          ${i}
        }
        ${s.output} = vec4(${o}, 0., 0., 0.);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class yNe{constructor(e,n=!1){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.customUniforms=[{name:"texShape",type:"ivec2"}];const r=uo();this.outputShape=e,this.enableShapeUniforms=Gs(this.outputShape.length);let s="",o="result";n&&(o="floor(result * 255. + 0.5)");for(let i=0;i<=1;i++)for(let a=0;a<=1;a++){const l=i*2+a;s+=`
          localCoords = coords;
          if(localCoords[2] + ${a} < ${this.enableShapeUniforms?"outShape[2]":`${e[2]}`}) {
          localCoords[2] += ${a};
          if (localCoords[1] + ${i} < ${this.enableShapeUniforms?"outShape[1]":`${e[1]}`}) {
            localCoords[1] += ${i};

            flatIndex = getFlatIndex(localCoords);
            offset = imod(flatIndex, 4);

            flatIndex = idiv(flatIndex, 4, 1.);

            int r = flatIndex / texShape[1];
            int c = imod(flatIndex, texShape[1]);
            vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);
            values = ${r.texture2D}(A, uv);

            if (offset == 0) {
              result[${l}] = values[0];
            } else if (offset == 1) {
              result[${l}] = values[1];
            } else if (offset == 2) {
              result[${l}] = values[2];
            } else {
              result[${l}] = values[3];
            }
          }
        }
        `}this.userCode=`
        ${this.enableShapeUniforms?sD():rD(e)}

        void main() {
          ivec3 coords = getOutputCoords();

          vec4 result = vec4(0.);
          int flatIndex, r, c, offset;
          ivec3 localCoords;
          vec2 uv;
          vec4 values;

          ${s}

          ${r.output} = ${o};
        }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bNe(t){const e=uo(),n=`${e.version}
    precision highp float;
    ${e.attribute} vec3 clipSpacePos;
    ${e.attribute} vec2 uv;
    ${e.varyingVs} vec2 resultUV;

    void main() {
      gl_Position = vec4(clipSpacePos, 1);
      resultUV = uv;
    }`;return nSe(t,n)}function wNe(t){const e=new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]);return aSe(t,e)}function vNe(t){const e=new Uint16Array([0,1,2,2,1,3]);return lSe(t,e)}function G1(t,e,n,r,s,o){uSe(e,n);const i=cSe(t),a=t.TEXTURE_2D;return ct(t,()=>t.bindTexture(a,i)),ct(t,()=>t.texParameteri(a,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE)),ct(t,()=>t.texParameteri(a,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)),ct(t,()=>t.texParameteri(a,t.TEXTURE_MIN_FILTER,t.NEAREST)),ct(t,()=>t.texParameteri(a,t.TEXTURE_MAG_FILTER,t.NEAREST)),Ee().getNumber("WEBGL_VERSION")===1?ct(t,()=>t.texImage2D(a,0,r,e,n,0,s,o,null)):ct(t,()=>t.texStorage2D(a,1,r,e,n)),ct(t,()=>t.bindTexture(t.TEXTURE_2D,null)),{texture:i,texShape:[n,e]}}function O9(t){return t.internalFormatFloat}function CNe(t,e,n,r){const[s,o]=U1(e,n);return G1(t,s,o,O9(r),r.textureFormatFloat,t.FLOAT)}function _9(t){return t.internalFormatHalfFloat}function SNe(t,e,n,r){const[s,o]=U1(e,n);return G1(t,s,o,_9(r),r.textureFormatFloat,r.textureTypeHalfFloat)}function P9(t){return t.downloadTextureFormat}function NNe(t,e,n,r){const[s,o]=U1(e,n);return G1(t,s,o,P9(r),t.RGBA,t.UNSIGNED_BYTE)}function F9(t){return t.internalFormatPackedFloat}function ENe(t,e,n,r){const[s,o]=Mp(e,n);return G1(t,s,o,F9(r),t.RGBA,t.FLOAT)}function M9(t){return t.internalFormatPackedHalfFloat}function INe(t,e,n,r){const[s,o]=Mp(e,n);return G1(t,s,o,M9(r),t.RGBA,r.textureTypeHalfFloat)}function kNe(t,e,n){return ct(t,()=>t.bindBuffer(t.ARRAY_BUFFER,n)),j_(t,e,"clipSpacePos",n,3,20,0)&&j_(t,e,"uv",n,2,20,12)}function TNe(t,e,n,r,s,o){ct(t,()=>t.bindTexture(t.TEXTURE_2D,e));let i,a,l;s instanceof Uint8Array?(i=new Uint8Array(n*r*4),a=t.UNSIGNED_BYTE,l=t.RGBA):(i=new Float32Array(n*r*4),a=t.FLOAT,l=o.internalFormatPackedFloat),i.set(s),Ee().getNumber("WEBGL_VERSION")===2?ct(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,n,r,t.RGBA,a,i)):ct(t,()=>t.texImage2D(t.TEXTURE_2D,0,l,n,r,0,t.RGBA,a,i)),ct(t,()=>t.bindTexture(t.TEXTURE_2D,null))}function ANe(t,e,n){ct(t,()=>t.bindTexture(t.TEXTURE_2D,e)),n.data instanceof Uint8Array?Ee().getNumber("WEBGL_VERSION")===2?ct(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,n.width,n.height,t.RGBA,t.UNSIGNED_BYTE,n.data)):ct(t,()=>t.texImage2D(t.TEXTURE_2D,0,t.RGBA,n.width,n.height,0,t.RGBA,t.UNSIGNED_BYTE,n.data)):Ee().getNumber("WEBGL_VERSION")===2?ct(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,t.RGBA,t.UNSIGNED_BYTE,n)):ct(t,()=>t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,n)),ct(t,()=>t.bindTexture(t.TEXTURE_2D,null))}function RNe(t,e,n,r){const s=t.createBuffer();ct(t,()=>t.bindBuffer(t.PIXEL_PACK_BUFFER,s));const a=4*4*e*n;return ct(t,()=>t.bufferData(t.PIXEL_PACK_BUFFER,a,t.STREAM_READ)),ct(t,()=>t.readPixels(0,0,n,e,t.RGBA,t.FLOAT,0)),ct(t,()=>t.bindBuffer(t.PIXEL_PACK_BUFFER,null)),s}function DNe(t,e,n){const r=t,s=new Float32Array(n);return r.bindBuffer(r.PIXEL_PACK_BUFFER,e),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,s),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),s}function $Ne(t,e,n,r){const[s,o]=U1(e,n),i=4,a=new Uint8Array(KCe(e*n,i));return ct(t,()=>t.readPixels(0,0,s,o,r.downloadTextureFormat,t.UNSIGNED_BYTE,a)),new Float32Array(a.buffer)}function ONe(t,e,n,r,s,o,i,a){const l=t,c=new Float32Array(YCe(o,i));return l.bindBuffer(l.PIXEL_PACK_BUFFER,e),l.getBufferSubData(l.PIXEL_PACK_BUFFER,0,c),l.bindBuffer(l.PIXEL_PACK_BUFFER,null),c}function _Ne(t,e,n){const r=new Float32Array(e*n*4);return ct(t,()=>t.readPixels(0,0,n,e,t.RGBA,t.FLOAT,r)),r}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class hN{constructor(e){this.outputTexture=null,this.program=null,this.disposed=!1,this.itemsToPoll=[];const n=Ee().getNumber("WEBGL_VERSION");if(e!=null?(this.gl=e,GCe(n,e)):this.gl=Fa(n),e=this.gl,Ee().getNumber("WEBGL_VERSION")===2){const o=e;this.createVertexArray=()=>ct(o,()=>o.createVertexArray()),this.bindVertexArray=i=>ct(o,()=>o.bindVertexArray(i)),this.deleteVertexArray=i=>ct(o,()=>o.deleteVertexArray(i)),this.getVertexArray=()=>ct(o,()=>o.getParameter(o.VERTEX_ARRAY_BINDING))}else if(e!=null){const o=e.getExtension("OES_vertex_array_object");if(o==null)throw new Error("All WebGL1 implementations are expected to offer OES_vertex_array_object.");this.createVertexArray=()=>ct(e,()=>o.createVertexArrayOES()),this.bindVertexArray=i=>ct(e,()=>o.bindVertexArrayOES(i)),this.deleteVertexArray=i=>ct(e,()=>o.deleteVertexArrayOES(i)),this.getVertexArray=()=>ct(e,()=>e.getParameter(o.VERTEX_ARRAY_BINDING_OES))}let r="WEBGL_color_buffer_float";const s="EXT_color_buffer_half_float";if(this.parallelCompilationExtension=this.gl.getExtension("KHR_parallel_shader_compile"),Ee().getNumber("WEBGL_VERSION")===1){const o="OES_texture_float",i="OES_texture_half_float";if(this.textureFloatExtension=Qx(this.gl,o),Xi(this.gl,i))this.textureHalfFloatExtension=Qx(this.gl,i);else if(Ee().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(r),Xi(this.gl,s))this.colorBufferHalfFloatExtension=Qx(this.gl,s);else if(Ee().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(r="EXT_color_buffer_float",Xi(this.gl,r))this.colorBufferFloatExtension=this.gl.getExtension(r);else if(Xi(this.gl,s))this.colorBufferHalfFloatExtension=this.gl.getExtension(s);else throw new Error("GL context does not support color renderable floats");this.vertexBuffer=wNe(this.gl),this.indexBuffer=vNe(this.gl),this.framebuffer=dSe(this.gl),this.textureConfig=nD(this.gl,this.textureHalfFloatExtension)}get debug(){return Ee().getBool("DEBUG")}dispose(){if(this.disposed)return;this.program!=null&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),this.outputTexture!=null&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");const e=this.gl;ct(e,()=>e.finish()),ct(e,()=>e.bindFramebuffer(e.FRAMEBUFFER,null)),ct(e,()=>e.deleteFramebuffer(this.framebuffer)),ct(e,()=>e.bindBuffer(e.ARRAY_BUFFER,null)),ct(e,()=>e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null)),ct(e,()=>e.deleteBuffer(this.indexBuffer)),this.disposed=!0}createFloat32MatrixTexture(e,n){return this.throwIfDisposed(),CNe(this.gl,e,n,this.textureConfig)}createFloat16MatrixTexture(e,n){return this.throwIfDisposed(),SNe(this.gl,e,n,this.textureConfig)}createUnsignedBytesMatrixTexture(e,n){return this.throwIfDisposed(),NNe(this.gl,e,n,this.textureConfig)}uploadPixelDataToTexture(e,n){this.throwIfDisposed(),ANe(this.gl,e,n)}uploadDenseMatrixToTexture(e,n,r,s){this.throwIfDisposed(),TNe(this.gl,e,n,r,s,this.textureConfig)}createFloat16PackedMatrixTexture(e,n){return this.throwIfDisposed(),INe(this.gl,e,n,this.textureConfig)}createPackedMatrixTexture(e,n){return this.throwIfDisposed(),ENe(this.gl,e,n,this.textureConfig)}deleteMatrixTexture(e){this.throwIfDisposed(),this.outputTexture===e&&(z_(this.gl,this.framebuffer),this.outputTexture=null),ct(this.gl,()=>this.gl.deleteTexture(e))}downloadByteEncodedFloatMatrixFromOutputTexture(e,n,r){return this.downloadMatrixDriver(e,()=>$Ne(this.gl,n,r,this.textureConfig))}downloadPackedMatrixFromBuffer(e,n,r,s,o,i){return ONe(this.gl,e,n,r,s,o,i,this.textureConfig)}downloadFloat32MatrixFromBuffer(e,n){return DNe(this.gl,e,n)}createBufferFromTexture(e,n,r){this.bindTextureToFrameBuffer(e);const s=RNe(this.gl,n,r,this.textureConfig);return this.unbindTextureToFrameBuffer(),s}createAndWaitForFence(){const e=this.createFence(this.gl);return this.pollFence(e)}createFence(e){let n,r;if(Ee().getBool("WEBGL_FENCE_API_ENABLED")){const s=e,o=s.fenceSync(s.SYNC_GPU_COMMANDS_COMPLETE,0);e.flush(),r=()=>{const i=s.clientWaitSync(o,0,0);return i===s.ALREADY_SIGNALED||i===s.CONDITION_SATISFIED},n=o}else Ee().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(n=this.beginQuery(),this.endQuery(),r=()=>this.isQueryAvailable(n,Ee().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))):r=()=>!0;return{query:n,isFencePassed:r}}downloadMatrixFromPackedTexture(e,n,r){return this.downloadMatrixDriver(e,()=>_Ne(this.gl,n,r))}createProgram(e){this.throwIfDisposed();const n=this.gl;this.vertexShader==null&&(this.vertexShader=bNe(n));const r=oSe(n);ct(n,()=>n.attachShader(r,this.vertexShader)),ct(n,()=>n.attachShader(r,e)),iSe(n,r);const s=Object.assign(r,{vao:this.createVertexArray()});return this.debug&&cN(n,s),s}buildVao(e){this.setProgram(e),this.bindVertexArray(e.vao);const n=this.gl;ct(n,()=>n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,this.indexBuffer)),kNe(n,e,this.vertexBuffer)}deleteProgram(e){this.throwIfDisposed(),e===this.program&&(this.program=null),e!=null&&(ct(this.gl,()=>this.gl.deleteProgram(e)),this.deleteVertexArray(e.vao))}setProgram(e){this.throwIfDisposed(),this.program=e,this.program!=null&&this.debug&&cN(this.gl,this.program),ct(this.gl,()=>this.gl.useProgram(e))}getUniformLocation(e,n,r=!0){return this.throwIfDisposed(),r?hSe(this.gl,e,n):pSe(this.gl,e,n)}getAttributeLocation(e,n){return this.throwIfDisposed(),ct(this.gl,()=>this.gl.getAttribLocation(e,n))}getUniformLocationNoThrow(e,n){return this.throwIfDisposed(),this.gl.getUniformLocation(e,n)}setInputMatrixTexture(e,n,r){this.throwIfDisposed(),this.throwIfNoProgram(),mSe(this.gl,e,n,r)}setOutputMatrixTexture(e,n,r){this.setOutputMatrixTextureDriver(e,r,n)}setOutputPackedMatrixTexture(e,n,r){this.throwIfDisposed();const[s,o]=Mp(n,r);this.setOutputMatrixTextureDriver(e,s,o)}setOutputMatrixWriteRegion(e,n,r,s){this.setOutputMatrixWriteRegionDriver(r,e,s,n)}setOutputPackedMatrixWriteRegion(e,n,r,s){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")}debugValidate(){this.program!=null&&cN(this.gl,this.program),Jx(this.gl)}executeProgram(){this.throwIfDisposed(),this.throwIfNoProgram();const e=this.gl;if(this.debug){const n=this.getVertexArray();console.assert(n===this.program.vao,"VAO changed between setProgram and executeProgram!"),this.debugValidate()}ct(e,()=>e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0))}blockUntilAllProgramsCompleted(){this.throwIfDisposed(),ct(this.gl,()=>this.gl.finish())}getQueryTimerExtension(){return this.disjointQueryTimerExtension==null&&(this.disjointQueryTimerExtension=Qx(this.gl,Ee().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension}getQueryTimerExtensionWebGL2(){return this.getQueryTimerExtension()}getQueryTimerExtensionWebGL1(){return this.getQueryTimerExtension()}beginQuery(){if(Ee().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){const r=this.gl,s=this.getQueryTimerExtensionWebGL2(),o=r.createQuery();return r.beginQuery(s.TIME_ELAPSED_EXT,o),o}const e=this.getQueryTimerExtensionWebGL1(),n=e.createQueryEXT();return e.beginQueryEXT(e.TIME_ELAPSED_EXT,n),n}endQuery(){if(Ee().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){const n=this.gl,r=this.getQueryTimerExtensionWebGL2();n.endQuery(r.TIME_ELAPSED_EXT);return}const e=this.getQueryTimerExtensionWebGL1();e.endQueryEXT(e.TIME_ELAPSED_EXT)}async waitForQueryAndGetTime(e){return await E4(()=>this.disposed||this.isQueryAvailable(e,Ee().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))),this.getQueryTime(e,Ee().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}getQueryTime(e,n){if(n===0)return null;if(n===2){const r=this.gl;return r.getQueryParameter(e,r.QUERY_RESULT)/1e6}else{const r=this.getQueryTimerExtensionWebGL1();return r.getQueryObjectEXT(e,r.QUERY_RESULT_EXT)/1e6}}isQueryAvailable(e,n){if(n===0)return!0;if(n===2){const r=this.gl,s=this.getQueryTimerExtensionWebGL2(),o=r.getQueryParameter(e,r.QUERY_RESULT_AVAILABLE);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(s.GPU_DISJOINT_EXT)),o&&!this.disjoint}else{const r=this.getQueryTimerExtensionWebGL1(),s=r.getQueryObjectEXT(e,r.QUERY_RESULT_AVAILABLE_EXT);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(r.GPU_DISJOINT_EXT)),s&&!this.disjoint}}pollFence(e){return new Promise(n=>{this.addItemToPoll(()=>e.isFencePassed(),()=>n())})}pollItems(){const e=PNe(this.itemsToPoll.map(n=>n.isDoneFn));for(let n=0;n<=e;++n){const{resolveFn:r}=this.itemsToPoll[n];r()}this.itemsToPoll=this.itemsToPoll.slice(e+1)}addItemToPoll(e,n){if(this.itemsToPoll.push({isDoneFn:e,resolveFn:n}),this.itemsToPoll.length>1)return;let r;"setTimeoutCustom"in Ee().platform&&(r=Ee().platform.setTimeoutCustom.bind(Ee().platform)),E4(()=>(this.pollItems(),this.itemsToPoll.length===0),()=>0,null,r)}bindTextureToFrameBuffer(e){this.throwIfDisposed(),uN(this.gl,e,this.framebuffer),this.debug&&Jx(this.gl)}unbindTextureToFrameBuffer(){this.outputTexture!=null?(uN(this.gl,this.outputTexture,this.framebuffer),this.debug&&Jx(this.gl)):z_(this.gl,this.framebuffer)}downloadMatrixDriver(e,n){this.bindTextureToFrameBuffer(e);const r=n();return this.unbindTextureToFrameBuffer(),r}setOutputMatrixTextureDriver(e,n,r){this.throwIfDisposed();const s=this.gl;uN(s,e,this.framebuffer),this.debug&&Jx(s),this.outputTexture=e,ct(s,()=>s.viewport(0,0,n,r)),ct(s,()=>s.scissor(0,0,n,r))}setOutputMatrixWriteRegionDriver(e,n,r,s){this.throwIfDisposed(),ct(this.gl,()=>this.gl.scissor(e,n,r,s))}throwIfDisposed(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")}throwIfNoProgram(){if(this.program==null)throw new Error("No GPU program is currently set.")}}function PNe(t){let e=0;for(;e<t.length&&t[e]();++e);return e-1}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const{addImpl:FNe,bincountImpl:L9,bincountReduceImpl:MNe,bitwiseAndImpl:LNe,castImpl:BNe,ceilImpl:jNe,concatImpl:zNe,equalImpl:VNe,expImpl:WNe,expm1Impl:UNe,floorImpl:HNe,gatherNdImpl:GNe,gatherV2Impl:qNe,greaterImpl:XNe,greaterEqualImpl:KNe,lessImpl:YNe,lessEqualImpl:ZNe,linSpaceImpl:QNe,logImpl:JNe,maxImpl:eEe,maximumImpl:tEe,minimumImpl:nEe,multiplyImpl:rEe,negImpl:sEe,notEqualImpl:oEe,prodImpl:iEe,raggedGatherImpl:aEe,raggedRangeImpl:lEe,raggedTensorToTensorImpl:cEe,rangeImpl:uEe,rsqrtImpl:dEe,scatterImpl:fEe,sigmoidImpl:hEe,simpleAbsImpl:B9,sliceImpl:pEe,sparseFillEmptyRowsImpl:mEe,sparseReshapeImpl:gEe,sparseSegmentReductionImpl:j9,sqrtImpl:xEe,staticRegexReplaceImpl:yEe,stridedSliceImpl:bEe,stringNGramsImpl:wEe,stringSplitImpl:vEe,stringToHashBucketFastImpl:CEe,subImpl:SEe,tileImpl:NEe,topKImpl:EEe,transposeImpl:iD,uniqueImpl:IEe}=mye;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function z9(t,e){return["x","y","z","w","u","v"].slice(0,e).map(n=>`${t}.${n}`)}function ro(t,e){return e===1?[t]:z9(t,e)}function kEe(t,e){if(t===1)return"rc";let n="";for(let r=0;r<t;r++)n+=e[r],r<t-1&&(n+=",");return n}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class TEe{constructor(e){if(this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.enableShapeUniforms=Gs(this.outputShape.length),this.rank===0)this.userCode=`
        void main() {
          setOutput(vec4(getA(), 0., 0., 0.));
        }
      `;else{const n=ro("rc",this.rank),r=On(this.rank),s=this.getOutOfBoundsCondition(n),o=this.getSetup(n),i=this.getOutput(n);this.userCode=`
        void main() {
          ${r} rc = getOutputCoords();

          if(${s}) {
            setOutput(vec4(0));
          } else {
            ${o}

            setOutput(vec4(${i}));
          }
        }
      `}}getSourceCoordsArr(e){const n=[];for(let r=0;r<=1;r++)for(let s=0;s<=1;s++){let o=`${r===0?"r":"rp1"}, ${s===0?"c":"cp1"}`;for(let i=2;i<this.rank;i++)o=`${e[e.length-1-i]},`+o;n.push(o)}return n}getOutOfBoundsCondition(e){if(this.rank===1)return`rc > ${this.enableShapeUniforms?"outShape":this.outputShape[0]}`;let n="";for(let r=this.rank-2;r<this.rank;r++)n+=`${e[r]} >= ${this.enableShapeUniforms?`outShape[${r}]`:this.outputShape[r]}`,r<this.rank-1&&(n+="||");return n}getSetup(e){if(this.rank===1)return"";const n=e.slice(-2),r=this.enableShapeUniforms?`outShape[${this.rank} - 1]`:this.outputShape[this.rank-1],s=this.enableShapeUniforms?`outShape[${this.rank} - 2]`:this.outputShape[this.rank-2];return`
      int r = ${n[0]};
      int c = ${n[1]};
      int rp1 = r + 1;
      int cp1 = c + 1;

      bool cEdge = cp1 >= ${r};
      bool rEdge = rp1 >= ${s};
    `}getOutput(e){const n=this.getSourceCoordsArr(e);return this.rank===1?`getA(rc), (rc + 1 >= ${this.enableShapeUniforms?"outShape":this.outputShape[0]} ? 0. : getA(rc + 1)), 0, 0`:`getA(${n[0]}),
            cEdge ? 0. : getA(${n[1]}),
            rEdge ? 0. : getA(${n[2]}),
            rEdge || cEdge ? 0. : getA(${n[3]})`}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class V9{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec3"}],this.outputShape=e,this.enableShapeUniforms=Gs(this.outputShape.length);let r="";for(let s=0;s<4;s++){let o="thisRC = rc;";s%2===1&&(o+="thisRC.z += 1;"),s>1&&(o+="thisRC.y += 1;"),r+=`
        ${o}
        ${s>0?"if(thisRC.y < rows && thisRC.z < cols){":""}
          int flatIndex = getFlatIndex(thisRC);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);
          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[${s}] =
            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);
        ${s>0?"}":""}
      `}this.userCode=`
      ${AEe(n,this.enableShapeUniforms)}
      ${this.enableShapeUniforms?sD():rD(e)}

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.);

        ivec3 thisRC;
        int rows = ${this.enableShapeUniforms?"outShape[1]":e[1]};
        int cols = ${this.enableShapeUniforms?"outShape[2]":e[2]};

        ${r}

        setOutput(result);
      }
    `}}function AEe(t,e){return`
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      ${e?kSe(["r","c","d"],"inputShape"):bf(["r","c","d"],t)}
      return ivec3(r, c, d);
    }
  `}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class REe{constructor(e){this.gpgpu=e,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0,this.freeTextures={},this.usedTextures={},this.logEnabled=!1}acquireTexture(e,n,r){const s=G_(n,r),o=q_(e,s,r);o in this.freeTextures||(this.freeTextures[o]=[]),o in this.usedTextures||(this.usedTextures[o]=[]);const i=H_(e,s,this.gpgpu.gl,this.gpgpu.textureConfig,r);if(this.freeTextures[o].length>0){this.numFreeTextures--,this.numUsedTextures++,this._numBytesFree-=i,this.log();const l=this.freeTextures[o].pop();return this.usedTextures[o].push(l),l}let a;return s===ws.PACKED_2X2_FLOAT32?a=this.gpgpu.createPackedMatrixTexture(e[0],e[1]):s===ws.PACKED_2X2_FLOAT16?a=this.gpgpu.createFloat16PackedMatrixTexture(e[0],e[1]):s===ws.UNPACKED_FLOAT32?a=this.gpgpu.createFloat32MatrixTexture(e[0],e[1]):s===ws.UNPACKED_FLOAT16?a=this.gpgpu.createFloat16MatrixTexture(e[0],e[1]):s===ws.PACKED_4X1_UNSIGNED_BYTE&&(a=this.gpgpu.createUnsignedBytesMatrixTexture(e[0],e[1])),this.usedTextures[o].push(a),this.numUsedTextures++,this._numBytesAllocated+=i,this.log(),a}releaseTexture(e,n,r,s){if(this.freeTextures==null)return;const o=G_(r,s),i=q_(n,o,s);i in this.freeTextures||(this.freeTextures[i]=[]);const a=H_(n,o,this.gpgpu.gl,this.gpgpu.textureConfig,s),l=Ee().getNumber("WEBGL_DELETE_TEXTURE_THRESHOLD");l!==-1&&this._numBytesAllocated>l?(this.gpgpu.deleteMatrixTexture(e.texture),this._numBytesAllocated-=a):(this.freeTextures[i].push(e),this.numFreeTextures++,this._numBytesFree+=a),this.numUsedTextures--;const c=this.usedTextures[i],d=c&&c.indexOf(e);if(d==null||d<0)throw new Error("Cannot release a texture that was never provided by this texture manager");c[d]=c[c.length-1],c.pop(),this.log()}log(){if(!this.logEnabled)return;const e=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",`${this.numFreeTextures} / ${this.numUsedTextures}`,`(${e})`);const n=this._numBytesFree/this._numBytesAllocated;console.log(`Bytes allocated: ${this._numBytesAllocated}`),console.log(`Bytes unused: ${this._numBytesFree} (${Math.round(100*n)}%)`)}get numBytesAllocated(){return this._numBytesAllocated}get numBytesFree(){return this._numBytesFree}getNumUsedTextures(){return this.numUsedTextures}getNumFreeTextures(){return this.numFreeTextures}dispose(){if(this.freeTextures!=null){for(const e in this.freeTextures)this.freeTextures[e].forEach(n=>{this.gpgpu.deleteMatrixTexture(n.texture)});for(const e in this.usedTextures)this.usedTextures[e].forEach(n=>{this.gpgpu.deleteMatrixTexture(n.texture)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0}}}function DEe(t,e){const n=t;if(e===n.R32F)return 4;if(e===n.R16F)return 2;if(e===n.RGBA32F)return 16;if(e===t.RGBA)return 16;if(e===n.RGBA16F)return 8;if(e===n.RGBA8)return 4;throw new Error(`Unknown internal format ${e}`)}function H_(t,e,n,r,s){const o=$Ee(e,r);let i;if(s){const[l,c]=Mp(t[0],t[1]);i=l*c}else{const[l,c]=U1(t[0],t[1]);i=l*c}const a=DEe(n,o);return i*a}function $Ee(t,e){switch(t){case ws.PACKED_2X2_FLOAT32:return F9(e);case ws.PACKED_2X2_FLOAT16:return M9(e);case ws.UNPACKED_FLOAT32:return O9(e);case ws.UNPACKED_FLOAT16:return _9(e);case ws.PACKED_4X1_UNSIGNED_BYTE:return P9(e);default:throw new Error(`Unknown physical texture type ${t}`)}}function OEe(t){return Ee().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?t?ws.PACKED_2X2_FLOAT32:ws.UNPACKED_FLOAT32:t?ws.PACKED_2X2_FLOAT16:ws.UNPACKED_FLOAT16}function G_(t,e){if(t===fi.UPLOAD)return ws.PACKED_2X2_FLOAT32;if(t===fi.RENDER||t==null)return OEe(e);if(t===fi.DOWNLOAD||t===fi.PIXELS)return ws.PACKED_4X1_UNSIGNED_BYTE;throw new Error(`Unknown logical texture type ${t}`)}function q_(t,e,n){return`${t[0]}_${t[1]}_${e}_${n}`}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class hl{constructor(e,n){this.variableNames=["A"],this.outputShape=e,this.enableShapeUniforms=Gs(this.outputShape.length),this.userCode=`
      float unaryOperation(float x) {
        ${n}
      }

      void main() {
        float x = getAAtOutCoords();
        float y = unaryOperation(x);

        setOutput(y);
      }
    `}}const la="if (isnan(x)) return x;",_Ee="return x;",X_="return abs(x);",PEe="return (x >= 0.0) ? x : (exp(x) - 1.0);",FEe=la+`
  return (x < 0.0) ? 0.0 : x;
`,MEe=la+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,_c="return x;",LEe="return 1.0 / (1.0 + exp(-1.0 * x));";/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const BEe="return x;",jEe=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,zEe=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,VEe=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,WEe="return 1.0 / (1.0 + exp(-1.0 * x));";class Gc{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.enableShapeUniforms=Gs(this.outputShape.length),this.userCode=`
      vec4 unaryOperation(vec4 x) {
        ${n}
      }

      void main() {
        vec4 x = getAAtOutCoords();
        vec4 y = unaryOperation(x);

        setOutput(y);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class UEe{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=e,this.enableShapeUniforms=Gs(this.outputShape.length);const n=e.length,r=ro("rc",n),s=On(n),o=kEe(n,r),i=r.slice(-2),a=n<=1?"rc":`vec2(${i.join(",")})`;this.userCode=`
      void main() {
        ${s} rc = getOutputCoords();
        vec4 packedInput = getA(${o});

        setOutput(getChannel(packedInput, ${a}));
      }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const HEe=D3,GEe=1e-7,qEe=1e-4,ny={};function XEe(t){return t in ny||(ny[t]={}),ny[t]}const KEe=Ee().getNumber("CPU_HANDOFF_SIZE_THRESHOLD"),YEe=600;function ZEe(){return Ee().global.screen==null?1024:Ee().global.screen.height*Ee().global.screen.width*window.devicePixelRatio*YEe/1024/1024}class U2 extends PT{nextDataId(){return U2.nextDataId++}constructor(e){if(super(),this.pendingRead=new WeakMap,this.pendingDisposal=new WeakSet,this.dataRefCount=new WeakMap,this.numBytesInGPU=0,this.uploadWaitMs=0,this.downloadWaitMs=0,this.lastGlFlushTime=0,this.warnedAboutMemory=!1,this.pendingDeletes=0,this.disposed=!1,!Ee().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");let n;if(e!=null){if(e instanceof hN)n=e;else{const r=Fa(Ee().getNumber("WEBGL_VERSION"),e);n=new hN(r)}this.binaryCache={},this.gpgpuCreatedLocally=!1}else{const r=Fa(Ee().getNumber("WEBGL_VERSION"));n=new hN(r),this.binaryCache=XEe(Ee().getNumber("WEBGL_VERSION")),this.gpgpuCreatedLocally=!0}this.gpgpu=n,this.canvas=this.gpgpu.gl.canvas,this.textureManager=new REe(this.gpgpu),this.numMBBeforeWarning=ZEe(),this.texData=new iB(this,tl())}numDataIds(){return this.texData.numDataIds()-this.pendingDeletes}writeTexture(e,n,r,s,o,i){const a=this.makeTensorInfo(n,r),l=this.texData.get(a.dataId);l.isPacked=!1,l.texture={texture:e,texShape:[s,o]},l.texShape=[s,o];const c=ey(n),d=new U_(c,!1,i),f=this.runWebGLProgram(d,[a],r,[[s,o]]);return f.shape=n,l.texture=null,this.disposeIntermediateTensorInfo(a),f.dataId}write(e,n,r){if((Ee().getBool("WEBGL_CHECK_NUMERICAL_PROBLEMS")||Ee().getBool("DEBUG"))&&this.checkNumericalProblems(e),r==="complex64"&&e!=null)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");const s={id:this.nextDataId()};return this.texData.set(s,{shape:n,dtype:r,values:e,usage:fi.UPLOAD,refCount:1}),s}refCount(e){return this.texData.has(e)?this.texData.get(e).refCount:0}incRef(e){const n=this.texData.get(e);n.refCount++}decRef(e){if(this.texData.has(e)){const n=this.texData.get(e);n.refCount--}}move(e,n,r,s,o){if(Ee().getBool("DEBUG")&&this.checkNumericalProblems(n),s==="complex64")throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(e,{shape:r,dtype:s,values:n,usage:fi.UPLOAD,refCount:o})}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}readSync(e){const n=this.texData.get(e),{values:r,dtype:s,complexTensorInfos:o,slice:i,shape:a,isPacked:l}=n;if(i!=null){let p;l?p=new Gc(a,_c):p=new hl(a,_c);const g=this.runWebGLProgram(p,[{dataId:e,shape:a,dtype:s}],s),x=this.readSync(g.dataId);return this.disposeIntermediateTensorInfo(g),x}if(r!=null)return this.convertAndCacheOnCPU(e);if(s==="string")return r;const c=this.activeTimers!=null;let d;c&&(d=po());let f;if(s==="complex64"){const p=this.readSync(o.real.dataId),g=this.readSync(o.imag.dataId);f=ac(p,g)}else f=this.getValuesFromTexture(e);return c&&(this.downloadWaitMs+=po()-d),this.convertAndCacheOnCPU(e,f)}async read(e){if(this.pendingRead.has(e)){const x=this.pendingRead.get(e);return new Promise(b=>x.push(b))}const n=this.texData.get(e),{values:r,shape:s,slice:o,dtype:i,complexTensorInfos:a,isPacked:l}=n;if(o!=null){let x;l?x=new Gc(s,_c):x=new hl(s,_c);const b=this.runWebGLProgram(x,[{dataId:e,shape:s,dtype:i}],i),w=this.read(b.dataId);return this.disposeIntermediateTensorInfo(b),w}if(r!=null)return this.convertAndCacheOnCPU(e);if(Ee().getBool("DEBUG")&&!Ee().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&Ee().getNumber("WEBGL_VERSION")===2)throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");let c=null,d;if(i!=="complex64"&&Ee().get("WEBGL_BUFFER_SUPPORTED")){d=this.decode(e);const x=this.texData.get(d.dataId);c=this.gpgpu.createBufferFromTexture(x.texture.texture,...Zx(s))}this.pendingRead.set(e,[]),i!=="complex64"&&await this.gpgpu.createAndWaitForFence();let f;if(i==="complex64"){const x=await Promise.all([this.read(a.real.dataId),this.read(a.imag.dataId)]),b=x[0],w=x[1];f=ac(b,w)}else if(c==null)f=this.getValuesFromTexture(e);else{const x=Te(s);f=this.gpgpu.downloadFloat32MatrixFromBuffer(c,x)}if(d!=null&&this.disposeIntermediateTensorInfo(d),c!=null){const x=this.gpgpu.gl;ct(x,()=>x.deleteBuffer(c))}const p=this.convertAndCacheOnCPU(e,f),g=this.pendingRead.get(e);return this.pendingRead.delete(e),g.forEach(x=>x(p)),this.pendingDisposal.has(e)&&(this.pendingDisposal.delete(e),this.disposeData(e)&&tl().removeDataId(e,this),this.pendingDeletes--),p}readToGPU(e,n={}){const r=this.texData.get(e),{values:s,shape:o,slice:i,dtype:a,isPacked:l,texture:c}=r;if(a==="complex64")throw new Error("Does not support reading texture for complex64 dtype.");if(i!=null){let g;l?g=new Gc(o,_c):g=new hl(o,_c);const x=this.runWebGLProgram(g,[{dataId:e,shape:o,dtype:a}],a),b=this.readToGPU(x,n);return this.disposeIntermediateTensorInfo(x),b}if(c==null)throw s!=null?new Error("Data is not on GPU but on CPU."):new Error("There is no data on GPU or CPU.");const d=this.decode(e,n.customTexShape),f=tl().makeTensorFromTensorInfo(d),p=this.texData.get(d.dataId);return Object.assign({tensorRef:f},p.texture)}bufferSync(e){const n=this.readSync(e.dataId);if(e.dtype==="string")try{const r=n.map(s=>du(s));return Gt(e.shape,e.dtype,r)}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return Gt(e.shape,e.dtype,n)}checkNumericalProblems(e){if(e!=null)for(let n=0;n<e.length;n++){const r=e[n];if(!eSe(r))throw Ee().getBool("WEBGL_RENDER_FLOAT32_CAPABLE")?Error(`The value ${r} cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'`):Error(`The value ${r} cannot be represented on this device.`)}}getValuesFromTexture(e){const{shape:n,dtype:r,isPacked:s}=this.texData.get(e),o=Te(n);if(Ee().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){const p=this.decode(e),g=this.texData.get(p.dataId),x=this.gpgpu.downloadMatrixFromPackedTexture(g.texture.texture,...Zx(n)).subarray(0,o);return this.disposeIntermediateTensorInfo(p),x}const i=Ee().getBool("WEBGL_PACK")&&s===!0,a=i?ey(n):n,l=i?new gNe(a):new mNe(a),c=this.runWebGLProgram(l,[{shape:a,dtype:r,dataId:e}],"float32"),d=this.texData.get(c.dataId),f=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(d.texture.texture,d.texShape[0],d.texShape[1]).subarray(0,o);return this.disposeIntermediateTensorInfo(c),f}timerAvailable(){return Ee().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0}time(e){const n=this.activeTimers,r=[];let s=!1;this.programTimersStack==null?(this.programTimersStack=r,s=!0):this.activeTimers.push(r),this.activeTimers=r,e();const o=jd(this.activeTimers.map(l=>l.query)).filter(l=>l!=null),i=jd(this.activeTimers.map(l=>l.name)).filter(l=>l!=null);this.activeTimers=n,s&&(this.programTimersStack=null);const a={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null};return(async()=>{if(Ee().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0){const l=await Promise.all(o);a.kernelMs=Hse(l),a.getExtraProfileInfo=()=>l.map((c,d)=>({name:i[d],ms:c})).map(c=>`${c.name}: ${c.ms}`).join(", ")}else a.kernelMs={error:"WebGL query timers are not supported in this environment."};return this.uploadWaitMs=0,this.downloadWaitMs=0,a})()}memory(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU,numBytesInGPUAllocated:this.textureManager.numBytesAllocated,numBytesInGPUFree:this.textureManager.numBytesFree}}startTimer(){return Ee().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:po(),endMs:null}}endTimer(e){return Ee().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),e):(e.endMs=po(),e)}async getQueryTime(e){if(Ee().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)return this.gpgpu.waitForQueryAndGetTime(e);const n=e;return n.endMs-n.startMs}disposeData(e,n=!1){if(this.pendingDisposal.has(e))return!1;if(!this.texData.has(e))return!0;if(n?this.texData.get(e).refCount=0:this.texData.get(e).refCount--,!n&&this.texData.get(e).refCount>0)return!1;if(this.pendingRead.has(e))return this.pendingDisposal.add(e),this.pendingDeletes++,!1;this.releaseGPUData(e);const{complexTensorInfos:r}=this.texData.get(e);return r!=null&&(this.disposeData(r.real.dataId,n),this.disposeData(r.imag.dataId,n)),this.texData.delete(e),!0}releaseGPUData(e){const{texture:n,dtype:r,texShape:s,usage:o,isPacked:i,slice:a}=this.texData.get(e),l=a&&a.origDataId||e,c=this.dataRefCount.get(l);c>1?this.dataRefCount.set(l,c-1):(this.dataRefCount.delete(l),n!=null&&(this.numBytesInGPU-=this.computeBytes(s,r),this.textureManager.releaseTexture(n,s,o,i)));const d=this.texData.get(e);d.texture=null,d.texShape=null,d.isPacked=!1,d.slice=null}getTexture(e){return this.uploadToGPU(e),this.texData.get(e).texture.texture}getDataInfo(e){return this.texData.get(e)}shouldExecuteOnCPU(e,n=KEe){return Ee().getBool("WEBGL_CPU_FORWARD")&&e.every(r=>this.texData.get(r.dataId).texture==null&&Te(r.shape)<n)}getGPGPUContext(){return this.gpgpu}where(e){ci("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");const n=e.dataSync();return HEe(e.shape,n)}packedUnaryOp(e,n,r){const s=new Gc(e.shape,n),o=this.compileAndRun(s,[e],r);return tl().makeTensorFromTensorInfo(o)}abs(e){if(this.shouldExecuteOnCPU([e])&&e.dtype!=="complex64"){const s=B9(this.texData.get(e.dataId).values);return this.makeOutput(e.shape,e.dtype,s)}if(Ee().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,X_,e.dtype);const n=new hl(e.shape,X_),r=this.compileAndRun(n,[e]);return tl().makeTensorFromTensorInfo(r)}makeTensorInfo(e,n,r){let s;if(n==="string"&&r!=null&&r.length>0&&T0(r[0])){const o=r.map(i=>su(i));s=this.write(o,e,n)}else s=this.write(r,e,n);return this.texData.get(s).usage=null,{dataId:s,shape:e,dtype:n}}makeOutput(e,n,r){return tl().makeTensorFromTensorInfo(this.makeTensorInfo(e,n,r),this)}unpackTensor(e){const n=new UEe(e.shape);return this.runWebGLProgram(n,[e],e.dtype)}packTensor(e){const n=new TEe(e.shape);return this.runWebGLProgram(n,[e],e.dtype,null,!0)}packedReshape(e,n){const r=[rp(e.shape),...sp(e.shape)],s={dtype:e.dtype,shape:r,dataId:e.dataId},o=[rp(n),...sp(n)],i=new V9(o,r),a=!0,l=[r],c=this.runWebGLProgram(i,[s],e.dtype,l,a);return{dataId:c.dataId,shape:n,dtype:c.dtype}}decode(e,n){const r=this.texData.get(e),{isPacked:s,shape:o,dtype:i}=r;if(n!=null){const p=Te(o),g=n[0]*n[1]*4;Y(p<=g,()=>"customTexShape is too small. Row * Column * 4 should be equal or larger than the size of the tensor data.")}const a=ey(o);let l;s?l=new pNe(a):l=new hNe(a);const c=!0,d=[n??Zx(a)],f=this.runWebGLProgram(l,[{shape:a,dtype:i,dataId:e}],i,d,c,n);return{dtype:i,shape:o,dataId:f.dataId}}runWebGLProgram(e,n,r,s,o=!1,i){const a=this.makeTensorInfo(e.outputShape,r),l=this.texData.get(a.dataId);if(e.packedOutput&&(l.isPacked=!0),e.outPackingScheme===n0.DENSE){const C=i??Zx(e.outputShape);l.texShape=C.map(N=>N*2)}if(e.outTexUsage!=null&&(l.usage=e.outTexUsage),Te(a.shape)===0)return l.values=Ss(a.dtype,0),a;const c=[],d=n.map(C=>{if(C.dtype==="complex64")throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");let N=this.texData.get(C.dataId);if(N.texture==null){if(!e.packedInputs&&Te(C.shape)<=Ee().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:C.shape,texData:null,isUniform:!0,uniformValues:N.values};e.packedInputs&&(N.isPacked=!0,N.shape=C.shape)}if(this.uploadToGPU(C.dataId),!!N.isPacked!=!!e.packedInputs)C=N.isPacked?this.unpackTensor(C):this.packTensor(C),c.push(C),N=this.texData.get(C.dataId);else if(N.isPacked&&!tw(N.shape,C.shape)){const k=C,I=C.shape;C.shape=N.shape,C=this.packedReshape(C,I),c.push(C),N=this.texData.get(C.dataId),k.shape=I}return{shape:C.shape,texData:N,isUniform:!1}});this.uploadToGPU(a.dataId);const f={shape:a.shape,texData:l,isUniform:!1},p=fNe(e,d,f),g=this.getAndSaveBinary(p,()=>uNe(this.gpgpu,e,d,f)),x=this.activeTimers!=null;let b;x&&(b=this.startTimer()),Ee().get("ENGINE_COMPILE_ONLY")||dNe(this.gpgpu,g,d,f,s),c.forEach(C=>this.disposeIntermediateTensorInfo(C)),x&&(b=this.endTimer(b),this.activeTimers.push({name:e.constructor.name,query:this.getQueryTime(b)}));const w=Ee().getNumber("WEBGL_FLUSH_THRESHOLD");if(w>0){const C=po();C-this.lastGlFlushTime>w&&(this.gpgpu.gl.flush(),this.lastGlFlushTime=C)}if(!Ee().getBool("WEBGL_LAZILY_UNPACK")&&l.isPacked&&o===!1){const C=this.unpackTensor(a);return this.disposeIntermediateTensorInfo(a),C}return a}compileAndRun(e,n,r,s,o=!1){return r=r||n[0].dtype,this.runWebGLProgram(e,n,r,s,o)}getAndSaveBinary(e,n){return e in this.binaryCache||(this.binaryCache[e]=n()),this.binaryCache[e]}getTextureManager(){return this.textureManager}dispose(){this.disposed||(Ee().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach(n=>{this.gpgpu.deleteProgram(this.binaryCache[n].webGLProgram),delete this.binaryCache[n]}),this.textureManager.dispose(),this.canvas!=null&&typeof HTMLCanvasElement<"u"&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)}floatPrecision(){return this.floatPrecisionValue==null&&(this.floatPrecisionValue=we(()=>{if(!Ee().get("WEBGL_RENDER_FLOAT32_ENABLED")){const e=Ee().getBool("DEBUG");Ee().set("DEBUG",!1);const n=this.abs(kt(1e-8)).dataSync()[0];if(Ee().set("DEBUG",e),n>0)return 32}return 16})),this.floatPrecisionValue}epsilon(){return this.floatPrecision()===32?GEe:qEe}uploadToGPU(e){const n=this.texData.get(e),{shape:r,dtype:s,values:o,texture:i,usage:a,isPacked:l}=n;if(i!=null)return;const c=this.activeTimers!=null;let d;c&&(d=po());let f=n.texShape;if(f==null&&(f=ySe(r,l),n.texShape=f),o!=null){const p=ey(r);let g,x=f[1],b=f[0];const w=o instanceof Uint8Array||o instanceof Uint8ClampedArray;(l||!w)&&([x,b]=Mp(f[0],f[1])),l?g=new yNe(p,w):g=new U_(p,w);const C=w?[b,x]:f,N=this.makeTensorInfo(C,s),k=this.texData.get(N.dataId);w?k.usage=fi.PIXELS:k.usage=fi.UPLOAD,k.texShape=C,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(N.dataId),x,b,o);const I=[[b,x]],$=this.runWebGLProgram(g,[N],s,I,!0),O=this.texData.get($.dataId);n.texShape=O.texShape,n.isPacked=O.isPacked,n.usage=O.usage,Ee().get("ENGINE_COMPILE_ONLY")?this.disposeData($.dataId):(n.texture=O.texture,n.values=null,this.texData.delete($.dataId)),this.disposeIntermediateTensorInfo(N),c&&(this.uploadWaitMs+=po()-d)}else{const p=this.acquireTexture(f,a,s,l);n.texture=p}}convertAndCacheOnCPU(e,n){const r=this.texData.get(e),{dtype:s}=r;return n!=null&&(r.values=QEe(n,s)),r.values}acquireTexture(e,n,r,s){if(this.numBytesInGPU+=this.computeBytes(e,r),!this.warnedAboutMemory&&this.numBytesInGPU>this.numMBBeforeWarning*1024*1024){const o=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn(`High memory usage in GPU: ${o} MB, most likely due to a memory leak`)}return this.textureManager.acquireTexture(e,n,s)}computeBytes(e,n){return e[0]*e[1]*Ab(n)}checkCompileCompletion(){for(const[,e]of Object.entries(this.binaryCache))this.checkCompletion_(e)}async checkCompileCompletionAsync(){const e=[];if(this.gpgpu.parallelCompilationExtension){for(const[,n]of Object.entries(this.binaryCache))e.push(this.checkCompletionAsync_(n));return Promise.all(e)}else{for(const[,n]of Object.entries(this.binaryCache)){const r=new Promise(s=>{try{this.checkCompletion_(n),s(!0)}catch(o){throw o}});e.push(r)}return Promise.all(e)}}async checkCompletionAsync_(e){return this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.parallelCompilationExtension.COMPLETION_STATUS_KHR)?this.checkCompletion_(e):(await Nj(),this.checkCompletionAsync_(e))}checkCompletion_(e){if(this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.gl.LINK_STATUS)===!1)throw console.log(this.gpgpu.gl.getProgramInfoLog(e.webGLProgram)),this.gpgpu.gl.getShaderParameter(e.fragmentShader,this.gpgpu.gl.COMPILE_STATUS)===!1?(k9(e.source,this.gpgpu.gl.getShaderInfoLog(e.fragmentShader)),new Error("Failed to compile fragment shader.")):new Error("Failed to link vertex and fragment shaders.");return!0}getUniformLocations(){for(const e of Object.values(this.binaryCache)){this.gpgpu.buildVao(e.webGLProgram);const{variablesLocations:n,customUniformLocations:r,infLoc:s,nanLoc:o,outShapeLocation:i,outShapeStridesLocation:a,outTexShapeLocation:l}=$9(this.gpgpu,e.program,e.webGLProgram);e.variablesLocations=n,e.customUniformLocations=r,e.infLoc=s,e.nanLoc=o,e.outShapeLocation=i,e.outShapeStridesLocation=a,e.outTexShapeLocation=l}}createTensorFromGPUData(e,n,r){e.channels=e.channels||"RGBA";const{texture:s,height:o,width:i,channels:a}=e,l=tl().backend;if(!l.gpgpu.gl.isTexture(s))throw new Error("The texture is invalid. Also, please make sure the texture and the TFJS WebGL backend are using the same canvas. If you want to use your own custom canvas, you have to create and use the custom TFJS WebGL backend created from the canvas through 'new tf.MathBackendWebGL(customCanvas)'.");const c=l.writeTexture(s,n,r,o,i,a);return tl().makeTensorFromDataId(c,n,r,l)}}U2.nextDataId=0;function QEe(t,e){if(e==="float32"||e==="complex64")return t;if(e==="int32"||e==="bool"){const n=e==="int32"?new Int32Array(t.length):new Uint8Array(t.length);for(let r=0;r<n.length;++r)n[r]=Math.round(t[r]);return n}else throw new Error(`Unknown dtype ${e}`)}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */DB()&&PB("webgl",()=>new U2,2);/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aD=`
  if (isnan(a)) return a;
  if (isnan(b)) return b;
`;class Qd{constructor(e,n,r){this.variableNames=["A","B"],this.outputShape=jt(n,r),this.enableShapeUniforms=Gs(this.outputShape.length),this.userCode=`
      float binaryOperation(float a, float b) {
        ${e}
      }

      void main() {
        float a = getAAtOutCoords();
        float b = getBAtOutCoords();
        setOutput(binaryOperation(a, b));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vf=`
  result.r = isNaN.r ? NAN : result.r;
  result.g = isNaN.g ? NAN : result.g;
  result.b = isNaN.b ? NAN : result.b;
  result.a = isNaN.a ? NAN : result.a;
`;class Vp{constructor(e,n,r,s=!1){this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=jt(n,r);const o=this.outputShape.length;this.enableShapeUniforms=Gs(o);let i="";if(s)if(o===0||Te(this.outputShape)===1)i=`
          result.y = 0.;
          result.z = 0.;
          result.w = 0.;
        `;else if(i=`
          ${On(o)} coords = getOutputCoords();
        `,o===1)this.enableShapeUniforms?i+=`
            result.y = (coords + 1) >= outShape ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `:i+=`
            result.y = (coords + 1) >= ${this.outputShape[0]} ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `;else{const l=ro("coords",o);this.enableShapeUniforms?i+=`
            bool nextRowOutOfBounds =
              (${l[o-2]} + 1) >= outShape[${o} - 2];
            bool nextColOutOfBounds =
              (${l[o-1]} + 1) >= outShape[${o} - 1];
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `:i+=`
            bool nextRowOutOfBounds =
              (${l[o-2]} + 1) >= ${this.outputShape[o-2]};
            bool nextColOutOfBounds =
              (${l[o-1]} + 1) >= ${this.outputShape[o-1]};
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `}this.userCode=`
      vec4 binaryOperation(vec4 a, vec4 b) {
        ${e}
      }

      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();

        vec4 result = binaryOperation(a, b);
        ${i}

        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jo(t){const{inputs:e,backend:n}=t,{x:r}=e;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}const JEe={kernelName:K0,backendName:"webgl",kernelFunc:Jo};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bu(t){const{inputs:e,backend:n}=t,{real:r,imag:s}=e,o=n.makeTensorInfo(r.shape,"complex64"),i=n.texData.get(o.dataId),a=Jo({inputs:{x:r},backend:n}),l=Jo({inputs:{x:s},backend:n});return i.complexTensorInfos={real:a,imag:l},o}const eIe={kernelName:HT,backendName:"webgl",kernelFunc:Bu};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const W9="return (a < 0.) ? b * a : a;",U9=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function tIe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{alpha:o}=r,i=n.makeTensorInfo([],"float32",Au(o,"float32")),a=Ee().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Vp(U9,s.shape,i.shape):new Qd(W9,s.shape,i.shape),l=n.runWebGLProgram(a,[s,i],"float32");return n.disposeIntermediateTensorInfo(i),l}const nIe={kernelName:Sv,backendName:"webgl",kernelFunc:tIe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const H9="return (a < 0.) ? b * a : a;",G9=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function rIe(t){const{inputs:e,backend:n}=t,{x:r,alpha:s}=e,o=Ee().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Vp(G9,r.shape,s.shape):new Qd(H9,r.shape,s.shape);return n.runWebGLProgram(o,[r,s],"float32")}const sIe={kernelName:Vv,backendName:"webgl",kernelFunc:rIe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Wp="if (isnan(x)) return x;";function fn({opSnippet:t,packedOpSnippet:e,cpuKernelImpl:n,dtype:r}){return({inputs:s,backend:o})=>{const{x:i}=s,a=o,l=r||i.dtype;if(a.shouldExecuteOnCPU([i])&&n!=null){const f=a.texData.get(i.dataId),p=n(f.values,l);return a.makeTensorInfo(i.shape,l,p)}const c=Ee().getBool("WEBGL_PACK_UNARY_OPERATIONS")&&e!=null;let d;return c?d=new Gc(i.shape,e):d=new hl(i.shape,t),a.runWebGLProgram(d,[i],l)}}function Ts({opSnippet:t,packedOpSnippet:e,checkOutOfBounds:n=!1,supportsComplex:r=!1,cpuKernelImpl:s,dtype:o}){return({inputs:i,backend:a})=>{const{a:l,b:c}=i,d=a;if(r&&l.dtype==="complex64"){const x=d.texData.get(l.dataId),b=d.texData.get(c.dataId),[w,C]=[[x.complexTensorInfos.real,b.complexTensorInfos.real],[x.complexTensorInfos.imag,b.complexTensorInfos.imag]].map(k=>{const[I,R]=k,$={dataId:I.dataId,dtype:I.dtype,shape:l.shape},O={dataId:R.dataId,dtype:R.dtype,shape:c.shape},F=new Qd(t,l.shape,c.shape);return d.runWebGLProgram(F,[$,O],Xo(I.dtype,R.dtype))}),N=Bu({inputs:{real:w,imag:C},backend:d});return d.disposeIntermediateTensorInfo(w),d.disposeIntermediateTensorInfo(C),N}const f=o||Xo(l.dtype,c.dtype);if((l.dtype==="string"||c.dtype==="string"||d.shouldExecuteOnCPU([l,c]))&&s!=null){const x=d.texData.get(l.dataId).values,b=d.texData.get(c.dataId).values,w=l.dtype==="string"?lc(x):x,C=l.dtype==="string"?lc(b):b,[N,k]=s(l.shape,c.shape,w,C,f),I=d.makeTensorInfo(k,f),R=d.texData.get(I.dataId);return R.values=N,I}const p=Ee().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&e!=null;let g;return p?g=new Vp(e,l.shape,c.shape,n):g=new Qd(t,l.shape,c.shape),d.runWebGLProgram(g,[l,c],f)}}function r0(t,e=!1){if(t==="linear")return e?BEe:_Ee;if(t==="relu")return e?zEe:FEe;if(t==="elu")return e?jEe:PEe;if(t==="relu6")return e?VEe:MEe;if(t==="prelu")return e?G9:H9;if(t==="leakyrelu")return e?U9:W9;if(t==="sigmoid")return e?WEe:LEe;throw new Error(`Activation ${t} has not been implemented for the WebGL backend.`)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class q9{constructor(e,n,r,s=!1,o=!1,i=!1,a=null,l=!1,c=!1){this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=r,this.enableShapeUniforms=Gs(this.outputShape.length);const d=s?e[1]:e[2],f=Math.ceil(d/2),p=s?"i * 2, rc.y":"rc.y, i * 2",g=o?"rc.z, i * 2":"i * 2, rc.z",x=s?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],b=o?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"];let w="",C="";a&&(l?w=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${a}
        }`:c?w=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${a}
        }`:w=`vec4 activation(vec4 x) {
          ${a}
        }`,C="result = activation(result);");const N=i?"result += getBiasAtOutCoords();":"";i&&this.variableNames.push("bias"),l&&this.variableNames.push("preluActivationWeights"),c&&this.variableNames.push("leakyreluAlpha");let k="rc.x",I="rc.x";e[0]<n[0]?k=`imod(rc.x, ${e[0]})`:n[0]<e[0]&&(I=`imod(rc.x, ${n[0]})`),this.userCode=`
      ${w}
      // Don't use uniform for sharedDimensionPacked for performance.
      const float sharedDimension = ${f}.0;

      vec4 dot2x2ARowBCol(ivec3 rc) {
        vec4 result = vec4(0);
        int batchA = ${k};
        int batchB = ${I};
        for (int i = 0; i < ${f}; i++) {
          vec4 a = getMatrixA(batchA, ${p});
          vec4 b = getMatrixB(batchB, ${g});

          // These swizzled products need to be separately added.
          // See: https://github.com/tensorflow/tfjs/issues/1735
          result += (${x[0]} * ${b[0]});
          result += (${x[1]} * ${b[1]});
        }
        return result;
      }

      void main() {
        ivec3 rc = getOutputCoords();
        vec4 result = dot2x2ARowBCol(rc);

        ${N}

        ${C}

        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const K_={REAL:"return areal * breal - aimag * bimag;",IMAG:"return areal * bimag + aimag * breal;"};class Y_{constructor(e,n,r){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=jt(n,r),this.userCode=`
      float binaryOpComplex(
          float areal, float aimag, float breal, float bimag) {
        ${e}
      }

      void main() {
        float areal = getARealAtOutCoords();
        float aimag = getAImagAtOutCoords();
        float breal = getBRealAtOutCoords();
        float bimag = getBImagAtOutCoords();
        setOutput(binaryOpComplex(areal, aimag, breal, bimag));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Z_="return a * b;";function lD(t){const{inputs:e,backend:n}=t,{a:r,b:s}=e,o=Xo(r.dtype,s.dtype);if(r.dtype==="complex64"){const a=n.texData.get(r.dataId),l=n.texData.get(s.dataId),c=new Y_(K_.REAL,r.shape,s.shape),d=new Y_(K_.IMAG,r.shape,s.shape),f=[{dataId:a.complexTensorInfos.real.dataId,dtype:a.complexTensorInfos.real.dtype,shape:r.shape},{dataId:a.complexTensorInfos.imag.dataId,dtype:a.complexTensorInfos.imag.dtype,shape:r.shape},{dataId:l.complexTensorInfos.real.dataId,dtype:l.complexTensorInfos.real.dtype,shape:s.shape},{dataId:l.complexTensorInfos.imag.dataId,dtype:l.complexTensorInfos.imag.dtype,shape:s.shape}],p=n.runWebGLProgram(c,f,"float32"),g=n.runWebGLProgram(d,f,"float32"),x=Bu({inputs:{real:p,imag:g},backend:n});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(g),x}if(n.shouldExecuteOnCPU([r,s])){const a=n.texData.get(r.dataId),l=n.texData.get(s.dataId),[c,d]=rEe(r.shape,s.shape,a.values,l.values,o),f=n.makeTensorInfo(d,o),p=n.texData.get(f.dataId);return p.values=c,f}let i;return Ee().getBool("WEBGL_PACK_BINARY_OPERATIONS")?i=new Vp(Z_,r.shape,s.shape):i=new Qd(Z_,r.shape,s.shape),n.runWebGLProgram(i,[r,s],o)}const oIe={kernelName:s1,backendName:"webgl",kernelFunc:lD};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iIe(t,e,n){const r=[rp(t.shape),...sp(t.shape)],s={dtype:t.dtype,shape:r,dataId:t.dataId},o=[rp(e),...sp(e)],i=new V9(o,r),a=!0,l=[r],c=n.runWebGLProgram(i,[s],t.dtype,l,a);return{dataId:c.dataId,shape:e,dtype:c.dtype}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tt(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{shape:o}=r,i=n,a=Te(s.shape),l=aB(o,a),c=Te(l);Y(a===c,()=>`The new shape (${l}) has ${c} elements and the old shape (${s.shape}) has ${a} elements. The new shape and old shape must have the same number of elements.`);const d=i.texData.get(s.dataId);return d.isPacked&&!tw(s.shape,l)&&!(d.texture!==null&&tw(d.shape,l))?iIe(s,l,i):(i.incRef(s.dataId),{dataId:s.dataId,shape:l,dtype:s.dtype})}const aIe={kernelName:Uv,backendName:"webgl",kernelFunc:tt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Q_{constructor(e,n){this.variableNames=["x"];const{windowSize:r,batchSize:s,inSize:o,outSize:i}=e;this.outputShape=[s,i];const a=Math.floor(r/4)*4,l=r%4;let c="sumValue += dot(values, ones);";if(n!=null){const f=1/n;c=`sumValue += dot(values * ${Gh(f)?f.toPrecision(2):f}, ones);`}let d="";o%r>0&&(d=`
        if (inIdx < 0 || inIdx >= ${o}) {
          return 0.0;
        }
      `),this.userCode=`
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${d}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${r};

        float sumValue = 0.0;

        for (int i = 0; i < ${a}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${c}
        }

        int inIdx = inOffset + ${a};
        if (${l===1}) {
          vec4 values = vec4(getValue(batch, inIdx), 0.0, 0.0, 0.0);

          ${c}
        } else if (${l===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1), 0.0, 0.0);

          ${c}
        } else if (${l===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2), 0.0);

          ${c}
        }
        setOutput(sumValue);
      }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class lIe{constructor(e,n){this.variableNames=["x"];const{windowSize:r,batchSize:s,inSize:o,outSize:i}=e;this.outputShape=[s,i];let a="0.0",l="";n==="prod"?a="1.0":n==="min"?(a="1.0 / 1e-20",l="min"):n==="max"&&(a="-1.0 / 1e-20",l="max");let c=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="sum"?c="sumValue":n==="prod"?c="prodValue":n==="all"?c="allValue":n==="any"&&(c="anyValue");const d=Math.floor(r/4)*4,f=r%4;let p=`
      if (${n==="sum"}) {
        sumValue += dot(values, ones);
      } else if (${n==="prod"}) {
        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);
        prodValue *= tmp[0] * tmp[1];
      } else {
        minMaxValue = ${l}(values, minMaxValue);
        if (${n==="min"} || ${n==="max"}) {
          minMaxValue = ${l}(values, minMaxValue);
          bvec4 isNaN = isnan(values);
          if (isNaN.r || isNaN.g || isNaN.b || isNaN.a) {
            minMaxValue = vec4(NAN);
          }
        }
      }
    `,g="vec4";n==="all"?(a="1.0",p=`
        bool reducedAllValue = all(values);
        float floatedReducedAllValue = float(reducedAllValue);
        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);
      `,g="bvec4"):n==="any"&&(a="0.0",p=`
        bool reducedAnyValue = any(values);
        float floatedReducedAnyValue = float(reducedAnyValue);
        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);
      `,g="bvec4");let x="";o%r>0&&(x=`
        if (inIdx < 0 || inIdx >= ${o}) {
          return initializationValue;
        }
      `),this.userCode=`
      const float initializationValue = ${a};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${x}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${r};

        vec4 minMaxValue = vec4(${a});
        float prodValue = 1.0;
        float sumValue = 0.0;
        float allValue = 1.0;
        float anyValue = 0.0;

        for (int i = 0; i < ${d}; i += 4) {
          int inIdx = inOffset + i;
          ${g} values = ${g}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${p}
        }

        int inIdx = inOffset + ${d};
        if (${f===1}) {
          ${g} values = ${g}(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          ${p}
        } else if (${f===2}) {
          ${g} values = ${g}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          ${p}
        } else if (${f===3}) {
          ${g} values = ${g}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          ${p}
        }
        setOutput(${c});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cIe(t){const e=[];for(;e.length===0||e[e.length-1].outSize!==1;){const n=e.length?e[e.length-1].outSize:t[1],r=T2(n);e.push({inSize:n,windowSize:r,outSize:Math.ceil(n/r)})}return e}function Cf(t,e,n,r){const s=cIe(t.shape);let o=t;for(let i=0;i<s.length;i++){const{inSize:a,windowSize:l,outSize:c}=s[i];let d,f;n==="mean"?d=i===0?new Q_({windowSize:l,inSize:a,batchSize:t.shape[0],outSize:c},a):new Q_({windowSize:l,inSize:a,batchSize:t.shape[0],outSize:c}):d=new lIe({windowSize:l,inSize:a,batchSize:t.shape[0],outSize:c},n),f=o,o=r.runWebGLProgram(d,[o],e),f.dataId!==t.dataId&&r.disposeIntermediateTensorInfo(f)}return o}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class uIe{constructor(e,n){this.variableNames=["A"];const r=new Array(e.length);for(let i=0;i<r.length;i++)r[i]=e[n[i]];this.outputShape=r,this.rank=r.length;const s=On(this.rank),o=dIe(n);this.userCode=`
    void main() {
      ${s} resRC = getOutputCoords();
      setOutput(getA(${o}));
    }
    `}}function dIe(t){const e=t.length;if(e>6)throw Error(`Transpose for rank ${e} is not yet supported`);const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],r=new Array(e);for(let s=0;s<t.length;s++)r[t[s]]=n[s];return r.join()}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class fIe{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;const r=new Array(e.length);for(let d=0;d<r.length;d++)r[d]=e[n[d]];if(this.outputShape=r,this.rank=r.length,this.rank>6)throw Error(`Packed transpose for rank ${this.rank} is not yet supported.`);const s=On(this.rank),o=z9("rc",this.rank),i=new Array(this.rank);for(let d=0;d<n.length;d++)i[n[d]]=o[d];const a=`vec2(${i.slice(-2).join()})`,l=`++${o[this.rank-1]} < ${r[this.rank-1]}`,c=`getChannel(getA(${i.join()}), ${a})`;this.userCode=`
    void main() {
      ${s} rc = getOutputCoords();
      vec4 result = vec4(0.);
      result[0] = ${c};
      if(${l}) {
        result[1] = ${c};
      }
      --${o[this.rank-1]};
      if(++${o[this.rank-2]} < ${r[this.rank-2]}) {
        result[2] = ${c};
        if(${l}) {
          result[3] = ${c};
        }
      }
      setOutput(result);
    }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function H2(t,e,n){const r=Ee().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new fIe(t.shape,e):new uIe(t.shape,e);return n.runWebGLProgram(r,[t],t.dtype)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hIe(t,e,n,r){const s=e,o=t.shape.length,i=Zt(s,t.shape);let a=i;const l=fr(a,o),c=l!=null;let d=t;c&&(d=H2(t,l,r),a=$r(a.length,o)),Is("sum",a,o);const[f,p]=ms(d.shape,a);let g=f;n&&(g=Dr(f,i));const x=Te(p),w=Te(t.shape)/x,C=tt({inputs:{x:d},attrs:{shape:[w,x]},backend:r}),N=UA(t.dtype),k=Cf(C,N,"sum",r),I=tt({inputs:{x:k},attrs:{shape:g},backend:r});return r.disposeIntermediateTensorInfo(C),r.disposeIntermediateTensorInfo(k),c&&r.disposeIntermediateTensorInfo(d),I}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function G2(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:o,keepDims:i}=r;return hIe(s,o,i,n)}const pIe={kernelName:Yv,backendName:"webgl",kernelFunc:G2};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lo(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{perm:o}=r,i=n,a=s.shape.length,l=new Array(a);for(let d=0;d<l.length;d++)l[d]=s.shape[o[d]];let c;if(i.shouldExecuteOnCPU([s])){const f=i.texData.get(s.dataId).values,p=iD(f,s.shape,s.dtype,o,l);c=i.makeTensorInfo(l,s.dtype);const g=i.texData.get(c.dataId);g.values=p}else c=H2(s,o,i);return c}const mIe={kernelName:Nh,backendName:"webgl",kernelFunc:lo};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const X9=1e3;function nw({a:t,b:e,transposeA:n,transposeB:r,backend:s,bias:o=null,preluActivationWeights:i=null,leakyreluAlpha:a=0,activation:l=null}){const c=t.shape.length,d=e.shape.length,f=n?t.shape[c-2]:t.shape[c-1],p=r?e.shape[d-1]:e.shape[d-2],g=n?t.shape[c-1]:t.shape[c-2],x=r?e.shape[d-2]:e.shape[d-1],b=t.shape.slice(0,-2),w=e.shape.slice(0,-2),C=Te(b),N=Te(w),I=jt(t.shape.slice(0,-2),e.shape.slice(0,-2)).concat([g,x]);Y(f===p,()=>`Error in matMul: inner shapes (${f}) and (${p}) of Tensors with shapes ${t.shape} and ${e.shape} and transposeA=${n} and transposeB=${r} must match.`);const R=n?[C,f,g]:[C,g,f],$=r?[N,x,p]:[N,p,x],O=tt({inputs:{x:t},backend:s,attrs:{shape:R}}),F=tt({inputs:{x:e},backend:s,attrs:{shape:$}}),M=[O,F],_=Math.max(C,N),V=n?O.shape[1]:O.shape[2],B=o!=null,W=i!=null,q=l==="leakyrelu",j=l!=null?r0(l,!0):null,G=B||W||q||j!=null;let Z;if((g===1||x===1)&&V>X9&&G===!1){let X=O,ee=F;n&&(X=lo({inputs:{x:O},backend:s,attrs:{perm:[0,2,1]}}),M.push(X)),r&&(ee=lo({inputs:{x:F},backend:s,attrs:{perm:[0,2,1]}}),M.push(ee));const ne=x!==1,oe=x===1;let ye=X;ne&&(ye=tt({inputs:{x:X},backend:s,attrs:{shape:[_,V,1]}}),M.push(ye));const ge=x===1?2:1;let ve=ee;oe&&(ve=tt({inputs:{x:ee},backend:s,attrs:{shape:[_,1,V]}}),M.push(ve));const he=lD({inputs:{a:ye,b:ve},backend:s});Z=G2({inputs:{x:he},backend:s,attrs:{axis:ge,keepDims:!0}}),M.push(he)}else{const X=Xo(t.dtype,e.dtype),ee=new q9(R,$,[_,g,x],n,r,B,j,W,q),ne=[O,F];if(o!=null&&ne.push(o),W&&ne.push(i),q){const oe=s.makeTensorInfo([],"float32",Au(a,"float32"));ne.push(oe),M.push(oe)}Z=s.runWebGLProgram(ee,ne,X)}const J=tt({inputs:{x:Z},backend:s,attrs:{shape:I}});M.push(Z);for(const X of M)s.disposeIntermediateTensorInfo(X);return J}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gIe(t){const{inputs:e,backend:n,attrs:r}=t,{a:s,b:o,bias:i,preluActivationWeights:a}=e,{transposeA:l,transposeB:c,activation:d,leakyreluAlpha:f}=r;return nw({a:s,b:o,transposeA:l,transposeB:c,backend:n,bias:i,preluActivationWeights:a,leakyreluAlpha:f,activation:d})}const xIe={kernelName:Rb,backendName:"webgl",kernelFunc:gIe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const J_="return abs(x);";function yIe(t){const{inputs:e,backend:n}=t,{x:r}=e;if(n.shouldExecuteOnCPU([r])&&r.dtype!=="complex64"){const o=n.texData.get(r.dataId),i=B9(o.values);return n.makeTensorInfo(r.shape,r.dtype,i)}let s;return Ee().getBool("WEBGL_PACK_UNARY_OPERATIONS")?s=new Gc(r.shape,J_):s=new hl(r.shape,J_),n.runWebGLProgram(s,[r],r.dtype)}const bIe={kernelName:tv,backendName:"webgl",kernelFunc:yIe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wIe=la+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return acos(x);
`,vIe=fn({opSnippet:wIe}),CIe={kernelName:A0,backendName:"webgl",kernelFunc:vIe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SIe=la+`
  if (x < 1.0) return NAN;
return log(x + sqrt(x * x - 1.0));`,NIe=fn({opSnippet:SIe}),EIe={kernelName:R0,backendName:"webgl",kernelFunc:NIe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eP="return a + b;",IIe=Ts({opSnippet:eP,packedOpSnippet:eP,supportsComplex:!0,cpuKernelImpl:FNe}),kIe={kernelName:Ap,backendName:"webgl",kernelFunc:IIe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class TIe{constructor(e,n){this.outputShape=[],this.outputShape=e,this.variableNames=n.map((o,i)=>`T${i}`);const r=[];this.variableNames.forEach(o=>{r.push(`float v${o} = get${o}AtOutCoords();`)});const s=this.variableNames.map(o=>`v${o}`).join(" + ");this.userCode=`
      void main() {
        ${r.join(`
        `)}

        float result = ${s};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class AIe{constructor(e,n){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.variableNames=n.map((o,i)=>`T${i}`);const r=[];this.variableNames.forEach(o=>{r.push(`vec4 v${o} = get${o}AtOutCoords();`)});const s=this.variableNames.map(o=>`v${o}`).join(" + ");this.userCode=`
      void main() {
        ${r.join(`
        `)}

        vec4 result = ${s};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Py(t){const{inputs:e,backend:n}=t,r=e;if(r.length===1)return Jo({inputs:{x:r[0]},backend:n});if(r.length>Ee().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){const l=Math.floor(r.length/2),c=Py({inputs:r.slice(0,l),backend:n}),d=Py({inputs:r.slice(l),backend:n});return Py({inputs:[c,d],backend:n})}const s=r.map(l=>l.dtype).reduce((l,c)=>Xo(l,c)),o=r.map(l=>l.shape),a=Ee().getBool("WEBGL_PACK")?new AIe(r[0].shape,o):new TIe(r[0].shape,o);return n.runWebGLProgram(a,r,s)}const RIe={kernelName:nv,backendName:"webgl",kernelFunc:Py};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DIe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:o,keepDims:i}=r,a=s.shape.length,l=Zt(o,s.shape);let c=l;const d=fr(c,a);let f=s;d!=null&&(f=lo({inputs:{x:s},backend:n,attrs:{perm:d}}),c=$r(c.length,a)),Is("all",c,a);const[p,g]=ms(f.shape,c),x=Te(g),b=tt({inputs:{x:f},backend:n,attrs:{shape:[-1,x]}}),w=Cf(b,b.dtype,"all",n);let C;if(i){const N=Dr(p,l);C=tt({inputs:{x:w},backend:n,attrs:{shape:N}})}else C=tt({inputs:{x:w},backend:n,attrs:{shape:p}});return n.disposeIntermediateTensorInfo(b),n.disposeIntermediateTensorInfo(w),d!=null&&n.disposeIntermediateTensorInfo(f),C}const $Ie={kernelName:BT,backendName:"webgl",kernelFunc:DIe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OIe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:o,keepDims:i}=r,a=s.shape.length,l=Zt(o,s.shape);let c=l;const d=fr(c,a);let f=s;d!=null&&(f=lo({inputs:{x:s},backend:n,attrs:{perm:d}}),c=$r(c.length,a)),Is("any",c,a);const[p,g]=ms(f.shape,c),x=Te(g),b=tt({inputs:{x:f},backend:n,attrs:{shape:[-1,x]}}),w=Cf(b,b.dtype,"any",n);let C;if(i){const N=Dr(p,l);C=tt({inputs:{x:w},backend:n,attrs:{shape:N}})}else C=tt({inputs:{x:w},backend:n,attrs:{shape:p}});return n.disposeIntermediateTensorInfo(b),n.disposeIntermediateTensorInfo(w),d!=null&&n.disposeIntermediateTensorInfo(f),C}const _Ie={kernelName:jT,backendName:"webgl",kernelFunc:OIe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class PIe{constructor(e,n,r){this.variableNames=["A"];const{windowSize:s,batchSize:o,outSize:i}=e;r||this.variableNames.push("bestIndicesA"),this.outputShape=[o,i];const a=n==="max"?">":"<",l=r?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${s};

        int bestIndex = inOffset;
        float bestValue = getA(batch, bestIndex);

        for (int i = 0; i < ${s}; i++) {
          int inIdx = ${l};
          float candidate = getA(batch, inIdx);
          if (candidate ${a} bestValue) {
            bestValue = candidate;
            bestIndex = inIdx;
          }
        }
        setOutput(float(bestIndex));
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class FIe{constructor(e,n,r,s){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,Y(e.length>2,()=>`Packed arg${r.charAt(0).toUpperCase()+r.slice(1)} supports only inputs with rank above 2.`);const o=e[e.length-1],i=Math.ceil(o/n);this.outputShape=e.slice(0,-1),i>1&&this.outputShape.push(i),s||this.variableNames.push("bestIndicesA");const a=this.outputShape,l=a.length,c=On(l),d=ro("coords",l);let f,p;if(i===1){p=l+1;const F=On(p);f=`
        ${F} sourceLocR = ${F}(${d.join()}, 0);
        ++${d[l-1]};
        ${F} sourceLocG = ${F}(${d.join()}, 0);
        ++${d[l-2]};
        ${F} sourceLocA = ${F}(${d.join()}, 0);
        --${d[l-1]};
        ${F} sourceLocB = ${F}(${d.join()}, 0);
        --${d[l-2]};`}else p=l,f=`
        ${c} sourceLocR = coords;
        ++${d[l-1]};
        ${c} sourceLocG = coords;
        ++${d[l-2]};
        ${c} sourceLocA = coords;
        --${d[l-1]};
        ${c} sourceLocB = coords;
        --${d[l-2]};`;const g=["x","y","z","w","u","v"].slice(0,p),x="."+g[p-1],b=g.map(F=>"int "+F),w=ro("sourceLocR",p-1).concat("inIdx.r"),C=ro("sourceLocG",p-1).concat("inIdx.g"),N=ro("sourceLocB",p-1).concat("inIdx.b"),k=ro("sourceLocA",p-1).concat("inIdx.a"),I=r==="max"?"greaterThan":"lessThan",R=s?"":`
          inIdx = round(vec4(getBestIndicesAChannel(${w.join()}),
                             getBestIndicesAChannel(${C.join()}),
                             getBestIndicesAChannel(${N.join()}),
                             getBestIndicesAChannel(${k.join()})));`,$=`vec4(
            getAChannel(${w.join()}),
            hasNextCol ? getAChannel(${C.join()}) : 0.,
            hasNextRow ? getAChannel(${N.join()}) : 0.,
            hasNextRow && hasNextCol ? getAChannel(${k.join()}) : 0.)`,O=s?"":`
      float getBestIndicesAChannel(${b.join()}) {
        return getChannel(getBestIndicesA(${g.join()}),
                                          vec2(${g.slice(-2).join()}));
      }`;this.userCode=`
      float getAChannel(${b.join()}) {
        return getChannel(getA(${g.join()}),
                               vec2(${g.slice(-2).join()}));
      }
      ${O}
      void main() {
        ${c} coords = getOutputCoords();
        bool hasNextCol = ${d[l-1]} < ${a[l-1]-1};
        bool hasNextRow = ${d[l-2]} < ${a[l-2]-1};
        ${f}
        ivec4 srcIdx = ivec4(sourceLocR${x}, sourceLocG${x},
          sourceLocB${x}, sourceLocA${x}) * ${n};
        ivec4 inIdx = srcIdx;
        vec4 bestIndex = vec4(inIdx);
        vec4 bestValue = ${$};

        for (int i = 0; i < ${n}; i++) {
          inIdx = srcIdx;
          ${R}
          vec4 candidate = ${$};
          bvec4 nan = isnan(candidate);
          bvec4 replace = bvec4(
            vec4(${I}(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));

          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,
                           replace.y  ? candidate.y : bestValue.y,
                           replace.z  ? candidate.z : bestValue.z,
                           replace.w  ? candidate.w : bestValue.w);
          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));
          srcIdx++;
        }
        setOutput(bestIndex);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function K9(t,e,n,r=null){let s=e.shape[0],o=e.shape[1];r!=null&&(s=r.shape[0],o=r.shape[1]);const i=T2(o),a={windowSize:i,inSize:o,batchSize:s,outSize:Math.ceil(o/i)},l=new PIe(a,n,r==null),c=[e];r!=null&&c.push(r);const d=t.runWebGLProgram(l,c,"int32");if(d.shape[1]===1)return d;const f=K9(t,e,n,d);return t.disposeIntermediateTensorInfo(d),f}function Y9(t,e,n,r=null){const s=r!=null?r.shape:e.shape,o=s[s.length-1],i=T2(o),a=new FIe(s,i,n,r==null),l=r==null?[e]:[e,r],c=t.runWebGLProgram(a,l,"int32");if(c.shape.length===e.shape.length){const d=Y9(t,e,n,c);return t.disposeIntermediateTensorInfo(c),d}return c}function Z9(t,e,n,r){const s=[n];if(Is("arg"+r.charAt(0).toUpperCase()+r.slice(1),s,e.shape.length),!Ee().getBool("WEBGL_PACK_REDUCE")||e.shape.length<=2){const o=[],i=t.texData.get(e.dataId),a=i!==null&&i.isPacked;let l=e;a&&(l=t.unpackTensor(e),o.push(l));const[c,d]=ms(l.shape,s),f=Te(d),p=tt({inputs:{x:l},backend:t,attrs:{shape:[-1,f]}});o.push(p);const g=K9(t,p,r);o.push(g);const x=tt({inputs:{x:g},backend:t,attrs:{shape:c}});return o.forEach(b=>t.disposeIntermediateTensorInfo(b)),x}return Y9(t,e,r)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MIe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:o}=r;let i=Zt(o,s.shape);const a=fr(i,s.shape.length);let l=s;const c=[];a!=null&&(l=lo({inputs:{x:s},backend:n,attrs:{perm:a}}),c.push(l),i=$r(i.length,l.shape.length)),Is("argMax",[i[0]],l.shape.length);const d=Z9(n,l,i[0],"max");return c.forEach(f=>n.disposeIntermediateTensorInfo(f)),d}const LIe={kernelName:rv,backendName:"webgl",kernelFunc:MIe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BIe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:o}=r;let i=Zt(o,s.shape);const a=fr(i,s.shape.length);let l=s;const c=[];a!=null&&(l=lo({inputs:{x:s},backend:n,attrs:{perm:a}}),c.push(l),i=$r(i.length,l.shape.length)),Is("argMin",[i[0]],l.shape.length);const d=Z9(n,l,i[0],"min");return c.forEach(f=>n.disposeIntermediateTensorInfo(f)),d}const jIe={kernelName:sv,backendName:"webgl",kernelFunc:BIe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zIe=la+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return asin(x);
`,VIe=fn({opSnippet:zIe}),WIe={kernelName:D0,backendName:"webgl",kernelFunc:VIe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const UIe=la+"return log(x + sqrt(x * x + 1.0));",HIe=fn({opSnippet:UIe}),GIe={kernelName:$0,backendName:"webgl",kernelFunc:HIe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qIe=la+`
  return atan(x);
`,XIe=fn({opSnippet:qIe}),KIe={kernelName:O0,backendName:"webgl",kernelFunc:XIe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YIe=aD+`
  return atan(a, b);
`,ZIe=`
  vec4 result = atan(a, b);
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+vf+`
  return result;
`,QIe=Ts({opSnippet:YIe,packedOpSnippet:ZIe}),JIe={kernelName:P0,backendName:"webgl",kernelFunc:QIe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eke=la+`
  if ((x < -1.0) || (x > 1.0)) return NAN;
return (log(1.0 + x) - log(1.0 - x)) / 2.0;`,tke=fn({opSnippet:eke}),nke={kernelName:_0,backendName:"webgl",kernelFunc:tke};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class s0{constructor(e,n,r,s=!1,o=!1){if(this.variableNames=["x"],n==="avg"&&r)throw new Error("Cannot compute positions for average pool.");const i=e.filterWidth,a=e.strideHeight,l=e.strideWidth,c=e.dilationHeight,d=e.dilationWidth,f=e.effectiveFilterHeight,p=e.effectiveFilterWidth,g=e.padInfo.top,x=e.padInfo.left;this.outputShape=e.outShape;const b=n==="avg",w=`((batch  * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + d`,C=`(xR * ${e.inWidth} + xC) * ${e.inChannels} + d`;let N="0.0";if(b||(N="-1.0 / 1e-20"),r){const F=">=";this.userCode=`
        const ivec2 strides = ivec2(${a}, ${l});
        const ivec2 pads = ivec2(${g}, ${x});

        void main() {
          ivec4 coords = getOutputCoords();
          int batch = coords[0];
          int d = coords[3];

          ivec2 xRCCorner = coords.yz * strides - pads;
          int xRCorner = xRCCorner.x;
          int xCCorner = xRCCorner.y;

          // max/min x(?, ?, d) to get y(yR, yC, d).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;
          float avgValue = 0.0;

          for (int wR = 0; wR < ${f};
              wR += ${c}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${p};
                wC += ${d}) {
              int xC = xCCorner + wC;

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              float value = getX(batch, xR, xC, d);

              // If a min / max value has already been found, use it. If not,
              // use the current value.
              float currMinMaxValue = mix(
                  value, minMaxValue, minMaxValueFound);
              if (value ${F} currMinMaxValue) {
                minMaxValue = value;
                minMaxValueFound = 1.0;
                minMaxPosition = ${s?o?w:C:`wR * ${p} + wC`};
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}const k="max";let I=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="avg"&&(I="avgValue / max(count, 1.0)");const R=Math.floor(i/4)*4,$=i%4,O=`
      if (${b}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${k}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec2 strides = ivec2(${a}, ${l});
      const ivec2 pads = ivec2(${g}, ${x});
      const float initializationValue = ${N};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xR, int xC, int d) {
        if (xC < 0 || xC >= ${e.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xR, xC, d);
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d = coords[3];

        ivec2 xRCCorner = coords.yz * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // max/min x(?, ?, d) to get y(yR, yC, d).
        // ? = to be determined
        vec4 minMaxValue = vec4(${N});
        float avgValue = 0.0;
        count = 0.0;

        for (int wR = 0; wR < ${f};
            wR += ${c}) {
          int xR = xRCorner + wR;

          if (xR < 0 || xR >= ${e.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${R}; wC += 4) {
            int xC = xCCorner + wC * ${d};

            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${d}, d),
              getValue(batch, xR, xC + 2 * ${d}, d),
              getValue(batch, xR, xC + 3 * ${d}, d)
            );

            ${O}
          }

          int xC = xCCorner + ${R};
          if (${$===1}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              initializationValue,
              initializationValue,
              initializationValue
            );

            ${O}
          } else if (${$===2}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${d}, d),
              initializationValue,
              initializationValue
            );

            ${O}
          } else if (${$===3}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${d}, d),
              getValue(batch, xR, xC + 2 * ${d}, d),
              initializationValue
            );

            ${O}
          }
        }
        setOutput(${I});
      }
    `}}class cD{constructor(e,n,r,s=!1,o=!1){if(this.variableNames=["x"],n==="avg"&&r)throw new Error("Cannot compute positions for average pool.");const i=e.filterWidth,a=e.strideDepth,l=e.strideHeight,c=e.strideWidth,d=e.dilationDepth,f=e.dilationHeight,p=e.dilationWidth,g=e.effectiveFilterDepth,x=e.effectiveFilterHeight,b=e.effectiveFilterWidth,w=e.padInfo.front,C=e.padInfo.top,N=e.padInfo.left;this.outputShape=e.outShape;const k=n==="avg";let I="0.0";if(k||(I="-1.0 / 1e-20"),r){const _=">=";this.userCode=`
        const ivec3 strides =
            ivec3(${a}, ${l}, ${c});
        const ivec3 pads = ivec3(${w}, ${C}, ${N});

        void main() {
          ivec5 coords = getOutputCoords();
          int batch = coords.x;
          int ch = coords.u;

          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
          int xDCorner = xCorner.x;
          int xRCorner = xCorner.y;
          int xCCorner = xCorner.z;

          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;

          for (int wD = 0; wD < ${g};
              wD += ${d}) {
            int xD = xDCorner + wD;

            if (xD < 0 || xD >= ${e.inDepth}) {
              continue;
            }

            for (int wR = 0; wR < ${x};
                wR += ${f}) {
              int xR = xRCorner + wR;

              if (xR < 0 || xR >= ${e.inHeight}) {
                continue;
              }

              for (int wC = 0; wC < ${b};
                  wC += ${p}) {
                int xC = xCCorner + wC;

                if (xC < 0 || xC >= ${e.inWidth}) {
                  continue;
                }

                float value = getX(batch, xD, xR, xC, ch);

                // If a min / max value has already been found, use it. If not,
                // use the current value.
                float currMinMaxValue = mix(
                    value, minMaxValue, minMaxValueFound);
                if (value ${_} currMinMaxValue) {
                  minMaxValue = value;
                  minMaxValueFound = 1.0;
                  minMaxPosition = ${s?o?`(((batch * ${e.inDepth} + xD) * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + ch`:`((xD * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + ch`:`wD * ${x} * ${b} +
                      wR * ${b} + wC`};
                }
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}const R="max";let $=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="avg"&&($="avgValue / max(count, 1.0)");const O=Math.floor(i/4)*4,F=i%4,M=`
      if (${k}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${R}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec3 strides =
        ivec3(${a}, ${l}, ${c});
      const ivec3 pads = ivec3(${w}, ${C}, ${N});
      const float initializationValue = ${I};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xD, int xR, int xC, int ch) {
        if (xC < 0 || xC >= ${e.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xD, xR, xC, ch);
      }

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xDCorner = xCorner.x;
        int xRCorner = xCorner.y;
        int xCCorner = xCorner.z;

        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).
        // ? = to be determined
        vec4 minMaxValue = vec4(${I});
        float avgValue = 0.0;
        count = 0.0;

        for (int wD = 0; wD < ${g};
            wD += ${d}) {
          int xD = xDCorner + wD;

          if (xD < 0 || xD >= ${e.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${x};
            wR += ${f}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${O}; wC += 4) {
              int xC = xCCorner + wC * ${p};

              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${p}, ch),
                getValue(batch, xD, xR, xC + 2 * ${p}, ch),
                getValue(batch, xD, xR, xC + 3 * ${p}, ch)
              );

              ${M}
            }

            int xC = xCCorner + ${O};
            if (${F===1}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                initializationValue,
                initializationValue,
                initializationValue
              );

              ${M}
            } else if (${F===2}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${p}, ch),
                initializationValue,
                initializationValue
              );

              ${M}
            } else if (${F===3}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${p}, ch),
                getValue(batch, xD, xR, xC + 2 * ${p}, ch),
                initializationValue
              );

              ${M}
            }
          }
        }
        setOutput(${$});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rke(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e;H1(s,"avgPool");const{filterSize:o,strides:i,pad:a,dimRoundingMode:l}=r,c=1;Y(Es(i,c),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${i} and dilations '${c}'`);const d=ia(s.shape,o,i,c,a,l);if(d.filterWidth===1&&d.filterHeight===1&&nn(d.inShape,d.outShape))return Jo({inputs:{x:s},backend:n});const f=new s0(d,"avg",!1);return n.runWebGLProgram(f,[s],"float32")}const ske={kernelName:ov,backendName:"webgl",kernelFunc:rke};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oke(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{filterSize:o,strides:i,pad:a,dimRoundingMode:l,dataFormat:c}=r,d=[1,1,1],f=pc(s.shape,o,i,d,a,l,c),p=new cD(f,"avg",!1);return n.runWebGLProgram(p,[s],"float32")}const ike={kernelName:iv,backendName:"webgl",kernelFunc:oke};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ake{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;const n=e.filterHeight,r=e.filterWidth,s=e.strideHeight,o=e.strideWidth,i=e.dilationHeight,a=e.dilationWidth,l=e.effectiveFilterHeight,c=e.effectiveFilterWidth,d=l-1-e.padInfo.top,f=c-1-e.padInfo.left,p=1/(n*r);this.userCode=`
      const ivec2 pads = ivec2(${d}, ${f});
      const float avgMultiplier = float(${p});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${l};
            wR += ${i}) {
          float dyR = float(dyRCorner + wR) / ${s}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${c};
            wC+= ${a}) {
            float dyC = float(dyCCorner + wC) / ${o}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);

            dotProd += dyValue * avgMultiplier;
          }
        }
        setOutput(dotProd);
      }
    `}}class lke{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;const n=e.filterDepth,r=e.filterHeight,s=e.filterWidth,o=e.strideDepth,i=e.strideHeight,a=e.strideWidth,l=e.dilationDepth,c=e.dilationHeight,d=e.dilationWidth,f=e.effectiveFilterDepth,p=e.effectiveFilterHeight,g=e.effectiveFilterWidth,x=f-1-e.padInfo.front,b=p-1-e.padInfo.top,w=g-1-e.padInfo.left,C=1/(n*r*s);this.userCode=`
      const ivec3 pads = ivec3(${x}, ${b}, ${w});
      const float avgMultiplier = float(${C});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${f};
            wD += ${l}) {
          float dyD = float(dyDCorner + wD) / ${o}.0;

          if (dyD < 0.0 || dyD >= ${e.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${p};
              wR += ${c}) {
            float dyR = float(dyRCorner + wR) / ${i}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${g};
                wC += ${d}) {
              float dyC = float(dyCCorner + wC) / ${a}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);

              dotProd += dyValue * avgMultiplier;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cke(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,input:o}=e,i=o,{filterSize:a,strides:l,pad:c,dimRoundingMode:d}=r,f=[1,1,1],p=pc(i.shape,a,l,f,c,d),g=new lke(p);return n.runWebGLProgram(g,[s],i.dtype)}const uke={kernelName:VT,backendName:"webgl",kernelFunc:cke};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dke(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,input:o}=e,i=o;H1([s,o],"avgPoolGrad");const{filterSize:a,strides:l,pad:c}=r,d=ia(i.shape,a,l,1,c),f=new ake(d);return n.runWebGLProgram(f,[s],i.dtype)}const fke={kernelName:zT,backendName:"webgl",kernelFunc:dke};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hke(t){const{inputs:e,backend:n,attrs:r}=t,{a:s,b:o}=e,{transposeA:i,transposeB:a}=r;return nw({a:s,b:o,transposeA:i,transposeB:a,backend:n})}const pke={kernelName:av,backendName:"webgl",kernelFunc:hke};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class mke{constructor(e,n,r,s,o,i){this.outputShape=[],this.variableNames=["x","mean","variance"],jt(e,n),jt(e,r);let a="0.0";s!=null&&(jt(e,s),this.variableNames.push("offset"),a="getOffsetAtOutCoords()");let l="1.0";o!=null&&(jt(e,o),this.variableNames.push("scale"),l="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`
      void main() {
        float x = getXAtOutCoords();
        float mean = getMeanAtOutCoords();
        float variance = getVarianceAtOutCoords();
        float offset = ${a};
        float scale = ${l};
        float inv = scale * inversesqrt(variance + float(${i}));
        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class gke{constructor(e,n,r,s,o,i){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],jt(e,n),jt(e,r);let a="vec4(0.0)";s!=null&&(jt(e,s),this.variableNames.push("offset"),a="getOffsetAtOutCoords()");let l="vec4(1.0)";o!=null&&(jt(e,o),this.variableNames.push("scale"),l="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`
      void main() {
        vec4 offset = ${a};
        vec4 scale = ${l};

        vec4 x = getXAtOutCoords();
        vec4 mean = getMeanAtOutCoords();
        vec4 variance = getVarianceAtOutCoords();

        vec4 inv = scale * inversesqrt(variance + vec4(${i}));

        setOutput((x - mean) * inv + offset);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xke=({inputs:t,backend:e,attrs:n})=>{const{x:r,mean:s,variance:o,offset:i,scale:a}=t;Y(s.shape.length===o.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),Y(i==null||s.shape.length===i.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),Y(a==null||s.shape.length===a.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");let{varianceEpsilon:l}=n;l==null&&(l=.001);const c=[r,s,o];let d=null;i!=null&&(d=i.shape,c.push(i));let f=null;a!=null&&(f=a.shape,c.push(a));const p=Ee().getBool("WEBGL_PACK_NORMALIZATION")?new gke(r.shape,s.shape,o.shape,d,f,l):new mke(r.shape,s.shape,o.shape,d,f,l);return e.runWebGLProgram(p,c,c[0].dtype)},yke={kernelName:wv,backendName:"webgl",kernelFunc:xke};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class bke{constructor(e){this.variableNames=["source"],this.outputShape=e,this.rank=e.length;const n=On(this.rank);this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const r=wke(this.rank);let s;const o=e.map((i,a)=>`sourceLoc.${PI[a]} = start[${a}] + coords.${PI[a]};`);s=`
        ${n} sourceLoc;
        ${n} coords = getOutputCoords();
        ${o.join(`
`)}
      `,this.userCode=`
      void main() {
        ${s}
        setOutput(getSource(${r}));
      }
    `}}const PI=["x","y","z","w","u","v"];function wke(t){if(t===1)return"sourceLoc";if(t<=6)return PI.slice(0,t).map(e=>"sourceLoc."+e).join(",");throw Error(`Slicing for rank ${t} is not yet supported`)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class vke{constructor(e){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const n=On(this.rank),r=ro("coords",this.rank),s=ro("sourceLoc",this.rank),o=this.rank===1?"sourceLoc":`vec2(${s.slice(-2).join()})`,i=`getChannel(getSource(${s.join()}), ${o})`,a=`
      result.x = ${i};
      if (++${r[this.rank-1]} < ${e[this.rank-1]}) {
        ++${s[this.rank-1]};
        result.y = ${i};
        --${s[this.rank-1]};
      }
    `,l=this.rank===1?"":`
      --${r[this.rank-1]};
      if (++${r[this.rank-2]} < ${e[this.rank-2]}) {
        ++${s[this.rank-2]};
        result.z = ${i};
        if (++${r[this.rank-1]} < ${e[this.rank-1]}) {
          ++${s[this.rank-1]};
          result.w = ${i};
        }
      }
    `,c=this.rank<=4?`sourceLoc = coords +
            ${n}(${e.map((d,f)=>`start[${f}]`).join()});`:e.map((d,f)=>`${s[f]} = ${r[f]} + start[${f}];`).join(`
`);this.userCode=`
      void main() {
        ${n} coords = getOutputCoords();
        ${n} sourceLoc;
        ${c}
        vec4 result = vec4(0.);
        ${a}
        ${l}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cke(t,e,n,r){const s=r.texData.get(t.dataId),o=r.makeTensorInfo(n,t.dtype),i=r.texData.get(o.dataId);Object.assign(i,s),i.refCount=1,i.shape=n,i.dtype=t.dtype;let a=H3(e,Et(t.shape));s.slice&&(a+=s.slice.flatOffset),i.slice={flatOffset:a,origDataId:s.slice&&s.slice.origDataId||t.dataId};const l=r.dataRefCount.get(i.slice.origDataId)||1;return r.dataRefCount.set(i.slice.origDataId,l+1),o}function Up(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{begin:o,size:i}=r,[a,l]=k2(s,o,i);if(V3(s,a,l),Te(l)===0)return n.makeTensorInfo(l,s.dtype,[]);if(n.shouldExecuteOnCPU([s])||s.dtype==="string"){const f=n.texData.get(s.dataId),p=pEe(f.values,a,l,s.shape,s.dtype);return n.makeTensorInfo(l,s.dtype,p)}const{isPacked:c}=n.texData.get(s.dataId),d=U3(s.shape,a,l);if(c||!d){const f=Ee().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new vke(l):new bke(l),p=[a];return n.runWebGLProgram(f,[s],s.dtype,p)}return n.uploadToGPU(s.dataId),Cke(s,a,l,n)}const Ske={kernelName:Kv,backendName:"webgl",kernelFunc:Up};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Nke=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{blockShape:o,crops:i}=r;Y(s.shape.length<=4,()=>"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet");const a=o.reduce((N,k)=>N*k),l=$1(s.shape,o,a),c=O1(l.length,o.length),d=_1(s.shape,o,a),f=Y3(i,o.length),p=Z3(d,i,o.length),g=[],x=tt({inputs:{x:s},backend:n,attrs:{shape:l}}),b=lo({inputs:{x},backend:n,attrs:{perm:c}}),w=tt({inputs:{x:b},backend:n,attrs:{shape:d}}),C=Up({inputs:{x:w},backend:n,attrs:{begin:f,size:p}});return g.push(x),g.push(b),g.push(w),g.forEach(N=>n.disposeIntermediateTensorInfo(N)),C},Eke={kernelName:lv,backendName:"webgl",kernelFunc:Nke};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ike(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,weights:o}=e,{size:i}=r,a=n.readSync(s.dataId),l=n.readSync(o.dataId),c=L9(a,l,o.dtype,o.shape,i);return n.makeTensorInfo([i],o.dtype,c)}const kke={kernelName:WT,backendName:"webgl",kernelFunc:Ike};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Tke=`
  int r = int(a.r) & int(b.r);
  int g = int(a.g) & int(b.g);
  int rb = int(a.b) & int(b.b);
  int ra = int(a.a) & int(b.a);
  return vec4(r, g, rb, ra);
`,Ake=`
  return float(int(a.r) & int(b.r));
`;function Rke(t){const{inputs:e,backend:n}=t,{a:r,b:s}=e,o=Ee().getBool("WEBGL_PACK_BINARY_OPERATIONS"),i=Ee().getNumber("WEBGL_VERSION");if(n.shouldExecuteOnCPU([r,s])||i===1){const l=n.texData.get(r.dataId).values,c=n.texData.get(s.dataId).values,[d,f]=LNe(r.shape,s.shape,l,c,r.dtype),p=n.makeTensorInfo(f,r.dtype),g=n.texData.get(p.dataId);return g.values=d,p}let a;return o?a=new Vp(Tke,r.shape,s.shape,!1):a=new Qd(Ake,r.shape,s.shape),n.runWebGLProgram(a,[r,s],r.dtype)}const Dke={kernelName:cv,backendName:"webgl",kernelFunc:Rke};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $ke(t){const{inputs:e,backend:n}=t,{s0:r,s1:s}=e,o=n.readSync(r.dataId),i=n.readSync(s.dataId),a=jt(Array.from(o),Array.from(i));return n.makeTensorInfo([a.length],"int32",Int32Array.from(a))}const Oke={kernelName:UT,backendName:"webgl",kernelFunc:$ke};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _ke="return float(a != b);",Q9=Ts({opSnippet:_ke,cpuKernelImpl:oEe,dtype:"bool"}),Pke={kernelName:Mv,backendName:"webgl",kernelFunc:Q9};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function q1(t){const{inputs:e,backend:n}=t,{input:r}=e,s=n.texData.get(r.dataId);return Jo({inputs:{x:s.complexTensorInfos.real},backend:n})}const Fke={kernelName:SA,backendName:"webgl",kernelFunc:q1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Mke="return float(int(x));";function Lke(t,e){const n=new hl(t.shape,Mke),r=e.runWebGLProgram(n,[t],"int32");return{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FI(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{dtype:o}=r;if(o==="complex64"){if(s.dtype==="complex64")return Jo({inputs:{x:s},backend:n});const i=qr(s.shape),a=FI({inputs:{x:s},backend:n,attrs:{dtype:"float32"}}),l=Bu({inputs:{real:a,imag:i},backend:n});return i.dispose(),n.disposeIntermediateTensorInfo(a),l}if(s.dtype==="complex64"){const i=q1({inputs:{input:s},backend:n}),a=FI({inputs:{x:i},backend:n,attrs:{dtype:o}});return n.disposeIntermediateTensorInfo(i),a}if(!lB(s.dtype,o)){const i=Jo({inputs:{x:s},backend:n});return{dataId:i.dataId,shape:i.shape,dtype:o}}if(n.shouldExecuteOnCPU([s])){const i=n.texData.get(s.dataId).values,[a,l,c]=BNe(i,s.shape,s.dtype,o);return n.makeTensorInfo(a,l,c)}if(o==="int32")return Lke(s,n);if(o==="bool"){const i=n.makeTensorInfo([],"bool",Ss("bool",1)),l=Q9({inputs:{a:s,b:i},backend:n});return n.disposeIntermediateTensorInfo(i),l}throw new Error(`Error in Cast: failed to cast ${s.dtype} to ${o}`)}const Bke={kernelName:F0,backendName:"webgl",kernelFunc:FI};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tP="return ceil(x);",jke=fn({opSnippet:tP,packedOpSnippet:tP,cpuKernelImpl:jNe}),zke={kernelName:M0,backendName:"webgl",kernelFunc:jke};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Vke{constructor(e){this.variableNames=["A"],this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode=`

      void main() {
        float value = getAAtOutCoords();
        if (isnan(value)) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, minVal, maxVal));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Wke{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode=`
      void main() {
        vec4 value = getAAtOutCoords();

        if (any(isnan(value))) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Uke(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{clipValueMin:o,clipValueMax:i}=r;let a;Ee().getBool("WEBGL_PACK_CLIP")?a=new Wke(s.shape):a=new Vke(s.shape);const l=[[o],[i]];return n.runWebGLProgram(a,[s],s.dtype,l)}const Hke={kernelName:L0,backendName:"webgl",kernelFunc:Uke};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Gke{constructor(e){this.variableNames=["real","imag"],this.outputShape=e,this.userCode=`
      void main() {
        float re = abs(getRealAtOutCoords());
        float im = abs(getImagAtOutCoords());
        float mx = max(re, im);

        // sadly the length function in glsl is not underflow-safe
        // (at least not on Intel GPUs). So the safe solution is
        // to ensure underflow-safety in all cases.
        setOutput(
          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))
        );
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nP(t,e){return{dataId:e.dataId,dtype:e.dtype,shape:t.shape}}function qke(t){const{inputs:e,backend:n}=t,{x:r}=e,s=n.texData.get(r.dataId),o=new Gke(r.shape),i=[nP(r,s.complexTensorInfos.real),nP(r,s.complexTensorInfos.imag)];return n.runWebGLProgram(o,i,i[0].dtype)}const Xke={kernelName:uv,backendName:"webgl",kernelFunc:qke};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Kke{constructor(e){this.outputShape=[],this.outputShape=xl(e,1),this.variableNames=e.map((i,a)=>`T${a}`);const n=new Array(e.length-1);n[0]=e[0][1];for(let i=1;i<n.length;i++)n[i]=n[i-1]+e[i][1];const r=[`if (yC < ${n[0]}) setOutput(getT0(yR, yC));`];for(let i=1;i<n.length;i++){const a=n[i-1];r.push(`else if (yC < ${n[i]}) setOutput(getT${i}(yR, yC-${a}));`)}const s=n.length,o=n[n.length-1];r.push(`else setOutput(getT${s}(yR, yC-${o}));`),this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int yR = coords.x;
        int yC = coords.y;

        ${r.join(`
        `)}
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Yke{constructor(e,n){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=xl(e,n);const r=this.outputShape,s=r.length,o=On(s),i=ro("coords",s),a=["x","y","z","w","u","v"].slice(0,s);this.variableNames=e.map((b,w)=>`T${w}`);const l=new Array(e.length-1);l[0]=e[0][n];for(let b=1;b<l.length;b++)l[b]=l[b-1]+e[b][n];const c=a[n],d=a.slice(-2),f=a.join();let p=`if (${c} < ${l[0]}) {
        return getChannel(
            getT0(${f}), vec2(${d.join()}));
        }`;for(let b=1;b<l.length;b++){const w=l[b-1];p+=`
        if (${c} < ${l[b]}  && ${c} >= ${l[b-1]}) {
          return getChannel(
            getT${b}(${ry(a,c,w)}),
            vec2(${ry(d,c,w)}));
        }`}const g=l.length,x=l[l.length-1];p+=`
        return getChannel(
          getT${g}(${ry(a,c,x)}),
          vec2(${ry(d,c,x)}));`,this.userCode=`
      float getValue(${a.map(b=>"int "+b)}) {
        ${p}
      }

      void main() {
        ${o} coords = getOutputCoords();
        vec4 result = vec4(getValue(${i}), 0., 0., 0.);

        ${i[s-1]} = ${i[s-1]} + 1;
        if (${i[s-1]} < ${r[s-1]}) {
          result.g = getValue(${i});
        }

        ${i[s-2]} = ${i[s-2]} + 1;
        if (${i[s-2]} < ${r[s-2]}) {
          result.a = getValue(${i});
        }

        ${i[s-1]} = ${i[s-1]} - 1;
        if (${i[s-2]} < ${r[s-2]} &&
            ${i[s-1]} < ${r[s-1]}) {
          result.b = getValue(${i});
        }
        setOutput(result);
      }
    `}}function ry(t,e,n){const r=t.indexOf(e);return t.map((o,i)=>i===r?`${o} - ${n}`:o).join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function q2(t){const{inputs:e,backend:n}=t,{input:r}=e,s=n.texData.get(r.dataId);return Jo({inputs:{x:s.complexTensorInfos.imag},backend:n})}const Zke={kernelName:cA,backendName:"webgl",kernelFunc:q2};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Km(t,e,n){const r=t[0].dtype;if(r==="complex64"){const g=t.map(N=>q1({inputs:{input:N},backend:n})),x=t.map(N=>q2({inputs:{input:N},backend:n})),b=Km(g,e,n),w=Km(x,e,n),C=Bu({inputs:{real:b,imag:w},backend:n});return g.forEach(N=>n.disposeIntermediateTensorInfo(N)),x.forEach(N=>n.disposeIntermediateTensorInfo(N)),n.disposeIntermediateTensorInfo(b),n.disposeIntermediateTensorInfo(w),C}let s=n.shouldExecuteOnCPU(t);if(r==="string"&&(s=!0),s){const g=t.map(I=>{const $=[-1,Te(I.shape.slice(e))];return tt({inputs:{x:I},backend:n,attrs:{shape:$}})}),x=g.map(I=>({vals:n.readSync(I.dataId),shape:I.shape})),b=xl(g.map(I=>I.shape),1),w=g[0].shape[0]===1,C=zNe(x,b,r,w),N=xl(t.map(I=>I.shape),e),k=n.makeTensorInfo(N,r,C);return g.forEach(I=>n.disposeIntermediateTensorInfo(I)),k}const o=t.filter(g=>Te(g.shape)>0),i=Ee().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&o[0].shape.length>1;if(o.length===1){const g=i?new hl(t[0].shape,_c):new Gc(t[0].shape,_c);return n.runWebGLProgram(g,t,r)}const a=Ee().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER");if(o.length>a){const g=[];for(let b=0;b<o.length;b+=a){const w=o.slice(b,b+a);g.push(Km(w,e,n))}const x=Km(g,e,n);for(const b of g)n.disposeIntermediateTensorInfo(b);return x}if(i){const g=new Yke(o.map(x=>x.shape),e);return n.runWebGLProgram(g,o,r)}const{tensors2D:l,outShape:c}=Qke(o,e,n),d=new Kke(l.map(g=>g.shape)),f=n.runWebGLProgram(d,l,r);l.forEach(g=>n.disposeIntermediateTensorInfo(g));const p=tt({inputs:{x:f},attrs:{shape:c},backend:n});return n.disposeIntermediateTensorInfo(f),p}function Qke(t,e,n){const r=xl(t.map(o=>o.shape),e);return{tensors2D:t.map(o=>tt({inputs:{x:o},attrs:{shape:[-1,Te(o.shape.slice(e))]},backend:n})),outShape:r}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function J9(t){const{inputs:e,backend:n,attrs:r}=t,{axis:s}=r,o=Zt(s,e[0].shape)[0],i=e.map(c=>c.shape);q3(i,o);const a=xl(e.map(c=>c.shape),o);if(Te(a)===0)return n.makeTensorInfo(a,e[0].dtype,[]);const l=e.filter(c=>Te(c.shape)>0);return l.length===1?Jo({inputs:{x:l[0]},backend:n}):Km(l,o,n)}const Jke={kernelName:dv,backendName:"webgl",kernelFunc:J9};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class eW{constructor(e,n=!1,r=null,s=!1,o=!1){this.variableNames=["x","W"],this.outputShape=e.outShape;const i=e.padInfo.top,a=e.padInfo.left,l=e.strideHeight,c=e.strideWidth,d=e.dilationHeight,f=e.dilationWidth,p=e.filterHeight,g=e.filterWidth,x=Math.floor(e.inChannels/4)*4,b=e.inChannels%4,w=e.dataFormat==="channelsLast",C=w?1:2,N=w?2:3,k=w?3:1;let I="",R="";r&&(s?I=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:o?I=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:I=`
          float activation(float x) {
            ${r}
          }
        `,R="result = activation(result);");const $=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),s&&this.variableNames.push("preluActivationWeights"),o&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${I}

      const ivec2 strides = ivec2(${l}, ${c});
      const ivec2 pads = ivec2(${i}, ${a});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d2 = coords[${k}];

        ivec2 xRCCorner =
            ivec2(coords[${C}], coords[${N}]) * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${p}; wR++) {
          int xR = xRCorner + wR * ${d};

          if (xR < 0 || xR >= ${e.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${g}; wC++) {
            int xC = xCCorner + wC * ${f};

            if (xC < 0 || xC >= ${e.inWidth}) {
              continue;
            }

            for (int d1 = 0; d1 < ${x}; d1 += 4) {
              vec4 wValues = vec4(
                getW(wR, wC, d1, d2),
                getW(wR, wC, d1 + 1, d2),
                getW(wR, wC, d1 + 2, d2),
                getW(wR, wC, d1 + 3, d2)
              );

              if (${w}) {
                vec4 xValues = vec4(
                  getX(batch, xR, xC, d1),
                  getX(batch, xR, xC, d1 + 1),
                  getX(batch, xR, xC, d1 + 2),
                  getX(batch, xR, xC, d1 + 3)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec4 xValues = vec4(
                  getX(batch, d1, xR, xC),
                  getX(batch, d1 + 1, xR, xC),
                  getX(batch, d1 + 2, xR, xC),
                  getX(batch, d1 + 3, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }
            }

            if (${b===1}) {

              if (${w}) {
                dotProd +=
                    getX(batch, xR, xC, ${x}) *
                    getW(wR, wC, ${x}, d2);
              } else {
                dotProd +=
                    getX(batch, ${x}, xR, xC) *
                    getW(wR, wC, ${x}, d2);
              }

            } else if (${b===2}) {
              vec2 wValues = vec2(
                getW(wR, wC, ${x}, d2),
                getW(wR, wC, ${x} + 1, d2)
              );

              if (${w}) {
                vec2 xValues = vec2(
                  getX(batch, xR, xC, ${x}),
                  getX(batch, xR, xC, ${x} + 1)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec2 xValues = vec2(
                  getX(batch, ${x}, xR, xC),
                  getX(batch, ${x} + 1, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            } else if (${b===3}) {
              vec3 wValues = vec3(
                getW(wR, wC, ${x}, d2),
                getW(wR, wC, ${x} + 1, d2),
                getW(wR, wC, ${x} + 2, d2)
              );

              if (${w}) {
                vec3 xValues = vec3(
                  getX(batch, xR, xC, ${x}),
                  getX(batch, xR, xC, ${x} + 1),
                  getX(batch, xR, xC, ${x} + 2)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec3 xValues = vec3(
                  getX(batch, ${x}, xR, xC),
                  getX(batch, ${x} + 1, xR, xC),
                  getX(batch, ${x} + 2, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            }
          }
        }

        float result = dotProd;
        ${$}
        ${R}
        setOutput(result);
      }
    `}}class eTe{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;const n=e.padInfo.front,r=e.padInfo.top,s=e.padInfo.left,o=e.strideDepth,i=e.strideHeight,a=e.strideWidth,l=e.dilationDepth,c=e.dilationHeight,d=e.dilationWidth,f=e.filterDepth,p=e.filterHeight,g=e.filterWidth,x=Math.floor(e.inChannels/4)*4,b=e.inChannels%4;this.userCode=`
      const ivec3 strides = ivec3(${o}, ${i}, ${a});
      const ivec3 pads = ivec3(${n}, ${r}, ${s});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d2 = coords.u;

        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xFCorner = xFRCCorner.x;
        int xRCorner = xFRCCorner.y;
        int xCCorner = xFRCCorner.z;

        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get
        // y(yF, yR, yC, d2). ? = to be determined. : = across all
        // values in that axis.
        float dotProd = 0.0;
        for (int wF = 0; wF < ${f}; wF++) {
          int xF = xFCorner + wF * ${l};

          if (xF < 0 || xF >= ${e.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${p}; wR++) {
            int xR = xRCorner + wR * ${c};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${g}; wC++) {
              int xC = xCCorner + wC * ${d};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              for (int d1 = 0; d1 < ${x}; d1 += 4) {
                vec4 xValues = vec4(
                  getX(batch, xF, xR, xC, d1),
                  getX(batch, xF, xR, xC, d1 + 1),
                  getX(batch, xF, xR, xC, d1 + 2),
                  getX(batch, xF, xR, xC, d1 + 3)
                );
                vec4 wValues = vec4(
                  getW(wF, wR, wC, d1, d2),
                  getW(wF, wR, wC, d1 + 1, d2),
                  getW(wF, wR, wC, d1 + 2, d2),
                  getW(wF, wR, wC, d1 + 3, d2)
                );

                dotProd += dot(xValues, wValues);
              }

              if (${b===1}) {
                dotProd +=
                  getX(batch, xF, xR, xC, ${x}) *
                  getW(wF, wR, wC, ${x}, d2);
              } else if (${b===2}) {
                vec2 xValues = vec2(
                  getX(batch, xF, xR, xC, ${x}),
                  getX(batch, xF, xR, xC, ${x} + 1)
                );
                vec2 wValues = vec2(
                  getW(wF, wR, wC, ${x}, d2),
                  getW(wF, wR, wC, ${x} + 1, d2)
                );
                dotProd += dot(xValues, wValues);
              } else if (${b===3}) {
                vec3 xValues = vec3(
                  getX(batch, xF, xR, xC, ${x}),
                  getX(batch, xF, xR, xC, ${x} + 1),
                  getX(batch, xF, xR, xC, ${x} + 2)
                );
                vec3 wValues = vec3(
                  getW(wF, wR, wC, ${x}, d2),
                  getW(wF, wR, wC, ${x} + 1, d2),
                  getW(wF, wR, wC, ${x} + 2, d2)
                );
                dotProd += dot(xValues, wValues);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class tW{constructor(e,n=!1,r=null,s=!1,o=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=Gs(this.outputShape.length);const i=e.padInfo.left,a=e.strideWidth,l=e.dilationWidth,c=e.filterHeight,d=e.filterWidth,f=d;let p=`
       int xR; int xC; int xCOffset;
       vec4 wTexel; vec4 previous; vec4 final;`;for(let w=0;w<d;w++)p+=`
           vec4 xTexelC${w*2};
           int xTexelC${w*2}Ready;
           vec4 xTexelC${w*2+1};
           int xTexelC${w*2+1}Ready;
           vec4 xC${w};`;p+=`
     for (int r = 0; r < ${c}; r++) {
      for (int d1 = 0; d1 < ${e.inChannels}; d1 += 2) {
       `;for(let w=0;w<d;w++)p+=`
           xTexelC${w*2} = vec4(0.0);
           xTexelC${w*2}Ready = 0;
           xTexelC${w*2+1} = vec4(0.0);
           xTexelC${w*2+1}Ready = 0;
           xC${w} = vec4(0.0);`;p+=`
         xR = xRCorner + r * dilations[0];
         if (xR >=0 && xR < inDims[0]) {
       `;for(let w=0;w<(f+1)/2;w++){const C=w*2;if(p+=`
           xC = xCCorner + ${C*l};
           `,a===1){if(C<d&&(i%2===1?(p+=`
                 xCOffset = xC + 1;
                 if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${C}Ready == 0) {
                   xTexelC${C} = getX(batch, xR, xCOffset, d1);

                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${C}.zw = vec2(0.0);
                   }
                   xTexelC${C}Ready = 1;
                 }
               `,l===1&&C>0?p+=`
                 xC${C} = vec4(xTexelC${C-2}.zw, xTexelC${C}.xy);
                 `:p+=`
                   xCOffset = xC + 1 - 2;

                   if (xCOffset >= 0 && xCOffset < inDims[1]) {
                     previous = getX(batch, xR, xCOffset, d1);

                     // Need to manually clear unused channels in case
                     // we're reading from recycled texture.
                     if (xCOffset + 1 >= inDims[1]) {
                       previous.zw = vec2(0.0);
                     }

                     xC${C} = vec4(previous.zw, xTexelC${C}.xy);
                   } else {
                     xC${C} = vec4(0.0, 0.0, xTexelC${C}.xy);
                   }
                   `):p+=`
                 if (xC >= 0 && xC < inDims[1] && xTexelC${C}Ready == 0) {
                   xTexelC${C} = getX(batch, xR, xC, d1);
                   if (xC + 1 >= inDims[1]) {
                     xTexelC${C}.zw = vec2(0.0);
                   }
                   xTexelC${C}Ready = 1;
                 }

                 xC${C} = xTexelC${C};
                 `,C+1<d)){const N=i%2===0?FT(l):l;l%2===0&&i%2===1||l%2!==0&&i%2!==1?(p+=`
                   xCOffset = xC + imod(pads[1], 2) + ${N};

                   if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${C+1}Ready == 0) {
                     xTexelC${C+1} = getX(batch, xR, xCOffset, d1);

                     // Need to manually clear unused channels in case
                     // we're reading from recycled texture.
                     if (xCOffset + 1 >= inDims[1]) {
                       xTexelC${C+1}.zw = vec2(0.0);
                     }
                     xTexelC${C+1}Ready = 1;
                   }
                   `,l>1?p+=`
                     xCOffset -= 2;
                     if (xCOffset >= 0 && xCOffset < inDims[1]) {
                      previous = getX(batch, xR, xCOffset, d1);
                      xC${C+1} = vec4(previous.zw, xTexelC${C+1}.xy);
                     } else {
                      xC${C+1} = vec4(0.0, 0.0, xTexelC${C+1}.xy);
                     }
                     `:p+=`
                     xC${C+1} = vec4(xTexelC${C}.zw, xTexelC${C+1}.xy);
                     `):N===1?p+=`
                     xC${C+1} = xTexelC${C};
                     `:p+=`
                     xCOffset = xC + ${N};

                     if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${C+1}Ready == 0) {
                       xTexelC${C+1} = getX(batch, xR, xCOffset, d1);
                       if (xCOffset + 1 >= inDims[1]) {
                         xTexelC${C+1}.zw = vec2(0.0);
                       }
                       xTexelC${C+1}Ready = 1;
                     }

                     xC${C+1} = xTexelC${C+1};
                     `}}else C<d&&(i%2===1?(p+=`
                 xCOffset = xC + 1 - strides[1];
                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${C}Ready == 0) {
                   xTexelC${C} = getX(batch, xR, xCOffset, d1);
                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${C}.zw = vec2(0.0);
                   }
                   xTexelC${C}Ready = 1;
                 }

                 if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${C+1}Ready == 0) {
                   xTexelC${C+1} = getX(batch, xR, xC + 1, d1);
                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xC + 2 >= inDims[1]) {
                     xTexelC${C+1}.zw = vec2(0.0);
                   }
                   xTexelC${C+1}Ready = 1;
                 }

                 xC${C} = vec4(xTexelC${C}.zw, xTexelC${C+1}.zw);
               `,C+1<d&&(p+=`
                   final = vec4(0.0);
                   xCOffset = xC + 1 + strides[1];
                   if(xCOffset >= 0 && xCOffset < inDims[1]) {
                     final = getX(batch, xR, xCOffset, d1);
                   }
                   xC${C+1} = vec4(xTexelC${C+1}.xy, final.xy);
                 `)):(p+=`
                 if(xC >= 0 && xC < inDims[1] && xTexelC${C}Ready == 0) {
                   xTexelC${C} = getX(batch, xR, xC, d1);
                   if (xC + 1 >= inDims[1]) {
                     xTexelC${C}.zw = vec2(0.0);
                   }
                   xTexelC${C}Ready = 1;
                 }

                 xCOffset = xC + strides[1];
                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${C+1}Ready == 0) {
                   xTexelC${C+1} = getX(batch, xR, xCOffset, d1);
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${C+1}.zw = vec2(0.);
                   }
                   xTexelC${C+1}Ready = 1;
                 }

                 xC${C} = vec4(
                   xTexelC${C}.xy, xTexelC${C+1}.xy);
               `,C+1<d&&(p+=`
                   xC${C+1} = vec4(xTexelC${C}.zw, xTexelC${C+1}.zw);
                 `)));C<d&&(p+=`
             wTexel = getW(r, ${C}, d1, d2);
             dotProd += xC${C}.xxzz * vec4(wTexel.xy, wTexel.xy);
             if(d1 + 1 < ${e.inChannels}) {
               dotProd += xC${C}.yyww * vec4(wTexel.zw, wTexel.zw);
             }
           `,C+1<d&&(p+=`
               wTexel = getW(r, ${C+1}, d1, d2);
               dotProd += xC${C+1}.xxzz * vec4(wTexel.xy, wTexel.xy);
               if(d1 + 1 < ${e.inChannels}) {
                 dotProd += xC${C+1}.yyww * vec4(wTexel.zw, wTexel.zw);
               }
             `))}p+=`
     }
   `,p+=`
     }
   `,p+=`
     }
   `;let g="",x="";r&&(s?g=`vec4 activation(vec4 a) {
           vec4 b = getPreluActivationWeightsAtOutCoords();
           ${r}
         }`:o?g=`vec4 activation(vec4 a) {
           vec4 b = getLeakyreluAlphaAtOutCoords();
           ${r}
         }`:g=`vec4 activation(vec4 x) {
           ${r}
         }`,x="result = activation(result);");const b=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),s&&this.variableNames.push("preluActivationWeights"),o&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
       ${g}

       void main() {
         ivec4 coords = getOutputCoords();
         int batch = coords.x;
         ivec2 xRCCorner = coords.yz * strides - pads;
         int d2 = coords.w;
         int xRCorner = xRCCorner.x;
         int xCCorner = xRCCorner.y;

         //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.
         vec4 dotProd = vec4(0.000000000000001);

         ${p}

         vec4 result = dotProd - vec4(0.000000000000001);
         ${b}
         ${x}
         setOutput(result);
       }
     `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class tTe{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec4"},{name:"pad",type:"ivec2"},{name:"stride",type:"ivec2"},{name:"dilation",type:"ivec2"},{name:"inChannels",type:"int"},{name:"itemsPerBlockRow",type:"int"},{name:"outWidth",type:"int"}],this.outputShape=e,this.enableShapeUniforms=Gs(this.outputShape.length);const{dataFormat:r}=n,s=uo(),o=r==="channelsLast",i=o?1:2,a=o?2:3,l=this.enableShapeUniforms?"if(blockIndex < outShape[2] && pos < outShape[1]) {":`if(blockIndex < ${e[2]} && pos < ${e[1]}) {`;let c="";for(let d=0;d<=1;d++)for(let f=0;f<=1;f++)c+=`
          blockIndex = rc.z + ${f};
          pos = rc.y + ${d};

          ${l}
            offsetY = int(blockIndex / outWidth) * stride[0] - pad[0];
            d0 = offsetY + dilation[0] * (pos / itemsPerBlockRow);

            if(d0 < inputShape[${i}] && d0 >= 0) {
              // Use custom imod instead mod. On Intel GPU, mod may generate
              // unexpected value.
              // https://github.com/tensorflow/tfjs/issues/5447
              offsetX = imod(blockIndex, outWidth) * stride[1] - pad[1];
              d1 = offsetX + dilation[1] * (imod(pos, itemsPerBlockRow) /
                  inChannels);

              if(d1 < inputShape[${a}] && d1 >= 0) {

                ch = imod(pos, inChannels);

                if (${o}) {
                  innerDims = vec2(d1, ch);
                  result[${d*2+f}] = getChannel(
                    getA(rc.x, d0, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                } else {
                  innerDims = vec2(d0, d1);
                  result[${d*2+f}] = getChannel(
                    getA(rc.x, ch, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                }
              }
            }
          }
        `;this.userCode=`
      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0);

        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
        vec2 innerDims;

        ${c}

        ${s.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rw(t,e){const n=t.length;return n>=3?e?[...t.slice(0,-3),t[n-3]*t[n-2],t[n-1]]:[...t.slice(0,-3),t[n-3],t[n-2]*t[n-1]]:!e&&n===1&&t[0]>1?[t[0],1]:null}function nW({x:t,filter:e,convInfo:n,backend:r,bias:s=null,preluActivationWeights:o=null,leakyreluAlpha:i=0,activation:a=null}){const l=t.shape,c=r.texData.get(t.dataId),d=n.inChannels,f=l[0]*l[1]*l[2],p=n.outChannels,g=n.dataFormat==="channelsLast",x=!1,b=!1;let w;const C=[];if(o!=null){const I=rw(o.shape,g);I!=null&&(o=tt({inputs:{x:o},backend:r,attrs:{shape:I}}),C.push(o))}if(s!=null){const I=rw(s.shape,g);I!=null&&(s=tt({inputs:{x:s},backend:r,attrs:{shape:I}}),C.push(s))}if(!((f===1||p===1)&&d>X9)&&c.isPacked&&g&&c.texture!=null&&l[2]%2!==0&&nn(c.shape.slice(-3),l.slice(-3))){const I=l[0]*l[1]*(l[2]+1),R={dataId:t.dataId,shape:[1,I,n.inChannels],dtype:t.dtype},$=c.shape;c.shape=c.shape.slice(),c.shape[c.shape.length-2]++,Y(tw(c.shape,R.shape),()=>`packed reshape ${c.shape} to ${R.shape} isn't free`);const O=tt({inputs:{x:e},backend:r,attrs:{shape:[1,n.inChannels,n.outChannels]}});C.push(O);const F=nw({a:R,b:O,backend:r,transposeA:x,transposeB:b,bias:s,activation:a,preluActivationWeights:o,leakyreluAlpha:i}),M=r.texData.get(F.dataId);Y(M.isPacked,()=>"batchMatMul result is expected to be packed"),c.shape=$,M.shape=n.outShape,w=Jo({inputs:{x:F},backend:r}),w.shape=n.outShape,C.push(F)}else{const I=n.outHeight*n.outWidth,R=tt({inputs:{x:t},backend:r,attrs:{shape:g?[n.batchSize,I,n.inChannels]:[n.batchSize,n.inChannels,I]}}),$=tt({inputs:{x:e},backend:r,attrs:{shape:[1,n.inChannels,n.outChannels]}}),O=nw({a:g?R:$,b:g?$:R,transposeA:!g,transposeB:b,backend:r,bias:s,activation:a,preluActivationWeights:o,leakyreluAlpha:i});w=tt({inputs:{x:O},backend:r,attrs:{shape:n.outShape}}),C.push(R),C.push($),C.push(O)}for(const I of C)r.disposeIntermediateTensorInfo(I);return w}function rW({x:t,filter:e,convInfo:n,backend:r,bias:s=null,preluActivationWeights:o=null,leakyreluAlpha:i=0,activation:a=null}){const{filterWidth:l,filterHeight:c,inChannels:d,outWidth:f,outHeight:p,dataFormat:g}=n,x=g==="channelsLast",b=l*c*d,w=p*f,C=[n.batchSize,b,w],N=!0,k=!1,I=[];if(o!=null){const J=rw(o.shape,x);J!=null&&(o=tt({inputs:{x:o},backend:r,attrs:{shape:J}}),I.push(o))}if(s!=null){const J=rw(s.shape,x);J!=null&&(s=tt({inputs:{x:s},backend:r,attrs:{shape:J}}),I.push(s))}const R=tt({inputs:{x:e},backend:r,attrs:{shape:[1,b,Te(e.shape)/b]}});I.push(R);const $=new tTe(C,n),O=[t.shape,[n.padInfo.top,n.padInfo.left],[n.strideHeight,n.strideWidth],[n.dilationHeight,n.dilationWidth],[n.inChannels],[n.filterWidth*n.inChannels],[n.outWidth]],F=r.runWebGLProgram($,[t],"float32",O),M=tt({inputs:{x:F},backend:r,attrs:{shape:C}});I.push(F),I.push(M);const _=s!=null,V=o!=null,B=a==="leakyrelu",W=a?r0(a,!0):null,q=new q9(x?M.shape:R.shape,x?R.shape:M.shape,x?[n.batchSize,w,n.outChannels]:[n.batchSize,n.outChannels,w],N,k,_,W,V,B),j=x?[M,R]:[R,M];if(s&&j.push(s),V&&j.push(o),B){const J=r.makeTensorInfo([],"float32",Au(i,"float32"));j.push(J),I.push(J)}const G=r.runWebGLProgram(q,j,"float32"),Z=tt({inputs:{x:G},backend:r,attrs:{shape:n.outShape}});I.push(G);for(const J of I)r.disposeIntermediateTensorInfo(J);return Z}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nTe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:o}=e,{strides:i,pad:a,dataFormat:l,dilations:c,dimRoundingMode:d}=r,f=mc(l),p=ps(s.shape,o.shape,i,c,a,d,!1,f);let g;if(p.filterHeight===1&&p.filterWidth===1&&p.dilationHeight===1&&p.dilationWidth===1&&p.strideHeight===1&&p.strideWidth===1&&(p.padInfo.type==="SAME"||p.padInfo.type==="VALID"))g=nW({x:s,filter:o,convInfo:p,backend:n});else if(p.strideWidth<=2&&f==="channelsLast"&&Ee().getBool("WEBGL_EXP_CONV")){const b=new tW(p),w=[[p.padInfo.top,p.padInfo.left],[p.strideHeight,p.strideWidth],[p.dilationHeight,p.dilationWidth],[p.inHeight,p.inWidth]];g=n.runWebGLProgram(b,[s,o],"float32",w)}else if(Ee().getBool("WEBGL_CONV_IM2COL"))g=rW({x:s,filter:o,convInfo:p,backend:n});else{const b=new eW(p);g=n.runWebGLProgram(b,[s,o],"float32")}const x=tt({inputs:{x:g},backend:n,attrs:{shape:p.outShape}});return n.disposeIntermediateTensorInfo(g),x}const rTe={kernelName:fv,backendName:"webgl",kernelFunc:nTe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class sTe{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const n=e.strideHeight,r=e.strideWidth,s=e.padInfo.top,o=e.padInfo.left,i=e.dataFormat==="channelsLast";this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int d2 = coords.w;

        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yR = 0; yR < ${e.outHeight}; yR++) {
            int xR = wR + yR * ${n} - ${s};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${e.outWidth}; yC++) {
              int xC = wC + yC * ${r} - ${o};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              ${i?`float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);`:`float dyValue = getDy(b, d2, yR, yC);
              float xValue = getX(b, d1, xR, xC);
              dotProd += (xValue * dyValue);`}
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class oTe{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const n=e.filterHeight,r=e.filterWidth,s=e.strideHeight,o=e.strideWidth,i=e.dataFormat==="channelsLast",a=n-1-e.padInfo.top,l=r-1-e.padInfo.left,c=i?1:2,d=i?2:3,f=i?3:1;this.userCode=`
      const ivec2 pads = ivec2(${a}, ${l});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[${f}];

        ivec2 dyCorner = ivec2(coords[${c}], coords[${d}]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / ${s}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            float dyC = float(dyCCorner + wC) / ${o}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${r} - 1 - wC;

            for (int d2 = 0; d2 < ${e.outChannels}; d2++) {

              if (${i}) {
                float xValue = getDy(batch, idyR, idyC, d2);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              } else {
                float xValue = getDy(batch, d2, idyR, idyC);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `}}class iTe{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const n=e.strideDepth,r=e.strideHeight,s=e.strideWidth,o=e.padInfo.front,i=e.padInfo.top,a=e.padInfo.left;this.userCode=`
      void main() {
        ivec5 coords = getOutputCoords();
        int wF = coords.x;
        int wR = coords.y;
        int wC = coords.z;
        int d1 = coords.w;
        int d2 = coords.u;

        float dotProd = 0.0;

        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yF = 0; yF < ${e.outDepth}; yF++) {
            int xF = wF + yF * ${n} - ${o};

            if (xF < 0 || xF >= ${e.inDepth}) {
              continue;
            }

            for (int yR = 0; yR < ${e.outHeight}; yR++) {
              int xR = wR + yR * ${r} - ${i};

              if (xR < 0 || xR >= ${e.inHeight}) {
                continue;
              }

              for (int yC = 0; yC < ${e.outWidth}; yC++) {
                int xC = wC + yC * ${s} - ${a};

                if (xC < 0 || xC >= ${e.inWidth}) {
                  continue;
                }

                float dyValue = getDy(b, yF, yR, yC, d2);
                float xValue = getX(b, xF, xR, xC, d1);
                dotProd += (xValue * dyValue);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class aTe{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const n=e.filterDepth,r=e.filterHeight,s=e.filterWidth,o=e.strideDepth,i=e.strideHeight,a=e.strideWidth,l=n-1-e.padInfo.front,c=r-1-e.padInfo.top,d=s-1-e.padInfo.left;this.userCode=`
      const ivec3 pads = ivec3(${l}, ${c}, ${d});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.u;


        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyFCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        float dotProd = 0.0;
        for (int wF = 0; wF < ${n}; wF++) {
          float dyF = float(dyFCorner + wF) / ${o}.0;

          if (dyF < 0.0 || dyF >= ${e.outDepth}.0 || fract(dyF) > 0.0) {
            continue;
          }
          int idyF = int(dyF);

          int wFPerm = ${n} - 1 - wF;

          for (int wR = 0; wR < ${r}; wR++) {
            float dyR = float(dyRCorner + wR) / ${i}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
              fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            int wRPerm = ${r} - 1 - wR;

            for (int wC = 0; wC < ${s}; wC++) {
              float dyC = float(dyCCorner + wC) / ${a}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              int wCPerm = ${s} - 1 - wC;

              for (int d2 = 0; d2 < ${e.outChannels}; d2++) {
                float xValue = getDy(batch, idyF, idyR, idyC, d2);
                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lTe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,dy:o}=e,{strides:i,pad:a,dataFormat:l,dimRoundingMode:c,filterShape:d}=r,f=mc(l),p=ps(s.shape,d,i,1,a,c,!1,f),g=new sTe(p);return n.runWebGLProgram(g,[s,o],"float32")}const cTe={kernelName:GT,backendName:"webgl",kernelFunc:lTe};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class uTe{constructor(e){this.variableNames=["dy","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"strides",type:"vec2"}],this.outputShape=e.inShape,this.enableShapeUniforms=Gs(this.outputShape.length);const n=e.filterHeight,r=e.filterWidth,s=n-1-e.padInfo.top,o=r-1-e.padInfo.left;this.userCode=`
      const ivec2 pads = ivec2(${s}, ${o});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];

        ivec2 dyCorner = ivec2(coords[1], coords[2]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        vec4 result = vec4(0.);
        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / strides[0];
          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);
          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            int wCPerm = ${r} - 1 - wC;

            float dyC = float(dyCCorner + wC) / strides[1];
            bool idyCVal = (dyC >= 0.0) && (dyC < ${e.outWidth}.0)
              && (fract(dyC) == 0.0);
            int idyC = int(dyC);

            float dyC2 = float(dyCCorner + wC + 1) / strides[1];
            bool idyCVal2 = (dyC2 >= 0.0) && (dyC2 < ${e.outWidth}.0)
              && (fract(dyC2) == 0.0);
            int idyC2 = int(dyC2);

            if (idyCVal && idyCVal2) {
              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC, d2);
                vec4 dySample2 = (idyC / 2 == idyC2 / 2) ?
                  dySample : getDy(batch, idyR, idyC2, d2);

                vec2 dyValue = mod(float(idyC), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.xy += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));

                dyValue = mod(float(idyC2), 2.) == 0. ?
                  dySample2.xy : dySample2.zw;
                result.zw += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            } else if (idyCVal) {
              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC, d2);
                vec2 dyValue = mod(float(idyC), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.xy += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            } else if (idyCVal2) {
              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC2, d2);
                vec2 dyValue = mod(float(idyC2), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.zw += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            }
          }
        }
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dTe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,filter:o}=e,{inputShape:i,strides:a,pad:l,dataFormat:c,dimRoundingMode:d}=r,f=mc(c),p=ps(i,o.shape,a,1,l,d,!1,f);if(Ee().getBool("WEBGL_PACK_CONV2DTRANSPOSE")&&f==="channelsLast"){const g=[[p.strideHeight,p.strideWidth]],x=new uTe(p);return n.runWebGLProgram(x,[s,o],"float32",g)}else{const g=new oTe(p);return n.runWebGLProgram(g,[s,o],"float32")}}const fTe={kernelName:hv,backendName:"webgl",kernelFunc:dTe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hTe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:o}=e,{strides:i,pad:a,dilations:l}=r,c=$u(s.shape,o.shape,i,l,a),d=new eTe(c);return n.runWebGLProgram(d,[s,o],"float32")}const pTe={kernelName:pv,backendName:"webgl",kernelFunc:hTe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mTe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,dy:o}=e,{strides:i,pad:a,filterShape:l}=r,c=$u(s.shape,l,i,1,a),d=new iTe(c);return n.runWebGLProgram(d,[s,o],"float32")}const gTe={kernelName:qT,backendName:"webgl",kernelFunc:mTe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xTe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,filter:o}=e,{pad:i,strides:a,inputShape:l}=r,c=$u(l,o.shape,a,1,i),d=new aTe(c);return n.runWebGLProgram(d,[s,o],"float32")}const yTe={kernelName:XT,backendName:"webgl",kernelFunc:xTe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bTe=Wp+`
  return cos(x);
`,wTe=`
  vec4 result = cos(x);
  bvec4 isNaN = isnan(x);
  ${vf}
  return result;
`,vTe=fn({opSnippet:bTe,packedOpSnippet:wTe}),CTe={kernelName:B0,backendName:"webgl",kernelFunc:vTe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const STe=`
  float e2x = exp(-x);
  return (e2x + 1.0 / e2x) / 2.0;
`,NTe=fn({opSnippet:STe}),ETe={kernelName:j0,backendName:"webgl",kernelFunc:NTe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ITe{constructor(e,n,r,s,o){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];const[i,a,l,c]=e,[d]=n,[f,p]=r;this.outputShape=[d,f,p,c];const g=s==="bilinear"?1:0,[x,b]=[`${a-1}.0`,`${l-1}.0`],[w,C,N]=f>1?[`${(a-1)/(f-1)}`,"(y2-y1) * height_ratio",`y1*${x} + float(y)*(height_scale)`]:["0.0","0.0",`0.5 * (y1+y2) * ${x}`],[k,I,R]=p>1?[`${(l-1)/(p-1)}`,"(x2-x1) * width_ratio",`x1*${b} + float(x)*(width_scale)`]:["0.0","0.0",`0.5 * (x1+x2) * ${b}`];this.userCode=`
      const float height_ratio = float(${w});
      const float width_ratio = float(${k});
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int y = coords[1];
        int x = coords[2];
        int d = coords[3];

        // get box vals
        float y1 = getBoxes(b,0);
        float x1 = getBoxes(b,1);
        float y2 = getBoxes(b,2);
        float x2 = getBoxes(b,3);

        // get image in batch index
        int bInd = round(getBoxInd(b));
        if(bInd < 0 || bInd >= ${i}) {
          return;
        }

        float height_scale = ${C};
        float width_scale = ${I};

        float in_y = ${N};
        if( in_y < 0.0 || in_y > ${x} ) {
          setOutput(float(${o}));
          return;
        }
        float in_x = ${R};
        if( in_x < 0.0 || in_x > ${b} ) {
          setOutput(float(${o}));
          return;
        }

        vec2 sourceFracIndexCR = vec2(in_x,in_y);
        if(${g} == 1) {
          // Compute the four integer indices.
          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);
          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));

          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);
          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);
          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);
          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);

          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);

          float top = topLeft + (topRight - topLeft) * fracCR.x;
          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;
          float newValue = top + (bottom - top) * fracCR.y;
          setOutput(newValue);
        } else {
          // Compute the coordinators of nearest neighbor point.
          ivec2 sourceNearestCR = ivec2(floor(
            sourceFracIndexCR + vec2(0.5,0.5)));
          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);
          setOutput(newValue);
        }
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kTe=t=>{const{inputs:e,backend:n,attrs:r}=t,{image:s,boxes:o,boxInd:i}=e,{cropSize:a,method:l,extrapolationValue:c}=r,d=new ITe(s.shape,o.shape,a,l,c);return n.runWebGLProgram(d,[s,o,i],"float32")},TTe={kernelName:YT,backendName:"webgl",kernelFunc:kTe};var o0;(function(t){t.Prod="*",t.Sum="+"})(o0||(o0={}));class rP{constructor(e,n,r,s){this.op=e,this.outputShape=n,this.variableNames=["x"],this.customUniforms=[{name:"index",type:"float"}];const o=this.outputShape.length,i=this.op===o0.Prod?"1.0":"0.0",a=r?i:`getX(${sP(o,"coords",this.op)})`,l=this.outputShape[this.outputShape.length-1];let c="",d="";r?(c=s?`end != ${l-1}`:"end != 0",d=s?"end + 1":"end - 1"):(c=s?`end + pow2 < ${l}`:"end >= pow2",d=s?"end + pow2":"end - pow2"),this.userCode=`
      void main() {
        ${On(o)} coords = getOutputCoords();
        int end = ${oP(o,"coords",this.op)};
        float val = ${a};
        int pow2 = int(pow(2.0, index));
        if (${c}) {
          int idx = ${d};
          ${oP(o,"coords",this.op)} = idx;
          val ${this.op}= getX(${sP(o,"coords",this.op)});
        }
        setOutput(val);
      }
    `}}function sP(t,e,n){if(t===1)return`${e}`;if(t===2)return`${e}.x, ${e}.y`;if(t===3)return`${e}.x, ${e}.y, ${e}.z`;if(t===4)return`${e}.x, ${e}.y, ${e}.z, ${e}.w`;throw new Error(`Cumulative ${n} for rank ${t} is not yet supported`)}function oP(t,e,n){if(t===1)return`${e}`;if(t===2)return`${e}.y`;if(t===3)return`${e}.z`;if(t===4)return`${e}.w`;throw new Error(`Cumulative ${n} for rank ${t} is not yet supported`)}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sW(t,e,n,r,s,o){const i=e.shape.length,a=fr([r],i);let l=e;a!=null&&(l=lo({inputs:{x:e},backend:n,attrs:{perm:a}}));const c=$r(1,i)[0];if(c!==i-1)throw new Error(`WebGL cumprod shader expects an inner-most axis=${e.shape.length-1} but got axis=${r}`);const d=l.shape[c];let f=Jo({inputs:{x:l},backend:n});for(let p=0;p<=Math.ceil(Math.log2(d))-1;p++){const g=new rP(t,l.shape,!1,o),x=[[p]],b=f;f=n.runWebGLProgram(g,[f],f.dtype,x),n.disposeIntermediateTensorInfo(b)}if(s){const p=new rP(t,l.shape,s,o),g=f;f=n.runWebGLProgram(p,[f],f.dtype),n.disposeIntermediateTensorInfo(g)}if(a!=null){const p=Ou(a),g=lo({inputs:{x:f},backend:n,attrs:{perm:p}});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(l),g}return f}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ATe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:o,exclusive:i,reverse:a}=r;return sW(o0.Prod,s,n,o,i,a)}const RTe={kernelName:KT,backendName:"webgl",kernelFunc:ATe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DTe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:o,exclusive:i,reverse:a}=r;return sW(o0.Sum,s,n,o,i,a)}const $Te={kernelName:mv,backendName:"webgl",kernelFunc:DTe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OTe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,weights:o}=e,{size:i,binaryOutput:a}=r;if(s.shape.length===1){const l=n.readSync(s.dataId),c=n.readSync(o.dataId),d=L9(l,c,o.dtype,o.shape,i);return n.makeTensorInfo([i],o.dtype,d)}else if(s.shape.length===2){const l=n.bufferSync(s),c=n.bufferSync(o),d=MNe(l,c,i,a);return n.makeTensorInfo(d.shape,o.dtype,d.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${s.shape.length}.`)}const _Te={kernelName:ZT,backendName:"webgl",kernelFunc:OTe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class PTe{constructor(e,n,r){this.variableNames=["x"],this.outputShape=[],this.outputShape=e,this.blockSize=n,this.dataFormat=r,this.userCode=`
    void main() {
      ivec4 coords = getOutputCoords();
      int b = coords[0];
      int h = ${this.getHeightCoordString()};
      int w = ${this.getWidthCoordString()};
      int d = ${this.getDepthCoordString()};

      int in_h = h / ${n};
      int offset_h = imod(h, ${n});
      int in_w = w / ${n};
      int offset_w = imod(w, ${n});
      int offset_d = (offset_h * ${n} + offset_w) *
        ${this.getOutputDepthSize()};
      int in_d = d + offset_d;

      float result = ${this.getInputSamplingString()};
      setOutput(result);
    }
  `}getHeightCoordString(){return this.dataFormat==="NHWC"?"coords[1]":"coords[2]"}getWidthCoordString(){return this.dataFormat==="NHWC"?"coords[2]":"coords[3]"}getDepthCoordString(){return this.dataFormat==="NHWC"?"coords[3]":"coords[1]"}getOutputDepthSize(){return this.dataFormat==="NHWC"?this.outputShape[3]:this.outputShape[1]}getInputSamplingString(){return this.dataFormat==="NHWC"?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FTe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{blockSize:o,dataFormat:i}=r,a=s.shape[0],l=i==="NHWC"?s.shape[1]:s.shape[2],c=i==="NHWC"?s.shape[2]:s.shape[3],d=i==="NHWC"?s.shape[3]:s.shape[1],f=l*o,p=c*o,g=d/(o*o),x=i==="NHWC"?[a,f,p,g]:[a,g,f,p],b=new PTe(x,o,i);return n.runWebGLProgram(b,[s],s.dtype)}const MTe={kernelName:QT,backendName:"webgl",kernelFunc:FTe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class oW{constructor(e,n=!1,r=null,s=!1,o=!1){this.variableNames=["x","W"],this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=Gs(this.outputShape.length);const i=e.filterHeight,a=e.filterWidth,l=e.outChannels/e.inChannels;let c="",d="";r&&(s?c=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:o?c=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:c=`
          float activation(float x) {
            ${r}
          }
        `,d="result = activation(result);");const f=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),s&&this.variableNames.push("preluActivationWeights"),o&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${c}

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${l};
        int q = d2 - d1 * ${l};

        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.
        for (int wR = 0; wR < ${i}; wR++) {
          int xR = xRCorner + wR * dilations[0];

          if (xR < 0 || xR >= inDims[0]) {
            continue;
          }

          for (int wC = 0; wC < ${a}; wC++) {
            int xC = xCCorner + wC * dilations[1];

            if (xC < 0 || xC >= inDims[1]) {
              continue;
            }

            float xVal = getX(batch, xR, xC, d1);
            float wVal = getW(wR, wC, d1, q);
            dotProd += xVal * wVal;
          }
        }

        float result = dotProd;
        ${f}
        ${d}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class iW{constructor(e,n=!1,r=null,s=!1,o=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=Gs(this.outputShape.length);const i=e.outChannels/e.inChannels,a=e.padInfo.left,l=e.strideWidth,c=e.dilationWidth,d=e.filterHeight,f=e.filterWidth,p=f;let g=`
      int xR; int xC; int xCOffset;
      vec4 wTexel; vec4 previous; vec4 final;`;for(let C=0;C<f;C++)g+=`
          vec4 xTexelC${C*2};
          int xTexelC${C*2}Ready;
          vec4 xTexelC${C*2+1};
          int xTexelC${C*2+1}Ready;
          vec4 xC${C};`;g+=`
    for (int r = 0; r < ${d}; r++) {
      `;for(let C=0;C<f;C++)g+=`
          xTexelC${C*2} = vec4(0.0);
          xTexelC${C*2}Ready = 0;
          xTexelC${C*2+1} = vec4(0.0);
          xTexelC${C*2+1}Ready = 0;
          xC${C} = vec4(0.0);`;g+=`
        xR = xRCorner + r * dilations[0];
        if (xR >=0 && xR < inDims[0]) {
      `;for(let C=0;C<(p+1)/2;C++){const N=C*2;if(g+=`
          xC = xCCorner + ${N*c};
          `,l===1){if(N<f&&(a%2===1?(g+=`
                xCOffset = xC + 1;
                if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${N}Ready == 0) {
                  xTexelC${N} = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${N}.zw = vec2(0.0);
                  }
                  xTexelC${N}Ready = 1;
                }
              `,c===1&&N>0?g+=`
                xC${N} = vec4(xTexelC${N-2}.zw, xTexelC${N}.xy);
                `:g+=`
                  xCOffset = xC + 1 - 2;

                  if (xCOffset >= 0 && xCOffset < inDims[1]) {
                    previous = getX(batch, xR, xCOffset, d1);

                    // Need to manually clear unused channels in case
                    // we're reading from recycled texture.
                    if (xCOffset + 1 >= inDims[1]) {
                      previous.zw = vec2(0.0);
                    }

                    xC${N} = vec4(previous.zw, xTexelC${N}.xy);
                  } else {
                    xC${N} = vec4(0.0, 0.0, xTexelC${N}.xy);
                  }
                  `):g+=`
                if (xC >= 0 && xC < inDims[1] && xTexelC${N}Ready == 0) {
                  xTexelC${N} = getX(batch, xR, xC, d1);
                  if (xC + 1 >= inDims[1]) {
                    xTexelC${N}.zw = vec2(0.0);
                  }
                  xTexelC${N}Ready = 1;
                }

                xC${N} = xTexelC${N};
                `,N+1<f)){const k=a%2===0?FT(c):c;c%2===0&&a%2===1||c%2!==0&&a%2!==1?(g+=`
                  xCOffset = xC + imod(pads[1], 2) + ${k};

                  if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${N+1}Ready == 0) {
                    xTexelC${N+1} = getX(batch, xR, xCOffset, d1);

                    // Need to manually clear unused channels in case
                    // we're reading from recycled texture.
                    if (xCOffset + 1 >= inDims[1]) {
                      xTexelC${N+1}.zw = vec2(0.0);
                    }
                    xTexelC${N+1}Ready = 1;
                  }
                  `,c>1?g+=`
                    xCOffset -= 2;
                    if (xCOffset >= 0 && xCOffset < inDims[1]) {
                     previous = getX(batch, xR, xCOffset, d1);
                     xC${N+1} = vec4(previous.zw, xTexelC${N+1}.xy);
                    } else {
                     xC${N+1} = vec4(0.0, 0.0, xTexelC${N+1}.xy);
                    }
                    `:g+=`
                    xC${N+1} = vec4(xTexelC${N}.zw, xTexelC${N+1}.xy);
                    `):k===1?g+=`
                    xC${N+1} = xTexelC${N};
                    `:g+=`
                    xCOffset = xC + ${k};

                    if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${N+1}Ready == 0) {
                      xTexelC${N+1} = getX(batch, xR, xCOffset, d1);
                      if (xCOffset + 1 >= inDims[1]) {
                        xTexelC${N+1}.zw = vec2(0.0);
                      }
                      xTexelC${N+1}Ready = 1;
                    }

                    xC${N+1} = xTexelC${N+1};
                    `}}else N<f&&(a%2===1?(g+=`
                xCOffset = xC + 1 - strides[1];
                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${N}Ready == 0) {
                  xTexelC${N} = getX(batch, xR, xCOffset, d1);
                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${N}.zw = vec2(0.0);
                  }
                  xTexelC${N}Ready = 1;
                }

                if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${N+1}Ready == 0) {
                  xTexelC${N+1} = getX(batch, xR, xC + 1, d1);
                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xC + 2 >= inDims[1]) {
                    xTexelC${N+1}.zw = vec2(0.0);
                  }
                  xTexelC${N+1}Ready = 1;
                }

                xC${N} = vec4(xTexelC${N}.zw, xTexelC${N+1}.zw);
              `,N+1<f&&(g+=`
                  final = vec4(0.0);
                  xCOffset = xC + 1 + strides[1];
                  if(xCOffset >= 0 && xCOffset < inDims[1]) {
                    final = getX(batch, xR, xCOffset, d1);
                  }
                  xC${N+1} = vec4(xTexelC${N+1}.xy, final.xy);
                `)):(g+=`
                if(xC >= 0 && xC < inDims[1] && xTexelC${N}Ready == 0) {
                  xTexelC${N} = getX(batch, xR, xC, d1);
                  if (xC + 1 >= inDims[1]) {
                    xTexelC${N}.zw = vec2(0.0);
                  }
                  xTexelC${N}Ready = 1;
                }

                xCOffset = xC + strides[1];
                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${N+1}Ready == 0) {
                  xTexelC${N+1} = getX(batch, xR, xCOffset, d1);
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${N+1}.zw = vec2(0.);
                  }
                  xTexelC${N+1}Ready = 1;
                }

                xC${N} = vec4(
                  xTexelC${N}.xy, xTexelC${N+1}.xy);
              `,N+1<f&&(g+=`
                  xC${N+1} = vec4(xTexelC${N}.zw, xTexelC${N+1}.zw);
                `)));N<f&&(g+=`
            wTexel = getW(r, ${N}, d1, q);
            dotProd += xC${N} * vec4(wTexel.xz, wTexel.xz);
          `,N+1<f&&(g+=`
              wTexel = getW(r, ${N+1}, d1, q);
              dotProd += xC${N+1} * vec4(wTexel.xz, wTexel.xz);
            `))}g+=`
    }
  `,g+=`
      }
    `;let x="",b="";r&&(s?x=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:o?x=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:x=`vec4 activation(vec4 x) {
          ${r}
        }`,b="result = activation(result);");const w=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),s&&this.variableNames.push("preluActivationWeights"),o&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${x}

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${i};
        int q = d2 - d1 * ${i};
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.
        vec4 dotProd = vec4(0.000000000000001);

        ${g}

        vec4 result = dotProd - vec4(0.000000000000001);
        ${w}
        ${b}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LTe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:o}=e,{strides:i,pad:a,dilations:l,dimRoundingMode:c}=r;let d=l;d==null&&(d=[1,1]),Y(Es(i,d),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${i} and dilations '${d}'`);const f=ps(s.shape,o.shape,i,d,a,c,!0);let p;Ee().getBool("WEBGL_PACK_DEPTHWISECONV")&&f.strideWidth<=2&&f.outChannels/f.inChannels===1?p=new iW(f):p=new oW(f);const g=[[f.padInfo.top,f.padInfo.left],[f.strideHeight,f.strideWidth],[f.dilationHeight,f.dilationWidth],[f.inHeight,f.inWidth]];return n.runWebGLProgram(p,[s,o],"float32",g)}const BTe={kernelName:gv,backendName:"webgl",kernelFunc:LTe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class jTe{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const n=e.strideHeight,r=e.strideWidth,s=e.padInfo.top,o=e.padInfo.left,i=e.outChannels/e.inChannels;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int dm = coords.w;
        int d2 = d1 * ${i} + dm;

        float dotProd = 0.0;

        // TO DO: Vec4 over the batch size
        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yR = 0; yR < ${e.outHeight}; yR++) {
            int xR = wR + yR * ${n} - ${s};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${e.outWidth}; yC++) {
              int xC = wC + yC * ${r} - ${o};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class zTe{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const n=e.filterHeight,r=e.filterWidth,s=e.strideHeight,o=e.strideWidth,i=n-1-e.padInfo.top,a=r-1-e.padInfo.left,l=e.outChannels/e.inChannels;this.userCode=`
      const ivec2 pads = ivec2(${i}, ${a});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];
        ivec2 dyCorner = coords.yz - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        float dotProd = 0.0;

        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / ${s}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            float dyC = float(dyCCorner + wC) / ${o}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${r} - 1 - wC;

            // TO DO: Vec4 over the channelMul
            for (int dm = 0; dm < ${l}; dm++) {
              int d2 = d1 * ${l} + dm;
              float xValue = getDy(batch, idyR, idyC, d2);
              float wValue = getW(wRPerm, wCPerm, d1, dm);
              dotProd += xValue * wValue;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VTe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,dy:o}=e,{strides:i,dilations:a,pad:l,dimRoundingMode:c,filterShape:d}=r,f=ps(s.shape,d,i,a,l,c,!0),p=new jTe(f);return n.runWebGLProgram(p,[s,o],"float32")}const WTe={kernelName:JT,backendName:"webgl",kernelFunc:VTe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UTe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,filter:o}=e,{strides:i,dilations:a,pad:l,dimRoundingMode:c,inputShape:d}=r,f=ps(d,o.shape,i,a,l,c,!0),p=new zTe(f);return n.runWebGLProgram(p,[s,o],"float32")}const HTe={kernelName:eA,backendName:"webgl",kernelFunc:UTe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class GTe{constructor(e){this.variableNames=["X"],this.outputShape=[e,e],this.userCode=`
      void main() {
          ivec2 coords = getOutputCoords();
          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;
          setOutput(val);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qTe(t){const{inputs:e,backend:n}=t,{x:r}=e,s=[...r.shape,...r.shape],o=Te(r.shape),i=tt({inputs:{x:r},backend:n,attrs:{shape:[o]}}),a=new GTe(o),l=n.runWebGLProgram(a,[i],i.dtype),c=tt({inputs:{x:l},backend:n,attrs:{shape:s}});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(l),c}const XTe={kernelName:tA,backendName:"webgl",kernelFunc:qTe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class KTe{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;const{inHeight:n,inWidth:r,padInfo:s,strideHeight:o,strideWidth:i,filterHeight:a,filterWidth:l,dilationHeight:c,dilationWidth:d}=e,{top:f,left:p}=s;this.userCode=`
      const ivec2 strides = ivec2(${o}, ${i});
      const ivec2 pads = ivec2(${f}, ${p});
      const float neg_infinity = -3.4e38;

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.w;
        ivec2 outTopLeftCorner =
            coords.yz * strides - pads;
        int hBeg = outTopLeftCorner.x;
        int wBeg = outTopLeftCorner.y;

        float curVal = neg_infinity;
        for (int h = 0; h < ${a}; h++) {
          int hIn = hBeg + h * ${c};

          if (hIn >= 0 && hIn < ${n}) {
            for (int w = 0; w < ${l}; w++) {
              int wIn = wBeg + w * ${d};

              if (wIn >= 0 && wIn < ${r}) {
                float xVal = getX(batch, hIn, wIn, d1);
                float wVal = getW(h, w, d1);

                float val = xVal + wVal;
                if (val > curVal) {
                  curVal = val;
                }
              }
            }
          }
        }

        float result = curVal;
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YTe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:o}=e,{strides:i,pad:a,dilations:l}=r,c=E1(s.shape,o.shape,i,a,"NHWC",l);let d;const f=new KTe(c);d=n.runWebGLProgram(f,[s,o],"float32");const p=tt({inputs:{x:d},backend:n,attrs:{shape:c.outShape}});return n.disposeIntermediateTensorInfo(d),p}const ZTe={kernelName:xv,backendName:"webgl",kernelFunc:YTe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QTe(t){const{inputs:e,backend:n,attrs:r}=t,{equation:s}=r,o=e,{allDims:i,summedDims:a,idDims:l}=oR(s,o.length);aR(i.length,l,o);const{path:c,steps:d}=lR(a,l),f=d.length;let p=null,g=i.length;const x=[];for(let b=0;b<f;++b){for(const w of d[b]){const{permutationIndices:C,expandDims:N}=iR(g,l[w]);let k;cR(C)?k=o[w]:(k=lo({inputs:{x:o[w]},backend:n,attrs:{perm:C}}),x.push(k));const I=k.shape.slice();for(let R=0;R<N.length;++R)I.splice(N[R],0,1);nn(k.shape,I)||(k=tt({inputs:{x:k},backend:n,attrs:{shape:I}}),x.push(k)),p===null?p=k:(p=lD({inputs:{a:k,b:p},backend:n}),x.push(p))}b<f-1&&(c[b]>=0&&(p=G2({inputs:{x:p},backend:n,attrs:{axis:c[b]-(i.length-g),keepDims:!1}}),x.push(p)),g--)}for(const b of x)b!==p&&n.disposeIntermediateTensorInfo(b);return p}const JTe={kernelName:nA,backendName:"webgl",kernelFunc:QTe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eAe="return (x >= 0.0) ? x : (exp(x) - 1.0);",tAe=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,nAe=fn({opSnippet:eAe,packedOpSnippet:tAe}),rAe={kernelName:V0,backendName:"webgl",kernelFunc:nAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sAe="return (b >= 0.0) ? a : a * (b + 1.0);",oAe=`
  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));
  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));
`,iAe=t=>{const{inputs:e,backend:n}=t,{dy:r,y:s}=e,o=Ee().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Vp(oAe,r.shape,s.shape):new Qd(sAe,r.shape,s.shape);return n.runWebGLProgram(o,[r,s],r.dtype)},aAe={kernelName:rA,backendName:"webgl",kernelFunc:iAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lAe=`
  return vec4(equal(a, b));
`,cAe="return float(a == b);",uAe=Ts({opSnippet:cAe,packedOpSnippet:lAe,dtype:"bool",cpuKernelImpl:VNe}),dAe={kernelName:yv,backendName:"webgl",kernelFunc:uAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fAe=`
  // Error function is calculated approximately with elementary function.
  // See "Handbook of Mathematical Functions with Formulas,
  // Graphs, and Mathematical Tables", Abramowitz and Stegun.
  float p = ${Q3};
  float a1 = ${J3};
  float a2 = ${eR};
  float a3 = ${tR};
  float a4 = ${nR};
  float a5 = ${rR};

  float sign = sign(x);
  x = abs(x);
  float t = 1.0 / (1.0 + p * x);
  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));
`,hAe=fn({opSnippet:fAe}),pAe={kernelName:W0,backendName:"webgl",kernelFunc:hAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mAe=Wp+`
  return exp(x);
`,gAe=`
  vec4 result = exp(x);
  bvec4 isNaN = isnan(x);
  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,aW=fn({opSnippet:mAe,packedOpSnippet:gAe,cpuKernelImpl:WNe,dtype:"float32"}),xAe={kernelName:U0,backendName:"webgl",kernelFunc:aW};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MI(t){const{inputs:e,attrs:n,backend:r}=t,{dim:s}=n,{input:o}=e,i=o.shape.length,a=o.shape.slice();let l=s;return s<0&&(Y(-(i+1)<=s,()=>`Axis must be in the interval [${-(i+1)}, ${i}]`),l=i+s+1),a.splice(l,0,1),tt({inputs:{x:o},backend:r,attrs:{shape:a}})}const yAe={kernelName:bv,backendName:"webgl",kernelFunc:MI};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iP="return exp(x) - 1.0;",bAe=fn({opSnippet:iP,packedOpSnippet:iP,cpuKernelImpl:UNe}),wAe={kernelName:H0,backendName:"webgl",kernelFunc:bAe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class aP{constructor(e,n,r){this.variableNames=["real","imag"];const s=n[1];this.outputShape=n;const o=r?`2.0 * ${Math.PI}`:`-2.0 * ${Math.PI}`,i=r?`${s}.0`:"1.0";let a;if(e==="real")a="return real * expR - imag * expI;";else if(e==="imag")a="return real * expI + imag * expR;";else throw new Error(`FFT component must be either "real" or "imag", got ${e}.`);this.userCode=`
      const float exponentMultiplier = ${o};

      float unaryOpComplex(float real, float expR, float imag, float expI) {
        ${a}
      }

      float mulMatDFT(int batch, int index) {
        float indexRatio = float(index) / float(${s});
        float exponentMultiplierTimesIndexRatio =
            exponentMultiplier * indexRatio;

        float result = 0.0;

        for (int i = 0; i < ${s}; i++) {
          // x = (-2|2 * PI / N) * index * i;
          float x = exponentMultiplierTimesIndexRatio * float(i);
          float expR = cos(x);
          float expI = sin(x);
          float real = getReal(batch, i);
          float imag = getImag(batch, i);

          result +=
              unaryOpComplex(real, expR, imag, expI) / ${i};
        }

        return result;
      }

      void main() {
        ivec2 coords = getOutputCoords();
        setOutput(mulMatDFT(coords[0], coords[1]));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lW(t,e,n){const r=n.texData.get(t.dataId),s=Te(t.shape),o=t.shape[t.shape.length-1],i=s/o,a=tt({inputs:{x:t},backend:n,attrs:{shape:[i,o]}}),l=a.shape,c=new aP("real",l,e),d=new aP("imag",l,e),f=[{dataId:r.complexTensorInfos.real.dataId,dtype:r.complexTensorInfos.real.dtype,shape:l},{dataId:r.complexTensorInfos.imag.dataId,dtype:r.complexTensorInfos.imag.dtype,shape:l}],p=n.runWebGLProgram(c,f,"float32"),g=n.runWebGLProgram(d,f,"float32"),x=Bu({inputs:{real:p,imag:g},backend:n});n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(g);const b=tt({inputs:{x},backend:n,attrs:{shape:t.shape}});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(x),b}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vAe(t){const{inputs:e,backend:n}=t,{input:r}=e;return lW(r,!1,n)}const CAe={kernelName:sA,backendName:"webgl",kernelFunc:vAe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class SAe{constructor(e,n){this.outputShape=[],this.customUniforms=[{name:"value",type:"float"}],this.variableNames=["x"],this.outputShape=e,this.userCode=`
      void main() {
        // Input can be obtained from uniform value.
        setOutput(value);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function X1(t){const{backend:e,attrs:n}=t,{shape:r,value:s}=n;let{dtype:o}=n;if(o=o||kp(s),o==="string"){const i=Ar(o,Te(r));return i.fill(s),e.makeTensorInfo(r,o,i)}else{const i=new SAe(r,s),a=[[s]];return e.runWebGLProgram(i,[],o,a)}}const NAe={kernelName:oA,backendName:"webgl",kernelFunc:X1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class EAe{constructor(e){this.variableNames=["Image"],this.outputShape=[];const n=e[2];this.outputShape=e,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];

          int coordX = ${n} - x - 1;
          float outputValue;
          if(coordX >= 0 && coordX < ${n}) {
            outputValue = getImage(coords[0], coords[1], coordX, coords[3]);
          } else {
            outputValue = getImage(coords[0], coords[1], coords[2], coords[3]);
          }
          setOutput(outputValue);
        }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const IAe={kernelName:iA,backendName:"webgl",kernelFunc:({inputs:t,backend:e})=>{const{image:n}=t,r=e,s=new EAe(n.shape);return r.runWebGLProgram(s,[n],n.dtype)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lP="return floor(x);",kAe=fn({opSnippet:lP,packedOpSnippet:lP,cpuKernelImpl:HNe}),TAe={kernelName:G0,backendName:"webgl",kernelFunc:kAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const AAe=`
  float s = sign(a) * sign(b);
  int ia = round(a);
  int ib = round(b);
  if (ib != 0) {
    // Windows (D3D) wants guaranteed non-zero int division at compile-time.
    return float(idiv(ia, ib, s));
  } else {
    return NAN;
  }
`,RAe=`
  ivec4 ia = round(a);
  ivec4 ib = round(b);
  bvec4 cond = notEqual(ib, ivec4(0));
  ivec4 result = ivec4(0);
  vec4 s = sign(a) * sign(b);

  // Windows (D3D) wants guaranteed non-zero int division at compile-time.
  if (cond[0]) {
    result[0] = idiv(ia[0], ib[0], s[0]);
  }
  if (cond[1]) {
    result[1] = idiv(ia[1], ib[1], s[1]);
  }
  if (cond[2]) {
    result[2] = idiv(ia[2], ib[2], s[2]);
  }
  if (cond[3]) {
    result[3] = idiv(ia[3], ib[3], s[3]);
  }
  return vec4(result);
`,DAe=Ts({opSnippet:AAe,packedOpSnippet:RAe,dtype:"int32"}),$Ae={kernelName:q0,backendName:"webgl",kernelFunc:DAe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class OAe{constructor(e){this.variableNames=["A"];const n=uo(),[r,s]=e;this.outputShape=e,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${s}.0, ${r}.0);

        vec4 values = ${n.texture2D}(A, uv);
        float value;
        if (depth == 0) {
          value = values.r;
        } else if (depth == 1) {
          value = values.g;
        } else if (depth == 2) {
          value = values.b;
        } else if (depth == 3) {
          value = values.a;
        }

        setOutput(floor(value * 255.0 + 0.5));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class _Ae{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;const n=uo(),[r,s]=e;this.outputShape=e,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];

        vec4 result = vec4(0.);

        for(int row=0; row<=1; row++) {
          for(int col=0; col<=1; col++) {
            texC = coords[1] + row;
            depth = coords[2] + col;

            vec2 uv = (vec2(texC, texR) + halfCR) /
                       vec2(${s}.0, ${r}.0);
            vec4 values = ${n.texture2D}(A, uv);
            float value;
            if (depth == 0) {
              value = values.r;
            } else if (depth == 1) {
              value = values.g;
            } else if (depth == 2) {
              value = values.b;
            } else if (depth == 3) {
              value = values.a;
            }

            result[row * 2 + col] = floor(value * 255.0 + 0.5);
          }
        }

        ${n.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const PAe={kernelName:HE,backendName:"webgl",kernelFunc:FAe};let Mf,pN=Ee().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");function FAe(t){const{inputs:e,backend:n,attrs:r}=t;let{pixels:s}=e;const{numChannels:o}=r,i=typeof HTMLVideoElement<"u"&&s instanceof HTMLVideoElement,a=typeof HTMLImageElement<"u"&&s instanceof HTMLImageElement,[l,c]=i?[s.videoWidth,s.videoHeight]:[s.width,s.height],d=[c,l],f=[c,l,o];if(a||i){const b=Ee().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");(Mf==null||b!==pN)&&(pN=b,Mf=document.createElement("canvas").getContext("2d",{willReadFrequently:pN})),Mf.canvas.width=l,Mf.canvas.height=c,Mf.drawImage(s,0,0,l,c),s=Mf.canvas}const p=n.makeTensorInfo(d,"int32");n.texData.get(p.dataId).usage=fi.PIXELS,n.gpgpu.uploadPixelDataToTexture(n.getTexture(p.dataId),s);const g=Ee().getBool("WEBGL_PACK")?new _Ae(f):new OAe(f),x=n.runWebGLProgram(g,[p],"int32");return n.disposeData(p.dataId),x}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MAe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:o,bias:i,preluActivationWeights:a}=e,{strides:l,pad:c,dataFormat:d,dilations:f,dimRoundingMode:p,activation:g,leakyreluAlpha:x}=r,b=mc(d),w=ps(s.shape,o.shape,l,f,c,p,!1,b);let C;const N=[],k=i!=null,I=a!=null,R=g==="leakyrelu",$=()=>{const F=[s,o],M=(_,V)=>{if(V==="NCHW"&&_.shape.length===1&&_.shape[0]!==1){const B=tt({inputs:{x:_},backend:n,attrs:{shape:[_.shape[0],1,1]}});return N.push(B),B}return _};if(k&&F.push(M(i,d)),I&&F.push(M(a,d)),R){const _=n.makeTensorInfo([],"float32",Au(x,"float32"));F.push(_),N.push(_)}return F};if(w.filterHeight===1&&w.filterWidth===1&&w.dilationHeight===1&&w.dilationWidth===1&&w.strideHeight===1&&w.strideWidth===1&&(w.padInfo.type==="SAME"||w.padInfo.type==="VALID"))C=nW({x:s,filter:o,convInfo:w,backend:n,bias:i,activation:g,preluActivationWeights:a,leakyreluAlpha:x});else if(w.strideWidth<=2&&b==="channelsLast"&&Ee().getBool("WEBGL_EXP_CONV")){const F=g?r0(g,!0):null,M=new tW(w,k,F,I,R),_=[[w.padInfo.top,w.padInfo.left],[w.strideHeight,w.strideWidth],[w.dilationHeight,w.dilationWidth],[w.inHeight,w.inWidth]],V=$();C=n.runWebGLProgram(M,V,"float32",_)}else if(Ee().getBool("WEBGL_CONV_IM2COL"))C=rW({x:s,filter:o,convInfo:w,backend:n,bias:i,activation:g,preluActivationWeights:a,leakyreluAlpha:x});else{const F=g?r0(g,!1):null,M=new eW(w,k,F,I,R),_=$();C=n.runWebGLProgram(M,_,"float32")}const O=tt({inputs:{x:C},backend:n,attrs:{shape:w.outShape}});return N.push(C),N.forEach(F=>n.disposeIntermediateTensorInfo(F)),O}const LAe={kernelName:Db,backendName:"webgl",kernelFunc:MAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BAe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:o,bias:i,preluActivationWeights:a}=e,{strides:l,pad:c,dilations:d,dimRoundingMode:f,activation:p,leakyreluAlpha:g}=r,x=[];let b=d;b==null&&(b=[1,1]),Y(Es(l,b),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${l} and dilations '${b}'`);const w=ps(s.shape,o.shape,l,b,c,f,!0),C=Ee().getBool("WEBGL_PACK_DEPTHWISECONV")&&w.strideWidth<=2&&w.outChannels/w.inChannels===1,N=p?r0(p,C):null,k=[s,o],I=i!=null,R=a!=null,$=p==="leakyrelu";if(I&&k.push(i),R&&k.push(a),$){const _=n.makeTensorInfo([],"float32",Au(g,"float32"));k.push(_),x.push(_)}let O;C?O=new iW(w,I,N,R,$):O=new oW(w,I,N,R,$);const F=[[w.padInfo.top,w.padInfo.left],[w.strideHeight,w.strideWidth],[w.dilationHeight,w.dilationWidth],[w.inHeight,w.inWidth]],M=n.runWebGLProgram(O,k,"float32",F);return x.forEach(_=>n.disposeIntermediateTensorInfo(_)),M}const jAe={kernelName:$b,backendName:"webgl",kernelFunc:BAe};class zAe{constructor(e,n,r,s){this.sliceDim=e,this.strides=n,this.paramsShape=s,this.variableNames=["x","indices"],this.outputShape=r;const o=On(r.length);let i=`
    int index;`;for(let a=0;a<this.sliceDim;a++)i+=`
          index = round(getIndices(coords[0], ${a}));
          out_of_bounds = out_of_bounds || index < 0;
          out_of_bounds = out_of_bounds || index >= ${this.paramsShape[a]};
          flattenIndex += index * ${this.strides[a]};`;this.userCode=`
         void main() {
          ${o} coords = getOutputCoords();
          int flattenIndex = 0;
          bool out_of_bounds = false;

          ${i}

          setOutput(out_of_bounds ? 0.0 : getX(flattenIndex, coords[1]));
        }
      `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VAe(t){const{inputs:e,backend:n}=t,{params:r,indices:s}=e,o=s.shape,i=o[o.length-1],a=Te(r.shape),[l,c,d,f]=z3(r,s),p=tt({inputs:{x:s},backend:n,attrs:{shape:[c,i]}}),g=tt({inputs:{x:r},backend:n,attrs:{shape:[Te(r.shape)/d,d]}});if(n.shouldExecuteOnCPU([r,s])||r.dtype==="string"){const C=n.readSync(s.dataId),N=n.bufferSync(r),k=GNe(C,N,r.dtype,c,i,d,f,r.shape,a);return n.makeTensorInfo(l,r.dtype,k.values)}const x=new zAe(i,f,[c,d],r.shape),b=n.runWebGLProgram(x,[g,p],g.dtype),w=tt({inputs:{x:b},backend:n,attrs:{shape:l}});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(b),w}const WAe={kernelName:aA,backendName:"webgl",kernelFunc:VAe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class UAe{constructor(e,n){this.variableNames=["A","indices"],this.outputShape=n,this.rank=n.length;const r=On(this.rank),s=HAe(e);this.userCode=`
      void main() {
        ${r} resRC = getOutputCoords();
        int index = int(getIndices(resRC.x, resRC.z));
        float inBounds = (index >= 0) && (index < ${e[2]}) ? 1.0 : 0.0;
        setOutput(inBounds * getA(${s}));
      }
    `}}function HAe(t,e){const n=["resRC.x","resRC.y","resRC.z","resRC.w"],r=[];for(let s=0;s<t.length;s++)s===2?r.push("index"):r.push(`${n[s]}`);return r.join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cW(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,indices:o}=e,{axis:i,batchDims:a}=r,l=Zt(i,s.shape)[0];if(Ee().get("DEBUG")){const N=n.readSync(o.dataId),k=s.shape[l];for(let I=0;I<N.length;++I){const R=N[I];Y(R<=k-1&&R>=0,()=>`GatherV2: the index value ${R} is not in [0, ${k-1}]`)}}const c=dR(s,o,l,a),d=Te(o.shape),f=[],p=tt({inputs:{x:s},backend:n,attrs:{shape:[c.batchSize,c.outerSize,c.dimSize,c.sliceSize]}}),g=tt({inputs:{x:o},backend:n,attrs:{shape:[c.batchSize,d/c.batchSize]}});f.push(p),f.push(g);const x=[c.batchSize,c.outerSize,d/c.batchSize,c.sliceSize];if(n.shouldExecuteOnCPU([s,o])||s.dtype==="string"){const N=n.bufferSync(g),k=n.bufferSync(p),I=qNe(k,N,x);return f.forEach(R=>n.disposeIntermediateTensorInfo(R)),n.makeTensorInfo(c.outputShape,I.dtype,I.values)}const b=new UAe(p.shape,x),w=n.runWebGLProgram(b,[p,g],p.dtype);f.push(w);const C=tt({inputs:{x:w},backend:n,attrs:{shape:c.outputShape}});return f.forEach(N=>n.disposeIntermediateTensorInfo(N)),C}const GAe={kernelName:vv,backendName:"webgl",kernelFunc:cW};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qAe="return float(a > b);",XAe=`
  return vec4(greaterThan(a, b));
`,KAe=Ts({opSnippet:qAe,packedOpSnippet:XAe,cpuKernelImpl:XNe,dtype:"bool"}),YAe={kernelName:Cv,backendName:"webgl",kernelFunc:KAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ZAe="return float(a >= b);",QAe=`
  return vec4(greaterThanEqual(a, b));
`,JAe=Ts({opSnippet:ZAe,packedOpSnippet:QAe,dtype:"bool",cpuKernelImpl:KNe}),e3e={kernelName:X0,backendName:"webgl",kernelFunc:JAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function t3e(t){const{inputs:e,backend:n}=t,{input:r}=e;return lW(r,!0,n)}const n3e={kernelName:lA,backendName:"webgl",kernelFunc:t3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const r3e="return float(!isnan(x) && !isinf(x));",s3e=fn({opSnippet:r3e,dtype:"bool"}),o3e={kernelName:Y0,backendName:"webgl",kernelFunc:s3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const i3e="return float(isinf(x));",a3e=fn({opSnippet:i3e,dtype:"bool"}),l3e={kernelName:Z0,backendName:"webgl",kernelFunc:a3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const c3e="return float(isnan(x));",u3e=fn({opSnippet:c3e,dtype:"bool"}),d3e={kernelName:Q0,backendName:"webgl",kernelFunc:u3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const f3e="return float(a < b);",h3e=`
  return vec4(lessThan(a, b));
`,p3e=Ts({opSnippet:f3e,packedOpSnippet:h3e,cpuKernelImpl:YNe,dtype:"bool"}),m3e={kernelName:Nv,backendName:"webgl",kernelFunc:p3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const g3e="return float(a <= b);",x3e=`
  return vec4(lessThanEqual(a, b));
`,y3e=Ts({opSnippet:g3e,packedOpSnippet:x3e,cpuKernelImpl:ZNe,dtype:"bool"}),b3e={kernelName:Ev,backendName:"webgl",kernelFunc:y3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function w3e(t){const{backend:e,attrs:n}=t,{start:r,stop:s,num:o}=n,i=QNe(r,s,o);return e.makeTensorInfo([i.length],"float32",i)}const v3e={kernelName:uA,backendName:"webgl",kernelFunc:w3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const C3e=Wp+`
  return x < 0.0 ? 0./0. : log(x);
`,S3e=`
  vec4 result = log(x);
  bvec4 isNaN = isnan(x);
  result.r = isNaN.r ? x.r : (x.r < 0.0 ? 0./0. : result.r);
  result.g = isNaN.g ? x.g : (x.g < 0.0 ? 0./0. : result.g);
  result.b = isNaN.b ? x.b : (x.b < 0.0 ? 0./0. : result.b);
  result.a = isNaN.a ? x.a : (x.a < 0.0 ? 0./0. : result.a);
  return result;
`,N3e=fn({opSnippet:C3e,packedOpSnippet:S3e,cpuKernelImpl:JNe}),E3e={kernelName:J0,backendName:"webgl",kernelFunc:N3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const I3e=Wp+`
  return log(1.0 + x);
`,k3e=fn({opSnippet:I3e}),T3e={kernelName:e1,backendName:"webgl",kernelFunc:k3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const A3e="return float(a >= 1.0 && b >= 1.0);",R3e=`
  return vec4(
    vec4(greaterThanEqual(a, vec4(1.0))) *
    vec4(greaterThanEqual(b, vec4(1.0))));
`,D3e=Ts({opSnippet:A3e,packedOpSnippet:R3e,dtype:"bool"}),$3e={kernelName:Iv,backendName:"webgl",kernelFunc:D3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const O3e="return float(!(x >= 1.0));",_3e=fn({opSnippet:O3e}),P3e={kernelName:kv,backendName:"webgl",kernelFunc:_3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const F3e="return float(a >= 1.0 || b >= 1.0);",M3e=`
  return min(
    vec4(greaterThanEqual(a, vec4(1.0))) +
    vec4(greaterThanEqual(b, vec4(1.0))),
    vec4(1.0));
`,L3e=Ts({opSnippet:F3e,packedOpSnippet:M3e,dtype:"bool"}),B3e={kernelName:Tv,backendName:"webgl",kernelFunc:L3e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class j3e{constructor(e,n,r,s,o){this.variableNames=["x"],this.outputShape=[];const i=n,a=e[3]-1;this.outputShape=e;let l;const c=`float(${r}) + float(${s}) * sum`;o===.5?l=`inversesqrt(${c})`:o===1?l=`1.0/(${c})`:l=`exp(log(${c}) * float(-${o}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];
        int d = coords[3];
        float x = getX(b, r, c, d);
        float sum = 0.0;
        for (int j = -${i}; j <= ${i}; j++) {
          int idx = d + j;
          if (idx >= 0 && idx <=  ${a}) {
            float z = getX(b, r, c, idx);
            sum += z * z;
          }
        }
        float val = x * ${l};
        setOutput(val);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class z3e{constructor(e,n,r,s,o){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;const i=n,a=e[3]-1;this.outputShape=e;let l;const c=`float(${r}) + float(${s}) * sum`;o===.5?l=`inversesqrt(${c})`:o===1?l=`1.0/(${c})`:l=`exp(log(${c}) * float(-${o}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords.x;
        int r = coords.y;
        int c = coords.z;
        int d = coords.w;

        bool hasNextCol = d < ${this.outputShape[3]};
        bool hasNextRow = c < ${this.outputShape[2]};

        vec4 sum = vec4(0.);
        vec4 xFragAtOutputCoords = getX(b, r, c, d);

        vec4 xAtOutputCoords = vec4(
          getChannel(xFragAtOutputCoords, vec2(c, d)),
          hasNextCol ?
            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,
          hasNextRow ?
            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,
          (hasNextRow && hasNextCol) ?
            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0
        );

        int firstChannel = d - ${i};
        vec2 cache = vec2(0.);
        if(firstChannel >= 0){
          vec4 firstChannelFrag = getX(b, r, c, firstChannel);
          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));
            if(hasNextRow){
              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));
            }
        }

        ivec2 depth = ivec2(d, d + 1);
        for (int j = - ${i}; j <= ${i}; j++) {
          ivec2 idx = depth + j;
          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));
          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(${a}));

          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;
          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;

          if(depthInRange || depthPlusOneInRange){
            vec4 z = vec4(0.);
            vec4 xFragAtCurrentDepth;
            z.xz = cache.xy;
            if(depthPlusOneInRange && hasNextCol){
              xFragAtCurrentDepth = idx.y != d ?
                getX(b, r, c, idx.y) : xFragAtOutputCoords;
              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));
              if(hasNextRow){
                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));
              }
            }
            cache.xy = z.yw;
            sum += z * z;
          }
        }
        vec4 result = xAtOutputCoords * ${l};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const V3e=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{depthRadius:o,bias:i,alpha:a,beta:l}=r,c=Ee().getBool("WEBGL_PACK_NORMALIZATION")?new z3e(s.shape,o,i,a,l):new j3e(s.shape,o,i,a,l);return n.runWebGLProgram(c,[s],s.dtype)},W3e={kernelName:Av,backendName:"webgl",kernelFunc:V3e};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class U3e{constructor(e,n,r,s,o){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=e,this.depth=e[3],this.depthRadius=n,this.bias=r,this.alpha=s,this.beta=o,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];

        float result = 0.0;
        for (int d = 0; d < ${this.depth}; ++d) {
          int depthBegin = int(max(0.0, float(d - ${n})));
          int depthEnd = int(min(float(${this.depth}),
              float(d + ${n} + 1)));

          const int MIN_DEPTH_BEGIN = 0;
          const int MAX_DEPTH_END = ${this.depth};

          float norm = 0.0;
          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd) {
              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);
            }
            else {
              break;
            }
          }

          norm = float(${s}) * norm + float(${r});

          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd){
              float dyi = -2.0 * float(${s})
                * float(${o})
                * getInputImage(b, r, c, k) * getOutputImage(b, r, c, d)
                / norm;
              if (k == d) {
                dyi += pow(norm, -1.0 * ${o});
              }
              if (k == coords[3]) {
                dyi *= getDy(b, r, c, d);
                result += dyi;
              }
            }
            else {
              break;
            }
          }
      }
      setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const H3e=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:s,y:o,dy:i}=e,{depthRadius:a,bias:l,alpha:c,beta:d}=r,f=new U3e(s.shape,a,l,c,d);return n.runWebGLProgram(f,[s,o,i],s.dtype)},G3e={kernelName:dA,backendName:"webgl",kernelFunc:H3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function q3e(t,e,n,r){const s=Te(e),i=Te(t.shape)/s,a=tt({inputs:{x:t},attrs:{shape:[i,s]},backend:r}),l=Cf(a,t.dtype,"max",r),c=tt({inputs:{x:l},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(a),r.disposeIntermediateTensorInfo(l),c}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uW(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{reductionIndices:o,keepDims:i}=r,a=s.shape.length,l=Zt(o,s.shape);let c=l;const d=fr(c,a),f=d!=null,p=n.shouldExecuteOnCPU([s]);let g=s;if(f){if(p){const k=n.texData.get(g.dataId).values,I=new Array(a);for(let O=0;O<I.length;O++)I[O]=s.shape[d[O]];const R=iD(k,s.shape,s.dtype,d,I);g=n.makeTensorInfo(I,s.dtype);const $=n.texData.get(g.dataId);$.values=R}else g=H2(s,d,n);c=$r(c.length,a)}Is("max",c,a);const[x,b]=ms(g.shape,c);let w=x;i&&(w=Dr(x,l));let C;if(p){const k=n.texData.get(g.dataId).values,I=eEe(k,Te(b),w,s.dtype);C=n.makeTensorInfo(w,s.dtype);const R=n.texData.get(C.dataId);R.values=I}else C=q3e(g,b,w,n);return f&&n.disposeIntermediateTensorInfo(g),C}const X3e={kernelName:Rv,backendName:"webgl",kernelFunc:uW};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const K3e=aD+`
  return max(a, b);
`,Y3e=`
  vec4 result = vec4(max(a, b));
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+vf+`
  return result;
`,Z3e=Ts({opSnippet:K3e,packedOpSnippet:Y3e,cpuKernelImpl:tEe}),Q3e={kernelName:t1,backendName:"webgl",kernelFunc:Z3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function J3e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e;H1(s,"maxPool");const{filterSize:o,strides:i,pad:a,dimRoundingMode:l}=r,c=1;Y(Es(i,c),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${i} and dilations '${c}'`);const d=ia(s.shape,o,i,c,a,l);if(d.filterWidth===1&&d.filterHeight===1&&nn(d.inShape,d.outShape))return Jo({inputs:{x:s},backend:n});const f=new s0(d,"max",!1);return n.runWebGLProgram(f,[s],s.dtype)}const eRe={kernelName:Dv,backendName:"webgl",kernelFunc:J3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tRe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{filterSize:o,strides:i,pad:a,dataFormat:l,dimRoundingMode:c}=r,d=[1,1,1],f=pc(s.shape,o,i,d,a,c,l),p=new cD(f,"max",!1);return n.runWebGLProgram(p,[s],s.dtype)}const nRe={kernelName:$v,backendName:"webgl",kernelFunc:tRe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class rRe{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;const n=e.strideHeight,r=e.strideWidth,s=e.dilationHeight,o=e.effectiveFilterHeight,i=e.effectiveFilterWidth,a=o-1-e.padInfo.top,l=i-1-e.padInfo.left,c=o*i-1;this.userCode=`
      const ivec2 pads = ivec2(${a}, ${l});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${o};
          wR += ${s}) {
          float dyR = float(dyRCorner + wR) / ${n}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${i}; wC++) {
            float dyC = float(dyCCorner + wC) / ${r}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);
            int maxPosValue = ${c} - int(getMaxPos(b, idyR, idyC, d));

            // Get the current value, check it against the value from the
            // position matrix.
            int curPosValue = wR * ${i} + wC;
            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

            dotProd += dyValue * mask;
          }
        }
        setOutput(dotProd);
      }
    `}}class sRe{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;const n=e.strideDepth,r=e.strideHeight,s=e.strideWidth,o=e.dilationDepth,i=e.dilationHeight,a=e.dilationWidth,l=e.effectiveFilterDepth,c=e.effectiveFilterHeight,d=e.effectiveFilterWidth,f=l-1-e.padInfo.front,p=c-1-e.padInfo.top,g=d-1-e.padInfo.left,x=l*c*d-1;this.userCode=`
      const ivec3 pads = ivec3(${f}, ${p}, ${g});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${l};
           wD += ${o}) {
          float dyD = float(dyDCorner + wD) / ${n}.0;

          if (dyD < 0.0 || dyD >= ${e.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${c};
              wR += ${i}) {
            float dyR = float(dyRCorner + wR) / ${r}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${d};
                wC += ${a}) {
              float dyC = float(dyCCorner + wC) / ${s}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);
              int maxPosValue = ${x} -
                  int(getMaxPos(batch, idyD, idyR, idyC, ch));

              // Get the current value, check it against the value from the
              // position matrix.
              int curPosValue =
                  wD * ${c} * ${d} +
                  wR * ${d} + wC;
              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

              dotProd += dyValue * mask;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oRe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,input:o}=e,i=o,{filterSize:a,strides:l,pad:c,dimRoundingMode:d}=r,f=[1,1,1],p=pc(i.shape,a,l,f,c,d),g=new cD(p,"max",!0),x=n.runWebGLProgram(g,[i],i.dtype),b=new sRe(p),w=n.runWebGLProgram(b,[s,x],i.dtype);return n.disposeIntermediateTensorInfo(x),w}const iRe={kernelName:hA,backendName:"webgl",kernelFunc:oRe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aRe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,input:o,output:i}=e,a=o;H1([o,i],"maxPoolGrad");const{filterSize:l,strides:c,pad:d,dimRoundingMode:f}=r,p=ia(a.shape,l,c,1,d,f),g=!0,x=new s0(p,"max",g),b=n.runWebGLProgram(x,[a],a.dtype),w=new rRe(p),C=n.runWebGLProgram(w,[s,b],a.dtype);return n.disposeIntermediateTensorInfo(b),C}const lRe={kernelName:fA,backendName:"webgl",kernelFunc:aRe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cRe(t,e,n,r){let s=new s0(n,"max",!1);const o=r.runWebGLProgram(s,[t],"float32");s=new s0(n,"max",!0,!0,e);const i=r.runWebGLProgram(s,[t],"float32");return[o,i]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uRe={kernelName:pA,backendName:"webgl",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:r}=t,{filterSize:s,strides:o,pad:i,includeBatchInIndex:a}=e,l=n;Y(r.shape.length===4,()=>`Error in maxPool: input must be rank 4 but got rank ${r.shape.length}.`);const c=[1,1];Y(Es(o,c),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${o} and dilations '${c}'`);const d=ia(r.shape,s,o,c,i),[f,p]=cRe(r,a,d,l);return[f,p]}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dRe(t,e,n,r){const s=Te(e),i=Te(t.shape)/s,a=tt({inputs:{x:t},attrs:{shape:[i,s]},backend:r}),l=Cf(a,"float32","mean",r),c=tt({inputs:{x:l},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(a),r.disposeIntermediateTensorInfo(l),c}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fRe={kernelName:Ov,backendName:"webgl",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:r}=t,{keepDims:s,axis:o}=e,i=n,a=r.shape.length,l=Zt(o,r.shape);let c=l;const d=fr(c,a),f=d!=null,p=i.shouldExecuteOnCPU([r]),g=[];let x=r;if(f){if(p){const I=i.texData.get(x.dataId).values,R=new Array(a);for(let F=0;F<R.length;F++)R[F]=r.shape[d[F]];const $=iD(I,r.shape,r.dtype,d,R);x=i.makeTensorInfo(R,r.dtype);const O=i.texData.get(x.dataId);O.values=$}else x=H2(r,d,i);g.push(x),c=$r(c.length,a)}Is("sum",c,a);const[b,w]=ms(x.shape,c);let C=b;s&&(C=Dr(b,l));const N=dRe(x,w,C,i);for(const k of g)i.disposeIntermediateTensorInfo(k);return N}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hRe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:o,keepDims:i}=r,a=s.shape.length,l=Zt(o,s.shape);let c=l;const d=fr(c,a);let f=s;d!=null&&(f=lo({inputs:{x:s},backend:n,attrs:{perm:d}}),c=$r(c.length,s.shape.length)),Is("min",c,a);const[p,g]=ms(f.shape,c),x=Te(g),b=tt({inputs:{x:f},backend:n,attrs:{shape:[-1,x]}}),w=Cf(b,b.dtype,"min",n);let C;if(i){const N=Dr(p,l);C=tt({inputs:{x:w},backend:n,attrs:{shape:N}})}else C=tt({inputs:{x:w},backend:n,attrs:{shape:p}});return n.disposeIntermediateTensorInfo(b),n.disposeIntermediateTensorInfo(w),d!=null&&n.disposeIntermediateTensorInfo(f),C}const pRe={kernelName:_v,backendName:"webgl",kernelFunc:hRe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mRe=aD+`
  return min(a, b);
`,gRe=`
  vec4 result = vec4(min(a, b));
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+vf+`
  return result;
`,xRe=Ts({opSnippet:mRe,packedOpSnippet:gRe,cpuKernelImpl:nEe}),yRe={kernelName:n1,backendName:"webgl",kernelFunc:xRe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class bRe{constructor(e,n,r){this.variableNames=["x"],this.outputShape=n.map((d,f)=>d[0]+e[f]+d[1]);const s=e.length,o=On(s),i=n.map(d=>d[0]).join(","),a=n.map((d,f)=>d[0]+e[f]).join(","),l=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,s),c=r==="reflect"?0:1;if(s===1){this.userCode=`
        int start = ${i};
        int end = ${a};

        void main() {
          int outC = getOutputCoords();
          if (outC < start) {
            outC = start * 2 - outC - ${c};
          } else if(outC >= end) {
            outC = (end - 1) * 2 - outC + ${c};
          }
          setOutput(getX(outC - start));
        }
      `;return}this.userCode=`
      ${o} start = ${o}(${i});
      ${o} end = ${o}(${a});

      void main() {
        ${o} outC = getOutputCoords();
        for (int i = 0; i < ${s}; i++) {
          if (outC[i] < start[i]) {
            outC[i] = start[i] * 2 - outC[i] - ${c};
          } else if(outC[i] >= end[i]) {
            outC[i] = (end[i] - 1) * 2 - outC[i] + ${c};
          }
        }
        ${o} coords = outC - start;
        setOutput(getX(${l}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class wRe{constructor(e,n,r){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n.map((x,b)=>x[0]+e[b]+x[1]);const s=e.length,o=On(s),i=n.map(x=>x[0]).join(","),a=n.map((x,b)=>x[0]+e[b]).join(","),l=ro("rc",s),c=ro("source",s),d=`${l[s-1]} < ${this.outputShape[s-1]}`,f=s===1?"source":`vec2(${c.slice(-2).join()})`,p=r==="reflect"?0:1;let g="";if(s===1){const x=`
        ${o} source = rc;
        if (source < start) {
          source = start * 2 - source - ${p};
        } else if (source >= end) {
          source = (end - 1) * 2 - source + ${p};
        }
        source -= start;
      `;g=`
        ${o} rc = outputLoc;
        ${x}
        result[0] = getChannel(getX(${c.join()}), ${f});
        ${l[s-1]} += 1;
        if(${d}) {
          ${x}
          result[1] = getChannel(getX(${c.join()}), ${f});
        }
      `}else{const x=`
        ${o} source = rc;
        ${o} lt = ${o}(lessThan(source, start));
        ${o} gte = ${o}(greaterThanEqual(source, end));
        ${o} orig = 1 - (lt + gte);
        source = orig * source +
                lt * (start * 2 - source - ${p}) +
                gte * ((end - 1) * 2 - source + ${p});
        source -= start;
      `;g=`
        ${o} rc = outputLoc;
        ${x}
        result[0] = getChannel(getX(${c.join()}), ${f});
        ${l[s-1]} += 1;
        if(${d}) {
          ${x}
          result[1] = getChannel(getX(${c.join()}), ${f});
        }
        rc = outputLoc;
        ${l[s-2]} += 1;
        if(${l[s-2]} < ${this.outputShape[s-2]}) {
          ${x}
          result[2] = getChannel(getX(${c.join()}), ${f});
          ${l[s-1]} += 1;
          if(${d}) {
            ${x}
            result[3] = getChannel(getX(${c.join()}), ${f});
          }
        }
      `}this.userCode=`
      const ${o} start = ${o}(${i});
      const ${o} end = ${o}(${a});

      void main() {
        ${o} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${g}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vRe=({inputs:t,backend:e,attrs:n})=>{const{x:r}=t,{paddings:s,mode:o}=n,i=Ee().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new wRe(r.shape,s,o):new bRe(r.shape,s,o);return e.runWebGLProgram(i,[r],r.dtype)},CRe={kernelName:Pv,backendName:"webgl",kernelFunc:vRe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SRe=`if (b == 0.0) return NAN;
  return mod(a, b);`,NRe=`
  vec4 result = mod(a, b);
  bvec4 isNaN = equal(b, vec4(0.0));
  `+vf+`
  return result;
`,ERe=Ts({opSnippet:SRe,packedOpSnippet:NRe}),IRe={kernelName:r1,backendName:"webgl",kernelFunc:ERe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class kRe{constructor(e,n,r){this.variableNames=["probs"],this.customUniforms=[{name:"seed",type:"float"}],this.outputShape=[e,r],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];

        float r = random(seed);
        float cdf = 0.0;

        for (int i = 0; i < ${n-1}; i++) {
          cdf += getProbs(batch, i);

          if (r < cdf) {
            setOutput(float(i));
            return;
          }
        }

        // If no other event happened, last event happened.
        setOutput(float(${n-1}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const TRe=`
if (a == b) {
  return 1.0;
};
return a / b;`,ARe=`
  // vec4 one = vec4(equal(a, b));
  // return one + (vec4(1.0) - one) * a / b;
  vec4 result = a / b;
  if(a.x == b.x) {
    result.x = 1.;
  }
  if(a.y == b.y) {
    result.y = 1.;
  }
  if(a.z == b.z) {
    result.z = 1.;
  }
  if(a.w == b.w) {
    result.w = 1.;
  }

  return result;
`,dW=Ts({opSnippet:TRe,packedOpSnippet:ARe,checkOutOfBounds:!0}),RRe={kernelName:z0,backendName:"webgl",kernelFunc:dW};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cP="return a - b;",fW=Ts({opSnippet:cP,packedOpSnippet:cP,supportsComplex:!0,cpuKernelImpl:SEe}),DRe={kernelName:b1,backendName:"webgl",kernelFunc:fW};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hW(t){const{inputs:e,backend:n,attrs:r}=t,{logits:s}=e,{dim:o}=r,i=Zt([o],s.shape),a=uW({inputs:{x:s},backend:n,attrs:{reductionIndices:i,keepDims:!1}}),l=Dr(a.shape,i),c=tt({inputs:{x:a},backend:n,attrs:{shape:l}}),d=fW({inputs:{a:s,b:c},backend:n}),f=aW({inputs:{x:d},backend:n}),p=G2({inputs:{x:f},backend:n,attrs:{axis:i,keepDims:!1}}),g=tt({inputs:{x:p},backend:n,attrs:{shape:l}}),x=dW({inputs:{a:f,b:g},backend:n});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(g),x}const $Re={kernelName:Jv,backendName:"webgl",kernelFunc:hW};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ORe(t){const{inputs:e,backend:n,attrs:r}=t,{logits:s}=e,{numSamples:o,seed:i,normalized:a}=r,l=a?s:hW({inputs:{logits:s},backend:n,attrs:{dim:s.shape.length-1}}),c=l.shape[0],d=l.shape[1],f=new kRe(c,d,o),p=[[i]],g=n.runWebGLProgram(f,[l],"int32",p);return a||n.disposeIntermediateTensorInfo(l),g}const _Re={kernelName:mA,backendName:"webgl",kernelFunc:ORe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const PRe=la+`
  return -x;
`,FRe=`
  vec4 result = -x;
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`;function MRe(t){const{inputs:e,backend:n}=t,{x:r}=e;if(n.shouldExecuteOnCPU([r])){const o=n.texData.get(r.dataId),[i,a]=sEe(o.values,r.shape,r.dtype);return n.makeTensorInfo(a,r.dtype,i)}let s;return Ee().getBool("WEBGL_PACK_UNARY_OPERATIONS")?s=new Gc(r.shape,FRe):s=new hl(r.shape,PRe),n.runWebGLProgram(s,[r],r.dtype)}const LRe={kernelName:Fv,backendName:"webgl",kernelFunc:MRe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const BRe=_3;function jRe(t){ci("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:n,attrs:r}=t,{boxes:s,scores:o}=e,{maxOutputSize:i,iouThreshold:a,scoreThreshold:l}=r,c=n.readSync(s.dataId),d=n.readSync(o.dataId),{selectedIndices:f}=BRe(c,d,i,a,l);return n.makeTensorInfo([f.length],"int32",new Int32Array(f))}const zRe={kernelName:gA,backendName:"webgl",kernelFunc:jRe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const VRe=P3;function WRe(t){ci("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:n,attrs:r}=t,{boxes:s,scores:o}=e,{maxOutputSize:i,iouThreshold:a,scoreThreshold:l,padToMaxOutputSize:c}=r,d=n.readSync(s.dataId),f=n.readSync(o.dataId),{selectedIndices:p,validOutputs:g}=VRe(d,f,i,a,l,c);return[n.makeTensorInfo([p.length],"int32",new Int32Array(p)),n.makeTensorInfo([],"int32",new Int32Array([g]))]}const URe={kernelName:xA,backendName:"webgl",kernelFunc:WRe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const HRe=F3;function GRe(t){ci("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:n,attrs:r}=t,{boxes:s,scores:o}=e,{maxOutputSize:i,iouThreshold:a,scoreThreshold:l,softNmsSigma:c}=r,d=n.readSync(s.dataId),f=n.readSync(o.dataId),p=i,g=a,x=l,b=c,{selectedIndices:w,selectedScores:C}=HRe(d,f,p,g,x,b);return[n.makeTensorInfo([w.length],"int32",new Int32Array(w)),n.makeTensorInfo([C.length],"float32",new Float32Array(C))]}const qRe={kernelName:yA,backendName:"webgl",kernelFunc:GRe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class XRe{constructor(e,n,r,s){this.variableNames=["indices"],this.outputShape=[e,n],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int index = round(getIndices(coords.x));
        setOutput(mix(float(${s}), float(${r}),
                      float(index == coords.y)));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const KRe=t=>{const{inputs:e,backend:n,attrs:r}=t,{indices:s}=e,{dtype:o,depth:i,onValue:a,offValue:l}=r,c=Te(s.shape),d=new XRe(c,i,a,l),f=tt({inputs:{x:s},backend:n,attrs:{shape:[c]}}),p=n.runWebGLProgram(d,[f],o);n.disposeIntermediateTensorInfo(f);const g=[...s.shape,i],x=tt({inputs:{x:p},backend:n,attrs:{shape:g}});return n.disposeIntermediateTensorInfo(p),x},YRe={kernelName:Bv,backendName:"webgl",kernelFunc:KRe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sw(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="complex64"){const s=q1({inputs:{input:r},backend:n}),o=sw({inputs:{x:s},backend:n}),i=q2({inputs:{input:r},backend:n}),a=sw({inputs:{x:i},backend:n}),l=Bu({inputs:{real:o,imag:a},backend:n});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(a),l}else return X1({attrs:{shape:r.shape,dtype:r.dtype,value:r.dtype==="string"?"":0},backend:n})}const ZRe={kernelName:r2,backendName:"webgl",kernelFunc:sw};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pW(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="string")throw new Error("onesLike is not supported under string dtype");if(r.dtype==="complex64"){const s=q1({inputs:{input:r},backend:n}),o=pW({inputs:{x:s},backend:n}),i=q2({inputs:{input:r},backend:n}),a=sw({inputs:{x:i},backend:n}),l=Bu({inputs:{real:o,imag:a},backend:n});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(a),l}else return X1({attrs:{shape:r.shape,dtype:r.dtype,value:1},backend:n})}const QRe={kernelName:Lv,backendName:"webgl",kernelFunc:pW};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JRe(t){const{inputs:e,backend:n,attrs:r}=t,{axis:s}=r;if(e.length===1)return MI({inputs:{input:e[0]},backend:n,attrs:{dim:s}});const o=e[0].shape,i=e[0].dtype;e.forEach(d=>{ti(o,d.shape,"All tensors passed to stack must have matching shapes"),Y(i===d.dtype,()=>"All tensors passed to stack must have matching dtypes")});const a=[],l=e.map(d=>{const f=MI({inputs:{input:d},backend:n,attrs:{dim:s}});return a.push(f),f}),c=J9({inputs:l,backend:n,attrs:{axis:s}});return a.forEach(d=>n.disposeIntermediateTensorInfo(d)),c}const eDe={kernelName:jv,backendName:"webgl",kernelFunc:JRe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class tDe{constructor(e,n,r){this.variableNames=["x"],this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((c,d)=>c[0]+e[d]+c[1]);const s=e.length,o=On(s),i=n.map(c=>c[0]).join(","),a=n.map((c,d)=>c[0]+e[d]).join(","),l=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,s);if(s===1){this.userCode=`
        int start = ${i};
        int end = ${a};

        void main() {
          int outC = getOutputCoords();
          if (outC < start || outC >= end) {
            setOutput(value);
          } else {
            setOutput(getX(outC - start));
          }
        }
      `;return}this.userCode=`
      ${o} start = ${o}(${i});
      ${o} end = ${o}(${a});

      void main() {
        ${o} outC = getOutputCoords();
        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {
          setOutput(value);
        } else {
          ${o} coords = outC - start;
          setOutput(getX(${l}));
        }
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class nDe{constructor(e,n,r){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((b,w)=>b[0]+e[w]+b[1]);const s=e.length,o=On(s),i=n.map(b=>b[0]).join(","),a=n.map((b,w)=>b[0]+e[w]).join(","),l=ro("rc",s),c=ro("source",s),d=`${l[s-1]} < ${this.outputShape[s-1]}`,f=s===1?"source":`vec2(${c.slice(-2).join()})`,p=[`${o} rc = outputLoc;`,`${l[s-1]} += 1;
       if(${d}) {
      `,s===1?"":`}
       rc = outputLoc;
       ${l[s-2]} += 1;
       if(${l[s-2]} < ${this.outputShape[s-2]}) {`,s===1?"":`  ${l[s-1]} += 1;
         if(${d}) {`],g=s===1?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))";let x="";for(let b=0,w=s===1?2:4;b<w;b++)x+=`
        ${p[b]}
        if (${g}) {
          result[${b}] = float(value);
        } else {
          ${o} source = rc - start;
          result[${b}] = getChannel(getX(${c.join()}), ${f});
        }
      `;x+=s===1?"} ":"}}",this.userCode=`
      const ${o} start = ${o}(${i});
      const ${o} end = ${o}(${a});

      void main() {
        ${o} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${x}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mW=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{paddings:o,constantValue:i}=r;if(Te(s.shape)===0){const c=o.map((d,f)=>d[0]+s.shape[f]+d[1]);return X1({backend:n,attrs:{shape:c,value:i,dtype:s.dtype}})}const a=Ee().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new nDe(s.shape,o,i):new tDe(s.shape,o,i),l=[[i]];return n.runWebGLProgram(a,[s],s.dtype,l)},rDe={kernelName:zv,backendName:"webgl",kernelFunc:mW};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sDe=`
  if(a < 0.0 && floor(b) < b){
    return NAN;
  }
  if (b == 0.0) {
    return 1.0;
  }
  return (round(mod(b, 2.0)) != 1) ?
      pow(abs(a), b) : sign(a) * pow(abs(a), b);
`,oDe=`
  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.
  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));
  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);
  vec4 result = multiplier * pow(abs(a), b);

  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS
  bvec4 isExpZero = equal(b, vec4(0.0));
  result.r = isExpZero.r ? 1.0 : result.r;
  result.g = isExpZero.g ? 1.0 : result.g;
  result.b = isExpZero.b ? 1.0 : result.b;
  result.a = isExpZero.a ? 1.0 : result.a;

  bvec4 isNaN1 = lessThan(a, vec4(0.0));
  bvec4 isNaN2 = lessThan(floor(b), b);
  bvec4 isNaN = bvec4(isNaN1.x && isNaN2.x, isNaN1.y && isNaN2.y, isNaN1.z && isNaN2.z, isNaN1.w && isNaN2.w);
  `+vf+`
  return result;
`,iDe=Ts({opSnippet:sDe,packedOpSnippet:oDe}),aDe={kernelName:o1,backendName:"webgl",kernelFunc:iDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lDe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:o,keepDims:i}=r,a=s.shape.length,l=[],c=Zt(o,s.shape);let d=c;const f=fr(d,a);let p=s;f!=null&&(p=lo({inputs:{x:s},backend:n,attrs:{perm:f}}),d=$r(d.length,a),l.push(p)),Is("prod",d,a);let g;if(n.shouldExecuteOnCPU([p])){const x=n.texData.get(p.dataId).values,{outVals:b,outShape:w,outDtype:C}=iEe(p.shape,p.dtype,x,d);g=n.makeTensorInfo(w,C,b)}else{const[x,b]=ms(p.shape,d),w=Te(b),C=tt({inputs:{x:p},backend:n,attrs:{shape:[-1,w]}}),N=UA(s.dtype),k=Cf(C,N,"prod",n);g=tt({inputs:{x:k},backend:n,attrs:{shape:x}}),l.push(C),l.push(k)}if(i){l.push(g);const x=Dr(g.shape,c);g=tt({inputs:{x:g},backend:n,attrs:{shape:x}})}return l.forEach(x=>n.disposeIntermediateTensorInfo(x)),g}const cDe={kernelName:Wv,backendName:"webgl",kernelFunc:lDe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uDe(t){const{inputs:e,backend:n,attrs:r}=t,{paramsNestedSplits:s,paramsDenseValues:o,indices:i}=e,{outputRaggedRank:a}=r,l=s.map(C=>n.readSync(C.dataId)),c=s.map(C=>C.shape),d=n.readSync(o.dataId),f=n.readSync(i.dataId),[p,g,x]=aEe(l,c,d,o.shape,o.dtype,f,i.shape,a),b=p.map(C=>n.makeTensorInfo([C.length],"int32",C)),w=n.makeTensorInfo(x,o.dtype,g);return b.concat([w])}const dDe={kernelName:bA,backendName:"webgl",kernelFunc:uDe};/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fDe(t){const{inputs:e,backend:n}=t,{starts:r,limits:s,deltas:o}=e,i=n.readSync(r.dataId),a=n.readSync(s.dataId),l=n.readSync(o.dataId),[c,d]=lEe(i,r.shape,r.dtype,a,s.shape,l,o.shape),f=n.makeTensorInfo([c.length],"int32",c),p=n.makeTensorInfo([d.length],r.dtype,d);return[f,p]}const hDe={kernelName:wA,backendName:"webgl",kernelFunc:fDe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pDe(t){const{inputs:e,backend:n,attrs:r}=t,{shape:s,values:o,defaultValue:i,rowPartitionTensors:a}=e,{rowPartitionTypes:l}=r,c=n.readSync(s.dataId),d=n.readSync(o.dataId),f=n.readSync(i.dataId),p=a.map(w=>n.readSync(w.dataId)),g=a.map(w=>w.shape),[x,b]=cEe(c,s.shape,d,o.shape,o.dtype,f,i.shape,p,g,l);return n.makeTensorInfo(x,o.dtype,b)}const mDe={kernelName:vA,backendName:"webgl",kernelFunc:pDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gW=t=>{const{backend:e,attrs:n}=t,{start:r,stop:s,step:o,dtype:i}=n,a=uEe(r,s,o,i);return e.makeTensorInfo([a.length],i,a)},gDe={kernelName:CA,backendName:"webgl",kernelFunc:gW};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xDe="return 1.0 / x;",yDe=fn({opSnippet:xDe}),bDe={kernelName:i1,backendName:"webgl",kernelFunc:yDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wDe=la+`
  return (x < 0.0) ? 0.0 : x;
`,vDe=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,CDe=fn({opSnippet:wDe,packedOpSnippet:vDe}),SDe={kernelName:a1,backendName:"webgl",kernelFunc:CDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const NDe=la+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,EDe=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,IDe=fn({opSnippet:NDe,packedOpSnippet:EDe}),kDe={kernelName:l1,backendName:"webgl",kernelFunc:IDe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class TDe{constructor(e,n,r,s,o){this.variableNames=["A"],this.outputShape=[];const[i,a,l,c]=e;this.outputShape=[i,n,r,c];const d=[s&&n>1?a-1:a,s&&r>1?l-1:l],f=[s&&n>1?n-1:n,s&&r>1?r-1:r];let p;o?p="(vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC - vec2(0.5)":p="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${d[0]/f[0]},
          ${d[1]/f[1]});
      const vec2 inputShapeRC = vec2(${a}.0, ${l}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${p};

        // Compute the four integer indices.
        ivec2 sourceFloorRC = ivec2(max(sourceFracIndexRC, vec2(0.0)));
        ivec2 sourceCeilRC = ivec2(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);
        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);
        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);
        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);

        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);

        float top = topLeft + (topRight - topLeft) * fracRC.y;
        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;
        float newValue = top + (bottom - top) * fracRC.x;

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ADe{constructor(e,n,r,s,o){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[i,a,l,c]=e;this.outputShape=[i,n,r,c];const d=[s&&n>1?a-1:a,s&&r>1?l-1:l],f=[s&&n>1?n-1:n,s&&r>1?r-1:r];let p;o?p="(vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC - vec3(0.5)":p="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${d[0]/f[0]},
          ${d[1]/f[1]},
          ${d[1]/f[1]});
      const vec3 inputShapeRC = vec3(${a}.0, ${l}.0,
                                     ${l}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${p};

        // Compute the four integer indices.
        ivec3 sourceFloorRC = ivec3(max(sourceFracIndexRC, vec3(0.0)));
        ivec3 sourceCeilRC = ivec3(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${c-1};
        bool hasNextRow = coords.z < ${r-1};

        // In parallel, construct four corners for all four components in
        // packed 2x2 cell.
        vec4 topLeft = vec4(
          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 bottomLeft = vec4(
          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 topRight = vec4(
          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec4 bottomRight = vec4(
          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);

        vec4 top = mix(topLeft, topRight, fracRC.yyzz);
        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);
        vec4 newValue = mix(top, bottom, fracRC.x);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RDe(t){const{inputs:e,backend:n,attrs:r}=t,{images:s}=e,{alignCorners:o,halfPixelCenters:i,size:a}=r,[l,c]=a,d=Ee().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new ADe(s.shape,l,c,o,i):new TDe(s.shape,l,c,o,i);return n.runWebGLProgram(d,[s],"float32")}const DDe={kernelName:Gv,backendName:"webgl",kernelFunc:RDe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class $De{constructor(e,n,r){this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;const[,s,o]=n,[,i,a]=e,l=[r&&i>1?s-1:s,r&&a>1?o-1:o],c=[r&&i>1?i-1:i,r&&a>1?a-1:a],d=l[0]/c[0],f=l[1]/c[1],p=1/d,g=1/f,x=Math.ceil(p)*2+2,b=Math.ceil(g)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${d});
        const float widthScale = float(${f});

        const float invHeightScale = float(${p});
        const float invWidthScale = float(${g});

        const int winHeight = int(${x});
        const int winWidth = int(${b});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(startRLerp - float(winHeight / 2));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(startCLerp - float(winWidth / 2));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${i}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${a}) {
              continue;
            }

            float dxR = float(dyR) * heightScale;
            int topDxRIndex = int(floor(dxR));
            int bottomDxRIndex = int(min(ceil(dxR), ${s-1}.0));
            float dxRLerp = dxR - float(topDxRIndex);
            float inverseDxRLerp = 1.0 - dxRLerp;

            float dxC = float(dyC) * widthScale;
            int leftDxCIndex = int(floor(dxC));
            int rightDxCIndex = int(min(ceil(dxC), ${o-1}.0));
            float dxCLerp = dxC - float(leftDxCIndex);
            float inverseDxCLerp = 1.0 - dxCLerp;

            if (r == topDxRIndex && c == leftDxCIndex) {
              // topLeft
              accumulator +=
                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;
            }

            if (r == topDxRIndex && c == rightDxCIndex) {
              // topRight
              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;
            }

            if (r == bottomDxRIndex && c == leftDxCIndex) {
              // bottomLeft
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;
            }

            if (r == bottomDxRIndex && c == rightDxCIndex) {
              // bottomRight
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ODe(t){const{inputs:e,backend:n,attrs:r}=t,{images:s,dy:o}=e,{alignCorners:i}=r,a=new $De(o.shape,s.shape,i);return n.runWebGLProgram(a,[o],o.dtype)}const _De={kernelName:EA,backendName:"webgl",kernelFunc:ODe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class PDe{constructor(e,n,r,s,o){this.variableNames=["A"],this.outputShape=[];const[i,a,l,c]=e;this.outputShape=[i,n,r,c];const d=[s&&n>1?a-1:a,s&&r>1?l-1:l],f=[s&&n>1?n-1:n,s&&r>1?r-1:r],p=s?"0.5":"0.0";let g;o?g="max((vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC, vec2(0.0))":g="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${d[0]/f[0]},
          ${d[1]/f[1]});
      const vec2 inputShapeRC = vec2(${a}.0, ${l}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${g};

        // Compute the coordinators of nearest neighbor point.
        ivec2 sourceNearestRC = ivec2(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${p})));
        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class FDe{constructor(e,n,r,s,o){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[i,a,l,c]=e;this.outputShape=[i,n,r,c];const d=[s&&n>1?a-1:a,s&&r>1?l-1:l],f=[s&&n>1?n-1:n,s&&r>1?r-1:r],p=s?"0.5":"0.0";let g;o?g="max((vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC, vec3(0.0))":g="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${d[0]/f[0]},
          ${d[1]/f[1]},
          ${d[1]/f[1]});
      const vec3 inputShapeRC = vec3(${a}.0, ${l}.0,
                                     ${l}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${g};

        // Compute the coordinators of nearest neighbor point.
        ivec3 sourceNearestRC = ivec3(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${p})));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${c-1};
        bool hasNextRow = coords.z < ${r-1};

        vec4 newValue = vec4(
          getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d),
          hasNextCol ? getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d + 1) : 0.0);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MDe(t){const{inputs:e,backend:n,attrs:r}=t,{images:s}=e,{alignCorners:o,halfPixelCenters:i,size:a}=r,[l,c]=a,d=Ee().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new FDe(s.shape,l,c,o,i):new PDe(s.shape,l,c,o,i);return n.runWebGLProgram(d,[s],s.dtype)}const LDe={kernelName:Hv,backendName:"webgl",kernelFunc:MDe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class BDe{constructor(e,n,r){this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;const[,s,o]=n,[,i,a]=e,l=[r&&i>1?s-1:s,r&&a>1?o-1:o],c=[r&&i>1?i-1:i,r&&a>1?a-1:a],d=l[0]/c[0],f=l[1]/c[1],p=1/d,g=1/f,x=Math.ceil(p)*2+2,b=Math.ceil(g)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${d});
        const float widthScale = float(${f});

        const float invHeightScale = float(${p});
        const float invWidthScale = float(${g});

        const int winHeight = int(${x});
        const int winWidth = int(${b});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(floor(startRLerp - float(winHeight / 2)));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(floor(startCLerp - float(winWidth / 2)));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${i}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${a}) {
              continue;
            }

            float sourceFracRow =
              float(${l[0]}) *
                (float(dyR) / float(${c[0]}));

            float sourceFracCol =
                float(${l[1]}) *
                  (float(dyC) / float(${c[1]}));

            int sourceNearestRow = int(min(
                float(int(${s}) - 1),
                ${r} ? float(round(sourceFracRow)) :
                                  float(floor(sourceFracRow))));

            int sourceNearestCol = int(min(
                float(int(${o}) - 1),
                ${r} ? float(round(sourceFracCol)) :
                                  float(floor(sourceFracCol))));

            if (r == sourceNearestRow && c == sourceNearestCol) {
              accumulator += getDy(b, dyR, dyC, d);
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jDe(t){const{inputs:e,backend:n,attrs:r}=t,{images:s,dy:o}=e,{alignCorners:i}=r,a=new BDe(o.shape,s.shape,i);return n.runWebGLProgram(a,[o],o.dtype)}const zDe={kernelName:NA,backendName:"webgl",kernelFunc:jDe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class VDe{constructor(e,n){this.variableNames=["x"];const r=e.length;if(r>4)throw new Error(`WebGL backend: Reverse of rank-${r} tensor is not yet supported`);if(this.outputShape=e,r===1){this.userCode=`
        void main() {
          int coord = getOutputCoords();
          setOutput(getX(${e[0]} - coord - 1));
        }
      `;return}const s=a=>n.indexOf(a)!==-1&&e[a]!==1?`${e[a]} - coords[${a}] - 1`:`coords[${a}]`,o=e.map((a,l)=>s(l)).join(","),i=On(r);this.userCode=`
      void main() {
        ${i} coords = getOutputCoords();
        setOutput(getX(${o}));
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class WDe{constructor(e,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;const r=e.length;if(r>4)throw new Error(`WebGL backend: Reverse of rank-${r} tensor is not yet supported`);this.outputShape=e;const s=ro("rc",r),o=`${s[r-1]} + 1 < ${this.outputShape[r-1]}`,i=`${s[r-2]} + 1 < ${this.outputShape[r-2]}`,a=On(r);r===1?this.userCode=`
        void main(){
          int rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = getChannel(getX(${e[0]} - rc - 1),
            ${e[0]} - rc - 1);
          if(${o}){
              result.g = getChannel(getX(${e[0]} - (rc  + 1) - 1),
                ${e[0]} - (rc  + 1) - 1);
          }
          setOutput(result);
        }
      `:this.userCode=`
        void main() {
          ${a} rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = ${l(s.slice())};
          if(${o}){
            result.g = ${c(s.slice())};
          }
          if(${i}) {
            result.b = ${d(s.slice())};
            if(${o}) {
              result.a = ${f(s.slice())};
            }
          }
          setOutput(result);
        }
    `;function l(x){return p(x)}function c(x){return x[r-1]="("+x[r-1]+" + 1)",p(x)}function d(x){return x[r-2]="("+x[r-2]+" + 1)",p(x)}function f(x){return x[r-1]="("+x[r-1]+" + 1)",x[r-2]="("+x[r-2]+" + 1)",p(x)}function p(x){const b=e.map((N,k)=>g(k,x)),w=b.join(","),C=b.slice(-2).join(",");return`getChannel(getX(${w}), vec2(${C}))`}function g(x,b){return n.indexOf(x)!==-1&&e[x]!==1?`${e[x]} - ${b[x]} - 1`:`${b[x]}`}}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UDe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{dims:o}=r,i=s.shape.length,a=Zt(o,s.shape);if(i===0)return Jo({inputs:{x:s},backend:n});const l=Ee().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new WDe(s.shape,a):new VDe(s.shape,a);return n.runWebGLProgram(l,[s],s.dtype)}const HDe={kernelName:qv,backendName:"webgl",kernelFunc:UDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class GDe{constructor(e,n){this.variableNames=["Image"],this.outputShape=[],this.customUniforms=[{name:"params",type:"vec4"}];const r=e[1],s=e[2];this.outputShape=e;let o="";typeof n=="number"?o=`float outputValue = ${n.toFixed(2)};`:o=`
        vec3 fill = vec3(${n.join(",")});
        float outputValue = fill[coords[3]];`,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];
          int y = coords[1];
          float coordXFloat = (float(x) - params[0]) * params[3] -
            (float(y) - params[1]) * params[2];
          float coordYFloat = (float(x) - params[0]) * params[2] +
            (float(y) - params[1]) * params[3];
          int coordX = int(round(coordXFloat + params[0]));
          int coordY = int(round(coordYFloat + params[1]));
          ${o}
          if(coordX >= 0 && coordX < ${s} && coordY >= 0 && coordY < ${r}) {
            outputValue = getImage(coords[0], coordY, coordX, coords[3]);
          }
          setOutput(outputValue);
        }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qDe={kernelName:VA,backendName:"webgl",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{image:r}=t,{radians:s,fillValue:o,center:i}=e,a=n,l=new GDe(r.shape,o),[c,d]=K3(i,r.shape[1],r.shape[2]),f=[[c,d,Math.sin(s),Math.cos(s)]];return a.runWebGLProgram(l,[r],r.dtype,f)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const XDe=`
  // OpenGL ES does not support round function.
  // The algorithm is based on banker's rounding.
  float base = floor(x);
  if ((x - base) < 0.5) {
    return floor(x);
  } else if ((x - base) > 0.5) {
    return ceil(x);
  } else {
    if (mod(base, 2.0) == 0.0) {
      return base;
    } else {
      return base + 1.0;
    }
  }
`,KDe=fn({opSnippet:XDe}),YDe={kernelName:c1,backendName:"webgl",kernelFunc:KDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ZDe="return inversesqrt(x);",QDe=fn({opSnippet:ZDe,cpuKernelImpl:dEe}),JDe={kernelName:u1,backendName:"webgl",kernelFunc:QDe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class uD{constructor(e,n,r,s,o,i,a=!0,l=!1){this.variableNames=["updates","indices","defaultValue"],this.outputShape=i;const c=On(o.length),d=On(i.length);let f="";r===1?f="i":r===2&&(f="i, j");const p=`getIndices(${f})`;let g="";s===1?g="i":s===2&&(g="i, coords[1]");const x=`getUpdates(${g})`;let b="";l&&(b="coords[0], coords[1]");const w=`getDefaultValue(${b})`,C=n>1?"strides[j]":"strides";this.userCode=`
        ${c} strides = ${c}(${o});

        void main() {
          ${d} coords = getOutputCoords();
          float sum = 0.0;
          bool found = false;
          for (int i = 0; i < ${e}; i++) {
            int flattenedIndex = 0;
            for (int j = 0; j < ${n}; j++) {
              int index = round(${p});
              flattenedIndex += index * ${C};
            }
            if (flattenedIndex == coords[0]) {
              sum += ${x};
              found = true;
            }
          }
          setOutput(mix(${w}, sum, float(found)));
        }
      `}}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class e$e{constructor(e,n,r,s,o,i,a=!0,l=!1){this.variableNames=["updates","indices","defaultValue"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=i;const c=On(o.length),d=On(i.length);let f="";r===1?f="i":r===2&&(f="i, j");const p=`getIndices(${f})`;let g="";s===1?g="i":s===2&&(g="i, coords[1]");const x=`getUpdates(${g})`;let b="";l&&(b="coords[0], coords[1]");const w=`getDefaultValue(${b})`,C=n>1?"strides[j]":"strides",N=n>1?"strides[j + 1]":"strides";this.userCode=`
        ${c} strides = ${c}(${o});

        void main() {
          ${d} coords = getOutputCoords();
          vec4 sum = vec4(0.);
          vec4 found = vec4(0.);
          for (int i = 0; i < ${e}; i+=2) {
            ivec2 flattenedIndex = ivec2(0);
            for (int j = 0; j < ${n}; j+=2) {
              ivec4 index = round(${p});
              flattenedIndex += index.xz * ${C};
              if (j + 1 < ${n}) {
                flattenedIndex += index.yw * ${N};
              }
            }
            if (flattenedIndex[0] == coords[0] || flattenedIndex[1] == coords[0] ||
                flattenedIndex[0] == coords[0] + 1 || flattenedIndex[1] == coords[0] + 1) {
              vec4 updVals = ${x};
              if (flattenedIndex[0] == coords[0]) {
                sum.xy += updVals.xy;
                found.xy = vec2(1.);
              } else if (flattenedIndex[0] == coords[0] + 1) {
                sum.zw += updVals.xy;
                found.zw = vec2(1.);
              }
              if (flattenedIndex[1] == coords[0]) {
                sum.xy += updVals.zw;
                found.xy = vec2(1.);
              } else if (flattenedIndex[1] == coords[0] + 1) {
                sum.zw += updVals.zw;
                found.zw = vec2(1.);
              }
            }
          }
          setOutput(mix(${w}, sum, found));
        }
      `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function t$e(t){const{inputs:e,backend:n,attrs:r}=t,{indices:s,updates:o}=e,{shape:i}=r,{sliceRank:a,numUpdates:l,sliceSize:c,strides:d,outputSize:f}=mf(o,s,i),p=[f/c,c];if(f===0)return n.makeTensorInfo(i,s.dtype);const g=tt({inputs:{x:s},backend:n,attrs:{shape:[l,a]}}),x=tt({inputs:{x:o},backend:n,attrs:{shape:[l,c]}}),b=n.makeTensorInfo([],"float32",new Float32Array([0]));let w;Ee().getBool("WEBGL_PACK")?w=new e$e(l,a,g.shape.length,x.shape.length,d,p):w=new uD(l,a,g.shape.length,x.shape.length,d,p);const C=n.runWebGLProgram(w,[x,g,b],x.dtype),N=tt({inputs:{x:C},backend:n,attrs:{shape:i}});return n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(x),n.disposeIntermediateTensorInfo(C),n.disposeIntermediateTensorInfo(b),N}const n$e={kernelName:IA,backendName:"webgl",kernelFunc:t$e};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class r$e{constructor(e,n,r,s){this.variableNames=["sortedSequence","values"],this.customUniforms=[{name:"numInputs",type:"int"}],this.outputShape=[e,r];const o="while (left < right) {",i=`for (int i = 0; i < ${Math.ceil(Math.log2(n+1))}; ++i) { if (left >= right) break;`,a=Ee().getNumber("WEBGL_VERSION")===2?o:i,l=s==="left"?"<":"<=";this.userCode=`
       int findBound(int batch, float value) {
         int left = 0;
         int right = numInputs;
         int mid;
         ${a}
           mid = (left + right) / 2;
           if (getSortedSequence(batch, mid) ${l} value) {
             left = mid + 1;
           } else {
             right = mid;
           }
         }
         return right;
       }

       void main() {
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int valueIndex = coords[1];

         float value = getValues(batch, valueIndex);

         setOutput(float(findBound(batch, value)));
       }
     `}}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function s$e(t){const{inputs:e,backend:n,attrs:r}=t,{sortedSequence:s,values:o}=e,{side:i}=r,a=new r$e(s.shape[0],s.shape[1],o.shape[1],i),l=[[s.shape[1]]];return n.runWebGLProgram(a,[s,o],"int32",l)}const o$e={kernelName:TA,backendName:"webgl",kernelFunc:s$e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class i$e{constructor(e,n,r){this.variableNames=["c","a","b"],this.outputShape=n;let s,o;if(r>4)throw Error(`Where for rank ${r} is not yet supported`);if(r===1)o="resRC",s="resRC";else{const a=["resRC.x","resRC.y","resRC.z","resRC.w"],l=[],c=[];for(let d=0;d<n.length;d++)c.push(`${a[d]}`),d<e&&l.push(`${a[d]}`);s=l.join(),o=c.join()}const i=On(r);this.userCode=`
      void main() {
        ${i} resRC = getOutputCoords();
        float cVal = getC(${s});
        if (cVal >= 1.0) {
          setOutput(getA(${o}));
        } else {
          setOutput(getB(${o}));
        }
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function a$e(t){const{inputs:e,backend:n}=t,{condition:r,t:s,e:o}=e,i=new i$e(r.shape.length,s.shape,s.shape.length);return n.runWebGLProgram(i,[r,s,o],Xo(s.dtype,o.dtype))}const l$e={kernelName:Xv,backendName:"webgl",kernelFunc:a$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const c$e=`
  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.
  // see: https://arxiv.org/abs/1706.02515
  float scaleAlpha = ${A2};
  float scale = ${R2};
  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);
`,u$e=fn({opSnippet:c$e}),d$e={kernelName:d1,backendName:"webgl",kernelFunc:u$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const f$e=Wp+`
  return 1.0 / (1.0 + exp(-1.0 * x));
`,h$e=`
  vec4 result = 1.0 / (1.0 + exp(-1.0 * x));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,p$e=fn({opSnippet:f$e,packedOpSnippet:h$e,cpuKernelImpl:hEe}),m$e={kernelName:m1,backendName:"webgl",kernelFunc:p$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const g$e=`
  if (isnan(x)) { return 0.0; }
  return sign(x);
`,x$e=fn({opSnippet:g$e}),y$e={kernelName:p1,backendName:"webgl",kernelFunc:x$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const b$e=Wp+`
  return sin(x);
`,w$e=`
  vec4 result = sin(x);
  bvec4 isNaN = isnan(x);
  ${vf}
  return result;
`,v$e=fn({opSnippet:b$e,packedOpSnippet:w$e}),C$e={kernelName:f1,backendName:"webgl",kernelFunc:v$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const S$e=`
  float e2x = exp(x);
  return (e2x - 1.0 / e2x) / 2.0;
`,N$e=fn({opSnippet:S$e}),E$e={kernelName:h1,backendName:"webgl",kernelFunc:N$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const I$e=`
  float epsilon = 1.1920928955078125e-7;
  float threshold = log(epsilon) + 2.0;

  bool too_large = x > -threshold;
  bool too_small = x < threshold;

  float result;
  float exp_x = exp(x);

  if (too_large){
    result = x;
  }
  else if (too_small){
    result = exp_x;
  }
  else{
    result = log(exp_x + 1.0);
  }
  return result;
`,k$e=fn({opSnippet:I$e}),T$e={kernelName:g1,backendName:"webgl",kernelFunc:k$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const A$e=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{blockShape:o,paddings:i}=r;Y(s.shape.length<=4,()=>"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet");const a=o.reduce((C,N)=>C*N),l=[[0,0]];l.push(...i);for(let C=1+o.length;C<s.shape.length;++C)l.push([0,0]);const c=[],d=mW({inputs:{x:s},backend:n,attrs:{paddings:l,constantValue:0}}),f=$1(d.shape,o,a,!1),p=O1(f.length,o.length,!1),g=_1(d.shape,o,a,!1),x=tt({inputs:{x:d},backend:n,attrs:{shape:f}}),b=lo({inputs:{x},backend:n,attrs:{perm:p}}),w=tt({inputs:{x:b},backend:n,attrs:{shape:g}});return c.push(d),c.push(x),c.push(b),c.forEach(C=>n.disposeIntermediateTensorInfo(C)),w},R$e={kernelName:Zv,backendName:"webgl",kernelFunc:A$e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function D$e(t){const{inputs:e,backend:n}=t,{indices:r,values:s,denseShape:o,defaultValue:i}=e;if(o.shape.length!==1)throw new Error(`Dense shape must be a vector, saw:
         ${o.shape}`);if(r.shape.length!==2)throw new Error(`Indices must be a matrix, saw:
         ${r.shape}`);if(s.shape.length!==1)throw new Error(`Values must be a vector, saw:
         ${s.shape}`);if(i.shape.length!==0)throw new Error(`Default value must be a scalar, saw:
        ${i.shape}`);const a=n.readSync(r.dataId),l=n.readSync(s.dataId),c=n.readSync(o.dataId),d=n.readSync(i.dataId)[0],[f,p,g,x,b]=mEe(a,r.shape,r.dtype,l,s.dtype,c,d);return[n.makeTensorInfo(p,r.dtype,f),n.makeTensorInfo([p[0]],s.dtype,g),n.makeTensorInfo([x.length],"bool",new Uint8Array(x.map(w=>Number(w)))),n.makeTensorInfo([b.length],r.dtype,new Int32Array(b))]}const $$e={kernelName:AA,backendName:"webgl",kernelFunc:D$e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function O$e(t){const{inputs:e,backend:n}=t,{inputIndices:r,inputShape:s,newShape:o}=e;if(r.shape.length!==2)throw new Error(`Input indices should be a matrix but received shape ${r.shape}`);if(s.shape.length!==1)throw new Error(`Input shape should be a vector but received shape ${s.shape}`);if(o.shape.length!==1)throw new Error(`Target shape should be a vector but received shape ${o.shape}`);const i=Array.from(n.readSync(s.dataId)),a=n.readSync(r.dataId),l=Array.from(n.readSync(o.dataId)),[c,d,f]=gEe(a,r.shape,r.dtype,i,l);return[n.makeTensorInfo(d,r.dtype,c),n.makeTensorInfo([f.length],o.dtype,new Int32Array(f))]}const _$e={kernelName:RA,backendName:"webgl",kernelFunc:O$e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function P$e(t){const{inputs:e,backend:n}=t,{data:r,indices:s,segmentIds:o}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(s.shape.length!==1)throw new Error(`Indices should be a vector but received shape
              ${s.shape}`);if(o.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
              ${o.shape}`);const i=n.readSync(r.dataId),a=n.readSync(s.dataId),l=n.readSync(o.dataId),[c,d]=j9(i,r.shape,r.dtype,a,l,!0);return n.makeTensorInfo(d,r.dtype,c)}const F$e={kernelName:DA,backendName:"webgl",kernelFunc:P$e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function M$e(t){const{inputs:e,backend:n}=t,{data:r,indices:s,segmentIds:o}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(s.shape.length!==1)throw new Error(`Indices should be a vector but received shape
             ${s.shape}`);if(o.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
             ${o.shape}`);const i=n.readSync(r.dataId),a=n.readSync(s.dataId),l=n.readSync(o.dataId),[c,d]=j9(i,r.shape,r.dtype,a,l);return n.makeTensorInfo(d,r.dtype,c)}const L$e={kernelName:$A,backendName:"webgl",kernelFunc:M$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function B$e(t){const{inputs:e,backend:n,attrs:r}=t,{sparseIndices:s,sparseValues:o,defaultValue:i}=e,{outputShape:a}=r,{sliceRank:l,numUpdates:c,sliceSize:d,strides:f,outputSize:p}=mf(o,s,a),g=!1;if(o.dtype==="string"){const C=n.bufferSync(s),N=n.bufferSync(o),k=du(n.readSync(i.dataId)[0]),I=fEe(C,N,a,p,d,c,l,f,k,g);return n.makeTensorInfo(a,I.dtype,I.values)}const x=new uD(c,l,s.shape.length,o.shape.length,f,[p,1],g),b=n.runWebGLProgram(x,[o,s,i],o.dtype),w=tt({inputs:{x:b},backend:n,attrs:{shape:a}});return n.disposeIntermediateTensorInfo(b),w}const j$e={kernelName:OA,backendName:"webgl",kernelFunc:B$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function z$e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{numOrSizeSplits:o,axis:i}=r,a=Zt(i,s.shape)[0],l=uR(s,o,a),c=s.shape.length,d=new Array(c).fill(0),f=s.shape.slice();return l.map(p=>{const g=[...f];g[a]=p;const x=Up({inputs:{x:s},backend:n,attrs:{begin:d,size:g}});return d[a]+=p,x})}const V$e={kernelName:Qv,backendName:"webgl",kernelFunc:z$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uP="return sqrt(x);",W$e=fn({opSnippet:uP,packedOpSnippet:uP,cpuKernelImpl:xEe}),U$e={kernelName:x1,backendName:"webgl",kernelFunc:W$e};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const H$e="return x * x;",G$e=fn({opSnippet:H$e}),q$e={kernelName:_A,backendName:"webgl",kernelFunc:G$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dP="return (a - b) * (a - b);",X$e=Ts({opSnippet:dP,packedOpSnippet:dP}),K$e={kernelName:y1,backendName:"webgl",kernelFunc:X$e};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Y$e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e;if(s.dtype!=="string")throw new Error("Input must be of datatype string");const o=n.readSync(s.dataId),i=lc(o),a=yEe(i,"string",r);return n.makeTensorInfo(s.shape,"string",a)}const Z$e={kernelName:e2,backendName:"webgl",kernelFunc:Y$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Q$e({inputs:t,attrs:e,backend:n}){const{x:r}=t,s=la+`
    return x > 0.0 ? 1.0 : float(${e.alpha});
  `,o=new hl(r.shape,s);return n.runWebGLProgram(o,[r],r.dtype)}const J$e={kernelName:S1,backendName:"webgl",kernelFunc:Q$e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class eOe{constructor(e,n,r){this.variableNames=["x"],this.outputShape=r;const s=r.length,o=On(r.length),i=On(r.length);let a="";if(s===1)a="coords * strides + begin";else{let l=0;a=r.map((c,d)=>(l++,r.length===1?`coords * strides[${d}] + begin[${d}]`:`coords[${l-1}] * strides[${d}] + begin[${d}]`)).join(",")}this.userCode=`
      ${o} begin = ${o}(${e});
      ${o} strides = ${o}(${n});

      void main() {
        ${i} coords = getOutputCoords();
        setOutput(getX(${a}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tOe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{begin:o,end:i,strides:a,beginMask:l,endMask:c,ellipsisMask:d,newAxisMask:f,shrinkAxisMask:p}=r,{finalShapeSparse:g,finalShape:x,isIdentity:b,sliceDim0:w,isSimpleSlice:C,begin:N,end:k,strides:I}=G3(s.shape,o,i,a,l,c,d,f,p);let R;if(b)R=tt({inputs:{x:s},backend:n,attrs:{shape:x}});else if(w||C){Y(s.shape.length>=1,()=>`Input must have rank at least 1, got: ${s.shape.length}`);const O=W3(N,k,I),F=Up({inputs:{x:s},backend:n,attrs:{begin:N,size:O}});R=tt({inputs:{x:F},backend:n,attrs:{shape:x}}),n.disposeIntermediateTensorInfo(F)}else if(n.shouldExecuteOnCPU([s])){const F=n.readSync(s.dataId),M=Gt(s.shape,s.dtype,F),_=bEe(g,M,I,N);R=n.makeTensorInfo(x,s.dtype,_.values)}else{const F=new eOe(N,I,g);R=n.runWebGLProgram(F,[s],s.dtype)}const $=tt({inputs:{x:R},backend:n,attrs:{shape:x}});return n.disposeIntermediateTensorInfo(R),$}const nOe={kernelName:PA,backendName:"webgl",kernelFunc:tOe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rOe(t){const{inputs:e,backend:n,attrs:r}=t,{separator:s,nGramWidths:o,leftPad:i,rightPad:a,padWidth:l,preserveShortSequences:c}=r,{data:d,dataSplits:f}=e,p=n.readSync(d.dataId),g=n.readSync(f.dataId),[x,b]=wEe(p,g,s,o,i,a,l,c);return[n.makeTensorInfo([x.length],"string",x),n.makeTensorInfo(f.shape,"int32",b)]}const sOe={kernelName:FA,backendName:"webgl",kernelFunc:rOe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oOe(t){const{inputs:e,backend:n,attrs:r}=t,{skipEmpty:s}=r,{input:o,delimiter:i}=e;if(o.dtype!=="string")throw new Error("Input must be of datatype string");if(o.shape.length!==1)throw new Error(`Input must be a vector, got shape: ${o.shape}`);if(i.shape.length!==0)throw new Error(`Delimiter must be a scalar, got shape: ${i.shape}`);const a=n.readSync(o.dataId),l=n.readSync(i.dataId)[0],[c,d,f]=vEe(a,l,s),p=d.length;return[n.makeTensorInfo([p,2],"int32",c),n.makeTensorInfo([p],"string",d),n.makeTensorInfo([2],"int32",new Int32Array(f))]}const iOe={kernelName:MA,backendName:"webgl",kernelFunc:oOe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aOe(t){const{inputs:e,backend:n,attrs:r}=t,{numBuckets:s}=r,{input:o}=e;if(o.dtype!=="string")throw new Error("Input must be of datatype string");if(s<=0)throw new Error("Number of buckets must be at least 1");const i=n.readSync(o.dataId),a=CEe(i,s);return n.makeTensorInfo(o.shape,"int32",a)}const lOe={kernelName:LA,backendName:"webgl",kernelFunc:aOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cOe="return tan(x);",uOe=fn({opSnippet:cOe}),dOe={kernelName:w1,backendName:"webgl",kernelFunc:uOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fOe=`
  float e2x = exp(-2.0 * abs(x));
  return sign(x) * (1.0 - e2x) / (1.0 + e2x);
`,hOe=fn({opSnippet:fOe}),pOe={kernelName:v1,backendName:"webgl",kernelFunc:hOe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mOe(t){const{inputs:e,backend:n,attrs:r}=t,{tensor:s,indices:o,updates:i}=e,{sliceRank:a,numUpdates:l,sliceSize:c,strides:d,outputSize:f}=mf(i,o,s.shape),p=[f/c,c];if(f===0)return n.makeTensorInfo(s.shape,o.dtype);const g=tt({inputs:{x:o},backend:n,attrs:{shape:[l,a]}}),x=tt({inputs:{x:i},backend:n,attrs:{shape:[l,c]}}),b=tt({inputs:{x:s},backend:n,attrs:{shape:p}}),w=new uD(l,a,g.shape.length,x.shape.length,d,p,!1,!0),C=n.runWebGLProgram(w,[x,g,b],b.dtype),N=tt({inputs:{x:C},backend:n,attrs:{shape:s.shape}});return n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(x),n.disposeIntermediateTensorInfo(b),n.disposeIntermediateTensorInfo(C),N}const gOe={kernelName:kA,backendName:"webgl",kernelFunc:mOe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class xOe{constructor(e,n){this.variableNames=["A"];const r=new Array(e.length);for(let i=0;i<r.length;i++)r[i]=e[i]*n[i];this.outputShape=r,this.rank=r.length;const s=On(this.rank),o=yOe(e);this.userCode=`
      void main() {
        ${s} resRC = getOutputCoords();
        setOutput(getA(${o}));
      }
    `}}function yOe(t){const e=t.length;if(e>5)throw Error(`Tile for rank ${e} is not yet supported`);if(e===1)return`imod(resRC, ${t[0]})`;const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],r=[];for(let s=0;s<t.length;s++)r.push(`imod(${n[s]}, ${t[s]})`);return r.join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xW(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{reps:o}=r;if(s.dtype==="string"||s.shape.length>5){const l=n.readSync(s.dataId),c=s.dtype==="string"?l.map(p=>du(p)):l,d=Gt(s.shape,s.dtype,c),f=NEe(d,o);return n.makeTensorInfo(f.shape,f.dtype,f.values)}const i=new xOe(s.shape,o);return n.runWebGLProgram(i,[s],s.dtype)}const bOe={kernelName:C1,backendName:"webgl",kernelFunc:xW};class wOe{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"negativeInf",type:"float"},{name:"dir",type:"int"},{name:"inc",type:"int"}],this.outputShape=e,this.userCode=`
       void main() {
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int elemIdx = coords[1];

         // We compare elements pair-wise within a group of size 2 * inc.
         // The comparing rule for each group alternates between ascending
         // and descending. Within each group, we compare each pair at
         // positions i and i+inc. To decide whether an element at position i
         // is x0 or x1, we mod it by 2 * inc, if the result is smaller than
         // inc, it is in the first half of the group, we denote it as x0,
         // otherwise we denote it as x1.
         // For example, as shown in the Bitonic top K paper referenced above,
         // Figure5(a) shows that element[1] is in the
         // second half of the group when group size is 2, but it is in the
         // first half of the group when group size is 4.

         bool isFirstInPair = imod(elemIdx, 2 * inc) < inc;
         int i = isFirstInPair ? elemIdx : elemIdx - inc;

         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));
         int i1 = firstPass == 1 ? i + inc : int(getIndices(batch, i + inc));
         float x0 = i0 < n ? getX(batch, i0) : negativeInf;
         float x1 = i1 < n ? getX(batch, i1) : negativeInf;

         // Denotes which direction indices are in (ascending or descending).
         bool reverse = imod(elemIdx, 2 * dir) >= dir;
         bool isGreater = x0 > x1 || (x0 == x1 && i1 > i0);
         if (reverse == isGreater) { // Elements in opposite order of direction
           int iTemp = i0;
           i0 = i1;
           i1 = iTemp;
         }
         if (isFirstInPair) {
            setOutput(float(i0));
         } else {
            setOutput(float(i1));
         }
       }
     `}}class vOe{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"k",type:"int"}],this.outputShape=e,this.userCode=`
    void main() {
         // Takes max of indices (0, k), (1, k + 1), (2, k + 2) ...
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int elemIdx = coords[1];

         // The output size is half of the previous size.
         // If the previous sequence is | | | | _ _ _ _  | | | |  _ _ _ _ (k=4),
         // we only need to output the indices at positions |, the indices at
         // positions _ can be thrown away, see Figure5(b) After Phase 2
         // (Merge phase) in the Bitonic Top K paper referenced above.
         // For example, the paper shows we only need to output the orange bars.
         // The output sequence should look like this | | | | | | | |.
         // Because the sequence is halved, to map the output index back
         // to the previous sequence to find the corresponding value,
         // we need to double the index. When we double the index,
         // we basically interpolate a position, so 2i looks like
         // | _ | _ | _ | _ | _ | _ | _. We move the | to the first k position
         // of each 2k positions by - elemIdx % k. E.g. for output at
         // index 4,5,6,7, we want to get the corresponding element at
         // original index 8,9,10,11, for output at index 8,9,10,11,
         // we want to get the corresponding element at original index
         // 16,17,18,19, so on and so forth.

         int i = elemIdx < k ? elemIdx : (elemIdx * 2 - imod(elemIdx, k));
         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));
         int i1 = firstPass == 1 ? i + k : int(getIndices(batch, i + k));

         float x0 = getX(batch, i0);
         float x1 = i1 < n ? getX(batch, i1) : x0;

         setOutput(x0 >= x1 ? float(i0) : float(i1));
       }
     `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yu(t,e){e!==null&&t.disposeIntermediateTensorInfo(e)}function fP(t){let e=1;for(;e<t;)e*=2;return e}function COe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{k:o,sorted:i}=r,a=Ee().getNumber("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD"),l=Ee().getNumber("TOPK_K_CPU_HANDOFF_THRESHOLD"),c=s.shape,d=c[c.length-1];if(n.shouldExecuteOnCPU([s])||d<a||o>l){const _=n.readSync(s.dataId),[V,B]=EEe(_,c,s.dtype,o,i);return[n.makeTensorInfo(V.shape,V.dtype,V.values),n.makeTensorInfo(B.shape,B.dtype,B.values)]}if(o===0)return c[c.length-1]=0,[n.makeTensorInfo(c,s.dtype,[]),n.makeTensorInfo(c,"int32",[])];if(d===1)return[s,X1({attrs:{shape:c,dtype:"int32",value:0},backend:n})];const f=n.texData.get(s.dataId),p=f!==null&&f.isPacked,g=p?n.unpackTensor(s):s,b=Te(c)/d,w=tt({inputs:{x:g},attrs:{shape:[b,d]},backend:n});p&&Yu(n,g);const C=fP(o),N=fP(d);let k=null;const I=()=>k===null?[w,w]:[w,k],R=(_,V,B)=>{const W=I(),q=new wOe(B),G=[[d],[k===null?1:0],[Number.NEGATIVE_INFINITY],[_],[V]],Z=k;k=n.runWebGLProgram(q,W,"int32",G),Yu(n,Z)};for(let _=1;_<C;_*=2){const V=_*2;for(let B=_;B>=1;B/=2)R(V,B,[b,N])}for(let _=N;_>C;_/=2){const V=I(),B=new vOe([b,_/2]),q=[[d],[k===null?1:0],[C]],j=k;k=n.runWebGLProgram(B,V,"int32",q),Yu(n,j);const G=C/2,Z=G*2;for(let J=G;J>=1;J/=2)R(Z,J,k.shape)}let $=k;k=Up({inputs:{x:k},backend:n,attrs:{begin:0,size:[b,o]}}),Yu(n,$);let O=cW({inputs:{x:w,indices:k},backend:n,attrs:{axis:1,batchDims:1}});Yu(n,w);const F=c.slice(0,-1);F.push(o),$=k,k=tt({inputs:{x:k},attrs:{shape:F},backend:n}),Yu(n,$);const M=O;return O=tt({inputs:{x:O},attrs:{shape:F},backend:n}),Yu(n,M),[O,k]}const SOe={kernelName:BA,backendName:"webgl",kernelFunc:COe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class NOe{constructor(e,n,r,s,o,i){this.variableNames=["Image","Transforms"],this.outputShape=i;const a=r==="nearest"?1:2;let l;switch(s){case"constant":l=1;break;case"reflect":l=2;break;case"wrap":l=3;break;case"nearest":l=4;break;default:l=1;break}this.userCode=`
            float mapCoord(float outCoord, float len) {
              float inCoord = outCoord;
              if(${l} == 2) {
                if (inCoord < 0.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz2 = 2.0 * len;
                    if (inCoord < sz2) {
                      inCoord = sz2 * float(int(float(-inCoord / sz2))) +
                      inCoord;
                    }
                    inCoord = inCoord < -len ? inCoord + sz2 : -inCoord - 1.0;
                  }
                } else if (inCoord > len - 1.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz2 = 2.0 * len;
                    inCoord -= sz2 * float(int(float(inCoord / sz2)));
                    if (inCoord >= len) {
                      inCoord = sz2 - inCoord - 1.0;
                    }
                  }
                }
                return clamp(inCoord, 0.0, len - 1.0);
              } else if (${l} == 3) {
                if (inCoord < 0.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz = len - 1.0;
                    inCoord += len * (float(int(float(-inCoord / sz))) + 1.0);
                  }
                } else if (inCoord > len - 1.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz = len - 1.0;
                    inCoord -= len * float(int(float(inCoord / sz)));
                  }
                }
                return clamp(inCoord, 0.0, len - 1.0);
              } else if (${l} == 4) {
                return clamp(outCoord, 0.0, len - 1.0);
              } else {
                return outCoord;
              }
            }

            float readWithFillValue(int batch, int coordY, int coordX,
              int channel) {
              float outputValue;
              if (0 <= coordY && coordY < ${e} && 0 <= coordX && coordX < ${n}) {
                  outputValue = getImage(batch, coordY, coordX, channel);
              } else {
                outputValue = float(${o});
              }
              return outputValue;
            }

            void main() {
              ivec4 coords = getOutputCoords();
              float outputValue;
              int batch = coords[0];
              int x = coords[2];
              int y = coords[1];
              int channel = coords[3];
              float xf = float(x);
              float yf = float(y);
              float a1 = getTransforms(batch, 0);
              float a2 = getTransforms(batch, 1);
              float a3 = getTransforms(batch, 2);
              float b1 = getTransforms(batch, 3);
              float b2 = getTransforms(batch, 4);
              float b3 = getTransforms(batch, 5);
              float c1 = getTransforms(batch, 6);
              float c2 = getTransforms(batch, 7);
              float projection = c1 * xf + c2 * yf + 1.0;
              if (projection == 0.0) {
                outputValue = float(${o});
              } else {
                float inX = (a1 * xf + a2 * yf + a3) / projection;
                float inY = (b1 * xf + b2 * yf + b3) / projection;
                float mapX = mapCoord(inX, float(${n}));
                float mapY = mapCoord(inY, float(${e}));

                if (${a} == 1) {
                  int coordY = int(round(mapY));
                  int coordX = int(round(mapX));
                  outputValue = readWithFillValue(batch, coordY, coordX,
                    channel);
                } else {
                  float yFloor = floor(mapY);
                  float xFloor = floor(mapX);
                  float yCeil = yFloor + 1.0;
                  float xCeil = xFloor + 1.0;
                  float valueYFloor = (xCeil - mapX) *
                  readWithFillValue(batch, int(yFloor), int(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, int(yFloor), int(xCeil), channel);
                  float valueYCeil = (xCeil - mapX) *
                  readWithFillValue(batch, int(yCeil), int(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, int(yCeil), int(xCeil), channel);
                  outputValue = (yCeil - mapY) * valueYFloor +
                  (mapY - yFloor) * valueYCeil;
                }
              }
              setOutput(outputValue);
            }
        `}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EOe(t){const{inputs:e,backend:n,attrs:r}=t,{image:s,transforms:o}=e,{interpolation:i,fillMode:a,fillValue:l,outputShape:c}=r,[d,f,p,g]=s.shape,[x,b]=c??[f,p],w=[d,x,b,g],C=new NOe(f,p,i,a,l,w);return n.runWebGLProgram(C,[s,o],"float32")}const IOe={kernelName:jA,backendName:"webgl",kernelFunc:EOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kOe(t){const{inputs:e,attrs:n,backend:r}=t,{axis:s}=n,{x:o}=e;H1(o,"unique"),console.warn("WARNING: ","UI might be locked temporarily as data is being downloaded");const i=r.readSync(o.dataId),{outputValues:a,outputShape:l,indices:c}=IEe(i,s,o.shape,o.dtype);return[r.makeTensorInfo(l,o.dtype,a),r.makeTensorInfo([c.length],"int32",c)]}const TOe={kernelName:zA,backendName:"webgl",kernelFunc:kOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function AOe(t){const{inputs:e,backend:n,attrs:r}=t,{value:s}=e;let{axis:o}=r;o<0&&(o+=s.shape.length);const i=s,a=i.shape.length,l=s.shape[o],c=new Array(a-1);let d=0;for(let b=0;b<a;b++)b!==o&&(c[d++]=i.shape[b]);const f=[],p=new Array(a).fill(0),g=i.shape.slice();g[o]=1;const x=new Array(l);for(let b=0;b<x.length;b++){p[o]=b;const w=Up({inputs:{x:i},backend:n,attrs:{begin:p,size:g}}),C=tt({inputs:{x:w},backend:n,attrs:{shape:c}});x[b]=C,f.push(w)}return f.forEach(b=>n.disposeIntermediateTensorInfo(b)),x}const ROe={kernelName:t2,backendName:"webgl",kernelFunc:AOe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class DOe{constructor(e,n){this.variableNames=["x","segmentIds"];const r=e.windowSize,s=e.batchSize,o=e.inSize,i=e.numSegments,a=i*Math.ceil(o/r);this.outputShape=[s,a];const l="0.0",c="sumValue",d=Math.floor(r/4)*4,f=r%4,p=`
        sumValue += dot(values, segFilter);
    `;let g="";o%r>0&&(g=`
        if (inIdx < 0 || inIdx >= ${o}) {
          return initializationValue;
        }
      `);let x="";o%r>0&&(x=`
        if (inIdx < 0 || inIdx >= ${o}) {
          return -1.0;
        }
      `),this.userCode=`
      const float initializationValue = ${l};

      float getValue(int batch, int inIdx) {
        ${g}
        return getX(batch, inIdx);
      }

      float getSegmentIdAtIndex(int inIdx) {
        ${x}
        return getSegmentIds(inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = int(floor(float(outIdx) / float(
          ${i})) * float(${r}));
        int currentSeg = int(mod(float(outIdx), float(${i})));

        float sumValue = 0.0;

        for (int i = 0; i < ${d}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0
          );

          ${p}
        }

        int inIdx = inOffset + ${d};
        if (${f===1}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            0,
            0,
            0
          );

          ${p}
        } else if (${f===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
              0,
              0
          );

          ${p}
        } else if (${f===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            0
          );

          ${p}
        }
        setOutput(${c});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $Oe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,segmentIds:o}=e,{numSegments:i}=r,a=s.shape.length,l=[];let c=0;const d=fr([c],a);let f=s;d!=null&&(f=lo({inputs:{x:s},backend:n,attrs:{perm:d}}),l.push(f),c=$r(1,a)[0]);const p=qj(f.shape,c,i),g=Te([f.shape[c]]),x=tt({inputs:{x:f},backend:n,attrs:{shape:[-1,g]}});l.push(x);const b=UA(s.dtype),w=(I,R,$,O,F)=>{const M=I.shape[0],_=I.shape[1],V=Gj(_,F),B={windowSize:V,inSize:_,batchSize:M,numSegments:F},W=new DOe(B,R),q=n.compileAndRun(W,[I,$],O);if(l.push(q),q.shape[1]===F)return q;const j=gW({backend:n,attrs:{start:0,stop:F,step:1,dtype:"float32"}}),G=xW({inputs:{x:j},backend:n,attrs:{reps:[_/V]}});return l.push(j),l.push(G),w(q,R,G,O,F)},C=w(x,"unsortedSegmentSum",o,b,i),N=tt({inputs:{x:C},backend:n,attrs:{shape:p}});let k=N;if(d!=null){l.push(N);const I=Ou(d);k=lo({inputs:{x:k},backend:n,attrs:{perm:I}})}return l.forEach(I=>n.disposeIntermediateTensorInfo(I)),k}const OOe={kernelName:n2,backendName:"webgl",kernelFunc:$Oe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _Oe=[xIe,bIe,CIe,EIe,kIe,RIe,$Ie,_Ie,LIe,jIe,WIe,GIe,KIe,JIe,nke,ske,ike,uke,fke,pke,yke,Eke,kke,Dke,Oke,Bke,zke,Hke,eIe,Xke,Jke,rTe,cTe,fTe,pTe,gTe,yTe,CTe,ETe,TTe,RTe,$Te,_Te,MTe,BTe,WTe,HTe,XTe,ZTe,JTe,rAe,aAe,dAe,pAe,xAe,yAe,wAe,CAe,NAe,IAe,TAe,$Ae,PAe,LAe,jAe,WAe,GAe,YAe,e3e,JEe,n3e,Zke,o3e,l3e,d3e,nIe,m3e,b3e,v3e,E3e,T3e,$3e,P3e,B3e,W3e,G3e,X3e,Q3e,eRe,nRe,iRe,lRe,uRe,fRe,pRe,yRe,CRe,IRe,_Re,oIe,LRe,zRe,URe,qRe,Pke,YRe,QRe,eDe,rDe,aDe,sIe,cDe,dDe,hDe,mDe,gDe,Fke,RRe,bDe,SDe,kDe,aIe,DDe,_De,LDe,zDe,HDe,qDe,YDe,JDe,n$e,o$e,l$e,d$e,m$e,y$e,C$e,E$e,Ske,$Re,T$e,R$e,$$e,_$e,F$e,L$e,j$e,V$e,U$e,q$e,K$e,Z$e,J$e,nOe,sOe,iOe,lOe,DRe,pIe,dOe,pOe,gOe,bOe,SOe,IOe,mIe,TOe,ROe,OOe,ZRe];for(const t of _Oe)hB(t);/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function Yf(t,e,n,r){function s(o){return o instanceof n?o:new n(function(i){i(o)})}return new(n||(n=Promise))(function(o,i){function a(d){try{c(r.next(d))}catch(f){i(f)}}function l(d){try{c(r.throw(d))}catch(f){i(f)}}function c(d){d.done?o(d.value):s(d.value).then(a,l)}c((r=r.apply(t,[])).next())})}function Zf(t,e){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,s,o,i;return i={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function a(c){return function(d){return l([c,d])}}function l(c){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,s&&(o=c[0]&2?s.return:c[0]?s.throw||((o=s.return)&&o.call(s),0):s.next)&&!(o=o.call(s,c[1])).done)return o;switch(s=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,s=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){n.label=c[1];break}if(c[0]===6&&n.label<o[1]){n.label=o[1],o=c;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(c);break}o[2]&&n.ops.pop(),n.trys.pop();continue}c=e.call(t,n)}catch(d){c=[6,d],s=0}finally{r=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var POe=function(t){t.startEndTensor.dispose(),t.startPoint.dispose(),t.endPoint.dispose()},LI=function(t){return{startEndTensor:t,startPoint:Pt(t,[0,0],[-1,2]),endPoint:Pt(t,[0,2],[-1,2])}},FOe=function(t,e){var n=ie(t.startPoint,e),r=ie(t.endPoint,e),s=a2([n,r],1);return LI(s)};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var MOe={strides:[8,16],anchors:[2,6]},hP=6;function LOe(t,e,n){for(var r=[],s=0;s<n.strides.length;s++)for(var o=n.strides[s],i=Math.floor((e+o-1)/o),a=Math.floor((t+o-1)/o),l=n.anchors[s],c=0;c<i;c++)for(var d=o*(c+.5),f=0;f<a;f++)for(var p=o*(f+.5),g=0;g<l;g++)r.push([p,d]);return r}function BOe(t,e,n){var r=Pt(t,[0,1],[-1,2]),s=Ue(r,e),o=Pt(t,[0,3],[-1,2]),i=mt(o,n),a=mt(s,n),l=mt(i,2),c=lt(a,l),d=Ue(a,l),f=ie(c,n),p=ie(d,n),g=1;return a2([f,p],g)}function jOe(t){return t instanceof Tn?[t.shape[0],t.shape[1]]:[t.height,t.width]}function pP(t,e){var n,r,s;if(t.topLeft instanceof Tn&&t.bottomRight instanceof Tn){var o=we(function(){return[yr([Pt(lt(e-1,t.topLeft),0,1),Pt(t.topLeft,1,1)]),yr([lt(e-1,Pt(t.bottomRight,0,1)),Pt(t.bottomRight,1,1)])]}),i=o[0],a=o[1];n=i,r=a,t.landmarks!=null&&(s=we(function(){var b=lt(cs([e-1,0]),t.landmarks),w=cs([1,-1]),C=ie(b,w);return C}))}else{var l=t.topLeft,c=l[0],d=l[1],f=t.bottomRight,p=f[0],g=f[1];n=[e-1-c,d],r=[e-1-p,g],t.landmarks!=null&&(s=t.landmarks.map(function(b){return[e-1-b[0],b[1]]}))}var x={topLeft:n,bottomRight:r};return s!=null&&(x.landmarks=s),t.probability!=null&&(x.probability=t.probability instanceof Tn?t.probability.clone():t.probability),x}function mP(t,e){return we(function(){var n;return t.hasOwnProperty("box")?n=t.box:n=t,Aa(FOe(n,e).startEndTensor)})}var zOe=function(){function t(e,n,r,s,o,i){this.blazeFaceModel=e,this.width=n,this.height=r,this.maxFaces=s,this.anchorsData=LOe(n,r,MOe),this.anchors=kd(this.anchorsData),this.inputSizeData=[n,r],this.inputSize=cs([n,r]),this.iouThreshold=o,this.scoreThreshold=i}return t.prototype.getBoundingBoxes=function(e,n,r){return r===void 0&&(r=!0),Yf(this,void 0,void 0,function(){var s,o,i,a,l,c,d,f,p,g,x,b,w,C,N=this;return Zf(this,function(k){switch(k.label){case 0:return s=we(function(){var I=Gi.resizeBilinear(e,[N.width,N.height]),R=ie(lt(mt(I,255),.5),2),$=N.blazeFaceModel.predict(R),O=Aa($),F=BOe(O,N.anchors,N.inputSize),M=Pt(O,[0,0],[-1,1]),_=Aa(Ta(M));return[O,F,_]}),o=s[0],i=s[1],a=s[2],l=console.warn,console.warn=function(){},c=Gi.nonMaxSuppression(i,a,this.maxFaces,this.iouThreshold,this.scoreThreshold),console.warn=l,[4,c.array()];case 1:return d=k.sent(),c.dispose(),f=d.map(function(I){return Pt(i,[I,0],[1,-1])}),n?[3,3]:[4,Promise.all(f.map(function(I){return Yf(N,void 0,void 0,function(){var R;return Zf(this,function($){switch($.label){case 0:return[4,I.array()];case 1:return R=$.sent(),I.dispose(),[2,R]}})})}))];case 2:f=k.sent(),k.label=3;case 3:for(p=e.shape[1],g=e.shape[2],n?x=mt([g,p],this.inputSize):x=[g/this.inputSizeData[0],p/this.inputSizeData[1]],b=[],w=function(I){var R=f[I],$=we(function(){var O=R instanceof Tn?LI(R):LI(kd(R));if(!r)return O;var F=d[I],M;n?M=Pt(N.anchors,[F,0],[1,2]):M=N.anchorsData[F];var _=ce(Aa(Pt(o,[F,hP-1],[1,-1])),[hP,-1]),V=Pt(a,[F],[1]);return{box:O,landmarks:_,probability:V,anchor:M}});b.push($)},C=0;C<f.length;C++)w(C);return i.dispose(),a.dispose(),o.dispose(),[2,{boxes:b,scaleFactor:x}]}})})},t.prototype.estimateFaces=function(e,n,r,s){return n===void 0&&(n=!1),r===void 0&&(r=!1),s===void 0&&(s=!0),Yf(this,void 0,void 0,function(){var o,i,a,l,c,d,f=this;return Zf(this,function(p){switch(p.label){case 0:return o=jOe(e),i=o[1],a=we(function(){return e instanceof Tn||(e=ihe(e)),Ls(nt(e,"float32"),0)}),[4,this.getBoundingBoxes(a,n,s)];case 1:return l=p.sent(),c=l.boxes,d=l.scaleFactor,a.dispose(),n?[2,c.map(function(g){var x=mP(g,d),b={topLeft:Pt(x,[0],[2]),bottomRight:Pt(x,[2],[2])};if(s){var w=g,C=w.landmarks,N=w.probability,k=w.anchor,I=ie(Ue(C,k),d);b.landmarks=I,b.probability=N}return r&&(b=pP(b,i)),b})]:[2,Promise.all(c.map(function(g){return Yf(f,void 0,void 0,function(){var x,b,N,w,C,N,k,I,R,$,O,F,M=this;return Zf(this,function(_){switch(_.label){case 0:return x=mP(g,d),s?[3,2]:[4,x.array()];case 1:return N=_.sent(),b={topLeft:N.slice(0,2),bottomRight:N.slice(2)},[3,4];case 2:return[4,Promise.all([g.landmarks,x,g.probability].map(function(V){return Yf(M,void 0,void 0,function(){return Zf(this,function(B){return[2,V.array()]})})}))];case 3:w=_.sent(),C=w[0],N=w[1],k=w[2],I=g.anchor,R=d,$=R[0],O=R[1],F=C.map(function(V){return[(V[0]+I[0])*$,(V[1]+I[1])*O]}),b={topLeft:N.slice(0,2),bottomRight:N.slice(2),landmarks:F,probability:k},POe(g.box),g.landmarks.dispose(),g.probability.dispose(),_.label=4;case 4:return x.dispose(),r&&(b=pP(b,i)),[2,b]}})})}))]}})})},t.prototype.dispose=function(){this.blazeFaceModel.dispose(),this.anchors.dispose(),this.inputSize.dispose()},t}();/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var VOe="https://tfhub.dev/tensorflow/tfjs-model/blazeface/1/default/1";function yW(t){var e={},n=e.maxFaces,r=n===void 0?10:n,s=e.inputWidth,o=s===void 0?128:s,i=e.inputHeight,a=i===void 0?128:i,l=e.iouThreshold,c=l===void 0?.3:l,d=e.scoreThreshold,f=d===void 0?.75:d,p=e.modelUrl;return Yf(this,void 0,void 0,function(){var g,x;return Zf(this,function(b){switch(b.label){case 0:return p==null?[3,2]:[4,$_(p)];case 1:return g=b.sent(),[3,4];case 2:return[4,$_(VOe,{fromTFHub:!0})];case 3:g=b.sent(),b.label=4;case 4:return x=new zOe(g,o,a,r,c,f),[2,x]}})})}const WOe=()=>{var X,ee,ne,oe,ye,ge,ve,he,Me,ze,Oe,Ie,me,ke;const[t,e]=A.useState(null),[n,r]=A.useState(!0),[s,o]=A.useState(null),[i,a]=A.useState(!1),[l,c]=A.useState("check-in"),[d,f]=A.useState(!1),[p,g]=A.useState(!1),[x,b]=A.useState(0),[w,C]=A.useState(!1),[N,k]=A.useState(null),[I,R]=A.useState(null),[$,O]=A.useState(!0),[F,M]=A.useState(null),[_,V]=A.useState(new Date),B=A.useRef(null),W=A.useRef(null);A.useEffect(()=>{const pe=setInterval(()=>{V(new Date)},1e3);return()=>clearInterval(pe)},[]),A.useEffect(()=>{let pe=!0;return(async()=>{try{if(k(null),await _B(),console.log("TensorFlow.js is ready"),!pe)return;const Ve=await yW();if(console.log("BlazeFace model loaded successfully"),!pe)return;M(Ve),C(!0)}catch(Ve){console.error("Error loading face detection model:",Ve),pe&&(k(Ve.message),Rt.error("Failed to load face detection model"))}})(),q(),()=>{pe=!1,I&&I.getTracks().forEach(Ve=>Ve.stop())}},[]);const q=async()=>{var pe,Pe,Ve,Fe,Be;try{r(!0),o(null);const be=new Date().toISOString().split("T")[0],je=await yt.get(`/api/attendance/me?startDate=${be}&endDate=${be}`),Se=((pe=je==null?void 0:je.data)==null?void 0:pe[0])??null;e(Se),(Pe=Se==null?void 0:Se.checkIn)!=null&&Pe.time&&!((Ve=Se==null?void 0:Se.checkOut)!=null&&Ve.time)?c("check-out"):c("check-in")}catch(be){console.error("Error fetching today's attendance:",be),o(((Be=(Fe=be==null?void 0:be.response)==null?void 0:Fe.data)==null?void 0:Be.message)||"Failed to fetch attendance data"),Rt.error("Failed to fetch attendance data")}finally{r(!1)}},j=async pe=>{c(pe);try{o(null);const Pe=await navigator.mediaDevices.getUserMedia({video:{facingMode:"user"},audio:!1});R(Pe),a(!0),O(!0)}catch(Pe){console.error("Error accessing camera:",Pe),o("Camera access denied"),Rt.error("Could not access camera. Please ensure camera permissions are granted."),O(!1)}},G=()=>{I&&I.getTracks().forEach(pe=>pe.stop()),R(null),a(!1),g(!1)};A.useEffect(()=>{if(!B.current||!W.current||!w||!F||!i)return;const Pe=setInterval(async()=>{if(B.current.video.readyState!==4)return;const Ve=B.current.video,Fe=W.current,Be=Fe.getContext("2d");Fe.width=Ve.videoWidth,Fe.height=Ve.videoHeight;try{const be=await F.estimateFaces(Ve);if(Be.clearRect(0,0,Fe.width,Fe.height),be.length>0){g(!0);const je=be[0].probability[0];b(je),be.forEach(Se=>{const ue=Se.topLeft,He=Se.bottomRight,It=[He[0]-ue[0],He[1]-ue[1]];Be.strokeStyle="#10B981",Be.lineWidth=3;const ot=10;Be.beginPath(),Be.moveTo(ue[0]+ot,ue[1]),Be.lineTo(ue[0]+It[0]-ot,ue[1]),Be.arcTo(ue[0]+It[0],ue[1],ue[0]+It[0],ue[1]+ot,ot),Be.lineTo(ue[0]+It[0],ue[1]+It[1]-ot),Be.arcTo(ue[0]+It[0],ue[1]+It[1],ue[0]+It[0]-ot,ue[1]+It[1],ot),Be.lineTo(ue[0]+ot,ue[1]+It[1]),Be.arcTo(ue[0],ue[1]+It[1],ue[0],ue[1]+It[1]-ot,ot),Be.lineTo(ue[0],ue[1]+ot),Be.arcTo(ue[0],ue[1],ue[0]+ot,ue[1],ot),Be.stroke(),Be.fillStyle="rgba(16, 185, 129, 0.7)",Be.fillRect(ue[0],ue[1]-25,100,25),Be.fillStyle="white",Be.font="14px Arial",Be.fillText("Face Detected",ue[0]+10,ue[1]-8),Se.landmarks&&Se.landmarks.forEach(Vt=>{Be.fillStyle="#3B82F6",Be.beginPath(),Be.arc(Vt[0],Vt[1],3,0,2*Math.PI),Be.fill()})})}else g(!1),b(0)}catch(be){console.error("Error during face detection:",be)}},100);return()=>clearInterval(Pe)},[B,W,w,F,i]);const Z=async()=>{var pe,Pe;f(!0);try{const Ve=B.current.video,Fe=await F.estimateFaces(Ve);if(Fe.length===0)throw new Error("No face detected during capture");const Be=Fe[0],je={faceEmbedding:[...Be.landmarks.flat(),...Be.probability,Be.topLeft[0],Be.topLeft[1],Be.bottomRight[0],Be.bottomRight[1]],confidence:Be.probability[0],type:l},Se={headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}};console.log("Sending attendance request...");const ue=await yt.post("/api/attendance/mark",je,Se);if(!(ue!=null&&ue.data))throw new Error("No response data received");console.log("Attendance response:",ue.data),Rt.success(ue.data.message),ue.data.attendance&&e(ue.data.attendance),q(),G()}catch(Ve){console.error("Attendance API error:",Ve);const Fe=((Pe=(pe=Ve.response)==null?void 0:pe.data)==null?void 0:Pe.message)||Ve.message||"Failed to record attendance";Rt.error(Fe)}finally{f(!1)}},J=pe=>new Date(pe).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!0});return n?S.jsx("div",{className:"flex items-center justify-center min-h-[400px] bg-gray-50",children:S.jsxs("div",{className:"text-center",children:[S.jsx(Wc,{className:"h-8 w-8 mx-auto animate-spin text-indigo-600"}),S.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Loading attendance data..."})]})}):s?S.jsx("div",{className:"flex items-center justify-center min-h-[400px] bg-red-50",children:S.jsxs("div",{className:"text-center",children:[S.jsx(cl,{className:"h-12 w-12 mx-auto text-red-500"}),S.jsx("h3",{className:"mt-2 text-base font-semibold text-red-900",children:"Error Loading Data"}),S.jsx("p",{className:"mt-1 text-sm text-red-600",children:s}),S.jsxs("button",{onClick:q,className:"mt-4 inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",children:[S.jsx(Wc,{className:"h-4 w-4 mr-1.5"}),"Retry"]})]})}):N?S.jsx("div",{className:"flex items-center justify-center min-h-[400px] bg-yellow-50",children:S.jsxs("div",{className:"text-center",children:[S.jsx(cl,{className:"h-12 w-12 mx-auto text-yellow-500"}),S.jsx("h3",{className:"mt-2 text-base font-semibold text-yellow-900",children:"Face Detection Unavailable"}),S.jsx("p",{className:"mt-1 text-sm text-yellow-600",children:N}),S.jsxs("button",{onClick:()=>window.location.reload(),className:"mt-4 inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-yellow-600 hover:bg-yellow-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-yellow-500",children:[S.jsx(Wc,{className:"h-4 w-4 mr-1.5"}),"Reload Page"]})]})}):S.jsxs("div",{className:"bg-gradient-to-br from-gray-50 to-gray-100 p-6 rounded-xl",children:[S.jsxs("div",{className:"flex justify-between items-center border-b border-gray-200 pb-4",children:[S.jsxs("h1",{className:"text-2xl font-bold text-gray-800 flex items-center",children:[S.jsx(Fo,{className:"h-7 w-7 mr-2 text-indigo-600"}),"Mark Attendance"]}),S.jsxs("div",{className:"flex items-center space-x-2",children:[S.jsx(zi,{className:"h-5 w-5 text-indigo-600"}),S.jsx("span",{className:"text-sm font-medium text-gray-700",children:_.toLocaleDateString([],{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]})]}),S.jsxs("div",{className:"flex justify-between items-center mt-4",children:[S.jsxs("div",{className:"flex items-center text-indigo-600 bg-indigo-50 px-3 py-1.5 rounded-lg",children:[S.jsx(Fo,{className:"h-5 w-5 mr-1.5"}),S.jsx("span",{className:"text-sm font-medium",children:_.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!0})})]}),S.jsxs("button",{type:"button",onClick:q,className:"flex items-center px-3 py-2 text-sm font-medium text-indigo-600 bg-white border border-indigo-200 rounded-lg shadow-sm hover:bg-indigo-50 focus:outline-none focus:ring-2 focus:ring-offset-1 focus:ring-indigo-500 transition-colors",children:[S.jsx(Wc,{className:"h-4 w-4 mr-1.5"}),"Refresh Status"]})]}),S.jsx("div",{className:"mt-6 bg-white shadow-lg overflow-hidden rounded-xl border border-gray-100",children:i?S.jsxs("div",{className:"p-6",children:[S.jsxs("div",{className:"text-center mb-4",children:[S.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:l==="check-in"?"Checking In":"Checking Out"}),S.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Position your face in the frame and click the button below"})]}),S.jsx("div",{className:"relative flex justify-center",children:$?S.jsxs("div",{className:"relative rounded-xl overflow-hidden shadow-lg border-4 border-indigo-100",children:[S.jsx(oB,{audio:!1,mirrored:!0,ref:B,screenshotFormat:"image/jpeg",className:"w-full max-w-lg h-auto",videoConstraints:{facingMode:"user"}}),S.jsx("canvas",{ref:W,className:"absolute top-0 left-0 right-0 mx-auto z-10",style:{width:((ke=(me=B.current)==null?void 0:me.video)==null?void 0:ke.videoWidth)||"100%",maxWidth:"100%"}}),S.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[S.jsxs("div",{className:"h-full w-full flex flex-col justify-between p-4",children:[S.jsxs("div",{className:"flex justify-between",children:[S.jsx("div",{className:"h-6 w-6 border-t-2 border-l-2 border-indigo-500"}),S.jsx("div",{className:"h-6 w-6 border-t-2 border-r-2 border-indigo-500"})]}),S.jsxs("div",{className:"flex justify-between",children:[S.jsx("div",{className:"h-6 w-6 border-b-2 border-l-2 border-indigo-500"}),S.jsx("div",{className:"h-6 w-6 border-b-2 border-r-2 border-indigo-500"})]})]}),S.jsx("div",{className:"absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-transparent via-indigo-500 to-transparent",style:{animation:"scan 2s ease-in-out infinite"}}),S.jsx("style",{children:`
                      @keyframes scan {
                        0% { transform: translateY(0); opacity: 0.7; }
                        50% { transform: translateY(calc(100vh - 4px)); opacity: 0.7; }
                        100% { transform: translateY(0); opacity: 0.7; }
                      }
                    `})]})]}):S.jsx("div",{className:"bg-gray-100 flex items-center justify-center h-64 w-full max-w-lg rounded-xl border border-gray-200",children:S.jsxs("div",{className:"text-center px-4",children:[S.jsx(cl,{className:"mx-auto h-12 w-12 text-red-500"}),S.jsx("h3",{className:"mt-2 text-base font-medium text-gray-900",children:"Camera not available"}),S.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Please ensure camera permissions are granted."})]})})}),S.jsxs("div",{className:"mt-6 flex justify-center space-x-4",children:[S.jsxs("button",{type:"button",onClick:G,className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition-colors",children:[S.jsx(cl,{className:"h-5 w-5 mr-1.5 text-gray-500"}),"Cancel"]}),S.jsxs("button",{type:"button",onClick:Z,disabled:d||!p,className:`inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition-colors ${d||!p?"bg-indigo-400 cursor-not-allowed":"bg-indigo-600 hover:bg-indigo-700"}`,children:[S.jsx(Ms,{className:"h-5 w-5 mr-1.5"}),d?"Processing...":l==="check-in"?"Confirm Check In":"Confirm Check Out"]})]}),S.jsxs("div",{className:"mt-6 bg-gray-50 p-4 rounded-lg border border-gray-200",children:[S.jsxs("div",{className:"flex items-center mb-2",children:[S.jsx("span",{className:"text-sm font-medium text-gray-700 mr-2",children:"Face Detection:"}),S.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${p?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:p?"Detected":"Not Detected"})]}),p&&S.jsxs("div",{className:"mt-2",children:[S.jsxs("div",{className:"flex items-center mb-1",children:[S.jsx("span",{className:"text-sm font-medium text-gray-700 mr-2",children:"Confidence:"}),S.jsxs("span",{className:"text-sm font-medium text-gray-900",children:[Math.round(x*100),"%"]})]}),S.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:S.jsx("div",{className:`h-2 rounded-full ${x>.7?"bg-green-500":x>.5?"bg-yellow-500":"bg-red-500"}`,style:{width:`${Math.round(x*100)}%`}})})]})]})]}):S.jsx("div",{className:"p-6",children:t?S.jsxs("div",{className:"space-y-6",children:[S.jsxs("div",{className:"text-center",children:[S.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-2",children:"Today's Attendance"}),S.jsx("div",{className:"inline-flex px-3 py-1 rounded-full bg-indigo-50 text-indigo-700 text-sm font-medium",children:t.status==="present"?"Present":t.status==="late"?"Late":"Pending"})]}),S.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[S.jsxs("div",{className:`p-5 rounded-xl border ${(X=t.checkIn)!=null&&X.time?"bg-green-50 border-green-200":"bg-gray-50 border-gray-200"}`,children:[S.jsxs("div",{className:"flex items-center justify-between mb-3",children:[S.jsx("h3",{className:"text-lg font-medium text-gray-800",children:"Check In"}),S.jsx("div",{className:`rounded-full p-2 ${(ee=t.checkIn)!=null&&ee.time?"bg-green-100 text-green-600":"bg-gray-200 text-gray-500"}`,children:(ne=t.checkIn)!=null&&ne.time?S.jsx(Oo,{className:"h-6 w-6"}):S.jsx(Fo,{className:"h-6 w-6"})})]}),(oe=t.checkIn)!=null&&oe.time?S.jsxs("div",{className:"space-y-2",children:[S.jsxs("div",{className:"flex items-center",children:[S.jsx(Fo,{className:"h-4 w-4 text-gray-500 mr-2"}),S.jsx("span",{className:"text-sm text-gray-700",children:J(t.checkIn.time)})]}),S.jsxs("div",{className:"flex items-center",children:[S.jsx(Ch,{className:"h-4 w-4 text-gray-500 mr-2"}),S.jsx("span",{className:"text-sm text-gray-700",children:t.checkIn.verified?"Verified":"Pending verification"})]}),S.jsxs("button",{type:"button",disabled:!0,className:"w-full mt-2 py-2 px-3 rounded-lg bg-gray-100 text-gray-500 font-medium text-sm flex items-center justify-center cursor-not-allowed",children:[S.jsx(Oo,{className:"h-4 w-4 mr-1.5"}),"Already Checked In"]})]}):S.jsxs("div",{children:[S.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"You haven't checked in yet. Record your attendance now."}),S.jsxs("button",{type:"button",onClick:()=>j("check-in"),className:"w-full py-2 px-3 rounded-lg bg-indigo-600 hover:bg-indigo-700 text-white font-medium text-sm flex items-center justify-center transition-colors",children:[S.jsx(Ms,{className:"h-4 w-4 mr-1.5"}),"Check In Now"]})]})]}),S.jsxs("div",{className:`p-5 rounded-xl border ${(ye=t.checkOut)!=null&&ye.time?"bg-green-50 border-green-200":(ge=t.checkIn)!=null&&ge.time?"bg-indigo-50 border-indigo-200":"bg-gray-50 border-gray-200"}`,children:[S.jsxs("div",{className:"flex items-center justify-between mb-3",children:[S.jsx("h3",{className:"text-lg font-medium text-gray-800",children:"Check Out"}),S.jsx("div",{className:`rounded-full p-2 ${(ve=t.checkOut)!=null&&ve.time?"bg-green-100 text-green-600":(he=t.checkIn)!=null&&he.time?"bg-indigo-100 text-indigo-600":"bg-gray-200 text-gray-500"}`,children:(Me=t.checkOut)!=null&&Me.time?S.jsx(Oo,{className:"h-6 w-6"}):(ze=t.checkIn)!=null&&ze.time?S.jsx(Fo,{className:"h-6 w-6"}):S.jsx(cl,{className:"h-6 w-6"})})]}),(Oe=t.checkOut)!=null&&Oe.time?S.jsxs("div",{className:"space-y-2",children:[S.jsxs("div",{className:"flex items-center",children:[S.jsx(Fo,{className:"h-4 w-4 text-gray-500 mr-2"}),S.jsx("span",{className:"text-sm text-gray-700",children:J(t.checkOut.time)})]}),S.jsxs("div",{className:"flex items-center",children:[S.jsx(Ch,{className:"h-4 w-4 text-gray-500 mr-2"}),S.jsx("span",{className:"text-sm text-gray-700",children:t.checkOut.verified?"Verified":"Pending verification"})]}),S.jsxs("button",{type:"button",disabled:!0,className:"w-full mt-2 py-2 px-3 rounded-lg bg-gray-100 text-gray-500 font-medium text-sm flex items-center justify-center cursor-not-allowed",children:[S.jsx(Oo,{className:"h-4 w-4 mr-1.5"}),"Already Checked Out"]})]}):(Ie=t.checkIn)!=null&&Ie.time?S.jsxs("div",{children:[S.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"You can check out now to complete your attendance."}),S.jsxs("button",{type:"button",onClick:()=>j("check-out"),className:"w-full py-2 px-3 rounded-lg bg-indigo-600 hover:bg-indigo-700 text-white font-medium text-sm flex items-center justify-center transition-colors",children:[S.jsx(Ms,{className:"h-4 w-4 mr-1.5"}),"Check Out Now"]})]}):S.jsxs("div",{children:[S.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"You need to check in first before checking out."}),S.jsxs("button",{type:"button",disabled:!0,className:"w-full py-2 px-3 rounded-lg bg-gray-100 text-gray-500 font-medium text-sm flex items-center justify-center cursor-not-allowed",children:[S.jsx(Ms,{className:"h-4 w-4 mr-1.5"}),"Check In First"]})]})]})]})]}):S.jsxs("div",{className:"py-10 text-center",children:[S.jsx("div",{className:"mx-auto h-20 w-20 rounded-full bg-indigo-100 flex items-center justify-center",children:S.jsx(Ms,{className:"h-10 w-10 text-indigo-600"})}),S.jsx("h3",{className:"mt-4 text-lg font-medium text-gray-900",children:"No Attendance Recorded Today"}),S.jsx("p",{className:"mt-1 text-gray-500 max-w-sm mx-auto",children:"Mark your attendance using facial recognition to keep track of your check-in and check-out times."}),S.jsx("div",{className:"mt-6 flex justify-center space-x-4",children:S.jsxs("button",{type:"button",onClick:()=>j("check-in"),className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition-colors",children:[S.jsx(Ms,{className:"h-5 w-5 mr-2"}),"Check In"]})})]})})}),S.jsxs("div",{className:"mt-6 bg-indigo-50 rounded-xl p-4 border border-indigo-100",children:[S.jsx("h3",{className:"text-sm font-medium text-indigo-800 mb-2",children:"Tips for Attendance Capture"}),S.jsxs("ul",{className:"text-xs text-indigo-700 space-y-1.5",children:[S.jsxs("li",{className:"flex items-start",children:[S.jsx(Oo,{className:"h-4 w-4 text-indigo-500 mr-1.5 mt-0.5 flex-shrink-0"}),S.jsx("span",{children:"Make sure your face is clearly visible and well-lit"})]}),S.jsxs("li",{className:"flex items-start",children:[S.jsx(Oo,{className:"h-4 w-4 text-indigo-500 mr-1.5 mt-0.5 flex-shrink-0"}),S.jsx("span",{children:"Remove any face coverings for accurate recognition"})]}),S.jsxs("li",{className:"flex items-start",children:[S.jsx(Oo,{className:"h-4 w-4 text-indigo-500 mr-1.5 mt-0.5 flex-shrink-0"}),S.jsx("span",{children:"Position your face in the center of the frame"})]}),S.jsxs("li",{className:"flex items-start",children:[S.jsx(Oo,{className:"h-4 w-4 text-indigo-500 mr-1.5 mt-0.5 flex-shrink-0"}),S.jsx("span",{children:"Allow location access for precise attendance records"})]})]})]})]})},UOe=()=>{const[t,e]=A.useState([]),[n,r]=A.useState(!0),[s,o]=A.useState(null),[i,a]=A.useState({startDate:_o(fg(new Date),"yyyy-MM-dd"),endDate:_o(new Date,"yyyy-MM-dd")});A.useEffect(()=>{l()},[i]);const l=async()=>{r(!0),o(null);try{const b=await yt.get(`/api/attendance/me?startDate=${i.startDate}&endDate=${i.endDate}`);let w=[];Array.isArray(b.data)?w=b.data:b.data&&Array.isArray(b.data.records)&&(w=b.data.records),w.sort((C,N)=>new Date(N.timestamp)-new Date(C.timestamp)),e(w)}catch(b){console.error("Error fetching attendance history:",b),o("Failed to load attendance history"),Rt.error("Failed to load attendance history")}finally{r(!1)}},c=b=>{const{name:w,value:C}=b.target;a(N=>({...N,[w]:C}))},d=()=>{const b=new Date,w=fg(N4(b)),C=AT(N4(b));a({startDate:_o(w,"yyyy-MM-dd"),endDate:_o(C,"yyyy-MM-dd")})},f=()=>{const b=new Date;a({startDate:_o(fg(b),"yyyy-MM-dd"),endDate:_o(b,"yyyy-MM-dd")})},g=(()=>{if(!t.length)return{present:0,absent:0,late:0,totalDays:0,hoursWorked:0};const b=t.filter(k=>k.status==="present").length,w=t.filter(k=>k.status==="absent").length,C=t.filter(k=>k.status==="late").length,N=t.reduce((k,I)=>k+(I.hoursWorked||0),0);return{present:b,absent:w,late:C,totalDays:t.length,hoursWorked:parseFloat(N.toFixed(2))}})(),x=()=>g.totalDays===0?0:Math.round(g.present/g.totalDays*100);return S.jsxs("div",{children:[S.jsx("h1",{className:"text-2xl font-semibold text-gray-900 mb-6",children:"Attendance History"}),S.jsxs("div",{className:"bg-white p-4 rounded-lg shadow mb-6",children:[S.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-4",children:[S.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"Filter by Date"}),S.jsxs("div",{className:"mt-2 md:mt-0 flex space-x-2",children:[S.jsx("button",{onClick:f,className:"inline-flex items-center px-3 py-1.5 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"This Month"}),S.jsx("button",{onClick:d,className:"inline-flex items-center px-3 py-1.5 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Last Month"}),S.jsxs("button",{onClick:l,className:"inline-flex items-center px-3 py-1.5 border border-transparent text-sm font-medium rounded-md text-indigo-700 bg-indigo-100 hover:bg-indigo-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:[S.jsx(Wc,{className:"h-4 w-4 mr-1"}),"Refresh"]})]})]}),S.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[S.jsxs("div",{children:[S.jsxs("label",{htmlFor:"startDate",className:"block text-sm font-medium text-gray-700",children:[S.jsx(zi,{className:"h-4 w-4 inline mr-1"}),"Start Date"]}),S.jsx("input",{type:"date",id:"startDate",name:"startDate",value:i.startDate,onChange:c,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"})]}),S.jsxs("div",{children:[S.jsxs("label",{htmlFor:"endDate",className:"block text-sm font-medium text-gray-700",children:[S.jsx(zi,{className:"h-4 w-4 inline mr-1"}),"End Date"]}),S.jsx("input",{type:"date",id:"endDate",name:"endDate",value:i.endDate,onChange:c,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"})]})]})]}),S.jsxs("div",{className:"grid grid-cols-1 gap-5 sm:grid-cols-2 lg:grid-cols-4 mb-6",children:[S.jsx("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:S.jsx("div",{className:"p-5",children:S.jsxs("div",{className:"flex items-center",children:[S.jsx("div",{className:"flex-shrink-0 bg-indigo-100 rounded-md p-3",children:S.jsx(Oo,{className:"h-6 w-6 text-indigo-600"})}),S.jsx("div",{className:"ml-5 w-0 flex-1",children:S.jsxs("dl",{children:[S.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Present Days"}),S.jsx("dd",{children:S.jsx("div",{className:"text-lg font-medium text-gray-900",children:g.present})})]})})]})})}),S.jsx("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:S.jsx("div",{className:"p-5",children:S.jsxs("div",{className:"flex items-center",children:[S.jsx("div",{className:"flex-shrink-0 bg-red-100 rounded-md p-3",children:S.jsx(cl,{className:"h-6 w-6 text-red-600"})}),S.jsx("div",{className:"ml-5 w-0 flex-1",children:S.jsxs("dl",{children:[S.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Absent Days"}),S.jsx("dd",{children:S.jsx("div",{className:"text-lg font-medium text-gray-900",children:g.absent})})]})})]})})}),S.jsx("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:S.jsx("div",{className:"p-5",children:S.jsxs("div",{className:"flex items-center",children:[S.jsx("div",{className:"flex-shrink-0 bg-yellow-100 rounded-md p-3",children:S.jsx(Fo,{className:"h-6 w-6 text-yellow-600"})}),S.jsx("div",{className:"ml-5 w-0 flex-1",children:S.jsxs("dl",{children:[S.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Late Days"}),S.jsx("dd",{children:S.jsx("div",{className:"text-lg font-medium text-gray-900",children:g.late})})]})})]})})}),S.jsx("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:S.jsx("div",{className:"p-5",children:S.jsxs("div",{className:"flex items-center",children:[S.jsx("div",{className:"flex-shrink-0 bg-green-100 rounded-md p-3",children:S.jsxs("div",{className:"text-green-600 font-bold text-lg",children:[x(),"%"]})}),S.jsx("div",{className:"ml-5 w-0 flex-1",children:S.jsxs("dl",{children:[S.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Attendance Rate"}),S.jsxs("dd",{children:[S.jsxs("div",{className:"text-sm text-gray-500",children:[g.present," of ",g.totalDays," days"]}),S.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5 mt-1",children:S.jsx("div",{className:"bg-green-600 h-2.5 rounded-full",style:{width:`${x()}%`}})})]})]})})]})})})]}),S.jsxs("div",{className:"bg-white shadow overflow-hidden sm:rounded-md",children:[S.jsxs("div",{className:"px-4 py-5 sm:px-6 flex justify-between items-center",children:[S.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:"Attendance Records"}),S.jsx("span",{className:"text-sm text-gray-500",children:n?"Loading...":`Showing ${t.length} records`})]}),n?S.jsx("div",{className:"flex justify-center py-10",children:S.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-t-2 border-b-2 border-indigo-600"})}):s?S.jsxs("div",{className:"text-center py-10 bg-gray-50",children:[S.jsx(cl,{className:"mx-auto h-12 w-12 text-red-400"}),S.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"Error Loading Data"}),S.jsx("p",{className:"mt-1 text-sm text-gray-500",children:s}),S.jsxs("button",{onClick:l,className:"mt-3 inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-indigo-700 bg-indigo-100 hover:bg-indigo-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:[S.jsx(Wc,{className:"h-4 w-4 mr-1.5"}),"Try Again"]})]}):t.length>0?S.jsx("div",{className:"overflow-x-auto",children:S.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[S.jsx("thead",{className:"bg-gray-50",children:S.jsxs("tr",{children:[S.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date & Time"}),S.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Class"}),S.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),S.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),S.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Details"})]})}),S.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(b=>{var w,C;return S.jsxs("tr",{className:"hover:bg-gray-50",children:[S.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[S.jsx("div",{className:"text-sm text-gray-900",children:_o(hg(b.timestamp),"MMM dd, yyyy")}),S.jsx("div",{className:"text-sm text-gray-500",children:_o(hg(b.timestamp),"hh:mm a")})]}),S.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:b.classSchedule?S.jsxs("div",{children:[S.jsx("div",{className:"text-sm font-medium text-gray-900",children:b.classSchedule.name}),S.jsxs("div",{className:"text-xs text-gray-500",children:[b.classSchedule.startTime," - ",b.classSchedule.endTime]}),S.jsxs("div",{className:"text-xs text-gray-500",children:["Faculty: ",(w=b.classSchedule.faculty)==null?void 0:w.name]})]}):S.jsx("span",{className:"text-sm text-gray-500",children:"No class info"})}),S.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:S.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${b.status==="present"?"bg-green-100 text-green-800":b.status==="late"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:b.status})}),S.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:b.type==="face-recognition"?S.jsxs("div",{className:"flex items-center",children:[S.jsx(Ms,{className:"h-4 w-4 mr-1.5 text-gray-400"}),"Face Recognition"]}):S.jsxs("div",{className:"flex items-center",children:[S.jsx(Ch,{className:"h-4 w-4 mr-1.5 text-gray-400"}),"Proxy"]})}),S.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:b.type==="face-recognition"?S.jsxs("div",{children:["Confidence: ",(C=b.faceConfidence)==null?void 0:C.toFixed(1),"%"]}):b.notes?S.jsx("div",{children:b.notes}):null})]},b._id)})})]})}):S.jsxs("div",{className:"text-center py-10 bg-gray-50",children:[S.jsx(Fo,{className:"mx-auto h-12 w-12 text-gray-400"}),S.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No records found"}),S.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"No attendance records found in the selected date range."})]})]}),g.hoursWorked>0&&S.jsx("div",{className:"mt-6 bg-white overflow-hidden shadow rounded-lg",children:S.jsx("div",{className:"px-4 py-5 sm:p-6",children:S.jsxs("div",{className:"flex items-center",children:[S.jsx("div",{className:"flex-shrink-0 bg-blue-100 rounded-md p-3",children:S.jsx(Fo,{className:"h-6 w-6 text-blue-600"})}),S.jsxs("div",{className:"ml-5",children:[S.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Total Hours Worked"}),S.jsxs("div",{className:"mt-1 text-xl font-semibold text-blue-600",children:[g.hoursWorked," hours"]}),S.jsx("p",{className:"text-sm text-gray-500",children:"Total hours worked during the selected period"})]})]})})})]})},mg=yt.create({baseURL:"/api",timeout:3e4,headers:{"Content-Type":"application/json"}});mg.interceptors.request.use(t=>{const e=localStorage.getItem("token");return e&&(t.headers.Authorization=`Bearer ${e}`),t},t=>Promise.reject(t));mg.interceptors.response.use(t=>t,async t=>{var n,r;const e=t.config;if(((n=t.response)==null?void 0:n.status)===401&&!e._retry){e._retry=!0;try{const s=localStorage.getItem("refreshToken");if(s){const o=await yt.post("/api/auth/refresh-token",{refreshToken:s});if(o.data.token)return localStorage.setItem("token",o.data.token),mg.defaults.headers.common.Authorization=`Bearer ${o.data.token}`,mg(e)}}catch(s){return localStorage.removeItem("token"),localStorage.removeItem("refreshToken"),window.location.href="/login",Promise.reject(s)}}return((r=t.response)==null?void 0:r.status)===403&&(localStorage.removeItem("token"),localStorage.removeItem("refreshToken"),window.location.href="/login"),Promise.reject(t)});const HOe=()=>{const{currentUser:t,setCurrentUser:e,logout:n}=La(),[r,s]=A.useState([]),[o,i]=A.useState(!0),[a,l]=A.useState(!1),[c,d]=A.useState(!1),[f,p]=A.useState(!1),[g,x]=A.useState(!1),[b,w]=A.useState(null),[C,N]=A.useState(!1),[k,I]=A.useState(null),[R,$]=A.useState("profile"),[O,F]=A.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[M,_]=A.useState({}),[V,B]=A.useState(!1),[W,q]=A.useState({name:(t==null?void 0:t.name)||"",email:(t==null?void 0:t.email)||"",registrationId:(t==null?void 0:t.registrationId)||""}),[j,G]=A.useState(!1),[Z,J]=A.useState(!1),[X,ee]=A.useState(null),ne=A.useRef(null),[oe,ye]=A.useState(!1),[ge,ve]=A.useState(!1),[he,Me]=A.useState(!1);A.useEffect(()=>{t&&q({name:t.name||"",email:t.email||"",registrationId:t.registrationId||""})},[t]),A.useEffect(()=>{(async()=>{try{await _B();const Se=await yW();I(Se),N(!0)}catch(Se){console.error("Error loading face detection models:",Se),Rt.error("Failed to load face detection models")}})(),(async()=>{i(!0);try{const Se=await yt.get("/api/auth/me");s(Se.data.faceData||[]),q({name:Se.data.name||"",email:Se.data.email||"",registrationId:Se.data.registrationId||""})}catch(Se){console.error("Error fetching user data:",Se),Rt.error("Failed to load your profile data")}finally{i(!1)}})()},[]),A.useEffect(()=>{if(!b||!C||!k||!a)return;const je=setInterval(async()=>{if(b.video.readyState!==4)return;const Se=b.video,ue=await k.estimateFaces(Se);p(ue.length>0)},500);return()=>clearInterval(je)},[b,C,k,a]);const ze=()=>{l(!0)},Oe=()=>{l(!1),p(!1)},Ie=async()=>{var be,je;if(!f){Rt.error("No face detected. Please position your face in the frame");return}x(!0);try{const Se=b.video,ue=await k.estimateFaces(Se);if(ue.length===0)throw new Error("No face detected during embedding generation");const He=ue[0],It=[...He.landmarks.flat(),...He.probability,He.topLeft[0],He.topLeft[1],He.bottomRight[0],He.bottomRight[1]],ot=await yt.post("/api/users/face",{faceEmbedding:It,confidence:He.probability[0]});Rt.success("Face registered successfully!"),s([...r,ot.data.faceData[ot.data.faceData.length-1]]),l(!1)}catch(Se){console.error("Error registering face:",Se),Rt.error(((je=(be=Se.response)==null?void 0:be.data)==null?void 0:je.message)||"Failed to register face. Please try again.")}finally{x(!1)}},me=async be=>{var je,Se;try{await yt.delete(`/api/users/face/${be}`),s(r.filter(ue=>ue.faceId!==be)),Rt.success("Face data removed successfully")}catch(ue){console.error("Error deleting face data:",ue),Rt.error(((Se=(je=ue.response)==null?void 0:je.data)==null?void 0:Se.message)||"Failed to delete face data")}},ke=be=>{const{name:je,value:Se}=be.target;F(ue=>({...ue,[je]:Se})),M[je]&&_(ue=>({...ue,[je]:""})),je==="confirmPassword"&&Se!==O.newPassword?_(ue=>({...ue,confirmPassword:"Passwords do not match"})):je==="confirmPassword"&&_(ue=>({...ue,confirmPassword:""}))},pe=()=>{const be={};return O.currentPassword||(be.currentPassword="Current password is required"),O.newPassword?O.newPassword.length<6&&(be.newPassword="Password must be at least 6 characters"):be.newPassword="New password is required",O.confirmPassword?O.newPassword!==O.confirmPassword&&(be.confirmPassword="Passwords do not match"):be.confirmPassword="Please confirm your new password",_(be),Object.keys(be).length===0},Pe=async be=>{var je,Se;if(be.preventDefault(),!!pe()){B(!0);try{await yt.put("/api/users/password",O),Rt.success("Password changed successfully"),F({currentPassword:"",newPassword:"",confirmPassword:""})}catch(ue){console.error("Error changing password:",ue);const He=((Se=(je=ue.response)==null?void 0:je.data)==null?void 0:Se.message)||"Failed to change password";Rt.error(He),He.toLowerCase().includes("current password")&&_({currentPassword:"Current password is incorrect"})}finally{B(!1)}}},Ve=be=>{const{name:je,value:Se}=be.target;q(ue=>({...ue,[je]:Se}))},Fe=be=>{const je=be.target.files[0];if(je){const Se=new FileReader;Se.onloadend=()=>{ee(Se.result)},Se.readAsDataURL(je)}},Be=async be=>{var je;be.preventDefault(),J(!0);try{const Se=new FormData;if(Se.append("name",W.name),(je=ne.current)!=null&&je.files[0]){const He=ne.current.files[0];if(He.size>5*1024*1024)throw new Error("File size should be less than 5MB");Se.append("profileImage",He)}const ue=await mg.put("/users/profile",Se,{headers:{"Content-Type":"multipart/form-data"}});e(He=>({...He,...ue.data})),Rt.success("Profile updated successfully"),G(!1),ne.current&&(ne.current.value=""),ee(null)}catch(Se){if(console.error("Error updating profile:",Se),Se.response)switch(Se.response.status){case 400:Rt.error(Se.response.data.message||"Invalid input. Please check your data.");break;case 401:Rt.error("Your session has expired. Please log in again."),n();break;case 403:Rt.error("You do not have permission to perform this action."),n();break;case 413:Rt.error("The uploaded file is too large. Please choose a smaller file.");break;default:Rt.error("An error occurred while updating your profile.")}else Se.request?Rt.error("Unable to connect to the server. Please check your internet connection."):Rt.error(Se.message||"An unexpected error occurred.")}finally{J(!1)}};return S.jsxs("div",{className:"max-w-5xl mx-auto",children:[S.jsxs("div",{className:"mb-6",children:[S.jsx("div",{className:"sm:hidden",children:S.jsxs("select",{id:"tabs",name:"tabs",className:"block w-full rounded-md border-gray-300 focus:border-indigo-500 focus:ring-indigo-500",value:R,onChange:be=>$(be.target.value),children:[S.jsx("option",{value:"profile",children:"Profile Information"}),S.jsx("option",{value:"face",children:"Face Recognition"}),S.jsx("option",{value:"security",children:"Security Settings"})]})}),S.jsx("div",{className:"hidden sm:block",children:S.jsx("div",{className:"border-b border-gray-200",children:S.jsxs("nav",{className:"-mb-px flex space-x-8","aria-label":"Tabs",children:[S.jsxs("button",{onClick:()=>$("profile"),className:`${R==="profile"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm flex items-center`,children:[S.jsx(Ch,{className:"h-5 w-5 mr-2"}),"Profile Information"]}),S.jsxs("button",{onClick:()=>$("face"),className:`${R==="face"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm flex items-center`,children:[S.jsx(Ms,{className:"h-5 w-5 mr-2"}),"Face Recognition"]}),S.jsxs("button",{onClick:()=>$("security"),className:`${R==="security"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm flex items-center`,children:[S.jsx(g4,{className:"h-5 w-5 mr-2"}),"Security Settings"]})]})})})]}),R==="profile"&&S.jsxs("div",{className:"bg-white shadow overflow-hidden sm:rounded-lg",children:[S.jsxs("div",{className:"px-4 py-5 sm:px-6 flex justify-between items-center",children:[S.jsxs("div",{children:[S.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:"Profile Information"}),S.jsx("p",{className:"mt-1 max-w-2xl text-sm text-gray-500",children:"Personal details and account information"})]}),j?S.jsxs("button",{onClick:()=>G(!1),className:"inline-flex items-center px-3 py-1.5 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:[S.jsx(Eb,{className:"h-4 w-4 mr-1"}),"Cancel"]}):S.jsx("button",{onClick:()=>G(!0),className:"inline-flex items-center px-3 py-1.5 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Edit"})]}),S.jsx("div",{className:"border-t border-gray-200",children:j?S.jsx("div",{className:"p-6",children:S.jsx("form",{onSubmit:Be,children:S.jsxs("div",{className:"space-y-6",children:[S.jsxs("div",{className:"flex flex-col items-center mb-6",children:[S.jsxs("div",{className:"relative",children:[S.jsx("div",{className:"h-32 w-32 rounded-full bg-gray-100 overflow-hidden",children:X?S.jsx("img",{src:X,alt:"Profile preview",className:"h-full w-full object-cover"}):S.jsx(IT,{className:"h-full w-full p-6 text-gray-400"})}),S.jsxs("div",{className:"absolute bottom-0 right-0",children:[S.jsx("label",{htmlFor:"profile-image",className:"flex items-center justify-center h-8 w-8 rounded-full bg-indigo-600 text-white cursor-pointer hover:bg-indigo-700",children:S.jsx(pte,{className:"h-4 w-4"})}),S.jsx("input",{id:"profile-image",name:"profileImage",type:"file",ref:ne,onChange:Fe,className:"sr-only",accept:"image/*"})]})]}),S.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"Click to upload a profile photo"})]}),S.jsxs("div",{className:"grid grid-cols-1 gap-6",children:[S.jsxs("div",{children:[S.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"Full Name"}),S.jsx("input",{type:"text",name:"name",id:"name",value:W.name,onChange:Ve,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"})]}),S.jsxs("div",{children:[S.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email Address"}),S.jsx("input",{type:"email",name:"email",id:"email",value:W.email,disabled:!0,className:"mt-1 block w-full rounded-md border-gray-300 bg-gray-100 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm cursor-not-allowed"}),S.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Email address cannot be changed"})]}),S.jsxs("div",{children:[S.jsx("label",{htmlFor:"registrationId",className:"block text-sm font-medium text-gray-700",children:"Registration ID"}),S.jsx("input",{type:"text",name:"registrationId",id:"registrationId",value:W.registrationId,disabled:!0,className:"mt-1 block w-full rounded-md border-gray-300 bg-gray-100 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm cursor-not-allowed"}),S.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Registration ID cannot be changed"})]})]}),S.jsxs("div",{className:"flex justify-end",children:[S.jsx("button",{type:"button",onClick:()=>G(!1),className:"mr-3 inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Cancel"}),S.jsx("button",{type:"submit",disabled:Z,className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:Z?"Saving...":"Save Changes"})]})]})})}):S.jsxs("dl",{children:[S.jsx("div",{className:"flex items-center justify-center bg-indigo-50 py-6 border-b border-gray-200",children:S.jsx("div",{className:"h-32 w-32 rounded-full bg-white border-4 border-white shadow-md overflow-hidden",children:t!=null&&t.profileImage?S.jsx("img",{src:t.profileImage,alt:t.name,className:"h-full w-full object-cover"}):S.jsx(Ch,{className:"h-full w-full text-gray-300"})})}),S.jsxs("div",{className:"bg-white px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6",children:[S.jsxs("dt",{className:"text-sm font-medium text-gray-500 flex items-center",children:[S.jsx(Ch,{className:"h-5 w-5 mr-2 text-gray-400"}),"Full name"]}),S.jsx("dd",{className:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2",children:(t==null?void 0:t.name)||"Not provided"})]}),S.jsxs("div",{className:"bg-gray-50 px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6",children:[S.jsxs("dt",{className:"text-sm font-medium text-gray-500 flex items-center",children:[S.jsx(ME,{className:"h-5 w-5 mr-2 text-gray-400"}),"Email address"]}),S.jsx("dd",{className:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2",children:(t==null?void 0:t.email)||"Not provided"})]}),S.jsxs("div",{className:"bg-white px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6",children:[S.jsxs("dt",{className:"text-sm font-medium text-gray-500 flex items-center",children:[S.jsx(Ite,{className:"h-5 w-5 mr-2 text-gray-400"}),"Role"]}),S.jsx("dd",{className:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2 capitalize",children:(t==null?void 0:t.role)||"Not provided"})]}),S.jsxs("div",{className:"bg-gray-50 px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6",children:[S.jsxs("dt",{className:"text-sm font-medium text-gray-500 flex items-center",children:[S.jsx(Bte,{className:"h-5 w-5 mr-2 text-gray-400"}),"Registration ID"]}),S.jsx("dd",{className:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2",children:(t==null?void 0:t.registrationId)||"Not provided"})]}),S.jsxs("div",{className:"bg-white px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6",children:[S.jsxs("dt",{className:"text-sm font-medium text-gray-500 flex items-center",children:[S.jsx(Ms,{className:"h-5 w-5 mr-2 text-gray-400"}),"Face recognition"]}),S.jsx("dd",{className:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2",children:r.length>0?S.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[S.jsx(Oo,{className:"h-4 w-4 mr-1"}),"Enabled (",r.length," faces registered)"]}):S.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800",children:[S.jsx(Eb,{className:"h-4 w-4 mr-1"}),"Not configured"]})})]})]})})]}),R==="face"&&S.jsxs("div",{className:"bg-white shadow overflow-hidden sm:rounded-lg",children:[S.jsxs("div",{className:"px-4 py-5 sm:px-6",children:[S.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:"Face Recognition Data"}),S.jsx("p",{className:"mt-1 max-w-2xl text-sm text-gray-500",children:"Register your face for contactless attendance"})]}),S.jsx("div",{className:"border-t border-gray-200 px-4 py-5 sm:p-6",children:a?S.jsxs("div",{className:"space-y-4",children:[S.jsxs("div",{className:"relative",children:[S.jsx(oB,{audio:!1,ref:w,screenshotFormat:"image/jpeg",onUserMedia:()=>d(!0),className:"w-full max-w-md mx-auto rounded-lg shadow-lg",mirrored:!0,videoConstraints:{facingMode:"user"}}),S.jsx("div",{className:"absolute top-0 left-0 right-0 bottom-0 flex items-center justify-center pointer-events-none",children:f&&S.jsx("div",{className:"w-48 h-48 border-4 border-green-500 rounded-full animate-pulse opacity-75"})})]}),S.jsxs("div",{className:"flex justify-center space-x-3",children:[S.jsx("button",{onClick:Oe,className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Cancel"}),S.jsx("button",{onClick:Ie,disabled:!f||g,className:`inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 ${!f||g?"opacity-50 cursor-not-allowed":""}`,children:g?"Registering...":"Register Face"})]}),S.jsx("div",{className:"text-sm text-gray-500 text-center",children:c?f?'Face detected! Click "Register Face" to save.':"No face detected. Please position your face in the frame.":"Camera loading..."})]}):S.jsxs("div",{children:[S.jsx("div",{className:"text-center mb-4",children:S.jsxs("button",{onClick:ze,className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:[S.jsx(Ms,{className:"-ml-1 mr-2 h-5 w-5","aria-hidden":"true"}),"Register New Face"]})}),S.jsxs("div",{className:"mt-6",children:[S.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:"Face Registration Tips:"}),S.jsxs("ul",{className:"list-disc pl-5 space-y-2 text-sm text-gray-600",children:[S.jsx("li",{children:"Make sure your face is well-lit and clearly visible"}),S.jsx("li",{children:"Remove glasses, masks, or other face coverings"}),S.jsx("li",{children:"Look directly at the camera to improve recognition accuracy"}),S.jsx("li",{children:"Consider registering multiple angles for better recognition"}),S.jsx("li",{children:"Each user can register up to 5 face images for improved accuracy"})]})]}),o?S.jsxs("div",{className:"text-center py-4 mt-6",children:[S.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-indigo-600"}),S.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Loading face data..."})]}):r.length>0?S.jsxs("div",{className:"mt-6",children:[S.jsxs("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:["Registered Faces (",r.length,"):"]}),S.jsx("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 md:grid-cols-3",children:r.map(be=>S.jsxs("div",{className:"relative bg-white rounded-lg border border-gray-200 overflow-hidden shadow-sm hover:shadow-md transition-shadow p-4",children:[S.jsxs("div",{className:"flex items-center justify-between mb-2",children:[S.jsxs("div",{className:"flex items-center",children:[S.jsx(Ms,{className:"h-5 w-5 text-gray-400 mr-2"}),S.jsxs("span",{className:"text-sm font-medium text-gray-900",children:["Face Record ",be.faceId.split("_").pop()]})]}),S.jsx("button",{onClick:()=>me(be.faceId),className:"inline-flex items-center p-1.5 border border-transparent rounded-full shadow-sm text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",title:"Delete this face data",children:S.jsx(Hte,{className:"h-4 w-4","aria-hidden":"true"})})]}),S.jsxs("div",{className:"mt-2",children:[S.jsxs("div",{className:"flex items-center justify-between text-sm",children:[S.jsx("span",{className:"text-gray-500",children:"Confidence:"}),S.jsxs("span",{className:"font-medium text-gray-900",children:[Math.round(be.confidence*100),"%"]})]}),S.jsx("div",{className:"mt-1 w-full bg-gray-200 rounded-full h-2",children:S.jsx("div",{className:"h-2 rounded-full bg-green-500",style:{width:`${Math.round(be.confidence*100)}%`}})})]}),S.jsxs("div",{className:"mt-3 text-xs text-gray-500",children:["Registered on ",new Date(be.createdAt).toLocaleDateString()," at ",new Date(be.createdAt).toLocaleTimeString()]})]},be.faceId))})]}):S.jsxs("div",{className:"text-center py-6 mt-6 bg-gray-50 rounded-lg border border-gray-200",children:[S.jsx(Ms,{className:"mx-auto h-12 w-12 text-gray-400"}),S.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No face data registered"}),S.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Get started by registering your face for contactless attendance."})]})]})})]}),R==="security"&&S.jsxs("div",{className:"bg-white shadow overflow-hidden sm:rounded-lg",children:[S.jsxs("div",{className:"px-4 py-5 sm:px-6",children:[S.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:"Security Settings"}),S.jsx("p",{className:"mt-1 max-w-2xl text-sm text-gray-500",children:"Manage your account security"})]}),S.jsx("div",{className:"border-t border-gray-200 px-4 py-5 sm:p-6",children:S.jsxs("div",{className:"max-w-xl",children:[S.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-4",children:"Change Password"}),S.jsxs("form",{onSubmit:Pe,className:"space-y-4",children:[S.jsxs("div",{children:[S.jsx("label",{htmlFor:"currentPassword",className:"block text-sm font-medium text-gray-700",children:"Current Password"}),S.jsxs("div",{className:"mt-1 relative",children:[S.jsx("input",{id:"currentPassword",name:"currentPassword",type:oe?"text":"password",autoComplete:"current-password",value:O.currentPassword,onChange:ke,required:!0,className:`appearance-none block w-full px-3 py-2 border ${M.currentPassword?"border-red-300":"border-gray-300"} rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm pr-10`}),S.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 flex items-center pr-3 text-gray-400 hover:text-gray-500",onClick:()=>ye(!oe),children:oe?S.jsx(wh,{className:"h-5 w-5","aria-hidden":"true"}):S.jsx(vh,{className:"h-5 w-5","aria-hidden":"true"})}),M.currentPassword&&S.jsx("p",{className:"mt-2 text-sm text-red-600",children:M.currentPassword})]})]}),S.jsxs("div",{children:[S.jsx("label",{htmlFor:"newPassword",className:"block text-sm font-medium text-gray-700",children:"New Password"}),S.jsxs("div",{className:"mt-1 relative",children:[S.jsx("input",{id:"newPassword",name:"newPassword",type:ge?"text":"password",autoComplete:"new-password",value:O.newPassword,onChange:ke,required:!0,className:`appearance-none block w-full px-3 py-2 border ${M.newPassword?"border-red-300":"border-gray-300"} rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm pr-10`}),S.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 flex items-center pr-3 text-gray-400 hover:text-gray-500",onClick:()=>ve(!ge),children:ge?S.jsx(wh,{className:"h-5 w-5","aria-hidden":"true"}):S.jsx(vh,{className:"h-5 w-5","aria-hidden":"true"})}),M.newPassword&&S.jsx("p",{className:"mt-2 text-sm text-red-600",children:M.newPassword})]})]}),S.jsxs("div",{children:[S.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700",children:"Confirm New Password"}),S.jsxs("div",{className:"mt-1 relative",children:[S.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:he?"text":"password",autoComplete:"new-password",value:O.confirmPassword,onChange:ke,required:!0,className:`appearance-none block w-full px-3 py-2 border ${M.confirmPassword?"border-red-300":"border-gray-300"} rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm pr-10`}),S.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 flex items-center pr-3 text-gray-400 hover:text-gray-500",onClick:()=>Me(!he),children:he?S.jsx(wh,{className:"h-5 w-5","aria-hidden":"true"}):S.jsx(vh,{className:"h-5 w-5","aria-hidden":"true"})}),M.confirmPassword&&S.jsx("p",{className:"mt-2 text-sm text-red-600",children:M.confirmPassword})]})]}),S.jsx("div",{className:"flex justify-end",children:S.jsx("button",{type:"submit",disabled:V,className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:V?"Changing Password...":"Change Password"})})]}),S.jsx("div",{className:"mt-6 bg-yellow-50 border border-yellow-100 rounded-md p-4",children:S.jsxs("div",{className:"flex",children:[S.jsx("div",{className:"flex-shrink-0",children:S.jsx(g4,{className:"h-5 w-5 text-yellow-600","aria-hidden":"true"})}),S.jsxs("div",{className:"ml-3",children:[S.jsx("h3",{className:"text-sm font-medium text-yellow-800",children:"Password Security Tips"}),S.jsx("div",{className:"mt-2 text-sm text-yellow-700",children:S.jsxs("ul",{className:"list-disc pl-5 space-y-1",children:[S.jsx("li",{children:"Use a combination of letters, numbers, and special characters"}),S.jsx("li",{children:"Create passwords that are at least 8 characters long"}),S.jsx("li",{children:"Avoid using personal information in your password"}),S.jsx("li",{children:"Don't reuse passwords across different websites"})]})})]})]})})]})})]})]})};var pt;(function(t){t[t.QR_CODE=0]="QR_CODE",t[t.AZTEC=1]="AZTEC",t[t.CODABAR=2]="CODABAR",t[t.CODE_39=3]="CODE_39",t[t.CODE_93=4]="CODE_93",t[t.CODE_128=5]="CODE_128",t[t.DATA_MATRIX=6]="DATA_MATRIX",t[t.MAXICODE=7]="MAXICODE",t[t.ITF=8]="ITF",t[t.EAN_13=9]="EAN_13",t[t.EAN_8=10]="EAN_8",t[t.PDF_417=11]="PDF_417",t[t.RSS_14=12]="RSS_14",t[t.RSS_EXPANDED=13]="RSS_EXPANDED",t[t.UPC_A=14]="UPC_A",t[t.UPC_E=15]="UPC_E",t[t.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(pt||(pt={}));var gP=new Map([[pt.QR_CODE,"QR_CODE"],[pt.AZTEC,"AZTEC"],[pt.CODABAR,"CODABAR"],[pt.CODE_39,"CODE_39"],[pt.CODE_93,"CODE_93"],[pt.CODE_128,"CODE_128"],[pt.DATA_MATRIX,"DATA_MATRIX"],[pt.MAXICODE,"MAXICODE"],[pt.ITF,"ITF"],[pt.EAN_13,"EAN_13"],[pt.EAN_8,"EAN_8"],[pt.PDF_417,"PDF_417"],[pt.RSS_14,"RSS_14"],[pt.RSS_EXPANDED,"RSS_EXPANDED"],[pt.UPC_A,"UPC_A"],[pt.UPC_E,"UPC_E"],[pt.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),xP;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.URL=1]="URL"})(xP||(xP={}));function GOe(t){return Object.values(pt).includes(t)}var ow;(function(t){t[t.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",t[t.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(ow||(ow={}));var qOe=function(){function t(){}return t.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",t.SCAN_DEFAULT_FPS=2,t.DEFAULT_DISABLE_FLIP=!1,t.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,t.DEFAULT_SUPPORTED_SCAN_TYPE=[ow.SCAN_TYPE_CAMERA,ow.SCAN_TYPE_FILE],t}(),bW=function(){function t(e,n){this.format=e,this.formatName=n}return t.prototype.toString=function(){return this.formatName},t.create=function(e){if(!gP.has(e))throw"".concat(e," not in html5QrcodeSupportedFormatsTextMap");return new t(e,gP.get(e))},t}(),yP=function(){function t(){}return t.createFromText=function(e){var n={text:e};return{decodedText:e,result:n}},t.createFromQrcodeResult=function(e){return{decodedText:e.text,result:e}},t}(),BI;(function(t){t[t.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",t[t.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",t[t.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(BI||(BI={}));var XOe=function(){function t(){}return t.createFrom=function(e){return{errorMessage:e,type:BI.UNKWOWN_ERROR}},t}(),KOe=function(){function t(e){this.verbose=e}return t.prototype.log=function(e){this.verbose&&console.log(e)},t.prototype.warn=function(e){this.verbose&&console.warn(e)},t.prototype.logError=function(e,n){(this.verbose||n===!0)&&console.error(e)},t.prototype.logErrors=function(e){if(e.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(e)},t}();function Ml(t){return typeof t>"u"||t===null}var fh=function(){function t(){}return t.codeParseError=function(e){return"QR code parse error, error = ".concat(e)},t.errorGettingUserMedia=function(e){return"Error getting userMedia, error = ".concat(e)},t.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},t.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},t.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},t.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},t.scannerPaused=function(){return"Scanner paused"},t}(),wW=function(){function t(){}return t.isMediaStreamConstraintsValid=function(e,n){if(typeof e!="object"){var r=typeof e;return n.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(r,"."),!0),!1}for(var s=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],o=new Set(s),i=Object.keys(e),a=0,l=i;a<l.length;a++){var c=l[a];if(o.has(c))return n.logError("".concat(c," is not supported videoConstaints."),!0),!1}return!0},t}(),jI={exports:{}};(function(t,e){(function(n,r){r(e)})(Gn,function(n){function r(U){return U==null}var s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(U,u){U.__proto__=u}||function(U,u){for(var h in u)u.hasOwnProperty(h)&&(U[h]=u[h])};function o(U,u){s(U,u);function h(){this.constructor=U}U.prototype=u===null?Object.create(u):(h.prototype=u.prototype,new h)}function i(U,u){var h=Object.setPrototypeOf;h?h(U,u):U.__proto__=u}function a(U,u){u===void 0&&(u=U.constructor);var h=Error.captureStackTrace;h&&h(U,u)}var l=function(U){o(u,U);function u(h){var m=this.constructor,y=U.call(this,h)||this;return Object.defineProperty(y,"name",{value:m.name,enumerable:!1}),i(y,m.prototype),a(y),y}return u}(Error);class c extends l{constructor(u=void 0){super(u),this.message=u}getKind(){return this.constructor.kind}}c.kind="Exception";class d extends c{}d.kind="ArgumentException";class f extends c{}f.kind="IllegalArgumentException";class p{constructor(u){if(this.binarizer=u,u===null)throw new f("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(u,h){return this.binarizer.getBlackRow(u,h)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(u,h,m,y){const v=this.binarizer.getLuminanceSource().crop(u,h,m,y);return new p(this.binarizer.createBinarizer(v))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const u=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new p(this.binarizer.createBinarizer(u))}rotateCounterClockwise45(){const u=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new p(this.binarizer.createBinarizer(u))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class g extends c{static getChecksumInstance(){return new g}}g.kind="ChecksumException";class x{constructor(u){this.source=u}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class b{static arraycopy(u,h,m,y,v){for(;v--;)m[y++]=u[h++]}static currentTimeMillis(){return Date.now()}}class w extends c{}w.kind="IndexOutOfBoundsException";class C extends w{constructor(u=void 0,h=void 0){super(h),this.index=u,this.message=h}}C.kind="ArrayIndexOutOfBoundsException";class N{static fill(u,h){for(let m=0,y=u.length;m<y;m++)u[m]=h}static fillWithin(u,h,m,y){N.rangeCheck(u.length,h,m);for(let v=h;v<m;v++)u[v]=y}static rangeCheck(u,h,m){if(h>m)throw new f("fromIndex("+h+") > toIndex("+m+")");if(h<0)throw new C(h);if(m>u)throw new C(m)}static asList(...u){return u}static create(u,h,m){return Array.from({length:u}).map(v=>Array.from({length:h}).fill(m))}static createInt32Array(u,h,m){return Array.from({length:u}).map(v=>Int32Array.from({length:h}).fill(m))}static equals(u,h){if(!u||!h||!u.length||!h.length||u.length!==h.length)return!1;for(let m=0,y=u.length;m<y;m++)if(u[m]!==h[m])return!1;return!0}static hashCode(u){if(u===null)return 0;let h=1;for(const m of u)h=31*h+m;return h}static fillUint8Array(u,h){for(let m=0;m!==u.length;m++)u[m]=h}static copyOf(u,h){return u.slice(0,h)}static copyOfUint8Array(u,h){if(u.length<=h){const m=new Uint8Array(h);return m.set(u),m}return u.slice(0,h)}static copyOfRange(u,h,m){const y=m-h,v=new Int32Array(y);return b.arraycopy(u,h,v,0,y),v}static binarySearch(u,h,m){m===void 0&&(m=N.numberComparator);let y=0,v=u.length-1;for(;y<=v;){const E=v+y>>1,T=m(h,u[E]);if(T>0)y=E+1;else if(T<0)v=E-1;else return E}return-y-1}static numberComparator(u,h){return u-h}}class k{static numberOfTrailingZeros(u){let h;if(u===0)return 32;let m=31;return h=u<<16,h!==0&&(m-=16,u=h),h=u<<8,h!==0&&(m-=8,u=h),h=u<<4,h!==0&&(m-=4,u=h),h=u<<2,h!==0&&(m-=2,u=h),m-(u<<1>>>31)}static numberOfLeadingZeros(u){if(u===0)return 32;let h=1;return u>>>16||(h+=16,u<<=16),u>>>24||(h+=8,u<<=8),u>>>28||(h+=4,u<<=4),u>>>30||(h+=2,u<<=2),h-=u>>>31,h}static toHexString(u){return u.toString(16)}static toBinaryString(u){return String(parseInt(String(u),2))}static bitCount(u){return u=u-(u>>>1&1431655765),u=(u&858993459)+(u>>>2&858993459),u=u+(u>>>4)&252645135,u=u+(u>>>8),u=u+(u>>>16),u&63}static truncDivision(u,h){return Math.trunc(u/h)}static parseInt(u,h=void 0){return parseInt(u,h)}}k.MIN_VALUE_32_BITS=-2147483648,k.MAX_VALUE=Number.MAX_SAFE_INTEGER;class I{constructor(u,h){u===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=u,h==null?this.bits=I.makeArray(u):this.bits=h)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(u){if(u>this.bits.length*32){const h=I.makeArray(u);b.arraycopy(this.bits,0,h,0,this.bits.length),this.bits=h}}get(u){return(this.bits[Math.floor(u/32)]&1<<(u&31))!==0}set(u){this.bits[Math.floor(u/32)]|=1<<(u&31)}flip(u){this.bits[Math.floor(u/32)]^=1<<(u&31)}getNextSet(u){const h=this.size;if(u>=h)return h;const m=this.bits;let y=Math.floor(u/32),v=m[y];v&=~((1<<(u&31))-1);const E=m.length;for(;v===0;){if(++y===E)return h;v=m[y]}const T=y*32+k.numberOfTrailingZeros(v);return T>h?h:T}getNextUnset(u){const h=this.size;if(u>=h)return h;const m=this.bits;let y=Math.floor(u/32),v=~m[y];v&=~((1<<(u&31))-1);const E=m.length;for(;v===0;){if(++y===E)return h;v=~m[y]}const T=y*32+k.numberOfTrailingZeros(v);return T>h?h:T}setBulk(u,h){this.bits[Math.floor(u/32)]=h}setRange(u,h){if(h<u||u<0||h>this.size)throw new f;if(h===u)return;h--;const m=Math.floor(u/32),y=Math.floor(h/32),v=this.bits;for(let E=m;E<=y;E++){const T=E>m?0:u&31,P=(2<<(E<y?31:h&31))-(1<<T);v[E]|=P}}clear(){const u=this.bits.length,h=this.bits;for(let m=0;m<u;m++)h[m]=0}isRange(u,h,m){if(h<u||u<0||h>this.size)throw new f;if(h===u)return!0;h--;const y=Math.floor(u/32),v=Math.floor(h/32),E=this.bits;for(let T=y;T<=v;T++){const D=T>y?0:u&31,z=(2<<(T<v?31:h&31))-(1<<D)&4294967295;if((E[T]&z)!==(m?z:0))return!1}return!0}appendBit(u){this.ensureCapacity(this.size+1),u&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(u,h){if(h<0||h>32)throw new f("Num bits must be between 0 and 32");this.ensureCapacity(this.size+h);for(let m=h;m>0;m--)this.appendBit((u>>m-1&1)===1)}appendBitArray(u){const h=u.size;this.ensureCapacity(this.size+h);for(let m=0;m<h;m++)this.appendBit(u.get(m))}xor(u){if(this.size!==u.size)throw new f("Sizes don't match");const h=this.bits;for(let m=0,y=h.length;m<y;m++)h[m]^=u.bits[m]}toBytes(u,h,m,y){for(let v=0;v<y;v++){let E=0;for(let T=0;T<8;T++)this.get(u)&&(E|=1<<7-T),u++;h[m+v]=E}}getBitArray(){return this.bits}reverse(){const u=new Int32Array(this.bits.length),h=Math.floor((this.size-1)/32),m=h+1,y=this.bits;for(let v=0;v<m;v++){let E=y[v];E=E>>1&1431655765|(E&1431655765)<<1,E=E>>2&858993459|(E&858993459)<<2,E=E>>4&252645135|(E&252645135)<<4,E=E>>8&16711935|(E&16711935)<<8,E=E>>16&65535|(E&65535)<<16,u[h-v]=E}if(this.size!==m*32){const v=m*32-this.size;let E=u[0]>>>v;for(let T=1;T<m;T++){const D=u[T];E|=D<<32-v,u[T-1]=E,E=D>>>v}u[m-1]=E}this.bits=u}static makeArray(u){return new Int32Array(Math.floor((u+31)/32))}equals(u){if(!(u instanceof I))return!1;const h=u;return this.size===h.size&&N.equals(this.bits,h.bits)}hashCode(){return 31*this.size+N.hashCode(this.bits)}toString(){let u="";for(let h=0,m=this.size;h<m;h++)h&7||(u+=" "),u+=this.get(h)?"X":".";return u}clone(){return new I(this.size,this.bits.slice())}}var R;(function(U){U[U.OTHER=0]="OTHER",U[U.PURE_BARCODE=1]="PURE_BARCODE",U[U.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",U[U.TRY_HARDER=3]="TRY_HARDER",U[U.CHARACTER_SET=4]="CHARACTER_SET",U[U.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",U[U.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",U[U.ASSUME_GS1=7]="ASSUME_GS1",U[U.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",U[U.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",U[U.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(R||(R={}));var $=R;class O extends c{static getFormatInstance(){return new O}}O.kind="FormatException";var F;(function(U){U[U.Cp437=0]="Cp437",U[U.ISO8859_1=1]="ISO8859_1",U[U.ISO8859_2=2]="ISO8859_2",U[U.ISO8859_3=3]="ISO8859_3",U[U.ISO8859_4=4]="ISO8859_4",U[U.ISO8859_5=5]="ISO8859_5",U[U.ISO8859_6=6]="ISO8859_6",U[U.ISO8859_7=7]="ISO8859_7",U[U.ISO8859_8=8]="ISO8859_8",U[U.ISO8859_9=9]="ISO8859_9",U[U.ISO8859_10=10]="ISO8859_10",U[U.ISO8859_11=11]="ISO8859_11",U[U.ISO8859_13=12]="ISO8859_13",U[U.ISO8859_14=13]="ISO8859_14",U[U.ISO8859_15=14]="ISO8859_15",U[U.ISO8859_16=15]="ISO8859_16",U[U.SJIS=16]="SJIS",U[U.Cp1250=17]="Cp1250",U[U.Cp1251=18]="Cp1251",U[U.Cp1252=19]="Cp1252",U[U.Cp1256=20]="Cp1256",U[U.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",U[U.UTF8=22]="UTF8",U[U.ASCII=23]="ASCII",U[U.Big5=24]="Big5",U[U.GB18030=25]="GB18030",U[U.EUC_KR=26]="EUC_KR"})(F||(F={}));class M{constructor(u,h,m,...y){this.valueIdentifier=u,this.name=m,typeof h=="number"?this.values=Int32Array.from([h]):this.values=h,this.otherEncodingNames=y,M.VALUE_IDENTIFIER_TO_ECI.set(u,this),M.NAME_TO_ECI.set(m,this);const v=this.values;for(let E=0,T=v.length;E!==T;E++){const D=v[E];M.VALUES_TO_ECI.set(D,this)}for(const E of y)M.NAME_TO_ECI.set(E,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(u){if(u<0||u>=900)throw new O("incorect value");const h=M.VALUES_TO_ECI.get(u);if(h===void 0)throw new O("incorect value");return h}static getCharacterSetECIByName(u){const h=M.NAME_TO_ECI.get(u);if(h===void 0)throw new O("incorect value");return h}equals(u){if(!(u instanceof M))return!1;const h=u;return this.getName()===h.getName()}}M.VALUE_IDENTIFIER_TO_ECI=new Map,M.VALUES_TO_ECI=new Map,M.NAME_TO_ECI=new Map,M.Cp437=new M(F.Cp437,Int32Array.from([0,2]),"Cp437"),M.ISO8859_1=new M(F.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),M.ISO8859_2=new M(F.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),M.ISO8859_3=new M(F.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),M.ISO8859_4=new M(F.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),M.ISO8859_5=new M(F.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),M.ISO8859_6=new M(F.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),M.ISO8859_7=new M(F.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),M.ISO8859_8=new M(F.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),M.ISO8859_9=new M(F.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),M.ISO8859_10=new M(F.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),M.ISO8859_11=new M(F.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),M.ISO8859_13=new M(F.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),M.ISO8859_14=new M(F.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),M.ISO8859_15=new M(F.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),M.ISO8859_16=new M(F.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),M.SJIS=new M(F.SJIS,20,"SJIS","Shift_JIS"),M.Cp1250=new M(F.Cp1250,21,"Cp1250","windows-1250"),M.Cp1251=new M(F.Cp1251,22,"Cp1251","windows-1251"),M.Cp1252=new M(F.Cp1252,23,"Cp1252","windows-1252"),M.Cp1256=new M(F.Cp1256,24,"Cp1256","windows-1256"),M.UnicodeBigUnmarked=new M(F.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),M.UTF8=new M(F.UTF8,26,"UTF8","UTF-8"),M.ASCII=new M(F.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),M.Big5=new M(F.Big5,28,"Big5"),M.GB18030=new M(F.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),M.EUC_KR=new M(F.EUC_KR,30,"EUC_KR","EUC-KR");class _ extends c{}_.kind="UnsupportedOperationException";class V{static decode(u,h){const m=this.encodingName(h);return this.customDecoder?this.customDecoder(u,m):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(m)?this.decodeFallback(u,m):new TextDecoder(m).decode(u)}static shouldDecodeOnFallback(u){return!V.isBrowser()&&u==="ISO-8859-1"}static encode(u,h){const m=this.encodingName(h);return this.customEncoder?this.customEncoder(u,m):typeof TextEncoder>"u"?this.encodeFallback(u):new TextEncoder().encode(u)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(u){return typeof u=="string"?u:u.getName()}static encodingCharacterSet(u){return u instanceof M?u:M.getCharacterSetECIByName(u)}static decodeFallback(u,h){const m=this.encodingCharacterSet(h);if(V.isDecodeFallbackSupported(m)){let y="";for(let v=0,E=u.length;v<E;v++){let T=u[v].toString(16);T.length<2&&(T="0"+T),y+="%"+T}return decodeURIComponent(y)}if(m.equals(M.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(u.buffer));throw new _(`Encoding ${this.encodingName(h)} not supported by fallback.`)}static isDecodeFallbackSupported(u){return u.equals(M.UTF8)||u.equals(M.ISO8859_1)||u.equals(M.ASCII)}static encodeFallback(u){const m=btoa(unescape(encodeURIComponent(u))).split(""),y=[];for(let v=0;v<m.length;v++)y.push(m[v].charCodeAt(0));return new Uint8Array(y)}}class B{static castAsNonUtf8Char(u,h=null){const m=h?h.getName():this.ISO88591;return V.decode(new Uint8Array([u]),m)}static guessEncoding(u,h){if(h!=null&&h.get($.CHARACTER_SET)!==void 0)return h.get($.CHARACTER_SET).toString();const m=u.length;let y=!0,v=!0,E=!0,T=0,D=0,P=0,z=0,H=0,K=0,re=0,le=0,fe=0,Ce=0,Re=0;const Ze=u.length>3&&u[0]===239&&u[1]===187&&u[2]===191;for(let Je=0;Je<m&&(y||v||E);Je++){const Ke=u[Je]&255;E&&(T>0?Ke&128?T--:E=!1:Ke&128&&(Ke&64?(T++,Ke&32?(T++,Ke&16?(T++,Ke&8?E=!1:z++):P++):D++):E=!1)),y&&(Ke>127&&Ke<160?y=!1:Ke>159&&(Ke<192||Ke===215||Ke===247)&&Re++),v&&(H>0?Ke<64||Ke===127||Ke>252?v=!1:H--:Ke===128||Ke===160||Ke>239?v=!1:Ke>160&&Ke<224?(K++,le=0,re++,re>fe&&(fe=re)):Ke>127?(H++,re=0,le++,le>Ce&&(Ce=le)):(re=0,le=0))}return E&&T>0&&(E=!1),v&&H>0&&(v=!1),E&&(Ze||D+P+z>0)?B.UTF8:v&&(B.ASSUME_SHIFT_JIS||fe>=3||Ce>=3)?B.SHIFT_JIS:y&&v?fe===2&&K===2||Re*10>=m?B.SHIFT_JIS:B.ISO88591:y?B.ISO88591:v?B.SHIFT_JIS:E?B.UTF8:B.PLATFORM_DEFAULT_ENCODING}static format(u,...h){let m=-1;function y(E,T,D,P,z,H){if(E==="%%")return"%";if(h[++m]===void 0)return;E=P?parseInt(P.substr(1)):void 0;let K=z?parseInt(z.substr(1)):void 0,re;switch(H){case"s":re=h[m];break;case"c":re=h[m][0];break;case"f":re=parseFloat(h[m]).toFixed(E);break;case"p":re=parseFloat(h[m]).toPrecision(E);break;case"e":re=parseFloat(h[m]).toExponential(E);break;case"x":re=parseInt(h[m]).toString(K||16);break;case"d":re=parseFloat(parseInt(h[m],K||10).toPrecision(E)).toFixed(0);break}re=typeof re=="object"?JSON.stringify(re):(+re).toString(K);let le=parseInt(D),fe=D&&D[0]+""=="0"?"0":" ";for(;re.length<le;)re=T!==void 0?re+fe:fe+re;return re}let v=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return u.replace(v,y)}static getBytes(u,h){return V.encode(u,h)}static getCharCode(u,h=0){return u.charCodeAt(h)}static getCharAt(u){return String.fromCharCode(u)}}B.SHIFT_JIS=M.SJIS.getName(),B.GB2312="GB2312",B.ISO88591=M.ISO8859_1.getName(),B.EUC_JP="EUC_JP",B.UTF8=M.UTF8.getName(),B.PLATFORM_DEFAULT_ENCODING=B.UTF8,B.ASSUME_SHIFT_JIS=!1;class W{constructor(u=""){this.value=u}enableDecoding(u){return this.encoding=u,this}append(u){return typeof u=="string"?this.value+=u.toString():this.encoding?this.value+=B.castAsNonUtf8Char(u,this.encoding):this.value+=String.fromCharCode(u),this}appendChars(u,h,m){for(let y=h;h<h+m;y++)this.append(u[y]);return this}length(){return this.value.length}charAt(u){return this.value.charAt(u)}deleteCharAt(u){this.value=this.value.substr(0,u)+this.value.substring(u+1)}setCharAt(u,h){this.value=this.value.substr(0,u)+h+this.value.substr(u+1)}substring(u,h){return this.value.substring(u,h)}setLengthToZero(){this.value=""}toString(){return this.value}insert(u,h){this.value=this.value.substr(0,u)+h+this.value.substr(u+h.length)}}class q{constructor(u,h,m,y){if(this.width=u,this.height=h,this.rowSize=m,this.bits=y,h==null&&(h=u),this.height=h,u<1||h<1)throw new f("Both dimensions must be greater than 0");m==null&&(m=Math.floor((u+31)/32)),this.rowSize=m,y==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(u){const h=u.length,m=u[0].length,y=new q(m,h);for(let v=0;v<h;v++){const E=u[v];for(let T=0;T<m;T++)E[T]&&y.set(T,v)}return y}static parseFromString(u,h,m){if(u===null)throw new f("stringRepresentation cannot be null");const y=new Array(u.length);let v=0,E=0,T=-1,D=0,P=0;for(;P<u.length;)if(u.charAt(P)===`
`||u.charAt(P)==="\r"){if(v>E){if(T===-1)T=v-E;else if(v-E!==T)throw new f("row lengths do not match");E=v,D++}P++}else if(u.substring(P,P+h.length)===h)P+=h.length,y[v]=!0,v++;else if(u.substring(P,P+m.length)===m)P+=m.length,y[v]=!1,v++;else throw new f("illegal character encountered: "+u.substring(P));if(v>E){if(T===-1)T=v-E;else if(v-E!==T)throw new f("row lengths do not match");D++}const z=new q(T,D);for(let H=0;H<v;H++)y[H]&&z.set(Math.floor(H%T),Math.floor(H/T));return z}get(u,h){const m=h*this.rowSize+Math.floor(u/32);return(this.bits[m]>>>(u&31)&1)!==0}set(u,h){const m=h*this.rowSize+Math.floor(u/32);this.bits[m]|=1<<(u&31)&4294967295}unset(u,h){const m=h*this.rowSize+Math.floor(u/32);this.bits[m]&=~(1<<(u&31)&4294967295)}flip(u,h){const m=h*this.rowSize+Math.floor(u/32);this.bits[m]^=1<<(u&31)&4294967295}xor(u){if(this.width!==u.getWidth()||this.height!==u.getHeight()||this.rowSize!==u.getRowSize())throw new f("input matrix dimensions do not match");const h=new I(Math.floor(this.width/32)+1),m=this.rowSize,y=this.bits;for(let v=0,E=this.height;v<E;v++){const T=v*m,D=u.getRow(v,h).getBitArray();for(let P=0;P<m;P++)y[T+P]^=D[P]}}clear(){const u=this.bits,h=u.length;for(let m=0;m<h;m++)u[m]=0}setRegion(u,h,m,y){if(h<0||u<0)throw new f("Left and top must be nonnegative");if(y<1||m<1)throw new f("Height and width must be at least 1");const v=u+m,E=h+y;if(E>this.height||v>this.width)throw new f("The region must fit inside the matrix");const T=this.rowSize,D=this.bits;for(let P=h;P<E;P++){const z=P*T;for(let H=u;H<v;H++)D[z+Math.floor(H/32)]|=1<<(H&31)&4294967295}}getRow(u,h){h==null||h.getSize()<this.width?h=new I(this.width):h.clear();const m=this.rowSize,y=this.bits,v=u*m;for(let E=0;E<m;E++)h.setBulk(E*32,y[v+E]);return h}setRow(u,h){b.arraycopy(h.getBitArray(),0,this.bits,u*this.rowSize,this.rowSize)}rotate180(){const u=this.getWidth(),h=this.getHeight();let m=new I(u),y=new I(u);for(let v=0,E=Math.floor((h+1)/2);v<E;v++)m=this.getRow(v,m),y=this.getRow(h-1-v,y),m.reverse(),y.reverse(),this.setRow(v,y),this.setRow(h-1-v,m)}getEnclosingRectangle(){const u=this.width,h=this.height,m=this.rowSize,y=this.bits;let v=u,E=h,T=-1,D=-1;for(let P=0;P<h;P++)for(let z=0;z<m;z++){const H=y[P*m+z];if(H!==0){if(P<E&&(E=P),P>D&&(D=P),z*32<v){let K=0;for(;!(H<<31-K&4294967295);)K++;z*32+K<v&&(v=z*32+K)}if(z*32+31>T){let K=31;for(;!(H>>>K);)K--;z*32+K>T&&(T=z*32+K)}}}return T<v||D<E?null:Int32Array.from([v,E,T-v+1,D-E+1])}getTopLeftOnBit(){const u=this.rowSize,h=this.bits;let m=0;for(;m<h.length&&h[m]===0;)m++;if(m===h.length)return null;const y=m/u;let v=m%u*32;const E=h[m];let T=0;for(;!(E<<31-T&4294967295);)T++;return v+=T,Int32Array.from([v,y])}getBottomRightOnBit(){const u=this.rowSize,h=this.bits;let m=h.length-1;for(;m>=0&&h[m]===0;)m--;if(m<0)return null;const y=Math.floor(m/u);let v=Math.floor(m%u)*32;const E=h[m];let T=31;for(;!(E>>>T);)T--;return v+=T,Int32Array.from([v,y])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(u){if(!(u instanceof q))return!1;const h=u;return this.width===h.width&&this.height===h.height&&this.rowSize===h.rowSize&&N.equals(this.bits,h.bits)}hashCode(){let u=this.width;return u=31*u+this.width,u=31*u+this.height,u=31*u+this.rowSize,u=31*u+N.hashCode(this.bits),u}toString(u="X ",h="  ",m=`
`){return this.buildToString(u,h,m)}buildToString(u,h,m){let y=new W;for(let v=0,E=this.height;v<E;v++){for(let T=0,D=this.width;T<D;T++)y.append(this.get(T,v)?u:h);y.append(m)}return y.toString()}clone(){return new q(this.width,this.height,this.rowSize,this.bits.slice())}}class j extends c{static getNotFoundInstance(){return new j}}j.kind="NotFoundException";class G extends x{constructor(u){super(u),this.luminances=G.EMPTY,this.buckets=new Int32Array(G.LUMINANCE_BUCKETS)}getBlackRow(u,h){const m=this.getLuminanceSource(),y=m.getWidth();h==null||h.getSize()<y?h=new I(y):h.clear(),this.initArrays(y);const v=m.getRow(u,this.luminances),E=this.buckets;for(let D=0;D<y;D++)E[(v[D]&255)>>G.LUMINANCE_SHIFT]++;const T=G.estimateBlackPoint(E);if(y<3)for(let D=0;D<y;D++)(v[D]&255)<T&&h.set(D);else{let D=v[0]&255,P=v[1]&255;for(let z=1;z<y-1;z++){const H=v[z+1]&255;(P*4-D-H)/2<T&&h.set(z),D=P,P=H}}return h}getBlackMatrix(){const u=this.getLuminanceSource(),h=u.getWidth(),m=u.getHeight(),y=new q(h,m);this.initArrays(h);const v=this.buckets;for(let D=1;D<5;D++){const P=Math.floor(m*D/5),z=u.getRow(P,this.luminances),H=Math.floor(h*4/5);for(let K=Math.floor(h/5);K<H;K++){const re=z[K]&255;v[re>>G.LUMINANCE_SHIFT]++}}const E=G.estimateBlackPoint(v),T=u.getMatrix();for(let D=0;D<m;D++){const P=D*h;for(let z=0;z<h;z++)(T[P+z]&255)<E&&y.set(z,D)}return y}createBinarizer(u){return new G(u)}initArrays(u){this.luminances.length<u&&(this.luminances=new Uint8ClampedArray(u));const h=this.buckets;for(let m=0;m<G.LUMINANCE_BUCKETS;m++)h[m]=0}static estimateBlackPoint(u){const h=u.length;let m=0,y=0,v=0;for(let z=0;z<h;z++)u[z]>v&&(y=z,v=u[z]),u[z]>m&&(m=u[z]);let E=0,T=0;for(let z=0;z<h;z++){const H=z-y,K=u[z]*H*H;K>T&&(E=z,T=K)}if(y>E){const z=y;y=E,E=z}if(E-y<=h/16)throw new j;let D=E-1,P=-1;for(let z=E-1;z>y;z--){const H=z-y,K=H*H*(E-z)*(m-u[z]);K>P&&(D=z,P=K)}return D<<G.LUMINANCE_SHIFT}}G.LUMINANCE_BITS=5,G.LUMINANCE_SHIFT=8-G.LUMINANCE_BITS,G.LUMINANCE_BUCKETS=1<<G.LUMINANCE_BITS,G.EMPTY=Uint8ClampedArray.from([0]);class Z extends G{constructor(u){super(u),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const u=this.getLuminanceSource(),h=u.getWidth(),m=u.getHeight();if(h>=Z.MINIMUM_DIMENSION&&m>=Z.MINIMUM_DIMENSION){const y=u.getMatrix();let v=h>>Z.BLOCK_SIZE_POWER;h&Z.BLOCK_SIZE_MASK&&v++;let E=m>>Z.BLOCK_SIZE_POWER;m&Z.BLOCK_SIZE_MASK&&E++;const T=Z.calculateBlackPoints(y,v,E,h,m),D=new q(h,m);Z.calculateThresholdForBlock(y,v,E,h,m,T,D),this.matrix=D}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(u){return new Z(u)}static calculateThresholdForBlock(u,h,m,y,v,E,T){const D=v-Z.BLOCK_SIZE,P=y-Z.BLOCK_SIZE;for(let z=0;z<m;z++){let H=z<<Z.BLOCK_SIZE_POWER;H>D&&(H=D);const K=Z.cap(z,2,m-3);for(let re=0;re<h;re++){let le=re<<Z.BLOCK_SIZE_POWER;le>P&&(le=P);const fe=Z.cap(re,2,h-3);let Ce=0;for(let Ze=-2;Ze<=2;Ze++){const Je=E[K+Ze];Ce+=Je[fe-2]+Je[fe-1]+Je[fe]+Je[fe+1]+Je[fe+2]}const Re=Ce/25;Z.thresholdBlock(u,le,H,Re,y,T)}}}static cap(u,h,m){return u<h?h:u>m?m:u}static thresholdBlock(u,h,m,y,v,E){for(let T=0,D=m*v+h;T<Z.BLOCK_SIZE;T++,D+=v)for(let P=0;P<Z.BLOCK_SIZE;P++)(u[D+P]&255)<=y&&E.set(h+P,m+T)}static calculateBlackPoints(u,h,m,y,v){const E=v-Z.BLOCK_SIZE,T=y-Z.BLOCK_SIZE,D=new Array(m);for(let P=0;P<m;P++){D[P]=new Int32Array(h);let z=P<<Z.BLOCK_SIZE_POWER;z>E&&(z=E);for(let H=0;H<h;H++){let K=H<<Z.BLOCK_SIZE_POWER;K>T&&(K=T);let re=0,le=255,fe=0;for(let Re=0,Ze=z*y+K;Re<Z.BLOCK_SIZE;Re++,Ze+=y){for(let Je=0;Je<Z.BLOCK_SIZE;Je++){const Ke=u[Ze+Je]&255;re+=Ke,Ke<le&&(le=Ke),Ke>fe&&(fe=Ke)}if(fe-le>Z.MIN_DYNAMIC_RANGE)for(Re++,Ze+=y;Re<Z.BLOCK_SIZE;Re++,Ze+=y)for(let Je=0;Je<Z.BLOCK_SIZE;Je++)re+=u[Ze+Je]&255}let Ce=re>>Z.BLOCK_SIZE_POWER*2;if(fe-le<=Z.MIN_DYNAMIC_RANGE&&(Ce=le/2,P>0&&H>0)){const Re=(D[P-1][H]+2*D[P][H-1]+D[P-1][H-1])/4;le<Re&&(Ce=Re)}D[P][H]=Ce}}return D}}Z.BLOCK_SIZE_POWER=3,Z.BLOCK_SIZE=1<<Z.BLOCK_SIZE_POWER,Z.BLOCK_SIZE_MASK=Z.BLOCK_SIZE-1,Z.MINIMUM_DIMENSION=Z.BLOCK_SIZE*5,Z.MIN_DYNAMIC_RANGE=24;class J{constructor(u,h){this.width=u,this.height=h}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(u,h,m,y){throw new _("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new _("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new _("This luminance source does not support rotation by 45 degrees.")}toString(){const u=new Uint8ClampedArray(this.width);let h=new W;for(let m=0;m<this.height;m++){const y=this.getRow(m,u);for(let v=0;v<this.width;v++){const E=y[v]&255;let T;E<64?T="#":E<128?T="+":E<192?T=".":T=" ",h.append(T)}h.append(`
`)}return h.toString()}}class X extends J{constructor(u){super(u.getWidth(),u.getHeight()),this.delegate=u}getRow(u,h){const m=this.delegate.getRow(u,h),y=this.getWidth();for(let v=0;v<y;v++)m[v]=255-(m[v]&255);return m}getMatrix(){const u=this.delegate.getMatrix(),h=this.getWidth()*this.getHeight(),m=new Uint8ClampedArray(h);for(let y=0;y<h;y++)m[y]=255-(u[y]&255);return m}isCropSupported(){return this.delegate.isCropSupported()}crop(u,h,m,y){return new X(this.delegate.crop(u,h,m,y))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new X(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new X(this.delegate.rotateCounterClockwise45())}}class ee extends J{constructor(u){super(u.width,u.height),this.canvas=u,this.tempCanvasElement=null,this.buffer=ee.makeBufferFromCanvasImageData(u)}static makeBufferFromCanvasImageData(u){const h=u.getContext("2d").getImageData(0,0,u.width,u.height);return ee.toGrayscaleBuffer(h.data,u.width,u.height)}static toGrayscaleBuffer(u,h,m){const y=new Uint8ClampedArray(h*m);for(let v=0,E=0,T=u.length;v<T;v+=4,E++){let D;if(u[v+3]===0)D=255;else{const z=u[v],H=u[v+1],K=u[v+2];D=306*z+601*H+117*K+512>>10}y[E]=D}return y}getRow(u,h){if(u<0||u>=this.getHeight())throw new f("Requested row is outside the image: "+u);const m=this.getWidth(),y=u*m;return h===null?h=this.buffer.slice(y,y+m):(h.length<m&&(h=new Uint8ClampedArray(m)),h.set(this.buffer.slice(y,y+m))),h}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(u,h,m,y){return super.crop(u,h,m,y),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const u=this.canvas.ownerDocument.createElement("canvas");u.width=this.canvas.width,u.height=this.canvas.height,this.tempCanvasElement=u}return this.tempCanvasElement}rotate(u){const h=this.getTempCanvasElement(),m=h.getContext("2d"),y=u*ee.DEGREE_TO_RADIANS,v=this.canvas.width,E=this.canvas.height,T=Math.ceil(Math.abs(Math.cos(y))*v+Math.abs(Math.sin(y))*E),D=Math.ceil(Math.abs(Math.sin(y))*v+Math.abs(Math.cos(y))*E);return h.width=T,h.height=D,m.translate(T/2,D/2),m.rotate(y),m.drawImage(this.canvas,v/-2,E/-2),this.buffer=ee.makeBufferFromCanvasImageData(h),this}invert(){return new X(this)}}ee.DEGREE_TO_RADIANS=Math.PI/180;class ne{constructor(u,h,m){this.deviceId=u,this.label=h,this.kind="videoinput",this.groupId=m||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var oe=(globalThis||Gn||self||window||void 0)&&(globalThis||Gn||self||window||void 0).__awaiter||function(U,u,h,m){function y(v){return v instanceof h?v:new h(function(E){E(v)})}return new(h||(h=Promise))(function(v,E){function T(z){try{P(m.next(z))}catch(H){E(H)}}function D(z){try{P(m.throw(z))}catch(H){E(H)}}function P(z){z.done?v(z.value):y(z.value).then(T,D)}P((m=m.apply(U,u||[])).next())})};class ye{constructor(u,h=500,m){this.reader=u,this.timeBetweenScansMillis=h,this._hints=m,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(u){this._timeBetweenDecodingAttempts=u<0?0:u}set hints(u){this._hints=u||null}get hints(){return this._hints}listVideoInputDevices(){return oe(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const u=yield navigator.mediaDevices.enumerateDevices(),h=[];for(const m of u){const y=m.kind==="video"?"videoinput":m.kind;if(y!=="videoinput")continue;const v=m.deviceId||m.id,E=m.label||`Video device ${h.length+1}`,T=m.groupId,D={deviceId:v,label:E,kind:y,groupId:T};h.push(D)}return h})}getVideoInputDevices(){return oe(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(h=>new ne(h.deviceId,h.label))})}findDeviceById(u){return oe(this,void 0,void 0,function*(){const h=yield this.listVideoInputDevices();return h?h.find(m=>m.deviceId===u):null})}decodeFromInputVideoDevice(u,h){return oe(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(u,h)})}decodeOnceFromVideoDevice(u,h){return oe(this,void 0,void 0,function*(){this.reset();let m;u?m={deviceId:{exact:u}}:m={facingMode:"environment"};const y={video:m};return yield this.decodeOnceFromConstraints(y,h)})}decodeOnceFromConstraints(u,h){return oe(this,void 0,void 0,function*(){const m=yield navigator.mediaDevices.getUserMedia(u);return yield this.decodeOnceFromStream(m,h)})}decodeOnceFromStream(u,h){return oe(this,void 0,void 0,function*(){this.reset();const m=yield this.attachStreamToVideo(u,h);return yield this.decodeOnce(m)})}decodeFromInputVideoDeviceContinuously(u,h,m){return oe(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(u,h,m)})}decodeFromVideoDevice(u,h,m){return oe(this,void 0,void 0,function*(){let y;u?y={deviceId:{exact:u}}:y={facingMode:"environment"};const v={video:y};return yield this.decodeFromConstraints(v,h,m)})}decodeFromConstraints(u,h,m){return oe(this,void 0,void 0,function*(){const y=yield navigator.mediaDevices.getUserMedia(u);return yield this.decodeFromStream(y,h,m)})}decodeFromStream(u,h,m){return oe(this,void 0,void 0,function*(){this.reset();const y=yield this.attachStreamToVideo(u,h);return yield this.decodeContinuously(y,m)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(u,h){return oe(this,void 0,void 0,function*(){const m=this.prepareVideoElement(h);return this.addVideoSource(m,u),this.videoElement=m,this.stream=u,yield this.playVideoOnLoadAsync(m),m})}playVideoOnLoadAsync(u){return new Promise((h,m)=>this.playVideoOnLoad(u,()=>h()))}playVideoOnLoad(u,h){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(u),u.addEventListener("ended",this.videoEndedListener),u.addEventListener("canplay",this.videoCanPlayListener),u.addEventListener("playing",h),this.tryPlayVideo(u)}isVideoPlaying(u){return u.currentTime>0&&!u.paused&&!u.ended&&u.readyState>2}tryPlayVideo(u){return oe(this,void 0,void 0,function*(){if(this.isVideoPlaying(u)){console.warn("Trying to play video that is already playing.");return}try{yield u.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(u,h){const m=document.getElementById(u);if(!m)throw new d(`element with id '${u}' not found`);if(m.nodeName.toLowerCase()!==h.toLowerCase())throw new d(`element with id '${u}' must be an ${h} element`);return m}decodeFromImage(u,h){if(!u&&!h)throw new d("either imageElement with a src set or an url must be provided");return h&&!u?this.decodeFromImageUrl(h):this.decodeFromImageElement(u)}decodeFromVideo(u,h){if(!u&&!h)throw new d("Either an element with a src set or an URL must be provided");return h&&!u?this.decodeFromVideoUrl(h):this.decodeFromVideoElement(u)}decodeFromVideoContinuously(u,h,m){if(u===void 0&&h===void 0)throw new d("Either an element with a src set or an URL must be provided");return h&&!u?this.decodeFromVideoUrlContinuously(h,m):this.decodeFromVideoElementContinuously(u,m)}decodeFromImageElement(u){if(!u)throw new d("An image element must be provided.");this.reset();const h=this.prepareImageElement(u);this.imageElement=h;let m;return this.isImageLoaded(h)?m=this.decodeOnce(h,!1,!0):m=this._decodeOnLoadImage(h),m}decodeFromVideoElement(u){const h=this._decodeFromVideoElementSetup(u);return this._decodeOnLoadVideo(h)}decodeFromVideoElementContinuously(u,h){const m=this._decodeFromVideoElementSetup(u);return this._decodeOnLoadVideoContinuously(m,h)}_decodeFromVideoElementSetup(u){if(!u)throw new d("A video element must be provided.");this.reset();const h=this.prepareVideoElement(u);return this.videoElement=h,h}decodeFromImageUrl(u){if(!u)throw new d("An URL must be provided.");this.reset();const h=this.prepareImageElement();this.imageElement=h;const m=this._decodeOnLoadImage(h);return h.src=u,m}decodeFromVideoUrl(u){if(!u)throw new d("An URL must be provided.");this.reset();const h=this.prepareVideoElement(),m=this.decodeFromVideoElement(h);return h.src=u,m}decodeFromVideoUrlContinuously(u,h){if(!u)throw new d("An URL must be provided.");this.reset();const m=this.prepareVideoElement(),y=this.decodeFromVideoElementContinuously(m,h);return m.src=u,y}_decodeOnLoadImage(u){return new Promise((h,m)=>{this.imageLoadedListener=()=>this.decodeOnce(u,!1,!0).then(h,m),u.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(u){return oe(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(u),yield this.decodeOnce(u)})}_decodeOnLoadVideoContinuously(u,h){return oe(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(u),this.decodeContinuously(u,h)})}isImageLoaded(u){return!(!u.complete||u.naturalWidth===0)}prepareImageElement(u){let h;return typeof u>"u"&&(h=document.createElement("img"),h.width=200,h.height=200),typeof u=="string"&&(h=this.getMediaElement(u,"img")),u instanceof HTMLImageElement&&(h=u),h}prepareVideoElement(u){let h;return!u&&typeof document<"u"&&(h=document.createElement("video"),h.width=200,h.height=200),typeof u=="string"&&(h=this.getMediaElement(u,"video")),u instanceof HTMLVideoElement&&(h=u),h.setAttribute("autoplay","true"),h.setAttribute("muted","true"),h.setAttribute("playsinline","true"),h}decodeOnce(u,h=!0,m=!0){this._stopAsyncDecode=!1;const y=(v,E)=>{if(this._stopAsyncDecode){E(new j("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const T=this.decode(u);v(T)}catch(T){const D=h&&T instanceof j,z=(T instanceof g||T instanceof O)&&m;if(D||z)return setTimeout(y,this._timeBetweenDecodingAttempts,v,E);E(T)}};return new Promise((v,E)=>y(v,E))}decodeContinuously(u,h){this._stopContinuousDecode=!1;const m=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const y=this.decode(u);h(y,null),setTimeout(m,this.timeBetweenScansMillis)}catch(y){h(null,y);const v=y instanceof g||y instanceof O,E=y instanceof j;(v||E)&&setTimeout(m,this._timeBetweenDecodingAttempts)}};m()}decode(u){const h=this.createBinaryBitmap(u);return this.decodeBitmap(h)}_isHTMLVideoElement(u){return u.videoWidth!==0}drawFrameOnCanvas(u,h,m){h||(h={sx:0,sy:0,sWidth:u.videoWidth,sHeight:u.videoHeight,dx:0,dy:0,dWidth:u.videoWidth,dHeight:u.videoHeight}),m||(m=this.captureCanvasContext),m.drawImage(u,h.sx,h.sy,h.sWidth,h.sHeight,h.dx,h.dy,h.dWidth,h.dHeight)}drawImageOnCanvas(u,h,m=this.captureCanvasContext){h||(h={sx:0,sy:0,sWidth:u.naturalWidth,sHeight:u.naturalHeight,dx:0,dy:0,dWidth:u.naturalWidth,dHeight:u.naturalHeight}),m||(m=this.captureCanvasContext),m.drawImage(u,h.sx,h.sy,h.sWidth,h.sHeight,h.dx,h.dy,h.dWidth,h.dHeight)}createBinaryBitmap(u){this.getCaptureCanvasContext(u),this._isHTMLVideoElement(u)?this.drawFrameOnCanvas(u):this.drawImageOnCanvas(u);const h=this.getCaptureCanvas(u),m=new ee(h),y=new Z(m);return new p(y)}getCaptureCanvasContext(u){if(!this.captureCanvasContext){const m=this.getCaptureCanvas(u).getContext("2d");this.captureCanvasContext=m}return this.captureCanvasContext}getCaptureCanvas(u){if(!this.captureCanvas){const h=this.createCaptureCanvas(u);this.captureCanvas=h}return this.captureCanvas}decodeBitmap(u){return this.reader.decode(u,this._hints)}createCaptureCanvas(u){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const h=document.createElement("canvas");let m,y;return typeof u<"u"&&(u instanceof HTMLVideoElement?(m=u.videoWidth,y=u.videoHeight):u instanceof HTMLImageElement&&(m=u.naturalWidth||u.width,y=u.naturalHeight||u.height)),h.style.width=m+"px",h.style.height=y+"px",h.width=m,h.height=y,h}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(u=>u.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(u,h){try{u.srcObject=h}catch{u.src=URL.createObjectURL(h)}}cleanVideoSource(u){try{u.srcObject=null}catch{u.src=""}this.videoElement.removeAttribute("src")}}class ge{constructor(u,h,m=h==null?0:8*h.length,y,v,E=b.currentTimeMillis()){this.text=u,this.rawBytes=h,this.numBits=m,this.resultPoints=y,this.format=v,this.timestamp=E,this.text=u,this.rawBytes=h,m==null?this.numBits=h==null?0:8*h.length:this.numBits=m,this.resultPoints=y,this.format=v,this.resultMetadata=null,E==null?this.timestamp=b.currentTimeMillis():this.timestamp=E}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(u,h){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(u,h)}putAllMetadata(u){u!==null&&(this.resultMetadata===null?this.resultMetadata=u:this.resultMetadata=new Map(u))}addResultPoints(u){const h=this.resultPoints;if(h===null)this.resultPoints=u;else if(u!==null&&u.length>0){const m=new Array(h.length+u.length);b.arraycopy(h,0,m,0,h.length),b.arraycopy(u,0,m,h.length,u.length),this.resultPoints=m}}getTimestamp(){return this.timestamp}toString(){return this.text}}var ve;(function(U){U[U.AZTEC=0]="AZTEC",U[U.CODABAR=1]="CODABAR",U[U.CODE_39=2]="CODE_39",U[U.CODE_93=3]="CODE_93",U[U.CODE_128=4]="CODE_128",U[U.DATA_MATRIX=5]="DATA_MATRIX",U[U.EAN_8=6]="EAN_8",U[U.EAN_13=7]="EAN_13",U[U.ITF=8]="ITF",U[U.MAXICODE=9]="MAXICODE",U[U.PDF_417=10]="PDF_417",U[U.QR_CODE=11]="QR_CODE",U[U.RSS_14=12]="RSS_14",U[U.RSS_EXPANDED=13]="RSS_EXPANDED",U[U.UPC_A=14]="UPC_A",U[U.UPC_E=15]="UPC_E",U[U.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(ve||(ve={}));var he=ve,Me;(function(U){U[U.OTHER=0]="OTHER",U[U.ORIENTATION=1]="ORIENTATION",U[U.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",U[U.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",U[U.ISSUE_NUMBER=4]="ISSUE_NUMBER",U[U.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",U[U.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",U[U.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",U[U.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",U[U.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",U[U.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(Me||(Me={}));var ze=Me;class Oe{constructor(u,h,m,y,v=-1,E=-1){this.rawBytes=u,this.text=h,this.byteSegments=m,this.ecLevel=y,this.structuredAppendSequenceNumber=v,this.structuredAppendParity=E,this.numBits=u==null?0:8*u.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(u){this.numBits=u}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(u){this.errorsCorrected=u}getErasures(){return this.erasures}setErasures(u){this.erasures=u}getOther(){return this.other}setOther(u){this.other=u}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class Ie{exp(u){return this.expTable[u]}log(u){if(u===0)throw new f;return this.logTable[u]}static addOrSubtract(u,h){return u^h}}class me{constructor(u,h){if(h.length===0)throw new f;this.field=u;const m=h.length;if(m>1&&h[0]===0){let y=1;for(;y<m&&h[y]===0;)y++;y===m?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(m-y),b.arraycopy(h,y,this.coefficients,0,this.coefficients.length))}else this.coefficients=h}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(u){return this.coefficients[this.coefficients.length-1-u]}evaluateAt(u){if(u===0)return this.getCoefficient(0);const h=this.coefficients;let m;if(u===1){m=0;for(let E=0,T=h.length;E!==T;E++){const D=h[E];m=Ie.addOrSubtract(m,D)}return m}m=h[0];const y=h.length,v=this.field;for(let E=1;E<y;E++)m=Ie.addOrSubtract(v.multiply(u,m),h[E]);return m}addOrSubtract(u){if(!this.field.equals(u.field))throw new f("GenericGFPolys do not have same GenericGF field");if(this.isZero())return u;if(u.isZero())return this;let h=this.coefficients,m=u.coefficients;if(h.length>m.length){const E=h;h=m,m=E}let y=new Int32Array(m.length);const v=m.length-h.length;b.arraycopy(m,0,y,0,v);for(let E=v;E<m.length;E++)y[E]=Ie.addOrSubtract(h[E-v],m[E]);return new me(this.field,y)}multiply(u){if(!this.field.equals(u.field))throw new f("GenericGFPolys do not have same GenericGF field");if(this.isZero()||u.isZero())return this.field.getZero();const h=this.coefficients,m=h.length,y=u.coefficients,v=y.length,E=new Int32Array(m+v-1),T=this.field;for(let D=0;D<m;D++){const P=h[D];for(let z=0;z<v;z++)E[D+z]=Ie.addOrSubtract(E[D+z],T.multiply(P,y[z]))}return new me(T,E)}multiplyScalar(u){if(u===0)return this.field.getZero();if(u===1)return this;const h=this.coefficients.length,m=this.field,y=new Int32Array(h),v=this.coefficients;for(let E=0;E<h;E++)y[E]=m.multiply(v[E],u);return new me(m,y)}multiplyByMonomial(u,h){if(u<0)throw new f;if(h===0)return this.field.getZero();const m=this.coefficients,y=m.length,v=new Int32Array(y+u),E=this.field;for(let T=0;T<y;T++)v[T]=E.multiply(m[T],h);return new me(E,v)}divide(u){if(!this.field.equals(u.field))throw new f("GenericGFPolys do not have same GenericGF field");if(u.isZero())throw new f("Divide by 0");const h=this.field;let m=h.getZero(),y=this;const v=u.getCoefficient(u.getDegree()),E=h.inverse(v);for(;y.getDegree()>=u.getDegree()&&!y.isZero();){const T=y.getDegree()-u.getDegree(),D=h.multiply(y.getCoefficient(y.getDegree()),E),P=u.multiplyByMonomial(T,D),z=h.buildMonomial(T,D);m=m.addOrSubtract(z),y=y.addOrSubtract(P)}return[m,y]}toString(){let u="";for(let h=this.getDegree();h>=0;h--){let m=this.getCoefficient(h);if(m!==0){if(m<0?(u+=" - ",m=-m):u.length>0&&(u+=" + "),h===0||m!==1){const y=this.field.log(m);y===0?u+="1":y===1?u+="a":(u+="a^",u+=y)}h!==0&&(h===1?u+="x":(u+="x^",u+=h))}}return u}}class ke extends c{}ke.kind="ArithmeticException";class pe extends Ie{constructor(u,h,m){super(),this.primitive=u,this.size=h,this.generatorBase=m;const y=new Int32Array(h);let v=1;for(let T=0;T<h;T++)y[T]=v,v*=2,v>=h&&(v^=u,v&=h-1);this.expTable=y;const E=new Int32Array(h);for(let T=0;T<h-1;T++)E[y[T]]=T;this.logTable=E,this.zero=new me(this,Int32Array.from([0])),this.one=new me(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(u,h){if(u<0)throw new f;if(h===0)return this.zero;const m=new Int32Array(u+1);return m[0]=h,new me(this,m)}inverse(u){if(u===0)throw new ke;return this.expTable[this.size-this.logTable[u]-1]}multiply(u,h){return u===0||h===0?0:this.expTable[(this.logTable[u]+this.logTable[h])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+k.toHexString(this.primitive)+","+this.size+")"}equals(u){return u===this}}pe.AZTEC_DATA_12=new pe(4201,4096,1),pe.AZTEC_DATA_10=new pe(1033,1024,1),pe.AZTEC_DATA_6=new pe(67,64,1),pe.AZTEC_PARAM=new pe(19,16,1),pe.QR_CODE_FIELD_256=new pe(285,256,0),pe.DATA_MATRIX_FIELD_256=new pe(301,256,1),pe.AZTEC_DATA_8=pe.DATA_MATRIX_FIELD_256,pe.MAXICODE_FIELD_64=pe.AZTEC_DATA_6;class Pe extends c{}Pe.kind="ReedSolomonException";class Ve extends c{}Ve.kind="IllegalStateException";class Fe{constructor(u){this.field=u}decode(u,h){const m=this.field,y=new me(m,u),v=new Int32Array(h);let E=!0;for(let re=0;re<h;re++){const le=y.evaluateAt(m.exp(re+m.getGeneratorBase()));v[v.length-1-re]=le,le!==0&&(E=!1)}if(E)return;const T=new me(m,v),D=this.runEuclideanAlgorithm(m.buildMonomial(h,1),T,h),P=D[0],z=D[1],H=this.findErrorLocations(P),K=this.findErrorMagnitudes(z,H);for(let re=0;re<H.length;re++){const le=u.length-1-m.log(H[re]);if(le<0)throw new Pe("Bad error location");u[le]=pe.addOrSubtract(u[le],K[re])}}runEuclideanAlgorithm(u,h,m){if(u.getDegree()<h.getDegree()){const re=u;u=h,h=re}const y=this.field;let v=u,E=h,T=y.getZero(),D=y.getOne();for(;E.getDegree()>=(m/2|0);){let re=v,le=T;if(v=E,T=D,v.isZero())throw new Pe("r_{i-1} was zero");E=re;let fe=y.getZero();const Ce=v.getCoefficient(v.getDegree()),Re=y.inverse(Ce);for(;E.getDegree()>=v.getDegree()&&!E.isZero();){const Ze=E.getDegree()-v.getDegree(),Je=y.multiply(E.getCoefficient(E.getDegree()),Re);fe=fe.addOrSubtract(y.buildMonomial(Ze,Je)),E=E.addOrSubtract(v.multiplyByMonomial(Ze,Je))}if(D=fe.multiply(T).addOrSubtract(le),E.getDegree()>=v.getDegree())throw new Ve("Division algorithm failed to reduce polynomial?")}const P=D.getCoefficient(0);if(P===0)throw new Pe("sigmaTilde(0) was zero");const z=y.inverse(P),H=D.multiplyScalar(z),K=E.multiplyScalar(z);return[H,K]}findErrorLocations(u){const h=u.getDegree();if(h===1)return Int32Array.from([u.getCoefficient(1)]);const m=new Int32Array(h);let y=0;const v=this.field;for(let E=1;E<v.getSize()&&y<h;E++)u.evaluateAt(E)===0&&(m[y]=v.inverse(E),y++);if(y!==h)throw new Pe("Error locator degree does not match number of roots");return m}findErrorMagnitudes(u,h){const m=h.length,y=new Int32Array(m),v=this.field;for(let E=0;E<m;E++){const T=v.inverse(h[E]);let D=1;for(let P=0;P<m;P++)if(E!==P){const z=v.multiply(h[P],T),H=z&1?z&-2:z|1;D=v.multiply(D,H)}y[E]=v.multiply(u.evaluateAt(T),v.inverse(D)),v.getGeneratorBase()!==0&&(y[E]=v.multiply(y[E],T))}return y}}var Be;(function(U){U[U.UPPER=0]="UPPER",U[U.LOWER=1]="LOWER",U[U.MIXED=2]="MIXED",U[U.DIGIT=3]="DIGIT",U[U.PUNCT=4]="PUNCT",U[U.BINARY=5]="BINARY"})(Be||(Be={}));class be{decode(u){this.ddata=u;let h=u.getBits(),m=this.extractBits(h),y=this.correctBits(m),v=be.convertBoolArrayToByteArray(y),E=be.getEncodedData(y),T=new Oe(v,E,null,null);return T.setNumBits(y.length),T}static highLevelDecode(u){return this.getEncodedData(u)}static getEncodedData(u){let h=u.length,m=Be.UPPER,y=Be.UPPER,v="",E=0;for(;E<h;)if(y===Be.BINARY){if(h-E<5)break;let T=be.readCode(u,E,5);if(E+=5,T===0){if(h-E<11)break;T=be.readCode(u,E,11)+31,E+=11}for(let D=0;D<T;D++){if(h-E<8){E=h;break}const P=be.readCode(u,E,8);v+=B.castAsNonUtf8Char(P),E+=8}y=m}else{let T=y===Be.DIGIT?4:5;if(h-E<T)break;let D=be.readCode(u,E,T);E+=T;let P=be.getCharacter(y,D);P.startsWith("CTRL_")?(m=y,y=be.getTable(P.charAt(5)),P.charAt(6)==="L"&&(m=y)):(v+=P,y=m)}return v}static getTable(u){switch(u){case"L":return Be.LOWER;case"P":return Be.PUNCT;case"M":return Be.MIXED;case"D":return Be.DIGIT;case"B":return Be.BINARY;case"U":default:return Be.UPPER}}static getCharacter(u,h){switch(u){case Be.UPPER:return be.UPPER_TABLE[h];case Be.LOWER:return be.LOWER_TABLE[h];case Be.MIXED:return be.MIXED_TABLE[h];case Be.PUNCT:return be.PUNCT_TABLE[h];case Be.DIGIT:return be.DIGIT_TABLE[h];default:throw new Ve("Bad table")}}correctBits(u){let h,m;this.ddata.getNbLayers()<=2?(m=6,h=pe.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(m=8,h=pe.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(m=10,h=pe.AZTEC_DATA_10):(m=12,h=pe.AZTEC_DATA_12);let y=this.ddata.getNbDatablocks(),v=u.length/m;if(v<y)throw new O;let E=u.length%m,T=new Int32Array(v);for(let K=0;K<v;K++,E+=m)T[K]=be.readCode(u,E,m);try{new Fe(h).decode(T,v-y)}catch(K){throw new O(K)}let D=(1<<m)-1,P=0;for(let K=0;K<y;K++){let re=T[K];if(re===0||re===D)throw new O;(re===1||re===D-1)&&P++}let z=new Array(y*m-P),H=0;for(let K=0;K<y;K++){let re=T[K];if(re===1||re===D-1)z.fill(re>1,H,H+m-1),H+=m-1;else for(let le=m-1;le>=0;--le)z[H++]=(re&1<<le)!==0}return z}extractBits(u){let h=this.ddata.isCompact(),m=this.ddata.getNbLayers(),y=(h?11:14)+m*4,v=new Int32Array(y),E=new Array(this.totalBitsInLayer(m,h));if(h)for(let T=0;T<v.length;T++)v[T]=T;else{let T=y+1+2*k.truncDivision(k.truncDivision(y,2)-1,15),D=y/2,P=k.truncDivision(T,2);for(let z=0;z<D;z++){let H=z+k.truncDivision(z,15);v[D-z-1]=P-H-1,v[D+z]=P+H+1}}for(let T=0,D=0;T<m;T++){let P=(m-T)*4+(h?9:12),z=T*2,H=y-1-z;for(let K=0;K<P;K++){let re=K*2;for(let le=0;le<2;le++)E[D+re+le]=u.get(v[z+le],v[z+K]),E[D+2*P+re+le]=u.get(v[z+K],v[H-le]),E[D+4*P+re+le]=u.get(v[H-le],v[H-K]),E[D+6*P+re+le]=u.get(v[H-K],v[z+le])}D+=P*8}return E}static readCode(u,h,m){let y=0;for(let v=h;v<h+m;v++)y<<=1,u[v]&&(y|=1);return y}static readByte(u,h){let m=u.length-h;return m>=8?be.readCode(u,h,8):be.readCode(u,h,m)<<8-m}static convertBoolArrayToByteArray(u){let h=new Uint8Array((u.length+7)/8);for(let m=0;m<h.length;m++)h[m]=be.readByte(u,8*m);return h}totalBitsInLayer(u,h){return((h?88:112)+16*u)*u}}be.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],be.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],be.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],be.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],be.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class je{constructor(){}static round(u){return u===NaN?0:u<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:u>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:u+(u<0?-.5:.5)|0}static distance(u,h,m,y){const v=u-m,E=h-y;return Math.sqrt(v*v+E*E)}static sum(u){let h=0;for(let m=0,y=u.length;m!==y;m++){const v=u[m];h+=v}return h}}class Se{static floatToIntBits(u){return u}}Se.MAX_VALUE=Number.MAX_SAFE_INTEGER;class ue{constructor(u,h){this.x=u,this.y=h}getX(){return this.x}getY(){return this.y}equals(u){if(u instanceof ue){const h=u;return this.x===h.x&&this.y===h.y}return!1}hashCode(){return 31*Se.floatToIntBits(this.x)+Se.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(u){const h=this.distance(u[0],u[1]),m=this.distance(u[1],u[2]),y=this.distance(u[0],u[2]);let v,E,T;if(m>=h&&m>=y?(E=u[0],v=u[1],T=u[2]):y>=m&&y>=h?(E=u[1],v=u[0],T=u[2]):(E=u[2],v=u[0],T=u[1]),this.crossProductZ(v,E,T)<0){const D=v;v=T,T=D}u[0]=v,u[1]=E,u[2]=T}static distance(u,h){return je.distance(u.x,u.y,h.x,h.y)}static crossProductZ(u,h,m){const y=h.x,v=h.y;return(m.x-y)*(u.y-v)-(m.y-v)*(u.x-y)}}class He{constructor(u,h){this.bits=u,this.points=h}getBits(){return this.bits}getPoints(){return this.points}}class It extends He{constructor(u,h,m,y,v){super(u,h),this.compact=m,this.nbDatablocks=y,this.nbLayers=v}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class ot{constructor(u,h,m,y){this.image=u,this.height=u.getHeight(),this.width=u.getWidth(),h==null&&(h=ot.INIT_SIZE),m==null&&(m=u.getWidth()/2|0),y==null&&(y=u.getHeight()/2|0);const v=h/2|0;if(this.leftInit=m-v,this.rightInit=m+v,this.upInit=y-v,this.downInit=y+v,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new j}detect(){let u=this.leftInit,h=this.rightInit,m=this.upInit,y=this.downInit,v=!1,E=!0,T=!1,D=!1,P=!1,z=!1,H=!1;const K=this.width,re=this.height;for(;E;){E=!1;let le=!0;for(;(le||!D)&&h<K;)le=this.containsBlackPoint(m,y,h,!1),le?(h++,E=!0,D=!0):D||h++;if(h>=K){v=!0;break}let fe=!0;for(;(fe||!P)&&y<re;)fe=this.containsBlackPoint(u,h,y,!0),fe?(y++,E=!0,P=!0):P||y++;if(y>=re){v=!0;break}let Ce=!0;for(;(Ce||!z)&&u>=0;)Ce=this.containsBlackPoint(m,y,u,!1),Ce?(u--,E=!0,z=!0):z||u--;if(u<0){v=!0;break}let Re=!0;for(;(Re||!H)&&m>=0;)Re=this.containsBlackPoint(u,h,m,!0),Re?(m--,E=!0,H=!0):H||m--;if(m<0){v=!0;break}E&&(T=!0)}if(!v&&T){const le=h-u;let fe=null;for(let Je=1;fe===null&&Je<le;Je++)fe=this.getBlackPointOnSegment(u,y-Je,u+Je,y);if(fe==null)throw new j;let Ce=null;for(let Je=1;Ce===null&&Je<le;Je++)Ce=this.getBlackPointOnSegment(u,m+Je,u+Je,m);if(Ce==null)throw new j;let Re=null;for(let Je=1;Re===null&&Je<le;Je++)Re=this.getBlackPointOnSegment(h,m+Je,h-Je,m);if(Re==null)throw new j;let Ze=null;for(let Je=1;Ze===null&&Je<le;Je++)Ze=this.getBlackPointOnSegment(h,y-Je,h-Je,y);if(Ze==null)throw new j;return this.centerEdges(Ze,fe,Re,Ce)}else throw new j}getBlackPointOnSegment(u,h,m,y){const v=je.round(je.distance(u,h,m,y)),E=(m-u)/v,T=(y-h)/v,D=this.image;for(let P=0;P<v;P++){const z=je.round(u+P*E),H=je.round(h+P*T);if(D.get(z,H))return new ue(z,H)}return null}centerEdges(u,h,m,y){const v=u.getX(),E=u.getY(),T=h.getX(),D=h.getY(),P=m.getX(),z=m.getY(),H=y.getX(),K=y.getY(),re=ot.CORR;return v<this.width/2?[new ue(H-re,K+re),new ue(T+re,D+re),new ue(P-re,z-re),new ue(v+re,E-re)]:[new ue(H+re,K+re),new ue(T+re,D-re),new ue(P-re,z+re),new ue(v-re,E-re)]}containsBlackPoint(u,h,m,y){const v=this.image;if(y){for(let E=u;E<=h;E++)if(v.get(E,m))return!0}else for(let E=u;E<=h;E++)if(v.get(m,E))return!0;return!1}}ot.INIT_SIZE=10,ot.CORR=1;class Vt{static checkAndNudgePoints(u,h){const m=u.getWidth(),y=u.getHeight();let v=!0;for(let E=0;E<h.length&&v;E+=2){const T=Math.floor(h[E]),D=Math.floor(h[E+1]);if(T<-1||T>m||D<-1||D>y)throw new j;v=!1,T===-1?(h[E]=0,v=!0):T===m&&(h[E]=m-1,v=!0),D===-1?(h[E+1]=0,v=!0):D===y&&(h[E+1]=y-1,v=!0)}v=!0;for(let E=h.length-2;E>=0&&v;E-=2){const T=Math.floor(h[E]),D=Math.floor(h[E+1]);if(T<-1||T>m||D<-1||D>y)throw new j;v=!1,T===-1?(h[E]=0,v=!0):T===m&&(h[E]=m-1,v=!0),D===-1?(h[E+1]=0,v=!0):D===y&&(h[E+1]=y-1,v=!0)}}}class Xt{constructor(u,h,m,y,v,E,T,D,P){this.a11=u,this.a21=h,this.a31=m,this.a12=y,this.a22=v,this.a32=E,this.a13=T,this.a23=D,this.a33=P}static quadrilateralToQuadrilateral(u,h,m,y,v,E,T,D,P,z,H,K,re,le,fe,Ce){const Re=Xt.quadrilateralToSquare(u,h,m,y,v,E,T,D);return Xt.squareToQuadrilateral(P,z,H,K,re,le,fe,Ce).times(Re)}transformPoints(u){const h=u.length,m=this.a11,y=this.a12,v=this.a13,E=this.a21,T=this.a22,D=this.a23,P=this.a31,z=this.a32,H=this.a33;for(let K=0;K<h;K+=2){const re=u[K],le=u[K+1],fe=v*re+D*le+H;u[K]=(m*re+E*le+P)/fe,u[K+1]=(y*re+T*le+z)/fe}}transformPointsWithValues(u,h){const m=this.a11,y=this.a12,v=this.a13,E=this.a21,T=this.a22,D=this.a23,P=this.a31,z=this.a32,H=this.a33,K=u.length;for(let re=0;re<K;re++){const le=u[re],fe=h[re],Ce=v*le+D*fe+H;u[re]=(m*le+E*fe+P)/Ce,h[re]=(y*le+T*fe+z)/Ce}}static squareToQuadrilateral(u,h,m,y,v,E,T,D){const P=u-m+v-T,z=h-y+E-D;if(P===0&&z===0)return new Xt(m-u,v-m,u,y-h,E-y,h,0,0,1);{const H=m-v,K=T-v,re=y-E,le=D-E,fe=H*le-K*re,Ce=(P*le-K*z)/fe,Re=(H*z-P*re)/fe;return new Xt(m-u+Ce*m,T-u+Re*T,u,y-h+Ce*y,D-h+Re*D,h,Ce,Re,1)}}static quadrilateralToSquare(u,h,m,y,v,E,T,D){return Xt.squareToQuadrilateral(u,h,m,y,v,E,T,D).buildAdjoint()}buildAdjoint(){return new Xt(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(u){return new Xt(this.a11*u.a11+this.a21*u.a12+this.a31*u.a13,this.a11*u.a21+this.a21*u.a22+this.a31*u.a23,this.a11*u.a31+this.a21*u.a32+this.a31*u.a33,this.a12*u.a11+this.a22*u.a12+this.a32*u.a13,this.a12*u.a21+this.a22*u.a22+this.a32*u.a23,this.a12*u.a31+this.a22*u.a32+this.a32*u.a33,this.a13*u.a11+this.a23*u.a12+this.a33*u.a13,this.a13*u.a21+this.a23*u.a22+this.a33*u.a23,this.a13*u.a31+this.a23*u.a32+this.a33*u.a33)}}class Ln extends Vt{sampleGrid(u,h,m,y,v,E,T,D,P,z,H,K,re,le,fe,Ce,Re,Ze,Je){const Ke=Xt.quadrilateralToQuadrilateral(y,v,E,T,D,P,z,H,K,re,le,fe,Ce,Re,Ze,Je);return this.sampleGridWithTransform(u,h,m,Ke)}sampleGridWithTransform(u,h,m,y){if(h<=0||m<=0)throw new j;const v=new q(h,m),E=new Float32Array(2*h);for(let T=0;T<m;T++){const D=E.length,P=T+.5;for(let z=0;z<D;z+=2)E[z]=z/2+.5,E[z+1]=P;y.transformPoints(E),Vt.checkAndNudgePoints(u,E);try{for(let z=0;z<D;z+=2)u.get(Math.floor(E[z]),Math.floor(E[z+1]))&&v.set(z/2,T)}catch{throw new j}}return v}}class hn{static setGridSampler(u){hn.gridSampler=u}static getInstance(){return hn.gridSampler}}hn.gridSampler=new Ln;class ft{constructor(u,h){this.x=u,this.y=h}toResultPoint(){return new ue(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class Ot{constructor(u){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=u}detect(){return this.detectMirror(!1)}detectMirror(u){let h=this.getMatrixCenter(),m=this.getBullsEyeCorners(h);if(u){let E=m[0];m[0]=m[2],m[2]=E}this.extractParameters(m);let y=this.sampleGrid(this.image,m[this.shift%4],m[(this.shift+1)%4],m[(this.shift+2)%4],m[(this.shift+3)%4]),v=this.getMatrixCornerPoints(m);return new It(y,v,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(u){if(!this.isValidPoint(u[0])||!this.isValidPoint(u[1])||!this.isValidPoint(u[2])||!this.isValidPoint(u[3]))throw new j;let h=2*this.nbCenterLayers,m=new Int32Array([this.sampleLine(u[0],u[1],h),this.sampleLine(u[1],u[2],h),this.sampleLine(u[2],u[3],h),this.sampleLine(u[3],u[0],h)]);this.shift=this.getRotation(m,h);let y=0;for(let E=0;E<4;E++){let T=m[(this.shift+E)%4];this.compact?(y<<=7,y+=T>>1&127):(y<<=10,y+=(T>>2&992)+(T>>1&31))}let v=this.getCorrectedParameterData(y,this.compact);this.compact?(this.nbLayers=(v>>6)+1,this.nbDataBlocks=(v&63)+1):(this.nbLayers=(v>>11)+1,this.nbDataBlocks=(v&2047)+1)}getRotation(u,h){let m=0;u.forEach((y,v,E)=>{let T=(y>>h-2<<1)+(y&1);m=(m<<3)+T}),m=((m&1)<<11)+(m>>1);for(let y=0;y<4;y++)if(k.bitCount(m^this.EXPECTED_CORNER_BITS[y])<=2)return y;throw new j}getCorrectedParameterData(u,h){let m,y;h?(m=7,y=2):(m=10,y=4);let v=m-y,E=new Int32Array(m);for(let D=m-1;D>=0;--D)E[D]=u&15,u>>=4;try{new Fe(pe.AZTEC_PARAM).decode(E,v)}catch{throw new j}let T=0;for(let D=0;D<y;D++)T=(T<<4)+E[D];return T}getBullsEyeCorners(u){let h=u,m=u,y=u,v=u,E=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let H=this.getFirstDifferent(h,E,1,-1),K=this.getFirstDifferent(m,E,1,1),re=this.getFirstDifferent(y,E,-1,1),le=this.getFirstDifferent(v,E,-1,-1);if(this.nbCenterLayers>2){let fe=this.distancePoint(le,H)*this.nbCenterLayers/(this.distancePoint(v,h)*(this.nbCenterLayers+2));if(fe<.75||fe>1.25||!this.isWhiteOrBlackRectangle(H,K,re,le))break}h=H,m=K,y=re,v=le,E=!E}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new j;this.compact=this.nbCenterLayers===5;let T=new ue(h.getX()+.5,h.getY()-.5),D=new ue(m.getX()+.5,m.getY()+.5),P=new ue(y.getX()-.5,y.getY()+.5),z=new ue(v.getX()-.5,v.getY()-.5);return this.expandSquare([T,D,P,z],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let u,h,m,y;try{let T=new ot(this.image).detect();u=T[0],h=T[1],m=T[2],y=T[3]}catch{let D=this.image.getWidth()/2,P=this.image.getHeight()/2;u=this.getFirstDifferent(new ft(D+7,P-7),!1,1,-1).toResultPoint(),h=this.getFirstDifferent(new ft(D+7,P+7),!1,1,1).toResultPoint(),m=this.getFirstDifferent(new ft(D-7,P+7),!1,-1,1).toResultPoint(),y=this.getFirstDifferent(new ft(D-7,P-7),!1,-1,-1).toResultPoint()}let v=je.round((u.getX()+y.getX()+h.getX()+m.getX())/4),E=je.round((u.getY()+y.getY()+h.getY()+m.getY())/4);try{let T=new ot(this.image,15,v,E).detect();u=T[0],h=T[1],m=T[2],y=T[3]}catch{u=this.getFirstDifferent(new ft(v+7,E-7),!1,1,-1).toResultPoint(),h=this.getFirstDifferent(new ft(v+7,E+7),!1,1,1).toResultPoint(),m=this.getFirstDifferent(new ft(v-7,E+7),!1,-1,1).toResultPoint(),y=this.getFirstDifferent(new ft(v-7,E-7),!1,-1,-1).toResultPoint()}return v=je.round((u.getX()+y.getX()+h.getX()+m.getX())/4),E=je.round((u.getY()+y.getY()+h.getY()+m.getY())/4),new ft(v,E)}getMatrixCornerPoints(u){return this.expandSquare(u,2*this.nbCenterLayers,this.getDimension())}sampleGrid(u,h,m,y,v){let E=hn.getInstance(),T=this.getDimension(),D=T/2-this.nbCenterLayers,P=T/2+this.nbCenterLayers;return E.sampleGrid(u,T,T,D,D,P,D,P,P,D,P,h.getX(),h.getY(),m.getX(),m.getY(),y.getX(),y.getY(),v.getX(),v.getY())}sampleLine(u,h,m){let y=0,v=this.distanceResultPoint(u,h),E=v/m,T=u.getX(),D=u.getY(),P=E*(h.getX()-u.getX())/v,z=E*(h.getY()-u.getY())/v;for(let H=0;H<m;H++)this.image.get(je.round(T+H*P),je.round(D+H*z))&&(y|=1<<m-H-1);return y}isWhiteOrBlackRectangle(u,h,m,y){let v=3;u=new ft(u.getX()-v,u.getY()+v),h=new ft(h.getX()-v,h.getY()-v),m=new ft(m.getX()+v,m.getY()-v),y=new ft(y.getX()+v,y.getY()+v);let E=this.getColor(y,u);if(E===0)return!1;let T=this.getColor(u,h);return T!==E||(T=this.getColor(h,m),T!==E)?!1:(T=this.getColor(m,y),T===E)}getColor(u,h){let m=this.distancePoint(u,h),y=(h.getX()-u.getX())/m,v=(h.getY()-u.getY())/m,E=0,T=u.getX(),D=u.getY(),P=this.image.get(u.getX(),u.getY()),z=Math.ceil(m);for(let K=0;K<z;K++)T+=y,D+=v,this.image.get(je.round(T),je.round(D))!==P&&E++;let H=E/m;return H>.1&&H<.9?0:H<=.1===P?1:-1}getFirstDifferent(u,h,m,y){let v=u.getX()+m,E=u.getY()+y;for(;this.isValid(v,E)&&this.image.get(v,E)===h;)v+=m,E+=y;for(v-=m,E-=y;this.isValid(v,E)&&this.image.get(v,E)===h;)v+=m;for(v-=m;this.isValid(v,E)&&this.image.get(v,E)===h;)E+=y;return E-=y,new ft(v,E)}expandSquare(u,h,m){let y=m/(2*h),v=u[0].getX()-u[2].getX(),E=u[0].getY()-u[2].getY(),T=(u[0].getX()+u[2].getX())/2,D=(u[0].getY()+u[2].getY())/2,P=new ue(T+y*v,D+y*E),z=new ue(T-y*v,D-y*E);v=u[1].getX()-u[3].getX(),E=u[1].getY()-u[3].getY(),T=(u[1].getX()+u[3].getX())/2,D=(u[1].getY()+u[3].getY())/2;let H=new ue(T+y*v,D+y*E),K=new ue(T-y*v,D-y*E);return[P,H,z,K]}isValid(u,h){return u>=0&&u<this.image.getWidth()&&h>0&&h<this.image.getHeight()}isValidPoint(u){let h=je.round(u.getX()),m=je.round(u.getY());return this.isValid(h,m)}distancePoint(u,h){return je.distance(u.getX(),u.getY(),h.getX(),h.getY())}distanceResultPoint(u,h){return je.distance(u.getX(),u.getY(),h.getX(),h.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(k.truncDivision(this.nbLayers-4,8)+1)+15}}class Ct{decode(u,h=null){let m=null,y=new Ot(u.getBlackMatrix()),v=null,E=null;try{let z=y.detectMirror(!1);v=z.getPoints(),this.reportFoundResultPoints(h,v),E=new be().decode(z)}catch(z){m=z}if(E==null)try{let z=y.detectMirror(!0);v=z.getPoints(),this.reportFoundResultPoints(h,v),E=new be().decode(z)}catch(z){throw m??z}let T=new ge(E.getText(),E.getRawBytes(),E.getNumBits(),v,he.AZTEC,b.currentTimeMillis()),D=E.getByteSegments();D!=null&&T.putMetadata(ze.BYTE_SEGMENTS,D);let P=E.getECLevel();return P!=null&&T.putMetadata(ze.ERROR_CORRECTION_LEVEL,P),T}reportFoundResultPoints(u,h){if(u!=null){let m=u.get($.NEED_RESULT_POINT_CALLBACK);m!=null&&h.forEach((y,v,E)=>{m.foundPossibleResultPoint(y)})}}reset(){}}class cn extends ye{constructor(u=500){super(new Ct,u)}}class Bt{decode(u,h){try{return this.doDecode(u,h)}catch{if(h&&h.get($.TRY_HARDER)===!0&&u.isRotateSupported()){const v=u.rotateCounterClockwise(),E=this.doDecode(v,h),T=E.getResultMetadata();let D=270;T!==null&&T.get(ze.ORIENTATION)===!0&&(D=D+T.get(ze.ORIENTATION)%360),E.putMetadata(ze.ORIENTATION,D);const P=E.getResultPoints();if(P!==null){const z=v.getHeight();for(let H=0;H<P.length;H++)P[H]=new ue(z-P[H].getY()-1,P[H].getX())}return E}else throw new j}}reset(){}doDecode(u,h){const m=u.getWidth(),y=u.getHeight();let v=new I(m);const E=h&&h.get($.TRY_HARDER)===!0,T=Math.max(1,y>>(E?8:5));let D;E?D=y:D=15;const P=Math.trunc(y/2);for(let z=0;z<D;z++){const H=Math.trunc((z+1)/2),K=(z&1)===0,re=P+T*(K?H:-H);if(re<0||re>=y)break;try{v=u.getBlackRow(re,v)}catch{continue}for(let le=0;le<2;le++){if(le===1&&(v.reverse(),h&&h.get($.NEED_RESULT_POINT_CALLBACK)===!0)){const fe=new Map;h.forEach((Ce,Re)=>fe.set(Re,Ce)),fe.delete($.NEED_RESULT_POINT_CALLBACK),h=fe}try{const fe=this.decodeRow(re,v,h);if(le===1){fe.putMetadata(ze.ORIENTATION,180);const Ce=fe.getResultPoints();Ce!==null&&(Ce[0]=new ue(m-Ce[0].getX()-1,Ce[0].getY()),Ce[1]=new ue(m-Ce[1].getX()-1,Ce[1].getY()))}return fe}catch{}}}throw new j}static recordPattern(u,h,m){const y=m.length;for(let P=0;P<y;P++)m[P]=0;const v=u.getSize();if(h>=v)throw new j;let E=!u.get(h),T=0,D=h;for(;D<v;){if(u.get(D)!==E)m[T]++;else{if(++T===y)break;m[T]=1,E=!E}D++}if(!(T===y||T===y-1&&D===v))throw new j}static recordPatternInReverse(u,h,m){let y=m.length,v=u.get(h);for(;h>0&&y>=0;)u.get(--h)!==v&&(y--,v=!v);if(y>=0)throw new j;Bt.recordPattern(u,h+1,m)}static patternMatchVariance(u,h,m){const y=u.length;let v=0,E=0;for(let P=0;P<y;P++)v+=u[P],E+=h[P];if(v<E)return Number.POSITIVE_INFINITY;const T=v/E;m*=T;let D=0;for(let P=0;P<y;P++){const z=u[P],H=h[P]*T,K=z>H?z-H:H-z;if(K>m)return Number.POSITIVE_INFINITY;D+=K}return D/v}}class Xe extends Bt{static findStartPattern(u){const h=u.getSize(),m=u.getNextSet(0);let y=0,v=Int32Array.from([0,0,0,0,0,0]),E=m,T=!1;const D=6;for(let P=m;P<h;P++)if(u.get(P)!==T)v[y]++;else{if(y===D-1){let z=Xe.MAX_AVG_VARIANCE,H=-1;for(let K=Xe.CODE_START_A;K<=Xe.CODE_START_C;K++){const re=Bt.patternMatchVariance(v,Xe.CODE_PATTERNS[K],Xe.MAX_INDIVIDUAL_VARIANCE);re<z&&(z=re,H=K)}if(H>=0&&u.isRange(Math.max(0,E-(P-E)/2),E,!1))return Int32Array.from([E,P,H]);E+=v[0]+v[1],v=v.slice(2,v.length-1),v[y-1]=0,v[y]=0,y--}else y++;v[y]=1,T=!T}throw new j}static decodeCode(u,h,m){Bt.recordPattern(u,m,h);let y=Xe.MAX_AVG_VARIANCE,v=-1;for(let E=0;E<Xe.CODE_PATTERNS.length;E++){const T=Xe.CODE_PATTERNS[E],D=this.patternMatchVariance(h,T,Xe.MAX_INDIVIDUAL_VARIANCE);D<y&&(y=D,v=E)}if(v>=0)return v;throw new j}decodeRow(u,h,m){const y=m&&m.get($.ASSUME_GS1)===!0,v=Xe.findStartPattern(h),E=v[2];let T=0;const D=new Uint8Array(20);D[T++]=E;let P;switch(E){case Xe.CODE_START_A:P=Xe.CODE_CODE_A;break;case Xe.CODE_START_B:P=Xe.CODE_CODE_B;break;case Xe.CODE_START_C:P=Xe.CODE_CODE_C;break;default:throw new O}let z=!1,H=!1,K="",re=v[0],le=v[1];const fe=Int32Array.from([0,0,0,0,0,0]);let Ce=0,Re=0,Ze=E,Je=0,Ke=!0,on=!1,Wt=!1;for(;!z;){const $f=H;switch(H=!1,Ce=Re,Re=Xe.decodeCode(h,fe,le),D[T++]=Re,Re!==Xe.CODE_STOP&&(Ke=!0),Re!==Xe.CODE_STOP&&(Je++,Ze+=Je*Re),re=le,le+=fe.reduce((AG,RG)=>AG+RG,0),Re){case Xe.CODE_START_A:case Xe.CODE_START_B:case Xe.CODE_START_C:throw new O}switch(P){case Xe.CODE_CODE_A:if(Re<64)Wt===on?K+=String.fromCharCode(32+Re):K+=String.fromCharCode(32+Re+128),Wt=!1;else if(Re<96)Wt===on?K+=String.fromCharCode(Re-64):K+=String.fromCharCode(Re+64),Wt=!1;else switch(Re!==Xe.CODE_STOP&&(Ke=!1),Re){case Xe.CODE_FNC_1:y&&(K.length===0?K+="]C1":K+="");break;case Xe.CODE_FNC_2:case Xe.CODE_FNC_3:break;case Xe.CODE_FNC_4_A:!on&&Wt?(on=!0,Wt=!1):on&&Wt?(on=!1,Wt=!1):Wt=!0;break;case Xe.CODE_SHIFT:H=!0,P=Xe.CODE_CODE_B;break;case Xe.CODE_CODE_B:P=Xe.CODE_CODE_B;break;case Xe.CODE_CODE_C:P=Xe.CODE_CODE_C;break;case Xe.CODE_STOP:z=!0;break}break;case Xe.CODE_CODE_B:if(Re<96)Wt===on?K+=String.fromCharCode(32+Re):K+=String.fromCharCode(32+Re+128),Wt=!1;else switch(Re!==Xe.CODE_STOP&&(Ke=!1),Re){case Xe.CODE_FNC_1:y&&(K.length===0?K+="]C1":K+="");break;case Xe.CODE_FNC_2:case Xe.CODE_FNC_3:break;case Xe.CODE_FNC_4_B:!on&&Wt?(on=!0,Wt=!1):on&&Wt?(on=!1,Wt=!1):Wt=!0;break;case Xe.CODE_SHIFT:H=!0,P=Xe.CODE_CODE_A;break;case Xe.CODE_CODE_A:P=Xe.CODE_CODE_A;break;case Xe.CODE_CODE_C:P=Xe.CODE_CODE_C;break;case Xe.CODE_STOP:z=!0;break}break;case Xe.CODE_CODE_C:if(Re<100)Re<10&&(K+="0"),K+=Re;else switch(Re!==Xe.CODE_STOP&&(Ke=!1),Re){case Xe.CODE_FNC_1:y&&(K.length===0?K+="]C1":K+="");break;case Xe.CODE_CODE_A:P=Xe.CODE_CODE_A;break;case Xe.CODE_CODE_B:P=Xe.CODE_CODE_B;break;case Xe.CODE_STOP:z=!0;break}break}$f&&(P=P===Xe.CODE_CODE_A?Xe.CODE_CODE_B:Xe.CODE_CODE_A)}const To=le-re;if(le=h.getNextUnset(le),!h.isRange(le,Math.min(h.getSize(),le+(le-re)/2),!1))throw new j;if(Ze-=Je*Ce,Ze%103!==Ce)throw new g;const fa=K.length;if(fa===0)throw new j;fa>0&&Ke&&(P===Xe.CODE_CODE_C?K=K.substring(0,fa-2):K=K.substring(0,fa-1));const Ao=(v[1]+v[0])/2,zn=re+To/2,Os=D.length,ii=new Uint8Array(Os);for(let $f=0;$f<Os;$f++)ii[$f]=D[$f];const Df=[new ue(Ao,u),new ue(zn,u)];return new ge(K,ii,0,Df,he.CODE_128,new Date().getTime())}}Xe.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],Xe.MAX_AVG_VARIANCE=.25,Xe.MAX_INDIVIDUAL_VARIANCE=.7,Xe.CODE_SHIFT=98,Xe.CODE_CODE_C=99,Xe.CODE_CODE_B=100,Xe.CODE_CODE_A=101,Xe.CODE_FNC_1=102,Xe.CODE_FNC_2=97,Xe.CODE_FNC_3=96,Xe.CODE_FNC_4_A=101,Xe.CODE_FNC_4_B=100,Xe.CODE_START_A=103,Xe.CODE_START_B=104,Xe.CODE_START_C=105,Xe.CODE_STOP=106;class et extends Bt{constructor(u=!1,h=!1){super(),this.usingCheckDigit=u,this.extendedMode=h,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(u,h,m){let y=this.counters;y.fill(0),this.decodeRowResult="";let v=et.findAsteriskPattern(h,y),E=h.getNextSet(v[1]),T=h.getSize(),D,P;do{et.recordPattern(h,E,y);let fe=et.toNarrowWidePattern(y);if(fe<0)throw new j;D=et.patternToChar(fe),this.decodeRowResult+=D,P=E;for(let Ce of y)E+=Ce;E=h.getNextSet(E)}while(D!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let z=0;for(let fe of y)z+=fe;let H=E-P-z;if(E!==T&&H*2<z)throw new j;if(this.usingCheckDigit){let fe=this.decodeRowResult.length-1,Ce=0;for(let Re=0;Re<fe;Re++)Ce+=et.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(Re));if(this.decodeRowResult.charAt(fe)!==et.ALPHABET_STRING.charAt(Ce%43))throw new g;this.decodeRowResult=this.decodeRowResult.substring(0,fe)}if(this.decodeRowResult.length===0)throw new j;let K;this.extendedMode?K=et.decodeExtended(this.decodeRowResult):K=this.decodeRowResult;let re=(v[1]+v[0])/2,le=P+z/2;return new ge(K,null,0,[new ue(re,u),new ue(le,u)],he.CODE_39,new Date().getTime())}static findAsteriskPattern(u,h){let m=u.getSize(),y=u.getNextSet(0),v=0,E=y,T=!1,D=h.length;for(let P=y;P<m;P++)if(u.get(P)!==T)h[v]++;else{if(v===D-1){if(this.toNarrowWidePattern(h)===et.ASTERISK_ENCODING&&u.isRange(Math.max(0,E-Math.floor((P-E)/2)),E,!1))return[E,P];E+=h[0]+h[1],h.copyWithin(0,2,2+v-1),h[v-1]=0,h[v]=0,v--}else v++;h[v]=1,T=!T}throw new j}static toNarrowWidePattern(u){let h=u.length,m=0,y;do{let v=2147483647;for(let D of u)D<v&&D>m&&(v=D);m=v,y=0;let E=0,T=0;for(let D=0;D<h;D++){let P=u[D];P>m&&(T|=1<<h-1-D,y++,E+=P)}if(y===3){for(let D=0;D<h&&y>0;D++){let P=u[D];if(P>m&&(y--,P*2>=E))return-1}return T}}while(y>3);return-1}static patternToChar(u){for(let h=0;h<et.CHARACTER_ENCODINGS.length;h++)if(et.CHARACTER_ENCODINGS[h]===u)return et.ALPHABET_STRING.charAt(h);if(u===et.ASTERISK_ENCODING)return"*";throw new j}static decodeExtended(u){let h=u.length,m="";for(let y=0;y<h;y++){let v=u.charAt(y);if(v==="+"||v==="$"||v==="%"||v==="/"){let E=u.charAt(y+1),T="\0";switch(v){case"+":if(E>="A"&&E<="Z")T=String.fromCharCode(E.charCodeAt(0)+32);else throw new O;break;case"$":if(E>="A"&&E<="Z")T=String.fromCharCode(E.charCodeAt(0)-64);else throw new O;break;case"%":if(E>="A"&&E<="E")T=String.fromCharCode(E.charCodeAt(0)-38);else if(E>="F"&&E<="J")T=String.fromCharCode(E.charCodeAt(0)-11);else if(E>="K"&&E<="O")T=String.fromCharCode(E.charCodeAt(0)+16);else if(E>="P"&&E<="T")T=String.fromCharCode(E.charCodeAt(0)+43);else if(E==="U")T="\0";else if(E==="V")T="@";else if(E==="W")T="`";else if(E==="X"||E==="Y"||E==="Z")T="";else throw new O;break;case"/":if(E>="A"&&E<="O")T=String.fromCharCode(E.charCodeAt(0)-32);else if(E==="Z")T=":";else throw new O;break}m+=T,y++}else m+=v}return m}}et.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",et.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],et.ASTERISK_ENCODING=148;class ut extends Bt{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(u,h,m){let y=this.decodeStart(h),v=this.decodeEnd(h),E=new W;ut.decodeMiddle(h,y[1],v[0],E);let T=E.toString(),D=null;m!=null&&(D=m.get($.ALLOWED_LENGTHS)),D==null&&(D=ut.DEFAULT_ALLOWED_LENGTHS);let P=T.length,z=!1,H=0;for(let le of D){if(P===le){z=!0;break}le>H&&(H=le)}if(!z&&P>H&&(z=!0),!z)throw new O;const K=[new ue(y[1],u),new ue(v[0],u)];return new ge(T,null,0,K,he.ITF,new Date().getTime())}static decodeMiddle(u,h,m,y){let v=new Int32Array(10),E=new Int32Array(5),T=new Int32Array(5);for(v.fill(0),E.fill(0),T.fill(0);h<m;){Bt.recordPattern(u,h,v);for(let P=0;P<5;P++){let z=2*P;E[P]=v[z],T[P]=v[z+1]}let D=ut.decodeDigit(E);y.append(D.toString()),D=this.decodeDigit(T),y.append(D.toString()),v.forEach(function(P){h+=P})}}decodeStart(u){let h=ut.skipWhiteSpace(u),m=ut.findGuardPattern(u,h,ut.START_PATTERN);return this.narrowLineWidth=(m[1]-m[0])/4,this.validateQuietZone(u,m[0]),m}validateQuietZone(u,h){let m=this.narrowLineWidth*10;m=m<h?m:h;for(let y=h-1;m>0&&y>=0&&!u.get(y);y--)m--;if(m!==0)throw new j}static skipWhiteSpace(u){const h=u.getSize(),m=u.getNextSet(0);if(m===h)throw new j;return m}decodeEnd(u){u.reverse();try{let h=ut.skipWhiteSpace(u),m;try{m=ut.findGuardPattern(u,h,ut.END_PATTERN_REVERSED[0])}catch(v){v instanceof j&&(m=ut.findGuardPattern(u,h,ut.END_PATTERN_REVERSED[1]))}this.validateQuietZone(u,m[0]);let y=m[0];return m[0]=u.getSize()-m[1],m[1]=u.getSize()-y,m}finally{u.reverse()}}static findGuardPattern(u,h,m){let y=m.length,v=new Int32Array(y),E=u.getSize(),T=!1,D=0,P=h;v.fill(0);for(let z=h;z<E;z++)if(u.get(z)!==T)v[D]++;else{if(D===y-1){if(Bt.patternMatchVariance(v,m,ut.MAX_INDIVIDUAL_VARIANCE)<ut.MAX_AVG_VARIANCE)return[P,z];P+=v[0]+v[1],b.arraycopy(v,2,v,0,D-1),v[D-1]=0,v[D]=0,D--}else D++;v[D]=1,T=!T}throw new j}static decodeDigit(u){let h=ut.MAX_AVG_VARIANCE,m=-1,y=ut.PATTERNS.length;for(let v=0;v<y;v++){let E=ut.PATTERNS[v],T=Bt.patternMatchVariance(u,E,ut.MAX_INDIVIDUAL_VARIANCE);T<h?(h=T,m=v):T===h&&(m=-1)}if(m>=0)return m%10;throw new j}}ut.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],ut.MAX_AVG_VARIANCE=.38,ut.MAX_INDIVIDUAL_VARIANCE=.5,ut.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],ut.START_PATTERN=Int32Array.from([1,1,1,1]),ut.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class it extends Bt{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(u){let h=!1,m,y=0,v=Int32Array.from([0,0,0]);for(;!h;){v=Int32Array.from([0,0,0]),m=it.findGuardPattern(u,y,!1,this.START_END_PATTERN,v);let E=m[0];y=m[1];let T=E-(y-E);T>=0&&(h=u.isRange(T,E,!1))}return m}static checkChecksum(u){return it.checkStandardUPCEANChecksum(u)}static checkStandardUPCEANChecksum(u){let h=u.length;if(h===0)return!1;let m=parseInt(u.charAt(h-1),10);return it.getStandardUPCEANChecksum(u.substring(0,h-1))===m}static getStandardUPCEANChecksum(u){let h=u.length,m=0;for(let y=h-1;y>=0;y-=2){let v=u.charAt(y).charCodeAt(0)-48;if(v<0||v>9)throw new O;m+=v}m*=3;for(let y=h-2;y>=0;y-=2){let v=u.charAt(y).charCodeAt(0)-48;if(v<0||v>9)throw new O;m+=v}return(1e3-m)%10}static decodeEnd(u,h){return it.findGuardPattern(u,h,!1,it.START_END_PATTERN,new Int32Array(it.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(u,h,m,y){return this.findGuardPattern(u,h,m,y,new Int32Array(y.length))}static findGuardPattern(u,h,m,y,v){let E=u.getSize();h=m?u.getNextUnset(h):u.getNextSet(h);let T=0,D=h,P=y.length,z=m;for(let H=h;H<E;H++)if(u.get(H)!==z)v[T]++;else{if(T===P-1){if(Bt.patternMatchVariance(v,y,it.MAX_INDIVIDUAL_VARIANCE)<it.MAX_AVG_VARIANCE)return Int32Array.from([D,H]);D+=v[0]+v[1];let K=v.slice(2,v.length-1);for(let re=0;re<T-1;re++)v[re]=K[re];v[T-1]=0,v[T]=0,T--}else T++;v[T]=1,z=!z}throw new j}static decodeDigit(u,h,m,y){this.recordPattern(u,m,h);let v=this.MAX_AVG_VARIANCE,E=-1,T=y.length;for(let D=0;D<T;D++){let P=y[D],z=Bt.patternMatchVariance(h,P,it.MAX_INDIVIDUAL_VARIANCE);z<v&&(v=z,E=D)}if(E>=0)return E;throw new j}}it.MAX_AVG_VARIANCE=.48,it.MAX_INDIVIDUAL_VARIANCE=.7,it.START_END_PATTERN=Int32Array.from([1,1,1]),it.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),it.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),it.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class vn{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(u,h,m){let y=this.decodeRowStringBuffer,v=this.decodeMiddle(h,m,y),E=y.toString(),T=vn.parseExtensionString(E),D=[new ue((m[0]+m[1])/2,u),new ue(v,u)],P=new ge(E,null,0,D,he.UPC_EAN_EXTENSION,new Date().getTime());return T!=null&&P.putAllMetadata(T),P}decodeMiddle(u,h,m){let y=this.decodeMiddleCounters;y[0]=0,y[1]=0,y[2]=0,y[3]=0;let v=u.getSize(),E=h[1],T=0;for(let P=0;P<5&&E<v;P++){let z=it.decodeDigit(u,y,E,it.L_AND_G_PATTERNS);m+=String.fromCharCode(48+z%10);for(let H of y)E+=H;z>=10&&(T|=1<<4-P),P!==4&&(E=u.getNextSet(E),E=u.getNextUnset(E))}if(m.length!==5)throw new j;let D=this.determineCheckDigit(T);if(vn.extensionChecksum(m.toString())!==D)throw new j;return E}static extensionChecksum(u){let h=u.length,m=0;for(let y=h-2;y>=0;y-=2)m+=u.charAt(y).charCodeAt(0)-48;m*=3;for(let y=h-1;y>=0;y-=2)m+=u.charAt(y).charCodeAt(0)-48;return m*=3,m%10}determineCheckDigit(u){for(let h=0;h<10;h++)if(u===this.CHECK_DIGIT_ENCODINGS[h])return h;throw new j}static parseExtensionString(u){if(u.length!==5)return null;let h=vn.parseExtension5String(u);return h==null?null:new Map([[ze.SUGGESTED_PRICE,h]])}static parseExtension5String(u){let h;switch(u.charAt(0)){case"0":h="£";break;case"5":h="$";break;case"9":switch(u){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}h="";break;default:h="";break}let m=parseInt(u.substring(1)),y=(m/100).toString(),v=m%100,E=v<10?"0"+v:v.toString();return h+y+"."+E}}class Cr{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(u,h,m){let y=this.decodeRowStringBuffer,v=this.decodeMiddle(h,m,y),E=y.toString(),T=Cr.parseExtensionString(E),D=[new ue((m[0]+m[1])/2,u),new ue(v,u)],P=new ge(E,null,0,D,he.UPC_EAN_EXTENSION,new Date().getTime());return T!=null&&P.putAllMetadata(T),P}decodeMiddle(u,h,m){let y=this.decodeMiddleCounters;y[0]=0,y[1]=0,y[2]=0,y[3]=0;let v=u.getSize(),E=h[1],T=0;for(let D=0;D<2&&E<v;D++){let P=it.decodeDigit(u,y,E,it.L_AND_G_PATTERNS);m+=String.fromCharCode(48+P%10);for(let z of y)E+=z;P>=10&&(T|=1<<1-D),D!==1&&(E=u.getNextSet(E),E=u.getNextUnset(E))}if(m.length!==2)throw new j;if(parseInt(m.toString())%4!==T)throw new j;return E}static parseExtensionString(u){return u.length!==2?null:new Map([[ze.ISSUE_NUMBER,parseInt(u)]])}}class No{static decodeRow(u,h,m){let y=it.findGuardPattern(h,m,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new vn().decodeRow(u,h,y)}catch{return new Cr().decodeRow(u,h,y)}}}No.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class sn extends it{constructor(){super(),this.decodeRowStringBuffer="",sn.L_AND_G_PATTERNS=sn.L_PATTERNS.map(u=>Int32Array.from(u));for(let u=10;u<20;u++){let h=sn.L_PATTERNS[u-10],m=new Int32Array(h.length);for(let y=0;y<h.length;y++)m[y]=h[h.length-y-1];sn.L_AND_G_PATTERNS[u]=m}}decodeRow(u,h,m){let y=sn.findStartGuardPattern(h),v=m==null?null:m.get($.NEED_RESULT_POINT_CALLBACK);if(v!=null){const Ke=new ue((y[0]+y[1])/2,u);v.foundPossibleResultPoint(Ke)}let E=this.decodeMiddle(h,y,this.decodeRowStringBuffer),T=E.rowOffset,D=E.resultString;if(v!=null){const Ke=new ue(T,u);v.foundPossibleResultPoint(Ke)}let P=this.decodeEnd(h,T);if(v!=null){const Ke=new ue((P[0]+P[1])/2,u);v.foundPossibleResultPoint(Ke)}let z=P[1],H=z+(z-P[0]);if(H>=h.getSize()||!h.isRange(z,H,!1))throw new j;let K=D.toString();if(K.length<8)throw new O;if(!sn.checkChecksum(K))throw new g;let re=(y[1]+y[0])/2,le=(P[1]+P[0])/2,fe=this.getBarcodeFormat(),Ce=[new ue(re,u),new ue(le,u)],Re=new ge(K,null,0,Ce,fe,new Date().getTime()),Ze=0;try{let Ke=No.decodeRow(u,h,P[1]);Re.putMetadata(ze.UPC_EAN_EXTENSION,Ke.getText()),Re.putAllMetadata(Ke.getResultMetadata()),Re.addResultPoints(Ke.getResultPoints()),Ze=Ke.getText().length}catch{}let Je=m==null?null:m.get($.ALLOWED_EAN_EXTENSIONS);if(Je!=null){let Ke=!1;for(let on in Je)if(Ze.toString()===on){Ke=!0;break}if(!Ke)throw new j}return Re}decodeEnd(u,h){return sn.findGuardPattern(u,h,!1,sn.START_END_PATTERN,new Int32Array(sn.START_END_PATTERN.length).fill(0))}static checkChecksum(u){return sn.checkStandardUPCEANChecksum(u)}static checkStandardUPCEANChecksum(u){let h=u.length;if(h===0)return!1;let m=parseInt(u.charAt(h-1),10);return sn.getStandardUPCEANChecksum(u.substring(0,h-1))===m}static getStandardUPCEANChecksum(u){let h=u.length,m=0;for(let y=h-1;y>=0;y-=2){let v=u.charAt(y).charCodeAt(0)-48;if(v<0||v>9)throw new O;m+=v}m*=3;for(let y=h-2;y>=0;y-=2){let v=u.charAt(y).charCodeAt(0)-48;if(v<0||v>9)throw new O;m+=v}return(1e3-m)%10}}class zr extends sn{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(u,h,m){let y=this.decodeMiddleCounters;y[0]=0,y[1]=0,y[2]=0,y[3]=0;let v=u.getSize(),E=h[1],T=0;for(let P=0;P<6&&E<v;P++){let z=sn.decodeDigit(u,y,E,sn.L_AND_G_PATTERNS);m+=String.fromCharCode(48+z%10);for(let H of y)E+=H;z>=10&&(T|=1<<5-P)}m=zr.determineFirstDigit(m,T),E=sn.findGuardPattern(u,E,!0,sn.MIDDLE_PATTERN,new Int32Array(sn.MIDDLE_PATTERN.length).fill(0))[1];for(let P=0;P<6&&E<v;P++){let z=sn.decodeDigit(u,y,E,sn.L_PATTERNS);m+=String.fromCharCode(48+z);for(let H of y)E+=H}return{rowOffset:E,resultString:m}}getBarcodeFormat(){return he.EAN_13}static determineFirstDigit(u,h){for(let m=0;m<10;m++)if(h===this.FIRST_DIGIT_ENCODINGS[m])return u=String.fromCharCode(48+m)+u,u;throw new j}}zr.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class cx extends sn{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(u,h,m){const y=this.decodeMiddleCounters;y[0]=0,y[1]=0,y[2]=0,y[3]=0;let v=u.getSize(),E=h[1];for(let D=0;D<4&&E<v;D++){let P=sn.decodeDigit(u,y,E,sn.L_PATTERNS);m+=String.fromCharCode(48+P);for(let z of y)E+=z}E=sn.findGuardPattern(u,E,!0,sn.MIDDLE_PATTERN,new Int32Array(sn.MIDDLE_PATTERN.length).fill(0))[1];for(let D=0;D<4&&E<v;D++){let P=sn.decodeDigit(u,y,E,sn.L_PATTERNS);m+=String.fromCharCode(48+P);for(let z of y)E+=z}return{rowOffset:E,resultString:m}}getBarcodeFormat(){return he.EAN_8}}class ux extends sn{constructor(){super(...arguments),this.ean13Reader=new zr}getBarcodeFormat(){return he.UPC_A}decode(u,h){return this.maybeReturnResult(this.ean13Reader.decode(u))}decodeRow(u,h,m){return this.maybeReturnResult(this.ean13Reader.decodeRow(u,h,m))}decodeMiddle(u,h,m){return this.ean13Reader.decodeMiddle(u,h,m)}maybeReturnResult(u){let h=u.getText();if(h.charAt(0)==="0"){let m=new ge(h.substring(1),null,null,u.getResultPoints(),he.UPC_A);return u.getResultMetadata()!=null&&m.putAllMetadata(u.getResultMetadata()),m}else throw new j}reset(){this.ean13Reader.reset()}}class si extends sn{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(u,h,m){const y=this.decodeMiddleCounters.map(P=>P);y[0]=0,y[1]=0,y[2]=0,y[3]=0;const v=u.getSize();let E=h[1],T=0;for(let P=0;P<6&&E<v;P++){const z=si.decodeDigit(u,y,E,si.L_AND_G_PATTERNS);m+=String.fromCharCode(48+z%10);for(let H of y)E+=H;z>=10&&(T|=1<<5-P)}let D=si.determineNumSysAndCheckDigit(m,T);return{rowOffset:E,resultString:D}}decodeEnd(u,h){return si.findGuardPatternWithoutCounters(u,h,!0,si.MIDDLE_END_PATTERN)}checkChecksum(u){return sn.checkChecksum(si.convertUPCEtoUPCA(u))}static determineNumSysAndCheckDigit(u,h){for(let m=0;m<=1;m++)for(let y=0;y<10;y++)if(h===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[m][y]){let v=String.fromCharCode(48+m),E=String.fromCharCode(48+y);return v+u+E}throw j.getNotFoundInstance()}getBarcodeFormat(){return he.UPC_E}static convertUPCEtoUPCA(u){const h=u.slice(1,7).split("").map(v=>v.charCodeAt(0)),m=new W;m.append(u.charAt(0));let y=h[5];switch(y){case 0:case 1:case 2:m.appendChars(h,0,2),m.append(y),m.append("0000"),m.appendChars(h,2,3);break;case 3:m.appendChars(h,0,3),m.append("00000"),m.appendChars(h,3,2);break;case 4:m.appendChars(h,0,4),m.append("00000"),m.append(h[4]);break;default:m.appendChars(h,0,5),m.append("0000"),m.append(y);break}return u.length>=8&&m.append(u.charAt(7)),m.toString()}}si.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),si.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class dx extends Bt{constructor(u){super();let h=u==null?null:u.get($.POSSIBLE_FORMATS),m=[];r(h)?(m.push(new zr),m.push(new ux),m.push(new cx),m.push(new si)):(h.indexOf(he.EAN_13)>-1&&m.push(new zr),h.indexOf(he.UPC_A)>-1&&m.push(new ux),h.indexOf(he.EAN_8)>-1&&m.push(new cx),h.indexOf(he.UPC_E)>-1&&m.push(new si)),this.readers=m}decodeRow(u,h,m){for(let y of this.readers)try{const v=y.decodeRow(u,h,m),E=v.getBarcodeFormat()===he.EAN_13&&v.getText().charAt(0)==="0",T=m==null?null:m.get($.POSSIBLE_FORMATS),D=T==null||T.includes(he.UPC_A);if(E&&D){const P=v.getRawBytes(),z=new ge(v.getText().substring(1),P,P?P.length:null,v.getResultPoints(),he.UPC_A);return z.putAllMetadata(v.getResultMetadata()),z}return v}catch{}throw new j}reset(){for(let u of this.readers)u.reset()}}class Rs extends Bt{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(u,h){for(let m=0;m<h.length;m++)if(Bt.patternMatchVariance(u,h[m],Rs.MAX_INDIVIDUAL_VARIANCE)<Rs.MAX_AVG_VARIANCE)return m;throw new j}static count(u){return je.sum(new Int32Array(u))}static increment(u,h){let m=0,y=h[0];for(let v=1;v<u.length;v++)h[v]>y&&(y=h[v],m=v);u[m]++}static decrement(u,h){let m=0,y=h[0];for(let v=1;v<u.length;v++)h[v]<y&&(y=h[v],m=v);u[m]--}static isFinderPattern(u){let h=u[0]+u[1],m=h+u[2]+u[3],y=h/m;if(y>=Rs.MIN_FINDER_PATTERN_RATIO&&y<=Rs.MAX_FINDER_PATTERN_RATIO){let v=Number.MAX_SAFE_INTEGER,E=Number.MIN_SAFE_INTEGER;for(let T of u)T>E&&(E=T),T<v&&(v=T);return E<10*v}return!1}}Rs.MAX_AVG_VARIANCE=.2,Rs.MAX_INDIVIDUAL_VARIANCE=.45,Rs.MIN_FINDER_PATTERN_RATIO=9.5/12,Rs.MAX_FINDER_PATTERN_RATIO=12.5/14;class Bn{constructor(u,h){this.value=u,this.checksumPortion=h}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(u){if(!(u instanceof Bn))return!1;const h=u;return this.value===h.value&&this.checksumPortion===h.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class qs{constructor(u,h,m,y,v){this.value=u,this.startEnd=h,this.value=u,this.startEnd=h,this.resultPoints=new Array,this.resultPoints.push(new ue(m,v)),this.resultPoints.push(new ue(y,v))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(u){if(!(u instanceof qs))return!1;const h=u;return this.value===h.value}hashCode(){return this.value}}class oi{constructor(){}static getRSSvalue(u,h,m){let y=0;for(let D of u)y+=D;let v=0,E=0,T=u.length;for(let D=0;D<T-1;D++){let P;for(P=1,E|=1<<D;P<u[D];P++,E&=~(1<<D)){let z=oi.combins(y-P-1,T-D-2);if(m&&E===0&&y-P-(T-D-1)>=T-D-1&&(z-=oi.combins(y-P-(T-D),T-D-2)),T-D-1>1){let H=0;for(let K=y-P-(T-D-2);K>h;K--)H+=oi.combins(y-P-K-1,T-D-3);z-=H*(T-1-D)}else y-P>h&&z--;v+=z}y-=P}return v}static combins(u,h){let m,y;u-h>h?(y=h,m=u-h):(y=u-h,m=h);let v=1,E=1;for(let T=u;T>m;T--)v*=T,E<=y&&(v/=E,E++);for(;E<=y;)v/=E,E++;return v}}class tG{static buildBitArray(u){let h=u.length*2-1;u[u.length-1].getRightChar()==null&&(h-=1);let m=12*h,y=new I(m),v=0,T=u[0].getRightChar().getValue();for(let D=11;D>=0;--D)T&1<<D&&y.set(v),v++;for(let D=1;D<u.length;++D){let P=u[D],z=P.getLeftChar().getValue();for(let H=11;H>=0;--H)z&1<<H&&y.set(v),v++;if(P.getRightChar()!=null){let H=P.getRightChar().getValue();for(let K=11;K>=0;--K)H&1<<K&&y.set(v),v++}}return y}}class Wu{constructor(u,h){h?this.decodedInformation=null:(this.finished=u,this.decodedInformation=h)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class UC{constructor(u){this.newPosition=u}getNewPosition(){return this.newPosition}}class Eo extends UC{constructor(u,h){super(u),this.value=h}getValue(){return this.value}isFNC1(){return this.value===Eo.FNC1}}Eo.FNC1="$";class Uu extends UC{constructor(u,h,m){super(u),m?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=h}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class Ei extends UC{constructor(u,h,m){if(super(u),h<0||h>10||m<0||m>10)throw new O;this.firstDigit=h,this.secondDigit=m}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===Ei.FNC1}isSecondDigitFNC1(){return this.secondDigit===Ei.FNC1}isAnyFNC1(){return this.firstDigit===Ei.FNC1||this.secondDigit===Ei.FNC1}}Ei.FNC1=10;class ht{constructor(){}static parseFieldsInGeneralPurpose(u){if(!u)return null;if(u.length<2)throw new j;let h=u.substring(0,2);for(let v of ht.TWO_DIGIT_DATA_LENGTH)if(v[0]===h)return v[1]===ht.VARIABLE_LENGTH?ht.processVariableAI(2,v[2],u):ht.processFixedAI(2,v[1],u);if(u.length<3)throw new j;let m=u.substring(0,3);for(let v of ht.THREE_DIGIT_DATA_LENGTH)if(v[0]===m)return v[1]===ht.VARIABLE_LENGTH?ht.processVariableAI(3,v[2],u):ht.processFixedAI(3,v[1],u);for(let v of ht.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(v[0]===m)return v[1]===ht.VARIABLE_LENGTH?ht.processVariableAI(4,v[2],u):ht.processFixedAI(4,v[1],u);if(u.length<4)throw new j;let y=u.substring(0,4);for(let v of ht.FOUR_DIGIT_DATA_LENGTH)if(v[0]===y)return v[1]===ht.VARIABLE_LENGTH?ht.processVariableAI(4,v[2],u):ht.processFixedAI(4,v[1],u);throw new j}static processFixedAI(u,h,m){if(m.length<u)throw new j;let y=m.substring(0,u);if(m.length<u+h)throw new j;let v=m.substring(u,u+h),E=m.substring(u+h),T="("+y+")"+v,D=ht.parseFieldsInGeneralPurpose(E);return D==null?T:T+D}static processVariableAI(u,h,m){let y=m.substring(0,u),v;m.length<u+h?v=m.length:v=u+h;let E=m.substring(u,v),T=m.substring(v),D="("+y+")"+E,P=ht.parseFieldsInGeneralPurpose(T);return P==null?D:D+P}}ht.VARIABLE_LENGTH=[],ht.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",ht.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",ht.VARIABLE_LENGTH,20],["22",ht.VARIABLE_LENGTH,29],["30",ht.VARIABLE_LENGTH,8],["37",ht.VARIABLE_LENGTH,8],["90",ht.VARIABLE_LENGTH,30],["91",ht.VARIABLE_LENGTH,30],["92",ht.VARIABLE_LENGTH,30],["93",ht.VARIABLE_LENGTH,30],["94",ht.VARIABLE_LENGTH,30],["95",ht.VARIABLE_LENGTH,30],["96",ht.VARIABLE_LENGTH,30],["97",ht.VARIABLE_LENGTH,3],["98",ht.VARIABLE_LENGTH,30],["99",ht.VARIABLE_LENGTH,30]],ht.THREE_DIGIT_DATA_LENGTH=[["240",ht.VARIABLE_LENGTH,30],["241",ht.VARIABLE_LENGTH,30],["242",ht.VARIABLE_LENGTH,6],["250",ht.VARIABLE_LENGTH,30],["251",ht.VARIABLE_LENGTH,30],["253",ht.VARIABLE_LENGTH,17],["254",ht.VARIABLE_LENGTH,20],["400",ht.VARIABLE_LENGTH,30],["401",ht.VARIABLE_LENGTH,30],["402",17],["403",ht.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",ht.VARIABLE_LENGTH,20],["421",ht.VARIABLE_LENGTH,15],["422",3],["423",ht.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],ht.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",ht.VARIABLE_LENGTH,15],["391",ht.VARIABLE_LENGTH,18],["392",ht.VARIABLE_LENGTH,15],["393",ht.VARIABLE_LENGTH,18],["703",ht.VARIABLE_LENGTH,30]],ht.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",ht.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",ht.VARIABLE_LENGTH,20],["8003",ht.VARIABLE_LENGTH,30],["8004",ht.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",ht.VARIABLE_LENGTH,30],["8008",ht.VARIABLE_LENGTH,12],["8018",18],["8020",ht.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",ht.VARIABLE_LENGTH,70],["8200",ht.VARIABLE_LENGTH,70]];class Ef{constructor(u){this.buffer=new W,this.information=u}decodeAllCodes(u,h){let m=h,y=null;do{let v=this.decodeGeneralPurposeField(m,y),E=ht.parseFieldsInGeneralPurpose(v.getNewString());if(E!=null&&u.append(E),v.isRemaining()?y=""+v.getRemainingValue():y=null,m===v.getNewPosition())break;m=v.getNewPosition()}while(!0);return u.toString()}isStillNumeric(u){if(u+7>this.information.getSize())return u+4<=this.information.getSize();for(let h=u;h<u+3;++h)if(this.information.get(h))return!0;return this.information.get(u+3)}decodeNumeric(u){if(u+7>this.information.getSize()){let v=this.extractNumericValueFromBitArray(u,4);return v===0?new Ei(this.information.getSize(),Ei.FNC1,Ei.FNC1):new Ei(this.information.getSize(),v-1,Ei.FNC1)}let h=this.extractNumericValueFromBitArray(u,7),m=(h-8)/11,y=(h-8)%11;return new Ei(u+7,m,y)}extractNumericValueFromBitArray(u,h){return Ef.extractNumericValueFromBitArray(this.information,u,h)}static extractNumericValueFromBitArray(u,h,m){let y=0;for(let v=0;v<m;++v)u.get(h+v)&&(y|=1<<m-v-1);return y}decodeGeneralPurposeField(u,h){this.buffer.setLengthToZero(),h!=null&&this.buffer.append(h),this.current.setPosition(u);let m=this.parseBlocks();return m!=null&&m.isRemaining()?new Uu(this.current.getPosition(),this.buffer.toString(),m.getRemainingValue()):new Uu(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let u,h;do{let m=this.current.getPosition();if(this.current.isAlpha()?(h=this.parseAlphaBlock(),u=h.isFinished()):this.current.isIsoIec646()?(h=this.parseIsoIec646Block(),u=h.isFinished()):(h=this.parseNumericBlock(),u=h.isFinished()),!(m!==this.current.getPosition())&&!u)break}while(!u);return h.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let u=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(u.getNewPosition()),u.isFirstDigitFNC1()){let h;return u.isSecondDigitFNC1()?h=new Uu(this.current.getPosition(),this.buffer.toString()):h=new Uu(this.current.getPosition(),this.buffer.toString(),u.getSecondDigit()),new Wu(!0,h)}if(this.buffer.append(u.getFirstDigit()),u.isSecondDigitFNC1()){let h=new Uu(this.current.getPosition(),this.buffer.toString());return new Wu(!0,h)}this.buffer.append(u.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new Wu(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let u=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(u.getNewPosition()),u.isFNC1()){let h=new Uu(this.current.getPosition(),this.buffer.toString());return new Wu(!0,h)}this.buffer.append(u.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new Wu(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let u=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(u.getNewPosition()),u.isFNC1()){let h=new Uu(this.current.getPosition(),this.buffer.toString());return new Wu(!0,h)}this.buffer.append(u.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new Wu(!1)}isStillIsoIec646(u){if(u+5>this.information.getSize())return!1;let h=this.extractNumericValueFromBitArray(u,5);if(h>=5&&h<16)return!0;if(u+7>this.information.getSize())return!1;let m=this.extractNumericValueFromBitArray(u,7);if(m>=64&&m<116)return!0;if(u+8>this.information.getSize())return!1;let y=this.extractNumericValueFromBitArray(u,8);return y>=232&&y<253}decodeIsoIec646(u){let h=this.extractNumericValueFromBitArray(u,5);if(h===15)return new Eo(u+5,Eo.FNC1);if(h>=5&&h<15)return new Eo(u+5,"0"+(h-5));let m=this.extractNumericValueFromBitArray(u,7);if(m>=64&&m<90)return new Eo(u+7,""+(m+1));if(m>=90&&m<116)return new Eo(u+7,""+(m+7));let y=this.extractNumericValueFromBitArray(u,8),v;switch(y){case 232:v="!";break;case 233:v='"';break;case 234:v="%";break;case 235:v="&";break;case 236:v="'";break;case 237:v="(";break;case 238:v=")";break;case 239:v="*";break;case 240:v="+";break;case 241:v=",";break;case 242:v="-";break;case 243:v=".";break;case 244:v="/";break;case 245:v=":";break;case 246:v=";";break;case 247:v="<";break;case 248:v="=";break;case 249:v=">";break;case 250:v="?";break;case 251:v="_";break;case 252:v=" ";break;default:throw new O}return new Eo(u+8,v)}isStillAlpha(u){if(u+5>this.information.getSize())return!1;let h=this.extractNumericValueFromBitArray(u,5);if(h>=5&&h<16)return!0;if(u+6>this.information.getSize())return!1;let m=this.extractNumericValueFromBitArray(u,6);return m>=16&&m<63}decodeAlphanumeric(u){let h=this.extractNumericValueFromBitArray(u,5);if(h===15)return new Eo(u+5,Eo.FNC1);if(h>=5&&h<15)return new Eo(u+5,"0"+(h-5));let m=this.extractNumericValueFromBitArray(u,6);if(m>=32&&m<58)return new Eo(u+6,""+(m+33));let y;switch(m){case 58:y="*";break;case 59:y=",";break;case 60:y="-";break;case 61:y=".";break;case 62:y="/";break;default:throw new Ve("Decoding invalid alphanumeric value: "+m)}return new Eo(u+6,y)}isAlphaTo646ToAlphaLatch(u){if(u+1>this.information.getSize())return!1;for(let h=0;h<5&&h+u<this.information.getSize();++h)if(h===2){if(!this.information.get(u+2))return!1}else if(this.information.get(u+h))return!1;return!0}isAlphaOr646ToNumericLatch(u){if(u+3>this.information.getSize())return!1;for(let h=u;h<u+3;++h)if(this.information.get(h))return!1;return!0}isNumericToAlphaNumericLatch(u){if(u+1>this.information.getSize())return!1;for(let h=0;h<4&&h+u<this.information.getSize();++h)if(this.information.get(u+h))return!1;return!0}}class HC{constructor(u){this.information=u,this.generalDecoder=new Ef(u)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class Io extends HC{constructor(u){super(u)}encodeCompressedGtin(u,h){u.append("(01)");let m=u.length();u.append("9"),this.encodeCompressedGtinWithoutAI(u,h,m)}encodeCompressedGtinWithoutAI(u,h,m){for(let y=0;y<4;++y){let v=this.getGeneralDecoder().extractNumericValueFromBitArray(h+10*y,10);v/100===0&&u.append("0"),v/10===0&&u.append("0"),u.append(v)}Io.appendCheckDigit(u,m)}static appendCheckDigit(u,h){let m=0;for(let y=0;y<13;y++){let v=u.charAt(y+h).charCodeAt(0)-48;m+=y&1?v:3*v}m=10-m%10,m===10&&(m=0),u.append(m)}}Io.GTIN_SIZE=40;class If extends Io{constructor(u){super(u)}parseInformation(){let u=new W;u.append("(01)");let h=u.length(),m=this.getGeneralDecoder().extractNumericValueFromBitArray(If.HEADER_SIZE,4);return u.append(m),this.encodeCompressedGtinWithoutAI(u,If.HEADER_SIZE+4,h),this.getGeneralDecoder().decodeAllCodes(u,If.HEADER_SIZE+44)}}If.HEADER_SIZE=4;class fx extends HC{constructor(u){super(u)}parseInformation(){let u=new W;return this.getGeneralDecoder().decodeAllCodes(u,fx.HEADER_SIZE)}}fx.HEADER_SIZE=5;class hx extends Io{constructor(u){super(u)}encodeCompressedWeight(u,h,m){let y=this.getGeneralDecoder().extractNumericValueFromBitArray(h,m);this.addWeightCode(u,y);let v=this.checkWeight(y),E=1e5;for(let T=0;T<5;++T)v/E===0&&u.append("0"),E/=10;u.append(v)}}class Ha extends hx{constructor(u){super(u)}parseInformation(){if(this.getInformation().getSize()!=Ha.HEADER_SIZE+hx.GTIN_SIZE+Ha.WEIGHT_SIZE)throw new j;let u=new W;return this.encodeCompressedGtin(u,Ha.HEADER_SIZE),this.encodeCompressedWeight(u,Ha.HEADER_SIZE+hx.GTIN_SIZE,Ha.WEIGHT_SIZE),u.toString()}}Ha.HEADER_SIZE=5,Ha.WEIGHT_SIZE=15;class nG extends Ha{constructor(u){super(u)}addWeightCode(u,h){u.append("(3103)")}checkWeight(u){return u}}class rG extends Ha{constructor(u){super(u)}addWeightCode(u,h){h<1e4?u.append("(3202)"):u.append("(3203)")}checkWeight(u){return u<1e4?u:u-1e4}}class Ga extends Io{constructor(u){super(u)}parseInformation(){if(this.getInformation().getSize()<Ga.HEADER_SIZE+Io.GTIN_SIZE)throw new j;let u=new W;this.encodeCompressedGtin(u,Ga.HEADER_SIZE);let h=this.getGeneralDecoder().extractNumericValueFromBitArray(Ga.HEADER_SIZE+Io.GTIN_SIZE,Ga.LAST_DIGIT_SIZE);u.append("(392"),u.append(h),u.append(")");let m=this.getGeneralDecoder().decodeGeneralPurposeField(Ga.HEADER_SIZE+Io.GTIN_SIZE+Ga.LAST_DIGIT_SIZE,null);return u.append(m.getNewString()),u.toString()}}Ga.HEADER_SIZE=8,Ga.LAST_DIGIT_SIZE=2;class fo extends Io{constructor(u){super(u)}parseInformation(){if(this.getInformation().getSize()<fo.HEADER_SIZE+Io.GTIN_SIZE)throw new j;let u=new W;this.encodeCompressedGtin(u,fo.HEADER_SIZE);let h=this.getGeneralDecoder().extractNumericValueFromBitArray(fo.HEADER_SIZE+Io.GTIN_SIZE,fo.LAST_DIGIT_SIZE);u.append("(393"),u.append(h),u.append(")");let m=this.getGeneralDecoder().extractNumericValueFromBitArray(fo.HEADER_SIZE+Io.GTIN_SIZE+fo.LAST_DIGIT_SIZE,fo.FIRST_THREE_DIGITS_SIZE);m/100==0&&u.append("0"),m/10==0&&u.append("0"),u.append(m);let y=this.getGeneralDecoder().decodeGeneralPurposeField(fo.HEADER_SIZE+Io.GTIN_SIZE+fo.LAST_DIGIT_SIZE+fo.FIRST_THREE_DIGITS_SIZE,null);return u.append(y.getNewString()),u.toString()}}fo.HEADER_SIZE=8,fo.LAST_DIGIT_SIZE=2,fo.FIRST_THREE_DIGITS_SIZE=10;class ar extends hx{constructor(u,h,m){super(u),this.dateCode=m,this.firstAIdigits=h}parseInformation(){if(this.getInformation().getSize()!=ar.HEADER_SIZE+ar.GTIN_SIZE+ar.WEIGHT_SIZE+ar.DATE_SIZE)throw new j;let u=new W;return this.encodeCompressedGtin(u,ar.HEADER_SIZE),this.encodeCompressedWeight(u,ar.HEADER_SIZE+ar.GTIN_SIZE,ar.WEIGHT_SIZE),this.encodeCompressedDate(u,ar.HEADER_SIZE+ar.GTIN_SIZE+ar.WEIGHT_SIZE),u.toString()}encodeCompressedDate(u,h){let m=this.getGeneralDecoder().extractNumericValueFromBitArray(h,ar.DATE_SIZE);if(m==38400)return;u.append("("),u.append(this.dateCode),u.append(")");let y=m%32;m/=32;let v=m%12+1;m/=12;let E=m;E/10==0&&u.append("0"),u.append(E),v/10==0&&u.append("0"),u.append(v),y/10==0&&u.append("0"),u.append(y)}addWeightCode(u,h){u.append("("),u.append(this.firstAIdigits),u.append(h/1e5),u.append(")")}checkWeight(u){return u%1e5}}ar.HEADER_SIZE=8,ar.WEIGHT_SIZE=20,ar.DATE_SIZE=16;function m$(U){try{if(U.get(1))return new If(U);if(!U.get(2))return new fx(U);switch(Ef.extractNumericValueFromBitArray(U,1,4)){case 4:return new nG(U);case 5:return new rG(U)}switch(Ef.extractNumericValueFromBitArray(U,1,5)){case 12:return new Ga(U);case 13:return new fo(U)}switch(Ef.extractNumericValueFromBitArray(U,1,7)){case 56:return new ar(U,"310","11");case 57:return new ar(U,"320","11");case 58:return new ar(U,"310","13");case 59:return new ar(U,"320","13");case 60:return new ar(U,"310","15");case 61:return new ar(U,"320","15");case 62:return new ar(U,"310","17");case 63:return new ar(U,"320","17")}}catch(u){throw console.log(u),new Ve("unknown decoder: "+U)}}class vc{constructor(u,h,m,y){this.leftchar=u,this.rightchar=h,this.finderpattern=m,this.maybeLast=y}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(u,h){return u instanceof vc?vc.equalsOrNull(u.leftchar,h.leftchar)&&vc.equalsOrNull(u.rightchar,h.rightchar)&&vc.equalsOrNull(u.finderpattern,h.finderpattern):!1}static equalsOrNull(u,h){return u===null?h===null:vc.equals(u,h)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class GC{constructor(u,h,m){this.pairs=u,this.rowNumber=h,this.wasReversed=m}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(u){return this.checkEqualitity(this,u)}toString(){return"{ "+this.pairs+" }"}equals(u,h){return u instanceof GC?this.checkEqualitity(u,h)&&u.wasReversed===h.wasReversed:!1}checkEqualitity(u,h){if(!u||!h)return;let m;return u.forEach((y,v)=>{h.forEach(E=>{y.getLeftChar().getValue()===E.getLeftChar().getValue()&&y.getRightChar().getValue()===E.getRightChar().getValue()&&y.getFinderPatter().getValue()===E.getFinderPatter().getValue()&&(m=!0)})}),m}}class Ge extends Rs{constructor(u){super(...arguments),this.pairs=new Array(Ge.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=u===!0}decodeRow(u,h,m){this.pairs.length=0,this.startFromEven=!1;try{return Ge.constructResult(this.decodeRow2pairs(u,h))}catch(y){this.verbose&&console.log(y)}return this.pairs.length=0,this.startFromEven=!0,Ge.constructResult(this.decodeRow2pairs(u,h))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(u,h){let m=!1;for(;!m;)try{this.pairs.push(this.retrieveNextPair(h,this.pairs,u))}catch(v){if(v instanceof j){if(!this.pairs.length)throw new j;m=!0}}if(this.checkChecksum())return this.pairs;let y;if(this.rows.length?y=!0:y=!1,this.storeRow(u,!1),y){let v=this.checkRowsBoolean(!1);if(v!=null||(v=this.checkRowsBoolean(!0),v!=null))return v}throw new j}checkRowsBoolean(u){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,u&&(this.rows=this.rows.reverse());let h=null;try{h=this.checkRows(new Array,0)}catch(m){this.verbose&&console.log(m)}return u&&(this.rows=this.rows.reverse()),h}checkRows(u,h){for(let m=h;m<this.rows.length;m++){let y=this.rows[m];this.pairs.length=0;for(let E of u)this.pairs.push(E.getPairs());if(this.pairs.push(y.getPairs()),!Ge.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let v=new Array(u);v.push(y);try{return this.checkRows(v,m+1)}catch(E){this.verbose&&console.log(E)}}throw new j}static isValidSequence(u){for(let h of Ge.FINDER_PATTERN_SEQUENCES){if(u.length>h.length)continue;let m=!0;for(let y=0;y<u.length;y++)if(u[y].getFinderPattern().getValue()!=h[y]){m=!1;break}if(m)return!0}return!1}storeRow(u,h){let m=0,y=!1,v=!1;for(;m<this.rows.length;){let E=this.rows[m];if(E.getRowNumber()>u){v=E.isEquivalent(this.pairs);break}y=E.isEquivalent(this.pairs),m++}v||y||Ge.isPartialRow(this.pairs,this.rows)||(this.rows.push(m,new GC(this.pairs,u,h)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(u,h){for(let m of h)if(m.getPairs().length!==u.length){for(let y of m.getPairs())for(let v of u)if(vc.equals(y,v))break}}static isPartialRow(u,h){for(let m of h){let y=!0;for(let v of u){let E=!1;for(let T of m.getPairs())if(v.equals(T)){E=!0;break}if(!E){y=!1;break}}if(y)return!0}return!1}getRows(){return this.rows}static constructResult(u){let h=tG.buildBitArray(u),y=m$(h).parseInformation(),v=u[0].getFinderPattern().getResultPoints(),E=u[u.length-1].getFinderPattern().getResultPoints(),T=[v[0],v[1],E[0],E[1]];return new ge(y,null,null,T,he.RSS_EXPANDED,null)}checkChecksum(){let u=this.pairs.get(0),h=u.getLeftChar(),m=u.getRightChar();if(m==null)return!1;let y=m.getChecksumPortion(),v=2;for(let T=1;T<this.pairs.size();++T){let D=this.pairs.get(T);y+=D.getLeftChar().getChecksumPortion(),v++;let P=D.getRightChar();P!=null&&(y+=P.getChecksumPortion(),v++)}return y%=211,211*(v-4)+y==h.getValue()}static getNextSecondBar(u,h){let m;return u.get(h)?(m=u.getNextUnset(h),m=u.getNextSet(m)):(m=u.getNextSet(h),m=u.getNextUnset(m)),m}retrieveNextPair(u,h,m){let y=h.length%2==0;this.startFromEven&&(y=!y);let v,E=!0,T=-1;do this.findNextPair(u,h,T),v=this.parseFoundFinderPattern(u,m,y),v==null?T=Ge.getNextSecondBar(u,this.startEnd[0]):E=!1;while(E);let D=this.decodeDataCharacter(u,v,y,!0);if(!this.isEmptyPair(h)&&h[h.length-1].mustBeLast())throw new j;let P;try{P=this.decodeDataCharacter(u,v,y,!1)}catch(z){P=null,this.verbose&&console.log(z)}return new vc(D,P,v,!0)}isEmptyPair(u){return u.length===0}findNextPair(u,h,m){let y=this.getDecodeFinderCounters();y[0]=0,y[1]=0,y[2]=0,y[3]=0;let v=u.getSize(),E;m>=0?E=m:this.isEmptyPair(h)?E=0:E=h[h.length-1].getFinderPattern().getStartEnd()[1];let T=h.length%2!=0;this.startFromEven&&(T=!T);let D=!1;for(;E<v&&(D=!u.get(E),!!D);)E++;let P=0,z=E;for(let H=E;H<v;H++)if(u.get(H)!=D)y[P]++;else{if(P==3){if(T&&Ge.reverseCounters(y),Ge.isFinderPattern(y)){this.startEnd[0]=z,this.startEnd[1]=H;return}T&&Ge.reverseCounters(y),z+=y[0]+y[1],y[0]=y[2],y[1]=y[3],y[2]=0,y[3]=0,P--}else P++;y[P]=1,D=!D}throw new j}static reverseCounters(u){let h=u.length;for(let m=0;m<h/2;++m){let y=u[m];u[m]=u[h-m-1],u[h-m-1]=y}}parseFoundFinderPattern(u,h,m){let y,v,E;if(m){let P=this.startEnd[0]-1;for(;P>=0&&!u.get(P);)P--;P++,y=this.startEnd[0]-P,v=P,E=this.startEnd[1]}else v=this.startEnd[0],E=u.getNextUnset(this.startEnd[1]+1),y=E-this.startEnd[1];let T=this.getDecodeFinderCounters();b.arraycopy(T,0,T,1,T.length-1),T[0]=y;let D;try{D=this.parseFinderValue(T,Ge.FINDER_PATTERNS)}catch{return null}return new qs(D,[v,E],v,E,h)}decodeDataCharacter(u,h,m,y){let v=this.getDataCharacterCounters();for(let zn=0;zn<v.length;zn++)v[zn]=0;if(y)Ge.recordPatternInReverse(u,h.getStartEnd()[0],v);else{Ge.recordPattern(u,h.getStartEnd()[1],v);for(let zn=0,Os=v.length-1;zn<Os;zn++,Os--){let ii=v[zn];v[zn]=v[Os],v[Os]=ii}}let E=17,T=je.sum(new Int32Array(v))/E,D=(h.getStartEnd()[1]-h.getStartEnd()[0])/15;if(Math.abs(T-D)/D>.3)throw new j;let P=this.getOddCounts(),z=this.getEvenCounts(),H=this.getOddRoundingErrors(),K=this.getEvenRoundingErrors();for(let zn=0;zn<v.length;zn++){let Os=1*v[zn]/T,ii=Os+.5;if(ii<1){if(Os<.3)throw new j;ii=1}else if(ii>8){if(Os>8.7)throw new j;ii=8}let Df=zn/2;zn&1?(z[Df]=ii,K[Df]=Os-ii):(P[Df]=ii,H[Df]=Os-ii)}this.adjustOddEvenCounts(E);let re=4*h.getValue()+(m?0:2)+(y?0:1)-1,le=0,fe=0;for(let zn=P.length-1;zn>=0;zn--){if(Ge.isNotA1left(h,m,y)){let Os=Ge.WEIGHTS[re][2*zn];fe+=P[zn]*Os}le+=P[zn]}let Ce=0;for(let zn=z.length-1;zn>=0;zn--)if(Ge.isNotA1left(h,m,y)){let Os=Ge.WEIGHTS[re][2*zn+1];Ce+=z[zn]*Os}let Re=fe+Ce;if(le&1||le>13||le<4)throw new j;let Ze=(13-le)/2,Je=Ge.SYMBOL_WIDEST[Ze],Ke=9-Je,on=oi.getRSSvalue(P,Je,!0),Wt=oi.getRSSvalue(z,Ke,!1),To=Ge.EVEN_TOTAL_SUBSET[Ze],fa=Ge.GSUM[Ze],Ao=on*To+Wt+fa;return new Bn(Ao,Re)}static isNotA1left(u,h,m){return!(u.getValue()==0&&h&&m)}adjustOddEvenCounts(u){let h=je.sum(new Int32Array(this.getOddCounts())),m=je.sum(new Int32Array(this.getEvenCounts())),y=!1,v=!1;h>13?v=!0:h<4&&(y=!0);let E=!1,T=!1;m>13?T=!0:m<4&&(E=!0);let D=h+m-u,P=(h&1)==1,z=(m&1)==0;if(D==1)if(P){if(z)throw new j;v=!0}else{if(!z)throw new j;T=!0}else if(D==-1)if(P){if(z)throw new j;y=!0}else{if(!z)throw new j;E=!0}else if(D==0){if(P){if(!z)throw new j;h<m?(y=!0,T=!0):(v=!0,E=!0)}else if(z)throw new j}else throw new j;if(y){if(v)throw new j;Ge.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(v&&Ge.decrement(this.getOddCounts(),this.getOddRoundingErrors()),E){if(T)throw new j;Ge.increment(this.getEvenCounts(),this.getOddRoundingErrors())}T&&Ge.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Ge.SYMBOL_WIDEST=[7,5,4,3,1],Ge.EVEN_TOTAL_SUBSET=[4,20,52,104,204],Ge.GSUM=[0,348,1388,2948,3988],Ge.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],Ge.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],Ge.FINDER_PAT_A=0,Ge.FINDER_PAT_B=1,Ge.FINDER_PAT_C=2,Ge.FINDER_PAT_D=3,Ge.FINDER_PAT_E=4,Ge.FINDER_PAT_F=5,Ge.FINDER_PATTERN_SEQUENCES=[[Ge.FINDER_PAT_A,Ge.FINDER_PAT_A],[Ge.FINDER_PAT_A,Ge.FINDER_PAT_B,Ge.FINDER_PAT_B],[Ge.FINDER_PAT_A,Ge.FINDER_PAT_C,Ge.FINDER_PAT_B,Ge.FINDER_PAT_D],[Ge.FINDER_PAT_A,Ge.FINDER_PAT_E,Ge.FINDER_PAT_B,Ge.FINDER_PAT_D,Ge.FINDER_PAT_C],[Ge.FINDER_PAT_A,Ge.FINDER_PAT_E,Ge.FINDER_PAT_B,Ge.FINDER_PAT_D,Ge.FINDER_PAT_D,Ge.FINDER_PAT_F],[Ge.FINDER_PAT_A,Ge.FINDER_PAT_E,Ge.FINDER_PAT_B,Ge.FINDER_PAT_D,Ge.FINDER_PAT_E,Ge.FINDER_PAT_F,Ge.FINDER_PAT_F],[Ge.FINDER_PAT_A,Ge.FINDER_PAT_A,Ge.FINDER_PAT_B,Ge.FINDER_PAT_B,Ge.FINDER_PAT_C,Ge.FINDER_PAT_C,Ge.FINDER_PAT_D,Ge.FINDER_PAT_D],[Ge.FINDER_PAT_A,Ge.FINDER_PAT_A,Ge.FINDER_PAT_B,Ge.FINDER_PAT_B,Ge.FINDER_PAT_C,Ge.FINDER_PAT_C,Ge.FINDER_PAT_D,Ge.FINDER_PAT_E,Ge.FINDER_PAT_E],[Ge.FINDER_PAT_A,Ge.FINDER_PAT_A,Ge.FINDER_PAT_B,Ge.FINDER_PAT_B,Ge.FINDER_PAT_C,Ge.FINDER_PAT_C,Ge.FINDER_PAT_D,Ge.FINDER_PAT_E,Ge.FINDER_PAT_F,Ge.FINDER_PAT_F],[Ge.FINDER_PAT_A,Ge.FINDER_PAT_A,Ge.FINDER_PAT_B,Ge.FINDER_PAT_B,Ge.FINDER_PAT_C,Ge.FINDER_PAT_D,Ge.FINDER_PAT_D,Ge.FINDER_PAT_E,Ge.FINDER_PAT_E,Ge.FINDER_PAT_F,Ge.FINDER_PAT_F]],Ge.MAX_PAIRS=11;class sG extends Bn{constructor(u,h,m){super(u,h),this.count=0,this.finderPattern=m}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class Sr extends Rs{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(u,h,m){const y=this.decodePair(h,!1,u,m);Sr.addOrTally(this.possibleLeftPairs,y),h.reverse();let v=this.decodePair(h,!0,u,m);Sr.addOrTally(this.possibleRightPairs,v),h.reverse();for(let E of this.possibleLeftPairs)if(E.getCount()>1){for(let T of this.possibleRightPairs)if(T.getCount()>1&&Sr.checkChecksum(E,T))return Sr.constructResult(E,T)}throw new j}static addOrTally(u,h){if(h==null)return;let m=!1;for(let y of u)if(y.getValue()===h.getValue()){y.incrementCount(),m=!0;break}m||u.push(h)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(u,h){let m=4537077*u.getValue()+h.getValue(),y=new String(m).toString(),v=new W;for(let P=13-y.length;P>0;P--)v.append("0");v.append(y);let E=0;for(let P=0;P<13;P++){let z=v.charAt(P).charCodeAt(0)-48;E+=P&1?z:3*z}E=10-E%10,E===10&&(E=0),v.append(E.toString());let T=u.getFinderPattern().getResultPoints(),D=h.getFinderPattern().getResultPoints();return new ge(v.toString(),null,0,[T[0],T[1],D[0],D[1]],he.RSS_14,new Date().getTime())}static checkChecksum(u,h){let m=(u.getChecksumPortion()+16*h.getChecksumPortion())%79,y=9*u.getFinderPattern().getValue()+h.getFinderPattern().getValue();return y>72&&y--,y>8&&y--,m===y}decodePair(u,h,m,y){try{let v=this.findFinderPattern(u,h),E=this.parseFoundFinderPattern(u,m,h,v),T=y==null?null:y.get($.NEED_RESULT_POINT_CALLBACK);if(T!=null){let z=(v[0]+v[1])/2;h&&(z=u.getSize()-1-z),T.foundPossibleResultPoint(new ue(z,m))}let D=this.decodeDataCharacter(u,E,!0),P=this.decodeDataCharacter(u,E,!1);return new sG(1597*D.getValue()+P.getValue(),D.getChecksumPortion()+4*P.getChecksumPortion(),E)}catch{return null}}decodeDataCharacter(u,h,m){let y=this.getDataCharacterCounters();for(let Ce=0;Ce<y.length;Ce++)y[Ce]=0;if(m)Bt.recordPatternInReverse(u,h.getStartEnd()[0],y);else{Bt.recordPattern(u,h.getStartEnd()[1]+1,y);for(let Ce=0,Re=y.length-1;Ce<Re;Ce++,Re--){let Ze=y[Ce];y[Ce]=y[Re],y[Re]=Ze}}let v=m?16:15,E=je.sum(new Int32Array(y))/v,T=this.getOddCounts(),D=this.getEvenCounts(),P=this.getOddRoundingErrors(),z=this.getEvenRoundingErrors();for(let Ce=0;Ce<y.length;Ce++){let Re=y[Ce]/E,Ze=Math.floor(Re+.5);Ze<1?Ze=1:Ze>8&&(Ze=8);let Je=Math.floor(Ce/2);Ce&1?(D[Je]=Ze,z[Je]=Re-Ze):(T[Je]=Ze,P[Je]=Re-Ze)}this.adjustOddEvenCounts(m,v);let H=0,K=0;for(let Ce=T.length-1;Ce>=0;Ce--)K*=9,K+=T[Ce],H+=T[Ce];let re=0,le=0;for(let Ce=D.length-1;Ce>=0;Ce--)re*=9,re+=D[Ce],le+=D[Ce];let fe=K+3*re;if(m){if(H&1||H>12||H<4)throw new j;let Ce=(12-H)/2,Re=Sr.OUTSIDE_ODD_WIDEST[Ce],Ze=9-Re,Je=oi.getRSSvalue(T,Re,!1),Ke=oi.getRSSvalue(D,Ze,!0),on=Sr.OUTSIDE_EVEN_TOTAL_SUBSET[Ce],Wt=Sr.OUTSIDE_GSUM[Ce];return new Bn(Je*on+Ke+Wt,fe)}else{if(le&1||le>10||le<4)throw new j;let Ce=(10-le)/2,Re=Sr.INSIDE_ODD_WIDEST[Ce],Ze=9-Re,Je=oi.getRSSvalue(T,Re,!0),Ke=oi.getRSSvalue(D,Ze,!1),on=Sr.INSIDE_ODD_TOTAL_SUBSET[Ce],Wt=Sr.INSIDE_GSUM[Ce];return new Bn(Ke*on+Je+Wt,fe)}}findFinderPattern(u,h){let m=this.getDecodeFinderCounters();m[0]=0,m[1]=0,m[2]=0,m[3]=0;let y=u.getSize(),v=!1,E=0;for(;E<y&&(v=!u.get(E),h!==v);)E++;let T=0,D=E;for(let P=E;P<y;P++)if(u.get(P)!==v)m[T]++;else{if(T===3){if(Rs.isFinderPattern(m))return[D,P];D+=m[0]+m[1],m[0]=m[2],m[1]=m[3],m[2]=0,m[3]=0,T--}else T++;m[T]=1,v=!v}throw new j}parseFoundFinderPattern(u,h,m,y){let v=u.get(y[0]),E=y[0]-1;for(;E>=0&&v!==u.get(E);)E--;E++;const T=y[0]-E,D=this.getDecodeFinderCounters(),P=new Int32Array(D.length);b.arraycopy(D,0,P,1,D.length-1),P[0]=T;const z=this.parseFinderValue(P,Sr.FINDER_PATTERNS);let H=E,K=y[1];return m&&(H=u.getSize()-1-H,K=u.getSize()-1-K),new qs(z,[E,y[1]],H,K,h)}adjustOddEvenCounts(u,h){let m=je.sum(new Int32Array(this.getOddCounts())),y=je.sum(new Int32Array(this.getEvenCounts())),v=!1,E=!1,T=!1,D=!1;u?(m>12?E=!0:m<4&&(v=!0),y>12?D=!0:y<4&&(T=!0)):(m>11?E=!0:m<5&&(v=!0),y>10?D=!0:y<4&&(T=!0));let P=m+y-h,z=(m&1)===(u?1:0),H=(y&1)===1;if(P===1)if(z){if(H)throw new j;E=!0}else{if(!H)throw new j;D=!0}else if(P===-1)if(z){if(H)throw new j;v=!0}else{if(!H)throw new j;T=!0}else if(P===0){if(z){if(!H)throw new j;m<y?(v=!0,D=!0):(E=!0,T=!0)}else if(H)throw new j}else throw new j;if(v){if(E)throw new j;Rs.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(E&&Rs.decrement(this.getOddCounts(),this.getOddRoundingErrors()),T){if(D)throw new j;Rs.increment(this.getEvenCounts(),this.getOddRoundingErrors())}D&&Rs.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Sr.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],Sr.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],Sr.OUTSIDE_GSUM=[0,161,961,2015,2715],Sr.INSIDE_GSUM=[0,336,1036,1516],Sr.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],Sr.INSIDE_ODD_WIDEST=[2,4,6,8],Sr.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class kf extends Bt{constructor(u,h){super(),this.readers=[],this.verbose=h===!0;const m=u?u.get($.POSSIBLE_FORMATS):null,y=u&&u.get($.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;m?((m.includes(he.EAN_13)||m.includes(he.UPC_A)||m.includes(he.EAN_8)||m.includes(he.UPC_E))&&this.readers.push(new dx(u)),m.includes(he.CODE_39)&&this.readers.push(new et(y)),m.includes(he.CODE_128)&&this.readers.push(new Xe),m.includes(he.ITF)&&this.readers.push(new ut),m.includes(he.RSS_14)&&this.readers.push(new Sr),m.includes(he.RSS_EXPANDED)&&this.readers.push(new Ge(this.verbose))):(this.readers.push(new dx(u)),this.readers.push(new et),this.readers.push(new dx(u)),this.readers.push(new Xe),this.readers.push(new ut),this.readers.push(new Sr),this.readers.push(new Ge(this.verbose)))}decodeRow(u,h,m){for(let y=0;y<this.readers.length;y++)try{return this.readers[y].decodeRow(u,h,m)}catch{}throw new j}reset(){this.readers.forEach(u=>u.reset())}}class oG extends ye{constructor(u=500,h){super(new kf(h),u,h)}}class In{constructor(u,h,m){this.ecCodewords=u,this.ecBlocks=[h],m&&this.ecBlocks.push(m)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class Cn{constructor(u,h){this.count=u,this.dataCodewords=h}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class un{constructor(u,h,m,y,v,E){this.versionNumber=u,this.symbolSizeRows=h,this.symbolSizeColumns=m,this.dataRegionSizeRows=y,this.dataRegionSizeColumns=v,this.ecBlocks=E;let T=0;const D=E.getECCodewords(),P=E.getECBlocks();for(let z of P)T+=z.getCount()*(z.getDataCodewords()+D);this.totalCodewords=T}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(u,h){if(u&1||h&1)throw new O;for(let m of un.VERSIONS)if(m.symbolSizeRows===u&&m.symbolSizeColumns===h)return m;throw new O}toString(){return""+this.versionNumber}static buildVersions(){return[new un(1,10,10,8,8,new In(5,new Cn(1,3))),new un(2,12,12,10,10,new In(7,new Cn(1,5))),new un(3,14,14,12,12,new In(10,new Cn(1,8))),new un(4,16,16,14,14,new In(12,new Cn(1,12))),new un(5,18,18,16,16,new In(14,new Cn(1,18))),new un(6,20,20,18,18,new In(18,new Cn(1,22))),new un(7,22,22,20,20,new In(20,new Cn(1,30))),new un(8,24,24,22,22,new In(24,new Cn(1,36))),new un(9,26,26,24,24,new In(28,new Cn(1,44))),new un(10,32,32,14,14,new In(36,new Cn(1,62))),new un(11,36,36,16,16,new In(42,new Cn(1,86))),new un(12,40,40,18,18,new In(48,new Cn(1,114))),new un(13,44,44,20,20,new In(56,new Cn(1,144))),new un(14,48,48,22,22,new In(68,new Cn(1,174))),new un(15,52,52,24,24,new In(42,new Cn(2,102))),new un(16,64,64,14,14,new In(56,new Cn(2,140))),new un(17,72,72,16,16,new In(36,new Cn(4,92))),new un(18,80,80,18,18,new In(48,new Cn(4,114))),new un(19,88,88,20,20,new In(56,new Cn(4,144))),new un(20,96,96,22,22,new In(68,new Cn(4,174))),new un(21,104,104,24,24,new In(56,new Cn(6,136))),new un(22,120,120,18,18,new In(68,new Cn(6,175))),new un(23,132,132,20,20,new In(62,new Cn(8,163))),new un(24,144,144,22,22,new In(62,new Cn(8,156),new Cn(2,155))),new un(25,8,18,6,16,new In(7,new Cn(1,5))),new un(26,8,32,6,14,new In(11,new Cn(1,10))),new un(27,12,26,10,24,new In(14,new Cn(1,16))),new un(28,12,36,10,16,new In(18,new Cn(1,22))),new un(29,16,36,14,16,new In(24,new Cn(1,32))),new un(30,16,48,14,22,new In(28,new Cn(1,49)))]}}un.VERSIONS=un.buildVersions();class qC{constructor(u){const h=u.getHeight();if(h<8||h>144||h&1)throw new O;this.version=qC.readVersion(u),this.mappingBitMatrix=this.extractDataRegion(u),this.readMappingMatrix=new q(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(u){const h=u.getHeight(),m=u.getWidth();return un.getVersionForDimensions(h,m)}readCodewords(){const u=new Int8Array(this.version.getTotalCodewords());let h=0,m=4,y=0;const v=this.mappingBitMatrix.getHeight(),E=this.mappingBitMatrix.getWidth();let T=!1,D=!1,P=!1,z=!1;do if(m===v&&y===0&&!T)u[h++]=this.readCorner1(v,E)&255,m-=2,y+=2,T=!0;else if(m===v-2&&y===0&&E&3&&!D)u[h++]=this.readCorner2(v,E)&255,m-=2,y+=2,D=!0;else if(m===v+4&&y===2&&!(E&7)&&!P)u[h++]=this.readCorner3(v,E)&255,m-=2,y+=2,P=!0;else if(m===v-2&&y===0&&(E&7)===4&&!z)u[h++]=this.readCorner4(v,E)&255,m-=2,y+=2,z=!0;else{do m<v&&y>=0&&!this.readMappingMatrix.get(y,m)&&(u[h++]=this.readUtah(m,y,v,E)&255),m-=2,y+=2;while(m>=0&&y<E);m+=1,y+=3;do m>=0&&y<E&&!this.readMappingMatrix.get(y,m)&&(u[h++]=this.readUtah(m,y,v,E)&255),m+=2,y-=2;while(m<v&&y>=0);m+=3,y+=1}while(m<v||y<E);if(h!==this.version.getTotalCodewords())throw new O;return u}readModule(u,h,m,y){return u<0&&(u+=m,h+=4-(m+4&7)),h<0&&(h+=y,u+=4-(y+4&7)),this.readMappingMatrix.set(h,u),this.mappingBitMatrix.get(h,u)}readUtah(u,h,m,y){let v=0;return this.readModule(u-2,h-2,m,y)&&(v|=1),v<<=1,this.readModule(u-2,h-1,m,y)&&(v|=1),v<<=1,this.readModule(u-1,h-2,m,y)&&(v|=1),v<<=1,this.readModule(u-1,h-1,m,y)&&(v|=1),v<<=1,this.readModule(u-1,h,m,y)&&(v|=1),v<<=1,this.readModule(u,h-2,m,y)&&(v|=1),v<<=1,this.readModule(u,h-1,m,y)&&(v|=1),v<<=1,this.readModule(u,h,m,y)&&(v|=1),v}readCorner1(u,h){let m=0;return this.readModule(u-1,0,u,h)&&(m|=1),m<<=1,this.readModule(u-1,1,u,h)&&(m|=1),m<<=1,this.readModule(u-1,2,u,h)&&(m|=1),m<<=1,this.readModule(0,h-2,u,h)&&(m|=1),m<<=1,this.readModule(0,h-1,u,h)&&(m|=1),m<<=1,this.readModule(1,h-1,u,h)&&(m|=1),m<<=1,this.readModule(2,h-1,u,h)&&(m|=1),m<<=1,this.readModule(3,h-1,u,h)&&(m|=1),m}readCorner2(u,h){let m=0;return this.readModule(u-3,0,u,h)&&(m|=1),m<<=1,this.readModule(u-2,0,u,h)&&(m|=1),m<<=1,this.readModule(u-1,0,u,h)&&(m|=1),m<<=1,this.readModule(0,h-4,u,h)&&(m|=1),m<<=1,this.readModule(0,h-3,u,h)&&(m|=1),m<<=1,this.readModule(0,h-2,u,h)&&(m|=1),m<<=1,this.readModule(0,h-1,u,h)&&(m|=1),m<<=1,this.readModule(1,h-1,u,h)&&(m|=1),m}readCorner3(u,h){let m=0;return this.readModule(u-1,0,u,h)&&(m|=1),m<<=1,this.readModule(u-1,h-1,u,h)&&(m|=1),m<<=1,this.readModule(0,h-3,u,h)&&(m|=1),m<<=1,this.readModule(0,h-2,u,h)&&(m|=1),m<<=1,this.readModule(0,h-1,u,h)&&(m|=1),m<<=1,this.readModule(1,h-3,u,h)&&(m|=1),m<<=1,this.readModule(1,h-2,u,h)&&(m|=1),m<<=1,this.readModule(1,h-1,u,h)&&(m|=1),m}readCorner4(u,h){let m=0;return this.readModule(u-3,0,u,h)&&(m|=1),m<<=1,this.readModule(u-2,0,u,h)&&(m|=1),m<<=1,this.readModule(u-1,0,u,h)&&(m|=1),m<<=1,this.readModule(0,h-2,u,h)&&(m|=1),m<<=1,this.readModule(0,h-1,u,h)&&(m|=1),m<<=1,this.readModule(1,h-1,u,h)&&(m|=1),m<<=1,this.readModule(2,h-1,u,h)&&(m|=1),m<<=1,this.readModule(3,h-1,u,h)&&(m|=1),m}extractDataRegion(u){const h=this.version.getSymbolSizeRows(),m=this.version.getSymbolSizeColumns();if(u.getHeight()!==h)throw new f("Dimension of bitMatrix must match the version size");const y=this.version.getDataRegionSizeRows(),v=this.version.getDataRegionSizeColumns(),E=h/y|0,T=m/v|0,D=E*y,P=T*v,z=new q(P,D);for(let H=0;H<E;++H){const K=H*y;for(let re=0;re<T;++re){const le=re*v;for(let fe=0;fe<y;++fe){const Ce=H*(y+2)+1+fe,Re=K+fe;for(let Ze=0;Ze<v;++Ze){const Je=re*(v+2)+1+Ze;if(u.get(Je,Ce)){const Ke=le+Ze;z.set(Ke,Re)}}}}}return z}}class XC{constructor(u,h){this.numDataCodewords=u,this.codewords=h}static getDataBlocks(u,h){const m=h.getECBlocks();let y=0;const v=m.getECBlocks();for(let fe of v)y+=fe.getCount();const E=new Array(y);let T=0;for(let fe of v)for(let Ce=0;Ce<fe.getCount();Ce++){const Re=fe.getDataCodewords(),Ze=m.getECCodewords()+Re;E[T++]=new XC(Re,new Uint8Array(Ze))}const P=E[0].codewords.length-m.getECCodewords(),z=P-1;let H=0;for(let fe=0;fe<z;fe++)for(let Ce=0;Ce<T;Ce++)E[Ce].codewords[fe]=u[H++];const K=h.getVersionNumber()===24,re=K?8:T;for(let fe=0;fe<re;fe++)E[fe].codewords[P-1]=u[H++];const le=E[0].codewords.length;for(let fe=P;fe<le;fe++)for(let Ce=0;Ce<T;Ce++){const Re=K?(Ce+8)%T:Ce,Ze=K&&Re>7?fe-1:fe;E[Re].codewords[Ze]=u[H++]}if(H!==u.length)throw new f;return E}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class KC{constructor(u){this.bytes=u,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(u){if(u<1||u>32||u>this.available())throw new f(""+u);let h=0,m=this.bitOffset,y=this.byteOffset;const v=this.bytes;if(m>0){const E=8-m,T=u<E?u:E,D=E-T,P=255>>8-T<<D;h=(v[y]&P)>>D,u-=T,m+=T,m===8&&(m=0,y++)}if(u>0){for(;u>=8;)h=h<<8|v[y]&255,y++,u-=8;if(u>0){const E=8-u,T=255>>E<<E;h=h<<u|(v[y]&T)>>E,m+=u}}return this.bitOffset=m,this.byteOffset=y,h}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var rs;(function(U){U[U.PAD_ENCODE=0]="PAD_ENCODE",U[U.ASCII_ENCODE=1]="ASCII_ENCODE",U[U.C40_ENCODE=2]="C40_ENCODE",U[U.TEXT_ENCODE=3]="TEXT_ENCODE",U[U.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",U[U.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",U[U.BASE256_ENCODE=6]="BASE256_ENCODE"})(rs||(rs={}));class Cc{static decode(u){const h=new KC(u),m=new W,y=new W,v=new Array;let E=rs.ASCII_ENCODE;do if(E===rs.ASCII_ENCODE)E=this.decodeAsciiSegment(h,m,y);else{switch(E){case rs.C40_ENCODE:this.decodeC40Segment(h,m);break;case rs.TEXT_ENCODE:this.decodeTextSegment(h,m);break;case rs.ANSIX12_ENCODE:this.decodeAnsiX12Segment(h,m);break;case rs.EDIFACT_ENCODE:this.decodeEdifactSegment(h,m);break;case rs.BASE256_ENCODE:this.decodeBase256Segment(h,m,v);break;default:throw new O}E=rs.ASCII_ENCODE}while(E!==rs.PAD_ENCODE&&h.available()>0);return y.length()>0&&m.append(y.toString()),new Oe(u,m.toString(),v.length===0?null:v,null)}static decodeAsciiSegment(u,h,m){let y=!1;do{let v=u.readBits(8);if(v===0)throw new O;if(v<=128)return y&&(v+=128),h.append(String.fromCharCode(v-1)),rs.ASCII_ENCODE;if(v===129)return rs.PAD_ENCODE;if(v<=229){const E=v-130;E<10&&h.append("0"),h.append(""+E)}else switch(v){case 230:return rs.C40_ENCODE;case 231:return rs.BASE256_ENCODE;case 232:h.append("");break;case 233:case 234:break;case 235:y=!0;break;case 236:h.append("[)>05"),m.insert(0,"");break;case 237:h.append("[)>06"),m.insert(0,"");break;case 238:return rs.ANSIX12_ENCODE;case 239:return rs.TEXT_ENCODE;case 240:return rs.EDIFACT_ENCODE;case 241:break;default:if(v!==254||u.available()!==0)throw new O;break}}while(u.available()>0);return rs.ASCII_ENCODE}static decodeC40Segment(u,h){let m=!1;const y=[];let v=0;do{if(u.available()===8)return;const E=u.readBits(8);if(E===254)return;this.parseTwoBytes(E,u.readBits(8),y);for(let T=0;T<3;T++){const D=y[T];switch(v){case 0:if(D<3)v=D+1;else if(D<this.C40_BASIC_SET_CHARS.length){const P=this.C40_BASIC_SET_CHARS[D];m?(h.append(String.fromCharCode(P.charCodeAt(0)+128)),m=!1):h.append(P)}else throw new O;break;case 1:m?(h.append(String.fromCharCode(D+128)),m=!1):h.append(String.fromCharCode(D)),v=0;break;case 2:if(D<this.C40_SHIFT2_SET_CHARS.length){const P=this.C40_SHIFT2_SET_CHARS[D];m?(h.append(String.fromCharCode(P.charCodeAt(0)+128)),m=!1):h.append(P)}else switch(D){case 27:h.append("");break;case 30:m=!0;break;default:throw new O}v=0;break;case 3:m?(h.append(String.fromCharCode(D+224)),m=!1):h.append(String.fromCharCode(D+96)),v=0;break;default:throw new O}}}while(u.available()>0)}static decodeTextSegment(u,h){let m=!1,y=[],v=0;do{if(u.available()===8)return;const E=u.readBits(8);if(E===254)return;this.parseTwoBytes(E,u.readBits(8),y);for(let T=0;T<3;T++){const D=y[T];switch(v){case 0:if(D<3)v=D+1;else if(D<this.TEXT_BASIC_SET_CHARS.length){const P=this.TEXT_BASIC_SET_CHARS[D];m?(h.append(String.fromCharCode(P.charCodeAt(0)+128)),m=!1):h.append(P)}else throw new O;break;case 1:m?(h.append(String.fromCharCode(D+128)),m=!1):h.append(String.fromCharCode(D)),v=0;break;case 2:if(D<this.TEXT_SHIFT2_SET_CHARS.length){const P=this.TEXT_SHIFT2_SET_CHARS[D];m?(h.append(String.fromCharCode(P.charCodeAt(0)+128)),m=!1):h.append(P)}else switch(D){case 27:h.append("");break;case 30:m=!0;break;default:throw new O}v=0;break;case 3:if(D<this.TEXT_SHIFT3_SET_CHARS.length){const P=this.TEXT_SHIFT3_SET_CHARS[D];m?(h.append(String.fromCharCode(P.charCodeAt(0)+128)),m=!1):h.append(P),v=0}else throw new O;break;default:throw new O}}}while(u.available()>0)}static decodeAnsiX12Segment(u,h){const m=[];do{if(u.available()===8)return;const y=u.readBits(8);if(y===254)return;this.parseTwoBytes(y,u.readBits(8),m);for(let v=0;v<3;v++){const E=m[v];switch(E){case 0:h.append("\r");break;case 1:h.append("*");break;case 2:h.append(">");break;case 3:h.append(" ");break;default:if(E<14)h.append(String.fromCharCode(E+44));else if(E<40)h.append(String.fromCharCode(E+51));else throw new O;break}}}while(u.available()>0)}static parseTwoBytes(u,h,m){let y=(u<<8)+h-1,v=Math.floor(y/1600);m[0]=v,y-=v*1600,v=Math.floor(y/40),m[1]=v,m[2]=y-v*40}static decodeEdifactSegment(u,h){do{if(u.available()<=16)return;for(let m=0;m<4;m++){let y=u.readBits(6);if(y===31){const v=8-u.getBitOffset();v!==8&&u.readBits(v);return}y&32||(y|=64),h.append(String.fromCharCode(y))}}while(u.available()>0)}static decodeBase256Segment(u,h,m){let y=1+u.getByteOffset();const v=this.unrandomize255State(u.readBits(8),y++);let E;if(v===0?E=u.available()/8|0:v<250?E=v:E=250*(v-249)+this.unrandomize255State(u.readBits(8),y++),E<0)throw new O;const T=new Uint8Array(E);for(let D=0;D<E;D++){if(u.available()<8)throw new O;T[D]=this.unrandomize255State(u.readBits(8),y++)}m.push(T);try{h.append(V.decode(T,B.ISO88591))}catch(D){throw new Ve("Platform does not support required encoding: "+D.message)}}static unrandomize255State(u,h){const m=149*h%255+1,y=u-m;return y>=0?y:y+256}}Cc.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],Cc.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],Cc.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],Cc.TEXT_SHIFT2_SET_CHARS=Cc.C40_SHIFT2_SET_CHARS,Cc.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class iG{constructor(){this.rsDecoder=new Fe(pe.DATA_MATRIX_FIELD_256)}decode(u){const h=new qC(u),m=h.getVersion(),y=h.readCodewords(),v=XC.getDataBlocks(y,m);let E=0;for(let P of v)E+=P.getNumDataCodewords();const T=new Uint8Array(E),D=v.length;for(let P=0;P<D;P++){const z=v[P],H=z.getCodewords(),K=z.getNumDataCodewords();this.correctErrors(H,K);for(let re=0;re<K;re++)T[re*D+P]=H[re]}return Cc.decode(T)}correctErrors(u,h){const m=new Int32Array(u);try{this.rsDecoder.decode(m,u.length-h)}catch{throw new g}for(let y=0;y<h;y++)u[y]=m[y]}}class Pr{constructor(u){this.image=u,this.rectangleDetector=new ot(this.image)}detect(){const u=this.rectangleDetector.detect();let h=this.detectSolid1(u);if(h=this.detectSolid2(h),h[3]=this.correctTopRight(h),!h[3])throw new j;h=this.shiftToModuleCenter(h);const m=h[0],y=h[1],v=h[2],E=h[3];let T=this.transitionsBetween(m,E)+1,D=this.transitionsBetween(v,E)+1;(T&1)===1&&(T+=1),(D&1)===1&&(D+=1),4*T<7*D&&4*D<7*T&&(T=D=Math.max(T,D));let P=Pr.sampleGrid(this.image,m,y,v,E,T,D);return new He(P,[m,y,v,E])}static shiftPoint(u,h,m){let y=(h.getX()-u.getX())/(m+1),v=(h.getY()-u.getY())/(m+1);return new ue(u.getX()+y,u.getY()+v)}static moveAway(u,h,m){let y=u.getX(),v=u.getY();return y<h?y-=1:y+=1,v<m?v-=1:v+=1,new ue(y,v)}detectSolid1(u){let h=u[0],m=u[1],y=u[3],v=u[2],E=this.transitionsBetween(h,m),T=this.transitionsBetween(m,y),D=this.transitionsBetween(y,v),P=this.transitionsBetween(v,h),z=E,H=[v,h,m,y];return z>T&&(z=T,H[0]=h,H[1]=m,H[2]=y,H[3]=v),z>D&&(z=D,H[0]=m,H[1]=y,H[2]=v,H[3]=h),z>P&&(H[0]=y,H[1]=v,H[2]=h,H[3]=m),H}detectSolid2(u){let h=u[0],m=u[1],y=u[2],v=u[3],E=this.transitionsBetween(h,v),T=Pr.shiftPoint(m,y,(E+1)*4),D=Pr.shiftPoint(y,m,(E+1)*4),P=this.transitionsBetween(T,h),z=this.transitionsBetween(D,v);return P<z?(u[0]=h,u[1]=m,u[2]=y,u[3]=v):(u[0]=m,u[1]=y,u[2]=v,u[3]=h),u}correctTopRight(u){let h=u[0],m=u[1],y=u[2],v=u[3],E=this.transitionsBetween(h,v),T=this.transitionsBetween(m,v),D=Pr.shiftPoint(h,m,(T+1)*4),P=Pr.shiftPoint(y,m,(E+1)*4);E=this.transitionsBetween(D,v),T=this.transitionsBetween(P,v);let z=new ue(v.getX()+(y.getX()-m.getX())/(E+1),v.getY()+(y.getY()-m.getY())/(E+1)),H=new ue(v.getX()+(h.getX()-m.getX())/(T+1),v.getY()+(h.getY()-m.getY())/(T+1));if(!this.isValid(z))return this.isValid(H)?H:null;if(!this.isValid(H))return z;let K=this.transitionsBetween(D,z)+this.transitionsBetween(P,z),re=this.transitionsBetween(D,H)+this.transitionsBetween(P,H);return K>re?z:H}shiftToModuleCenter(u){let h=u[0],m=u[1],y=u[2],v=u[3],E=this.transitionsBetween(h,v)+1,T=this.transitionsBetween(y,v)+1,D=Pr.shiftPoint(h,m,T*4),P=Pr.shiftPoint(y,m,E*4);E=this.transitionsBetween(D,v)+1,T=this.transitionsBetween(P,v)+1,(E&1)===1&&(E+=1),(T&1)===1&&(T+=1);let z=(h.getX()+m.getX()+y.getX()+v.getX())/4,H=(h.getY()+m.getY()+y.getY()+v.getY())/4;h=Pr.moveAway(h,z,H),m=Pr.moveAway(m,z,H),y=Pr.moveAway(y,z,H),v=Pr.moveAway(v,z,H);let K,re;return D=Pr.shiftPoint(h,m,T*4),D=Pr.shiftPoint(D,v,E*4),K=Pr.shiftPoint(m,h,T*4),K=Pr.shiftPoint(K,y,E*4),P=Pr.shiftPoint(y,v,T*4),P=Pr.shiftPoint(P,m,E*4),re=Pr.shiftPoint(v,y,T*4),re=Pr.shiftPoint(re,h,E*4),[D,K,P,re]}isValid(u){return u.getX()>=0&&u.getX()<this.image.getWidth()&&u.getY()>0&&u.getY()<this.image.getHeight()}static sampleGrid(u,h,m,y,v,E,T){return hn.getInstance().sampleGrid(u,E,T,.5,.5,E-.5,.5,E-.5,T-.5,.5,T-.5,h.getX(),h.getY(),v.getX(),v.getY(),y.getX(),y.getY(),m.getX(),m.getY())}transitionsBetween(u,h){let m=Math.trunc(u.getX()),y=Math.trunc(u.getY()),v=Math.trunc(h.getX()),E=Math.trunc(h.getY()),T=Math.abs(E-y)>Math.abs(v-m);if(T){let fe=m;m=y,y=fe,fe=v,v=E,E=fe}let D=Math.abs(v-m),P=Math.abs(E-y),z=-D/2,H=y<E?1:-1,K=m<v?1:-1,re=0,le=this.image.get(T?y:m,T?m:y);for(let fe=m,Ce=y;fe!==v;fe+=K){let Re=this.image.get(T?Ce:fe,T?fe:Ce);if(Re!==le&&(re++,le=Re),z+=P,z>0){if(Ce===E)break;Ce+=H,z-=D}}return re}}class Sc{constructor(){this.decoder=new iG}decode(u,h=null){let m,y;if(h!=null&&h.has($.PURE_BARCODE)){const P=Sc.extractPureBits(u.getBlackMatrix());m=this.decoder.decode(P),y=Sc.NO_POINTS}else{const P=new Pr(u.getBlackMatrix()).detect();m=this.decoder.decode(P.getBits()),y=P.getPoints()}const v=m.getRawBytes(),E=new ge(m.getText(),v,8*v.length,y,he.DATA_MATRIX,b.currentTimeMillis()),T=m.getByteSegments();T!=null&&E.putMetadata(ze.BYTE_SEGMENTS,T);const D=m.getECLevel();return D!=null&&E.putMetadata(ze.ERROR_CORRECTION_LEVEL,D),E}reset(){}static extractPureBits(u){const h=u.getTopLeftOnBit(),m=u.getBottomRightOnBit();if(h==null||m==null)throw new j;const y=this.moduleSize(h,u);let v=h[1];const E=m[1];let T=h[0];const P=(m[0]-T+1)/y,z=(E-v+1)/y;if(P<=0||z<=0)throw new j;const H=y/2;v+=H,T+=H;const K=new q(P,z);for(let re=0;re<z;re++){const le=v+re*y;for(let fe=0;fe<P;fe++)u.get(T+fe*y,le)&&K.set(fe,re)}return K}static moduleSize(u,h){const m=h.getWidth();let y=u[0];const v=u[1];for(;y<m&&h.get(y,v);)y++;if(y===m)throw new j;const E=y-u[0];if(E===0)throw new j;return E}}Sc.NO_POINTS=[];class aG extends ye{constructor(u=500){super(new Sc,u)}}var Tf;(function(U){U[U.L=0]="L",U[U.M=1]="M",U[U.Q=2]="Q",U[U.H=3]="H"})(Tf||(Tf={}));class Kn{constructor(u,h,m){this.value=u,this.stringValue=h,this.bits=m,Kn.FOR_BITS.set(m,this),Kn.FOR_VALUE.set(u,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(u){switch(u){case"L":return Kn.L;case"M":return Kn.M;case"Q":return Kn.Q;case"H":return Kn.H;default:throw new d(u+"not available")}}toString(){return this.stringValue}equals(u){if(!(u instanceof Kn))return!1;const h=u;return this.value===h.value}static forBits(u){if(u<0||u>=Kn.FOR_BITS.size)throw new f;return Kn.FOR_BITS.get(u)}}Kn.FOR_BITS=new Map,Kn.FOR_VALUE=new Map,Kn.L=new Kn(Tf.L,"L",1),Kn.M=new Kn(Tf.M,"M",0),Kn.Q=new Kn(Tf.Q,"Q",3),Kn.H=new Kn(Tf.H,"H",2);class Xs{constructor(u){this.errorCorrectionLevel=Kn.forBits(u>>3&3),this.dataMask=u&7}static numBitsDiffering(u,h){return k.bitCount(u^h)}static decodeFormatInformation(u,h){const m=Xs.doDecodeFormatInformation(u,h);return m!==null?m:Xs.doDecodeFormatInformation(u^Xs.FORMAT_INFO_MASK_QR,h^Xs.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(u,h){let m=Number.MAX_SAFE_INTEGER,y=0;for(const v of Xs.FORMAT_INFO_DECODE_LOOKUP){const E=v[0];if(E===u||E===h)return new Xs(v[1]);let T=Xs.numBitsDiffering(u,E);T<m&&(y=v[1],m=T),u!==h&&(T=Xs.numBitsDiffering(h,E),T<m&&(y=v[1],m=T))}return m<=3?new Xs(y):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(u){if(!(u instanceof Xs))return!1;const h=u;return this.errorCorrectionLevel===h.errorCorrectionLevel&&this.dataMask===h.dataMask}}Xs.FORMAT_INFO_MASK_QR=21522,Xs.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class Ne{constructor(u,...h){this.ecCodewordsPerBlock=u,this.ecBlocks=h}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let u=0;const h=this.ecBlocks;for(const m of h)u+=m.getCount();return u}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class te{constructor(u,h){this.count=u,this.dataCodewords=h}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Tt{constructor(u,h,...m){this.versionNumber=u,this.alignmentPatternCenters=h,this.ecBlocks=m;let y=0;const v=m[0].getECCodewordsPerBlock(),E=m[0].getECBlocks();for(const T of E)y+=T.getCount()*(T.getDataCodewords()+v);this.totalCodewords=y}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(u){return this.ecBlocks[u.getValue()]}static getProvisionalVersionForDimension(u){if(u%4!==1)throw new O;try{return this.getVersionForNumber((u-17)/4)}catch{throw new O}}static getVersionForNumber(u){if(u<1||u>40)throw new f;return Tt.VERSIONS[u-1]}static decodeVersionInformation(u){let h=Number.MAX_SAFE_INTEGER,m=0;for(let y=0;y<Tt.VERSION_DECODE_INFO.length;y++){const v=Tt.VERSION_DECODE_INFO[y];if(v===u)return Tt.getVersionForNumber(y+7);const E=Xs.numBitsDiffering(u,v);E<h&&(m=y+7,h=E)}return h<=3?Tt.getVersionForNumber(m):null}buildFunctionPattern(){const u=this.getDimensionForVersion(),h=new q(u);h.setRegion(0,0,9,9),h.setRegion(u-8,0,8,9),h.setRegion(0,u-8,9,8);const m=this.alignmentPatternCenters.length;for(let y=0;y<m;y++){const v=this.alignmentPatternCenters[y]-2;for(let E=0;E<m;E++)y===0&&(E===0||E===m-1)||y===m-1&&E===0||h.setRegion(this.alignmentPatternCenters[E]-2,v,5,5)}return h.setRegion(6,9,1,u-17),h.setRegion(9,6,u-17,1),this.versionNumber>6&&(h.setRegion(u-11,0,3,6),h.setRegion(0,u-11,6,3)),h}toString(){return""+this.versionNumber}}Tt.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),Tt.VERSIONS=[new Tt(1,new Int32Array(0),new Ne(7,new te(1,19)),new Ne(10,new te(1,16)),new Ne(13,new te(1,13)),new Ne(17,new te(1,9))),new Tt(2,Int32Array.from([6,18]),new Ne(10,new te(1,34)),new Ne(16,new te(1,28)),new Ne(22,new te(1,22)),new Ne(28,new te(1,16))),new Tt(3,Int32Array.from([6,22]),new Ne(15,new te(1,55)),new Ne(26,new te(1,44)),new Ne(18,new te(2,17)),new Ne(22,new te(2,13))),new Tt(4,Int32Array.from([6,26]),new Ne(20,new te(1,80)),new Ne(18,new te(2,32)),new Ne(26,new te(2,24)),new Ne(16,new te(4,9))),new Tt(5,Int32Array.from([6,30]),new Ne(26,new te(1,108)),new Ne(24,new te(2,43)),new Ne(18,new te(2,15),new te(2,16)),new Ne(22,new te(2,11),new te(2,12))),new Tt(6,Int32Array.from([6,34]),new Ne(18,new te(2,68)),new Ne(16,new te(4,27)),new Ne(24,new te(4,19)),new Ne(28,new te(4,15))),new Tt(7,Int32Array.from([6,22,38]),new Ne(20,new te(2,78)),new Ne(18,new te(4,31)),new Ne(18,new te(2,14),new te(4,15)),new Ne(26,new te(4,13),new te(1,14))),new Tt(8,Int32Array.from([6,24,42]),new Ne(24,new te(2,97)),new Ne(22,new te(2,38),new te(2,39)),new Ne(22,new te(4,18),new te(2,19)),new Ne(26,new te(4,14),new te(2,15))),new Tt(9,Int32Array.from([6,26,46]),new Ne(30,new te(2,116)),new Ne(22,new te(3,36),new te(2,37)),new Ne(20,new te(4,16),new te(4,17)),new Ne(24,new te(4,12),new te(4,13))),new Tt(10,Int32Array.from([6,28,50]),new Ne(18,new te(2,68),new te(2,69)),new Ne(26,new te(4,43),new te(1,44)),new Ne(24,new te(6,19),new te(2,20)),new Ne(28,new te(6,15),new te(2,16))),new Tt(11,Int32Array.from([6,30,54]),new Ne(20,new te(4,81)),new Ne(30,new te(1,50),new te(4,51)),new Ne(28,new te(4,22),new te(4,23)),new Ne(24,new te(3,12),new te(8,13))),new Tt(12,Int32Array.from([6,32,58]),new Ne(24,new te(2,92),new te(2,93)),new Ne(22,new te(6,36),new te(2,37)),new Ne(26,new te(4,20),new te(6,21)),new Ne(28,new te(7,14),new te(4,15))),new Tt(13,Int32Array.from([6,34,62]),new Ne(26,new te(4,107)),new Ne(22,new te(8,37),new te(1,38)),new Ne(24,new te(8,20),new te(4,21)),new Ne(22,new te(12,11),new te(4,12))),new Tt(14,Int32Array.from([6,26,46,66]),new Ne(30,new te(3,115),new te(1,116)),new Ne(24,new te(4,40),new te(5,41)),new Ne(20,new te(11,16),new te(5,17)),new Ne(24,new te(11,12),new te(5,13))),new Tt(15,Int32Array.from([6,26,48,70]),new Ne(22,new te(5,87),new te(1,88)),new Ne(24,new te(5,41),new te(5,42)),new Ne(30,new te(5,24),new te(7,25)),new Ne(24,new te(11,12),new te(7,13))),new Tt(16,Int32Array.from([6,26,50,74]),new Ne(24,new te(5,98),new te(1,99)),new Ne(28,new te(7,45),new te(3,46)),new Ne(24,new te(15,19),new te(2,20)),new Ne(30,new te(3,15),new te(13,16))),new Tt(17,Int32Array.from([6,30,54,78]),new Ne(28,new te(1,107),new te(5,108)),new Ne(28,new te(10,46),new te(1,47)),new Ne(28,new te(1,22),new te(15,23)),new Ne(28,new te(2,14),new te(17,15))),new Tt(18,Int32Array.from([6,30,56,82]),new Ne(30,new te(5,120),new te(1,121)),new Ne(26,new te(9,43),new te(4,44)),new Ne(28,new te(17,22),new te(1,23)),new Ne(28,new te(2,14),new te(19,15))),new Tt(19,Int32Array.from([6,30,58,86]),new Ne(28,new te(3,113),new te(4,114)),new Ne(26,new te(3,44),new te(11,45)),new Ne(26,new te(17,21),new te(4,22)),new Ne(26,new te(9,13),new te(16,14))),new Tt(20,Int32Array.from([6,34,62,90]),new Ne(28,new te(3,107),new te(5,108)),new Ne(26,new te(3,41),new te(13,42)),new Ne(30,new te(15,24),new te(5,25)),new Ne(28,new te(15,15),new te(10,16))),new Tt(21,Int32Array.from([6,28,50,72,94]),new Ne(28,new te(4,116),new te(4,117)),new Ne(26,new te(17,42)),new Ne(28,new te(17,22),new te(6,23)),new Ne(30,new te(19,16),new te(6,17))),new Tt(22,Int32Array.from([6,26,50,74,98]),new Ne(28,new te(2,111),new te(7,112)),new Ne(28,new te(17,46)),new Ne(30,new te(7,24),new te(16,25)),new Ne(24,new te(34,13))),new Tt(23,Int32Array.from([6,30,54,78,102]),new Ne(30,new te(4,121),new te(5,122)),new Ne(28,new te(4,47),new te(14,48)),new Ne(30,new te(11,24),new te(14,25)),new Ne(30,new te(16,15),new te(14,16))),new Tt(24,Int32Array.from([6,28,54,80,106]),new Ne(30,new te(6,117),new te(4,118)),new Ne(28,new te(6,45),new te(14,46)),new Ne(30,new te(11,24),new te(16,25)),new Ne(30,new te(30,16),new te(2,17))),new Tt(25,Int32Array.from([6,32,58,84,110]),new Ne(26,new te(8,106),new te(4,107)),new Ne(28,new te(8,47),new te(13,48)),new Ne(30,new te(7,24),new te(22,25)),new Ne(30,new te(22,15),new te(13,16))),new Tt(26,Int32Array.from([6,30,58,86,114]),new Ne(28,new te(10,114),new te(2,115)),new Ne(28,new te(19,46),new te(4,47)),new Ne(28,new te(28,22),new te(6,23)),new Ne(30,new te(33,16),new te(4,17))),new Tt(27,Int32Array.from([6,34,62,90,118]),new Ne(30,new te(8,122),new te(4,123)),new Ne(28,new te(22,45),new te(3,46)),new Ne(30,new te(8,23),new te(26,24)),new Ne(30,new te(12,15),new te(28,16))),new Tt(28,Int32Array.from([6,26,50,74,98,122]),new Ne(30,new te(3,117),new te(10,118)),new Ne(28,new te(3,45),new te(23,46)),new Ne(30,new te(4,24),new te(31,25)),new Ne(30,new te(11,15),new te(31,16))),new Tt(29,Int32Array.from([6,30,54,78,102,126]),new Ne(30,new te(7,116),new te(7,117)),new Ne(28,new te(21,45),new te(7,46)),new Ne(30,new te(1,23),new te(37,24)),new Ne(30,new te(19,15),new te(26,16))),new Tt(30,Int32Array.from([6,26,52,78,104,130]),new Ne(30,new te(5,115),new te(10,116)),new Ne(28,new te(19,47),new te(10,48)),new Ne(30,new te(15,24),new te(25,25)),new Ne(30,new te(23,15),new te(25,16))),new Tt(31,Int32Array.from([6,30,56,82,108,134]),new Ne(30,new te(13,115),new te(3,116)),new Ne(28,new te(2,46),new te(29,47)),new Ne(30,new te(42,24),new te(1,25)),new Ne(30,new te(23,15),new te(28,16))),new Tt(32,Int32Array.from([6,34,60,86,112,138]),new Ne(30,new te(17,115)),new Ne(28,new te(10,46),new te(23,47)),new Ne(30,new te(10,24),new te(35,25)),new Ne(30,new te(19,15),new te(35,16))),new Tt(33,Int32Array.from([6,30,58,86,114,142]),new Ne(30,new te(17,115),new te(1,116)),new Ne(28,new te(14,46),new te(21,47)),new Ne(30,new te(29,24),new te(19,25)),new Ne(30,new te(11,15),new te(46,16))),new Tt(34,Int32Array.from([6,34,62,90,118,146]),new Ne(30,new te(13,115),new te(6,116)),new Ne(28,new te(14,46),new te(23,47)),new Ne(30,new te(44,24),new te(7,25)),new Ne(30,new te(59,16),new te(1,17))),new Tt(35,Int32Array.from([6,30,54,78,102,126,150]),new Ne(30,new te(12,121),new te(7,122)),new Ne(28,new te(12,47),new te(26,48)),new Ne(30,new te(39,24),new te(14,25)),new Ne(30,new te(22,15),new te(41,16))),new Tt(36,Int32Array.from([6,24,50,76,102,128,154]),new Ne(30,new te(6,121),new te(14,122)),new Ne(28,new te(6,47),new te(34,48)),new Ne(30,new te(46,24),new te(10,25)),new Ne(30,new te(2,15),new te(64,16))),new Tt(37,Int32Array.from([6,28,54,80,106,132,158]),new Ne(30,new te(17,122),new te(4,123)),new Ne(28,new te(29,46),new te(14,47)),new Ne(30,new te(49,24),new te(10,25)),new Ne(30,new te(24,15),new te(46,16))),new Tt(38,Int32Array.from([6,32,58,84,110,136,162]),new Ne(30,new te(4,122),new te(18,123)),new Ne(28,new te(13,46),new te(32,47)),new Ne(30,new te(48,24),new te(14,25)),new Ne(30,new te(42,15),new te(32,16))),new Tt(39,Int32Array.from([6,26,54,82,110,138,166]),new Ne(30,new te(20,117),new te(4,118)),new Ne(28,new te(40,47),new te(7,48)),new Ne(30,new te(43,24),new te(22,25)),new Ne(30,new te(10,15),new te(67,16))),new Tt(40,Int32Array.from([6,30,58,86,114,142,170]),new Ne(30,new te(19,118),new te(6,119)),new Ne(28,new te(18,47),new te(31,48)),new Ne(30,new te(34,24),new te(34,25)),new Ne(30,new te(20,15),new te(61,16)))];var gs;(function(U){U[U.DATA_MASK_000=0]="DATA_MASK_000",U[U.DATA_MASK_001=1]="DATA_MASK_001",U[U.DATA_MASK_010=2]="DATA_MASK_010",U[U.DATA_MASK_011=3]="DATA_MASK_011",U[U.DATA_MASK_100=4]="DATA_MASK_100",U[U.DATA_MASK_101=5]="DATA_MASK_101",U[U.DATA_MASK_110=6]="DATA_MASK_110",U[U.DATA_MASK_111=7]="DATA_MASK_111"})(gs||(gs={}));class Ii{constructor(u,h){this.value=u,this.isMasked=h}unmaskBitMatrix(u,h){for(let m=0;m<h;m++)for(let y=0;y<h;y++)this.isMasked(m,y)&&u.flip(y,m)}}Ii.values=new Map([[gs.DATA_MASK_000,new Ii(gs.DATA_MASK_000,(U,u)=>(U+u&1)===0)],[gs.DATA_MASK_001,new Ii(gs.DATA_MASK_001,(U,u)=>(U&1)===0)],[gs.DATA_MASK_010,new Ii(gs.DATA_MASK_010,(U,u)=>u%3===0)],[gs.DATA_MASK_011,new Ii(gs.DATA_MASK_011,(U,u)=>(U+u)%3===0)],[gs.DATA_MASK_100,new Ii(gs.DATA_MASK_100,(U,u)=>(Math.floor(U/2)+Math.floor(u/3)&1)===0)],[gs.DATA_MASK_101,new Ii(gs.DATA_MASK_101,(U,u)=>U*u%6===0)],[gs.DATA_MASK_110,new Ii(gs.DATA_MASK_110,(U,u)=>U*u%6<3)],[gs.DATA_MASK_111,new Ii(gs.DATA_MASK_111,(U,u)=>(U+u+U*u%3&1)===0)]]);class lG{constructor(u){const h=u.getHeight();if(h<21||(h&3)!==1)throw new O;this.bitMatrix=u}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let u=0;for(let v=0;v<6;v++)u=this.copyBit(v,8,u);u=this.copyBit(7,8,u),u=this.copyBit(8,8,u),u=this.copyBit(8,7,u);for(let v=5;v>=0;v--)u=this.copyBit(8,v,u);const h=this.bitMatrix.getHeight();let m=0;const y=h-7;for(let v=h-1;v>=y;v--)m=this.copyBit(8,v,m);for(let v=h-8;v<h;v++)m=this.copyBit(v,8,m);if(this.parsedFormatInfo=Xs.decodeFormatInformation(u,m),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new O}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const u=this.bitMatrix.getHeight(),h=Math.floor((u-17)/4);if(h<=6)return Tt.getVersionForNumber(h);let m=0;const y=u-11;for(let E=5;E>=0;E--)for(let T=u-9;T>=y;T--)m=this.copyBit(T,E,m);let v=Tt.decodeVersionInformation(m);if(v!==null&&v.getDimensionForVersion()===u)return this.parsedVersion=v,v;m=0;for(let E=5;E>=0;E--)for(let T=u-9;T>=y;T--)m=this.copyBit(E,T,m);if(v=Tt.decodeVersionInformation(m),v!==null&&v.getDimensionForVersion()===u)return this.parsedVersion=v,v;throw new O}copyBit(u,h,m){return(this.isMirror?this.bitMatrix.get(h,u):this.bitMatrix.get(u,h))?m<<1|1:m<<1}readCodewords(){const u=this.readFormatInformation(),h=this.readVersion(),m=Ii.values.get(u.getDataMask()),y=this.bitMatrix.getHeight();m.unmaskBitMatrix(this.bitMatrix,y);const v=h.buildFunctionPattern();let E=!0;const T=new Uint8Array(h.getTotalCodewords());let D=0,P=0,z=0;for(let H=y-1;H>0;H-=2){H===6&&H--;for(let K=0;K<y;K++){const re=E?y-1-K:K;for(let le=0;le<2;le++)v.get(H-le,re)||(z++,P<<=1,this.bitMatrix.get(H-le,re)&&(P|=1),z===8&&(T[D++]=P,z=0,P=0))}E=!E}if(D!==h.getTotalCodewords())throw new O;return T}remask(){if(this.parsedFormatInfo===null)return;const u=Ii.values[this.parsedFormatInfo.getDataMask()],h=this.bitMatrix.getHeight();u.unmaskBitMatrix(this.bitMatrix,h)}setMirror(u){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=u}mirror(){const u=this.bitMatrix;for(let h=0,m=u.getWidth();h<m;h++)for(let y=h+1,v=u.getHeight();y<v;y++)u.get(h,y)!==u.get(y,h)&&(u.flip(y,h),u.flip(h,y))}}class YC{constructor(u,h){this.numDataCodewords=u,this.codewords=h}static getDataBlocks(u,h,m){if(u.length!==h.getTotalCodewords())throw new f;const y=h.getECBlocksForLevel(m);let v=0;const E=y.getECBlocks();for(const le of E)v+=le.getCount();const T=new Array(v);let D=0;for(const le of E)for(let fe=0;fe<le.getCount();fe++){const Ce=le.getDataCodewords(),Re=y.getECCodewordsPerBlock()+Ce;T[D++]=new YC(Ce,new Uint8Array(Re))}const P=T[0].codewords.length;let z=T.length-1;for(;z>=0&&T[z].codewords.length!==P;)z--;z++;const H=P-y.getECCodewordsPerBlock();let K=0;for(let le=0;le<H;le++)for(let fe=0;fe<D;fe++)T[fe].codewords[le]=u[K++];for(let le=z;le<D;le++)T[le].codewords[H]=u[K++];const re=T[0].codewords.length;for(let le=H;le<re;le++)for(let fe=0;fe<D;fe++){const Ce=fe<z?le:le+1;T[fe].codewords[Ce]=u[K++]}return T}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var ki;(function(U){U[U.TERMINATOR=0]="TERMINATOR",U[U.NUMERIC=1]="NUMERIC",U[U.ALPHANUMERIC=2]="ALPHANUMERIC",U[U.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",U[U.BYTE=4]="BYTE",U[U.ECI=5]="ECI",U[U.KANJI=6]="KANJI",U[U.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",U[U.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",U[U.HANZI=9]="HANZI"})(ki||(ki={}));class $t{constructor(u,h,m,y){this.value=u,this.stringValue=h,this.characterCountBitsForVersions=m,this.bits=y,$t.FOR_BITS.set(y,this),$t.FOR_VALUE.set(u,this)}static forBits(u){const h=$t.FOR_BITS.get(u);if(h===void 0)throw new f;return h}getCharacterCountBits(u){const h=u.getVersionNumber();let m;return h<=9?m=0:h<=26?m=1:m=2,this.characterCountBitsForVersions[m]}getValue(){return this.value}getBits(){return this.bits}equals(u){if(!(u instanceof $t))return!1;const h=u;return this.value===h.value}toString(){return this.stringValue}}$t.FOR_BITS=new Map,$t.FOR_VALUE=new Map,$t.TERMINATOR=new $t(ki.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),$t.NUMERIC=new $t(ki.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),$t.ALPHANUMERIC=new $t(ki.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),$t.STRUCTURED_APPEND=new $t(ki.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),$t.BYTE=new $t(ki.BYTE,"BYTE",Int32Array.from([8,16,16]),4),$t.ECI=new $t(ki.ECI,"ECI",Int32Array.from([0,0,0]),7),$t.KANJI=new $t(ki.KANJI,"KANJI",Int32Array.from([8,10,12]),8),$t.FNC1_FIRST_POSITION=new $t(ki.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),$t.FNC1_SECOND_POSITION=new $t(ki.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),$t.HANZI=new $t(ki.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class hr{static decode(u,h,m,y){const v=new KC(u);let E=new W;const T=new Array;let D=-1,P=-1;try{let z=null,H=!1,K;do{if(v.available()<4)K=$t.TERMINATOR;else{const re=v.readBits(4);K=$t.forBits(re)}switch(K){case $t.TERMINATOR:break;case $t.FNC1_FIRST_POSITION:case $t.FNC1_SECOND_POSITION:H=!0;break;case $t.STRUCTURED_APPEND:if(v.available()<16)throw new O;D=v.readBits(8),P=v.readBits(8);break;case $t.ECI:const re=hr.parseECIValue(v);if(z=M.getCharacterSetECIByValue(re),z===null)throw new O;break;case $t.HANZI:const le=v.readBits(4),fe=v.readBits(K.getCharacterCountBits(h));le===hr.GB2312_SUBSET&&hr.decodeHanziSegment(v,E,fe);break;default:const Ce=v.readBits(K.getCharacterCountBits(h));switch(K){case $t.NUMERIC:hr.decodeNumericSegment(v,E,Ce);break;case $t.ALPHANUMERIC:hr.decodeAlphanumericSegment(v,E,Ce,H);break;case $t.BYTE:hr.decodeByteSegment(v,E,Ce,z,T,y);break;case $t.KANJI:hr.decodeKanjiSegment(v,E,Ce);break;default:throw new O}break}}while(K!==$t.TERMINATOR)}catch{throw new O}return new Oe(u,E.toString(),T.length===0?null:T,m===null?null:m.toString(),D,P)}static decodeHanziSegment(u,h,m){if(m*13>u.available())throw new O;const y=new Uint8Array(2*m);let v=0;for(;m>0;){const E=u.readBits(13);let T=E/96<<8&4294967295|E%96;T<959?T+=41377:T+=42657,y[v]=T>>8&255,y[v+1]=T&255,v+=2,m--}try{h.append(V.decode(y,B.GB2312))}catch(E){throw new O(E)}}static decodeKanjiSegment(u,h,m){if(m*13>u.available())throw new O;const y=new Uint8Array(2*m);let v=0;for(;m>0;){const E=u.readBits(13);let T=E/192<<8&4294967295|E%192;T<7936?T+=33088:T+=49472,y[v]=T>>8,y[v+1]=T,v+=2,m--}try{h.append(V.decode(y,B.SHIFT_JIS))}catch(E){throw new O(E)}}static decodeByteSegment(u,h,m,y,v,E){if(8*m>u.available())throw new O;const T=new Uint8Array(m);for(let P=0;P<m;P++)T[P]=u.readBits(8);let D;y===null?D=B.guessEncoding(T,E):D=y.getName();try{h.append(V.decode(T,D))}catch(P){throw new O(P)}v.push(T)}static toAlphaNumericChar(u){if(u>=hr.ALPHANUMERIC_CHARS.length)throw new O;return hr.ALPHANUMERIC_CHARS[u]}static decodeAlphanumericSegment(u,h,m,y){const v=h.length();for(;m>1;){if(u.available()<11)throw new O;const E=u.readBits(11);h.append(hr.toAlphaNumericChar(Math.floor(E/45))),h.append(hr.toAlphaNumericChar(E%45)),m-=2}if(m===1){if(u.available()<6)throw new O;h.append(hr.toAlphaNumericChar(u.readBits(6)))}if(y)for(let E=v;E<h.length();E++)h.charAt(E)==="%"&&(E<h.length()-1&&h.charAt(E+1)==="%"?h.deleteCharAt(E+1):h.setCharAt(E,""))}static decodeNumericSegment(u,h,m){for(;m>=3;){if(u.available()<10)throw new O;const y=u.readBits(10);if(y>=1e3)throw new O;h.append(hr.toAlphaNumericChar(Math.floor(y/100))),h.append(hr.toAlphaNumericChar(Math.floor(y/10)%10)),h.append(hr.toAlphaNumericChar(y%10)),m-=3}if(m===2){if(u.available()<7)throw new O;const y=u.readBits(7);if(y>=100)throw new O;h.append(hr.toAlphaNumericChar(Math.floor(y/10))),h.append(hr.toAlphaNumericChar(y%10))}else if(m===1){if(u.available()<4)throw new O;const y=u.readBits(4);if(y>=10)throw new O;h.append(hr.toAlphaNumericChar(y))}}static parseECIValue(u){const h=u.readBits(8);if(!(h&128))return h&127;if((h&192)===128){const m=u.readBits(8);return(h&63)<<8&4294967295|m}if((h&224)===192){const m=u.readBits(16);return(h&31)<<16&4294967295|m}throw new O}}hr.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",hr.GB2312_SUBSET=1;class g${constructor(u){this.mirrored=u}isMirrored(){return this.mirrored}applyMirroredCorrection(u){if(!this.mirrored||u===null||u.length<3)return;const h=u[0];u[0]=u[2],u[2]=h}}class cG{constructor(){this.rsDecoder=new Fe(pe.QR_CODE_FIELD_256)}decodeBooleanArray(u,h){return this.decodeBitMatrix(q.parseFromBooleanArray(u),h)}decodeBitMatrix(u,h){const m=new lG(u);let y=null;try{return this.decodeBitMatrixParser(m,h)}catch(v){y=v}try{m.remask(),m.setMirror(!0),m.readVersion(),m.readFormatInformation(),m.mirror();const v=this.decodeBitMatrixParser(m,h);return v.setOther(new g$(!0)),v}catch(v){throw y!==null?y:v}}decodeBitMatrixParser(u,h){const m=u.readVersion(),y=u.readFormatInformation().getErrorCorrectionLevel(),v=u.readCodewords(),E=YC.getDataBlocks(v,m,y);let T=0;for(const z of E)T+=z.getNumDataCodewords();const D=new Uint8Array(T);let P=0;for(const z of E){const H=z.getCodewords(),K=z.getNumDataCodewords();this.correctErrors(H,K);for(let re=0;re<K;re++)D[P++]=H[re]}return hr.decode(D,m,y,h)}correctErrors(u,h){const m=new Int32Array(u);try{this.rsDecoder.decode(m,u.length-h)}catch{throw new g}for(let y=0;y<h;y++)u[y]=m[y]}}class ZC extends ue{constructor(u,h,m){super(u,h),this.estimatedModuleSize=m}aboutEquals(u,h,m){if(Math.abs(h-this.getY())<=u&&Math.abs(m-this.getX())<=u){const y=Math.abs(u-this.estimatedModuleSize);return y<=1||y<=this.estimatedModuleSize}return!1}combineEstimate(u,h,m){const y=(this.getX()+h)/2,v=(this.getY()+u)/2,E=(this.estimatedModuleSize+m)/2;return new ZC(y,v,E)}}class px{constructor(u,h,m,y,v,E,T){this.image=u,this.startX=h,this.startY=m,this.width=y,this.height=v,this.moduleSize=E,this.resultPointCallback=T,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const u=this.startX,h=this.height,m=this.width,y=u+m,v=this.startY+h/2,E=new Int32Array(3),T=this.image;for(let D=0;D<h;D++){const P=v+(D&1?-Math.floor((D+1)/2):Math.floor((D+1)/2));E[0]=0,E[1]=0,E[2]=0;let z=u;for(;z<y&&!T.get(z,P);)z++;let H=0;for(;z<y;){if(T.get(z,P))if(H===1)E[1]++;else if(H===2){if(this.foundPatternCross(E)){const K=this.handlePossibleCenter(E,P,z);if(K!==null)return K}E[0]=E[2],E[1]=1,E[2]=0,H=1}else E[++H]++;else H===1&&H++,E[H]++;z++}if(this.foundPatternCross(E)){const K=this.handlePossibleCenter(E,P,y);if(K!==null)return K}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new j}static centerFromEnd(u,h){return h-u[2]-u[1]/2}foundPatternCross(u){const h=this.moduleSize,m=h/2;for(let y=0;y<3;y++)if(Math.abs(h-u[y])>=m)return!1;return!0}crossCheckVertical(u,h,m,y){const v=this.image,E=v.getHeight(),T=this.crossCheckStateCount;T[0]=0,T[1]=0,T[2]=0;let D=u;for(;D>=0&&v.get(h,D)&&T[1]<=m;)T[1]++,D--;if(D<0||T[1]>m)return NaN;for(;D>=0&&!v.get(h,D)&&T[0]<=m;)T[0]++,D--;if(T[0]>m)return NaN;for(D=u+1;D<E&&v.get(h,D)&&T[1]<=m;)T[1]++,D++;if(D===E||T[1]>m)return NaN;for(;D<E&&!v.get(h,D)&&T[2]<=m;)T[2]++,D++;if(T[2]>m)return NaN;const P=T[0]+T[1]+T[2];return 5*Math.abs(P-y)>=2*y?NaN:this.foundPatternCross(T)?px.centerFromEnd(T,D):NaN}handlePossibleCenter(u,h,m){const y=u[0]+u[1]+u[2],v=px.centerFromEnd(u,m),E=this.crossCheckVertical(h,v,2*u[1],y);if(!isNaN(E)){const T=(u[0]+u[1]+u[2])/3;for(const P of this.possibleCenters)if(P.aboutEquals(T,E,v))return P.combineEstimate(E,v,T);const D=new ZC(v,E,T);this.possibleCenters.push(D),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(D)}return null}}class QC extends ue{constructor(u,h,m,y){super(u,h),this.estimatedModuleSize=m,this.count=y,y===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(u,h,m){if(Math.abs(h-this.getY())<=u&&Math.abs(m-this.getX())<=u){const y=Math.abs(u-this.estimatedModuleSize);return y<=1||y<=this.estimatedModuleSize}return!1}combineEstimate(u,h,m){const y=this.count+1,v=(this.count*this.getX()+h)/y,E=(this.count*this.getY()+u)/y,T=(this.count*this.estimatedModuleSize+m)/y;return new QC(v,E,T,y)}}class uG{constructor(u){this.bottomLeft=u[0],this.topLeft=u[1],this.topRight=u[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class xs{constructor(u,h){this.image=u,this.resultPointCallback=h,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=h}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(u){const h=u!=null&&u.get($.TRY_HARDER)!==void 0,m=u!=null&&u.get($.PURE_BARCODE)!==void 0,y=this.image,v=y.getHeight(),E=y.getWidth();let T=Math.floor(3*v/(4*xs.MAX_MODULES));(T<xs.MIN_SKIP||h)&&(T=xs.MIN_SKIP);let D=!1;const P=new Int32Array(5);for(let H=T-1;H<v&&!D;H+=T){P[0]=0,P[1]=0,P[2]=0,P[3]=0,P[4]=0;let K=0;for(let re=0;re<E;re++)if(y.get(re,H))(K&1)===1&&K++,P[K]++;else if(K&1)P[K]++;else if(K===4)if(xs.foundPatternCross(P)){if(this.handlePossibleCenter(P,H,re,m)===!0)if(T=2,this.hasSkipped===!0)D=this.haveMultiplyConfirmedCenters();else{const fe=this.findRowSkip();fe>P[2]&&(H+=fe-P[2]-T,re=E-1)}else{P[0]=P[2],P[1]=P[3],P[2]=P[4],P[3]=1,P[4]=0,K=3;continue}K=0,P[0]=0,P[1]=0,P[2]=0,P[3]=0,P[4]=0}else P[0]=P[2],P[1]=P[3],P[2]=P[4],P[3]=1,P[4]=0,K=3;else P[++K]++;xs.foundPatternCross(P)&&this.handlePossibleCenter(P,H,E,m)===!0&&(T=P[0],this.hasSkipped&&(D=this.haveMultiplyConfirmedCenters()))}const z=this.selectBestPatterns();return ue.orderBestPatterns(z),new uG(z)}static centerFromEnd(u,h){return h-u[4]-u[3]-u[2]/2}static foundPatternCross(u){let h=0;for(let v=0;v<5;v++){const E=u[v];if(E===0)return!1;h+=E}if(h<7)return!1;const m=h/7,y=m/2;return Math.abs(m-u[0])<y&&Math.abs(m-u[1])<y&&Math.abs(3*m-u[2])<3*y&&Math.abs(m-u[3])<y&&Math.abs(m-u[4])<y}getCrossCheckStateCount(){const u=this.crossCheckStateCount;return u[0]=0,u[1]=0,u[2]=0,u[3]=0,u[4]=0,u}crossCheckDiagonal(u,h,m,y){const v=this.getCrossCheckStateCount();let E=0;const T=this.image;for(;u>=E&&h>=E&&T.get(h-E,u-E);)v[2]++,E++;if(u<E||h<E)return!1;for(;u>=E&&h>=E&&!T.get(h-E,u-E)&&v[1]<=m;)v[1]++,E++;if(u<E||h<E||v[1]>m)return!1;for(;u>=E&&h>=E&&T.get(h-E,u-E)&&v[0]<=m;)v[0]++,E++;if(v[0]>m)return!1;const D=T.getHeight(),P=T.getWidth();for(E=1;u+E<D&&h+E<P&&T.get(h+E,u+E);)v[2]++,E++;if(u+E>=D||h+E>=P)return!1;for(;u+E<D&&h+E<P&&!T.get(h+E,u+E)&&v[3]<m;)v[3]++,E++;if(u+E>=D||h+E>=P||v[3]>=m)return!1;for(;u+E<D&&h+E<P&&T.get(h+E,u+E)&&v[4]<m;)v[4]++,E++;if(v[4]>=m)return!1;const z=v[0]+v[1]+v[2]+v[3]+v[4];return Math.abs(z-y)<2*y&&xs.foundPatternCross(v)}crossCheckVertical(u,h,m,y){const v=this.image,E=v.getHeight(),T=this.getCrossCheckStateCount();let D=u;for(;D>=0&&v.get(h,D);)T[2]++,D--;if(D<0)return NaN;for(;D>=0&&!v.get(h,D)&&T[1]<=m;)T[1]++,D--;if(D<0||T[1]>m)return NaN;for(;D>=0&&v.get(h,D)&&T[0]<=m;)T[0]++,D--;if(T[0]>m)return NaN;for(D=u+1;D<E&&v.get(h,D);)T[2]++,D++;if(D===E)return NaN;for(;D<E&&!v.get(h,D)&&T[3]<m;)T[3]++,D++;if(D===E||T[3]>=m)return NaN;for(;D<E&&v.get(h,D)&&T[4]<m;)T[4]++,D++;if(T[4]>=m)return NaN;const P=T[0]+T[1]+T[2]+T[3]+T[4];return 5*Math.abs(P-y)>=2*y?NaN:xs.foundPatternCross(T)?xs.centerFromEnd(T,D):NaN}crossCheckHorizontal(u,h,m,y){const v=this.image,E=v.getWidth(),T=this.getCrossCheckStateCount();let D=u;for(;D>=0&&v.get(D,h);)T[2]++,D--;if(D<0)return NaN;for(;D>=0&&!v.get(D,h)&&T[1]<=m;)T[1]++,D--;if(D<0||T[1]>m)return NaN;for(;D>=0&&v.get(D,h)&&T[0]<=m;)T[0]++,D--;if(T[0]>m)return NaN;for(D=u+1;D<E&&v.get(D,h);)T[2]++,D++;if(D===E)return NaN;for(;D<E&&!v.get(D,h)&&T[3]<m;)T[3]++,D++;if(D===E||T[3]>=m)return NaN;for(;D<E&&v.get(D,h)&&T[4]<m;)T[4]++,D++;if(T[4]>=m)return NaN;const P=T[0]+T[1]+T[2]+T[3]+T[4];return 5*Math.abs(P-y)>=y?NaN:xs.foundPatternCross(T)?xs.centerFromEnd(T,D):NaN}handlePossibleCenter(u,h,m,y){const v=u[0]+u[1]+u[2]+u[3]+u[4];let E=xs.centerFromEnd(u,m),T=this.crossCheckVertical(h,Math.floor(E),u[2],v);if(!isNaN(T)&&(E=this.crossCheckHorizontal(Math.floor(E),Math.floor(T),u[2],v),!isNaN(E)&&(!y||this.crossCheckDiagonal(Math.floor(T),Math.floor(E),u[2],v)))){const D=v/7;let P=!1;const z=this.possibleCenters;for(let H=0,K=z.length;H<K;H++){const re=z[H];if(re.aboutEquals(D,T,E)){z[H]=re.combineEstimate(T,E,D),P=!0;break}}if(!P){const H=new QC(E,T,D);z.push(H),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(H)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let h=null;for(const m of this.possibleCenters)if(m.getCount()>=xs.CENTER_QUORUM)if(h==null)h=m;else return this.hasSkipped=!0,Math.floor((Math.abs(h.getX()-m.getX())-Math.abs(h.getY()-m.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let u=0,h=0;const m=this.possibleCenters.length;for(const E of this.possibleCenters)E.getCount()>=xs.CENTER_QUORUM&&(u++,h+=E.getEstimatedModuleSize());if(u<3)return!1;const y=h/m;let v=0;for(const E of this.possibleCenters)v+=Math.abs(E.getEstimatedModuleSize()-y);return v<=.05*h}selectBestPatterns(){const u=this.possibleCenters.length;if(u<3)throw new j;const h=this.possibleCenters;let m;if(u>3){let y=0,v=0;for(const D of this.possibleCenters){const P=D.getEstimatedModuleSize();y+=P,v+=P*P}m=y/u;let E=Math.sqrt(v/u-m*m);h.sort((D,P)=>{const z=Math.abs(P.getEstimatedModuleSize()-m),H=Math.abs(D.getEstimatedModuleSize()-m);return z<H?-1:z>H?1:0});const T=Math.max(.2*m,E);for(let D=0;D<h.length&&h.length>3;D++){const P=h[D];Math.abs(P.getEstimatedModuleSize()-m)>T&&(h.splice(D,1),D--)}}if(h.length>3){let y=0;for(const v of h)y+=v.getEstimatedModuleSize();m=y/h.length,h.sort((v,E)=>{if(E.getCount()===v.getCount()){const T=Math.abs(E.getEstimatedModuleSize()-m),D=Math.abs(v.getEstimatedModuleSize()-m);return T<D?1:T>D?-1:0}else return E.getCount()-v.getCount()}),h.splice(3)}return[h[0],h[1],h[2]]}}xs.CENTER_QUORUM=2,xs.MIN_SKIP=3,xs.MAX_MODULES=57;class Zp{constructor(u){this.image=u}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(u){this.resultPointCallback=u==null?null:u.get($.NEED_RESULT_POINT_CALLBACK);const m=new xs(this.image,this.resultPointCallback).find(u);return this.processFinderPatternInfo(m)}processFinderPatternInfo(u){const h=u.getTopLeft(),m=u.getTopRight(),y=u.getBottomLeft(),v=this.calculateModuleSize(h,m,y);if(v<1)throw new j("No pattern found in proccess finder.");const E=Zp.computeDimension(h,m,y,v),T=Tt.getProvisionalVersionForDimension(E),D=T.getDimensionForVersion()-7;let P=null;if(T.getAlignmentPatternCenters().length>0){const re=m.getX()-h.getX()+y.getX(),le=m.getY()-h.getY()+y.getY(),fe=1-3/D,Ce=Math.floor(h.getX()+fe*(re-h.getX())),Re=Math.floor(h.getY()+fe*(le-h.getY()));for(let Ze=4;Ze<=16;Ze<<=1)try{P=this.findAlignmentInRegion(v,Ce,Re,Ze);break}catch(Je){if(!(Je instanceof j))throw Je}}const z=Zp.createTransform(h,m,y,P,E),H=Zp.sampleGrid(this.image,z,E);let K;return P===null?K=[y,h,m]:K=[y,h,m,P],new He(H,K)}static createTransform(u,h,m,y,v){const E=v-3.5;let T,D,P,z;return y!==null?(T=y.getX(),D=y.getY(),P=E-3,z=P):(T=h.getX()-u.getX()+m.getX(),D=h.getY()-u.getY()+m.getY(),P=E,z=E),Xt.quadrilateralToQuadrilateral(3.5,3.5,E,3.5,P,z,3.5,E,u.getX(),u.getY(),h.getX(),h.getY(),T,D,m.getX(),m.getY())}static sampleGrid(u,h,m){return hn.getInstance().sampleGridWithTransform(u,m,m,h)}static computeDimension(u,h,m,y){const v=je.round(ue.distance(u,h)/y),E=je.round(ue.distance(u,m)/y);let T=Math.floor((v+E)/2)+7;switch(T&3){case 0:T++;break;case 2:T--;break;case 3:throw new j("Dimensions could be not found.")}return T}calculateModuleSize(u,h,m){return(this.calculateModuleSizeOneWay(u,h)+this.calculateModuleSizeOneWay(u,m))/2}calculateModuleSizeOneWay(u,h){const m=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(u.getX()),Math.floor(u.getY()),Math.floor(h.getX()),Math.floor(h.getY())),y=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(h.getX()),Math.floor(h.getY()),Math.floor(u.getX()),Math.floor(u.getY()));return isNaN(m)?y/7:isNaN(y)?m/7:(m+y)/14}sizeOfBlackWhiteBlackRunBothWays(u,h,m,y){let v=this.sizeOfBlackWhiteBlackRun(u,h,m,y),E=1,T=u-(m-u);T<0?(E=u/(u-T),T=0):T>=this.image.getWidth()&&(E=(this.image.getWidth()-1-u)/(T-u),T=this.image.getWidth()-1);let D=Math.floor(h-(y-h)*E);return E=1,D<0?(E=h/(h-D),D=0):D>=this.image.getHeight()&&(E=(this.image.getHeight()-1-h)/(D-h),D=this.image.getHeight()-1),T=Math.floor(u+(T-u)*E),v+=this.sizeOfBlackWhiteBlackRun(u,h,T,D),v-1}sizeOfBlackWhiteBlackRun(u,h,m,y){const v=Math.abs(y-h)>Math.abs(m-u);if(v){let re=u;u=h,h=re,re=m,m=y,y=re}const E=Math.abs(m-u),T=Math.abs(y-h);let D=-E/2;const P=u<m?1:-1,z=h<y?1:-1;let H=0;const K=m+P;for(let re=u,le=h;re!==K;re+=P){const fe=v?le:re,Ce=v?re:le;if(H===1===this.image.get(fe,Ce)){if(H===2)return je.distance(re,le,u,h);H++}if(D+=T,D>0){if(le===y)break;le+=z,D-=E}}return H===2?je.distance(m+P,y,u,h):NaN}findAlignmentInRegion(u,h,m,y){const v=Math.floor(y*u),E=Math.max(0,h-v),T=Math.min(this.image.getWidth()-1,h+v);if(T-E<u*3)throw new j("Alignment top exceeds estimated module size.");const D=Math.max(0,m-v),P=Math.min(this.image.getHeight()-1,m+v);if(P-D<u*3)throw new j("Alignment bottom exceeds estimated module size.");return new px(this.image,E,D,T-E,P-D,u,this.resultPointCallback).find()}}class Nc{constructor(){this.decoder=new cG}getDecoder(){return this.decoder}decode(u,h){let m,y;if(h!=null&&h.get($.PURE_BARCODE)!==void 0){const D=Nc.extractPureBits(u.getBlackMatrix());m=this.decoder.decodeBitMatrix(D,h),y=Nc.NO_POINTS}else{const D=new Zp(u.getBlackMatrix()).detect(h);m=this.decoder.decodeBitMatrix(D.getBits(),h),y=D.getPoints()}m.getOther()instanceof g$&&m.getOther().applyMirroredCorrection(y);const v=new ge(m.getText(),m.getRawBytes(),void 0,y,he.QR_CODE,void 0),E=m.getByteSegments();E!==null&&v.putMetadata(ze.BYTE_SEGMENTS,E);const T=m.getECLevel();return T!==null&&v.putMetadata(ze.ERROR_CORRECTION_LEVEL,T),m.hasStructuredAppend()&&(v.putMetadata(ze.STRUCTURED_APPEND_SEQUENCE,m.getStructuredAppendSequenceNumber()),v.putMetadata(ze.STRUCTURED_APPEND_PARITY,m.getStructuredAppendParity())),v}reset(){}static extractPureBits(u){const h=u.getTopLeftOnBit(),m=u.getBottomRightOnBit();if(h===null||m===null)throw new j;const y=this.moduleSize(h,u);let v=h[1],E=m[1],T=h[0],D=m[0];if(T>=D||v>=E)throw new j;if(E-v!==D-T&&(D=T+(E-v),D>=u.getWidth()))throw new j;const P=Math.round((D-T+1)/y),z=Math.round((E-v+1)/y);if(P<=0||z<=0)throw new j;if(z!==P)throw new j;const H=Math.floor(y/2);v+=H,T+=H;const K=T+Math.floor((P-1)*y)-D;if(K>0){if(K>H)throw new j;T-=K}const re=v+Math.floor((z-1)*y)-E;if(re>0){if(re>H)throw new j;v-=re}const le=new q(P,z);for(let fe=0;fe<z;fe++){const Ce=v+Math.floor(fe*y);for(let Re=0;Re<P;Re++)u.get(T+Math.floor(Re*y),Ce)&&le.set(Re,fe)}return le}static moduleSize(u,h){const m=h.getHeight(),y=h.getWidth();let v=u[0],E=u[1],T=!0,D=0;for(;v<y&&E<m;){if(T!==h.get(v,E)){if(++D===5)break;T=!T}v++,E++}if(v===y||E===m)throw new j;return(v-u[0])/7}}Nc.NO_POINTS=new Array;class Mt{PDF417Common(){}static getBitCountSum(u){return je.sum(u)}static toIntArray(u){if(u==null||!u.length)return Mt.EMPTY_INT_ARRAY;const h=new Int32Array(u.length);let m=0;for(const y of u)h[m++]=y;return h}static getCodeword(u){const h=N.binarySearch(Mt.SYMBOL_TABLE,u&262143);return h<0?-1:(Mt.CODEWORD_TABLE[h]-1)%Mt.NUMBER_OF_CODEWORDS}}Mt.NUMBER_OF_CODEWORDS=929,Mt.MAX_CODEWORDS_IN_BARCODE=Mt.NUMBER_OF_CODEWORDS-1,Mt.MIN_ROWS_IN_BARCODE=3,Mt.MAX_ROWS_IN_BARCODE=90,Mt.MODULES_IN_CODEWORD=17,Mt.MODULES_IN_STOP_PATTERN=18,Mt.BARS_IN_MODULE=8,Mt.EMPTY_INT_ARRAY=new Int32Array([]),Mt.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),Mt.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class dG{constructor(u,h){this.bits=u,this.points=h}getBits(){return this.bits}getPoints(){return this.points}}class Kt{static detectMultiple(u,h,m){let y=u.getBlackMatrix(),v=Kt.detect(m,y);return v.length||(y=y.clone(),y.rotate180(),v=Kt.detect(m,y)),new dG(y,v)}static detect(u,h){const m=new Array;let y=0,v=0,E=!1;for(;y<h.getHeight();){const T=Kt.findVertices(h,y,v);if(T[0]==null&&T[3]==null){if(!E)break;E=!1,v=0;for(const D of m)D[1]!=null&&(y=Math.trunc(Math.max(y,D[1].getY()))),D[3]!=null&&(y=Math.max(y,Math.trunc(D[3].getY())));y+=Kt.ROW_STEP;continue}if(E=!0,m.push(T),!u)break;T[2]!=null?(v=Math.trunc(T[2].getX()),y=Math.trunc(T[2].getY())):(v=Math.trunc(T[4].getX()),y=Math.trunc(T[4].getY()))}return m}static findVertices(u,h,m){const y=u.getHeight(),v=u.getWidth(),E=new Array(8);return Kt.copyToResult(E,Kt.findRowsWithPattern(u,y,v,h,m,Kt.START_PATTERN),Kt.INDEXES_START_PATTERN),E[4]!=null&&(m=Math.trunc(E[4].getX()),h=Math.trunc(E[4].getY())),Kt.copyToResult(E,Kt.findRowsWithPattern(u,y,v,h,m,Kt.STOP_PATTERN),Kt.INDEXES_STOP_PATTERN),E}static copyToResult(u,h,m){for(let y=0;y<m.length;y++)u[m[y]]=h[y]}static findRowsWithPattern(u,h,m,y,v,E){const T=new Array(4);let D=!1;const P=new Int32Array(E.length);for(;y<h;y+=Kt.ROW_STEP){let H=Kt.findGuardPattern(u,v,y,m,!1,E,P);if(H!=null){for(;y>0;){const K=Kt.findGuardPattern(u,v,--y,m,!1,E,P);if(K!=null)H=K;else{y++;break}}T[0]=new ue(H[0],y),T[1]=new ue(H[1],y),D=!0;break}}let z=y+1;if(D){let H=0,K=Int32Array.from([Math.trunc(T[0].getX()),Math.trunc(T[1].getX())]);for(;z<h;z++){const re=Kt.findGuardPattern(u,K[0],z,m,!1,E,P);if(re!=null&&Math.abs(K[0]-re[0])<Kt.MAX_PATTERN_DRIFT&&Math.abs(K[1]-re[1])<Kt.MAX_PATTERN_DRIFT)K=re,H=0;else{if(H>Kt.SKIPPED_ROW_COUNT_MAX)break;H++}}z-=H+1,T[2]=new ue(K[0],z),T[3]=new ue(K[1],z)}return z-y<Kt.BARCODE_MIN_HEIGHT&&N.fill(T,null),T}static findGuardPattern(u,h,m,y,v,E,T){N.fillWithin(T,0,T.length,0);let D=h,P=0;for(;u.get(D,m)&&D>0&&P++<Kt.MAX_PIXEL_DRIFT;)D--;let z=D,H=0,K=E.length;for(let re=v;z<y;z++)if(u.get(z,m)!==re)T[H]++;else{if(H===K-1){if(Kt.patternMatchVariance(T,E,Kt.MAX_INDIVIDUAL_VARIANCE)<Kt.MAX_AVG_VARIANCE)return new Int32Array([D,z]);D+=T[0]+T[1],b.arraycopy(T,2,T,0,H-1),T[H-1]=0,T[H]=0,H--}else H++;T[H]=1,re=!re}return H===K-1&&Kt.patternMatchVariance(T,E,Kt.MAX_INDIVIDUAL_VARIANCE)<Kt.MAX_AVG_VARIANCE?new Int32Array([D,z-1]):null}static patternMatchVariance(u,h,m){let y=u.length,v=0,E=0;for(let P=0;P<y;P++)v+=u[P],E+=h[P];if(v<E)return 1/0;let T=v/E;m*=T;let D=0;for(let P=0;P<y;P++){let z=u[P],H=h[P]*T,K=z>H?z-H:H-z;if(K>m)return 1/0;D+=K}return D/v}}Kt.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),Kt.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),Kt.MAX_AVG_VARIANCE=.42,Kt.MAX_INDIVIDUAL_VARIANCE=.8,Kt.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),Kt.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),Kt.MAX_PIXEL_DRIFT=3,Kt.MAX_PATTERN_DRIFT=5,Kt.SKIPPED_ROW_COUNT_MAX=25,Kt.ROW_STEP=5,Kt.BARCODE_MIN_HEIGHT=10;class Ds{constructor(u,h){if(h.length===0)throw new f;this.field=u;let m=h.length;if(m>1&&h[0]===0){let y=1;for(;y<m&&h[y]===0;)y++;y===m?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(m-y),b.arraycopy(h,y,this.coefficients,0,this.coefficients.length))}else this.coefficients=h}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(u){return this.coefficients[this.coefficients.length-1-u]}evaluateAt(u){if(u===0)return this.getCoefficient(0);if(u===1){let y=0;for(let v of this.coefficients)y=this.field.add(y,v);return y}let h=this.coefficients[0],m=this.coefficients.length;for(let y=1;y<m;y++)h=this.field.add(this.field.multiply(u,h),this.coefficients[y]);return h}add(u){if(!this.field.equals(u.field))throw new f("ModulusPolys do not have same ModulusGF field");if(this.isZero())return u;if(u.isZero())return this;let h=this.coefficients,m=u.coefficients;if(h.length>m.length){let E=h;h=m,m=E}let y=new Int32Array(m.length),v=m.length-h.length;b.arraycopy(m,0,y,0,v);for(let E=v;E<m.length;E++)y[E]=this.field.add(h[E-v],m[E]);return new Ds(this.field,y)}subtract(u){if(!this.field.equals(u.field))throw new f("ModulusPolys do not have same ModulusGF field");return u.isZero()?this:this.add(u.negative())}multiply(u){return u instanceof Ds?this.multiplyOther(u):this.multiplyScalar(u)}multiplyOther(u){if(!this.field.equals(u.field))throw new f("ModulusPolys do not have same ModulusGF field");if(this.isZero()||u.isZero())return new Ds(this.field,new Int32Array([0]));let h=this.coefficients,m=h.length,y=u.coefficients,v=y.length,E=new Int32Array(m+v-1);for(let T=0;T<m;T++){let D=h[T];for(let P=0;P<v;P++)E[T+P]=this.field.add(E[T+P],this.field.multiply(D,y[P]))}return new Ds(this.field,E)}negative(){let u=this.coefficients.length,h=new Int32Array(u);for(let m=0;m<u;m++)h[m]=this.field.subtract(0,this.coefficients[m]);return new Ds(this.field,h)}multiplyScalar(u){if(u===0)return new Ds(this.field,new Int32Array([0]));if(u===1)return this;let h=this.coefficients.length,m=new Int32Array(h);for(let y=0;y<h;y++)m[y]=this.field.multiply(this.coefficients[y],u);return new Ds(this.field,m)}multiplyByMonomial(u,h){if(u<0)throw new f;if(h===0)return new Ds(this.field,new Int32Array([0]));let m=this.coefficients.length,y=new Int32Array(m+u);for(let v=0;v<m;v++)y[v]=this.field.multiply(this.coefficients[v],h);return new Ds(this.field,y)}toString(){let u=new W;for(let h=this.getDegree();h>=0;h--){let m=this.getCoefficient(h);m!==0&&(m<0?(u.append(" - "),m=-m):u.length()>0&&u.append(" + "),(h===0||m!==1)&&u.append(m),h!==0&&(h===1?u.append("x"):(u.append("x^"),u.append(h))))}return u.toString()}}class fG{add(u,h){return(u+h)%this.modulus}subtract(u,h){return(this.modulus+u-h)%this.modulus}exp(u){return this.expTable[u]}log(u){if(u===0)throw new f;return this.logTable[u]}inverse(u){if(u===0)throw new ke;return this.expTable[this.modulus-this.logTable[u]-1]}multiply(u,h){return u===0||h===0?0:this.expTable[(this.logTable[u]+this.logTable[h])%(this.modulus-1)]}getSize(){return this.modulus}equals(u){return u===this}}class JC extends fG{constructor(u,h){super(),this.modulus=u,this.expTable=new Int32Array(u),this.logTable=new Int32Array(u);let m=1;for(let y=0;y<u;y++)this.expTable[y]=m,m=m*h%u;for(let y=0;y<u-1;y++)this.logTable[this.expTable[y]]=y;this.zero=new Ds(this,new Int32Array([0])),this.one=new Ds(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(u,h){if(u<0)throw new f;if(h===0)return this.zero;let m=new Int32Array(u+1);return m[0]=h,new Ds(this,m)}}JC.PDF417_GF=new JC(Mt.NUMBER_OF_CODEWORDS,3);class x${constructor(){this.field=JC.PDF417_GF}decode(u,h,m){let y=new Ds(this.field,u),v=new Int32Array(h),E=!1;for(let le=h;le>0;le--){let fe=y.evaluateAt(this.field.exp(le));v[h-le]=fe,fe!==0&&(E=!0)}if(!E)return 0;let T=this.field.getOne();if(m!=null)for(const le of m){let fe=this.field.exp(u.length-1-le),Ce=new Ds(this.field,new Int32Array([this.field.subtract(0,fe),1]));T=T.multiply(Ce)}let D=new Ds(this.field,v),P=this.runEuclideanAlgorithm(this.field.buildMonomial(h,1),D,h),z=P[0],H=P[1],K=this.findErrorLocations(z),re=this.findErrorMagnitudes(H,z,K);for(let le=0;le<K.length;le++){let fe=u.length-1-this.field.log(K[le]);if(fe<0)throw g.getChecksumInstance();u[fe]=this.field.subtract(u[fe],re[le])}return K.length}runEuclideanAlgorithm(u,h,m){if(u.getDegree()<h.getDegree()){let K=u;u=h,h=K}let y=u,v=h,E=this.field.getZero(),T=this.field.getOne();for(;v.getDegree()>=Math.round(m/2);){let K=y,re=E;if(y=v,E=T,y.isZero())throw g.getChecksumInstance();v=K;let le=this.field.getZero(),fe=y.getCoefficient(y.getDegree()),Ce=this.field.inverse(fe);for(;v.getDegree()>=y.getDegree()&&!v.isZero();){let Re=v.getDegree()-y.getDegree(),Ze=this.field.multiply(v.getCoefficient(v.getDegree()),Ce);le=le.add(this.field.buildMonomial(Re,Ze)),v=v.subtract(y.multiplyByMonomial(Re,Ze))}T=le.multiply(E).subtract(re).negative()}let D=T.getCoefficient(0);if(D===0)throw g.getChecksumInstance();let P=this.field.inverse(D),z=T.multiply(P),H=v.multiply(P);return[z,H]}findErrorLocations(u){let h=u.getDegree(),m=new Int32Array(h),y=0;for(let v=1;v<this.field.getSize()&&y<h;v++)u.evaluateAt(v)===0&&(m[y]=this.field.inverse(v),y++);if(y!==h)throw g.getChecksumInstance();return m}findErrorMagnitudes(u,h,m){let y=h.getDegree(),v=new Int32Array(y);for(let P=1;P<=y;P++)v[y-P]=this.field.multiply(P,h.getCoefficient(P));let E=new Ds(this.field,v),T=m.length,D=new Int32Array(T);for(let P=0;P<T;P++){let z=this.field.inverse(m[P]),H=this.field.subtract(0,u.evaluateAt(z)),K=this.field.inverse(E.evaluateAt(z));D[P]=this.field.multiply(H,K)}return D}}class Hu{constructor(u,h,m,y,v){u instanceof Hu?this.constructor_2(u):this.constructor_1(u,h,m,y,v)}constructor_1(u,h,m,y,v){const E=h==null||m==null,T=y==null||v==null;if(E&&T)throw new j;E?(h=new ue(0,y.getY()),m=new ue(0,v.getY())):T&&(y=new ue(u.getWidth()-1,h.getY()),v=new ue(u.getWidth()-1,m.getY())),this.image=u,this.topLeft=h,this.bottomLeft=m,this.topRight=y,this.bottomRight=v,this.minX=Math.trunc(Math.min(h.getX(),m.getX())),this.maxX=Math.trunc(Math.max(y.getX(),v.getX())),this.minY=Math.trunc(Math.min(h.getY(),y.getY())),this.maxY=Math.trunc(Math.max(m.getY(),v.getY()))}constructor_2(u){this.image=u.image,this.topLeft=u.getTopLeft(),this.bottomLeft=u.getBottomLeft(),this.topRight=u.getTopRight(),this.bottomRight=u.getBottomRight(),this.minX=u.getMinX(),this.maxX=u.getMaxX(),this.minY=u.getMinY(),this.maxY=u.getMaxY()}static merge(u,h){return u==null?h:h==null?u:new Hu(u.image,u.topLeft,u.bottomLeft,h.topRight,h.bottomRight)}addMissingRows(u,h,m){let y=this.topLeft,v=this.bottomLeft,E=this.topRight,T=this.bottomRight;if(u>0){let D=m?this.topLeft:this.topRight,P=Math.trunc(D.getY()-u);P<0&&(P=0);let z=new ue(D.getX(),P);m?y=z:E=z}if(h>0){let D=m?this.bottomLeft:this.bottomRight,P=Math.trunc(D.getY()+h);P>=this.image.getHeight()&&(P=this.image.getHeight()-1);let z=new ue(D.getX(),P);m?v=z:T=z}return new Hu(this.image,y,v,E,T)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class hG{constructor(u,h,m,y){this.columnCount=u,this.errorCorrectionLevel=y,this.rowCountUpperPart=h,this.rowCountLowerPart=m,this.rowCount=h+m}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class Qp{constructor(){this.buffer=""}static form(u,h){let m=-1;function y(E,T,D,P,z,H){if(E==="%%")return"%";if(h[++m]===void 0)return;E=P?parseInt(P.substr(1)):void 0;let K=z?parseInt(z.substr(1)):void 0,re;switch(H){case"s":re=h[m];break;case"c":re=h[m][0];break;case"f":re=parseFloat(h[m]).toFixed(E);break;case"p":re=parseFloat(h[m]).toPrecision(E);break;case"e":re=parseFloat(h[m]).toExponential(E);break;case"x":re=parseInt(h[m]).toString(K||16);break;case"d":re=parseFloat(parseInt(h[m],K||10).toPrecision(E)).toFixed(0);break}re=typeof re=="object"?JSON.stringify(re):(+re).toString(K);let le=parseInt(D),fe=D&&D[0]+""=="0"?"0":" ";for(;re.length<le;)re=T!==void 0?re+fe:fe+re;return re}let v=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return u.replace(v,y)}format(u,...h){this.buffer+=Qp.form(u,h)}toString(){return this.buffer}}class Jp{constructor(u){this.boundingBox=new Hu(u),this.codewords=new Array(u.getMaxY()-u.getMinY()+1)}getCodewordNearby(u){let h=this.getCodeword(u);if(h!=null)return h;for(let m=1;m<Jp.MAX_NEARBY_DISTANCE;m++){let y=this.imageRowToCodewordIndex(u)-m;if(y>=0&&(h=this.codewords[y],h!=null)||(y=this.imageRowToCodewordIndex(u)+m,y<this.codewords.length&&(h=this.codewords[y],h!=null)))return h}return null}imageRowToCodewordIndex(u){return u-this.boundingBox.getMinY()}setCodeword(u,h){this.codewords[this.imageRowToCodewordIndex(u)]=h}getCodeword(u){return this.codewords[this.imageRowToCodewordIndex(u)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const u=new Qp;let h=0;for(const m of this.codewords){if(m==null){u.format("%3d:    |   %n",h++);continue}u.format("%3d: %3d|%3d%n",h++,m.getRowNumber(),m.getValue())}return u.toString()}}Jp.MAX_NEARBY_DISTANCE=5;class em{constructor(){this.values=new Map}setValue(u){u=Math.trunc(u);let h=this.values.get(u);h==null&&(h=0),h++,this.values.set(u,h)}getValue(){let u=-1,h=new Array;for(const[m,y]of this.values.entries()){const v={getKey:()=>m,getValue:()=>y};v.getValue()>u?(u=v.getValue(),h=[],h.push(v.getKey())):v.getValue()===u&&h.push(v.getKey())}return Mt.toIntArray(h)}getConfidence(u){return this.values.get(u)}}class y$ extends Jp{constructor(u,h){super(u),this._isLeft=h}setRowNumbers(){for(let u of this.getCodewords())u!=null&&u.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(u){let h=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(h,u);let m=this.getBoundingBox(),y=this._isLeft?m.getTopLeft():m.getTopRight(),v=this._isLeft?m.getBottomLeft():m.getBottomRight(),E=this.imageRowToCodewordIndex(Math.trunc(y.getY())),T=this.imageRowToCodewordIndex(Math.trunc(v.getY())),D=-1,P=1,z=0;for(let H=E;H<T;H++){if(h[H]==null)continue;let K=h[H],re=K.getRowNumber()-D;if(re===0)z++;else if(re===1)P=Math.max(P,z),z=1,D=K.getRowNumber();else if(re<0||K.getRowNumber()>=u.getRowCount()||re>H)h[H]=null;else{let le;P>2?le=(P-2)*re:le=re;let fe=le>=H;for(let Ce=1;Ce<=le&&!fe;Ce++)fe=h[H-Ce]!=null;fe?h[H]=null:(D=K.getRowNumber(),z=1)}}}getRowHeights(){let u=this.getBarcodeMetadata();if(u==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(u);let h=new Int32Array(u.getRowCount());for(let m of this.getCodewords())if(m!=null){let y=m.getRowNumber();if(y>=h.length)continue;h[y]++}return h}adjustIncompleteIndicatorColumnRowNumbers(u){let h=this.getBoundingBox(),m=this._isLeft?h.getTopLeft():h.getTopRight(),y=this._isLeft?h.getBottomLeft():h.getBottomRight(),v=this.imageRowToCodewordIndex(Math.trunc(m.getY())),E=this.imageRowToCodewordIndex(Math.trunc(y.getY())),T=this.getCodewords(),D=-1;for(let P=v;P<E;P++){if(T[P]==null)continue;let z=T[P];z.setRowNumberAsRowIndicatorColumn();let H=z.getRowNumber()-D;H===0||(H===1?D=z.getRowNumber():z.getRowNumber()>=u.getRowCount()?T[P]=null:D=z.getRowNumber())}}getBarcodeMetadata(){let u=this.getCodewords(),h=new em,m=new em,y=new em,v=new em;for(let T of u){if(T==null)continue;T.setRowNumberAsRowIndicatorColumn();let D=T.getValue()%30,P=T.getRowNumber();switch(this._isLeft||(P+=2),P%3){case 0:m.setValue(D*3+1);break;case 1:v.setValue(D/3),y.setValue(D%3);break;case 2:h.setValue(D+1);break}}if(h.getValue().length===0||m.getValue().length===0||y.getValue().length===0||v.getValue().length===0||h.getValue()[0]<1||m.getValue()[0]+y.getValue()[0]<Mt.MIN_ROWS_IN_BARCODE||m.getValue()[0]+y.getValue()[0]>Mt.MAX_ROWS_IN_BARCODE)return null;let E=new hG(h.getValue()[0],m.getValue()[0],y.getValue()[0],v.getValue()[0]);return this.removeIncorrectCodewords(u,E),E}removeIncorrectCodewords(u,h){for(let m=0;m<u.length;m++){let y=u[m];if(u[m]==null)continue;let v=y.getValue()%30,E=y.getRowNumber();if(E>h.getRowCount()){u[m]=null;continue}switch(this._isLeft||(E+=2),E%3){case 0:v*3+1!==h.getRowCountUpperPart()&&(u[m]=null);break;case 1:(Math.trunc(v/3)!==h.getErrorCorrectionLevel()||v%3!==h.getRowCountLowerPart())&&(u[m]=null);break;case 2:v+1!==h.getColumnCount()&&(u[m]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class tm{constructor(u,h){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=u,this.barcodeColumnCount=u.getColumnCount(),this.boundingBox=h,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let u=Mt.MAX_CODEWORDS_IN_BARCODE,h;do h=u,u=this.adjustRowNumbersAndGetCount();while(u>0&&u<h);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(u){u!=null&&u.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let u=this.adjustRowNumbersByRow();if(u===0)return 0;for(let h=1;h<this.barcodeColumnCount+1;h++){let m=this.detectionResultColumns[h].getCodewords();for(let y=0;y<m.length;y++)m[y]!=null&&(m[y].hasValidRowNumber()||this.adjustRowNumbers(h,y,m))}return u}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let u=this.detectionResultColumns[0].getCodewords(),h=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let m=0;m<u.length;m++)if(u[m]!=null&&h[m]!=null&&u[m].getRowNumber()===h[m].getRowNumber())for(let y=1;y<=this.barcodeColumnCount;y++){let v=this.detectionResultColumns[y].getCodewords()[m];v!=null&&(v.setRowNumber(u[m].getRowNumber()),v.hasValidRowNumber()||(this.detectionResultColumns[y].getCodewords()[m]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let u=0,h=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let m=0;m<h.length;m++){if(h[m]==null)continue;let y=h[m].getRowNumber(),v=0;for(let E=this.barcodeColumnCount+1;E>0&&v<this.ADJUST_ROW_NUMBER_SKIP;E--){let T=this.detectionResultColumns[E].getCodewords()[m];T!=null&&(v=tm.adjustRowNumberIfValid(y,v,T),T.hasValidRowNumber()||u++)}}return u}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let u=0,h=this.detectionResultColumns[0].getCodewords();for(let m=0;m<h.length;m++){if(h[m]==null)continue;let y=h[m].getRowNumber(),v=0;for(let E=1;E<this.barcodeColumnCount+1&&v<this.ADJUST_ROW_NUMBER_SKIP;E++){let T=this.detectionResultColumns[E].getCodewords()[m];T!=null&&(v=tm.adjustRowNumberIfValid(y,v,T),T.hasValidRowNumber()||u++)}}return u}static adjustRowNumberIfValid(u,h,m){return m==null||m.hasValidRowNumber()||(m.isValidRowNumber(u)?(m.setRowNumber(u),h=0):++h),h}adjustRowNumbers(u,h,m){if(!this.detectionResultColumns[u-1])return;let y=m[h],v=this.detectionResultColumns[u-1].getCodewords(),E=v;this.detectionResultColumns[u+1]!=null&&(E=this.detectionResultColumns[u+1].getCodewords());let T=new Array(14);T[2]=v[h],T[3]=E[h],h>0&&(T[0]=m[h-1],T[4]=v[h-1],T[5]=E[h-1]),h>1&&(T[8]=m[h-2],T[10]=v[h-2],T[11]=E[h-2]),h<m.length-1&&(T[1]=m[h+1],T[6]=v[h+1],T[7]=E[h+1]),h<m.length-2&&(T[9]=m[h+2],T[12]=v[h+2],T[13]=E[h+2]);for(let D of T)if(tm.adjustRowNumber(y,D))return}static adjustRowNumber(u,h){return h==null?!1:h.hasValidRowNumber()&&h.getBucket()===u.getBucket()?(u.setRowNumber(h.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(u){this.boundingBox=u}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(u,h){this.detectionResultColumns[u]=h}getDetectionResultColumn(u){return this.detectionResultColumns[u]}toString(){let u=this.detectionResultColumns[0];u==null&&(u=this.detectionResultColumns[this.barcodeColumnCount+1]);let h=new Qp;for(let m=0;m<u.getCodewords().length;m++){h.format("CW %3d:",m);for(let y=0;y<this.barcodeColumnCount+2;y++){if(this.detectionResultColumns[y]==null){h.format("    |   ");continue}let v=this.detectionResultColumns[y].getCodewords()[m];if(v==null){h.format("    |   ");continue}h.format(" %3d|%3d",v.getRowNumber(),v.getValue())}h.format("%n")}return h.toString()}}class nm{constructor(u,h,m,y){this.rowNumber=nm.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(u),this.endX=Math.trunc(h),this.bucket=Math.trunc(m),this.value=Math.trunc(y)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(u){return u!==nm.BARCODE_ROW_UNKNOWN&&this.bucket===u%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(u){this.rowNumber=u}toString(){return this.rowNumber+"|"+this.value}}nm.BARCODE_ROW_UNKNOWN=-1;class ko{static initialize(){for(let u=0;u<Mt.SYMBOL_TABLE.length;u++){let h=Mt.SYMBOL_TABLE[u],m=h&1;for(let y=0;y<Mt.BARS_IN_MODULE;y++){let v=0;for(;(h&1)===m;)v+=1,h>>=1;m=h&1,ko.RATIOS_TABLE[u]||(ko.RATIOS_TABLE[u]=new Array(Mt.BARS_IN_MODULE)),ko.RATIOS_TABLE[u][Mt.BARS_IN_MODULE-y-1]=Math.fround(v/Mt.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(u){let h=ko.getDecodedCodewordValue(ko.sampleBitCounts(u));return h!==-1?h:ko.getClosestDecodedValue(u)}static sampleBitCounts(u){let h=je.sum(u),m=new Int32Array(Mt.BARS_IN_MODULE),y=0,v=0;for(let E=0;E<Mt.MODULES_IN_CODEWORD;E++){let T=h/(2*Mt.MODULES_IN_CODEWORD)+E*h/Mt.MODULES_IN_CODEWORD;v+u[y]<=T&&(v+=u[y],y++),m[y]++}return m}static getDecodedCodewordValue(u){let h=ko.getBitValue(u);return Mt.getCodeword(h)===-1?-1:h}static getBitValue(u){let h=0;for(let m=0;m<u.length;m++)for(let y=0;y<u[m];y++)h=h<<1|(m%2===0?1:0);return Math.trunc(h)}static getClosestDecodedValue(u){let h=je.sum(u),m=new Array(Mt.BARS_IN_MODULE);if(h>1)for(let E=0;E<m.length;E++)m[E]=Math.fround(u[E]/h);let y=Se.MAX_VALUE,v=-1;this.bSymbolTableReady||ko.initialize();for(let E=0;E<ko.RATIOS_TABLE.length;E++){let T=0,D=ko.RATIOS_TABLE[E];for(let P=0;P<Mt.BARS_IN_MODULE;P++){let z=Math.fround(D[P]-m[P]);if(T+=Math.fround(z*z),T>=y)break}T<y&&(y=T,v=Mt.SYMBOL_TABLE[E])}return v}}ko.bSymbolTableReady=!1,ko.RATIOS_TABLE=new Array(Mt.SYMBOL_TABLE.length).map(U=>new Array(Mt.BARS_IN_MODULE));class b${constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(u){this.segmentIndex=u}getFileId(){return this.fileId}setFileId(u){this.fileId=u}getOptionalData(){return this.optionalData}setOptionalData(u){this.optionalData=u}isLastSegment(){return this.lastSegment}setLastSegment(u){this.lastSegment=u}getSegmentCount(){return this.segmentCount}setSegmentCount(u){this.segmentCount=u}getSender(){return this.sender||null}setSender(u){this.sender=u}getAddressee(){return this.addressee||null}setAddressee(u){this.addressee=u}getFileName(){return this.fileName}setFileName(u){this.fileName=u}getFileSize(){return this.fileSize}setFileSize(u){this.fileSize=u}getChecksum(){return this.checksum}setChecksum(u){this.checksum=u}getTimestamp(){return this.timestamp}setTimestamp(u){this.timestamp=u}}class w${static parseLong(u,h=void 0){return parseInt(u,h)}}class v$ extends c{}v$.kind="NullPointerException";class pG{writeBytes(u){this.writeBytesOffset(u,0,u.length)}writeBytesOffset(u,h,m){if(u==null)throw new v$;if(h<0||h>u.length||m<0||h+m>u.length||h+m<0)throw new w;if(m===0)return;for(let y=0;y<m;y++)this.write(u[h+y])}flush(){}close(){}}class mG extends c{}class gG extends pG{constructor(u=32){if(super(),this.count=0,u<0)throw new f("Negative initial size: "+u);this.buf=new Uint8Array(u)}ensureCapacity(u){u-this.buf.length>0&&this.grow(u)}grow(u){let m=this.buf.length<<1;if(m-u<0&&(m=u),m<0){if(u<0)throw new mG;m=k.MAX_VALUE}this.buf=N.copyOfUint8Array(this.buf,m)}write(u){this.ensureCapacity(this.count+1),this.buf[this.count]=u,this.count+=1}writeBytesOffset(u,h,m){if(h<0||h>u.length||m<0||h+m-u.length>0)throw new w;this.ensureCapacity(this.count+m),b.arraycopy(u,h,this.buf,this.count,m),this.count+=m}writeTo(u){u.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return N.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(u){return u?typeof u=="string"?this.toString_string(u):this.toString_number(u):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(u){return new String(this.buf).toString()}toString_number(u){return new String(this.buf).toString()}close(){}}var Pn;(function(U){U[U.ALPHA=0]="ALPHA",U[U.LOWER=1]="LOWER",U[U.MIXED=2]="MIXED",U[U.PUNCT=3]="PUNCT",U[U.ALPHA_SHIFT=4]="ALPHA_SHIFT",U[U.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(Pn||(Pn={}));function C$(){if(typeof window<"u")return window.BigInt||null;if(typeof Gn<"u")return Gn.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let mx;function Ec(U){if(typeof mx>"u"&&(mx=C$()),mx===null)throw new Error("BigInt is not supported!");return mx(U)}function xG(){let U=[];U[0]=Ec(1);let u=Ec(900);U[1]=u;for(let h=2;h<16;h++)U[h]=U[h-1]*u;return U}class Ae{static decode(u,h){let m=new W(""),y=M.ISO8859_1;m.enableDecoding(y);let v=1,E=u[v++],T=new b$;for(;v<u[0];){switch(E){case Ae.TEXT_COMPACTION_MODE_LATCH:v=Ae.textCompaction(u,v,m);break;case Ae.BYTE_COMPACTION_MODE_LATCH:case Ae.BYTE_COMPACTION_MODE_LATCH_6:v=Ae.byteCompaction(E,u,y,v,m);break;case Ae.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:m.append(u[v++]);break;case Ae.NUMERIC_COMPACTION_MODE_LATCH:v=Ae.numericCompaction(u,v,m);break;case Ae.ECI_CHARSET:M.getCharacterSetECIByValue(u[v++]);break;case Ae.ECI_GENERAL_PURPOSE:v+=2;break;case Ae.ECI_USER_DEFINED:v++;break;case Ae.BEGIN_MACRO_PDF417_CONTROL_BLOCK:v=Ae.decodeMacroBlock(u,v,T);break;case Ae.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Ae.MACRO_PDF417_TERMINATOR:throw new O;default:v--,v=Ae.textCompaction(u,v,m);break}if(v<u.length)E=u[v++];else throw O.getFormatInstance()}if(m.length()===0)throw O.getFormatInstance();let D=new Oe(null,m.toString(),null,h);return D.setOther(T),D}static decodeMacroBlock(u,h,m){if(h+Ae.NUMBER_OF_SEQUENCE_CODEWORDS>u[0])throw O.getFormatInstance();let y=new Int32Array(Ae.NUMBER_OF_SEQUENCE_CODEWORDS);for(let T=0;T<Ae.NUMBER_OF_SEQUENCE_CODEWORDS;T++,h++)y[T]=u[h];m.setSegmentIndex(k.parseInt(Ae.decodeBase900toBase10(y,Ae.NUMBER_OF_SEQUENCE_CODEWORDS)));let v=new W;h=Ae.textCompaction(u,h,v),m.setFileId(v.toString());let E=-1;for(u[h]===Ae.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(E=h+1);h<u[0];)switch(u[h]){case Ae.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(h++,u[h]){case Ae.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let T=new W;h=Ae.textCompaction(u,h+1,T),m.setFileName(T.toString());break;case Ae.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let D=new W;h=Ae.textCompaction(u,h+1,D),m.setSender(D.toString());break;case Ae.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let P=new W;h=Ae.textCompaction(u,h+1,P),m.setAddressee(P.toString());break;case Ae.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let z=new W;h=Ae.numericCompaction(u,h+1,z),m.setSegmentCount(k.parseInt(z.toString()));break;case Ae.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let H=new W;h=Ae.numericCompaction(u,h+1,H),m.setTimestamp(w$.parseLong(H.toString()));break;case Ae.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let K=new W;h=Ae.numericCompaction(u,h+1,K),m.setChecksum(k.parseInt(K.toString()));break;case Ae.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let re=new W;h=Ae.numericCompaction(u,h+1,re),m.setFileSize(w$.parseLong(re.toString()));break;default:throw O.getFormatInstance()}break;case Ae.MACRO_PDF417_TERMINATOR:h++,m.setLastSegment(!0);break;default:throw O.getFormatInstance()}if(E!==-1){let T=h-E;m.isLastSegment()&&T--,m.setOptionalData(N.copyOfRange(u,E,E+T))}return h}static textCompaction(u,h,m){let y=new Int32Array((u[0]-h)*2),v=new Int32Array((u[0]-h)*2),E=0,T=!1;for(;h<u[0]&&!T;){let D=u[h++];if(D<Ae.TEXT_COMPACTION_MODE_LATCH)y[E]=D/30,y[E+1]=D%30,E+=2;else switch(D){case Ae.TEXT_COMPACTION_MODE_LATCH:y[E++]=Ae.TEXT_COMPACTION_MODE_LATCH;break;case Ae.BYTE_COMPACTION_MODE_LATCH:case Ae.BYTE_COMPACTION_MODE_LATCH_6:case Ae.NUMERIC_COMPACTION_MODE_LATCH:case Ae.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Ae.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Ae.MACRO_PDF417_TERMINATOR:h--,T=!0;break;case Ae.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:y[E]=Ae.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,D=u[h++],v[E]=D,E++;break}}return Ae.decodeTextCompaction(y,v,E,m),h}static decodeTextCompaction(u,h,m,y){let v=Pn.ALPHA,E=Pn.ALPHA,T=0;for(;T<m;){let D=u[T],P="";switch(v){case Pn.ALPHA:if(D<26)P=String.fromCharCode(65+D);else switch(D){case 26:P=" ";break;case Ae.LL:v=Pn.LOWER;break;case Ae.ML:v=Pn.MIXED;break;case Ae.PS:E=v,v=Pn.PUNCT_SHIFT;break;case Ae.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:y.append(h[T]);break;case Ae.TEXT_COMPACTION_MODE_LATCH:v=Pn.ALPHA;break}break;case Pn.LOWER:if(D<26)P=String.fromCharCode(97+D);else switch(D){case 26:P=" ";break;case Ae.AS:E=v,v=Pn.ALPHA_SHIFT;break;case Ae.ML:v=Pn.MIXED;break;case Ae.PS:E=v,v=Pn.PUNCT_SHIFT;break;case Ae.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:y.append(h[T]);break;case Ae.TEXT_COMPACTION_MODE_LATCH:v=Pn.ALPHA;break}break;case Pn.MIXED:if(D<Ae.PL)P=Ae.MIXED_CHARS[D];else switch(D){case Ae.PL:v=Pn.PUNCT;break;case 26:P=" ";break;case Ae.LL:v=Pn.LOWER;break;case Ae.AL:v=Pn.ALPHA;break;case Ae.PS:E=v,v=Pn.PUNCT_SHIFT;break;case Ae.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:y.append(h[T]);break;case Ae.TEXT_COMPACTION_MODE_LATCH:v=Pn.ALPHA;break}break;case Pn.PUNCT:if(D<Ae.PAL)P=Ae.PUNCT_CHARS[D];else switch(D){case Ae.PAL:v=Pn.ALPHA;break;case Ae.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:y.append(h[T]);break;case Ae.TEXT_COMPACTION_MODE_LATCH:v=Pn.ALPHA;break}break;case Pn.ALPHA_SHIFT:if(v=E,D<26)P=String.fromCharCode(65+D);else switch(D){case 26:P=" ";break;case Ae.TEXT_COMPACTION_MODE_LATCH:v=Pn.ALPHA;break}break;case Pn.PUNCT_SHIFT:if(v=E,D<Ae.PAL)P=Ae.PUNCT_CHARS[D];else switch(D){case Ae.PAL:v=Pn.ALPHA;break;case Ae.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:y.append(h[T]);break;case Ae.TEXT_COMPACTION_MODE_LATCH:v=Pn.ALPHA;break}break}P!==""&&y.append(P),T++}}static byteCompaction(u,h,m,y,v){let E=new gG,T=0,D=0,P=!1;switch(u){case Ae.BYTE_COMPACTION_MODE_LATCH:let z=new Int32Array(6),H=h[y++];for(;y<h[0]&&!P;)switch(z[T++]=H,D=900*D+H,H=h[y++],H){case Ae.TEXT_COMPACTION_MODE_LATCH:case Ae.BYTE_COMPACTION_MODE_LATCH:case Ae.NUMERIC_COMPACTION_MODE_LATCH:case Ae.BYTE_COMPACTION_MODE_LATCH_6:case Ae.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Ae.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Ae.MACRO_PDF417_TERMINATOR:y--,P=!0;break;default:if(T%5===0&&T>0){for(let K=0;K<6;++K)E.write(Number(Ec(D)>>Ec(8*(5-K))));D=0,T=0}break}y===h[0]&&H<Ae.TEXT_COMPACTION_MODE_LATCH&&(z[T++]=H);for(let K=0;K<T;K++)E.write(z[K]);break;case Ae.BYTE_COMPACTION_MODE_LATCH_6:for(;y<h[0]&&!P;){let K=h[y++];if(K<Ae.TEXT_COMPACTION_MODE_LATCH)T++,D=900*D+K;else switch(K){case Ae.TEXT_COMPACTION_MODE_LATCH:case Ae.BYTE_COMPACTION_MODE_LATCH:case Ae.NUMERIC_COMPACTION_MODE_LATCH:case Ae.BYTE_COMPACTION_MODE_LATCH_6:case Ae.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Ae.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Ae.MACRO_PDF417_TERMINATOR:y--,P=!0;break}if(T%5===0&&T>0){for(let re=0;re<6;++re)E.write(Number(Ec(D)>>Ec(8*(5-re))));D=0,T=0}}break}return v.append(V.decode(E.toByteArray(),m)),y}static numericCompaction(u,h,m){let y=0,v=!1,E=new Int32Array(Ae.MAX_NUMERIC_CODEWORDS);for(;h<u[0]&&!v;){let T=u[h++];if(h===u[0]&&(v=!0),T<Ae.TEXT_COMPACTION_MODE_LATCH)E[y]=T,y++;else switch(T){case Ae.TEXT_COMPACTION_MODE_LATCH:case Ae.BYTE_COMPACTION_MODE_LATCH:case Ae.BYTE_COMPACTION_MODE_LATCH_6:case Ae.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Ae.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Ae.MACRO_PDF417_TERMINATOR:h--,v=!0;break}(y%Ae.MAX_NUMERIC_CODEWORDS===0||T===Ae.NUMERIC_COMPACTION_MODE_LATCH||v)&&y>0&&(m.append(Ae.decodeBase900toBase10(E,y)),y=0)}return h}static decodeBase900toBase10(u,h){let m=Ec(0);for(let v=0;v<h;v++)m+=Ae.EXP900[h-v-1]*Ec(u[v]);let y=m.toString();if(y.charAt(0)!=="1")throw new O;return y.substring(1)}}Ae.TEXT_COMPACTION_MODE_LATCH=900,Ae.BYTE_COMPACTION_MODE_LATCH=901,Ae.NUMERIC_COMPACTION_MODE_LATCH=902,Ae.BYTE_COMPACTION_MODE_LATCH_6=924,Ae.ECI_USER_DEFINED=925,Ae.ECI_GENERAL_PURPOSE=926,Ae.ECI_CHARSET=927,Ae.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,Ae.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,Ae.MACRO_PDF417_TERMINATOR=922,Ae.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,Ae.MAX_NUMERIC_CODEWORDS=15,Ae.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,Ae.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,Ae.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,Ae.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,Ae.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,Ae.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,Ae.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,Ae.PL=25,Ae.LL=27,Ae.AS=27,Ae.ML=28,Ae.AL=28,Ae.PS=29,Ae.PAL=29,Ae.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,Ae.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",Ae.EXP900=C$()?xG():[],Ae.NUMBER_OF_SEQUENCE_CODEWORDS=2;class Jt{constructor(){}static decode(u,h,m,y,v,E,T){let D=new Hu(u,h,m,y,v),P=null,z=null,H;for(let le=!0;;le=!1){if(h!=null&&(P=Jt.getRowIndicatorColumn(u,D,h,!0,E,T)),y!=null&&(z=Jt.getRowIndicatorColumn(u,D,y,!1,E,T)),H=Jt.merge(P,z),H==null)throw j.getNotFoundInstance();let fe=H.getBoundingBox();if(le&&fe!=null&&(fe.getMinY()<D.getMinY()||fe.getMaxY()>D.getMaxY()))D=fe;else break}H.setBoundingBox(D);let K=H.getBarcodeColumnCount()+1;H.setDetectionResultColumn(0,P),H.setDetectionResultColumn(K,z);let re=P!=null;for(let le=1;le<=K;le++){let fe=re?le:K-le;if(H.getDetectionResultColumn(fe)!==void 0)continue;let Ce;fe===0||fe===K?Ce=new y$(D,fe===0):Ce=new Jp(D),H.setDetectionResultColumn(fe,Ce);let Re=-1,Ze=Re;for(let Je=D.getMinY();Je<=D.getMaxY();Je++){if(Re=Jt.getStartColumn(H,fe,Je,re),Re<0||Re>D.getMaxX()){if(Ze===-1)continue;Re=Ze}let Ke=Jt.detectCodeword(u,D.getMinX(),D.getMaxX(),re,Re,Je,E,T);Ke!=null&&(Ce.setCodeword(Je,Ke),Ze=Re,E=Math.min(E,Ke.getWidth()),T=Math.max(T,Ke.getWidth()))}}return Jt.createDecoderResult(H)}static merge(u,h){if(u==null&&h==null)return null;let m=Jt.getBarcodeMetadata(u,h);if(m==null)return null;let y=Hu.merge(Jt.adjustBoundingBox(u),Jt.adjustBoundingBox(h));return new tm(m,y)}static adjustBoundingBox(u){if(u==null)return null;let h=u.getRowHeights();if(h==null)return null;let m=Jt.getMax(h),y=0;for(let T of h)if(y+=m-T,T>0)break;let v=u.getCodewords();for(let T=0;y>0&&v[T]==null;T++)y--;let E=0;for(let T=h.length-1;T>=0&&(E+=m-h[T],!(h[T]>0));T--);for(let T=v.length-1;E>0&&v[T]==null;T--)E--;return u.getBoundingBox().addMissingRows(y,E,u.isLeft())}static getMax(u){let h=-1;for(let m of u)h=Math.max(h,m);return h}static getBarcodeMetadata(u,h){let m;if(u==null||(m=u.getBarcodeMetadata())==null)return h==null?null:h.getBarcodeMetadata();let y;return h==null||(y=h.getBarcodeMetadata())==null?m:m.getColumnCount()!==y.getColumnCount()&&m.getErrorCorrectionLevel()!==y.getErrorCorrectionLevel()&&m.getRowCount()!==y.getRowCount()?null:m}static getRowIndicatorColumn(u,h,m,y,v,E){let T=new y$(h,y);for(let D=0;D<2;D++){let P=D===0?1:-1,z=Math.trunc(Math.trunc(m.getX()));for(let H=Math.trunc(Math.trunc(m.getY()));H<=h.getMaxY()&&H>=h.getMinY();H+=P){let K=Jt.detectCodeword(u,0,u.getWidth(),y,z,H,v,E);K!=null&&(T.setCodeword(H,K),y?z=K.getStartX():z=K.getEndX())}}return T}static adjustCodewordCount(u,h){let m=h[0][1],y=m.getValue(),v=u.getBarcodeColumnCount()*u.getBarcodeRowCount()-Jt.getNumberOfECCodeWords(u.getBarcodeECLevel());if(y.length===0){if(v<1||v>Mt.MAX_CODEWORDS_IN_BARCODE)throw j.getNotFoundInstance();m.setValue(v)}else y[0]!==v&&m.setValue(v)}static createDecoderResult(u){let h=Jt.createBarcodeMatrix(u);Jt.adjustCodewordCount(u,h);let m=new Array,y=new Int32Array(u.getBarcodeRowCount()*u.getBarcodeColumnCount()),v=[],E=new Array;for(let D=0;D<u.getBarcodeRowCount();D++)for(let P=0;P<u.getBarcodeColumnCount();P++){let z=h[D][P+1].getValue(),H=D*u.getBarcodeColumnCount()+P;z.length===0?m.push(H):z.length===1?y[H]=z[0]:(E.push(H),v.push(z))}let T=new Array(v.length);for(let D=0;D<T.length;D++)T[D]=v[D];return Jt.createDecoderResultFromAmbiguousValues(u.getBarcodeECLevel(),y,Mt.toIntArray(m),Mt.toIntArray(E),T)}static createDecoderResultFromAmbiguousValues(u,h,m,y,v){let E=new Int32Array(y.length),T=100;for(;T-- >0;){for(let D=0;D<E.length;D++)h[y[D]]=v[D][E[D]];try{return Jt.decodeCodewords(h,u,m)}catch(D){if(!(D instanceof g))throw D}if(E.length===0)throw g.getChecksumInstance();for(let D=0;D<E.length;D++)if(E[D]<v[D].length-1){E[D]++;break}else if(E[D]=0,D===E.length-1)throw g.getChecksumInstance()}throw g.getChecksumInstance()}static createBarcodeMatrix(u){let h=Array.from({length:u.getBarcodeRowCount()},()=>new Array(u.getBarcodeColumnCount()+2));for(let y=0;y<h.length;y++)for(let v=0;v<h[y].length;v++)h[y][v]=new em;let m=0;for(let y of u.getDetectionResultColumns()){if(y!=null){for(let v of y.getCodewords())if(v!=null){let E=v.getRowNumber();if(E>=0){if(E>=h.length)continue;h[E][m].setValue(v.getValue())}}}m++}return h}static isValidBarcodeColumn(u,h){return h>=0&&h<=u.getBarcodeColumnCount()+1}static getStartColumn(u,h,m,y){let v=y?1:-1,E=null;if(Jt.isValidBarcodeColumn(u,h-v)&&(E=u.getDetectionResultColumn(h-v).getCodeword(m)),E!=null)return y?E.getEndX():E.getStartX();if(E=u.getDetectionResultColumn(h).getCodewordNearby(m),E!=null)return y?E.getStartX():E.getEndX();if(Jt.isValidBarcodeColumn(u,h-v)&&(E=u.getDetectionResultColumn(h-v).getCodewordNearby(m)),E!=null)return y?E.getEndX():E.getStartX();let T=0;for(;Jt.isValidBarcodeColumn(u,h-v);){h-=v;for(let D of u.getDetectionResultColumn(h).getCodewords())if(D!=null)return(y?D.getEndX():D.getStartX())+v*T*(D.getEndX()-D.getStartX());T++}return y?u.getBoundingBox().getMinX():u.getBoundingBox().getMaxX()}static detectCodeword(u,h,m,y,v,E,T,D){v=Jt.adjustCodewordStartColumn(u,h,m,y,v,E);let P=Jt.getModuleBitCount(u,h,m,y,v,E);if(P==null)return null;let z,H=je.sum(P);if(y)z=v+H;else{for(let le=0;le<P.length/2;le++){let fe=P[le];P[le]=P[P.length-1-le],P[P.length-1-le]=fe}z=v,v=z-H}if(!Jt.checkCodewordSkew(H,T,D))return null;let K=ko.getDecodedValue(P),re=Mt.getCodeword(K);return re===-1?null:new nm(v,z,Jt.getCodewordBucketNumber(K),re)}static getModuleBitCount(u,h,m,y,v,E){let T=v,D=new Int32Array(8),P=0,z=y?1:-1,H=y;for(;(y?T<m:T>=h)&&P<D.length;)u.get(T,E)===H?(D[P]++,T+=z):(P++,H=!H);return P===D.length||T===(y?m:h)&&P===D.length-1?D:null}static getNumberOfECCodeWords(u){return 2<<u}static adjustCodewordStartColumn(u,h,m,y,v,E){let T=v,D=y?-1:1;for(let P=0;P<2;P++){for(;(y?T>=h:T<m)&&y===u.get(T,E);){if(Math.abs(v-T)>Jt.CODEWORD_SKEW_SIZE)return v;T+=D}D=-D,y=!y}return T}static checkCodewordSkew(u,h,m){return h-Jt.CODEWORD_SKEW_SIZE<=u&&u<=m+Jt.CODEWORD_SKEW_SIZE}static decodeCodewords(u,h,m){if(u.length===0)throw O.getFormatInstance();let y=1<<h+1,v=Jt.correctErrors(u,m,y);Jt.verifyCodewordCount(u,y);let E=Ae.decode(u,""+h);return E.setErrorsCorrected(v),E.setErasures(m.length),E}static correctErrors(u,h,m){if(h!=null&&h.length>m/2+Jt.MAX_ERRORS||m<0||m>Jt.MAX_EC_CODEWORDS)throw g.getChecksumInstance();return Jt.errorCorrection.decode(u,m,h)}static verifyCodewordCount(u,h){if(u.length<4)throw O.getFormatInstance();let m=u[0];if(m>u.length)throw O.getFormatInstance();if(m===0)if(h<u.length)u[0]=u.length-h;else throw O.getFormatInstance()}static getBitCountForCodeword(u){let h=new Int32Array(8),m=0,y=h.length-1;for(;!((u&1)!==m&&(m=u&1,y--,y<0));)h[y]++,u>>=1;return h}static getCodewordBucketNumber(u){return u instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(u):this.getCodewordBucketNumber_number(u)}static getCodewordBucketNumber_number(u){return Jt.getCodewordBucketNumber(Jt.getBitCountForCodeword(u))}static getCodewordBucketNumber_Int32Array(u){return(u[0]-u[2]+u[4]-u[6]+9)%9}static toString(u){let h=new Qp;for(let m=0;m<u.length;m++){h.format("Row %2d: ",m);for(let y=0;y<u[m].length;y++){let v=u[m][y];v.getValue().length===0?h.format("        ",null):h.format("%4d(%2d)",v.getValue()[0],v.getConfidence(v.getValue()[0]))}h.format("%n")}return h.toString()}}Jt.CODEWORD_SKEW_SIZE=2,Jt.MAX_ERRORS=3,Jt.MAX_EC_CODEWORDS=512,Jt.errorCorrection=new x$;class $s{decode(u,h=null){let m=$s.decode(u,h,!1);if(m==null||m.length===0||m[0]==null)throw j.getNotFoundInstance();return m[0]}decodeMultiple(u,h=null){try{return $s.decode(u,h,!0)}catch(m){throw m instanceof O||m instanceof g?j.getNotFoundInstance():m}}static decode(u,h,m){const y=new Array,v=Kt.detectMultiple(u,h,m);for(const E of v.getPoints()){const T=Jt.decode(v.getBits(),E[4],E[5],E[6],E[7],$s.getMinCodewordWidth(E),$s.getMaxCodewordWidth(E)),D=new ge(T.getText(),T.getRawBytes(),void 0,E,he.PDF_417);D.putMetadata(ze.ERROR_CORRECTION_LEVEL,T.getECLevel());const P=T.getOther();P!=null&&D.putMetadata(ze.PDF417_EXTRA_METADATA,P),y.push(D)}return y.map(E=>E)}static getMaxWidth(u,h){return u==null||h==null?0:Math.trunc(Math.abs(u.getX()-h.getX()))}static getMinWidth(u,h){return u==null||h==null?k.MAX_VALUE:Math.trunc(Math.abs(u.getX()-h.getX()))}static getMaxCodewordWidth(u){return Math.floor(Math.max(Math.max($s.getMaxWidth(u[0],u[4]),$s.getMaxWidth(u[6],u[2])*Mt.MODULES_IN_CODEWORD/Mt.MODULES_IN_STOP_PATTERN),Math.max($s.getMaxWidth(u[1],u[5]),$s.getMaxWidth(u[7],u[3])*Mt.MODULES_IN_CODEWORD/Mt.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(u){return Math.floor(Math.min(Math.min($s.getMinWidth(u[0],u[4]),$s.getMinWidth(u[6],u[2])*Mt.MODULES_IN_CODEWORD/Mt.MODULES_IN_STOP_PATTERN),Math.min($s.getMinWidth(u[1],u[5]),$s.getMinWidth(u[7],u[3])*Mt.MODULES_IN_CODEWORD/Mt.MODULES_IN_STOP_PATTERN)))}reset(){}}class gx extends c{}gx.kind="ReaderException";class S${constructor(u,h){this.verbose=u===!0,h&&this.setHints(h)}decode(u,h){return h&&this.setHints(h),this.decodeInternal(u)}decodeWithState(u){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(u)}setHints(u){this.hints=u;const h=!r(u)&&u.get($.TRY_HARDER)===!0,m=r(u)?null:u.get($.POSSIBLE_FORMATS),y=new Array;if(!r(m)){const v=m.some(E=>E===he.UPC_A||E===he.UPC_E||E===he.EAN_13||E===he.EAN_8||E===he.CODABAR||E===he.CODE_39||E===he.CODE_93||E===he.CODE_128||E===he.ITF||E===he.RSS_14||E===he.RSS_EXPANDED);v&&!h&&y.push(new kf(u,this.verbose)),m.includes(he.QR_CODE)&&y.push(new Nc),m.includes(he.DATA_MATRIX)&&y.push(new Sc),m.includes(he.AZTEC)&&y.push(new Ct),m.includes(he.PDF_417)&&y.push(new $s),v&&h&&y.push(new kf(u,this.verbose))}y.length===0&&(h||y.push(new kf(u,this.verbose)),y.push(new Nc),y.push(new Sc),y.push(new Ct),y.push(new $s),h&&y.push(new kf(u,this.verbose))),this.readers=y}reset(){if(this.readers!==null)for(const u of this.readers)u.reset()}decodeInternal(u){if(this.readers===null)throw new gx("No readers where selected, nothing can be read.");for(const h of this.readers)try{return h.decode(u,this.hints)}catch(m){if(m instanceof gx)continue}throw new j("No MultiFormat Readers were able to detect the code.")}}class yG extends ye{constructor(u=null,h=500){const m=new S$;m.setHints(u),super(m,h)}decodeBitmap(u){return this.reader.decodeWithState(u)}}class bG extends ye{constructor(u=500){super(new $s,u)}}class wG extends ye{constructor(u=500){super(new Nc,u)}}var eS;(function(U){U[U.ERROR_CORRECTION=0]="ERROR_CORRECTION",U[U.CHARACTER_SET=1]="CHARACTER_SET",U[U.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",U[U.MIN_SIZE=3]="MIN_SIZE",U[U.MAX_SIZE=4]="MAX_SIZE",U[U.MARGIN=5]="MARGIN",U[U.PDF417_COMPACT=6]="PDF417_COMPACT",U[U.PDF417_COMPACTION=7]="PDF417_COMPACTION",U[U.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",U[U.AZTEC_LAYERS=9]="AZTEC_LAYERS",U[U.QR_VERSION=10]="QR_VERSION"})(eS||(eS={}));var ss=eS;class tS{constructor(u){this.field=u,this.cachedGenerators=[],this.cachedGenerators.push(new me(u,Int32Array.from([1])))}buildGenerator(u){const h=this.cachedGenerators;if(u>=h.length){let m=h[h.length-1];const y=this.field;for(let v=h.length;v<=u;v++){const E=m.multiply(new me(y,Int32Array.from([1,y.exp(v-1+y.getGeneratorBase())])));h.push(E),m=E}}return h[u]}encode(u,h){if(h===0)throw new f("No error correction bytes");const m=u.length-h;if(m<=0)throw new f("No data bytes provided");const y=this.buildGenerator(h),v=new Int32Array(m);b.arraycopy(u,0,v,0,m);let E=new me(this.field,v);E=E.multiplyByMonomial(h,1);const D=E.divide(y)[1].getCoefficients(),P=h-D.length;for(let z=0;z<P;z++)u[m+z]=0;b.arraycopy(D,0,u,m+P,D.length)}}class Nr{constructor(){}static applyMaskPenaltyRule1(u){return Nr.applyMaskPenaltyRule1Internal(u,!0)+Nr.applyMaskPenaltyRule1Internal(u,!1)}static applyMaskPenaltyRule2(u){let h=0;const m=u.getArray(),y=u.getWidth(),v=u.getHeight();for(let E=0;E<v-1;E++){const T=m[E];for(let D=0;D<y-1;D++){const P=T[D];P===T[D+1]&&P===m[E+1][D]&&P===m[E+1][D+1]&&h++}}return Nr.N2*h}static applyMaskPenaltyRule3(u){let h=0;const m=u.getArray(),y=u.getWidth(),v=u.getHeight();for(let E=0;E<v;E++)for(let T=0;T<y;T++){const D=m[E];T+6<y&&D[T]===1&&D[T+1]===0&&D[T+2]===1&&D[T+3]===1&&D[T+4]===1&&D[T+5]===0&&D[T+6]===1&&(Nr.isWhiteHorizontal(D,T-4,T)||Nr.isWhiteHorizontal(D,T+7,T+11))&&h++,E+6<v&&m[E][T]===1&&m[E+1][T]===0&&m[E+2][T]===1&&m[E+3][T]===1&&m[E+4][T]===1&&m[E+5][T]===0&&m[E+6][T]===1&&(Nr.isWhiteVertical(m,T,E-4,E)||Nr.isWhiteVertical(m,T,E+7,E+11))&&h++}return h*Nr.N3}static isWhiteHorizontal(u,h,m){h=Math.max(h,0),m=Math.min(m,u.length);for(let y=h;y<m;y++)if(u[y]===1)return!1;return!0}static isWhiteVertical(u,h,m,y){m=Math.max(m,0),y=Math.min(y,u.length);for(let v=m;v<y;v++)if(u[v][h]===1)return!1;return!0}static applyMaskPenaltyRule4(u){let h=0;const m=u.getArray(),y=u.getWidth(),v=u.getHeight();for(let D=0;D<v;D++){const P=m[D];for(let z=0;z<y;z++)P[z]===1&&h++}const E=u.getHeight()*u.getWidth();return Math.floor(Math.abs(h*2-E)*10/E)*Nr.N4}static getDataMaskBit(u,h,m){let y,v;switch(u){case 0:y=m+h&1;break;case 1:y=m&1;break;case 2:y=h%3;break;case 3:y=(m+h)%3;break;case 4:y=Math.floor(m/2)+Math.floor(h/3)&1;break;case 5:v=m*h,y=(v&1)+v%3;break;case 6:v=m*h,y=(v&1)+v%3&1;break;case 7:v=m*h,y=v%3+(m+h&1)&1;break;default:throw new f("Invalid mask pattern: "+u)}return y===0}static applyMaskPenaltyRule1Internal(u,h){let m=0;const y=h?u.getHeight():u.getWidth(),v=h?u.getWidth():u.getHeight(),E=u.getArray();for(let T=0;T<y;T++){let D=0,P=-1;for(let z=0;z<v;z++){const H=h?E[T][z]:E[z][T];H===P?D++:(D>=5&&(m+=Nr.N1+(D-5)),D=1,P=H)}D>=5&&(m+=Nr.N1+(D-5))}return m}}Nr.N1=3,Nr.N2=3,Nr.N3=40,Nr.N4=10;class xx{constructor(u,h){this.width=u,this.height=h;const m=new Array(h);for(let y=0;y!==h;y++)m[y]=new Uint8Array(u);this.bytes=m}getHeight(){return this.height}getWidth(){return this.width}get(u,h){return this.bytes[h][u]}getArray(){return this.bytes}setNumber(u,h,m){this.bytes[h][u]=m}setBoolean(u,h,m){this.bytes[h][u]=m?1:0}clear(u){for(const h of this.bytes)N.fill(h,u)}equals(u){if(!(u instanceof xx))return!1;const h=u;if(this.width!==h.width||this.height!==h.height)return!1;for(let m=0,y=this.height;m<y;++m){const v=this.bytes[m],E=h.bytes[m];for(let T=0,D=this.width;T<D;++T)if(v[T]!==E[T])return!1}return!0}toString(){const u=new W;for(let h=0,m=this.height;h<m;++h){const y=this.bytes[h];for(let v=0,E=this.width;v<E;++v)switch(y[v]){case 0:u.append(" 0");break;case 1:u.append(" 1");break;default:u.append("  ");break}u.append(`
`)}return u.toString()}}class Gu{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const u=new W;return u.append(`<<
`),u.append(" mode: "),u.append(this.mode?this.mode.toString():"null"),u.append(`
 ecLevel: `),u.append(this.ecLevel?this.ecLevel.toString():"null"),u.append(`
 version: `),u.append(this.version?this.version.toString():"null"),u.append(`
 maskPattern: `),u.append(this.maskPattern.toString()),this.matrix?(u.append(`
 matrix:
`),u.append(this.matrix.toString())):u.append(`
 matrix: null
`),u.append(`>>
`),u.toString()}setMode(u){this.mode=u}setECLevel(u){this.ecLevel=u}setVersion(u){this.version=u}setMaskPattern(u){this.maskPattern=u}setMatrix(u){this.matrix=u}static isValidMaskPattern(u){return u>=0&&u<Gu.NUM_MASK_PATTERNS}}Gu.NUM_MASK_PATTERNS=8;class jn extends c{}jn.kind="WriterException";class _t{constructor(){}static clearMatrix(u){u.clear(255)}static buildMatrix(u,h,m,y,v){_t.clearMatrix(v),_t.embedBasicPatterns(m,v),_t.embedTypeInfo(h,y,v),_t.maybeEmbedVersionInfo(m,v),_t.embedDataBits(u,y,v)}static embedBasicPatterns(u,h){_t.embedPositionDetectionPatternsAndSeparators(h),_t.embedDarkDotAtLeftBottomCorner(h),_t.maybeEmbedPositionAdjustmentPatterns(u,h),_t.embedTimingPatterns(h)}static embedTypeInfo(u,h,m){const y=new I;_t.makeTypeInfoBits(u,h,y);for(let v=0,E=y.getSize();v<E;++v){const T=y.get(y.getSize()-1-v),D=_t.TYPE_INFO_COORDINATES[v],P=D[0],z=D[1];if(m.setBoolean(P,z,T),v<8){const H=m.getWidth()-v-1;m.setBoolean(H,8,T)}else{const K=m.getHeight()-7+(v-8);m.setBoolean(8,K,T)}}}static maybeEmbedVersionInfo(u,h){if(u.getVersionNumber()<7)return;const m=new I;_t.makeVersionInfoBits(u,m);let y=6*3-1;for(let v=0;v<6;++v)for(let E=0;E<3;++E){const T=m.get(y);y--,h.setBoolean(v,h.getHeight()-11+E,T),h.setBoolean(h.getHeight()-11+E,v,T)}}static embedDataBits(u,h,m){let y=0,v=-1,E=m.getWidth()-1,T=m.getHeight()-1;for(;E>0;){for(E===6&&(E-=1);T>=0&&T<m.getHeight();){for(let D=0;D<2;++D){const P=E-D;if(!_t.isEmpty(m.get(P,T)))continue;let z;y<u.getSize()?(z=u.get(y),++y):z=!1,h!==255&&Nr.getDataMaskBit(h,P,T)&&(z=!z),m.setBoolean(P,T,z)}T+=v}v=-v,T+=v,E-=2}if(y!==u.getSize())throw new jn("Not all bits consumed: "+y+"/"+u.getSize())}static findMSBSet(u){return 32-k.numberOfLeadingZeros(u)}static calculateBCHCode(u,h){if(h===0)throw new f("0 polynomial");const m=_t.findMSBSet(h);for(u<<=m-1;_t.findMSBSet(u)>=m;)u^=h<<_t.findMSBSet(u)-m;return u}static makeTypeInfoBits(u,h,m){if(!Gu.isValidMaskPattern(h))throw new jn("Invalid mask pattern");const y=u.getBits()<<3|h;m.appendBits(y,5);const v=_t.calculateBCHCode(y,_t.TYPE_INFO_POLY);m.appendBits(v,10);const E=new I;if(E.appendBits(_t.TYPE_INFO_MASK_PATTERN,15),m.xor(E),m.getSize()!==15)throw new jn("should not happen but we got: "+m.getSize())}static makeVersionInfoBits(u,h){h.appendBits(u.getVersionNumber(),6);const m=_t.calculateBCHCode(u.getVersionNumber(),_t.VERSION_INFO_POLY);if(h.appendBits(m,12),h.getSize()!==18)throw new jn("should not happen but we got: "+h.getSize())}static isEmpty(u){return u===255}static embedTimingPatterns(u){for(let h=8;h<u.getWidth()-8;++h){const m=(h+1)%2;_t.isEmpty(u.get(h,6))&&u.setNumber(h,6,m),_t.isEmpty(u.get(6,h))&&u.setNumber(6,h,m)}}static embedDarkDotAtLeftBottomCorner(u){if(u.get(8,u.getHeight()-8)===0)throw new jn;u.setNumber(8,u.getHeight()-8,1)}static embedHorizontalSeparationPattern(u,h,m){for(let y=0;y<8;++y){if(!_t.isEmpty(m.get(u+y,h)))throw new jn;m.setNumber(u+y,h,0)}}static embedVerticalSeparationPattern(u,h,m){for(let y=0;y<7;++y){if(!_t.isEmpty(m.get(u,h+y)))throw new jn;m.setNumber(u,h+y,0)}}static embedPositionAdjustmentPattern(u,h,m){for(let y=0;y<5;++y){const v=_t.POSITION_ADJUSTMENT_PATTERN[y];for(let E=0;E<5;++E)m.setNumber(u+E,h+y,v[E])}}static embedPositionDetectionPattern(u,h,m){for(let y=0;y<7;++y){const v=_t.POSITION_DETECTION_PATTERN[y];for(let E=0;E<7;++E)m.setNumber(u+E,h+y,v[E])}}static embedPositionDetectionPatternsAndSeparators(u){const h=_t.POSITION_DETECTION_PATTERN[0].length;_t.embedPositionDetectionPattern(0,0,u),_t.embedPositionDetectionPattern(u.getWidth()-h,0,u),_t.embedPositionDetectionPattern(0,u.getWidth()-h,u);const m=8;_t.embedHorizontalSeparationPattern(0,m-1,u),_t.embedHorizontalSeparationPattern(u.getWidth()-m,m-1,u),_t.embedHorizontalSeparationPattern(0,u.getWidth()-m,u);const y=7;_t.embedVerticalSeparationPattern(y,0,u),_t.embedVerticalSeparationPattern(u.getHeight()-y-1,0,u),_t.embedVerticalSeparationPattern(y,u.getHeight()-y,u)}static maybeEmbedPositionAdjustmentPatterns(u,h){if(u.getVersionNumber()<2)return;const m=u.getVersionNumber()-1,y=_t.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[m];for(let v=0,E=y.length;v!==E;v++){const T=y[v];if(T>=0)for(let D=0;D!==E;D++){const P=y[D];P>=0&&_t.isEmpty(h.get(P,T))&&_t.embedPositionAdjustmentPattern(P-2,T-2,h)}}}}_t.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),_t.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),_t.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),_t.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),_t.VERSION_INFO_POLY=7973,_t.TYPE_INFO_POLY=1335,_t.TYPE_INFO_MASK_PATTERN=21522;class vG{constructor(u,h){this.dataBytes=u,this.errorCorrectionBytes=h}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class er{constructor(){}static calculateMaskPenalty(u){return Nr.applyMaskPenaltyRule1(u)+Nr.applyMaskPenaltyRule2(u)+Nr.applyMaskPenaltyRule3(u)+Nr.applyMaskPenaltyRule4(u)}static encode(u,h,m=null){let y=er.DEFAULT_BYTE_MODE_ENCODING;const v=m!==null&&m.get(ss.CHARACTER_SET)!==void 0;v&&(y=m.get(ss.CHARACTER_SET).toString());const E=this.chooseMode(u,y),T=new I;if(E===$t.BYTE&&(v||er.DEFAULT_BYTE_MODE_ENCODING!==y)){const Je=M.getCharacterSetECIByName(y);Je!==void 0&&this.appendECI(Je,T)}this.appendModeInfo(E,T);const D=new I;this.appendBytes(u,E,D,y);let P;if(m!==null&&m.get(ss.QR_VERSION)!==void 0){const Je=Number.parseInt(m.get(ss.QR_VERSION).toString(),10);P=Tt.getVersionForNumber(Je);const Ke=this.calculateBitsNeeded(E,T,D,P);if(!this.willFit(Ke,P,h))throw new jn("Data too big for requested version")}else P=this.recommendVersion(h,E,T,D);const z=new I;z.appendBitArray(T);const H=E===$t.BYTE?D.getSizeInBytes():u.length;this.appendLengthInfo(H,P,E,z),z.appendBitArray(D);const K=P.getECBlocksForLevel(h),re=P.getTotalCodewords()-K.getTotalECCodewords();this.terminateBits(re,z);const le=this.interleaveWithECBytes(z,P.getTotalCodewords(),re,K.getNumBlocks()),fe=new Gu;fe.setECLevel(h),fe.setMode(E),fe.setVersion(P);const Ce=P.getDimensionForVersion(),Re=new xx(Ce,Ce),Ze=this.chooseMaskPattern(le,h,P,Re);return fe.setMaskPattern(Ze),_t.buildMatrix(le,h,P,Ze,Re),fe.setMatrix(Re),fe}static recommendVersion(u,h,m,y){const v=this.calculateBitsNeeded(h,m,y,Tt.getVersionForNumber(1)),E=this.chooseVersion(v,u),T=this.calculateBitsNeeded(h,m,y,E);return this.chooseVersion(T,u)}static calculateBitsNeeded(u,h,m,y){return h.getSize()+u.getCharacterCountBits(y)+m.getSize()}static getAlphanumericCode(u){return u<er.ALPHANUMERIC_TABLE.length?er.ALPHANUMERIC_TABLE[u]:-1}static chooseMode(u,h=null){if(M.SJIS.getName()===h&&this.isOnlyDoubleByteKanji(u))return $t.KANJI;let m=!1,y=!1;for(let v=0,E=u.length;v<E;++v){const T=u.charAt(v);if(er.isDigit(T))m=!0;else if(this.getAlphanumericCode(T.charCodeAt(0))!==-1)y=!0;else return $t.BYTE}return y?$t.ALPHANUMERIC:m?$t.NUMERIC:$t.BYTE}static isOnlyDoubleByteKanji(u){let h;try{h=V.encode(u,M.SJIS)}catch{return!1}const m=h.length;if(m%2!==0)return!1;for(let y=0;y<m;y+=2){const v=h[y]&255;if((v<129||v>159)&&(v<224||v>235))return!1}return!0}static chooseMaskPattern(u,h,m,y){let v=Number.MAX_SAFE_INTEGER,E=-1;for(let T=0;T<Gu.NUM_MASK_PATTERNS;T++){_t.buildMatrix(u,h,m,T,y);let D=this.calculateMaskPenalty(y);D<v&&(v=D,E=T)}return E}static chooseVersion(u,h){for(let m=1;m<=40;m++){const y=Tt.getVersionForNumber(m);if(er.willFit(u,y,h))return y}throw new jn("Data too big")}static willFit(u,h,m){const y=h.getTotalCodewords(),E=h.getECBlocksForLevel(m).getTotalECCodewords(),T=y-E,D=(u+7)/8;return T>=D}static terminateBits(u,h){const m=u*8;if(h.getSize()>m)throw new jn("data bits cannot fit in the QR Code"+h.getSize()+" > "+m);for(let E=0;E<4&&h.getSize()<m;++E)h.appendBit(!1);const y=h.getSize()&7;if(y>0)for(let E=y;E<8;E++)h.appendBit(!1);const v=u-h.getSizeInBytes();for(let E=0;E<v;++E)h.appendBits(E&1?17:236,8);if(h.getSize()!==m)throw new jn("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(u,h,m,y,v,E){if(y>=m)throw new jn("Block ID too large");const T=u%m,D=m-T,P=Math.floor(u/m),z=P+1,H=Math.floor(h/m),K=H+1,re=P-H,le=z-K;if(re!==le)throw new jn("EC bytes mismatch");if(m!==D+T)throw new jn("RS blocks mismatch");if(u!==(H+re)*D+(K+le)*T)throw new jn("Total bytes mismatch");y<D?(v[0]=H,E[0]=re):(v[0]=K,E[0]=le)}static interleaveWithECBytes(u,h,m,y){if(u.getSizeInBytes()!==m)throw new jn("Number of bits and data bytes does not match");let v=0,E=0,T=0;const D=new Array;for(let z=0;z<y;++z){const H=new Int32Array(1),K=new Int32Array(1);er.getNumDataBytesAndNumECBytesForBlockID(h,m,y,z,H,K);const re=H[0],le=new Uint8Array(re);u.toBytes(8*v,le,0,re);const fe=er.generateECBytes(le,K[0]);D.push(new vG(le,fe)),E=Math.max(E,re),T=Math.max(T,fe.length),v+=H[0]}if(m!==v)throw new jn("Data bytes does not match offset");const P=new I;for(let z=0;z<E;++z)for(const H of D){const K=H.getDataBytes();z<K.length&&P.appendBits(K[z],8)}for(let z=0;z<T;++z)for(const H of D){const K=H.getErrorCorrectionBytes();z<K.length&&P.appendBits(K[z],8)}if(h!==P.getSizeInBytes())throw new jn("Interleaving error: "+h+" and "+P.getSizeInBytes()+" differ.");return P}static generateECBytes(u,h){const m=u.length,y=new Int32Array(m+h);for(let E=0;E<m;E++)y[E]=u[E]&255;new tS(pe.QR_CODE_FIELD_256).encode(y,h);const v=new Uint8Array(h);for(let E=0;E<h;E++)v[E]=y[m+E];return v}static appendModeInfo(u,h){h.appendBits(u.getBits(),4)}static appendLengthInfo(u,h,m,y){const v=m.getCharacterCountBits(h);if(u>=1<<v)throw new jn(u+" is bigger than "+((1<<v)-1));y.appendBits(u,v)}static appendBytes(u,h,m,y){switch(h){case $t.NUMERIC:er.appendNumericBytes(u,m);break;case $t.ALPHANUMERIC:er.appendAlphanumericBytes(u,m);break;case $t.BYTE:er.append8BitBytes(u,m,y);break;case $t.KANJI:er.appendKanjiBytes(u,m);break;default:throw new jn("Invalid mode: "+h)}}static getDigit(u){return u.charCodeAt(0)-48}static isDigit(u){const h=er.getDigit(u);return h>=0&&h<=9}static appendNumericBytes(u,h){const m=u.length;let y=0;for(;y<m;){const v=er.getDigit(u.charAt(y));if(y+2<m){const E=er.getDigit(u.charAt(y+1)),T=er.getDigit(u.charAt(y+2));h.appendBits(v*100+E*10+T,10),y+=3}else if(y+1<m){const E=er.getDigit(u.charAt(y+1));h.appendBits(v*10+E,7),y+=2}else h.appendBits(v,4),y++}}static appendAlphanumericBytes(u,h){const m=u.length;let y=0;for(;y<m;){const v=er.getAlphanumericCode(u.charCodeAt(y));if(v===-1)throw new jn;if(y+1<m){const E=er.getAlphanumericCode(u.charCodeAt(y+1));if(E===-1)throw new jn;h.appendBits(v*45+E,11),y+=2}else h.appendBits(v,6),y++}}static append8BitBytes(u,h,m){let y;try{y=V.encode(u,m)}catch(v){throw new jn(v)}for(let v=0,E=y.length;v!==E;v++){const T=y[v];h.appendBits(T,8)}}static appendKanjiBytes(u,h){let m;try{m=V.encode(u,M.SJIS)}catch(v){throw new jn(v)}const y=m.length;for(let v=0;v<y;v+=2){const E=m[v]&255,T=m[v+1]&255,D=E<<8&4294967295|T;let P=-1;if(D>=33088&&D<=40956?P=D-33088:D>=57408&&D<=60351&&(P=D-49472),P===-1)throw new jn("Invalid byte sequence");const z=(P>>8)*192+(P&255);h.appendBits(z,13)}}static appendECI(u,h){h.appendBits($t.ECI.getBits(),4),h.appendBits(u.getValue(),8)}}er.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),er.DEFAULT_BYTE_MODE_ENCODING=M.UTF8.getName();class qu{write(u,h,m,y=null){if(u.length===0)throw new f("Found empty contents");if(h<0||m<0)throw new f("Requested dimensions are too small: "+h+"x"+m);let v=Kn.L,E=qu.QUIET_ZONE_SIZE;y!==null&&(y.get(ss.ERROR_CORRECTION)!==void 0&&(v=Kn.fromString(y.get(ss.ERROR_CORRECTION).toString())),y.get(ss.MARGIN)!==void 0&&(E=Number.parseInt(y.get(ss.MARGIN).toString(),10)));const T=er.encode(u,v,y);return this.renderResult(T,h,m,E)}writeToDom(u,h,m,y,v=null){typeof u=="string"&&(u=document.querySelector(u));const E=this.write(h,m,y,v);u&&u.appendChild(E)}renderResult(u,h,m,y){const v=u.getMatrix();if(v===null)throw new Ve;const E=v.getWidth(),T=v.getHeight(),D=E+y*2,P=T+y*2,z=Math.max(h,D),H=Math.max(m,P),K=Math.min(Math.floor(z/D),Math.floor(H/P)),re=Math.floor((z-E*K)/2),le=Math.floor((H-T*K)/2),fe=this.createSVGElement(z,H);for(let Ce=0,Re=le;Ce<T;Ce++,Re+=K)for(let Ze=0,Je=re;Ze<E;Ze++,Je+=K)if(v.get(Ze,Ce)===1){const Ke=this.createSvgRectElement(Je,Re,K,K);fe.appendChild(Ke)}return fe}createSVGElement(u,h){const m=document.createElementNS(qu.SVG_NS,"svg");return m.setAttributeNS(null,"height",u.toString()),m.setAttributeNS(null,"width",h.toString()),m}createSvgRectElement(u,h,m,y){const v=document.createElementNS(qu.SVG_NS,"rect");return v.setAttributeNS(null,"x",u.toString()),v.setAttributeNS(null,"y",h.toString()),v.setAttributeNS(null,"height",m.toString()),v.setAttributeNS(null,"width",y.toString()),v.setAttributeNS(null,"fill","#000000"),v}}qu.QUIET_ZONE_SIZE=4,qu.SVG_NS="http://www.w3.org/2000/svg";class Af{encode(u,h,m,y,v){if(u.length===0)throw new f("Found empty contents");if(h!==he.QR_CODE)throw new f("Can only encode QR_CODE, but got "+h);if(m<0||y<0)throw new f(`Requested dimensions are too small: ${m}x${y}`);let E=Kn.L,T=Af.QUIET_ZONE_SIZE;v!==null&&(v.get(ss.ERROR_CORRECTION)!==void 0&&(E=Kn.fromString(v.get(ss.ERROR_CORRECTION).toString())),v.get(ss.MARGIN)!==void 0&&(T=Number.parseInt(v.get(ss.MARGIN).toString(),10)));const D=er.encode(u,E,v);return Af.renderResult(D,m,y,T)}static renderResult(u,h,m,y){const v=u.getMatrix();if(v===null)throw new Ve;const E=v.getWidth(),T=v.getHeight(),D=E+y*2,P=T+y*2,z=Math.max(h,D),H=Math.max(m,P),K=Math.min(Math.floor(z/D),Math.floor(H/P)),re=Math.floor((z-E*K)/2),le=Math.floor((H-T*K)/2),fe=new q(z,H);for(let Ce=0,Re=le;Ce<T;Ce++,Re+=K)for(let Ze=0,Je=re;Ze<E;Ze++,Je+=K)v.get(Ze,Ce)===1&&fe.setRegion(Je,Re,K,K);return fe}}Af.QUIET_ZONE_SIZE=4;class CG{encode(u,h,m,y,v){let E;switch(h){case he.QR_CODE:E=new Af;break;default:throw new f("No encoder available for format "+h)}return E.encode(u,h,m,y,v)}}class qa extends J{constructor(u,h,m,y,v,E,T,D){if(super(E,T),this.yuvData=u,this.dataWidth=h,this.dataHeight=m,this.left=y,this.top=v,y+E>h||v+T>m)throw new f("Crop rectangle does not fit within image data.");D&&this.reverseHorizontal(E,T)}getRow(u,h){if(u<0||u>=this.getHeight())throw new f("Requested row is outside the image: "+u);const m=this.getWidth();(h==null||h.length<m)&&(h=new Uint8ClampedArray(m));const y=(u+this.top)*this.dataWidth+this.left;return b.arraycopy(this.yuvData,y,h,0,m),h}getMatrix(){const u=this.getWidth(),h=this.getHeight();if(u===this.dataWidth&&h===this.dataHeight)return this.yuvData;const m=u*h,y=new Uint8ClampedArray(m);let v=this.top*this.dataWidth+this.left;if(u===this.dataWidth)return b.arraycopy(this.yuvData,v,y,0,m),y;for(let E=0;E<h;E++){const T=E*u;b.arraycopy(this.yuvData,v,y,T,u),v+=this.dataWidth}return y}isCropSupported(){return!0}crop(u,h,m,y){return new qa(this.yuvData,this.dataWidth,this.dataHeight,this.left+u,this.top+h,m,y,!1)}renderThumbnail(){const u=this.getWidth()/qa.THUMBNAIL_SCALE_FACTOR,h=this.getHeight()/qa.THUMBNAIL_SCALE_FACTOR,m=new Int32Array(u*h),y=this.yuvData;let v=this.top*this.dataWidth+this.left;for(let E=0;E<h;E++){const T=E*u;for(let D=0;D<u;D++){const P=y[v+D*qa.THUMBNAIL_SCALE_FACTOR]&255;m[T+D]=4278190080|P*65793}v+=this.dataWidth*qa.THUMBNAIL_SCALE_FACTOR}return m}getThumbnailWidth(){return this.getWidth()/qa.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/qa.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(u,h){const m=this.yuvData;for(let y=0,v=this.top*this.dataWidth+this.left;y<h;y++,v+=this.dataWidth){const E=v+u/2;for(let T=v,D=v+u-1;T<E;T++,D--){const P=m[T];m[T]=m[D],m[D]=P}}}invert(){return new X(this)}}qa.THUMBNAIL_SCALE_FACTOR=2;class nS extends J{constructor(u,h,m,y,v,E,T){if(super(h,m),this.dataWidth=y,this.dataHeight=v,this.left=E,this.top=T,u.BYTES_PER_ELEMENT===4){const D=h*m,P=new Uint8ClampedArray(D);for(let z=0;z<D;z++){const H=u[z],K=H>>16&255,re=H>>7&510,le=H&255;P[z]=(K+re+le)/4&255}this.luminances=P}else this.luminances=u;if(y===void 0&&(this.dataWidth=h),v===void 0&&(this.dataHeight=m),E===void 0&&(this.left=0),T===void 0&&(this.top=0),this.left+h>this.dataWidth||this.top+m>this.dataHeight)throw new f("Crop rectangle does not fit within image data.")}getRow(u,h){if(u<0||u>=this.getHeight())throw new f("Requested row is outside the image: "+u);const m=this.getWidth();(h==null||h.length<m)&&(h=new Uint8ClampedArray(m));const y=(u+this.top)*this.dataWidth+this.left;return b.arraycopy(this.luminances,y,h,0,m),h}getMatrix(){const u=this.getWidth(),h=this.getHeight();if(u===this.dataWidth&&h===this.dataHeight)return this.luminances;const m=u*h,y=new Uint8ClampedArray(m);let v=this.top*this.dataWidth+this.left;if(u===this.dataWidth)return b.arraycopy(this.luminances,v,y,0,m),y;for(let E=0;E<h;E++){const T=E*u;b.arraycopy(this.luminances,v,y,T,u),v+=this.dataWidth}return y}isCropSupported(){return!0}crop(u,h,m,y){return new nS(this.luminances,m,y,this.dataWidth,this.dataHeight,this.left+u,this.top+h)}invert(){return new X(this)}}class N$ extends M{static forName(u){return this.getCharacterSetECIByName(u)}}class rS{}rS.ISO_8859_1=M.ISO8859_1;class E${isCompact(){return this.compact}setCompact(u){this.compact=u}getSize(){return this.size}setSize(u){this.size=u}getLayers(){return this.layers}setLayers(u){this.layers=u}getCodeWords(){return this.codeWords}setCodeWords(u){this.codeWords=u}getMatrix(){return this.matrix}setMatrix(u){this.matrix=u}}class I${static singletonList(u){return[u]}static min(u,h){return u.sort(h)[0]}}class SG{constructor(u){this.previous=u}getPrevious(){return this.previous}}class Rf extends SG{constructor(u,h,m){super(u),this.value=h,this.bitCount=m}appendTo(u,h){u.appendBits(this.value,this.bitCount)}add(u,h){return new Rf(this,u,h)}addBinaryShift(u,h){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new Rf(this,u,h)}toString(){let u=this.value&(1<<this.bitCount)-1;return u|=1<<this.bitCount,"<"+k.toBinaryString(u|1<<this.bitCount).substring(1)+">"}}class sS extends Rf{constructor(u,h,m){super(u,0,0),this.binaryShiftStart=h,this.binaryShiftByteCount=m}appendTo(u,h){for(let m=0;m<this.binaryShiftByteCount;m++)(m===0||m===31&&this.binaryShiftByteCount<=62)&&(u.appendBits(31,5),this.binaryShiftByteCount>62?u.appendBits(this.binaryShiftByteCount-31,16):m===0?u.appendBits(Math.min(this.binaryShiftByteCount,31),5):u.appendBits(this.binaryShiftByteCount-31,5)),u.appendBits(h[this.binaryShiftStart+m],8)}addBinaryShift(u,h){return new sS(this,u,h)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function NG(U,u,h){return new sS(U,u,h)}function rm(U,u,h){return new Rf(U,u,h)}const EG=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],Ic=0,yx=1,Ti=2,k$=3,Xa=4,IG=new Rf(null,0,0),oS=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function kG(U){for(let u of U)N.fill(u,-1);return U[Ic][Xa]=0,U[yx][Xa]=0,U[yx][Ic]=28,U[k$][Xa]=0,U[Ti][Xa]=0,U[Ti][Ic]=15,U}const T$=kG(N.createInt32Array(6,6));class Ka{constructor(u,h,m,y){this.token=u,this.mode=h,this.binaryShiftByteCount=m,this.bitCount=y}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(u,h){let m=this.bitCount,y=this.token;if(u!==this.mode){let E=oS[this.mode][u];y=rm(y,E&65535,E>>16),m+=E>>16}let v=u===Ti?4:5;return y=rm(y,h,v),new Ka(y,u,0,m+v)}shiftAndAppend(u,h){let m=this.token,y=this.mode===Ti?4:5;return m=rm(m,T$[this.mode][u],y),m=rm(m,h,5),new Ka(m,this.mode,0,this.bitCount+y+5)}addBinaryShiftChar(u){let h=this.token,m=this.mode,y=this.bitCount;if(this.mode===Xa||this.mode===Ti){let T=oS[m][Ic];h=rm(h,T&65535,T>>16),y+=T>>16,m=Ic}let v=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,E=new Ka(h,m,this.binaryShiftByteCount+1,y+v);return E.binaryShiftByteCount===2078&&(E=E.endBinaryShift(u+1)),E}endBinaryShift(u){if(this.binaryShiftByteCount===0)return this;let h=this.token;return h=NG(h,u-this.binaryShiftByteCount,this.binaryShiftByteCount),new Ka(h,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(u){let h=this.bitCount+(oS[this.mode][u.mode]>>16);return this.binaryShiftByteCount<u.binaryShiftByteCount?h+=Ka.calculateBinaryShiftCost(u)-Ka.calculateBinaryShiftCost(this):this.binaryShiftByteCount>u.binaryShiftByteCount&&u.binaryShiftByteCount>0&&(h+=10),h<=u.bitCount}toBitArray(u){let h=[];for(let y=this.endBinaryShift(u.length).token;y!==null;y=y.getPrevious())h.unshift(y);let m=new I;for(const y of h)y.appendTo(m,u);return m}toString(){return B.format("%s bits=%d bytes=%d",EG[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(u){return u.binaryShiftByteCount>62?21:u.binaryShiftByteCount>31?20:u.binaryShiftByteCount>0?10:0}}Ka.INITIAL_STATE=new Ka(IG,Ic,0,0);function TG(U){const u=B.getCharCode(" "),h=B.getCharCode("."),m=B.getCharCode(",");U[Ic][u]=1;const y=B.getCharCode("Z"),v=B.getCharCode("A");for(let K=v;K<=y;K++)U[Ic][K]=K-v+2;U[yx][u]=1;const E=B.getCharCode("z"),T=B.getCharCode("a");for(let K=T;K<=E;K++)U[yx][K]=K-T+2;U[Ti][u]=1;const D=B.getCharCode("9"),P=B.getCharCode("0");for(let K=P;K<=D;K++)U[Ti][K]=K-P+2;U[Ti][m]=12,U[Ti][h]=13;const z=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let K=0;K<z.length;K++)U[k$][B.getCharCode(z[K])]=K;const H=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let K=0;K<H.length;K++)B.getCharCode(H[K])>0&&(U[Xa][B.getCharCode(H[K])]=K);return U}const iS=TG(N.createInt32Array(5,256));class sm{constructor(u){this.text=u}encode(){const u=B.getCharCode(" "),h=B.getCharCode(`
`);let m=I$.singletonList(Ka.INITIAL_STATE);for(let v=0;v<this.text.length;v++){let E,T=v+1<this.text.length?this.text[v+1]:0;switch(this.text[v]){case B.getCharCode("\r"):E=T===h?2:0;break;case B.getCharCode("."):E=T===u?3:0;break;case B.getCharCode(","):E=T===u?4:0;break;case B.getCharCode(":"):E=T===u?5:0;break;default:E=0}E>0?(m=sm.updateStateListForPair(m,v,E),v++):m=this.updateStateListForChar(m,v)}return I$.min(m,(v,E)=>v.getBitCount()-E.getBitCount()).toBitArray(this.text)}updateStateListForChar(u,h){const m=[];for(let y of u)this.updateStateForChar(y,h,m);return sm.simplifyStates(m)}updateStateForChar(u,h,m){let y=this.text[h]&255,v=iS[u.getMode()][y]>0,E=null;for(let T=0;T<=Xa;T++){let D=iS[T][y];if(D>0){if(E==null&&(E=u.endBinaryShift(h)),!v||T===u.getMode()||T===Ti){const P=E.latchAndAppend(T,D);m.push(P)}if(!v&&T$[u.getMode()][T]>=0){const P=E.shiftAndAppend(T,D);m.push(P)}}}if(u.getBinaryShiftByteCount()>0||iS[u.getMode()][y]===0){let T=u.addBinaryShiftChar(h);m.push(T)}}static updateStateListForPair(u,h,m){const y=[];for(let v of u)this.updateStateForPair(v,h,m,y);return this.simplifyStates(y)}static updateStateForPair(u,h,m,y){let v=u.endBinaryShift(h);if(y.push(v.latchAndAppend(Xa,m)),u.getMode()!==Xa&&y.push(v.shiftAndAppend(Xa,m)),m===3||m===4){let E=v.latchAndAppend(Ti,16-m).latchAndAppend(Ti,1);y.push(E)}if(u.getBinaryShiftByteCount()>0){let E=u.addBinaryShiftChar(h).addBinaryShiftChar(h+1);y.push(E)}}static simplifyStates(u){let h=[];for(const m of u){let y=!0;for(const v of h){if(v.isBetterThanOrEqualTo(m)){y=!1;break}m.isBetterThanOrEqualTo(v)&&(h=h.filter(E=>E!==v))}y&&h.push(m)}return h}}class gn{constructor(){}static encodeBytes(u){return gn.encode(u,gn.DEFAULT_EC_PERCENT,gn.DEFAULT_AZTEC_LAYERS)}static encode(u,h,m){let y=new sm(u).encode(),v=k.truncDivision(y.getSize()*h,100)+11,E=y.getSize()+v,T,D,P,z,H;if(m!==gn.DEFAULT_AZTEC_LAYERS){if(T=m<0,D=Math.abs(m),D>(T?gn.MAX_NB_BITS_COMPACT:gn.MAX_NB_BITS))throw new f(B.format("Illegal value %s for layers",m));P=gn.totalBitsInLayer(D,T),z=gn.WORD_SIZE[D];let Ke=P-P%z;if(H=gn.stuffBits(y,z),H.getSize()+v>Ke)throw new f("Data to large for user specified layer");if(T&&H.getSize()>z*64)throw new f("Data to large for user specified layer")}else{z=0,H=null;for(let Ke=0;;Ke++){if(Ke>gn.MAX_NB_BITS)throw new f("Data too large for an Aztec code");if(T=Ke<=3,D=T?Ke+1:Ke,P=gn.totalBitsInLayer(D,T),E>P)continue;(H==null||z!==gn.WORD_SIZE[D])&&(z=gn.WORD_SIZE[D],H=gn.stuffBits(y,z));let on=P-P%z;if(!(T&&H.getSize()>z*64)&&H.getSize()+v<=on)break}}let K=gn.generateCheckWords(H,P,z),re=H.getSize()/z,le=gn.generateModeMessage(T,D,re),fe=(T?11:14)+D*4,Ce=new Int32Array(fe),Re;if(T){Re=fe;for(let Ke=0;Ke<Ce.length;Ke++)Ce[Ke]=Ke}else{Re=fe+1+2*k.truncDivision(k.truncDivision(fe,2)-1,15);let Ke=k.truncDivision(fe,2),on=k.truncDivision(Re,2);for(let Wt=0;Wt<Ke;Wt++){let To=Wt+k.truncDivision(Wt,15);Ce[Ke-Wt-1]=on-To-1,Ce[Ke+Wt]=on+To+1}}let Ze=new q(Re);for(let Ke=0,on=0;Ke<D;Ke++){let Wt=(D-Ke)*4+(T?9:12);for(let To=0;To<Wt;To++){let fa=To*2;for(let Ao=0;Ao<2;Ao++)K.get(on+fa+Ao)&&Ze.set(Ce[Ke*2+Ao],Ce[Ke*2+To]),K.get(on+Wt*2+fa+Ao)&&Ze.set(Ce[Ke*2+To],Ce[fe-1-Ke*2-Ao]),K.get(on+Wt*4+fa+Ao)&&Ze.set(Ce[fe-1-Ke*2-Ao],Ce[fe-1-Ke*2-To]),K.get(on+Wt*6+fa+Ao)&&Ze.set(Ce[fe-1-Ke*2-To],Ce[Ke*2+Ao])}on+=Wt*8}if(gn.drawModeMessage(Ze,T,Re,le),T)gn.drawBullsEye(Ze,k.truncDivision(Re,2),5);else{gn.drawBullsEye(Ze,k.truncDivision(Re,2),7);for(let Ke=0,on=0;Ke<k.truncDivision(fe,2)-1;Ke+=15,on+=16)for(let Wt=k.truncDivision(Re,2)&1;Wt<Re;Wt+=2)Ze.set(k.truncDivision(Re,2)-on,Wt),Ze.set(k.truncDivision(Re,2)+on,Wt),Ze.set(Wt,k.truncDivision(Re,2)-on),Ze.set(Wt,k.truncDivision(Re,2)+on)}let Je=new E$;return Je.setCompact(T),Je.setSize(Re),Je.setLayers(D),Je.setCodeWords(re),Je.setMatrix(Ze),Je}static drawBullsEye(u,h,m){for(let y=0;y<m;y+=2)for(let v=h-y;v<=h+y;v++)u.set(v,h-y),u.set(v,h+y),u.set(h-y,v),u.set(h+y,v);u.set(h-m,h-m),u.set(h-m+1,h-m),u.set(h-m,h-m+1),u.set(h+m,h-m),u.set(h+m,h-m+1),u.set(h+m,h+m-1)}static generateModeMessage(u,h,m){let y=new I;return u?(y.appendBits(h-1,2),y.appendBits(m-1,6),y=gn.generateCheckWords(y,28,4)):(y.appendBits(h-1,5),y.appendBits(m-1,11),y=gn.generateCheckWords(y,40,4)),y}static drawModeMessage(u,h,m,y){let v=k.truncDivision(m,2);if(h)for(let E=0;E<7;E++){let T=v-3+E;y.get(E)&&u.set(T,v-5),y.get(E+7)&&u.set(v+5,T),y.get(20-E)&&u.set(T,v+5),y.get(27-E)&&u.set(v-5,T)}else for(let E=0;E<10;E++){let T=v-5+E+k.truncDivision(E,5);y.get(E)&&u.set(T,v-7),y.get(E+10)&&u.set(v+7,T),y.get(29-E)&&u.set(T,v+7),y.get(39-E)&&u.set(v-7,T)}}static generateCheckWords(u,h,m){let y=u.getSize()/m,v=new tS(gn.getGF(m)),E=k.truncDivision(h,m),T=gn.bitsToWords(u,m,E);v.encode(T,E-y);let D=h%m,P=new I;P.appendBits(0,D);for(const z of Array.from(T))P.appendBits(z,m);return P}static bitsToWords(u,h,m){let y=new Int32Array(m),v,E;for(v=0,E=u.getSize()/h;v<E;v++){let T=0;for(let D=0;D<h;D++)T|=u.get(v*h+D)?1<<h-D-1:0;y[v]=T}return y}static getGF(u){switch(u){case 4:return pe.AZTEC_PARAM;case 6:return pe.AZTEC_DATA_6;case 8:return pe.AZTEC_DATA_8;case 10:return pe.AZTEC_DATA_10;case 12:return pe.AZTEC_DATA_12;default:throw new f("Unsupported word size "+u)}}static stuffBits(u,h){let m=new I,y=u.getSize(),v=(1<<h)-2;for(let E=0;E<y;E+=h){let T=0;for(let D=0;D<h;D++)(E+D>=y||u.get(E+D))&&(T|=1<<h-1-D);(T&v)===v?(m.appendBits(T&v,h),E--):T&v?m.appendBits(T,h):(m.appendBits(T|1,h),E--)}return m}static totalBitsInLayer(u,h){return((h?88:112)+16*u)*u}}gn.DEFAULT_EC_PERCENT=33,gn.DEFAULT_AZTEC_LAYERS=0,gn.MAX_NB_BITS=32,gn.MAX_NB_BITS_COMPACT=4,gn.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class bx{encode(u,h,m,y){return this.encodeWithHints(u,h,m,y,null)}encodeWithHints(u,h,m,y,v){let E=rS.ISO_8859_1,T=gn.DEFAULT_EC_PERCENT,D=gn.DEFAULT_AZTEC_LAYERS;return v!=null&&(v.has(ss.CHARACTER_SET)&&(E=N$.forName(v.get(ss.CHARACTER_SET).toString())),v.has(ss.ERROR_CORRECTION)&&(T=k.parseInt(v.get(ss.ERROR_CORRECTION).toString())),v.has(ss.AZTEC_LAYERS)&&(D=k.parseInt(v.get(ss.AZTEC_LAYERS).toString()))),bx.encodeLayers(u,h,m,y,E,T,D)}static encodeLayers(u,h,m,y,v,E,T){if(h!==he.AZTEC)throw new f("Can only encode AZTEC, but got "+h);let D=gn.encode(B.getBytes(u,v),E,T);return bx.renderResult(D,m,y)}static renderResult(u,h,m){let y=u.getMatrix();if(y==null)throw new Ve;let v=y.getWidth(),E=y.getHeight(),T=Math.max(h,v),D=Math.max(m,E),P=Math.min(T/v,D/E),z=(T-v*P)/2,H=(D-E*P)/2,K=new q(T,D);for(let re=0,le=H;re<E;re++,le+=P)for(let fe=0,Ce=z;fe<v;fe++,Ce+=P)y.get(fe,re)&&K.setRegion(Ce,le,P,P);return K}}n.AbstractExpandedDecoder=HC,n.ArgumentException=d,n.ArithmeticException=ke,n.AztecCode=E$,n.AztecCodeReader=Ct,n.AztecCodeWriter=bx,n.AztecDecoder=be,n.AztecDetector=Ot,n.AztecDetectorResult=It,n.AztecEncoder=gn,n.AztecHighLevelEncoder=sm,n.AztecPoint=ft,n.BarcodeFormat=he,n.Binarizer=x,n.BinaryBitmap=p,n.BitArray=I,n.BitMatrix=q,n.BitSource=KC,n.BrowserAztecCodeReader=cn,n.BrowserBarcodeReader=oG,n.BrowserCodeReader=ye,n.BrowserDatamatrixCodeReader=aG,n.BrowserMultiFormatReader=yG,n.BrowserPDF417Reader=bG,n.BrowserQRCodeReader=wG,n.BrowserQRCodeSvgWriter=qu,n.CharacterSetECI=M,n.ChecksumException=g,n.Code128Reader=Xe,n.Code39Reader=et,n.DataMatrixDecodedBitStreamParser=Cc,n.DataMatrixReader=Sc,n.DecodeHintType=$,n.DecoderResult=Oe,n.DefaultGridSampler=Ln,n.DetectorResult=He,n.EAN13Reader=zr,n.EncodeHintType=ss,n.Exception=c,n.FormatException=O,n.GenericGF=pe,n.GenericGFPoly=me,n.GlobalHistogramBinarizer=G,n.GridSampler=Vt,n.GridSamplerInstance=hn,n.HTMLCanvasElementLuminanceSource=ee,n.HybridBinarizer=Z,n.ITFReader=ut,n.IllegalArgumentException=f,n.IllegalStateException=Ve,n.InvertedLuminanceSource=X,n.LuminanceSource=J,n.MathUtils=je,n.MultiFormatOneDReader=kf,n.MultiFormatReader=S$,n.MultiFormatWriter=CG,n.NotFoundException=j,n.OneDReader=Bt,n.PDF417DecodedBitStreamParser=Ae,n.PDF417DecoderErrorCorrection=x$,n.PDF417Reader=$s,n.PDF417ResultMetadata=b$,n.PerspectiveTransform=Xt,n.PlanarYUVLuminanceSource=qa,n.QRCodeByteMatrix=xx,n.QRCodeDataMask=Ii,n.QRCodeDecodedBitStreamParser=hr,n.QRCodeDecoderErrorCorrectionLevel=Kn,n.QRCodeDecoderFormatInformation=Xs,n.QRCodeEncoder=er,n.QRCodeEncoderQRCode=Gu,n.QRCodeMaskUtil=Nr,n.QRCodeMatrixUtil=_t,n.QRCodeMode=$t,n.QRCodeReader=Nc,n.QRCodeVersion=Tt,n.QRCodeWriter=Af,n.RGBLuminanceSource=nS,n.RSS14Reader=Sr,n.RSSExpandedReader=Ge,n.ReaderException=gx,n.ReedSolomonDecoder=Fe,n.ReedSolomonEncoder=tS,n.ReedSolomonException=Pe,n.Result=ge,n.ResultMetadataType=ze,n.ResultPoint=ue,n.StringUtils=B,n.UnsupportedOperationException=_,n.VideoInputDevice=ne,n.WhiteRectangleDetector=ot,n.WriterException=jn,n.ZXingArrays=N,n.ZXingCharset=N$,n.ZXingInteger=k,n.ZXingStandardCharsets=rS,n.ZXingStringBuilder=W,n.ZXingStringEncoding=V,n.ZXingSystem=b,n.createAbstractExpandedDecoder=m$,Object.defineProperty(n,"__esModule",{value:!0})})})(jI,jI.exports);var nr=jI.exports;const YOe=mp(nr),ZOe=gk({__proto__:null,default:YOe},[nr]);var bP=function(){function t(e,n,r){if(this.formatMap=new Map([[pt.QR_CODE,nr.BarcodeFormat.QR_CODE],[pt.AZTEC,nr.BarcodeFormat.AZTEC],[pt.CODABAR,nr.BarcodeFormat.CODABAR],[pt.CODE_39,nr.BarcodeFormat.CODE_39],[pt.CODE_93,nr.BarcodeFormat.CODE_93],[pt.CODE_128,nr.BarcodeFormat.CODE_128],[pt.DATA_MATRIX,nr.BarcodeFormat.DATA_MATRIX],[pt.MAXICODE,nr.BarcodeFormat.MAXICODE],[pt.ITF,nr.BarcodeFormat.ITF],[pt.EAN_13,nr.BarcodeFormat.EAN_13],[pt.EAN_8,nr.BarcodeFormat.EAN_8],[pt.PDF_417,nr.BarcodeFormat.PDF_417],[pt.RSS_14,nr.BarcodeFormat.RSS_14],[pt.RSS_EXPANDED,nr.BarcodeFormat.RSS_EXPANDED],[pt.UPC_A,nr.BarcodeFormat.UPC_A],[pt.UPC_E,nr.BarcodeFormat.UPC_E],[pt.UPC_EAN_EXTENSION,nr.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!ZOe)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=n,this.logger=r;var s=this.createZXingFormats(e),o=new Map;o.set(nr.DecodeHintType.POSSIBLE_FORMATS,s),o.set(nr.DecodeHintType.TRY_HARDER,!1),this.hints=o}return t.prototype.decodeAsync=function(e){var n=this;return new Promise(function(r,s){try{r(n.decode(e))}catch(o){s(o)}})},t.prototype.decode=function(e){var n=new nr.MultiFormatReader(this.verbose,this.hints),r=new nr.HTMLCanvasElementLuminanceSource(e),s=new nr.BinaryBitmap(new nr.HybridBinarizer(r)),o=n.decode(s);return{text:o.text,format:bW.create(this.toHtml5QrcodeSupportedFormats(o.format)),debugData:this.createDebugData()}},t.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(n,r,s){e.set(n,r)}),e},t.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},t.prototype.createZXingFormats=function(e){for(var n=[],r=0,s=e;r<s.length;r++){var o=s[r];this.formatMap.has(o)?n.push(this.formatMap.get(o)):this.logger.logError("".concat(o," is not supported by")+"ZXingHtml5QrcodeShim")}return n},t.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},t}(),QOe=function(t,e,n,r){function s(o){return o instanceof n?o:new n(function(i){i(o)})}return new(n||(n=Promise))(function(o,i){function a(d){try{c(r.next(d))}catch(f){i(f)}}function l(d){try{c(r.throw(d))}catch(f){i(f)}}function c(d){d.done?o(d.value):s(d.value).then(a,l)}c((r=r.apply(t,e||[])).next())})},JOe=function(t,e){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,s,o,i;return i={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function a(c){return function(d){return l([c,d])}}function l(c){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(n=0)),n;)try{if(r=1,s&&(o=c[0]&2?s.return:c[0]?s.throw||((o=s.return)&&o.call(s),0):s.next)&&!(o=o.call(s,c[1])).done)return o;switch(s=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,s=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){n.label=c[1];break}if(c[0]===6&&n.label<o[1]){n.label=o[1],o=c;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(c);break}o[2]&&n.ops.pop(),n.trys.pop();continue}c=e.call(t,n)}catch(d){c=[6,d],s=0}finally{r=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},wP=function(){function t(e,n,r){if(this.formatMap=new Map([[pt.QR_CODE,"qr_code"],[pt.AZTEC,"aztec"],[pt.CODABAR,"codabar"],[pt.CODE_39,"code_39"],[pt.CODE_93,"code_93"],[pt.CODE_128,"code_128"],[pt.DATA_MATRIX,"data_matrix"],[pt.ITF,"itf"],[pt.EAN_13,"ean_13"],[pt.EAN_8,"ean_8"],[pt.PDF_417,"pdf417"],[pt.UPC_A,"upc_a"],[pt.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!t.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=n,this.logger=r;var s=this.createBarcodeDetectorFormats(e);if(this.detector=new BarcodeDetector(s),!this.detector)throw"BarcodeDetector detector not supported"}return t.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var e=new BarcodeDetector({formats:["qr_code"]});return typeof e<"u"},t.prototype.decodeAsync=function(e){return QOe(this,void 0,void 0,function(){var n,r;return JOe(this,function(s){switch(s.label){case 0:return[4,this.detector.detect(e)];case 1:if(n=s.sent(),!n||n.length===0)throw"No barcode or QR code detected.";return r=this.selectLargestBarcode(n),[2,{text:r.rawValue,format:bW.create(this.toHtml5QrcodeSupportedFormats(r.format)),debugData:this.createDebugData()}]}})})},t.prototype.selectLargestBarcode=function(e){for(var n=null,r=0,s=0,o=e;s<o.length;s++){var i=o[s],a=i.boundingBox.width*i.boundingBox.height;a>r&&(r=a,n=i)}if(!n)throw"No largest barcode found";return n},t.prototype.createBarcodeDetectorFormats=function(e){for(var n=[],r=0,s=e;r<s.length;r++){var o=s[r];this.formatMap.has(o)?n.push(this.formatMap.get(o)):this.logger.warn("".concat(o," is not supported by")+"BarcodeDetectorDelegate")}return{formats:n}},t.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},t.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(n,r,s){e.set(n,r)}),e},t.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},t}(),vP=function(t,e,n,r){function s(o){return o instanceof n?o:new n(function(i){i(o)})}return new(n||(n=Promise))(function(o,i){function a(d){try{c(r.next(d))}catch(f){i(f)}}function l(d){try{c(r.throw(d))}catch(f){i(f)}}function c(d){d.done?o(d.value):s(d.value).then(a,l)}c((r=r.apply(t,e||[])).next())})},CP=function(t,e){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,s,o,i;return i={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function a(c){return function(d){return l([c,d])}}function l(c){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(n=0)),n;)try{if(r=1,s&&(o=c[0]&2?s.return:c[0]?s.throw||((o=s.return)&&o.call(s),0):s.next)&&!(o=o.call(s,c[1])).done)return o;switch(s=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,s=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){n.label=c[1];break}if(c[0]===6&&n.label<o[1]){n.label=o[1],o=c;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(c);break}o[2]&&n.ops.pop(),n.trys.pop();continue}c=e.call(t,n)}catch(d){c=[6,d],s=0}finally{r=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},e4e=function(){function t(e,n,r,s){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=r,n&&wP.isSupported()?(this.primaryDecoder=new wP(e,r,s),this.secondaryDecoder=new bP(e,r,s)):this.primaryDecoder=new bP(e,r,s)}return t.prototype.decodeAsync=function(e){return vP(this,void 0,void 0,function(){var n;return CP(this,function(r){switch(r.label){case 0:n=performance.now(),r.label=1;case 1:return r.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(e)];case 2:return[2,r.sent()];case 3:return this.possiblyLogPerformance(n),[7];case 4:return[2]}})})},t.prototype.decodeRobustlyAsync=function(e){return vP(this,void 0,void 0,function(){var n,r;return CP(this,function(s){switch(s.label){case 0:n=performance.now(),s.label=1;case 1:return s.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(e)];case 2:return[2,s.sent()];case 3:if(r=s.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(e)];throw r;case 4:return this.possiblyLogPerformance(n),[7];case 5:return[2]}})})},t.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},t.prototype.possiblyLogPerformance=function(e){if(this.verbose){var n=performance.now()-e;this.executionResults.push(n),this.executions++,this.possiblyFlushPerformanceReport()}},t.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var e=0,n=0,r=this.executionResults;n<r.length;n++){var s=r[n];e+=s}var o=e/this.executionResults.length;console.log("".concat(o," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},t}(),dD=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,s){r.__proto__=s}||function(r,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(r[o]=s[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),iw=function(t,e,n,r){function s(o){return o instanceof n?o:new n(function(i){i(o)})}return new(n||(n=Promise))(function(o,i){function a(d){try{c(r.next(d))}catch(f){i(f)}}function l(d){try{c(r.throw(d))}catch(f){i(f)}}function c(d){d.done?o(d.value):s(d.value).then(a,l)}c((r=r.apply(t,e||[])).next())})},aw=function(t,e){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,s,o,i;return i={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function a(c){return function(d){return l([c,d])}}function l(c){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(n=0)),n;)try{if(r=1,s&&(o=c[0]&2?s.return:c[0]?s.throw||((o=s.return)&&o.call(s),0):s.next)&&!(o=o.call(s,c[1])).done)return o;switch(s=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,s=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){n.label=c[1];break}if(c[0]===6&&n.label<o[1]){n.label=o[1],o=c;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(c);break}o[2]&&n.ops.pop(),n.trys.pop();continue}c=e.call(t,n)}catch(d){c=[6,d],s=0}finally{r=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},vW=function(){function t(e,n){this.name=e,this.track=n}return t.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},t.prototype.apply=function(e){var n={};n[this.name]=e;var r={advanced:[n]};return this.track.applyConstraints(r)},t.prototype.value=function(){var e=this.track.getSettings();if(this.name in e){var n=e[this.name];return n}return null},t}(),t4e=function(t){dD(e,t);function e(n,r){return t.call(this,n,r)||this}return e.prototype.min=function(){return this.getCapabilities().min},e.prototype.max=function(){return this.getCapabilities().max},e.prototype.step=function(){return this.getCapabilities().step},e.prototype.apply=function(n){var r={};r[this.name]=n;var s={advanced:[r]};return this.track.applyConstraints(s)},e.prototype.getCapabilities=function(){this.failIfNotSupported();var n=this.track.getCapabilities(),r=n[this.name];return{min:r.min,max:r.max,step:r.step}},e.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},e}(vW),n4e=function(t){dD(e,t);function e(n){return t.call(this,"zoom",n)||this}return e}(t4e),r4e=function(t){dD(e,t);function e(n){return t.call(this,"torch",n)||this}return e}(vW),s4e=function(){function t(e){this.track=e}return t.prototype.zoomFeature=function(){return new n4e(this.track)},t.prototype.torchFeature=function(){return new r4e(this.track)},t}(),o4e=function(){function t(e,n,r){this.isClosed=!1,this.parentElement=e,this.mediaStream=n,this.callbacks=r,this.surface=this.createVideoElement(this.parentElement.clientWidth),e.append(this.surface)}return t.prototype.createVideoElement=function(e){var n=document.createElement("video");return n.style.width="".concat(e,"px"),n.style.display="block",n.muted=!0,n.setAttribute("muted","true"),n.playsInline=!0,n},t.prototype.setupSurface=function(){var e=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var n=function(){var r=e.surface.clientWidth,s=e.surface.clientHeight;e.callbacks.onRenderSurfaceReady(r,s),e.surface.removeEventListener("playing",n)};this.surface.addEventListener("playing",n),this.surface.srcObject=this.mediaStream,this.surface.play()},t.create=function(e,n,r,s){return iw(this,void 0,void 0,function(){var o,i;return aw(this,function(a){switch(a.label){case 0:return o=new t(e,n,s),r.aspectRatio?(i={aspectRatio:r.aspectRatio},[4,o.getFirstTrackOrFail().applyConstraints(i)]):[3,2];case 1:a.sent(),a.label=2;case 2:return o.setupSurface(),[2,o]}})})},t.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},t.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},t.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},t.prototype.resume=function(e){this.failIfClosed();var n=this,r=function(){setTimeout(e,200),n.surface.removeEventListener("playing",r)};this.surface.addEventListener("playing",r),this.surface.play()},t.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},t.prototype.getSurface=function(){return this.failIfClosed(),this.surface},t.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},t.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},t.prototype.applyVideoConstraints=function(e){return iw(this,void 0,void 0,function(){return aw(this,function(n){if("aspectRatio"in e)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(e)]})})},t.prototype.close=function(){if(this.isClosed)return Promise.resolve();var e=this;return new Promise(function(n,r){var s=e.mediaStream.getVideoTracks(),o=s.length,i=0;e.mediaStream.getVideoTracks().forEach(function(a){e.mediaStream.removeTrack(a),a.stop(),++i,i>=o&&(e.isClosed=!0,e.parentElement.removeChild(e.surface),n())})})},t.prototype.getCapabilities=function(){return new s4e(this.getFirstTrackOrFail())},t}(),i4e=function(){function t(e){this.mediaStream=e}return t.prototype.render=function(e,n,r){return iw(this,void 0,void 0,function(){return aw(this,function(s){return[2,o4e.create(e,this.mediaStream,n,r)]})})},t.create=function(e){return iw(this,void 0,void 0,function(){var n,r;return aw(this,function(s){switch(s.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return n={audio:!1,video:e},[4,navigator.mediaDevices.getUserMedia(n)];case 1:return r=s.sent(),[2,new t(r)]}})})},t}(),SP=function(t,e,n,r){function s(o){return o instanceof n?o:new n(function(i){i(o)})}return new(n||(n=Promise))(function(o,i){function a(d){try{c(r.next(d))}catch(f){i(f)}}function l(d){try{c(r.throw(d))}catch(f){i(f)}}function c(d){d.done?o(d.value):s(d.value).then(a,l)}c((r=r.apply(t,e||[])).next())})},NP=function(t,e){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,s,o,i;return i={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function a(c){return function(d){return l([c,d])}}function l(c){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(n=0)),n;)try{if(r=1,s&&(o=c[0]&2?s.return:c[0]?s.throw||((o=s.return)&&o.call(s),0):s.next)&&!(o=o.call(s,c[1])).done)return o;switch(s=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,s=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){n.label=c[1];break}if(c[0]===6&&n.label<o[1]){n.label=o[1],o=c;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(c);break}o[2]&&n.ops.pop(),n.trys.pop();continue}c=e.call(t,n)}catch(d){c=[6,d],s=0}finally{r=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},a4e=function(){function t(){}return t.failIfNotSupported=function(){return SP(this,void 0,void 0,function(){return NP(this,function(e){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new t]})})},t.prototype.create=function(e){return SP(this,void 0,void 0,function(){return NP(this,function(n){return[2,i4e.create(e)]})})},t}(),l4e=function(t,e,n,r){function s(o){return o instanceof n?o:new n(function(i){i(o)})}return new(n||(n=Promise))(function(o,i){function a(d){try{c(r.next(d))}catch(f){i(f)}}function l(d){try{c(r.throw(d))}catch(f){i(f)}}function c(d){d.done?o(d.value):s(d.value).then(a,l)}c((r=r.apply(t,e||[])).next())})},c4e=function(t,e){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,s,o,i;return i={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function a(c){return function(d){return l([c,d])}}function l(c){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(n=0)),n;)try{if(r=1,s&&(o=c[0]&2?s.return:c[0]?s.throw||((o=s.return)&&o.call(s),0):s.next)&&!(o=o.call(s,c[1])).done)return o;switch(s=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,s=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){n.label=c[1];break}if(c[0]===6&&n.label<o[1]){n.label=o[1],o=c;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(c);break}o[2]&&n.ops.pop(),n.trys.pop();continue}c=e.call(t,n)}catch(d){c=[6,d],s=0}finally{r=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},u4e=function(){function t(){}return t.retrieve=function(){if(navigator.mediaDevices)return t.getCamerasFromMediaDevices();var e=MediaStreamTrack;return MediaStreamTrack&&e.getSources?t.getCamerasFromMediaStreamTrack():t.rejectWithError()},t.rejectWithError=function(){var e=fh.unableToQuerySupportedDevices();return t.isHttpsOrLocalhost()||(e=fh.insecureContextCameraQueryError()),Promise.reject(e)},t.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var e=location.host.split(":")[0];return e==="127.0.0.1"||e==="localhost"},t.getCamerasFromMediaDevices=function(){return l4e(this,void 0,void 0,function(){var e,n,r,s,o,i,a;return c4e(this,function(l){switch(l.label){case 0:return e=function(c){for(var d=c.getVideoTracks(),f=0,p=d;f<p.length;f++){var g=p[f];g.enabled=!1,g.stop(),c.removeTrack(g)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return n=l.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(r=l.sent(),s=[],o=0,i=r;o<i.length;o++)a=i[o],a.kind==="videoinput"&&s.push({id:a.deviceId,label:a.label});return e(n),[2,s]}})})},t.getCamerasFromMediaStreamTrack=function(){return new Promise(function(e,n){var r=function(o){for(var i=[],a=0,l=o;a<l.length;a++){var c=l[a];c.kind==="video"&&i.push({id:c.id,label:c.label})}e(i)},s=MediaStreamTrack;s.getSources(r)})},t}(),kr;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.NOT_STARTED=1]="NOT_STARTED",t[t.SCANNING=2]="SCANNING",t[t.PAUSED=3]="PAUSED"})(kr||(kr={}));var d4e=function(){function t(){this.state=kr.NOT_STARTED,this.onGoingTransactionNewState=kr.UNKNOWN}return t.prototype.directTransition=function(e){this.failIfTransitionOngoing(),this.validateTransition(e),this.state=e},t.prototype.startTransition=function(e){return this.failIfTransitionOngoing(),this.validateTransition(e),this.onGoingTransactionNewState=e,this},t.prototype.execute=function(){if(this.onGoingTransactionNewState===kr.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var e=this.onGoingTransactionNewState;this.onGoingTransactionNewState=kr.UNKNOWN,this.directTransition(e)},t.prototype.cancel=function(){if(this.onGoingTransactionNewState===kr.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=kr.UNKNOWN},t.prototype.getState=function(){return this.state},t.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==kr.UNKNOWN)throw"Cannot transition to a new state, already under transition"},t.prototype.validateTransition=function(e){switch(this.state){case kr.UNKNOWN:throw"Transition from unknown is not allowed";case kr.NOT_STARTED:this.failIfNewStateIs(e,[kr.PAUSED]);break;case kr.SCANNING:break;case kr.PAUSED:break}},t.prototype.failIfNewStateIs=function(e,n){for(var r=0,s=n;r<s.length;r++){var o=s[r];if(e===o)throw"Cannot transition from ".concat(this.state," to ").concat(e)}},t}(),f4e=function(){function t(e){this.stateManager=e}return t.prototype.startTransition=function(e){return this.stateManager.startTransition(e)},t.prototype.directTransition=function(e){this.stateManager.directTransition(e)},t.prototype.getState=function(){return this.stateManager.getState()},t.prototype.canScanFile=function(){return this.stateManager.getState()===kr.NOT_STARTED},t.prototype.isScanning=function(){return this.stateManager.getState()!==kr.NOT_STARTED},t.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===kr.SCANNING},t.prototype.isPaused=function(){return this.stateManager.getState()===kr.PAUSED},t}(),h4e=function(){function t(){}return t.create=function(){return new f4e(new d4e)},t}(),p4e=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,s){r.__proto__=s}||function(r,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(r[o]=s[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),ai=function(t){p4e(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.DEFAULT_WIDTH=300,e.DEFAULT_WIDTH_OFFSET=2,e.FILE_SCAN_MIN_HEIGHT=300,e.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,e.MIN_QR_BOX_SIZE=50,e.SHADED_LEFT=1,e.SHADED_RIGHT=2,e.SHADED_TOP=3,e.SHADED_BOTTOM=4,e.SHADED_REGION_ELEMENT_ID="qr-shaded-region",e.VERBOSE=!1,e.BORDER_SHADER_DEFAULT_COLOR="#ffffff",e.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",e}(qOe),m4e=function(){function t(e,n){this.logger=n,this.fps=ai.SCAN_DEFAULT_FPS,e?(e.fps&&(this.fps=e.fps),this.disableFlip=e.disableFlip===!0,this.qrbox=e.qrbox,this.aspectRatio=e.aspectRatio,this.videoConstraints=e.videoConstraints):this.disableFlip=ai.DEFAULT_DISABLE_FLIP}return t.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?wW.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},t.prototype.isShadedBoxEnabled=function(){return!Ml(this.qrbox)},t.create=function(e,n){return new t(e,n)},t}(),g4e=function(){function t(e,n){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(e))throw"HTML Element with id=".concat(e," not found");this.elementId=e,this.verbose=!1;var r;typeof n=="boolean"?this.verbose=n===!0:n&&(r=n,this.verbose=r.verbose===!0,r.experimentalFeatures),this.logger=new KOe(this.verbose),this.qrcode=new e4e(this.getSupportedFormats(n),this.getUseBarCodeDetectorIfSupported(r),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=h4e.create()}return t.prototype.start=function(e,n,r,s){var o=this;if(!e)throw"cameraIdOrConfig is required";if(!r||typeof r!="function")throw"qrCodeSuccessCallback is required and should be a function.";var i;s?i=s:i=this.verbose?this.logger.log:function(){};var a=m4e.create(n,this.logger);this.clearElement();var l=!1;a.videoConstraints&&(a.isMediaStreamConstraintsValid()?l=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var c=l,d=document.getElementById(this.elementId);d.clientWidth?d.clientWidth:ai.DEFAULT_WIDTH,d.style.position="relative",this.shouldScan=!0,this.element=d;var f=this,p=this.stateManagerProxy.startTransition(kr.SCANNING);return new Promise(function(g,x){var b=c?a.videoConstraints:f.createVideoConstraints(e);if(!b){p.cancel(),x("videoConstraints should be defined");return}var w={};(!c||a.aspectRatio)&&(w.aspectRatio=a.aspectRatio);var C={onRenderSurfaceReady:function(N,k){f.setupUi(N,k,a),f.isScanning=!0,f.foreverScan(a,r,i)}};a4e.failIfNotSupported().then(function(N){N.create(b).then(function(k){return k.render(o.element,w,C).then(function(I){f.renderedCamera=I,p.execute(),g(null)}).catch(function(I){p.cancel(),x(I)})}).catch(function(k){p.cancel(),x(fh.errorGettingUserMedia(k))})}).catch(function(N){p.cancel(),x(fh.cameraStreamingNotSupported())})})},t.prototype.pause=function(e){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(kr.PAUSED),this.showPausedState(),(Ml(e)||e!==!0)&&(e=!1),e&&this.renderedCamera&&this.renderedCamera.pause()},t.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var e=this,n=function(){e.stateManagerProxy.directTransition(kr.SCANNING),e.hidePausedState()};if(!this.renderedCamera.isPaused()){n();return}this.renderedCamera.resume(function(){n()})},t.prototype.getState=function(){return this.stateManagerProxy.getState()},t.prototype.stop=function(){var e=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var n=this.stateManagerProxy.startTransition(kr.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var r=function(){if(e.element){var o=document.getElementById(ai.SHADED_REGION_ELEMENT_ID);o&&e.element.removeChild(o)}},s=this;return this.renderedCamera.close().then(function(){return s.renderedCamera=null,s.element&&(s.element.removeChild(s.canvasElement),s.canvasElement=null),r(),s.qrRegion&&(s.qrRegion=null),s.context&&(s.context=null),n.execute(),s.hidePausedState(),s.isScanning=!1,Promise.resolve()})},t.prototype.scanFile=function(e,n){return this.scanFileV2(e,n).then(function(r){return r.decodedText})},t.prototype.scanFileV2=function(e,n){var r=this;if(!e||!(e instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(Ml(n)&&(n=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(s,o){r.possiblyCloseLastScanImageFile(),r.clearElement(),r.lastScanImageFile=URL.createObjectURL(e);var i=new Image;i.onload=function(){var a=i.width,l=i.height,c=document.getElementById(r.elementId),d=c.clientWidth?c.clientWidth:ai.DEFAULT_WIDTH,f=Math.max(c.clientHeight?c.clientHeight:l,ai.FILE_SCAN_MIN_HEIGHT),p=r.computeCanvasDrawConfig(a,l,d,f);if(n){var g=r.createCanvasElement(d,f,"qr-canvas-visible");g.style.display="inline-block",c.appendChild(g);var x=g.getContext("2d");if(!x)throw"Unable to get 2d context from canvas";x.canvas.width=d,x.canvas.height=f,x.drawImage(i,0,0,a,l,p.x,p.y,p.width,p.height)}var b=ai.FILE_SCAN_HIDDEN_CANVAS_PADDING,w=Math.max(i.width,p.width),C=Math.max(i.height,p.height),N=w+2*b,k=C+2*b,I=r.createCanvasElement(N,k);c.appendChild(I);var R=I.getContext("2d");if(!R)throw"Unable to get 2d context from canvas";R.canvas.width=N,R.canvas.height=k,R.drawImage(i,0,0,a,l,b,b,w,C);try{r.qrcode.decodeRobustlyAsync(I).then(function($){s(yP.createFromQrcodeResult($))}).catch(o)}catch($){o("QR code parse error, error = ".concat($))}},i.onerror=o,i.onabort=o,i.onstalled=o,i.onsuspend=o,i.src=URL.createObjectURL(e)})},t.prototype.clear=function(){this.clearElement()},t.getCameras=function(){return u4e.retrieve()},t.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},t.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},t.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},t.prototype.applyVideoConstraints=function(e){if(e){if(!wW.isMediaStreamConstraintsValid(e,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(e)},t.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},t.prototype.getSupportedFormats=function(e){var n=[pt.QR_CODE,pt.AZTEC,pt.CODABAR,pt.CODE_39,pt.CODE_93,pt.CODE_128,pt.DATA_MATRIX,pt.MAXICODE,pt.ITF,pt.EAN_13,pt.EAN_8,pt.PDF_417,pt.RSS_14,pt.RSS_EXPANDED,pt.UPC_A,pt.UPC_E,pt.UPC_EAN_EXTENSION];if(!e||typeof e=="boolean"||!e.formatsToSupport)return n;if(!Array.isArray(e.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(e.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var r=[],s=0,o=e.formatsToSupport;s<o.length;s++){var i=o[s];GOe(i)?r.push(i):this.logger.warn("Invalid format: ".concat(i," passed in config, ignoring."))}if(r.length===0)throw"None of formatsToSupport match supported values.";return r},t.prototype.getUseBarCodeDetectorIfSupported=function(e){if(Ml(e))return!0;if(!Ml(e.useBarCodeDetectorIfSupported))return e.useBarCodeDetectorIfSupported!==!1;if(Ml(e.experimentalFeatures))return!0;var n=e.experimentalFeatures;return Ml(n.useBarCodeDetectorIfSupported)?!0:n.useBarCodeDetectorIfSupported!==!1},t.prototype.validateQrboxSize=function(e,n,r){var s=this,o=r.qrbox;this.validateQrboxConfig(o);var i=this.toQrdimensions(e,n,o),a=function(c){if(c<ai.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(ai.MIN_QR_BOX_SIZE,"px.")},l=function(c){return c>e&&(s.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),c=e),c};a(i.width),a(i.height),i.width=l(i.width)},t.prototype.validateQrboxConfig=function(e){if(typeof e!="number"&&typeof e!="function"&&(e.width===void 0||e.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},t.prototype.toQrdimensions=function(e,n,r){if(typeof r=="number")return{width:r,height:r};if(typeof r=="function")try{return r(e,n)}catch(s){throw new Error("qrbox config was passed as a function but it failed with unknown error"+s)}return r},t.prototype.setupUi=function(e,n,r){r.isShadedBoxEnabled()&&this.validateQrboxSize(e,n,r);var s=Ml(r.qrbox)?{width:e,height:n}:r.qrbox;this.validateQrboxConfig(s);var o=this.toQrdimensions(e,n,s);o.height>n&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var i=r.isShadedBoxEnabled()&&o.height<=n,a={x:0,y:0,width:e,height:n},l=i?this.getShadedRegionBounds(e,n,o):a,c=this.createCanvasElement(l.width,l.height),d={willReadFrequently:!0},f=c.getContext("2d",d);f.canvas.width=l.width,f.canvas.height=l.height,this.element.append(c),i&&this.possiblyInsertShadingElement(this.element,e,n,o),this.createScannerPausedUiElement(this.element),this.qrRegion=l,this.context=f,this.canvasElement=c},t.prototype.createScannerPausedUiElement=function(e){var n=document.createElement("div");n.innerText=fh.scannerPaused(),n.style.display="none",n.style.position="absolute",n.style.top="0px",n.style.zIndex="1",n.style.background="rgba(9, 9, 9, 0.46)",n.style.color="#FFECEC",n.style.textAlign="center",n.style.width="100%",e.appendChild(n),this.scannerPausedUiElement=n},t.prototype.scanContext=function(e,n){var r=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(s){return e(s.text,yP.createFromQrcodeResult(s)),r.possiblyUpdateShaders(!0),!0}).catch(function(s){r.possiblyUpdateShaders(!1);var o=fh.codeParseError(s);return n(o,XOe.createFrom(o)),!1})},t.prototype.foreverScan=function(e,n,r){var s=this;if(this.shouldScan&&this.renderedCamera){var o=this.renderedCamera.getSurface(),i=o.videoWidth/o.clientWidth,a=o.videoHeight/o.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var l=this.qrRegion.width*i,c=this.qrRegion.height*a,d=this.qrRegion.x*i,f=this.qrRegion.y*a;this.context.drawImage(o,d,f,l,c,0,0,this.qrRegion.width,this.qrRegion.height);var p=function(){s.foreverScanTimeout=setTimeout(function(){s.foreverScan(e,n,r)},s.getTimeoutFps(e.fps))};this.scanContext(n,r).then(function(g){!g&&e.disableFlip!==!0?(s.context.translate(s.context.canvas.width,0),s.context.scale(-1,1),s.scanContext(n,r).finally(function(){p()})):p()}).catch(function(g){s.logger.logError("Error happend while scanning context",g),p()})}},t.prototype.createVideoConstraints=function(e){if(typeof e=="string")return{deviceId:{exact:e}};if(typeof e=="object"){var n="facingMode",r="deviceId",s={user:!0,environment:!0},o="exact",i=function(x){if(x in s)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(x,"'")},a=Object.keys(e);if(a.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(a.length," keys");var l=Object.keys(e)[0];if(l!==n&&l!==r)throw"Only '".concat(n,"' and '").concat(r,"' ")+" are supported for 'cameraIdOrConfig'";if(l===n){var c=e.facingMode;if(typeof c=="string"){if(i(c))return{facingMode:c}}else if(typeof c=="object")if(o in c){if(i(c["".concat(o)]))return{facingMode:{exact:c["".concat(o)]}}}else throw"'facingMode' should be string or object with"+" ".concat(o," as key.");else{var d=typeof c;throw"Invalid type of 'facingMode' = ".concat(d)}}else{var f=e.deviceId;if(typeof f=="string")return{deviceId:f};if(typeof f=="object"){if(o in f)return{deviceId:{exact:f["".concat(o)]}};throw"'deviceId' should be string or object with"+" ".concat(o," as key.")}else{var p=typeof f;throw"Invalid type of 'deviceId' = ".concat(p)}}}var g=typeof e;throw"Invalid type of 'cameraIdOrConfig' = ".concat(g)},t.prototype.computeCanvasDrawConfig=function(e,n,r,s){if(e<=r&&n<=s){var o=(r-e)/2,i=(s-n)/2;return{x:o,y:i,width:e,height:n}}else{var a=e,l=n;return e>r&&(n=r/e*n,e=r),n>s&&(e=s/n*e,n=s),this.logger.log("Image downsampled from "+"".concat(a,"X").concat(l)+" to ".concat(e,"X").concat(n,".")),this.computeCanvasDrawConfig(e,n,r,s)}},t.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var e=document.getElementById(this.elementId);e&&(e.innerHTML="")},t.prototype.possiblyUpdateShaders=function(e){this.qrMatch!==e&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(n){n.style.backgroundColor=e?ai.BORDER_SHADER_MATCH_COLOR:ai.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=e)},t.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},t.prototype.createCanvasElement=function(e,n,r){var s=e,o=n,i=document.createElement("canvas");return i.style.width="".concat(s,"px"),i.style.height="".concat(o,"px"),i.style.display="none",i.id=Ml(r)?"qr-canvas":r,i},t.prototype.getShadedRegionBounds=function(e,n,r){if(r.width>e||r.height>n)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(e-r.width)/2,y:(n-r.height)/2,width:r.width,height:r.height}},t.prototype.possiblyInsertShadingElement=function(e,n,r,s){if(!(n-s.width<1||r-s.height<1)){var o=document.createElement("div");o.style.position="absolute";var i=(n-s.width)/2,a=(r-s.height)/2;if(o.style.borderLeft="".concat(i,"px solid rgba(0, 0, 0, 0.48)"),o.style.borderRight="".concat(i,"px solid rgba(0, 0, 0, 0.48)"),o.style.borderTop="".concat(a,"px solid rgba(0, 0, 0, 0.48)"),o.style.borderBottom="".concat(a,"px solid rgba(0, 0, 0, 0.48)"),o.style.boxSizing="border-box",o.style.top="0px",o.style.bottom="0px",o.style.left="0px",o.style.right="0px",o.id="".concat(ai.SHADED_REGION_ELEMENT_ID),n-s.width<11||r-s.height<11)this.hasBorderShaders=!1;else{var l=5,c=40;this.insertShaderBorders(o,c,l,-l,null,0,!0),this.insertShaderBorders(o,c,l,-l,null,0,!1),this.insertShaderBorders(o,c,l,null,-l,0,!0),this.insertShaderBorders(o,c,l,null,-l,0,!1),this.insertShaderBorders(o,l,c+l,-l,null,-l,!0),this.insertShaderBorders(o,l,c+l,null,-l,-l,!0),this.insertShaderBorders(o,l,c+l,-l,null,-l,!1),this.insertShaderBorders(o,l,c+l,null,-l,-l,!1),this.hasBorderShaders=!0}e.append(o)}},t.prototype.insertShaderBorders=function(e,n,r,s,o,i,a){var l=document.createElement("div");l.style.position="absolute",l.style.backgroundColor=ai.BORDER_SHADER_DEFAULT_COLOR,l.style.width="".concat(n,"px"),l.style.height="".concat(r,"px"),s!==null&&(l.style.top="".concat(s,"px")),o!==null&&(l.style.bottom="".concat(o,"px")),a?l.style.left="".concat(i,"px"):l.style.right="".concat(i,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(l),e.appendChild(l)},t.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},t.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},t.prototype.getTimeoutFps=function(e){return 1e3/e},t}(),EP;(function(t){t[t.STATUS_DEFAULT=0]="STATUS_DEFAULT",t[t.STATUS_SUCCESS=1]="STATUS_SUCCESS",t[t.STATUS_WARNING=2]="STATUS_WARNING",t[t.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(EP||(EP={}));const x4e=()=>{const[t,e]=A.useState(!1),[n,r]=A.useState(null),[s,o]=A.useState(null),[i,a]=A.useState(!1),[l,c]=A.useState(null);A.useEffect(()=>(!t&&n&&n.isScanning&&n.stop().catch(w=>console.error("Error stopping scanner:",w)),()=>{n&&n.isScanning&&n.stop().catch(w=>console.error("Error stopping scanner:",w))}),[t,n]);const d=()=>{e(!0),o(null),c(null),setTimeout(()=>{try{const w=new g4e("reader");r(w);const C={fps:10,qrbox:{width:250,height:250}};w.start({facingMode:"environment"},C,p,g).catch(N=>{Rt.error("Failed to start camera. Please check camera permissions."),console.error("Error starting scanner:",N),e(!1)})}catch(w){console.error("Error initializing scanner:",w),Rt.error("Could not initialize scanner"),e(!1)}},500)},f=()=>{n&&n.isScanning&&n.stop().then(()=>{e(!1)}).catch(w=>{console.error("Error stopping scanner:",w),e(!1)})},p=async w=>{n&&n.isScanning&&(await n.stop(),e(!1)),o(w),x(w)},g=w=>{console.warn("QR code scan error:",w)},x=async w=>{var C,N;a(!0);try{const k=await yt.post("/api/events/verify-attendance",{qrCodeData:w});Rt.success(k.data.message),c(k.data.event)}catch(k){console.error("Error processing QR code:",k),Rt.error(((N=(C=k.response)==null?void 0:C.data)==null?void 0:N.message)||"Failed to process QR code"),o(null)}finally{a(!1)}},b=w=>{if(!w)return"";const C=new Date(w),N={weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"};return C.toLocaleString(void 0,N)};return S.jsxs("div",{className:"bg-white shadow overflow-hidden sm:rounded-lg",children:[S.jsx("div",{className:"px-4 py-5 sm:px-6 flex justify-between items-center",children:S.jsxs("h3",{className:"text-lg leading-6 font-medium text-gray-900 flex items-center",children:[S.jsx(dg,{className:"h-5 w-5 mr-2 text-indigo-500"}),"QR Code Scanner"]})}),S.jsxs("div",{className:"border-t border-gray-200 px-4 py-5 sm:p-6",children:[!t&&!s&&S.jsxs("div",{className:"text-center",children:[S.jsx(dg,{className:"mx-auto h-12 w-12 text-indigo-400"}),S.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No QR code scanned yet"}),S.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Scan a QR code to mark your attendance for an event"}),S.jsx("div",{className:"mt-6",children:S.jsxs("button",{type:"button",onClick:d,className:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:[S.jsx(dg,{className:"-ml-1 mr-2 h-5 w-5"}),"Start Scanning"]})})]}),t&&S.jsxs("div",{className:"text-center",children:[S.jsx("div",{id:"reader",className:"mx-auto",style:{width:"100%",maxWidth:"500px"}}),S.jsx("div",{className:"mt-4",children:S.jsxs("button",{type:"button",onClick:f,className:"inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:[S.jsx(Eb,{className:"-ml-0.5 mr-2 h-4 w-4"}),"Cancel"]})}),S.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"Position the QR code within the square"})]}),i&&S.jsxs("div",{className:"text-center py-10",children:[S.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-indigo-600"}),S.jsx("p",{className:"mt-2 text-sm font-medium text-gray-700",children:"Processing QR code..."})]}),l&&S.jsx("div",{className:"mt-4 p-4 bg-green-50 rounded-md border border-green-100",children:S.jsxs("div",{className:"flex",children:[S.jsx("div",{className:"flex-shrink-0",children:S.jsx(Oo,{className:"h-5 w-5 text-green-400","aria-hidden":"true"})}),S.jsxs("div",{className:"ml-3",children:[S.jsx("h3",{className:"text-sm font-medium text-green-800",children:"Attendance marked successfully!"}),S.jsx("div",{className:"mt-4 text-sm text-green-700",children:S.jsxs("div",{className:"space-y-2",children:[S.jsxs("p",{children:[S.jsx("span",{className:"font-medium",children:"Event:"})," ",l.name]}),S.jsxs("p",{children:[S.jsx("span",{className:"font-medium",children:"Date:"})," ",b(l.startDate)]}),S.jsxs("p",{children:[S.jsx("span",{className:"font-medium",children:"Location:"})," ",l.location||"Not specified"]})]})})]})]})}),s&&!l&&!i&&S.jsx("div",{className:"mt-4 p-4 bg-yellow-50 rounded-md border border-yellow-100",children:S.jsxs("div",{className:"flex",children:[S.jsx("div",{className:"flex-shrink-0",children:S.jsx(z6,{className:"h-5 w-5 text-yellow-400","aria-hidden":"true"})}),S.jsxs("div",{className:"ml-3",children:[S.jsx("h3",{className:"text-sm font-medium text-yellow-800",children:"Invalid or expired QR code"}),S.jsx("div",{className:"mt-2",children:S.jsx("button",{type:"button",onClick:d,className:"inline-flex items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-md text-yellow-700 bg-yellow-100 hover:bg-yellow-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-yellow-500",children:"Try Again"})})]})]})})]})]})},y4e=()=>{const[t,e]=A.useState([]),[n,r]=A.useState(!0),[s,o]=A.useState(!1),[i,a]=A.useState(!1);A.useEffect(()=>{l()},[]);const l=async()=>{a(!0);try{const g=await yt.get("/api/events");e(g.data)}catch(g){console.error("Error fetching events:",g),Rt.error("Failed to load events")}finally{r(!1),a(!1)}},c=g=>g?new Date(g).toLocaleDateString(void 0,{month:"short",day:"numeric",year:"numeric"}):"",d=g=>g?new Date(g).toLocaleTimeString(void 0,{hour:"2-digit",minute:"2-digit"}):"",f=g=>{const x=new Date,b=new Date(g.startDate),w=new Date(g.endDate);return x>=b&&x<=w&&g.isActive},p=g=>{const x=new Date,b=new Date(g.startDate),w=new Date(g.endDate);return g.isActive?x<b?S.jsx("span",{className:"bg-blue-100 text-blue-800 px-2 py-0.5 rounded-full text-xs font-medium",children:"Upcoming"}):x>w?S.jsx("span",{className:"bg-gray-100 text-gray-800 px-2 py-0.5 rounded-full text-xs font-medium",children:"Completed"}):S.jsx("span",{className:"bg-green-100 text-green-800 px-2 py-0.5 rounded-full text-xs font-medium",children:"Active"}):S.jsx("span",{className:"bg-red-100 text-red-800 px-2 py-0.5 rounded-full text-xs font-medium",children:"Inactive"})};return S.jsxs("div",{className:"space-y-6",children:[S.jsxs("div",{className:"flex justify-between items-center",children:[S.jsxs("h1",{className:"text-2xl font-bold text-gray-900 flex items-center",children:[S.jsx(zi,{className:"h-7 w-7 mr-2 text-indigo-600"}),"Events"]}),S.jsxs("div",{className:"flex items-center space-x-3",children:[S.jsxs("button",{onClick:l,disabled:i,className:"inline-flex items-center px-3 py-1.5 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition-colors",children:[S.jsx(Wc,{className:`h-4 w-4 mr-1.5 ${i?"animate-spin":""}`}),i?"Refreshing...":"Refresh"]}),S.jsxs("button",{onClick:()=>o(!s),className:"inline-flex items-center px-3 py-1.5 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition-colors",children:[S.jsx(dg,{className:"h-4 w-4 mr-1.5"}),s?"Hide Scanner":"Scan QR Code"]})]})]}),s&&S.jsx("div",{className:"mb-6",children:S.jsx(x4e,{})}),S.jsxs("div",{className:"bg-white shadow overflow-hidden sm:rounded-lg",children:[S.jsx("div",{className:"px-4 py-5 sm:px-6 border-b border-gray-200",children:S.jsxs("h3",{className:"text-lg leading-6 font-medium text-gray-900 flex items-center",children:[S.jsx(zi,{className:"h-5 w-5 mr-2 text-indigo-500"}),"Upcoming & Active Events"]})}),n?S.jsxs("div",{className:"text-center py-16",children:[S.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-indigo-600"}),S.jsx("p",{className:"mt-4 text-gray-600 font-medium",children:"Loading events..."})]}):t.length>0?S.jsx("ul",{className:"divide-y divide-gray-200",children:t.map(g=>S.jsx("li",{children:S.jsx("div",{className:"px-4 py-4 sm:px-6 hover:bg-gray-50 transition-colors duration-150",children:S.jsx("div",{className:"flex items-center justify-between",children:S.jsxs("div",{className:"sm:flex sm:justify-between w-full",children:[S.jsxs("div",{children:[S.jsxs("div",{className:"flex items-center",children:[S.jsx("p",{className:"text-sm font-medium text-indigo-600 truncate",children:g.name}),S.jsx("div",{className:"ml-2",children:p(g)})]}),S.jsxs("div",{className:"mt-2 flex items-center text-sm text-gray-500",children:[S.jsx(zi,{className:"flex-shrink-0 mr-1.5 h-4 w-4 text-gray-400"}),S.jsxs("p",{children:[c(g.startDate)," ",d(g.startDate)," - ",d(g.endDate)]})]}),g.location&&S.jsxs("div",{className:"mt-2 flex items-center text-sm text-gray-500",children:[S.jsx(Vte,{className:"flex-shrink-0 mr-1.5 h-4 w-4 text-gray-400"}),S.jsx("p",{children:g.location})]}),g.department&&S.jsxs("div",{className:"mt-2 flex items-center text-sm text-gray-500",children:[S.jsx(wte,{className:"flex-shrink-0 mr-1.5 h-4 w-4 text-gray-400"}),S.jsx("p",{children:g.department.name})]})]}),f(g)&&S.jsx("div",{className:"mt-4 sm:mt-0",children:S.jsxs("button",{onClick:()=>o(!0),className:"inline-flex items-center px-3 py-1.5 border border-transparent text-xs font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition-colors",children:[S.jsx(dg,{className:"h-4 w-4 mr-1.5"}),"Mark Attendance"]})})]})})})},g._id))}):S.jsxs("div",{className:"text-center py-16",children:[S.jsx(zi,{className:"mx-auto h-12 w-12 text-gray-400"}),S.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No events found"}),S.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"There are no upcoming or active events at the moment."})]})]})]})},b4e=()=>S.jsx("div",{className:"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:S.jsx("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:S.jsxs("div",{className:"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10 text-center",children:[S.jsx(z6,{className:"mx-auto h-12 w-12 text-yellow-500"}),S.jsx("h2",{className:"mt-6 text-3xl font-extrabold text-gray-900",children:"Page Not Found"}),S.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"The page you're looking for doesn't exist or has been moved."}),S.jsx("div",{className:"mt-6",children:S.jsxs(va,{to:"/",className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500",children:[S.jsx(V6,{className:"-ml-1 mr-2 h-5 w-5","aria-hidden":"true"}),"Go to Dashboard"]})})]})})}),w4e=()=>{const[t,e]=A.useState(""),[n,r]=A.useState(!1),[s,o]=A.useState(!1),i=async a=>{var c,d;if(a.preventDefault(),!t){Rt.error("Please enter your email address");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)){Rt.error("Please enter a valid email address");return}r(!0);try{(await yt.post("/api/auth/forgot-password",{email:t})).data.success&&(o(!0),Rt.success("Password reset email sent successfully"))}catch(f){console.error("Forgot password error:",f);const p=((d=(c=f.response)==null?void 0:c.data)==null?void 0:d.message)||"Failed to send reset email";Rt.error(p)}finally{r(!1)}};return S.jsxs("div",{className:"min-h-screen flex flex-col justify-center py-12 sm:px-6 lg:px-8 bg-gray-50",children:[S.jsxs("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:[S.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Reset your password"}),S.jsxs("p",{className:"mt-2 text-center text-sm text-gray-600",children:["Or"," ",S.jsx(va,{to:"/login",className:"font-medium text-indigo-600 hover:text-indigo-500",children:"return to login"})]})]}),S.jsx("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:S.jsx("div",{className:"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10",children:s?S.jsxs("div",{className:"text-center",children:[S.jsx("div",{className:"rounded-full bg-green-100 h-12 w-12 flex items-center justify-center mx-auto",children:S.jsx(ME,{className:"h-6 w-6 text-green-600","aria-hidden":"true"})}),S.jsx("h3",{className:"mt-4 text-lg font-medium text-gray-900",children:"Check your email"}),S.jsxs("p",{className:"mt-2 text-sm text-gray-500",children:["We've sent a password reset link to ",t,". Please check your inbox and follow the instructions."]}),S.jsx("button",{onClick:()=>o(!1),className:"mt-4 text-sm font-medium text-indigo-600 hover:text-indigo-500",children:"Try another email"})]}):S.jsxs("form",{className:"space-y-6",onSubmit:i,children:[S.jsxs("div",{children:[S.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email address"}),S.jsxs("div",{className:"mt-1 relative rounded-md shadow-sm",children:[S.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:S.jsx(ME,{className:"h-5 w-5 text-gray-400","aria-hidden":"true"})}),S.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:t,onChange:a=>e(a.target.value),className:"block w-full pl-10 sm:text-sm border-gray-300 rounded-md focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Enter your email"})]})]}),S.jsx("div",{children:S.jsx("button",{type:"submit",disabled:n,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50",children:n?"Sending...":"Send Reset Link"})})]})})})]})},v4e=()=>{const[t,e]=A.useState(""),[n,r]=A.useState(""),[s,o]=A.useState(!1),[i,a]=A.useState(!1),[l,c]=A.useState(!1),{token:d}=FK(),f=af(),p=async g=>{var x,b;if(g.preventDefault(),!t||!n){Rt.error("Please fill in all fields");return}if(t.length<6){Rt.error("Password must be at least 6 characters long");return}if(t!==n){Rt.error("Passwords do not match");return}c(!0);try{(await yt.post(`/api/auth/reset-password/${d}`,{password:t})).data.success&&(Rt.success("Password reset successful"),f("/login"))}catch(w){console.error("Reset password error:",w);const C=((b=(x=w.response)==null?void 0:x.data)==null?void 0:b.message)||"Failed to reset password";Rt.error(C)}finally{c(!1)}};return S.jsxs("div",{className:"min-h-screen flex flex-col justify-center py-12 sm:px-6 lg:px-8 bg-gray-50",children:[S.jsxs("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:[S.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Create new password"}),S.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Please enter your new password below"})]}),S.jsx("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:S.jsx("div",{className:"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10",children:S.jsxs("form",{className:"space-y-6",onSubmit:p,children:[S.jsxs("div",{children:[S.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"New Password"}),S.jsxs("div",{className:"mt-1 relative",children:[S.jsx("input",{id:"password",name:"password",type:s?"text":"password",autoComplete:"new-password",required:!0,value:t,onChange:g=>e(g.target.value),className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"}),S.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 flex items-center pr-3 text-gray-400 hover:text-gray-500",onClick:()=>o(!s),children:s?S.jsx(wh,{className:"h-5 w-5","aria-hidden":"true"}):S.jsx(vh,{className:"h-5 w-5","aria-hidden":"true"})})]}),S.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Password must be at least 6 characters long"})]}),S.jsxs("div",{children:[S.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700",children:"Confirm New Password"}),S.jsxs("div",{className:"mt-1 relative",children:[S.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:i?"text":"password",autoComplete:"new-password",required:!0,value:n,onChange:g=>r(g.target.value),className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"}),S.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 flex items-center pr-3 text-gray-400 hover:text-gray-500",onClick:()=>a(!i),children:i?S.jsx(wh,{className:"h-5 w-5","aria-hidden":"true"}):S.jsx(vh,{className:"h-5 w-5","aria-hidden":"true"})})]})]}),S.jsx("div",{children:S.jsx("button",{type:"submit",disabled:l,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50",children:l?"Resetting...":"Reset Password"})})]})})})]})},C4e=()=>{const t=af(),[e]=dY(),{setToken:n,setCurrentUser:r}=La();return A.useEffect(()=>{const s=e.get("token");if(e.get("error")){Rt.error("Authentication failed. Please try again."),t("/login");return}s?(localStorage.setItem("token",s),n(s),Rt.success("Successfully logged in!"),t("/")):(Rt.error("No authentication token received"),t("/login"))},[e,t,n,r]),S.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:S.jsxs("div",{className:"text-center",children:[S.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-purple-500 mx-auto"}),S.jsx("p",{className:"mt-4 text-gray-600",children:"Completing authentication..."})]})})},i0={black:"#000",white:"#fff"},Lf={300:"#e57373",400:"#ef5350",500:"#f44336",700:"#d32f2f",800:"#c62828"},Bf={50:"#f3e5f5",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",700:"#7b1fa2"},jf={50:"#e3f2fd",200:"#90caf9",400:"#42a5f5",700:"#1976d2",800:"#1565c0"},zf={300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",700:"#0288d1",900:"#01579b"},Vf={300:"#81c784",400:"#66bb6a",500:"#4caf50",700:"#388e3c",800:"#2e7d32",900:"#1b5e20"},Em={300:"#ffb74d",400:"#ffa726",500:"#ff9800",700:"#f57c00",900:"#e65100"},S4e={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"};function cc(t,...e){const n=new URL(`https://mui.com/production-error/?code=${t}`);return e.forEach(r=>n.searchParams.append("args[]",r)),`Minified MUI error #${t}; visit ${n} for the full message.`}const Hp="$$material";function xe(){return xe=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},xe.apply(null,arguments)}function N4e(t){if(t.sheet)return t.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===t)return document.styleSheets[e]}function E4e(t){var e=document.createElement("style");return e.setAttribute("data-emotion",t.key),t.nonce!==void 0&&e.setAttribute("nonce",t.nonce),e.appendChild(document.createTextNode("")),e.setAttribute("data-s",""),e}var I4e=function(){function t(n){var r=this;this._insertTag=function(s){var o;r.tags.length===0?r.insertionPoint?o=r.insertionPoint.nextSibling:r.prepend?o=r.container.firstChild:o=r.before:o=r.tags[r.tags.length-1].nextSibling,r.container.insertBefore(s,o),r.tags.push(s)},this.isSpeedy=n.speedy===void 0?!0:n.speedy,this.tags=[],this.ctr=0,this.nonce=n.nonce,this.key=n.key,this.container=n.container,this.prepend=n.prepend,this.insertionPoint=n.insertionPoint,this.before=null}var e=t.prototype;return e.hydrate=function(r){r.forEach(this._insertTag)},e.insert=function(r){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(E4e(this));var s=this.tags[this.tags.length-1];if(this.isSpeedy){var o=N4e(s);try{o.insertRule(r,o.cssRules.length)}catch{}}else s.appendChild(document.createTextNode(r));this.ctr++},e.flush=function(){this.tags.forEach(function(r){var s;return(s=r.parentNode)==null?void 0:s.removeChild(r)}),this.tags=[],this.ctr=0},t}(),Zs="-ms-",lw="-moz-",Sn="-webkit-",CW="comm",fD="rule",hD="decl",k4e="@import",SW="@keyframes",T4e="@layer",A4e=Math.abs,X2=String.fromCharCode,R4e=Object.assign;function D4e(t,e){return Ps(t,0)^45?(((e<<2^Ps(t,0))<<2^Ps(t,1))<<2^Ps(t,2))<<2^Ps(t,3):0}function NW(t){return t.trim()}function $4e(t,e){return(t=e.exec(t))?t[0]:t}function Nn(t,e,n){return t.replace(e,n)}function zI(t,e){return t.indexOf(e)}function Ps(t,e){return t.charCodeAt(e)|0}function a0(t,e,n){return t.slice(e,n)}function ol(t){return t.length}function pD(t){return t.length}function sy(t,e){return e.push(t),t}function O4e(t,e){return t.map(e).join("")}var K2=1,op=1,EW=0,ei=0,Hr=0,Gp="";function Y2(t,e,n,r,s,o,i){return{value:t,root:e,parent:n,type:r,props:s,children:o,line:K2,column:op,length:i,return:""}}function Im(t,e){return R4e(Y2("",null,null,"",null,null,0),t,{length:-t.length},e)}function _4e(){return Hr}function P4e(){return Hr=ei>0?Ps(Gp,--ei):0,op--,Hr===10&&(op=1,K2--),Hr}function mi(){return Hr=ei<EW?Ps(Gp,ei++):0,op++,Hr===10&&(op=1,K2++),Hr}function wl(){return Ps(Gp,ei)}function Fy(){return ei}function K1(t,e){return a0(Gp,t,e)}function l0(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function IW(t){return K2=op=1,EW=ol(Gp=t),ei=0,[]}function kW(t){return Gp="",t}function My(t){return NW(K1(ei-1,VI(t===91?t+2:t===40?t+1:t)))}function F4e(t){for(;(Hr=wl())&&Hr<33;)mi();return l0(t)>2||l0(Hr)>3?"":" "}function M4e(t,e){for(;--e&&mi()&&!(Hr<48||Hr>102||Hr>57&&Hr<65||Hr>70&&Hr<97););return K1(t,Fy()+(e<6&&wl()==32&&mi()==32))}function VI(t){for(;mi();)switch(Hr){case t:return ei;case 34:case 39:t!==34&&t!==39&&VI(Hr);break;case 40:t===41&&VI(t);break;case 92:mi();break}return ei}function L4e(t,e){for(;mi()&&t+Hr!==57;)if(t+Hr===84&&wl()===47)break;return"/*"+K1(e,ei-1)+"*"+X2(t===47?t:mi())}function B4e(t){for(;!l0(wl());)mi();return K1(t,ei)}function j4e(t){return kW(Ly("",null,null,null,[""],t=IW(t),0,[0],t))}function Ly(t,e,n,r,s,o,i,a,l){for(var c=0,d=0,f=i,p=0,g=0,x=0,b=1,w=1,C=1,N=0,k="",I=s,R=o,$=r,O=k;w;)switch(x=N,N=mi()){case 40:if(x!=108&&Ps(O,f-1)==58){zI(O+=Nn(My(N),"&","&\f"),"&\f")!=-1&&(C=-1);break}case 34:case 39:case 91:O+=My(N);break;case 9:case 10:case 13:case 32:O+=F4e(x);break;case 92:O+=M4e(Fy()-1,7);continue;case 47:switch(wl()){case 42:case 47:sy(z4e(L4e(mi(),Fy()),e,n),l);break;default:O+="/"}break;case 123*b:a[c++]=ol(O)*C;case 125*b:case 59:case 0:switch(N){case 0:case 125:w=0;case 59+d:C==-1&&(O=Nn(O,/\f/g,"")),g>0&&ol(O)-f&&sy(g>32?kP(O+";",r,n,f-1):kP(Nn(O," ","")+";",r,n,f-2),l);break;case 59:O+=";";default:if(sy($=IP(O,e,n,c,d,s,a,k,I=[],R=[],f),o),N===123)if(d===0)Ly(O,e,$,$,I,o,f,a,R);else switch(p===99&&Ps(O,3)===110?100:p){case 100:case 108:case 109:case 115:Ly(t,$,$,r&&sy(IP(t,$,$,0,0,s,a,k,s,I=[],f),R),s,R,f,a,r?I:R);break;default:Ly(O,$,$,$,[""],R,0,a,R)}}c=d=g=0,b=C=1,k=O="",f=i;break;case 58:f=1+ol(O),g=x;default:if(b<1){if(N==123)--b;else if(N==125&&b++==0&&P4e()==125)continue}switch(O+=X2(N),N*b){case 38:C=d>0?1:(O+="\f",-1);break;case 44:a[c++]=(ol(O)-1)*C,C=1;break;case 64:wl()===45&&(O+=My(mi())),p=wl(),d=f=ol(k=O+=B4e(Fy())),N++;break;case 45:x===45&&ol(O)==2&&(b=0)}}return o}function IP(t,e,n,r,s,o,i,a,l,c,d){for(var f=s-1,p=s===0?o:[""],g=pD(p),x=0,b=0,w=0;x<r;++x)for(var C=0,N=a0(t,f+1,f=A4e(b=i[x])),k=t;C<g;++C)(k=NW(b>0?p[C]+" "+N:Nn(N,/&\f/g,p[C])))&&(l[w++]=k);return Y2(t,e,n,s===0?fD:a,l,c,d)}function z4e(t,e,n){return Y2(t,e,n,CW,X2(_4e()),a0(t,2,-2),0)}function kP(t,e,n,r){return Y2(t,e,n,hD,a0(t,0,r),a0(t,r+1,-1),r)}function Rh(t,e){for(var n="",r=pD(t),s=0;s<r;s++)n+=e(t[s],s,t,e)||"";return n}function V4e(t,e,n,r){switch(t.type){case T4e:if(t.children.length)break;case k4e:case hD:return t.return=t.return||t.value;case CW:return"";case SW:return t.return=t.value+"{"+Rh(t.children,r)+"}";case fD:t.value=t.props.join(",")}return ol(n=Rh(t.children,r))?t.return=t.value+"{"+n+"}":""}function W4e(t){var e=pD(t);return function(n,r,s,o){for(var i="",a=0;a<e;a++)i+=t[a](n,r,s,o)||"";return i}}function U4e(t){return function(e){e.root||(e=e.return)&&t(e)}}var H4e=function(e,n,r){for(var s=0,o=0;s=o,o=wl(),s===38&&o===12&&(n[r]=1),!l0(o);)mi();return K1(e,ei)},G4e=function(e,n){var r=-1,s=44;do switch(l0(s)){case 0:s===38&&wl()===12&&(n[r]=1),e[r]+=H4e(ei-1,n,r);break;case 2:e[r]+=My(s);break;case 4:if(s===44){e[++r]=wl()===58?"&\f":"",n[r]=e[r].length;break}default:e[r]+=X2(s)}while(s=mi());return e},q4e=function(e,n){return kW(G4e(IW(e),n))},TP=new WeakMap,X4e=function(e){if(!(e.type!=="rule"||!e.parent||e.length<1)){for(var n=e.value,r=e.parent,s=e.column===r.column&&e.line===r.line;r.type!=="rule";)if(r=r.parent,!r)return;if(!(e.props.length===1&&n.charCodeAt(0)!==58&&!TP.get(r))&&!s){TP.set(e,!0);for(var o=[],i=q4e(n,o),a=r.props,l=0,c=0;l<i.length;l++)for(var d=0;d<a.length;d++,c++)e.props[c]=o[l]?i[l].replace(/&\f/g,a[d]):a[d]+" "+i[l]}}},K4e=function(e){if(e.type==="decl"){var n=e.value;n.charCodeAt(0)===108&&n.charCodeAt(2)===98&&(e.return="",e.value="")}};function TW(t,e){switch(D4e(t,e)){case 5103:return Sn+"print-"+t+t;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Sn+t+t;case 5349:case 4246:case 4810:case 6968:case 2756:return Sn+t+lw+t+Zs+t+t;case 6828:case 4268:return Sn+t+Zs+t+t;case 6165:return Sn+t+Zs+"flex-"+t+t;case 5187:return Sn+t+Nn(t,/(\w+).+(:[^]+)/,Sn+"box-$1$2"+Zs+"flex-$1$2")+t;case 5443:return Sn+t+Zs+"flex-item-"+Nn(t,/flex-|-self/,"")+t;case 4675:return Sn+t+Zs+"flex-line-pack"+Nn(t,/align-content|flex-|-self/,"")+t;case 5548:return Sn+t+Zs+Nn(t,"shrink","negative")+t;case 5292:return Sn+t+Zs+Nn(t,"basis","preferred-size")+t;case 6060:return Sn+"box-"+Nn(t,"-grow","")+Sn+t+Zs+Nn(t,"grow","positive")+t;case 4554:return Sn+Nn(t,/([^-])(transform)/g,"$1"+Sn+"$2")+t;case 6187:return Nn(Nn(Nn(t,/(zoom-|grab)/,Sn+"$1"),/(image-set)/,Sn+"$1"),t,"")+t;case 5495:case 3959:return Nn(t,/(image-set\([^]*)/,Sn+"$1$`$1");case 4968:return Nn(Nn(t,/(.+:)(flex-)?(.*)/,Sn+"box-pack:$3"+Zs+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Sn+t+t;case 4095:case 3583:case 4068:case 2532:return Nn(t,/(.+)-inline(.+)/,Sn+"$1$2")+t;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(ol(t)-1-e>6)switch(Ps(t,e+1)){case 109:if(Ps(t,e+4)!==45)break;case 102:return Nn(t,/(.+:)(.+)-([^]+)/,"$1"+Sn+"$2-$3$1"+lw+(Ps(t,e+3)==108?"$3":"$2-$3"))+t;case 115:return~zI(t,"stretch")?TW(Nn(t,"stretch","fill-available"),e)+t:t}break;case 4949:if(Ps(t,e+1)!==115)break;case 6444:switch(Ps(t,ol(t)-3-(~zI(t,"!important")&&10))){case 107:return Nn(t,":",":"+Sn)+t;case 101:return Nn(t,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Sn+(Ps(t,14)===45?"inline-":"")+"box$3$1"+Sn+"$2$3$1"+Zs+"$2box$3")+t}break;case 5936:switch(Ps(t,e+11)){case 114:return Sn+t+Zs+Nn(t,/[svh]\w+-[tblr]{2}/,"tb")+t;case 108:return Sn+t+Zs+Nn(t,/[svh]\w+-[tblr]{2}/,"tb-rl")+t;case 45:return Sn+t+Zs+Nn(t,/[svh]\w+-[tblr]{2}/,"lr")+t}return Sn+t+Zs+t+t}return t}var Y4e=function(e,n,r,s){if(e.length>-1&&!e.return)switch(e.type){case hD:e.return=TW(e.value,e.length);break;case SW:return Rh([Im(e,{value:Nn(e.value,"@","@"+Sn)})],s);case fD:if(e.length)return O4e(e.props,function(o){switch($4e(o,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Rh([Im(e,{props:[Nn(o,/:(read-\w+)/,":"+lw+"$1")]})],s);case"::placeholder":return Rh([Im(e,{props:[Nn(o,/:(plac\w+)/,":"+Sn+"input-$1")]}),Im(e,{props:[Nn(o,/:(plac\w+)/,":"+lw+"$1")]}),Im(e,{props:[Nn(o,/:(plac\w+)/,Zs+"input-$1")]})],s)}return""})}},Z4e=[Y4e],Q4e=function(e){var n=e.key;if(n==="css"){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,function(b){var w=b.getAttribute("data-emotion");w.indexOf(" ")!==-1&&(document.head.appendChild(b),b.setAttribute("data-s",""))})}var s=e.stylisPlugins||Z4e,o={},i,a=[];i=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+n+' "]'),function(b){for(var w=b.getAttribute("data-emotion").split(" "),C=1;C<w.length;C++)o[w[C]]=!0;a.push(b)});var l,c=[X4e,K4e];{var d,f=[V4e,U4e(function(b){d.insert(b)})],p=W4e(c.concat(s,f)),g=function(w){return Rh(j4e(w),p)};l=function(w,C,N,k){d=N,g(w?w+"{"+C.styles+"}":C.styles),k&&(x.inserted[C.name]=!0)}}var x={key:n,sheet:new I4e({key:n,container:i,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:o,registered:{},insert:l};return x.sheet.hydrate(a),x},AW={exports:{}},_n={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var As=typeof Symbol=="function"&&Symbol.for,mD=As?Symbol.for("react.element"):60103,gD=As?Symbol.for("react.portal"):60106,Z2=As?Symbol.for("react.fragment"):60107,Q2=As?Symbol.for("react.strict_mode"):60108,J2=As?Symbol.for("react.profiler"):60114,eC=As?Symbol.for("react.provider"):60109,tC=As?Symbol.for("react.context"):60110,xD=As?Symbol.for("react.async_mode"):60111,nC=As?Symbol.for("react.concurrent_mode"):60111,rC=As?Symbol.for("react.forward_ref"):60112,sC=As?Symbol.for("react.suspense"):60113,J4e=As?Symbol.for("react.suspense_list"):60120,oC=As?Symbol.for("react.memo"):60115,iC=As?Symbol.for("react.lazy"):60116,e_e=As?Symbol.for("react.block"):60121,t_e=As?Symbol.for("react.fundamental"):60117,n_e=As?Symbol.for("react.responder"):60118,r_e=As?Symbol.for("react.scope"):60119;function Ni(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case mD:switch(t=t.type,t){case xD:case nC:case Z2:case J2:case Q2:case sC:return t;default:switch(t=t&&t.$$typeof,t){case tC:case rC:case iC:case oC:case eC:return t;default:return e}}case gD:return e}}}function RW(t){return Ni(t)===nC}_n.AsyncMode=xD;_n.ConcurrentMode=nC;_n.ContextConsumer=tC;_n.ContextProvider=eC;_n.Element=mD;_n.ForwardRef=rC;_n.Fragment=Z2;_n.Lazy=iC;_n.Memo=oC;_n.Portal=gD;_n.Profiler=J2;_n.StrictMode=Q2;_n.Suspense=sC;_n.isAsyncMode=function(t){return RW(t)||Ni(t)===xD};_n.isConcurrentMode=RW;_n.isContextConsumer=function(t){return Ni(t)===tC};_n.isContextProvider=function(t){return Ni(t)===eC};_n.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===mD};_n.isForwardRef=function(t){return Ni(t)===rC};_n.isFragment=function(t){return Ni(t)===Z2};_n.isLazy=function(t){return Ni(t)===iC};_n.isMemo=function(t){return Ni(t)===oC};_n.isPortal=function(t){return Ni(t)===gD};_n.isProfiler=function(t){return Ni(t)===J2};_n.isStrictMode=function(t){return Ni(t)===Q2};_n.isSuspense=function(t){return Ni(t)===sC};_n.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===Z2||t===nC||t===J2||t===Q2||t===sC||t===J4e||typeof t=="object"&&t!==null&&(t.$$typeof===iC||t.$$typeof===oC||t.$$typeof===eC||t.$$typeof===tC||t.$$typeof===rC||t.$$typeof===t_e||t.$$typeof===n_e||t.$$typeof===r_e||t.$$typeof===e_e)};_n.typeOf=Ni;AW.exports=_n;var s_e=AW.exports,DW=s_e,o_e={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},i_e={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},$W={};$W[DW.ForwardRef]=o_e;$W[DW.Memo]=i_e;var a_e=!0;function OW(t,e,n){var r="";return n.split(" ").forEach(function(s){t[s]!==void 0?e.push(t[s]+";"):s&&(r+=s+" ")}),r}var yD=function(e,n,r){var s=e.key+"-"+n.name;(r===!1||a_e===!1)&&e.registered[s]===void 0&&(e.registered[s]=n.styles)},bD=function(e,n,r){yD(e,n,r);var s=e.key+"-"+n.name;if(e.inserted[n.name]===void 0){var o=n;do e.insert(n===o?"."+s:"",o,e.sheet,!0),o=o.next;while(o!==void 0)}};function l_e(t){for(var e=0,n,r=0,s=t.length;s>=4;++r,s-=4)n=t.charCodeAt(r)&255|(t.charCodeAt(++r)&255)<<8|(t.charCodeAt(++r)&255)<<16|(t.charCodeAt(++r)&255)<<24,n=(n&65535)*1540483477+((n>>>16)*59797<<16),n^=n>>>24,e=(n&65535)*1540483477+((n>>>16)*59797<<16)^(e&65535)*1540483477+((e>>>16)*59797<<16);switch(s){case 3:e^=(t.charCodeAt(r+2)&255)<<16;case 2:e^=(t.charCodeAt(r+1)&255)<<8;case 1:e^=t.charCodeAt(r)&255,e=(e&65535)*1540483477+((e>>>16)*59797<<16)}return e^=e>>>13,e=(e&65535)*1540483477+((e>>>16)*59797<<16),((e^e>>>15)>>>0).toString(36)}var c_e={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1};function u_e(t){var e=Object.create(null);return function(n){return e[n]===void 0&&(e[n]=t(n)),e[n]}}var d_e=/[A-Z]|^ms/g,f_e=/_EMO_([^_]+?)_([^]*?)_EMO_/g,_W=function(e){return e.charCodeAt(1)===45},AP=function(e){return e!=null&&typeof e!="boolean"},mN=u_e(function(t){return _W(t)?t:t.replace(d_e,"-$&").toLowerCase()}),RP=function(e,n){switch(e){case"animation":case"animationName":if(typeof n=="string")return n.replace(f_e,function(r,s,o){return il={name:s,styles:o,next:il},s})}return c_e[e]!==1&&!_W(e)&&typeof n=="number"&&n!==0?n+"px":n};function c0(t,e,n){if(n==null)return"";var r=n;if(r.__emotion_styles!==void 0)return r;switch(typeof n){case"boolean":return"";case"object":{var s=n;if(s.anim===1)return il={name:s.name,styles:s.styles,next:il},s.name;var o=n;if(o.styles!==void 0){var i=o.next;if(i!==void 0)for(;i!==void 0;)il={name:i.name,styles:i.styles,next:il},i=i.next;var a=o.styles+";";return a}return h_e(t,e,n)}case"function":{if(t!==void 0){var l=il,c=n(t);return il=l,c0(t,e,c)}break}}var d=n;if(e==null)return d;var f=e[d];return f!==void 0?f:d}function h_e(t,e,n){var r="";if(Array.isArray(n))for(var s=0;s<n.length;s++)r+=c0(t,e,n[s])+";";else for(var o in n){var i=n[o];if(typeof i!="object"){var a=i;e!=null&&e[a]!==void 0?r+=o+"{"+e[a]+"}":AP(a)&&(r+=mN(o)+":"+RP(o,a)+";")}else if(Array.isArray(i)&&typeof i[0]=="string"&&(e==null||e[i[0]]===void 0))for(var l=0;l<i.length;l++)AP(i[l])&&(r+=mN(o)+":"+RP(o,i[l])+";");else{var c=c0(t,e,i);switch(o){case"animation":case"animationName":{r+=mN(o)+":"+c+";";break}default:r+=o+"{"+c+"}"}}}return r}var DP=/label:\s*([^\s;{]+)\s*(;|$)/g,il;function Y1(t,e,n){if(t.length===1&&typeof t[0]=="object"&&t[0]!==null&&t[0].styles!==void 0)return t[0];var r=!0,s="";il=void 0;var o=t[0];if(o==null||o.raw===void 0)r=!1,s+=c0(n,e,o);else{var i=o;s+=i[0]}for(var a=1;a<t.length;a++)if(s+=c0(n,e,t[a]),r){var l=o;s+=l[a]}DP.lastIndex=0;for(var c="",d;(d=DP.exec(s))!==null;)c+="-"+d[1];var f=l_e(s)+c;return{name:f,styles:s,next:il}}var p_e=function(e){return e()},PW=Sl.useInsertionEffect?Sl.useInsertionEffect:!1,FW=PW||p_e,$P=PW||A.useLayoutEffect,MW=A.createContext(typeof HTMLElement<"u"?Q4e({key:"css"}):null);MW.Provider;var wD=function(e){return A.forwardRef(function(n,r){var s=A.useContext(MW);return e(n,s,r)})},aC=A.createContext({}),vD={}.hasOwnProperty,WI="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",m_e=function(e,n){var r={};for(var s in n)vD.call(n,s)&&(r[s]=n[s]);return r[WI]=e,r},g_e=function(e){var n=e.cache,r=e.serialized,s=e.isStringTag;return yD(n,r,s),FW(function(){return bD(n,r,s)}),null},x_e=wD(function(t,e,n){var r=t.css;typeof r=="string"&&e.registered[r]!==void 0&&(r=e.registered[r]);var s=t[WI],o=[r],i="";typeof t.className=="string"?i=OW(e.registered,o,t.className):t.className!=null&&(i=t.className+" ");var a=Y1(o,void 0,A.useContext(aC));i+=e.key+"-"+a.name;var l={};for(var c in t)vD.call(t,c)&&c!=="css"&&c!==WI&&(l[c]=t[c]);return l.className=i,n&&(l.ref=n),A.createElement(A.Fragment,null,A.createElement(g_e,{cache:e,serialized:a,isStringTag:typeof s=="string"}),A.createElement(s,l))}),y_e=x_e,OP=function(e,n){var r=arguments;if(n==null||!vD.call(n,"css"))return A.createElement.apply(void 0,r);var s=r.length,o=new Array(s);o[0]=y_e,o[1]=m_e(e,n);for(var i=2;i<s;i++)o[i]=r[i];return A.createElement.apply(null,o)};(function(t){var e;e||(e=t.JSX||(t.JSX={}))})(OP||(OP={}));var b_e=wD(function(t,e){var n=t.styles,r=Y1([n],void 0,A.useContext(aC)),s=A.useRef();return $P(function(){var o=e.key+"-global",i=new e.sheet.constructor({key:o,nonce:e.sheet.nonce,container:e.sheet.container,speedy:e.sheet.isSpeedy}),a=!1,l=document.querySelector('style[data-emotion="'+o+" "+r.name+'"]');return e.sheet.tags.length&&(i.before=e.sheet.tags[0]),l!==null&&(a=!0,l.setAttribute("data-emotion",o),i.hydrate([l])),s.current=[i,a],function(){i.flush()}},[e]),$P(function(){var o=s.current,i=o[0],a=o[1];if(a){o[1]=!1;return}if(r.next!==void 0&&bD(e,r.next,!0),i.tags.length){var l=i.tags[i.tags.length-1].nextElementSibling;i.before=l,i.flush()}e.insert("",r,i,!1)},[e,r.name]),null});function CD(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Y1(e)}function Z1(){var t=CD.apply(void 0,arguments),e="animation-"+t.name;return{name:e,styles:"@keyframes "+e+"{"+t.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}function w_e(t){var e=Object.create(null);return function(n){return e[n]===void 0&&(e[n]=t(n)),e[n]}}var v_e=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,C_e=w_e(function(t){return v_e.test(t)||t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)<91}),S_e=C_e,N_e=function(e){return e!=="theme"},_P=function(e){return typeof e=="string"&&e.charCodeAt(0)>96?S_e:N_e},PP=function(e,n,r){var s;if(n){var o=n.shouldForwardProp;s=e.__emotion_forwardProp&&o?function(i){return e.__emotion_forwardProp(i)&&o(i)}:o}return typeof s!="function"&&r&&(s=e.__emotion_forwardProp),s},E_e=function(e){var n=e.cache,r=e.serialized,s=e.isStringTag;return yD(n,r,s),FW(function(){return bD(n,r,s)}),null},I_e=function t(e,n){var r=e.__emotion_real===e,s=r&&e.__emotion_base||e,o,i;n!==void 0&&(o=n.label,i=n.target);var a=PP(e,n,r),l=a||_P(s),c=!l("as");return function(){var d=arguments,f=r&&e.__emotion_styles!==void 0?e.__emotion_styles.slice(0):[];if(o!==void 0&&f.push("label:"+o+";"),d[0]==null||d[0].raw===void 0)f.push.apply(f,d);else{var p=d[0];f.push(p[0]);for(var g=d.length,x=1;x<g;x++)f.push(d[x],p[x])}var b=wD(function(w,C,N){var k=c&&w.as||s,I="",R=[],$=w;if(w.theme==null){$={};for(var O in w)$[O]=w[O];$.theme=A.useContext(aC)}typeof w.className=="string"?I=OW(C.registered,R,w.className):w.className!=null&&(I=w.className+" ");var F=Y1(f.concat(R),C.registered,$);I+=C.key+"-"+F.name,i!==void 0&&(I+=" "+i);var M=c&&a===void 0?_P(k):l,_={};for(var V in w)c&&V==="as"||M(V)&&(_[V]=w[V]);return _.className=I,N&&(_.ref=N),A.createElement(A.Fragment,null,A.createElement(E_e,{cache:C,serialized:F,isStringTag:typeof k=="string"}),A.createElement(k,_))});return b.displayName=o!==void 0?o:"Styled("+(typeof s=="string"?s:s.displayName||s.name||"Component")+")",b.defaultProps=e.defaultProps,b.__emotion_real=b,b.__emotion_base=s,b.__emotion_styles=f,b.__emotion_forwardProp=a,Object.defineProperty(b,"toString",{value:function(){return"."+i}}),b.withComponent=function(w,C){var N=t(w,xe({},n,C,{shouldForwardProp:PP(b,C,!0)}));return N.apply(void 0,f)},b}},k_e=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],UI=I_e.bind(null);k_e.forEach(function(t){UI[t]=UI(t)});var LW={exports:{}},T_e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",A_e=T_e,R_e=A_e;function BW(){}function jW(){}jW.resetWarningCache=BW;var D_e=function(){function t(r,s,o,i,a,l){if(l!==R_e){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:jW,resetWarningCache:BW};return n.PropTypes=n,n};LW.exports=D_e();var $_e=LW.exports;const _e=mp($_e);function O_e(t){return t==null||Object.keys(t).length===0}function __e(t){const{styles:e,defaultTheme:n={}}=t,r=typeof e=="function"?s=>e(O_e(s)?n:s):e;return S.jsx(b_e,{styles:r})}function zW(t,e){return UI(t,e)}function P_e(t,e){Array.isArray(t.__emotion_styles)&&(t.__emotion_styles=e(t.__emotion_styles))}const FP=[];function MP(t){return FP[0]=t,Y1(FP)}var VW={exports:{}},Xn={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var SD=Symbol.for("react.transitional.element"),ND=Symbol.for("react.portal"),lC=Symbol.for("react.fragment"),cC=Symbol.for("react.strict_mode"),uC=Symbol.for("react.profiler"),dC=Symbol.for("react.consumer"),fC=Symbol.for("react.context"),hC=Symbol.for("react.forward_ref"),pC=Symbol.for("react.suspense"),mC=Symbol.for("react.suspense_list"),gC=Symbol.for("react.memo"),xC=Symbol.for("react.lazy"),F_e=Symbol.for("react.view_transition"),M_e=Symbol.for("react.client.reference");function ca(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case SD:switch(t=t.type,t){case lC:case uC:case cC:case pC:case mC:case F_e:return t;default:switch(t=t&&t.$$typeof,t){case fC:case hC:case xC:case gC:return t;case dC:return t;default:return e}}case ND:return e}}}Xn.ContextConsumer=dC;Xn.ContextProvider=fC;Xn.Element=SD;Xn.ForwardRef=hC;Xn.Fragment=lC;Xn.Lazy=xC;Xn.Memo=gC;Xn.Portal=ND;Xn.Profiler=uC;Xn.StrictMode=cC;Xn.Suspense=pC;Xn.SuspenseList=mC;Xn.isContextConsumer=function(t){return ca(t)===dC};Xn.isContextProvider=function(t){return ca(t)===fC};Xn.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===SD};Xn.isForwardRef=function(t){return ca(t)===hC};Xn.isFragment=function(t){return ca(t)===lC};Xn.isLazy=function(t){return ca(t)===xC};Xn.isMemo=function(t){return ca(t)===gC};Xn.isPortal=function(t){return ca(t)===ND};Xn.isProfiler=function(t){return ca(t)===uC};Xn.isStrictMode=function(t){return ca(t)===cC};Xn.isSuspense=function(t){return ca(t)===pC};Xn.isSuspenseList=function(t){return ca(t)===mC};Xn.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===lC||t===uC||t===cC||t===pC||t===mC||typeof t=="object"&&t!==null&&(t.$$typeof===xC||t.$$typeof===gC||t.$$typeof===fC||t.$$typeof===dC||t.$$typeof===hC||t.$$typeof===M_e||t.getModuleId!==void 0)};Xn.typeOf=ca;VW.exports=Xn;var WW=VW.exports;function fl(t){if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function UW(t){if(A.isValidElement(t)||WW.isValidElementType(t)||!fl(t))return t;const e={};return Object.keys(t).forEach(n=>{e[n]=UW(t[n])}),e}function oo(t,e,n={clone:!0}){const r=n.clone?{...t}:t;return fl(t)&&fl(e)&&Object.keys(e).forEach(s=>{A.isValidElement(e[s])||WW.isValidElementType(e[s])?r[s]=e[s]:fl(e[s])&&Object.prototype.hasOwnProperty.call(t,s)&&fl(t[s])?r[s]=oo(t[s],e[s],n):n.clone?r[s]=fl(e[s])?UW(e[s]):e[s]:r[s]=e[s]}),r}const L_e=t=>{const e=Object.keys(t).map(n=>({key:n,val:t[n]}))||[];return e.sort((n,r)=>n.val-r.val),e.reduce((n,r)=>({...n,[r.key]:r.val}),{})};function B_e(t){const{values:e={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:n="px",step:r=5,...s}=t,o=L_e(e),i=Object.keys(o);function a(p){return`@media (min-width:${typeof e[p]=="number"?e[p]:p}${n})`}function l(p){return`@media (max-width:${(typeof e[p]=="number"?e[p]:p)-r/100}${n})`}function c(p,g){const x=i.indexOf(g);return`@media (min-width:${typeof e[p]=="number"?e[p]:p}${n}) and (max-width:${(x!==-1&&typeof e[i[x]]=="number"?e[i[x]]:g)-r/100}${n})`}function d(p){return i.indexOf(p)+1<i.length?c(p,i[i.indexOf(p)+1]):a(p)}function f(p){const g=i.indexOf(p);return g===0?a(i[1]):g===i.length-1?l(i[g]):c(p,i[i.indexOf(p)+1]).replace("@media","@media not all and")}return{keys:i,values:o,up:a,down:l,between:c,only:d,not:f,unit:n,...s}}function j_e(t,e){if(!t.containerQueries)return e;const n=Object.keys(e).filter(r=>r.startsWith("@container")).sort((r,s)=>{var i,a;const o=/min-width:\s*([0-9.]+)/;return+(((i=r.match(o))==null?void 0:i[1])||0)-+(((a=s.match(o))==null?void 0:a[1])||0)});return n.length?n.reduce((r,s)=>{const o=e[s];return delete r[s],r[s]=o,r},{...e}):e}function z_e(t,e){return e==="@"||e.startsWith("@")&&(t.some(n=>e.startsWith(`@${n}`))||!!e.match(/^@\d/))}function V_e(t,e){const n=e.match(/^@([^/]+)?\/?(.+)?$/);if(!n)return null;const[,r,s]=n,o=Number.isNaN(+r)?r||0:+r;return t.containerQueries(s).up(o)}function W_e(t){const e=(o,i)=>o.replace("@media",i?`@container ${i}`:"@container");function n(o,i){o.up=(...a)=>e(t.breakpoints.up(...a),i),o.down=(...a)=>e(t.breakpoints.down(...a),i),o.between=(...a)=>e(t.breakpoints.between(...a),i),o.only=(...a)=>e(t.breakpoints.only(...a),i),o.not=(...a)=>{const l=e(t.breakpoints.not(...a),i);return l.includes("not all and")?l.replace("not all and ","").replace("min-width:","width<").replace("max-width:","width>").replace("and","or"):l}}const r={},s=o=>(n(r,o),r);return n(s),{...t,containerQueries:s}}const U_e={borderRadius:4};function gg(t,e){return e?oo(t,e,{clone:!1}):t}const yC={xs:0,sm:600,md:900,lg:1200,xl:1536},LP={keys:["xs","sm","md","lg","xl"],up:t=>`@media (min-width:${yC[t]}px)`},H_e={containerQueries:t=>({up:e=>{let n=typeof e=="number"?e:yC[e]||e;return typeof n=="number"&&(n=`${n}px`),t?`@container ${t} (min-width:${n})`:`@container (min-width:${n})`}})};function uc(t,e,n){const r=t.theme||{};if(Array.isArray(e)){const o=r.breakpoints||LP;return e.reduce((i,a,l)=>(i[o.up(o.keys[l])]=n(e[l]),i),{})}if(typeof e=="object"){const o=r.breakpoints||LP;return Object.keys(e).reduce((i,a)=>{if(z_e(o.keys,a)){const l=V_e(r.containerQueries?r:H_e,a);l&&(i[l]=n(e[a],a))}else if(Object.keys(o.values||yC).includes(a)){const l=o.up(a);i[l]=n(e[a],a)}else{const l=a;i[l]=e[l]}return i},{})}return n(e)}function G_e(t={}){var n;return((n=t.keys)==null?void 0:n.reduce((r,s)=>{const o=t.up(s);return r[o]={},r},{}))||{}}function q_e(t,e){return t.reduce((n,r)=>{const s=n[r];return(!s||Object.keys(s).length===0)&&delete n[r],n},e)}function Qe(t){if(typeof t!="string")throw new Error(cc(7));return t.charAt(0).toUpperCase()+t.slice(1)}function bC(t,e,n=!0){if(!e||typeof e!="string")return null;if(t&&t.vars&&n){const r=`vars.${e}`.split(".").reduce((s,o)=>s&&s[o]?s[o]:null,t);if(r!=null)return r}return e.split(".").reduce((r,s)=>r&&r[s]!=null?r[s]:null,t)}function cw(t,e,n,r=n){let s;return typeof t=="function"?s=t(n):Array.isArray(t)?s=t[n]||r:s=bC(t,n)||r,e&&(s=e(s,r,t)),s}function jr(t){const{prop:e,cssProperty:n=t.prop,themeKey:r,transform:s}=t,o=i=>{if(i[e]==null)return null;const a=i[e],l=i.theme,c=bC(l,r)||{};return uc(i,a,f=>{let p=cw(c,s,f);return f===p&&typeof f=="string"&&(p=cw(c,s,`${e}${f==="default"?"":Qe(f)}`,f)),n===!1?p:{[n]:p}})};return o.propTypes={},o.filterProps=[e],o}function X_e(t){const e={};return n=>(e[n]===void 0&&(e[n]=t(n)),e[n])}const K_e={m:"margin",p:"padding"},Y_e={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},BP={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},Z_e=X_e(t=>{if(t.length>2)if(BP[t])t=BP[t];else return[t];const[e,n]=t.split(""),r=K_e[e],s=Y_e[n]||"";return Array.isArray(s)?s.map(o=>r+o):[r+s]}),ED=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],ID=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...ED,...ID];function Q1(t,e,n,r){const s=bC(t,e,!0)??n;return typeof s=="number"||typeof s=="string"?o=>typeof o=="string"?o:typeof s=="string"?s.startsWith("var(")&&o===0?0:s.startsWith("var(")&&o===1?s:`calc(${o} * ${s})`:s*o:Array.isArray(s)?o=>{if(typeof o=="string")return o;const i=Math.abs(o),a=s[i];return o>=0?a:typeof a=="number"?-a:typeof a=="string"&&a.startsWith("var(")?`calc(-1 * ${a})`:`-${a}`}:typeof s=="function"?s:()=>{}}function kD(t){return Q1(t,"spacing",8)}function J1(t,e){return typeof e=="string"||e==null?e:t(e)}function Q_e(t,e){return n=>t.reduce((r,s)=>(r[s]=J1(e,n),r),{})}function J_e(t,e,n,r){if(!e.includes(n))return null;const s=Z_e(n),o=Q_e(s,r),i=t[n];return uc(t,i,o)}function HW(t,e){const n=kD(t.theme);return Object.keys(t).map(r=>J_e(t,e,r,n)).reduce(gg,{})}function Er(t){return HW(t,ED)}Er.propTypes={};Er.filterProps=ED;function Ir(t){return HW(t,ID)}Ir.propTypes={};Ir.filterProps=ID;function GW(t=8,e=kD({spacing:t})){if(t.mui)return t;const n=(...r)=>(r.length===0?[1]:r).map(o=>{const i=e(o);return typeof i=="number"?`${i}px`:i}).join(" ");return n.mui=!0,n}function wC(...t){const e=t.reduce((r,s)=>(s.filterProps.forEach(o=>{r[o]=s}),r),{}),n=r=>Object.keys(r).reduce((s,o)=>e[o]?gg(s,e[o](r)):s,{});return n.propTypes={},n.filterProps=t.reduce((r,s)=>r.concat(s.filterProps),[]),n}function Mi(t){return typeof t!="number"?t:`${t}px solid`}function ua(t,e){return jr({prop:t,themeKey:"borders",transform:e})}const ePe=ua("border",Mi),tPe=ua("borderTop",Mi),nPe=ua("borderRight",Mi),rPe=ua("borderBottom",Mi),sPe=ua("borderLeft",Mi),oPe=ua("borderColor"),iPe=ua("borderTopColor"),aPe=ua("borderRightColor"),lPe=ua("borderBottomColor"),cPe=ua("borderLeftColor"),uPe=ua("outline",Mi),dPe=ua("outlineColor"),vC=t=>{if(t.borderRadius!==void 0&&t.borderRadius!==null){const e=Q1(t.theme,"shape.borderRadius",4),n=r=>({borderRadius:J1(e,r)});return uc(t,t.borderRadius,n)}return null};vC.propTypes={};vC.filterProps=["borderRadius"];wC(ePe,tPe,nPe,rPe,sPe,oPe,iPe,aPe,lPe,cPe,vC,uPe,dPe);const CC=t=>{if(t.gap!==void 0&&t.gap!==null){const e=Q1(t.theme,"spacing",8),n=r=>({gap:J1(e,r)});return uc(t,t.gap,n)}return null};CC.propTypes={};CC.filterProps=["gap"];const SC=t=>{if(t.columnGap!==void 0&&t.columnGap!==null){const e=Q1(t.theme,"spacing",8),n=r=>({columnGap:J1(e,r)});return uc(t,t.columnGap,n)}return null};SC.propTypes={};SC.filterProps=["columnGap"];const NC=t=>{if(t.rowGap!==void 0&&t.rowGap!==null){const e=Q1(t.theme,"spacing",8),n=r=>({rowGap:J1(e,r)});return uc(t,t.rowGap,n)}return null};NC.propTypes={};NC.filterProps=["rowGap"];const fPe=jr({prop:"gridColumn"}),hPe=jr({prop:"gridRow"}),pPe=jr({prop:"gridAutoFlow"}),mPe=jr({prop:"gridAutoColumns"}),gPe=jr({prop:"gridAutoRows"}),xPe=jr({prop:"gridTemplateColumns"}),yPe=jr({prop:"gridTemplateRows"}),bPe=jr({prop:"gridTemplateAreas"}),wPe=jr({prop:"gridArea"});wC(CC,SC,NC,fPe,hPe,pPe,mPe,gPe,xPe,yPe,bPe,wPe);function Dh(t,e){return e==="grey"?e:t}const vPe=jr({prop:"color",themeKey:"palette",transform:Dh}),CPe=jr({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:Dh}),SPe=jr({prop:"backgroundColor",themeKey:"palette",transform:Dh});wC(vPe,CPe,SPe);function ui(t){return t<=1&&t!==0?`${t*100}%`:t}const NPe=jr({prop:"width",transform:ui}),TD=t=>{if(t.maxWidth!==void 0&&t.maxWidth!==null){const e=n=>{var s,o,i,a,l;const r=((i=(o=(s=t.theme)==null?void 0:s.breakpoints)==null?void 0:o.values)==null?void 0:i[n])||yC[n];return r?((l=(a=t.theme)==null?void 0:a.breakpoints)==null?void 0:l.unit)!=="px"?{maxWidth:`${r}${t.theme.breakpoints.unit}`}:{maxWidth:r}:{maxWidth:ui(n)}};return uc(t,t.maxWidth,e)}return null};TD.filterProps=["maxWidth"];const EPe=jr({prop:"minWidth",transform:ui}),IPe=jr({prop:"height",transform:ui}),kPe=jr({prop:"maxHeight",transform:ui}),TPe=jr({prop:"minHeight",transform:ui});jr({prop:"size",cssProperty:"width",transform:ui});jr({prop:"size",cssProperty:"height",transform:ui});const APe=jr({prop:"boxSizing"});wC(NPe,TD,EPe,IPe,kPe,TPe,APe);const ex={border:{themeKey:"borders",transform:Mi},borderTop:{themeKey:"borders",transform:Mi},borderRight:{themeKey:"borders",transform:Mi},borderBottom:{themeKey:"borders",transform:Mi},borderLeft:{themeKey:"borders",transform:Mi},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:Mi},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:vC},color:{themeKey:"palette",transform:Dh},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:Dh},backgroundColor:{themeKey:"palette",transform:Dh},p:{style:Ir},pt:{style:Ir},pr:{style:Ir},pb:{style:Ir},pl:{style:Ir},px:{style:Ir},py:{style:Ir},padding:{style:Ir},paddingTop:{style:Ir},paddingRight:{style:Ir},paddingBottom:{style:Ir},paddingLeft:{style:Ir},paddingX:{style:Ir},paddingY:{style:Ir},paddingInline:{style:Ir},paddingInlineStart:{style:Ir},paddingInlineEnd:{style:Ir},paddingBlock:{style:Ir},paddingBlockStart:{style:Ir},paddingBlockEnd:{style:Ir},m:{style:Er},mt:{style:Er},mr:{style:Er},mb:{style:Er},ml:{style:Er},mx:{style:Er},my:{style:Er},margin:{style:Er},marginTop:{style:Er},marginRight:{style:Er},marginBottom:{style:Er},marginLeft:{style:Er},marginX:{style:Er},marginY:{style:Er},marginInline:{style:Er},marginInlineStart:{style:Er},marginInlineEnd:{style:Er},marginBlock:{style:Er},marginBlockStart:{style:Er},marginBlockEnd:{style:Er},displayPrint:{cssProperty:!1,transform:t=>({"@media print":{display:t}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:CC},rowGap:{style:NC},columnGap:{style:SC},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:ui},maxWidth:{style:TD},minWidth:{transform:ui},height:{transform:ui},maxHeight:{transform:ui},minHeight:{transform:ui},boxSizing:{},font:{themeKey:"font"},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}};function RPe(...t){const e=t.reduce((r,s)=>r.concat(Object.keys(s)),[]),n=new Set(e);return t.every(r=>n.size===Object.keys(r).length)}function DPe(t,e){return typeof t=="function"?t(e):t}function $Pe(){function t(n,r,s,o){const i={[n]:r,theme:s},a=o[n];if(!a)return{[n]:r};const{cssProperty:l=n,themeKey:c,transform:d,style:f}=a;if(r==null)return null;if(c==="typography"&&r==="inherit")return{[n]:r};const p=bC(s,c)||{};return f?f(i):uc(i,r,x=>{let b=cw(p,d,x);return x===b&&typeof x=="string"&&(b=cw(p,d,`${n}${x==="default"?"":Qe(x)}`,x)),l===!1?b:{[l]:b}})}function e(n){const{sx:r,theme:s={}}=n||{};if(!r)return null;const o=s.unstable_sxConfig??ex;function i(a){let l=a;if(typeof a=="function")l=a(s);else if(typeof a!="object")return a;if(!l)return null;const c=G_e(s.breakpoints),d=Object.keys(c);let f=c;return Object.keys(l).forEach(p=>{const g=DPe(l[p],s);if(g!=null)if(typeof g=="object")if(o[p])f=gg(f,t(p,g,s,o));else{const x=uc({theme:s},g,b=>({[p]:b}));RPe(x,g)?f[p]=e({sx:g,theme:s}):f=gg(f,x)}else f=gg(f,t(p,g,s,o))}),j_e(s,q_e(d,f))}return Array.isArray(r)?r.map(i):i(r)}return e}const Jd=$Pe();Jd.filterProps=["sx"];function OPe(t,e){var r;const n=this;if(n.vars){if(!((r=n.colorSchemes)!=null&&r[t])||typeof n.getColorSchemeSelector!="function")return{};let s=n.getColorSchemeSelector(t);return s==="&"?e:((s.includes("data-")||s.includes("."))&&(s=`*:where(${s.replace(/\s*&$/,"")}) &`),{[s]:e})}return n.palette.mode===t?e:{}}function EC(t={},...e){const{breakpoints:n={},palette:r={},spacing:s,shape:o={},...i}=t,a=B_e(n),l=GW(s);let c=oo({breakpoints:a,direction:"ltr",components:{},palette:{mode:"light",...r},spacing:l,shape:{...U_e,...o}},i);return c=W_e(c),c.applyStyles=OPe,c=e.reduce((d,f)=>oo(d,f),c),c.unstable_sxConfig={...ex,...i==null?void 0:i.unstable_sxConfig},c.unstable_sx=function(f){return Jd({sx:f,theme:this})},c}function _Pe(t){return Object.keys(t).length===0}function qW(t=null){const e=A.useContext(aC);return!e||_Pe(e)?t:e}const PPe=EC();function tx(t=PPe){return qW(t)}function FPe({styles:t,themeId:e,defaultTheme:n={}}){const r=tx(n),s=typeof t=="function"?t(e&&r[e]||r):t;return S.jsx(__e,{styles:s})}const MPe=t=>{var r;const e={systemProps:{},otherProps:{}},n=((r=t==null?void 0:t.theme)==null?void 0:r.unstable_sxConfig)??ex;return Object.keys(t).forEach(s=>{n[s]?e.systemProps[s]=t[s]:e.otherProps[s]=t[s]}),e};function AD(t){const{sx:e,...n}=t,{systemProps:r,otherProps:s}=MPe(n);let o;return Array.isArray(e)?o=[r,...e]:typeof e=="function"?o=(...i)=>{const a=e(...i);return fl(a)?{...r,...a}:r}:o={...r,...e},{...s,sx:o}}const jP=t=>t,LPe=()=>{let t=jP;return{configure(e){t=e},generate(e){return t(e)},reset(){t=jP}}},XW=LPe();function KW(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=KW(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function st(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=KW(t))&&(r&&(r+=" "),r+=e);return r}function BPe(t={}){const{themeId:e,defaultTheme:n,defaultClassName:r="MuiBox-root",generateClassName:s}=t,o=zW("div",{shouldForwardProp:a=>a!=="theme"&&a!=="sx"&&a!=="as"})(Jd);return A.forwardRef(function(l,c){const d=tx(n),{className:f,component:p="div",...g}=AD(l);return S.jsx(o,{as:p,ref:c,className:st(f,s?s(r):r),theme:e&&d[e]||d,...g})})}const jPe={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function Nt(t,e,n="Mui"){const r=jPe[e];return r?`${n}-${r}`:`${XW.generate(t)}-${e}`}function gt(t,e,n="Mui"){const r={};return e.forEach(s=>{r[s]=Nt(t,s,n)}),r}function YW(t){const{variants:e,...n}=t,r={variants:e,style:MP(n),isProcessed:!0};return r.style===n||e&&e.forEach(s=>{typeof s.style!="function"&&(s.style=MP(s.style))}),r}const zPe=EC();function vl(t){return t!=="ownerState"&&t!=="theme"&&t!=="sx"&&t!=="as"}function VPe(t){return t?(e,n)=>n[t]:null}function WPe(t,e,n){t.theme=HPe(t.theme)?n:t.theme[e]||t.theme}function By(t,e){const n=typeof e=="function"?e(t):e;if(Array.isArray(n))return n.flatMap(r=>By(t,r));if(Array.isArray(n==null?void 0:n.variants)){let r;if(n.isProcessed)r=n.style;else{const{variants:s,...o}=n;r=o}return ZW(t,n.variants,[r])}return n!=null&&n.isProcessed?n.style:n}function ZW(t,e,n=[]){var s;let r;e:for(let o=0;o<e.length;o+=1){const i=e[o];if(typeof i.props=="function"){if(r??(r={...t,...t.ownerState,ownerState:t.ownerState}),!i.props(r))continue}else for(const a in i.props)if(t[a]!==i.props[a]&&((s=t.ownerState)==null?void 0:s[a])!==i.props[a])continue e;typeof i.style=="function"?(r??(r={...t,...t.ownerState,ownerState:t.ownerState}),n.push(i.style(r))):n.push(i.style)}return n}function QW(t={}){const{themeId:e,defaultTheme:n=zPe,rootShouldForwardProp:r=vl,slotShouldForwardProp:s=vl}=t;function o(a){WPe(a,e,n)}return(a,l={})=>{P_e(a,R=>R.filter($=>$!==Jd));const{name:c,slot:d,skipVariantsResolver:f,skipSx:p,overridesResolver:g=VPe(qPe(d)),...x}=l,b=f!==void 0?f:d&&d!=="Root"&&d!=="root"||!1,w=p||!1;let C=vl;d==="Root"||d==="root"?C=r:d?C=s:GPe(a)&&(C=void 0);const N=zW(a,{shouldForwardProp:C,label:UPe(),...x}),k=R=>{if(typeof R=="function"&&R.__emotion_real!==R)return function(O){return By(O,R)};if(fl(R)){const $=YW(R);return $.variants?function(F){return By(F,$)}:$.style}return R},I=(...R)=>{const $=[],O=R.map(k),F=[];if($.push(o),c&&g&&F.push(function(B){var G,Z;const q=(Z=(G=B.theme.components)==null?void 0:G[c])==null?void 0:Z.styleOverrides;if(!q)return null;const j={};for(const J in q)j[J]=By(B,q[J]);return g(B,j)}),c&&!b&&F.push(function(B){var j,G;const W=B.theme,q=(G=(j=W==null?void 0:W.components)==null?void 0:j[c])==null?void 0:G.variants;return q?ZW(B,q):null}),w||F.push(Jd),Array.isArray(O[0])){const V=O.shift(),B=new Array($.length).fill(""),W=new Array(F.length).fill("");let q;q=[...B,...V,...W],q.raw=[...B,...V.raw,...W],$.unshift(q)}const M=[...$,...O,...F],_=N(...M);return a.muiName&&(_.muiName=a.muiName),_};return N.withConfig&&(I.withConfig=N.withConfig),I}}function UPe(t,e){return void 0}function HPe(t){for(const e in t)return!1;return!0}function GPe(t){return typeof t=="string"&&t.charCodeAt(0)>96}function qPe(t){return t&&t.charAt(0).toLowerCase()+t.slice(1)}const XPe=QW();function u0(t,e){const n={...e};for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)){const s=r;if(s==="components"||s==="slots")n[s]={...t[s],...n[s]};else if(s==="componentsProps"||s==="slotProps"){const o=t[s],i=e[s];if(!i)n[s]=o||{};else if(!o)n[s]=i;else{n[s]={...i};for(const a in o)if(Object.prototype.hasOwnProperty.call(o,a)){const l=a;n[s][l]=u0(o[l],i[l])}}}else n[s]===void 0&&(n[s]=t[s])}return n}function JW(t){const{theme:e,name:n,props:r}=t;return!e||!e.components||!e.components[n]||!e.components[n].defaultProps?r:u0(e.components[n].defaultProps,r)}function eU({props:t,name:e,defaultTheme:n,themeId:r}){let s=tx(n);return r&&(s=s[r]||s),JW({theme:s,name:e,props:t})}const ts=typeof window<"u"?A.useLayoutEffect:A.useEffect;function KPe(t,e,n,r,s){const[o,i]=A.useState(()=>s&&n?n(t).matches:r?r(t).matches:e);return ts(()=>{if(!n)return;const a=n(t),l=()=>{i(a.matches)};return l(),a.addEventListener("change",l),()=>{a.removeEventListener("change",l)}},[t,n]),o}const YPe={...Sl},tU=YPe.useSyncExternalStore;function ZPe(t,e,n,r,s){const o=A.useCallback(()=>e,[e]),i=A.useMemo(()=>{if(s&&n)return()=>n(t).matches;if(r!==null){const{matches:d}=r(t);return()=>d}return o},[o,t,r,s,n]),[a,l]=A.useMemo(()=>{if(n===null)return[o,()=>()=>{}];const d=n(t);return[()=>d.matches,f=>(d.addEventListener("change",f),()=>{d.removeEventListener("change",f)})]},[o,n,t]);return tU(l,a,i)}function nU(t={}){const{themeId:e}=t;return function(r,s={}){let o=qW();o&&e&&(o=o[e]||o);const i=typeof window<"u"&&typeof window.matchMedia<"u",{defaultMatches:a=!1,matchMedia:l=i?window.matchMedia:null,ssrMatchMedia:c=null,noSsr:d=!1}=JW({name:"MuiUseMediaQuery",props:s,theme:o});let f=typeof r=="function"?r(o):r;return f=f.replace(/^@media( ?)/m,""),f.includes("print")&&console.warn(["MUI: You have provided a `print` query to the `useMediaQuery` hook.","Using the print media query to modify print styles can lead to unexpected results.","Consider using the `displayPrint` field in the `sx` prop instead.","More information about `displayPrint` on our docs: https://mui.com/system/display/#display-in-print."].join(`
`)),(tU!==void 0?ZPe:KPe)(f,a,l,c,d)}}nU();function QPe(t,e=Number.MIN_SAFE_INTEGER,n=Number.MAX_SAFE_INTEGER){return Math.max(e,Math.min(t,n))}function RD(t,e=0,n=1){return QPe(t,e,n)}function JPe(t){t=t.slice(1);const e=new RegExp(`.{1,${t.length>=6?2:1}}`,"g");let n=t.match(e);return n&&n[0].length===1&&(n=n.map(r=>r+r)),n?`rgb${n.length===4?"a":""}(${n.map((r,s)=>s<3?parseInt(r,16):Math.round(parseInt(r,16)/255*1e3)/1e3).join(", ")})`:""}function vu(t){if(t.type)return t;if(t.charAt(0)==="#")return vu(JPe(t));const e=t.indexOf("("),n=t.substring(0,e);if(!["rgb","rgba","hsl","hsla","color"].includes(n))throw new Error(cc(9,t));let r=t.substring(e+1,t.length-1),s;if(n==="color"){if(r=r.split(" "),s=r.shift(),r.length===4&&r[3].charAt(0)==="/"&&(r[3]=r[3].slice(1)),!["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].includes(s))throw new Error(cc(10,s))}else r=r.split(",");return r=r.map(o=>parseFloat(o)),{type:n,values:r,colorSpace:s}}const eFe=t=>{const e=vu(t);return e.values.slice(0,3).map((n,r)=>e.type.includes("hsl")&&r!==0?`${n}%`:n).join(" ")},Ym=(t,e)=>{try{return eFe(t)}catch{return t}};function IC(t){const{type:e,colorSpace:n}=t;let{values:r}=t;return e.includes("rgb")?r=r.map((s,o)=>o<3?parseInt(s,10):s):e.includes("hsl")&&(r[1]=`${r[1]}%`,r[2]=`${r[2]}%`),e.includes("color")?r=`${n} ${r.join(" ")}`:r=`${r.join(", ")}`,`${e}(${r})`}function rU(t){t=vu(t);const{values:e}=t,n=e[0],r=e[1]/100,s=e[2]/100,o=r*Math.min(s,1-s),i=(c,d=(c+n/30)%12)=>s-o*Math.max(Math.min(d-3,9-d,1),-1);let a="rgb";const l=[Math.round(i(0)*255),Math.round(i(8)*255),Math.round(i(4)*255)];return t.type==="hsla"&&(a+="a",l.push(e[3])),IC({type:a,values:l})}function HI(t){t=vu(t);let e=t.type==="hsl"||t.type==="hsla"?vu(rU(t)).values:t.values;return e=e.map(n=>(t.type!=="color"&&(n/=255),n<=.03928?n/12.92:((n+.055)/1.055)**2.4)),Number((.2126*e[0]+.7152*e[1]+.0722*e[2]).toFixed(3))}function tFe(t,e){const n=HI(t),r=HI(e);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)}function pn(t,e){return t=vu(t),e=RD(e),(t.type==="rgb"||t.type==="hsl")&&(t.type+="a"),t.type==="color"?t.values[3]=`/${e}`:t.values[3]=e,IC(t)}function oy(t,e,n){try{return pn(t,e)}catch{return t}}function ip(t,e){if(t=vu(t),e=RD(e),t.type.includes("hsl"))t.values[2]*=1-e;else if(t.type.includes("rgb")||t.type.includes("color"))for(let n=0;n<3;n+=1)t.values[n]*=1-e;return IC(t)}function Vn(t,e,n){try{return ip(t,e)}catch{return t}}function ap(t,e){if(t=vu(t),e=RD(e),t.type.includes("hsl"))t.values[2]+=(100-t.values[2])*e;else if(t.type.includes("rgb"))for(let n=0;n<3;n+=1)t.values[n]+=(255-t.values[n])*e;else if(t.type.includes("color"))for(let n=0;n<3;n+=1)t.values[n]+=(1-t.values[n])*e;return IC(t)}function Wn(t,e,n){try{return ap(t,e)}catch{return t}}function nFe(t,e=.15){return HI(t)>.5?ip(t,e):ap(t,e)}function iy(t,e,n){try{return nFe(t,e)}catch{return t}}const rFe=A.createContext(),Wa=()=>A.useContext(rFe)??!1,sFe=A.createContext(void 0);function oFe(t){const{theme:e,name:n,props:r}=t;if(!e||!e.components||!e.components[n])return r;const s=e.components[n];return s.defaultProps?u0(s.defaultProps,r):!s.styleOverrides&&!s.variants?u0(s,r):r}function iFe({props:t,name:e}){const n=A.useContext(sFe);return oFe({props:t,name:e,theme:{components:n}})}const zP={theme:void 0};function aFe(t){let e,n;return function(s){let o=e;return(o===void 0||s.theme!==n)&&(zP.theme=s.theme,o=YW(t(zP)),e=o,n=s.theme),o}}function lFe(t=""){function e(...r){if(!r.length)return"";const s=r[0];return typeof s=="string"&&!s.match(/(#|\(|\)|(-?(\d*\.)?\d+)(px|em|%|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc))|^(-?(\d*\.)?\d+)$|(\d+ \d+ \d+)/)?`, var(--${t?`${t}-`:""}${s}${e(...r.slice(1))})`:`, ${s}`}return(r,...s)=>`var(--${t?`${t}-`:""}${r}${e(...s)})`}const VP=(t,e,n,r=[])=>{let s=t;e.forEach((o,i)=>{i===e.length-1?Array.isArray(s)?s[Number(o)]=n:s&&typeof s=="object"&&(s[o]=n):s&&typeof s=="object"&&(s[o]||(s[o]=r.includes(o)?[]:{}),s=s[o])})},cFe=(t,e,n)=>{function r(s,o=[],i=[]){Object.entries(s).forEach(([a,l])=>{(!n||n&&!n([...o,a]))&&l!=null&&(typeof l=="object"&&Object.keys(l).length>0?r(l,[...o,a],Array.isArray(l)?[...i,a]:i):e([...o,a],l,i))})}r(t)},uFe=(t,e)=>typeof e=="number"?["lineHeight","fontWeight","opacity","zIndex"].some(r=>t.includes(r))||t[t.length-1].toLowerCase().includes("opacity")?e:`${e}px`:e;function gN(t,e){const{prefix:n,shouldSkipGeneratingVar:r}=e||{},s={},o={},i={};return cFe(t,(a,l,c)=>{if((typeof l=="string"||typeof l=="number")&&(!r||!r(a,l))){const d=`--${n?`${n}-`:""}${a.join("-")}`,f=uFe(a,l);Object.assign(s,{[d]:f}),VP(o,a,`var(${d})`,c),VP(i,a,`var(${d}, ${f})`,c)}},a=>a[0]==="vars"),{css:s,vars:o,varsWithDefaults:i}}function dFe(t,e={}){const{getSelector:n=w,disableCssColorScheme:r,colorSchemeSelector:s}=e,{colorSchemes:o={},components:i,defaultColorScheme:a="light",...l}=t,{vars:c,css:d,varsWithDefaults:f}=gN(l,e);let p=f;const g={},{[a]:x,...b}=o;if(Object.entries(b||{}).forEach(([k,I])=>{const{vars:R,css:$,varsWithDefaults:O}=gN(I,e);p=oo(p,O),g[k]={css:$,vars:R}}),x){const{css:k,vars:I,varsWithDefaults:R}=gN(x,e);p=oo(p,R),g[a]={css:k,vars:I}}function w(k,I){var $,O;let R=s;if(s==="class"&&(R=".%s"),s==="data"&&(R="[data-%s]"),s!=null&&s.startsWith("data-")&&!s.includes("%s")&&(R=`[${s}="%s"]`),k){if(R==="media")return t.defaultColorScheme===k?":root":{[`@media (prefers-color-scheme: ${((O=($=o[k])==null?void 0:$.palette)==null?void 0:O.mode)||k})`]:{":root":I}};if(R)return t.defaultColorScheme===k?`:root, ${R.replace("%s",String(k))}`:R.replace("%s",String(k))}return":root"}return{vars:p,generateThemeVars:()=>{let k={...c};return Object.entries(g).forEach(([,{vars:I}])=>{k=oo(k,I)}),k},generateStyleSheets:()=>{var F,M;const k=[],I=t.defaultColorScheme||"light";function R(_,V){Object.keys(V).length&&k.push(typeof _=="string"?{[_]:{...V}}:_)}R(n(void 0,{...d}),d);const{[I]:$,...O}=g;if($){const{css:_}=$,V=(M=(F=o[I])==null?void 0:F.palette)==null?void 0:M.mode,B=!r&&V?{colorScheme:V,..._}:{..._};R(n(I,{...B}),B)}return Object.entries(O).forEach(([_,{css:V}])=>{var q,j;const B=(j=(q=o[_])==null?void 0:q.palette)==null?void 0:j.mode,W=!r&&B?{colorScheme:B,...V}:{...V};R(n(_,{...W}),W)}),k}}}function fFe(t){return function(n){return t==="media"?`@media (prefers-color-scheme: ${n})`:t?t.startsWith("data-")&&!t.includes("%s")?`[${t}="${n}"] &`:t==="class"?`.${n} &`:t==="data"?`[data-${n}] &`:`${t.replace("%s",n)} &`:"&"}}function vt(t,e,n=void 0){const r={};for(const s in t){const o=t[s];let i="",a=!0;for(let l=0;l<o.length;l+=1){const c=o[l];c&&(i+=(a===!0?"":" ")+e(c),a=!1,n&&n[c]&&(i+=" "+n[c]))}r[s]=i}return r}function xg(t,e){var n,r,s;return A.isValidElement(t)&&e.indexOf(t.type.muiName??((s=(r=(n=t.type)==null?void 0:n._payload)==null?void 0:r.value)==null?void 0:s.muiName))!==-1}const hFe=(t,e)=>t.filter(n=>e.includes(n)),qp=(t,e,n)=>{const r=t.keys[0];Array.isArray(e)?e.forEach((s,o)=>{n((i,a)=>{o<=t.keys.length-1&&(o===0?Object.assign(i,a):i[t.up(t.keys[o])]=a)},s)}):e&&typeof e=="object"?(Object.keys(e).length>t.keys.length?t.keys:hFe(t.keys,Object.keys(e))).forEach(o=>{if(t.keys.includes(o)){const i=e[o];i!==void 0&&n((a,l)=>{r===o?Object.assign(a,l):a[t.up(o)]=l},i)}}):(typeof e=="number"||typeof e=="string")&&n((s,o)=>{Object.assign(s,o)},e)};function uw(t){return`--Grid-${t}Spacing`}function kC(t){return`--Grid-parent-${t}Spacing`}const WP="--Grid-columns",$h="--Grid-parent-columns",pFe=({theme:t,ownerState:e})=>{const n={};return qp(t.breakpoints,e.size,(r,s)=>{let o={};s==="grow"&&(o={flexBasis:0,flexGrow:1,maxWidth:"100%"}),s==="auto"&&(o={flexBasis:"auto",flexGrow:0,flexShrink:0,maxWidth:"none",width:"auto"}),typeof s=="number"&&(o={flexGrow:0,flexBasis:"auto",width:`calc(100% * ${s} / var(${$h}) - (var(${$h}) - ${s}) * (var(${kC("column")}) / var(${$h})))`}),r(n,o)}),n},mFe=({theme:t,ownerState:e})=>{const n={};return qp(t.breakpoints,e.offset,(r,s)=>{let o={};s==="auto"&&(o={marginLeft:"auto"}),typeof s=="number"&&(o={marginLeft:s===0?"0px":`calc(100% * ${s} / var(${$h}) + var(${kC("column")}) * ${s} / var(${$h}))`}),r(n,o)}),n},gFe=({theme:t,ownerState:e})=>{if(!e.container)return{};const n={[WP]:12};return qp(t.breakpoints,e.columns,(r,s)=>{const o=s??12;r(n,{[WP]:o,"> *":{[$h]:o}})}),n},xFe=({theme:t,ownerState:e})=>{if(!e.container)return{};const n={};return qp(t.breakpoints,e.rowSpacing,(r,s)=>{var i;const o=typeof s=="string"?s:(i=t.spacing)==null?void 0:i.call(t,s);r(n,{[uw("row")]:o,"> *":{[kC("row")]:o}})}),n},yFe=({theme:t,ownerState:e})=>{if(!e.container)return{};const n={};return qp(t.breakpoints,e.columnSpacing,(r,s)=>{var i;const o=typeof s=="string"?s:(i=t.spacing)==null?void 0:i.call(t,s);r(n,{[uw("column")]:o,"> *":{[kC("column")]:o}})}),n},bFe=({theme:t,ownerState:e})=>{if(!e.container)return{};const n={};return qp(t.breakpoints,e.direction,(r,s)=>{r(n,{flexDirection:s})}),n},wFe=({ownerState:t})=>({minWidth:0,boxSizing:"border-box",...t.container&&{display:"flex",flexWrap:"wrap",...t.wrap&&t.wrap!=="wrap"&&{flexWrap:t.wrap},gap:`var(${uw("row")}) var(${uw("column")})`}}),vFe=t=>{const e=[];return Object.entries(t).forEach(([n,r])=>{r!==!1&&r!==void 0&&e.push(`grid-${n}-${String(r)}`)}),e},CFe=(t,e="xs")=>{function n(r){return r===void 0?!1:typeof r=="string"&&!Number.isNaN(Number(r))||typeof r=="number"&&r>0}if(n(t))return[`spacing-${e}-${String(t)}`];if(typeof t=="object"&&!Array.isArray(t)){const r=[];return Object.entries(t).forEach(([s,o])=>{n(o)&&r.push(`spacing-${s}-${String(o)}`)}),r}return[]},SFe=t=>t===void 0?[]:typeof t=="object"?Object.entries(t).map(([e,n])=>`direction-${e}-${n}`):[`direction-xs-${String(t)}`];function NFe(t,e){t.item!==void 0&&delete t.item,t.zeroMinWidth!==void 0&&delete t.zeroMinWidth,e.keys.forEach(n=>{t[n]!==void 0&&delete t[n]})}const EFe=EC(),IFe=XPe("div",{name:"MuiGrid",slot:"Root"});function kFe(t){return eU({props:t,name:"MuiGrid",defaultTheme:EFe})}function TFe(t={}){const{createStyledComponent:e=IFe,useThemeProps:n=kFe,useTheme:r=tx,componentName:s="MuiGrid"}=t,o=(c,d)=>{const{container:f,direction:p,spacing:g,wrap:x,size:b}=c,w={root:["root",f&&"container",x!=="wrap"&&`wrap-xs-${String(x)}`,...SFe(p),...vFe(b),...f?CFe(g,d.breakpoints.keys[0]):[]]};return vt(w,C=>Nt(s,C),{})};function i(c,d,f=()=>!0){const p={};return c===null||(Array.isArray(c)?c.forEach((g,x)=>{g!==null&&f(g)&&d.keys[x]&&(p[d.keys[x]]=g)}):typeof c=="object"?Object.keys(c).forEach(g=>{const x=c[g];x!=null&&f(x)&&(p[g]=x)}):p[d.keys[0]]=c),p}const a=e(gFe,yFe,xFe,pFe,bFe,wFe,mFe),l=A.forwardRef(function(d,f){const p=r(),g=n(d),x=AD(g);NFe(x,p.breakpoints);const{className:b,children:w,columns:C=12,container:N=!1,component:k="div",direction:I="row",wrap:R="wrap",size:$={},offset:O={},spacing:F=0,rowSpacing:M=F,columnSpacing:_=F,unstable_level:V=0,...B}=x,W=i($,p.breakpoints,ne=>ne!==!1),q=i(O,p.breakpoints),j=d.columns??(V?void 0:C),G=d.spacing??(V?void 0:F),Z=d.rowSpacing??d.spacing??(V?void 0:M),J=d.columnSpacing??d.spacing??(V?void 0:_),X={...x,level:V,columns:j,container:N,direction:I,wrap:R,spacing:G,rowSpacing:Z,columnSpacing:J,size:W,offset:q},ee=o(X,p);return S.jsx(a,{ref:f,as:k,ownerState:X,className:st(ee.root,b),...B,children:A.Children.map(w,ne=>{var oe;return A.isValidElement(ne)&&xg(ne,["Grid"])&&N&&ne.props.container?A.cloneElement(ne,{unstable_level:((oe=ne.props)==null?void 0:oe.unstable_level)??V+1}):ne})})});return l.muiName="Grid",l}function sU(){return{text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:i0.white,default:i0.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}}}const AFe=sU();function oU(){return{text:{primary:i0.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:i0.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}}}const UP=oU();function HP(t,e,n,r){const s=r.light||r,o=r.dark||r*1.5;t[e]||(t.hasOwnProperty(n)?t[e]=t[n]:e==="light"?t.light=ap(t.main,s):e==="dark"&&(t.dark=ip(t.main,o)))}function RFe(t="light"){return t==="dark"?{main:jf[200],light:jf[50],dark:jf[400]}:{main:jf[700],light:jf[400],dark:jf[800]}}function DFe(t="light"){return t==="dark"?{main:Bf[200],light:Bf[50],dark:Bf[400]}:{main:Bf[500],light:Bf[300],dark:Bf[700]}}function $Fe(t="light"){return t==="dark"?{main:Lf[500],light:Lf[300],dark:Lf[700]}:{main:Lf[700],light:Lf[400],dark:Lf[800]}}function OFe(t="light"){return t==="dark"?{main:zf[400],light:zf[300],dark:zf[700]}:{main:zf[700],light:zf[500],dark:zf[900]}}function _Fe(t="light"){return t==="dark"?{main:Vf[400],light:Vf[300],dark:Vf[700]}:{main:Vf[800],light:Vf[500],dark:Vf[900]}}function PFe(t="light"){return t==="dark"?{main:Em[400],light:Em[300],dark:Em[700]}:{main:"#ed6c02",light:Em[500],dark:Em[900]}}function DD(t){const{mode:e="light",contrastThreshold:n=3,tonalOffset:r=.2,...s}=t,o=t.primary||RFe(e),i=t.secondary||DFe(e),a=t.error||$Fe(e),l=t.info||OFe(e),c=t.success||_Fe(e),d=t.warning||PFe(e);function f(b){return tFe(b,UP.text.primary)>=n?UP.text.primary:AFe.text.primary}const p=({color:b,name:w,mainShade:C=500,lightShade:N=300,darkShade:k=700})=>{if(b={...b},!b.main&&b[C]&&(b.main=b[C]),!b.hasOwnProperty("main"))throw new Error(cc(11,w?` (${w})`:"",C));if(typeof b.main!="string")throw new Error(cc(12,w?` (${w})`:"",JSON.stringify(b.main)));return HP(b,"light",N,r),HP(b,"dark",k,r),b.contrastText||(b.contrastText=f(b.main)),b};let g;return e==="light"?g=sU():e==="dark"&&(g=oU()),oo({common:{...i0},mode:e,primary:p({color:o,name:"primary"}),secondary:p({color:i,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:p({color:a,name:"error"}),warning:p({color:d,name:"warning"}),info:p({color:l,name:"info"}),success:p({color:c,name:"success"}),grey:S4e,contrastThreshold:n,getContrastText:f,augmentColor:p,tonalOffset:r,...g},s)}function FFe(t){const e={};return Object.entries(t).forEach(r=>{const[s,o]=r;typeof o=="object"&&(e[s]=`${o.fontStyle?`${o.fontStyle} `:""}${o.fontVariant?`${o.fontVariant} `:""}${o.fontWeight?`${o.fontWeight} `:""}${o.fontStretch?`${o.fontStretch} `:""}${o.fontSize||""}${o.lineHeight?`/${o.lineHeight} `:""}${o.fontFamily||""}`)}),e}function MFe(t,e){return{toolbar:{minHeight:56,[t.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[t.up("sm")]:{minHeight:64}},...e}}function LFe(t){return Math.round(t*1e5)/1e5}const GP={textTransform:"uppercase"},qP='"Roboto", "Helvetica", "Arial", sans-serif';function BFe(t,e){const{fontFamily:n=qP,fontSize:r=14,fontWeightLight:s=300,fontWeightRegular:o=400,fontWeightMedium:i=500,fontWeightBold:a=700,htmlFontSize:l=16,allVariants:c,pxToRem:d,...f}=typeof e=="function"?e(t):e,p=r/14,g=d||(w=>`${w/l*p}rem`),x=(w,C,N,k,I)=>({fontFamily:n,fontWeight:w,fontSize:g(C),lineHeight:N,...n===qP?{letterSpacing:`${LFe(k/C)}em`}:{},...I,...c}),b={h1:x(s,96,1.167,-1.5),h2:x(s,60,1.2,-.5),h3:x(o,48,1.167,0),h4:x(o,34,1.235,.25),h5:x(o,24,1.334,0),h6:x(i,20,1.6,.15),subtitle1:x(o,16,1.75,.15),subtitle2:x(i,14,1.57,.1),body1:x(o,16,1.5,.15),body2:x(o,14,1.43,.15),button:x(i,14,1.75,.4,GP),caption:x(o,12,1.66,.4),overline:x(o,12,2.66,1,GP),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return oo({htmlFontSize:l,pxToRem:g,fontFamily:n,fontSize:r,fontWeightLight:s,fontWeightRegular:o,fontWeightMedium:i,fontWeightBold:a,...b},f,{clone:!1})}const jFe=.2,zFe=.14,VFe=.12;function lr(...t){return[`${t[0]}px ${t[1]}px ${t[2]}px ${t[3]}px rgba(0,0,0,${jFe})`,`${t[4]}px ${t[5]}px ${t[6]}px ${t[7]}px rgba(0,0,0,${zFe})`,`${t[8]}px ${t[9]}px ${t[10]}px ${t[11]}px rgba(0,0,0,${VFe})`].join(",")}const WFe=["none",lr(0,2,1,-1,0,1,1,0,0,1,3,0),lr(0,3,1,-2,0,2,2,0,0,1,5,0),lr(0,3,3,-2,0,3,4,0,0,1,8,0),lr(0,2,4,-1,0,4,5,0,0,1,10,0),lr(0,3,5,-1,0,5,8,0,0,1,14,0),lr(0,3,5,-1,0,6,10,0,0,1,18,0),lr(0,4,5,-2,0,7,10,1,0,2,16,1),lr(0,5,5,-3,0,8,10,1,0,3,14,2),lr(0,5,6,-3,0,9,12,1,0,3,16,2),lr(0,6,6,-3,0,10,14,1,0,4,18,3),lr(0,6,7,-4,0,11,15,1,0,4,20,3),lr(0,7,8,-4,0,12,17,2,0,5,22,4),lr(0,7,8,-4,0,13,19,2,0,5,24,4),lr(0,7,9,-4,0,14,21,2,0,5,26,4),lr(0,8,9,-5,0,15,22,2,0,6,28,5),lr(0,8,10,-5,0,16,24,2,0,6,30,5),lr(0,8,11,-5,0,17,26,2,0,6,32,5),lr(0,9,11,-5,0,18,28,2,0,7,34,6),lr(0,9,12,-6,0,19,29,2,0,7,36,6),lr(0,10,13,-6,0,20,31,3,0,8,38,7),lr(0,10,13,-6,0,21,33,3,0,8,40,7),lr(0,10,14,-6,0,22,35,3,0,8,42,7),lr(0,11,14,-7,0,23,36,3,0,9,44,8),lr(0,11,15,-7,0,24,38,3,0,9,46,8)],UFe={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},HFe={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function XP(t){return`${Math.round(t)}ms`}function GFe(t){if(!t)return 0;const e=t/36;return Math.min(Math.round((4+15*e**.25+e/5)*10),3e3)}function qFe(t){const e={...UFe,...t.easing},n={...HFe,...t.duration};return{getAutoHeightDuration:GFe,create:(s=["all"],o={})=>{const{duration:i=n.standard,easing:a=e.easeInOut,delay:l=0,...c}=o;return(Array.isArray(s)?s:[s]).map(d=>`${d} ${typeof i=="string"?i:XP(i)} ${a} ${typeof l=="string"?l:XP(l)}`).join(",")},...t,easing:e,duration:n}}const XFe={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500};function KFe(t){return fl(t)||typeof t>"u"||typeof t=="string"||typeof t=="boolean"||typeof t=="number"||Array.isArray(t)}function iU(t={}){const e={...t};function n(r){const s=Object.entries(r);for(let o=0;o<s.length;o++){const[i,a]=s[o];!KFe(a)||i.startsWith("unstable_")?delete r[i]:fl(a)&&(r[i]={...a},n(r[i]))}}return n(e),`import { unstable_createBreakpoints as createBreakpoints, createTransitions } from '@mui/material/styles';

const theme = ${JSON.stringify(e,null,2)};

theme.breakpoints = createBreakpoints(theme.breakpoints || {});
theme.transitions = createTransitions(theme.transitions || {});

export default theme;`}function GI(t={},...e){const{breakpoints:n,mixins:r={},spacing:s,palette:o={},transitions:i={},typography:a={},shape:l,...c}=t;if(t.vars&&t.generateThemeVars===void 0)throw new Error(cc(20));const d=DD(o),f=EC(t);let p=oo(f,{mixins:MFe(f.breakpoints,r),palette:d,shadows:WFe.slice(),typography:BFe(d,a),transitions:qFe(i),zIndex:{...XFe}});return p=oo(p,c),p=e.reduce((g,x)=>oo(g,x),p),p.unstable_sxConfig={...ex,...c==null?void 0:c.unstable_sxConfig},p.unstable_sx=function(x){return Jd({sx:x,theme:this})},p.toRuntimeSource=iU,p}function qI(t){let e;return t<1?e=5.11916*t**2:e=4.5*Math.log(t+1)+2,Math.round(e*10)/1e3}const YFe=[...Array(25)].map((t,e)=>{if(e===0)return"none";const n=qI(e);return`linear-gradient(rgba(255 255 255 / ${n}), rgba(255 255 255 / ${n}))`});function aU(t){return{inputPlaceholder:t==="dark"?.5:.42,inputUnderline:t==="dark"?.7:.42,switchTrackDisabled:t==="dark"?.2:.12,switchTrack:t==="dark"?.3:.38}}function lU(t){return t==="dark"?YFe:[]}function ZFe(t){const{palette:e={mode:"light"},opacity:n,overlays:r,...s}=t,o=DD(e);return{palette:o,opacity:{...aU(o.mode),...n},overlays:r||lU(o.mode),...s}}function QFe(t){var e;return!!t[0].match(/(cssVarPrefix|colorSchemeSelector|rootSelector|typography|mixins|breakpoints|direction|transitions)/)||!!t[0].match(/sxConfig$/)||t[0]==="palette"&&!!((e=t[1])!=null&&e.match(/(mode|contrastThreshold|tonalOffset)/))}const JFe=t=>[...[...Array(25)].map((e,n)=>`--${t?`${t}-`:""}overlays-${n}`),`--${t?`${t}-`:""}palette-AppBar-darkBg`,`--${t?`${t}-`:""}palette-AppBar-darkColor`],eMe=t=>(e,n)=>{const r=t.rootSelector||":root",s=t.colorSchemeSelector;let o=s;if(s==="class"&&(o=".%s"),s==="data"&&(o="[data-%s]"),s!=null&&s.startsWith("data-")&&!s.includes("%s")&&(o=`[${s}="%s"]`),t.defaultColorScheme===e){if(e==="dark"){const i={};return JFe(t.cssVarPrefix).forEach(a=>{i[a]=n[a],delete n[a]}),o==="media"?{[r]:n,"@media (prefers-color-scheme: dark)":{[r]:i}}:o?{[o.replace("%s",e)]:i,[`${r}, ${o.replace("%s",e)}`]:n}:{[r]:{...n,...i}}}if(o&&o!=="media")return`${r}, ${o.replace("%s",String(e))}`}else if(e){if(o==="media")return{[`@media (prefers-color-scheme: ${String(e)})`]:{[r]:n}};if(o)return o.replace("%s",String(e))}return r};function tMe(t,e){e.forEach(n=>{t[n]||(t[n]={})})}function We(t,e,n){!t[e]&&n&&(t[e]=n)}function Zm(t){return typeof t!="string"||!t.startsWith("hsl")?t:rU(t)}function Pl(t,e){`${e}Channel`in t||(t[`${e}Channel`]=Ym(Zm(t[e])))}function nMe(t){return typeof t=="number"?`${t}px`:typeof t=="string"||typeof t=="function"||Array.isArray(t)?t:"8px"}const Qa=t=>{try{return t()}catch{}},rMe=(t="mui")=>lFe(t);function xN(t,e,n,r){if(!e)return;e=e===!0?{}:e;const s=r==="dark"?"dark":"light";if(!n){t[r]=ZFe({...e,palette:{mode:s,...e==null?void 0:e.palette}});return}const{palette:o,...i}=GI({...n,palette:{mode:s,...e==null?void 0:e.palette}});return t[r]={...e,palette:o,opacity:{...aU(s),...e==null?void 0:e.opacity},overlays:(e==null?void 0:e.overlays)||lU(s)},i}function sMe(t={},...e){const{colorSchemes:n={light:!0},defaultColorScheme:r,disableCssColorScheme:s=!1,cssVarPrefix:o="mui",shouldSkipGeneratingVar:i=QFe,colorSchemeSelector:a=n.light&&n.dark?"media":void 0,rootSelector:l=":root",...c}=t,d=Object.keys(n)[0],f=r||(n.light&&d!=="light"?"light":d),p=rMe(o),{[f]:g,light:x,dark:b,...w}=n,C={...w};let N=g;if((f==="dark"&&!("dark"in n)||f==="light"&&!("light"in n))&&(N=!0),!N)throw new Error(cc(21,f));const k=xN(C,N,c,f);x&&!C.light&&xN(C,x,void 0,"light"),b&&!C.dark&&xN(C,b,void 0,"dark");let I={defaultColorScheme:f,...k,cssVarPrefix:o,colorSchemeSelector:a,rootSelector:l,getCssVar:p,colorSchemes:C,font:{...FFe(k.typography),...k.font},spacing:nMe(c.spacing)};Object.keys(I.colorSchemes).forEach(M=>{const _=I.colorSchemes[M].palette,V=B=>{const W=B.split("-"),q=W[1],j=W[2];return p(B,_[q][j])};if(_.mode==="light"&&(We(_.common,"background","#fff"),We(_.common,"onBackground","#000")),_.mode==="dark"&&(We(_.common,"background","#000"),We(_.common,"onBackground","#fff")),tMe(_,["Alert","AppBar","Avatar","Button","Chip","FilledInput","LinearProgress","Skeleton","Slider","SnackbarContent","SpeedDialAction","StepConnector","StepContent","Switch","TableCell","Tooltip"]),_.mode==="light"){We(_.Alert,"errorColor",Vn(_.error.light,.6)),We(_.Alert,"infoColor",Vn(_.info.light,.6)),We(_.Alert,"successColor",Vn(_.success.light,.6)),We(_.Alert,"warningColor",Vn(_.warning.light,.6)),We(_.Alert,"errorFilledBg",V("palette-error-main")),We(_.Alert,"infoFilledBg",V("palette-info-main")),We(_.Alert,"successFilledBg",V("palette-success-main")),We(_.Alert,"warningFilledBg",V("palette-warning-main")),We(_.Alert,"errorFilledColor",Qa(()=>_.getContrastText(_.error.main))),We(_.Alert,"infoFilledColor",Qa(()=>_.getContrastText(_.info.main))),We(_.Alert,"successFilledColor",Qa(()=>_.getContrastText(_.success.main))),We(_.Alert,"warningFilledColor",Qa(()=>_.getContrastText(_.warning.main))),We(_.Alert,"errorStandardBg",Wn(_.error.light,.9)),We(_.Alert,"infoStandardBg",Wn(_.info.light,.9)),We(_.Alert,"successStandardBg",Wn(_.success.light,.9)),We(_.Alert,"warningStandardBg",Wn(_.warning.light,.9)),We(_.Alert,"errorIconColor",V("palette-error-main")),We(_.Alert,"infoIconColor",V("palette-info-main")),We(_.Alert,"successIconColor",V("palette-success-main")),We(_.Alert,"warningIconColor",V("palette-warning-main")),We(_.AppBar,"defaultBg",V("palette-grey-100")),We(_.Avatar,"defaultBg",V("palette-grey-400")),We(_.Button,"inheritContainedBg",V("palette-grey-300")),We(_.Button,"inheritContainedHoverBg",V("palette-grey-A100")),We(_.Chip,"defaultBorder",V("palette-grey-400")),We(_.Chip,"defaultAvatarColor",V("palette-grey-700")),We(_.Chip,"defaultIconColor",V("palette-grey-700")),We(_.FilledInput,"bg","rgba(0, 0, 0, 0.06)"),We(_.FilledInput,"hoverBg","rgba(0, 0, 0, 0.09)"),We(_.FilledInput,"disabledBg","rgba(0, 0, 0, 0.12)"),We(_.LinearProgress,"primaryBg",Wn(_.primary.main,.62)),We(_.LinearProgress,"secondaryBg",Wn(_.secondary.main,.62)),We(_.LinearProgress,"errorBg",Wn(_.error.main,.62)),We(_.LinearProgress,"infoBg",Wn(_.info.main,.62)),We(_.LinearProgress,"successBg",Wn(_.success.main,.62)),We(_.LinearProgress,"warningBg",Wn(_.warning.main,.62)),We(_.Skeleton,"bg",`rgba(${V("palette-text-primaryChannel")} / 0.11)`),We(_.Slider,"primaryTrack",Wn(_.primary.main,.62)),We(_.Slider,"secondaryTrack",Wn(_.secondary.main,.62)),We(_.Slider,"errorTrack",Wn(_.error.main,.62)),We(_.Slider,"infoTrack",Wn(_.info.main,.62)),We(_.Slider,"successTrack",Wn(_.success.main,.62)),We(_.Slider,"warningTrack",Wn(_.warning.main,.62));const B=iy(_.background.default,.8);We(_.SnackbarContent,"bg",B),We(_.SnackbarContent,"color",Qa(()=>_.getContrastText(B))),We(_.SpeedDialAction,"fabHoverBg",iy(_.background.paper,.15)),We(_.StepConnector,"border",V("palette-grey-400")),We(_.StepContent,"border",V("palette-grey-400")),We(_.Switch,"defaultColor",V("palette-common-white")),We(_.Switch,"defaultDisabledColor",V("palette-grey-100")),We(_.Switch,"primaryDisabledColor",Wn(_.primary.main,.62)),We(_.Switch,"secondaryDisabledColor",Wn(_.secondary.main,.62)),We(_.Switch,"errorDisabledColor",Wn(_.error.main,.62)),We(_.Switch,"infoDisabledColor",Wn(_.info.main,.62)),We(_.Switch,"successDisabledColor",Wn(_.success.main,.62)),We(_.Switch,"warningDisabledColor",Wn(_.warning.main,.62)),We(_.TableCell,"border",Wn(oy(_.divider,1),.88)),We(_.Tooltip,"bg",oy(_.grey[700],.92))}if(_.mode==="dark"){We(_.Alert,"errorColor",Wn(_.error.light,.6)),We(_.Alert,"infoColor",Wn(_.info.light,.6)),We(_.Alert,"successColor",Wn(_.success.light,.6)),We(_.Alert,"warningColor",Wn(_.warning.light,.6)),We(_.Alert,"errorFilledBg",V("palette-error-dark")),We(_.Alert,"infoFilledBg",V("palette-info-dark")),We(_.Alert,"successFilledBg",V("palette-success-dark")),We(_.Alert,"warningFilledBg",V("palette-warning-dark")),We(_.Alert,"errorFilledColor",Qa(()=>_.getContrastText(_.error.dark))),We(_.Alert,"infoFilledColor",Qa(()=>_.getContrastText(_.info.dark))),We(_.Alert,"successFilledColor",Qa(()=>_.getContrastText(_.success.dark))),We(_.Alert,"warningFilledColor",Qa(()=>_.getContrastText(_.warning.dark))),We(_.Alert,"errorStandardBg",Vn(_.error.light,.9)),We(_.Alert,"infoStandardBg",Vn(_.info.light,.9)),We(_.Alert,"successStandardBg",Vn(_.success.light,.9)),We(_.Alert,"warningStandardBg",Vn(_.warning.light,.9)),We(_.Alert,"errorIconColor",V("palette-error-main")),We(_.Alert,"infoIconColor",V("palette-info-main")),We(_.Alert,"successIconColor",V("palette-success-main")),We(_.Alert,"warningIconColor",V("palette-warning-main")),We(_.AppBar,"defaultBg",V("palette-grey-900")),We(_.AppBar,"darkBg",V("palette-background-paper")),We(_.AppBar,"darkColor",V("palette-text-primary")),We(_.Avatar,"defaultBg",V("palette-grey-600")),We(_.Button,"inheritContainedBg",V("palette-grey-800")),We(_.Button,"inheritContainedHoverBg",V("palette-grey-700")),We(_.Chip,"defaultBorder",V("palette-grey-700")),We(_.Chip,"defaultAvatarColor",V("palette-grey-300")),We(_.Chip,"defaultIconColor",V("palette-grey-300")),We(_.FilledInput,"bg","rgba(255, 255, 255, 0.09)"),We(_.FilledInput,"hoverBg","rgba(255, 255, 255, 0.13)"),We(_.FilledInput,"disabledBg","rgba(255, 255, 255, 0.12)"),We(_.LinearProgress,"primaryBg",Vn(_.primary.main,.5)),We(_.LinearProgress,"secondaryBg",Vn(_.secondary.main,.5)),We(_.LinearProgress,"errorBg",Vn(_.error.main,.5)),We(_.LinearProgress,"infoBg",Vn(_.info.main,.5)),We(_.LinearProgress,"successBg",Vn(_.success.main,.5)),We(_.LinearProgress,"warningBg",Vn(_.warning.main,.5)),We(_.Skeleton,"bg",`rgba(${V("palette-text-primaryChannel")} / 0.13)`),We(_.Slider,"primaryTrack",Vn(_.primary.main,.5)),We(_.Slider,"secondaryTrack",Vn(_.secondary.main,.5)),We(_.Slider,"errorTrack",Vn(_.error.main,.5)),We(_.Slider,"infoTrack",Vn(_.info.main,.5)),We(_.Slider,"successTrack",Vn(_.success.main,.5)),We(_.Slider,"warningTrack",Vn(_.warning.main,.5));const B=iy(_.background.default,.98);We(_.SnackbarContent,"bg",B),We(_.SnackbarContent,"color",Qa(()=>_.getContrastText(B))),We(_.SpeedDialAction,"fabHoverBg",iy(_.background.paper,.15)),We(_.StepConnector,"border",V("palette-grey-600")),We(_.StepContent,"border",V("palette-grey-600")),We(_.Switch,"defaultColor",V("palette-grey-300")),We(_.Switch,"defaultDisabledColor",V("palette-grey-600")),We(_.Switch,"primaryDisabledColor",Vn(_.primary.main,.55)),We(_.Switch,"secondaryDisabledColor",Vn(_.secondary.main,.55)),We(_.Switch,"errorDisabledColor",Vn(_.error.main,.55)),We(_.Switch,"infoDisabledColor",Vn(_.info.main,.55)),We(_.Switch,"successDisabledColor",Vn(_.success.main,.55)),We(_.Switch,"warningDisabledColor",Vn(_.warning.main,.55)),We(_.TableCell,"border",Vn(oy(_.divider,1),.68)),We(_.Tooltip,"bg",oy(_.grey[700],.92))}Pl(_.background,"default"),Pl(_.background,"paper"),Pl(_.common,"background"),Pl(_.common,"onBackground"),Pl(_,"divider"),Object.keys(_).forEach(B=>{const W=_[B];B!=="tonalOffset"&&W&&typeof W=="object"&&(W.main&&We(_[B],"mainChannel",Ym(Zm(W.main))),W.light&&We(_[B],"lightChannel",Ym(Zm(W.light))),W.dark&&We(_[B],"darkChannel",Ym(Zm(W.dark))),W.contrastText&&We(_[B],"contrastTextChannel",Ym(Zm(W.contrastText))),B==="text"&&(Pl(_[B],"primary"),Pl(_[B],"secondary")),B==="action"&&(W.active&&Pl(_[B],"active"),W.selected&&Pl(_[B],"selected")))})}),I=e.reduce((M,_)=>oo(M,_),I);const R={prefix:o,disableCssColorScheme:s,shouldSkipGeneratingVar:i,getSelector:eMe(I)},{vars:$,generateThemeVars:O,generateStyleSheets:F}=dFe(I,R);return I.vars=$,Object.entries(I.colorSchemes[I.defaultColorScheme]).forEach(([M,_])=>{I[M]=_}),I.generateThemeVars=O,I.generateStyleSheets=F,I.generateSpacing=function(){return GW(c.spacing,kD(this))},I.getColorSchemeSelector=fFe(a),I.spacing=I.generateSpacing(),I.shouldSkipGeneratingVar=i,I.unstable_sxConfig={...ex,...c==null?void 0:c.unstable_sxConfig},I.unstable_sx=function(_){return Jd({sx:_,theme:this})},I.toRuntimeSource=iU,I}function KP(t,e,n){t.colorSchemes&&n&&(t.colorSchemes[e]={...n!==!0&&n,palette:DD({...n===!0?{}:n.palette,mode:e})})}function cU(t={},...e){const{palette:n,cssVariables:r=!1,colorSchemes:s=n?void 0:{light:!0},defaultColorScheme:o=n==null?void 0:n.mode,...i}=t,a=o||"light",l=s==null?void 0:s[a],c={...s,...n?{[a]:{...typeof l!="boolean"&&l,palette:n}}:void 0};if(r===!1){if(!("colorSchemes"in t))return GI(t,...e);let d=n;"palette"in t||c[a]&&(c[a]!==!0?d=c[a].palette:a==="dark"&&(d={mode:"dark"}));const f=GI({...t,palette:d},...e);return f.defaultColorScheme=a,f.colorSchemes=c,f.palette.mode==="light"&&(f.colorSchemes.light={...c.light!==!0&&c.light,palette:f.palette},KP(f,"dark",c.dark)),f.palette.mode==="dark"&&(f.colorSchemes.dark={...c.dark!==!0&&c.dark,palette:f.palette},KP(f,"light",c.light)),f}return!n&&!("light"in c)&&a==="light"&&(c.light=!0),sMe({...i,colorSchemes:c,defaultColorScheme:a,...typeof r!="boolean"&&r},...e)}const TC=cU();function Sf(){const t=tx(TC);return t[Hp]||t}function vr({props:t,name:e}){return eU({props:t,name:e,defaultTheme:TC,themeId:Hp})}function uU(t){return t!=="ownerState"&&t!=="theme"&&t!=="sx"&&t!=="as"}const da=t=>uU(t)&&t!=="classes",De=QW({themeId:Hp,defaultTheme:TC,rootShouldForwardProp:da});function YP(...t){return t.reduce((e,n)=>n==null?e:function(...s){e.apply(this,s),n.apply(this,s)},()=>{})}function oMe(t){return S.jsx(FPe,{...t,defaultTheme:TC,themeId:Hp})}function iMe(t){return function(n){return S.jsx(oMe,{styles:typeof t=="function"?r=>t({theme:r,...n}):t})}}function aMe(){return AD}const bn=aFe;function qt(t){return iFe(t)}function lMe(t){return Nt("MuiSvgIcon",t)}gt("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const cMe=t=>{const{color:e,fontSize:n,classes:r}=t,s={root:["root",e!=="inherit"&&`color${Qe(e)}`,`fontSize${Qe(n)}`]};return vt(s,lMe,r)},uMe=De("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.color!=="inherit"&&e[`color${Qe(n.color)}`],e[`fontSize${Qe(n.fontSize)}`]]}})(bn(({theme:t})=>{var e,n,r,s,o,i,a,l,c,d,f,p,g,x;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",flexShrink:0,transition:(s=(e=t.transitions)==null?void 0:e.create)==null?void 0:s.call(e,"fill",{duration:(r=(n=(t.vars??t).transitions)==null?void 0:n.duration)==null?void 0:r.shorter}),variants:[{props:b=>!b.hasSvgAsChild,style:{fill:"currentColor"}},{props:{fontSize:"inherit"},style:{fontSize:"inherit"}},{props:{fontSize:"small"},style:{fontSize:((i=(o=t.typography)==null?void 0:o.pxToRem)==null?void 0:i.call(o,20))||"1.25rem"}},{props:{fontSize:"medium"},style:{fontSize:((l=(a=t.typography)==null?void 0:a.pxToRem)==null?void 0:l.call(a,24))||"1.5rem"}},{props:{fontSize:"large"},style:{fontSize:((d=(c=t.typography)==null?void 0:c.pxToRem)==null?void 0:d.call(c,35))||"2.1875rem"}},...Object.entries((t.vars??t).palette).filter(([,b])=>b&&b.main).map(([b])=>{var w,C;return{props:{color:b},style:{color:(C=(w=(t.vars??t).palette)==null?void 0:w[b])==null?void 0:C.main}}}),{props:{color:"action"},style:{color:(p=(f=(t.vars??t).palette)==null?void 0:f.action)==null?void 0:p.active}},{props:{color:"disabled"},style:{color:(x=(g=(t.vars??t).palette)==null?void 0:g.action)==null?void 0:x.disabled}},{props:{color:"inherit"},style:{color:void 0}}]}})),XI=A.forwardRef(function(e,n){const r=qt({props:e,name:"MuiSvgIcon"}),{children:s,className:o,color:i="inherit",component:a="svg",fontSize:l="medium",htmlColor:c,inheritViewBox:d=!1,titleAccess:f,viewBox:p="0 0 24 24",...g}=r,x=A.isValidElement(s)&&s.type==="svg",b={...r,color:i,component:a,fontSize:l,instanceFontSize:e.fontSize,inheritViewBox:d,viewBox:p,hasSvgAsChild:x},w={};d||(w.viewBox=p);const C=cMe(b);return S.jsxs(uMe,{as:a,className:st(C.root,o),focusable:"false",color:c,"aria-hidden":f?void 0:!0,role:f?"img":void 0,ref:n,...w,...g,...x&&s.props,ownerState:b,children:[x?s.props.children:s,f?S.jsx("title",{children:f}):null]})});XI.muiName="SvgIcon";function So(t,e){function n(r,s){return S.jsx(XI,{"data-testid":void 0,ref:s,...r,children:t})}return n.muiName=XI.muiName,A.memo(A.forwardRef(n))}function dU(t,e=166){let n;function r(...s){const o=()=>{t.apply(this,s)};clearTimeout(n),n=setTimeout(o,e)}return r.clear=()=>{clearTimeout(n)},r}function io(t){return t&&t.ownerDocument||document}function dc(t){return io(t).defaultView||window}function ZP(t,e){typeof t=="function"?t(e):t&&(t.current=e)}let QP=0;function dMe(t){const[e,n]=A.useState(t),r=t||e;return A.useEffect(()=>{e==null&&(QP+=1,n(`mui-${QP}`))},[e]),r}const fMe={...Sl},JP=fMe.useId;function bc(t){if(JP!==void 0){const e=JP();return t??e}return dMe(t)}function Cu(t){const{controlled:e,default:n,name:r,state:s="value"}=t,{current:o}=A.useRef(e!==void 0),[i,a]=A.useState(n),l=o?e:i,c=A.useCallback(d=>{o||a(d)},[]);return[l,c]}function at(t){const e=A.useRef(t);return ts(()=>{e.current=t}),A.useRef((...n)=>(0,e.current)(...n)).current}function wn(...t){const e=A.useRef(void 0),n=A.useCallback(r=>{const s=t.map(o=>{if(o==null)return null;if(typeof o=="function"){const i=o,a=i(r);return typeof a=="function"?a:()=>{i(null)}}return o.current=r,()=>{o.current=null}});return()=>{s.forEach(o=>o==null?void 0:o())}},t);return A.useMemo(()=>t.every(r=>r==null)?null:r=>{e.current&&(e.current(),e.current=void 0),r!=null&&(e.current=n(r))},t)}function hMe(t,e){const n=t.charCodeAt(2);return t[0]==="o"&&t[1]==="n"&&n>=65&&n<=90&&typeof e=="function"}function pMe(t,e){if(!t)return e;function n(i,a){const l={};return Object.keys(a).forEach(c=>{hMe(c,a[c])&&typeof i[c]=="function"&&(l[c]=(...d)=>{i[c](...d),a[c](...d)})}),l}if(typeof t=="function"||typeof e=="function")return i=>{const a=typeof e=="function"?e(i):e,l=typeof t=="function"?t({...i,...a}):t,c=st(i==null?void 0:i.className,a==null?void 0:a.className,l==null?void 0:l.className),d=n(l,a);return{...a,...l,...d,...!!c&&{className:c},...(a==null?void 0:a.style)&&(l==null?void 0:l.style)&&{style:{...a.style,...l.style}},...(a==null?void 0:a.sx)&&(l==null?void 0:l.sx)&&{sx:[...Array.isArray(a.sx)?a.sx:[a.sx],...Array.isArray(l.sx)?l.sx:[l.sx]]}}};const r=e,s=n(t,r),o=st(r==null?void 0:r.className,t==null?void 0:t.className);return{...e,...t,...s,...!!o&&{className:o},...(r==null?void 0:r.style)&&(t==null?void 0:t.style)&&{style:{...r.style,...t.style}},...(r==null?void 0:r.sx)&&(t==null?void 0:t.sx)&&{sx:[...Array.isArray(r.sx)?r.sx:[r.sx],...Array.isArray(t.sx)?t.sx:[t.sx]]}}}function Lt(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function KI(t,e){return KI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},KI(t,e)}function $D(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,KI(t,e)}function mMe(t,e){return t.classList?!!e&&t.classList.contains(e):(" "+(t.className.baseVal||t.className)+" ").indexOf(" "+e+" ")!==-1}function gMe(t,e){t.classList?t.classList.add(e):mMe(t,e)||(typeof t.className=="string"?t.className=t.className+" "+e:t.setAttribute("class",(t.className&&t.className.baseVal||"")+" "+e))}function eF(t,e){return t.replace(new RegExp("(^|\\s)"+e+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function xMe(t,e){t.classList?t.classList.remove(e):typeof t.className=="string"?t.className=eF(t.className,e):t.setAttribute("class",eF(t.className&&t.className.baseVal||"",e))}const tF={disabled:!1},dw=At.createContext(null);var fU=function(e){return e.scrollTop},Qm="unmounted",ad="exited",ld="entering",Qf="entered",YI="exiting",Ua=function(t){$D(e,t);function e(r,s){var o;o=t.call(this,r,s)||this;var i=s,a=i&&!i.isMounting?r.enter:r.appear,l;return o.appearStatus=null,r.in?a?(l=ad,o.appearStatus=ld):l=Qf:r.unmountOnExit||r.mountOnEnter?l=Qm:l=ad,o.state={status:l},o.nextCallback=null,o}e.getDerivedStateFromProps=function(s,o){var i=s.in;return i&&o.status===Qm?{status:ad}:null};var n=e.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(s){var o=null;if(s!==this.props){var i=this.state.status;this.props.in?i!==ld&&i!==Qf&&(o=ld):(i===ld||i===Qf)&&(o=YI)}this.updateStatus(!1,o)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var s=this.props.timeout,o,i,a;return o=i=a=s,s!=null&&typeof s!="number"&&(o=s.exit,i=s.enter,a=s.appear!==void 0?s.appear:i),{exit:o,enter:i,appear:a}},n.updateStatus=function(s,o){if(s===void 0&&(s=!1),o!==null)if(this.cancelNextCallback(),o===ld){if(this.props.unmountOnExit||this.props.mountOnEnter){var i=this.props.nodeRef?this.props.nodeRef.current:Mx.findDOMNode(this);i&&fU(i)}this.performEnter(s)}else this.performExit();else this.props.unmountOnExit&&this.state.status===ad&&this.setState({status:Qm})},n.performEnter=function(s){var o=this,i=this.props.enter,a=this.context?this.context.isMounting:s,l=this.props.nodeRef?[a]:[Mx.findDOMNode(this),a],c=l[0],d=l[1],f=this.getTimeouts(),p=a?f.appear:f.enter;if(!s&&!i||tF.disabled){this.safeSetState({status:Qf},function(){o.props.onEntered(c)});return}this.props.onEnter(c,d),this.safeSetState({status:ld},function(){o.props.onEntering(c,d),o.onTransitionEnd(p,function(){o.safeSetState({status:Qf},function(){o.props.onEntered(c,d)})})})},n.performExit=function(){var s=this,o=this.props.exit,i=this.getTimeouts(),a=this.props.nodeRef?void 0:Mx.findDOMNode(this);if(!o||tF.disabled){this.safeSetState({status:ad},function(){s.props.onExited(a)});return}this.props.onExit(a),this.safeSetState({status:YI},function(){s.props.onExiting(a),s.onTransitionEnd(i.exit,function(){s.safeSetState({status:ad},function(){s.props.onExited(a)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(s,o){o=this.setNextCallback(o),this.setState(s,o)},n.setNextCallback=function(s){var o=this,i=!0;return this.nextCallback=function(a){i&&(i=!1,o.nextCallback=null,s(a))},this.nextCallback.cancel=function(){i=!1},this.nextCallback},n.onTransitionEnd=function(s,o){this.setNextCallback(o);var i=this.props.nodeRef?this.props.nodeRef.current:Mx.findDOMNode(this),a=s==null&&!this.props.addEndListener;if(!i||a){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var l=this.props.nodeRef?[this.nextCallback]:[i,this.nextCallback],c=l[0],d=l[1];this.props.addEndListener(c,d)}s!=null&&setTimeout(this.nextCallback,s)},n.render=function(){var s=this.state.status;if(s===Qm)return null;var o=this.props,i=o.children;o.in,o.mountOnEnter,o.unmountOnExit,o.appear,o.enter,o.exit,o.timeout,o.addEndListener,o.onEnter,o.onEntering,o.onEntered,o.onExit,o.onExiting,o.onExited,o.nodeRef;var a=Lt(o,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return At.createElement(dw.Provider,{value:null},typeof i=="function"?i(s,a):At.cloneElement(At.Children.only(i),a))},e}(At.Component);Ua.contextType=dw;Ua.propTypes={};function Wf(){}Ua.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Wf,onEntering:Wf,onEntered:Wf,onExit:Wf,onExiting:Wf,onExited:Wf};Ua.UNMOUNTED=Qm;Ua.EXITED=ad;Ua.ENTERING=ld;Ua.ENTERED=Qf;Ua.EXITING=YI;var yMe=function(e,n){return e&&n&&n.split(" ").forEach(function(r){return gMe(e,r)})},yN=function(e,n){return e&&n&&n.split(" ").forEach(function(r){return xMe(e,r)})},OD=function(t){$D(e,t);function e(){for(var r,s=arguments.length,o=new Array(s),i=0;i<s;i++)o[i]=arguments[i];return r=t.call.apply(t,[this].concat(o))||this,r.appliedClasses={appear:{},enter:{},exit:{}},r.onEnter=function(a,l){var c=r.resolveArguments(a,l),d=c[0],f=c[1];r.removeClasses(d,"exit"),r.addClass(d,f?"appear":"enter","base"),r.props.onEnter&&r.props.onEnter(a,l)},r.onEntering=function(a,l){var c=r.resolveArguments(a,l),d=c[0],f=c[1],p=f?"appear":"enter";r.addClass(d,p,"active"),r.props.onEntering&&r.props.onEntering(a,l)},r.onEntered=function(a,l){var c=r.resolveArguments(a,l),d=c[0],f=c[1],p=f?"appear":"enter";r.removeClasses(d,p),r.addClass(d,p,"done"),r.props.onEntered&&r.props.onEntered(a,l)},r.onExit=function(a){var l=r.resolveArguments(a),c=l[0];r.removeClasses(c,"appear"),r.removeClasses(c,"enter"),r.addClass(c,"exit","base"),r.props.onExit&&r.props.onExit(a)},r.onExiting=function(a){var l=r.resolveArguments(a),c=l[0];r.addClass(c,"exit","active"),r.props.onExiting&&r.props.onExiting(a)},r.onExited=function(a){var l=r.resolveArguments(a),c=l[0];r.removeClasses(c,"exit"),r.addClass(c,"exit","done"),r.props.onExited&&r.props.onExited(a)},r.resolveArguments=function(a,l){return r.props.nodeRef?[r.props.nodeRef.current,a]:[a,l]},r.getClassNames=function(a){var l=r.props.classNames,c=typeof l=="string",d=c&&l?l+"-":"",f=c?""+d+a:l[a],p=c?f+"-active":l[a+"Active"],g=c?f+"-done":l[a+"Done"];return{baseClassName:f,activeClassName:p,doneClassName:g}},r}var n=e.prototype;return n.addClass=function(s,o,i){var a=this.getClassNames(o)[i+"ClassName"],l=this.getClassNames("enter"),c=l.doneClassName;o==="appear"&&i==="done"&&c&&(a+=" "+c),i==="active"&&s&&fU(s),a&&(this.appliedClasses[o][i]=a,yMe(s,a))},n.removeClasses=function(s,o){var i=this.appliedClasses[o],a=i.base,l=i.active,c=i.done;this.appliedClasses[o]={},a&&yN(s,a),l&&yN(s,l),c&&yN(s,c)},n.render=function(){var s=this.props;s.classNames;var o=Lt(s,["classNames"]);return At.createElement(Ua,xe({},o,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},e}(At.Component);OD.defaultProps={classNames:""};OD.propTypes={};function bMe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _D(t,e){var n=function(o){return e&&A.isValidElement(o)?e(o):o},r=Object.create(null);return t&&A.Children.map(t,function(s){return s}).forEach(function(s){r[s.key]=n(s)}),r}function wMe(t,e){t=t||{},e=e||{};function n(d){return d in e?e[d]:t[d]}var r=Object.create(null),s=[];for(var o in t)o in e?s.length&&(r[o]=s,s=[]):s.push(o);var i,a={};for(var l in e){if(r[l])for(i=0;i<r[l].length;i++){var c=r[l][i];a[r[l][i]]=n(c)}a[l]=n(l)}for(i=0;i<s.length;i++)a[s[i]]=n(s[i]);return a}function Cd(t,e,n){return n[e]!=null?n[e]:t.props[e]}function vMe(t,e){return _D(t.children,function(n){return A.cloneElement(n,{onExited:e.bind(null,n),in:!0,appear:Cd(n,"appear",t),enter:Cd(n,"enter",t),exit:Cd(n,"exit",t)})})}function CMe(t,e,n){var r=_D(t.children),s=wMe(e,r);return Object.keys(s).forEach(function(o){var i=s[o];if(A.isValidElement(i)){var a=o in e,l=o in r,c=e[o],d=A.isValidElement(c)&&!c.props.in;l&&(!a||d)?s[o]=A.cloneElement(i,{onExited:n.bind(null,i),in:!0,exit:Cd(i,"exit",t),enter:Cd(i,"enter",t)}):!l&&a&&!d?s[o]=A.cloneElement(i,{in:!1}):l&&a&&A.isValidElement(c)&&(s[o]=A.cloneElement(i,{onExited:n.bind(null,i),in:c.props.in,exit:Cd(i,"exit",t),enter:Cd(i,"enter",t)}))}}),s}var SMe=Object.values||function(t){return Object.keys(t).map(function(e){return t[e]})},NMe={component:"div",childFactory:function(e){return e}},nx=function(t){$D(e,t);function e(r,s){var o;o=t.call(this,r,s)||this;var i=o.handleExited.bind(bMe(o));return o.state={contextValue:{isMounting:!0},handleExited:i,firstRender:!0},o}var n=e.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},e.getDerivedStateFromProps=function(s,o){var i=o.children,a=o.handleExited,l=o.firstRender;return{children:l?vMe(s,a):CMe(s,i,a),firstRender:!1}},n.handleExited=function(s,o){var i=_D(this.props.children);s.key in i||(s.props.onExited&&s.props.onExited(o),this.mounted&&this.setState(function(a){var l=xe({},a.children);return delete l[s.key],{children:l}}))},n.render=function(){var s=this.props,o=s.component,i=s.childFactory,a=Lt(s,["component","childFactory"]),l=this.state.contextValue,c=SMe(this.state.children).map(i);return delete a.appear,delete a.enter,delete a.exit,o===null?At.createElement(dw.Provider,{value:l},c):At.createElement(dw.Provider,{value:l},At.createElement(o,a,c))},e}(At.Component);nx.propTypes={};nx.defaultProps=NMe;const nF={};function hU(t,e){const n=A.useRef(nF);return n.current===nF&&(n.current=t(e)),n}const EMe=[];function IMe(t){A.useEffect(t,EMe)}class PD{constructor(){dt(this,"currentId",null);dt(this,"clear",()=>{this.currentId!==null&&(clearTimeout(this.currentId),this.currentId=null)});dt(this,"disposeEffect",()=>this.clear)}static create(){return new PD}start(e,n){this.clear(),this.currentId=setTimeout(()=>{this.currentId=null,n()},e)}}function au(){const t=hU(PD.create).current;return IMe(t.disposeEffect),t}const pU=t=>t.scrollTop;function fw(t,e){const{timeout:n,easing:r,style:s={}}=t;return{duration:s.transitionDuration??(typeof n=="number"?n:n[e.mode]||0),easing:s.transitionTimingFunction??(typeof r=="object"?r[e.mode]:r),delay:s.transitionDelay}}function kMe(t){return Nt("MuiPaper",t)}gt("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);const TMe=t=>{const{square:e,elevation:n,variant:r,classes:s}=t,o={root:["root",r,!e&&"rounded",r==="elevation"&&`elevation${n}`]};return vt(o,kMe,s)},AMe=De("div",{name:"MuiPaper",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[n.variant],!n.square&&e.rounded,n.variant==="elevation"&&e[`elevation${n.elevation}`]]}})(bn(({theme:t})=>({backgroundColor:(t.vars||t).palette.background.paper,color:(t.vars||t).palette.text.primary,transition:t.transitions.create("box-shadow"),variants:[{props:({ownerState:e})=>!e.square,style:{borderRadius:t.shape.borderRadius}},{props:{variant:"outlined"},style:{border:`1px solid ${(t.vars||t).palette.divider}`}},{props:{variant:"elevation"},style:{boxShadow:"var(--Paper-shadow)",backgroundImage:"var(--Paper-overlay)"}}]}))),ju=A.forwardRef(function(e,n){var g;const r=qt({props:e,name:"MuiPaper"}),s=Sf(),{className:o,component:i="div",elevation:a=1,square:l=!1,variant:c="elevation",...d}=r,f={...r,component:i,elevation:a,square:l,variant:c},p=TMe(f);return S.jsx(AMe,{as:i,ownerState:f,className:st(p.root,o),ref:n,...d,style:{...c==="elevation"&&{"--Paper-shadow":(s.vars||s).shadows[a],...s.vars&&{"--Paper-overlay":(g=s.vars.overlays)==null?void 0:g[a]},...!s.vars&&s.palette.mode==="dark"&&{"--Paper-overlay":`linear-gradient(${pn("#fff",qI(a))}, ${pn("#fff",qI(a))})`}},...d.style}})});function RMe(t){return typeof t=="string"}function mU(t,e,n){return t===void 0||RMe(t)?e:{...e,ownerState:{...e.ownerState,...n}}}function lp(t,e,n){return typeof t=="function"?t(e,n):t}function gU(t,e=[]){if(t===void 0)return{};const n={};return Object.keys(t).filter(r=>r.match(/^on[A-Z]/)&&typeof t[r]=="function"&&!e.includes(r)).forEach(r=>{n[r]=t[r]}),n}function rF(t){if(t===void 0)return{};const e={};return Object.keys(t).filter(n=>!(n.match(/^on[A-Z]/)&&typeof t[n]=="function")).forEach(n=>{e[n]=t[n]}),e}function xU(t){const{getSlotProps:e,additionalProps:n,externalSlotProps:r,externalForwardedProps:s,className:o}=t;if(!e){const g=st(n==null?void 0:n.className,o,s==null?void 0:s.className,r==null?void 0:r.className),x={...n==null?void 0:n.style,...s==null?void 0:s.style,...r==null?void 0:r.style},b={...n,...s,...r};return g.length>0&&(b.className=g),Object.keys(x).length>0&&(b.style=x),{props:b,internalRef:void 0}}const i=gU({...s,...r}),a=rF(r),l=rF(s),c=e(i),d=st(c==null?void 0:c.className,n==null?void 0:n.className,o,s==null?void 0:s.className,r==null?void 0:r.className),f={...c==null?void 0:c.style,...n==null?void 0:n.style,...s==null?void 0:s.style,...r==null?void 0:r.style},p={...c,...n,...l,...a};return d.length>0&&(p.className=d),Object.keys(f).length>0&&(p.style=f),{props:p,internalRef:c.ref}}function Hn(t,e){const{className:n,elementType:r,ownerState:s,externalForwardedProps:o,internalForwardedProps:i,shouldForwardComponentProp:a=!1,...l}=e,{component:c,slots:d={[t]:void 0},slotProps:f={[t]:void 0},...p}=o,g=d[t]||r,x=lp(f[t],s),{props:{component:b,...w},internalRef:C}=xU({className:n,...l,externalForwardedProps:t==="root"?p:void 0,externalSlotProps:x}),N=wn(C,x==null?void 0:x.ref,e.ref),k=t==="root"?b||c:b,I=mU(g,{...t==="root"&&!c&&!d[t]&&i,...t!=="root"&&!d[t]&&i,...w,...k&&!a&&{as:k},...k&&a&&{component:k},ref:N},s);return[g,I]}const yU=_e.oneOfType([_e.func,_e.object]);function sF(t){try{return t.matches(":focus-visible")}catch{}return!1}class hw{constructor(){dt(this,"mountEffect",()=>{this.shouldMount&&!this.didMount&&this.ref.current!==null&&(this.didMount=!0,this.mounted.resolve())});this.ref={current:null},this.mounted=null,this.didMount=!1,this.shouldMount=!1,this.setShouldMount=null}static create(){return new hw}static use(){const e=hU(hw.create).current,[n,r]=A.useState(!1);return e.shouldMount=n,e.setShouldMount=r,A.useEffect(e.mountEffect,[n]),e}mount(){return this.mounted||(this.mounted=$Me(),this.shouldMount=!0,this.setShouldMount(this.shouldMount)),this.mounted}start(...e){this.mount().then(()=>{var n;return(n=this.ref.current)==null?void 0:n.start(...e)})}stop(...e){this.mount().then(()=>{var n;return(n=this.ref.current)==null?void 0:n.stop(...e)})}pulsate(...e){this.mount().then(()=>{var n;return(n=this.ref.current)==null?void 0:n.pulsate(...e)})}}function DMe(){return hw.use()}function $Me(){let t,e;const n=new Promise((r,s)=>{t=r,e=s});return n.resolve=t,n.reject=e,n}function OMe(t){const{className:e,classes:n,pulsate:r=!1,rippleX:s,rippleY:o,rippleSize:i,in:a,onExited:l,timeout:c}=t,[d,f]=A.useState(!1),p=st(e,n.ripple,n.rippleVisible,r&&n.ripplePulsate),g={width:i,height:i,top:-(i/2)+o,left:-(i/2)+s},x=st(n.child,d&&n.childLeaving,r&&n.childPulsate);return!a&&!d&&f(!0),A.useEffect(()=>{if(!a&&l!=null){const b=setTimeout(l,c);return()=>{clearTimeout(b)}}},[l,a,c]),S.jsx("span",{className:p,style:g,children:S.jsx("span",{className:x})})}const _i=gt("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),ZI=550,_Me=80,PMe=Z1`
  0% {
    transform: scale(0);
    opacity: 0.1;
  }

  100% {
    transform: scale(1);
    opacity: 0.3;
  }
`,FMe=Z1`
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
  }
`,MMe=Z1`
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(0.92);
  }

  100% {
    transform: scale(1);
  }
`,LMe=De("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),BMe=De(OMe,{name:"MuiTouchRipple",slot:"Ripple"})`
  opacity: 0;
  position: absolute;

  &.${_i.rippleVisible} {
    opacity: 0.3;
    transform: scale(1);
    animation-name: ${PMe};
    animation-duration: ${ZI}ms;
    animation-timing-function: ${({theme:t})=>t.transitions.easing.easeInOut};
  }

  &.${_i.ripplePulsate} {
    animation-duration: ${({theme:t})=>t.transitions.duration.shorter}ms;
  }

  & .${_i.child} {
    opacity: 1;
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background-color: currentColor;
  }

  & .${_i.childLeaving} {
    opacity: 0;
    animation-name: ${FMe};
    animation-duration: ${ZI}ms;
    animation-timing-function: ${({theme:t})=>t.transitions.easing.easeInOut};
  }

  & .${_i.childPulsate} {
    position: absolute;
    /* @noflip */
    left: 0px;
    top: 0;
    animation-name: ${MMe};
    animation-duration: 2500ms;
    animation-timing-function: ${({theme:t})=>t.transitions.easing.easeInOut};
    animation-iteration-count: infinite;
    animation-delay: 200ms;
  }
`,jMe=A.forwardRef(function(e,n){const r=qt({props:e,name:"MuiTouchRipple"}),{center:s=!1,classes:o={},className:i,...a}=r,[l,c]=A.useState([]),d=A.useRef(0),f=A.useRef(null);A.useEffect(()=>{f.current&&(f.current(),f.current=null)},[l]);const p=A.useRef(!1),g=au(),x=A.useRef(null),b=A.useRef(null),w=A.useCallback(I=>{const{pulsate:R,rippleX:$,rippleY:O,rippleSize:F,cb:M}=I;c(_=>[..._,S.jsx(BMe,{classes:{ripple:st(o.ripple,_i.ripple),rippleVisible:st(o.rippleVisible,_i.rippleVisible),ripplePulsate:st(o.ripplePulsate,_i.ripplePulsate),child:st(o.child,_i.child),childLeaving:st(o.childLeaving,_i.childLeaving),childPulsate:st(o.childPulsate,_i.childPulsate)},timeout:ZI,pulsate:R,rippleX:$,rippleY:O,rippleSize:F},d.current)]),d.current+=1,f.current=M},[o]),C=A.useCallback((I={},R={},$=()=>{})=>{const{pulsate:O=!1,center:F=s||R.pulsate,fakeElement:M=!1}=R;if((I==null?void 0:I.type)==="mousedown"&&p.current){p.current=!1;return}(I==null?void 0:I.type)==="touchstart"&&(p.current=!0);const _=M?null:b.current,V=_?_.getBoundingClientRect():{width:0,height:0,left:0,top:0};let B,W,q;if(F||I===void 0||I.clientX===0&&I.clientY===0||!I.clientX&&!I.touches)B=Math.round(V.width/2),W=Math.round(V.height/2);else{const{clientX:j,clientY:G}=I.touches&&I.touches.length>0?I.touches[0]:I;B=Math.round(j-V.left),W=Math.round(G-V.top)}if(F)q=Math.sqrt((2*V.width**2+V.height**2)/3),q%2===0&&(q+=1);else{const j=Math.max(Math.abs((_?_.clientWidth:0)-B),B)*2+2,G=Math.max(Math.abs((_?_.clientHeight:0)-W),W)*2+2;q=Math.sqrt(j**2+G**2)}I!=null&&I.touches?x.current===null&&(x.current=()=>{w({pulsate:O,rippleX:B,rippleY:W,rippleSize:q,cb:$})},g.start(_Me,()=>{x.current&&(x.current(),x.current=null)})):w({pulsate:O,rippleX:B,rippleY:W,rippleSize:q,cb:$})},[s,w,g]),N=A.useCallback(()=>{C({},{pulsate:!0})},[C]),k=A.useCallback((I,R)=>{if(g.clear(),(I==null?void 0:I.type)==="touchend"&&x.current){x.current(),x.current=null,g.start(0,()=>{k(I,R)});return}x.current=null,c($=>$.length>0?$.slice(1):$),f.current=R},[g]);return A.useImperativeHandle(n,()=>({pulsate:N,start:C,stop:k}),[N,C,k]),S.jsx(LMe,{className:st(_i.root,o.root,i),ref:b,...a,children:S.jsx(nx,{component:null,exit:!0,children:l})})});function zMe(t){return Nt("MuiButtonBase",t)}const VMe=gt("MuiButtonBase",["root","disabled","focusVisible"]),WMe=t=>{const{disabled:e,focusVisible:n,focusVisibleClassName:r,classes:s}=t,i=vt({root:["root",e&&"disabled",n&&"focusVisible"]},zMe,s);return n&&r&&(i.root+=` ${r}`),i},UMe=De("button",{name:"MuiButtonBase",slot:"Root"})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},[`&.${VMe.disabled}`]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),cp=A.forwardRef(function(e,n){const r=qt({props:e,name:"MuiButtonBase"}),{action:s,centerRipple:o=!1,children:i,className:a,component:l="button",disabled:c=!1,disableRipple:d=!1,disableTouchRipple:f=!1,focusRipple:p=!1,focusVisibleClassName:g,LinkComponent:x="a",onBlur:b,onClick:w,onContextMenu:C,onDragLeave:N,onFocus:k,onFocusVisible:I,onKeyDown:R,onKeyUp:$,onMouseDown:O,onMouseLeave:F,onMouseUp:M,onTouchEnd:_,onTouchMove:V,onTouchStart:B,tabIndex:W=0,TouchRippleProps:q,touchRippleRef:j,type:G,...Z}=r,J=A.useRef(null),X=DMe(),ee=wn(X.ref,j),[ne,oe]=A.useState(!1);c&&ne&&oe(!1),A.useImperativeHandle(s,()=>({focusVisible:()=>{oe(!0),J.current.focus()}}),[]);const ye=X.shouldMount&&!d&&!c;A.useEffect(()=>{ne&&p&&!d&&X.pulsate()},[d,p,ne,X]);const ge=Fl(X,"start",O,f),ve=Fl(X,"stop",C,f),he=Fl(X,"stop",N,f),Me=Fl(X,"stop",M,f),ze=Fl(X,"stop",He=>{ne&&He.preventDefault(),F&&F(He)},f),Oe=Fl(X,"start",B,f),Ie=Fl(X,"stop",_,f),me=Fl(X,"stop",V,f),ke=Fl(X,"stop",He=>{sF(He.target)||oe(!1),b&&b(He)},!1),pe=at(He=>{J.current||(J.current=He.currentTarget),sF(He.target)&&(oe(!0),I&&I(He)),k&&k(He)}),Pe=()=>{const He=J.current;return l&&l!=="button"&&!(He.tagName==="A"&&He.href)},Ve=at(He=>{p&&!He.repeat&&ne&&He.key===" "&&X.stop(He,()=>{X.start(He)}),He.target===He.currentTarget&&Pe()&&He.key===" "&&He.preventDefault(),R&&R(He),He.target===He.currentTarget&&Pe()&&He.key==="Enter"&&!c&&(He.preventDefault(),w&&w(He))}),Fe=at(He=>{p&&He.key===" "&&ne&&!He.defaultPrevented&&X.stop(He,()=>{X.pulsate(He)}),$&&$(He),w&&He.target===He.currentTarget&&Pe()&&He.key===" "&&!He.defaultPrevented&&w(He)});let Be=l;Be==="button"&&(Z.href||Z.to)&&(Be=x);const be={};Be==="button"?(be.type=G===void 0?"button":G,be.disabled=c):(!Z.href&&!Z.to&&(be.role="button"),c&&(be["aria-disabled"]=c));const je=wn(n,J),Se={...r,centerRipple:o,component:l,disabled:c,disableRipple:d,disableTouchRipple:f,focusRipple:p,tabIndex:W,focusVisible:ne},ue=WMe(Se);return S.jsxs(UMe,{as:Be,className:st(ue.root,a),ownerState:Se,onBlur:ke,onClick:w,onContextMenu:ve,onFocus:pe,onKeyDown:Ve,onKeyUp:Fe,onMouseDown:ge,onMouseLeave:ze,onMouseUp:Me,onDragLeave:he,onTouchEnd:Ie,onTouchMove:me,onTouchStart:Oe,ref:je,tabIndex:c?-1:W,type:G,...be,...Z,children:[i,ye?S.jsx(jMe,{ref:ee,center:o,...q}):null]})});function Fl(t,e,n,r=!1){return at(s=>(n&&n(s),r||t[e](s),!0))}function HMe(t){return typeof t.main=="string"}function GMe(t,e=[]){if(!HMe(t))return!1;for(const n of e)if(!t.hasOwnProperty(n)||typeof t[n]!="string")return!1;return!0}function so(t=[]){return([,e])=>e&&GMe(e,t)}function qMe(t){return Nt("MuiAlert",t)}const oF=gt("MuiAlert",["root","action","icon","message","filled","colorSuccess","colorInfo","colorWarning","colorError","filledSuccess","filledInfo","filledWarning","filledError","outlined","outlinedSuccess","outlinedInfo","outlinedWarning","outlinedError","standard","standardSuccess","standardInfo","standardWarning","standardError"]);function XMe(t){return Nt("MuiCircularProgress",t)}gt("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);const Rc=44,QI=Z1`
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
`,JI=Z1`
  0% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: 0;
  }

  50% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -15px;
  }

  100% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: -126px;
  }
`,KMe=typeof QI!="string"?CD`
        animation: ${QI} 1.4s linear infinite;
      `:null,YMe=typeof JI!="string"?CD`
        animation: ${JI} 1.4s ease-in-out infinite;
      `:null,ZMe=t=>{const{classes:e,variant:n,color:r,disableShrink:s}=t,o={root:["root",n,`color${Qe(r)}`],svg:["svg"],circle:["circle",`circle${Qe(n)}`,s&&"circleDisableShrink"]};return vt(o,XMe,e)},QMe=De("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[n.variant],e[`color${Qe(n.color)}`]]}})(bn(({theme:t})=>({display:"inline-block",variants:[{props:{variant:"determinate"},style:{transition:t.transitions.create("transform")}},{props:{variant:"indeterminate"},style:KMe||{animation:`${QI} 1.4s linear infinite`}},...Object.entries(t.palette).filter(so()).map(([e])=>({props:{color:e},style:{color:(t.vars||t).palette[e].main}}))]}))),JMe=De("svg",{name:"MuiCircularProgress",slot:"Svg"})({display:"block"}),eLe=De("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.circle,e[`circle${Qe(n.variant)}`],n.disableShrink&&e.circleDisableShrink]}})(bn(({theme:t})=>({stroke:"currentColor",variants:[{props:{variant:"determinate"},style:{transition:t.transitions.create("stroke-dashoffset")}},{props:{variant:"indeterminate"},style:{strokeDasharray:"80px, 200px",strokeDashoffset:0}},{props:({ownerState:e})=>e.variant==="indeterminate"&&!e.disableShrink,style:YMe||{animation:`${JI} 1.4s ease-in-out infinite`}}]}))),FD=A.forwardRef(function(e,n){const r=qt({props:e,name:"MuiCircularProgress"}),{className:s,color:o="primary",disableShrink:i=!1,size:a=40,style:l,thickness:c=3.6,value:d=0,variant:f="indeterminate",...p}=r,g={...r,color:o,disableShrink:i,size:a,thickness:c,value:d,variant:f},x=ZMe(g),b={},w={},C={};if(f==="determinate"){const N=2*Math.PI*((Rc-c)/2);b.strokeDasharray=N.toFixed(3),C["aria-valuenow"]=Math.round(d),b.strokeDashoffset=`${((100-d)/100*N).toFixed(3)}px`,w.transform="rotate(-90deg)"}return S.jsx(QMe,{className:st(x.root,s),style:{width:a,height:a,...w,...l},ownerState:g,ref:n,role:"progressbar",...C,...p,children:S.jsx(JMe,{className:x.svg,ownerState:g,viewBox:`${Rc/2} ${Rc/2} ${Rc} ${Rc}`,children:S.jsx(eLe,{className:x.circle,style:b,ownerState:g,cx:Rc,cy:Rc,r:(Rc-c)/2,fill:"none",strokeWidth:c})})})});function tLe(t){return Nt("MuiIconButton",t)}const iF=gt("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge","loading","loadingIndicator","loadingWrapper"]),nLe=t=>{const{classes:e,disabled:n,color:r,edge:s,size:o,loading:i}=t,a={root:["root",i&&"loading",n&&"disabled",r!=="default"&&`color${Qe(r)}`,s&&`edge${Qe(s)}`,`size${Qe(o)}`],loadingIndicator:["loadingIndicator"],loadingWrapper:["loadingWrapper"]};return vt(a,tLe,e)},rLe=De(cp,{name:"MuiIconButton",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.loading&&e.loading,n.color!=="default"&&e[`color${Qe(n.color)}`],n.edge&&e[`edge${Qe(n.edge)}`],e[`size${Qe(n.size)}`]]}})(bn(({theme:t})=>({textAlign:"center",flex:"0 0 auto",fontSize:t.typography.pxToRem(24),padding:8,borderRadius:"50%",color:(t.vars||t).palette.action.active,transition:t.transitions.create("background-color",{duration:t.transitions.duration.shortest}),variants:[{props:e=>!e.disableRipple,style:{"--IconButton-hoverBg":t.vars?`rgba(${t.vars.palette.action.activeChannel} / ${t.vars.palette.action.hoverOpacity})`:pn(t.palette.action.active,t.palette.action.hoverOpacity),"&:hover":{backgroundColor:"var(--IconButton-hoverBg)","@media (hover: none)":{backgroundColor:"transparent"}}}},{props:{edge:"start"},style:{marginLeft:-12}},{props:{edge:"start",size:"small"},style:{marginLeft:-3}},{props:{edge:"end"},style:{marginRight:-12}},{props:{edge:"end",size:"small"},style:{marginRight:-3}}]})),bn(({theme:t})=>({variants:[{props:{color:"inherit"},style:{color:"inherit"}},...Object.entries(t.palette).filter(so()).map(([e])=>({props:{color:e},style:{color:(t.vars||t).palette[e].main}})),...Object.entries(t.palette).filter(so()).map(([e])=>({props:{color:e},style:{"--IconButton-hoverBg":t.vars?`rgba(${(t.vars||t).palette[e].mainChannel} / ${t.vars.palette.action.hoverOpacity})`:pn((t.vars||t).palette[e].main,t.palette.action.hoverOpacity)}})),{props:{size:"small"},style:{padding:5,fontSize:t.typography.pxToRem(18)}},{props:{size:"large"},style:{padding:12,fontSize:t.typography.pxToRem(28)}}],[`&.${iF.disabled}`]:{backgroundColor:"transparent",color:(t.vars||t).palette.action.disabled},[`&.${iF.loading}`]:{color:"transparent"}}))),sLe=De("span",{name:"MuiIconButton",slot:"LoadingIndicator"})(({theme:t})=>({display:"none",position:"absolute",visibility:"visible",top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:(t.vars||t).palette.action.disabled,variants:[{props:{loading:!0},style:{display:"flex"}}]})),d0=A.forwardRef(function(e,n){const r=qt({props:e,name:"MuiIconButton"}),{edge:s=!1,children:o,className:i,color:a="default",disabled:l=!1,disableFocusRipple:c=!1,size:d="medium",id:f,loading:p=null,loadingIndicator:g,...x}=r,b=bc(f),w=g??S.jsx(FD,{"aria-labelledby":b,color:"inherit",size:16}),C={...r,edge:s,color:a,disabled:l,disableFocusRipple:c,loading:p,loadingIndicator:w,size:d},N=nLe(C);return S.jsxs(rLe,{id:p?b:f,className:st(N.root,i),centerRipple:!0,focusRipple:!c,disabled:l||p,ref:n,...x,ownerState:C,children:[typeof p=="boolean"&&S.jsx("span",{className:N.loadingWrapper,style:{display:"contents"},children:S.jsx(sLe,{className:N.loadingIndicator,ownerState:C,children:p&&w})}),o]})}),oLe=So(S.jsx("path",{d:"M20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4C12.76,4 13.5,4.11 14.2, 4.31L15.77,2.74C14.61,2.26 13.34,2 12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0, 0 22,12M7.91,10.08L6.5,11.5L11,16L21,6L19.59,4.58L11,13.17L7.91,10.08Z"})),iLe=So(S.jsx("path",{d:"M12 5.99L19.53 19H4.47L12 5.99M12 2L1 21h22L12 2zm1 14h-2v2h2v-2zm0-6h-2v4h2v-4z"})),aLe=So(S.jsx("path",{d:"M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"})),lLe=So(S.jsx("path",{d:"M11,9H13V7H11M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20, 12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10, 10 0 0,0 12,2M11,17H13V11H11V17Z"})),cLe=So(S.jsx("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})),uLe=t=>{const{variant:e,color:n,severity:r,classes:s}=t,o={root:["root",`color${Qe(n||r)}`,`${e}${Qe(n||r)}`,`${e}`],icon:["icon"],message:["message"],action:["action"]};return vt(o,qMe,s)},dLe=De(ju,{name:"MuiAlert",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[n.variant],e[`${n.variant}${Qe(n.color||n.severity)}`]]}})(bn(({theme:t})=>{const e=t.palette.mode==="light"?ip:ap,n=t.palette.mode==="light"?ap:ip;return{...t.typography.body2,backgroundColor:"transparent",display:"flex",padding:"6px 16px",variants:[...Object.entries(t.palette).filter(so(["light"])).map(([r])=>({props:{colorSeverity:r,variant:"standard"},style:{color:t.vars?t.vars.palette.Alert[`${r}Color`]:e(t.palette[r].light,.6),backgroundColor:t.vars?t.vars.palette.Alert[`${r}StandardBg`]:n(t.palette[r].light,.9),[`& .${oF.icon}`]:t.vars?{color:t.vars.palette.Alert[`${r}IconColor`]}:{color:t.palette[r].main}}})),...Object.entries(t.palette).filter(so(["light"])).map(([r])=>({props:{colorSeverity:r,variant:"outlined"},style:{color:t.vars?t.vars.palette.Alert[`${r}Color`]:e(t.palette[r].light,.6),border:`1px solid ${(t.vars||t).palette[r].light}`,[`& .${oF.icon}`]:t.vars?{color:t.vars.palette.Alert[`${r}IconColor`]}:{color:t.palette[r].main}}})),...Object.entries(t.palette).filter(so(["dark"])).map(([r])=>({props:{colorSeverity:r,variant:"filled"},style:{fontWeight:t.typography.fontWeightMedium,...t.vars?{color:t.vars.palette.Alert[`${r}FilledColor`],backgroundColor:t.vars.palette.Alert[`${r}FilledBg`]}:{backgroundColor:t.palette.mode==="dark"?t.palette[r].dark:t.palette[r].main,color:t.palette.getContrastText(t.palette[r].main)}}}))]}})),fLe=De("div",{name:"MuiAlert",slot:"Icon"})({marginRight:12,padding:"7px 0",display:"flex",fontSize:22,opacity:.9}),hLe=De("div",{name:"MuiAlert",slot:"Message"})({padding:"8px 0",minWidth:0,overflow:"auto"}),pLe=De("div",{name:"MuiAlert",slot:"Action"})({display:"flex",alignItems:"flex-start",padding:"4px 0 0 16px",marginLeft:"auto",marginRight:-8}),aF={success:S.jsx(oLe,{fontSize:"inherit"}),warning:S.jsx(iLe,{fontSize:"inherit"}),error:S.jsx(aLe,{fontSize:"inherit"}),info:S.jsx(lLe,{fontSize:"inherit"})},jy=A.forwardRef(function(e,n){const r=qt({props:e,name:"MuiAlert"}),{action:s,children:o,className:i,closeText:a="Close",color:l,components:c={},componentsProps:d={},icon:f,iconMapping:p=aF,onClose:g,role:x="alert",severity:b="success",slotProps:w={},slots:C={},variant:N="standard",...k}=r,I={...r,color:l,severity:b,variant:N,colorSeverity:l||b},R=uLe(I),$={slots:{closeButton:c.CloseButton,closeIcon:c.CloseIcon,...C},slotProps:{...d,...w}},[O,F]=Hn("root",{ref:n,shouldForwardComponentProp:!0,className:st(R.root,i),elementType:dLe,externalForwardedProps:{...$,...k},ownerState:I,additionalProps:{role:x,elevation:0}}),[M,_]=Hn("icon",{className:R.icon,elementType:fLe,externalForwardedProps:$,ownerState:I}),[V,B]=Hn("message",{className:R.message,elementType:hLe,externalForwardedProps:$,ownerState:I}),[W,q]=Hn("action",{className:R.action,elementType:pLe,externalForwardedProps:$,ownerState:I}),[j,G]=Hn("closeButton",{elementType:d0,externalForwardedProps:$,ownerState:I}),[Z,J]=Hn("closeIcon",{elementType:cLe,externalForwardedProps:$,ownerState:I});return S.jsxs(O,{...F,children:[f!==!1?S.jsx(M,{..._,children:f||p[b]||aF[b]}):null,S.jsx(V,{...B,children:o}),s!=null?S.jsx(W,{...q,children:s}):null,s==null&&g?S.jsx(W,{...q,children:S.jsx(j,{size:"small","aria-label":a,title:a,color:"inherit",onClick:g,...G,children:S.jsx(Z,{fontSize:"small",...J})})}):null]})});function mLe(t){return Nt("MuiTypography",t)}gt("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);const gLe={primary:!0,secondary:!0,error:!0,info:!0,success:!0,warning:!0,textPrimary:!0,textSecondary:!0,textDisabled:!0},xLe=aMe(),yLe=t=>{const{align:e,gutterBottom:n,noWrap:r,paragraph:s,variant:o,classes:i}=t,a={root:["root",o,t.align!=="inherit"&&`align${Qe(e)}`,n&&"gutterBottom",r&&"noWrap",s&&"paragraph"]};return vt(a,mLe,i)},bLe=De("span",{name:"MuiTypography",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.variant&&e[n.variant],n.align!=="inherit"&&e[`align${Qe(n.align)}`],n.noWrap&&e.noWrap,n.gutterBottom&&e.gutterBottom,n.paragraph&&e.paragraph]}})(bn(({theme:t})=>{var e;return{margin:0,variants:[{props:{variant:"inherit"},style:{font:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}},...Object.entries(t.typography).filter(([n,r])=>n!=="inherit"&&r&&typeof r=="object").map(([n,r])=>({props:{variant:n},style:r})),...Object.entries(t.palette).filter(so()).map(([n])=>({props:{color:n},style:{color:(t.vars||t).palette[n].main}})),...Object.entries(((e=t.palette)==null?void 0:e.text)||{}).filter(([,n])=>typeof n=="string").map(([n])=>({props:{color:`text${Qe(n)}`},style:{color:(t.vars||t).palette.text[n]}})),{props:({ownerState:n})=>n.align!=="inherit",style:{textAlign:"var(--Typography-textAlign)"}},{props:({ownerState:n})=>n.noWrap,style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},{props:({ownerState:n})=>n.gutterBottom,style:{marginBottom:"0.35em"}},{props:({ownerState:n})=>n.paragraph,style:{marginBottom:16}}]}})),lF={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},kl=A.forwardRef(function(e,n){const{color:r,...s}=qt({props:e,name:"MuiTypography"}),o=!gLe[r],i=xLe({...s,...o&&{color:r}}),{align:a="inherit",className:l,component:c,gutterBottom:d=!1,noWrap:f=!1,paragraph:p=!1,variant:g="body1",variantMapping:x=lF,...b}=i,w={...i,align:a,color:r,className:l,component:c,gutterBottom:d,noWrap:f,paragraph:p,variant:g,variantMapping:x},C=c||(p?"p":x[g]||lF[g])||"span",N=yLe(w);return S.jsx(bLe,{as:C,ref:n,className:st(N.root,l),...b,ownerState:w,style:{...a!=="inherit"&&{"--Typography-textAlign":a},...b.style}})});var Go="top",sa="bottom",oa="right",qo="left",MD="auto",rx=[Go,sa,oa,qo],up="start",f0="end",wLe="clippingParents",bU="viewport",km="popper",vLe="reference",cF=rx.reduce(function(t,e){return t.concat([e+"-"+up,e+"-"+f0])},[]),wU=[].concat(rx,[MD]).reduce(function(t,e){return t.concat([e,e+"-"+up,e+"-"+f0])},[]),CLe="beforeRead",SLe="read",NLe="afterRead",ELe="beforeMain",ILe="main",kLe="afterMain",TLe="beforeWrite",ALe="write",RLe="afterWrite",DLe=[CLe,SLe,NLe,ELe,ILe,kLe,TLe,ALe,RLe];function Tl(t){return t?(t.nodeName||"").toLowerCase():null}function bi(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function ef(t){var e=bi(t).Element;return t instanceof e||t instanceof Element}function Qi(t){var e=bi(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function LD(t){if(typeof ShadowRoot>"u")return!1;var e=bi(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}function $Le(t){var e=t.state;Object.keys(e.elements).forEach(function(n){var r=e.styles[n]||{},s=e.attributes[n]||{},o=e.elements[n];!Qi(o)||!Tl(o)||(Object.assign(o.style,r),Object.keys(s).forEach(function(i){var a=s[i];a===!1?o.removeAttribute(i):o.setAttribute(i,a===!0?"":a)}))})}function OLe(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow),function(){Object.keys(e.elements).forEach(function(r){var s=e.elements[r],o=e.attributes[r]||{},i=Object.keys(e.styles.hasOwnProperty(r)?e.styles[r]:n[r]),a=i.reduce(function(l,c){return l[c]="",l},{});!Qi(s)||!Tl(s)||(Object.assign(s.style,a),Object.keys(o).forEach(function(l){s.removeAttribute(l)}))})}}const _Le={name:"applyStyles",enabled:!0,phase:"write",fn:$Le,effect:OLe,requires:["computeStyles"]};function Cl(t){return t.split("-")[0]}var Rd=Math.max,pw=Math.min,dp=Math.round;function ek(){var t=navigator.userAgentData;return t!=null&&t.brands&&Array.isArray(t.brands)?t.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function vU(){return!/^((?!chrome|android).)*safari/i.test(ek())}function fp(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!1);var r=t.getBoundingClientRect(),s=1,o=1;e&&Qi(t)&&(s=t.offsetWidth>0&&dp(r.width)/t.offsetWidth||1,o=t.offsetHeight>0&&dp(r.height)/t.offsetHeight||1);var i=ef(t)?bi(t):window,a=i.visualViewport,l=!vU()&&n,c=(r.left+(l&&a?a.offsetLeft:0))/s,d=(r.top+(l&&a?a.offsetTop:0))/o,f=r.width/s,p=r.height/o;return{width:f,height:p,top:d,right:c+f,bottom:d+p,left:c,x:c,y:d}}function BD(t){var e=fp(t),n=t.offsetWidth,r=t.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-r)<=1&&(r=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:r}}function CU(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&LD(n)){var r=e;do{if(r&&t.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function fc(t){return bi(t).getComputedStyle(t)}function PLe(t){return["table","td","th"].indexOf(Tl(t))>=0}function zu(t){return((ef(t)?t.ownerDocument:t.document)||window.document).documentElement}function AC(t){return Tl(t)==="html"?t:t.assignedSlot||t.parentNode||(LD(t)?t.host:null)||zu(t)}function uF(t){return!Qi(t)||fc(t).position==="fixed"?null:t.offsetParent}function FLe(t){var e=/firefox/i.test(ek()),n=/Trident/i.test(ek());if(n&&Qi(t)){var r=fc(t);if(r.position==="fixed")return null}var s=AC(t);for(LD(s)&&(s=s.host);Qi(s)&&["html","body"].indexOf(Tl(s))<0;){var o=fc(s);if(o.transform!=="none"||o.perspective!=="none"||o.contain==="paint"||["transform","perspective"].indexOf(o.willChange)!==-1||e&&o.willChange==="filter"||e&&o.filter&&o.filter!=="none")return s;s=s.parentNode}return null}function sx(t){for(var e=bi(t),n=uF(t);n&&PLe(n)&&fc(n).position==="static";)n=uF(n);return n&&(Tl(n)==="html"||Tl(n)==="body"&&fc(n).position==="static")?e:n||FLe(t)||e}function jD(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function yg(t,e,n){return Rd(t,pw(e,n))}function MLe(t,e,n){var r=yg(t,e,n);return r>n?n:r}function SU(){return{top:0,right:0,bottom:0,left:0}}function NU(t){return Object.assign({},SU(),t)}function EU(t,e){return e.reduce(function(n,r){return n[r]=t,n},{})}var LLe=function(e,n){return e=typeof e=="function"?e(Object.assign({},n.rects,{placement:n.placement})):e,NU(typeof e!="number"?e:EU(e,rx))};function BLe(t){var e,n=t.state,r=t.name,s=t.options,o=n.elements.arrow,i=n.modifiersData.popperOffsets,a=Cl(n.placement),l=jD(a),c=[qo,oa].indexOf(a)>=0,d=c?"height":"width";if(!(!o||!i)){var f=LLe(s.padding,n),p=BD(o),g=l==="y"?Go:qo,x=l==="y"?sa:oa,b=n.rects.reference[d]+n.rects.reference[l]-i[l]-n.rects.popper[d],w=i[l]-n.rects.reference[l],C=sx(o),N=C?l==="y"?C.clientHeight||0:C.clientWidth||0:0,k=b/2-w/2,I=f[g],R=N-p[d]-f[x],$=N/2-p[d]/2+k,O=yg(I,$,R),F=l;n.modifiersData[r]=(e={},e[F]=O,e.centerOffset=O-$,e)}}function jLe(t){var e=t.state,n=t.options,r=n.element,s=r===void 0?"[data-popper-arrow]":r;s!=null&&(typeof s=="string"&&(s=e.elements.popper.querySelector(s),!s)||CU(e.elements.popper,s)&&(e.elements.arrow=s))}const zLe={name:"arrow",enabled:!0,phase:"main",fn:BLe,effect:jLe,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function hp(t){return t.split("-")[1]}var VLe={top:"auto",right:"auto",bottom:"auto",left:"auto"};function WLe(t,e){var n=t.x,r=t.y,s=e.devicePixelRatio||1;return{x:dp(n*s)/s||0,y:dp(r*s)/s||0}}function dF(t){var e,n=t.popper,r=t.popperRect,s=t.placement,o=t.variation,i=t.offsets,a=t.position,l=t.gpuAcceleration,c=t.adaptive,d=t.roundOffsets,f=t.isFixed,p=i.x,g=p===void 0?0:p,x=i.y,b=x===void 0?0:x,w=typeof d=="function"?d({x:g,y:b}):{x:g,y:b};g=w.x,b=w.y;var C=i.hasOwnProperty("x"),N=i.hasOwnProperty("y"),k=qo,I=Go,R=window;if(c){var $=sx(n),O="clientHeight",F="clientWidth";if($===bi(n)&&($=zu(n),fc($).position!=="static"&&a==="absolute"&&(O="scrollHeight",F="scrollWidth")),$=$,s===Go||(s===qo||s===oa)&&o===f0){I=sa;var M=f&&$===R&&R.visualViewport?R.visualViewport.height:$[O];b-=M-r.height,b*=l?1:-1}if(s===qo||(s===Go||s===sa)&&o===f0){k=oa;var _=f&&$===R&&R.visualViewport?R.visualViewport.width:$[F];g-=_-r.width,g*=l?1:-1}}var V=Object.assign({position:a},c&&VLe),B=d===!0?WLe({x:g,y:b},bi(n)):{x:g,y:b};if(g=B.x,b=B.y,l){var W;return Object.assign({},V,(W={},W[I]=N?"0":"",W[k]=C?"0":"",W.transform=(R.devicePixelRatio||1)<=1?"translate("+g+"px, "+b+"px)":"translate3d("+g+"px, "+b+"px, 0)",W))}return Object.assign({},V,(e={},e[I]=N?b+"px":"",e[k]=C?g+"px":"",e.transform="",e))}function ULe(t){var e=t.state,n=t.options,r=n.gpuAcceleration,s=r===void 0?!0:r,o=n.adaptive,i=o===void 0?!0:o,a=n.roundOffsets,l=a===void 0?!0:a,c={placement:Cl(e.placement),variation:hp(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:s,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,dF(Object.assign({},c,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:i,roundOffsets:l})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,dF(Object.assign({},c,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const HLe={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:ULe,data:{}};var ay={passive:!0};function GLe(t){var e=t.state,n=t.instance,r=t.options,s=r.scroll,o=s===void 0?!0:s,i=r.resize,a=i===void 0?!0:i,l=bi(e.elements.popper),c=[].concat(e.scrollParents.reference,e.scrollParents.popper);return o&&c.forEach(function(d){d.addEventListener("scroll",n.update,ay)}),a&&l.addEventListener("resize",n.update,ay),function(){o&&c.forEach(function(d){d.removeEventListener("scroll",n.update,ay)}),a&&l.removeEventListener("resize",n.update,ay)}}const qLe={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:GLe,data:{}};var XLe={left:"right",right:"left",bottom:"top",top:"bottom"};function zy(t){return t.replace(/left|right|bottom|top/g,function(e){return XLe[e]})}var KLe={start:"end",end:"start"};function fF(t){return t.replace(/start|end/g,function(e){return KLe[e]})}function zD(t){var e=bi(t),n=e.pageXOffset,r=e.pageYOffset;return{scrollLeft:n,scrollTop:r}}function VD(t){return fp(zu(t)).left+zD(t).scrollLeft}function YLe(t,e){var n=bi(t),r=zu(t),s=n.visualViewport,o=r.clientWidth,i=r.clientHeight,a=0,l=0;if(s){o=s.width,i=s.height;var c=vU();(c||!c&&e==="fixed")&&(a=s.offsetLeft,l=s.offsetTop)}return{width:o,height:i,x:a+VD(t),y:l}}function ZLe(t){var e,n=zu(t),r=zD(t),s=(e=t.ownerDocument)==null?void 0:e.body,o=Rd(n.scrollWidth,n.clientWidth,s?s.scrollWidth:0,s?s.clientWidth:0),i=Rd(n.scrollHeight,n.clientHeight,s?s.scrollHeight:0,s?s.clientHeight:0),a=-r.scrollLeft+VD(t),l=-r.scrollTop;return fc(s||n).direction==="rtl"&&(a+=Rd(n.clientWidth,s?s.clientWidth:0)-o),{width:o,height:i,x:a,y:l}}function WD(t){var e=fc(t),n=e.overflow,r=e.overflowX,s=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+s+r)}function IU(t){return["html","body","#document"].indexOf(Tl(t))>=0?t.ownerDocument.body:Qi(t)&&WD(t)?t:IU(AC(t))}function bg(t,e){var n;e===void 0&&(e=[]);var r=IU(t),s=r===((n=t.ownerDocument)==null?void 0:n.body),o=bi(r),i=s?[o].concat(o.visualViewport||[],WD(r)?r:[]):r,a=e.concat(i);return s?a:a.concat(bg(AC(i)))}function tk(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function QLe(t,e){var n=fp(t,!1,e==="fixed");return n.top=n.top+t.clientTop,n.left=n.left+t.clientLeft,n.bottom=n.top+t.clientHeight,n.right=n.left+t.clientWidth,n.width=t.clientWidth,n.height=t.clientHeight,n.x=n.left,n.y=n.top,n}function hF(t,e,n){return e===bU?tk(YLe(t,n)):ef(e)?QLe(e,n):tk(ZLe(zu(t)))}function JLe(t){var e=bg(AC(t)),n=["absolute","fixed"].indexOf(fc(t).position)>=0,r=n&&Qi(t)?sx(t):t;return ef(r)?e.filter(function(s){return ef(s)&&CU(s,r)&&Tl(s)!=="body"}):[]}function e5e(t,e,n,r){var s=e==="clippingParents"?JLe(t):[].concat(e),o=[].concat(s,[n]),i=o[0],a=o.reduce(function(l,c){var d=hF(t,c,r);return l.top=Rd(d.top,l.top),l.right=pw(d.right,l.right),l.bottom=pw(d.bottom,l.bottom),l.left=Rd(d.left,l.left),l},hF(t,i,r));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function kU(t){var e=t.reference,n=t.element,r=t.placement,s=r?Cl(r):null,o=r?hp(r):null,i=e.x+e.width/2-n.width/2,a=e.y+e.height/2-n.height/2,l;switch(s){case Go:l={x:i,y:e.y-n.height};break;case sa:l={x:i,y:e.y+e.height};break;case oa:l={x:e.x+e.width,y:a};break;case qo:l={x:e.x-n.width,y:a};break;default:l={x:e.x,y:e.y}}var c=s?jD(s):null;if(c!=null){var d=c==="y"?"height":"width";switch(o){case up:l[c]=l[c]-(e[d]/2-n[d]/2);break;case f0:l[c]=l[c]+(e[d]/2-n[d]/2);break}}return l}function h0(t,e){e===void 0&&(e={});var n=e,r=n.placement,s=r===void 0?t.placement:r,o=n.strategy,i=o===void 0?t.strategy:o,a=n.boundary,l=a===void 0?wLe:a,c=n.rootBoundary,d=c===void 0?bU:c,f=n.elementContext,p=f===void 0?km:f,g=n.altBoundary,x=g===void 0?!1:g,b=n.padding,w=b===void 0?0:b,C=NU(typeof w!="number"?w:EU(w,rx)),N=p===km?vLe:km,k=t.rects.popper,I=t.elements[x?N:p],R=e5e(ef(I)?I:I.contextElement||zu(t.elements.popper),l,d,i),$=fp(t.elements.reference),O=kU({reference:$,element:k,placement:s}),F=tk(Object.assign({},k,O)),M=p===km?F:$,_={top:R.top-M.top+C.top,bottom:M.bottom-R.bottom+C.bottom,left:R.left-M.left+C.left,right:M.right-R.right+C.right},V=t.modifiersData.offset;if(p===km&&V){var B=V[s];Object.keys(_).forEach(function(W){var q=[oa,sa].indexOf(W)>=0?1:-1,j=[Go,sa].indexOf(W)>=0?"y":"x";_[W]+=B[j]*q})}return _}function t5e(t,e){e===void 0&&(e={});var n=e,r=n.placement,s=n.boundary,o=n.rootBoundary,i=n.padding,a=n.flipVariations,l=n.allowedAutoPlacements,c=l===void 0?wU:l,d=hp(r),f=d?a?cF:cF.filter(function(x){return hp(x)===d}):rx,p=f.filter(function(x){return c.indexOf(x)>=0});p.length===0&&(p=f);var g=p.reduce(function(x,b){return x[b]=h0(t,{placement:b,boundary:s,rootBoundary:o,padding:i})[Cl(b)],x},{});return Object.keys(g).sort(function(x,b){return g[x]-g[b]})}function n5e(t){if(Cl(t)===MD)return[];var e=zy(t);return[fF(t),e,fF(e)]}function r5e(t){var e=t.state,n=t.options,r=t.name;if(!e.modifiersData[r]._skip){for(var s=n.mainAxis,o=s===void 0?!0:s,i=n.altAxis,a=i===void 0?!0:i,l=n.fallbackPlacements,c=n.padding,d=n.boundary,f=n.rootBoundary,p=n.altBoundary,g=n.flipVariations,x=g===void 0?!0:g,b=n.allowedAutoPlacements,w=e.options.placement,C=Cl(w),N=C===w,k=l||(N||!x?[zy(w)]:n5e(w)),I=[w].concat(k).reduce(function(ge,ve){return ge.concat(Cl(ve)===MD?t5e(e,{placement:ve,boundary:d,rootBoundary:f,padding:c,flipVariations:x,allowedAutoPlacements:b}):ve)},[]),R=e.rects.reference,$=e.rects.popper,O=new Map,F=!0,M=I[0],_=0;_<I.length;_++){var V=I[_],B=Cl(V),W=hp(V)===up,q=[Go,sa].indexOf(B)>=0,j=q?"width":"height",G=h0(e,{placement:V,boundary:d,rootBoundary:f,altBoundary:p,padding:c}),Z=q?W?oa:qo:W?sa:Go;R[j]>$[j]&&(Z=zy(Z));var J=zy(Z),X=[];if(o&&X.push(G[B]<=0),a&&X.push(G[Z]<=0,G[J]<=0),X.every(function(ge){return ge})){M=V,F=!1;break}O.set(V,X)}if(F)for(var ee=x?3:1,ne=function(ve){var he=I.find(function(Me){var ze=O.get(Me);if(ze)return ze.slice(0,ve).every(function(Oe){return Oe})});if(he)return M=he,"break"},oe=ee;oe>0;oe--){var ye=ne(oe);if(ye==="break")break}e.placement!==M&&(e.modifiersData[r]._skip=!0,e.placement=M,e.reset=!0)}}const s5e={name:"flip",enabled:!0,phase:"main",fn:r5e,requiresIfExists:["offset"],data:{_skip:!1}};function pF(t,e,n){return n===void 0&&(n={x:0,y:0}),{top:t.top-e.height-n.y,right:t.right-e.width+n.x,bottom:t.bottom-e.height+n.y,left:t.left-e.width-n.x}}function mF(t){return[Go,oa,sa,qo].some(function(e){return t[e]>=0})}function o5e(t){var e=t.state,n=t.name,r=e.rects.reference,s=e.rects.popper,o=e.modifiersData.preventOverflow,i=h0(e,{elementContext:"reference"}),a=h0(e,{altBoundary:!0}),l=pF(i,r),c=pF(a,s,o),d=mF(l),f=mF(c);e.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:d,hasPopperEscaped:f},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":d,"data-popper-escaped":f})}const i5e={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:o5e};function a5e(t,e,n){var r=Cl(t),s=[qo,Go].indexOf(r)>=0?-1:1,o=typeof n=="function"?n(Object.assign({},e,{placement:t})):n,i=o[0],a=o[1];return i=i||0,a=(a||0)*s,[qo,oa].indexOf(r)>=0?{x:a,y:i}:{x:i,y:a}}function l5e(t){var e=t.state,n=t.options,r=t.name,s=n.offset,o=s===void 0?[0,0]:s,i=wU.reduce(function(d,f){return d[f]=a5e(f,e.rects,o),d},{}),a=i[e.placement],l=a.x,c=a.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=l,e.modifiersData.popperOffsets.y+=c),e.modifiersData[r]=i}const c5e={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:l5e};function u5e(t){var e=t.state,n=t.name;e.modifiersData[n]=kU({reference:e.rects.reference,element:e.rects.popper,placement:e.placement})}const d5e={name:"popperOffsets",enabled:!0,phase:"read",fn:u5e,data:{}};function f5e(t){return t==="x"?"y":"x"}function h5e(t){var e=t.state,n=t.options,r=t.name,s=n.mainAxis,o=s===void 0?!0:s,i=n.altAxis,a=i===void 0?!1:i,l=n.boundary,c=n.rootBoundary,d=n.altBoundary,f=n.padding,p=n.tether,g=p===void 0?!0:p,x=n.tetherOffset,b=x===void 0?0:x,w=h0(e,{boundary:l,rootBoundary:c,padding:f,altBoundary:d}),C=Cl(e.placement),N=hp(e.placement),k=!N,I=jD(C),R=f5e(I),$=e.modifiersData.popperOffsets,O=e.rects.reference,F=e.rects.popper,M=typeof b=="function"?b(Object.assign({},e.rects,{placement:e.placement})):b,_=typeof M=="number"?{mainAxis:M,altAxis:M}:Object.assign({mainAxis:0,altAxis:0},M),V=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,B={x:0,y:0};if($){if(o){var W,q=I==="y"?Go:qo,j=I==="y"?sa:oa,G=I==="y"?"height":"width",Z=$[I],J=Z+w[q],X=Z-w[j],ee=g?-F[G]/2:0,ne=N===up?O[G]:F[G],oe=N===up?-F[G]:-O[G],ye=e.elements.arrow,ge=g&&ye?BD(ye):{width:0,height:0},ve=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:SU(),he=ve[q],Me=ve[j],ze=yg(0,O[G],ge[G]),Oe=k?O[G]/2-ee-ze-he-_.mainAxis:ne-ze-he-_.mainAxis,Ie=k?-O[G]/2+ee+ze+Me+_.mainAxis:oe+ze+Me+_.mainAxis,me=e.elements.arrow&&sx(e.elements.arrow),ke=me?I==="y"?me.clientTop||0:me.clientLeft||0:0,pe=(W=V==null?void 0:V[I])!=null?W:0,Pe=Z+Oe-pe-ke,Ve=Z+Ie-pe,Fe=yg(g?pw(J,Pe):J,Z,g?Rd(X,Ve):X);$[I]=Fe,B[I]=Fe-Z}if(a){var Be,be=I==="x"?Go:qo,je=I==="x"?sa:oa,Se=$[R],ue=R==="y"?"height":"width",He=Se+w[be],It=Se-w[je],ot=[Go,qo].indexOf(C)!==-1,Vt=(Be=V==null?void 0:V[R])!=null?Be:0,Xt=ot?He:Se-O[ue]-F[ue]-Vt+_.altAxis,Ln=ot?Se+O[ue]+F[ue]-Vt-_.altAxis:It,hn=g&&ot?MLe(Xt,Se,Ln):yg(g?Xt:He,Se,g?Ln:It);$[R]=hn,B[R]=hn-Se}e.modifiersData[r]=B}}const p5e={name:"preventOverflow",enabled:!0,phase:"main",fn:h5e,requiresIfExists:["offset"]};function m5e(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function g5e(t){return t===bi(t)||!Qi(t)?zD(t):m5e(t)}function x5e(t){var e=t.getBoundingClientRect(),n=dp(e.width)/t.offsetWidth||1,r=dp(e.height)/t.offsetHeight||1;return n!==1||r!==1}function y5e(t,e,n){n===void 0&&(n=!1);var r=Qi(e),s=Qi(e)&&x5e(e),o=zu(e),i=fp(t,s,n),a={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(r||!r&&!n)&&((Tl(e)!=="body"||WD(o))&&(a=g5e(e)),Qi(e)?(l=fp(e,!0),l.x+=e.clientLeft,l.y+=e.clientTop):o&&(l.x=VD(o))),{x:i.left+a.scrollLeft-l.x,y:i.top+a.scrollTop-l.y,width:i.width,height:i.height}}function b5e(t){var e=new Map,n=new Set,r=[];t.forEach(function(o){e.set(o.name,o)});function s(o){n.add(o.name);var i=[].concat(o.requires||[],o.requiresIfExists||[]);i.forEach(function(a){if(!n.has(a)){var l=e.get(a);l&&s(l)}}),r.push(o)}return t.forEach(function(o){n.has(o.name)||s(o)}),r}function w5e(t){var e=b5e(t);return DLe.reduce(function(n,r){return n.concat(e.filter(function(s){return s.phase===r}))},[])}function v5e(t){var e;return function(){return e||(e=new Promise(function(n){Promise.resolve().then(function(){e=void 0,n(t())})})),e}}function C5e(t){var e=t.reduce(function(n,r){var s=n[r.name];return n[r.name]=s?Object.assign({},s,r,{options:Object.assign({},s.options,r.options),data:Object.assign({},s.data,r.data)}):r,n},{});return Object.keys(e).map(function(n){return e[n]})}var gF={placement:"bottom",modifiers:[],strategy:"absolute"};function xF(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function S5e(t){t===void 0&&(t={});var e=t,n=e.defaultModifiers,r=n===void 0?[]:n,s=e.defaultOptions,o=s===void 0?gF:s;return function(a,l,c){c===void 0&&(c=o);var d={placement:"bottom",orderedModifiers:[],options:Object.assign({},gF,o),modifiersData:{},elements:{reference:a,popper:l},attributes:{},styles:{}},f=[],p=!1,g={state:d,setOptions:function(C){var N=typeof C=="function"?C(d.options):C;b(),d.options=Object.assign({},o,d.options,N),d.scrollParents={reference:ef(a)?bg(a):a.contextElement?bg(a.contextElement):[],popper:bg(l)};var k=w5e(C5e([].concat(r,d.options.modifiers)));return d.orderedModifiers=k.filter(function(I){return I.enabled}),x(),g.update()},forceUpdate:function(){if(!p){var C=d.elements,N=C.reference,k=C.popper;if(xF(N,k)){d.rects={reference:y5e(N,sx(k),d.options.strategy==="fixed"),popper:BD(k)},d.reset=!1,d.placement=d.options.placement,d.orderedModifiers.forEach(function(_){return d.modifiersData[_.name]=Object.assign({},_.data)});for(var I=0;I<d.orderedModifiers.length;I++){if(d.reset===!0){d.reset=!1,I=-1;continue}var R=d.orderedModifiers[I],$=R.fn,O=R.options,F=O===void 0?{}:O,M=R.name;typeof $=="function"&&(d=$({state:d,options:F,name:M,instance:g})||d)}}}},update:v5e(function(){return new Promise(function(w){g.forceUpdate(),w(d)})}),destroy:function(){b(),p=!0}};if(!xF(a,l))return g;g.setOptions(c).then(function(w){!p&&c.onFirstUpdate&&c.onFirstUpdate(w)});function x(){d.orderedModifiers.forEach(function(w){var C=w.name,N=w.options,k=N===void 0?{}:N,I=w.effect;if(typeof I=="function"){var R=I({state:d,name:C,instance:g,options:k}),$=function(){};f.push(R||$)}})}function b(){f.forEach(function(w){return w()}),f=[]}return g}}var N5e=[qLe,d5e,HLe,_Le,c5e,s5e,p5e,zLe,i5e],E5e=S5e({defaultModifiers:N5e});function yn(t){var f;const{elementType:e,externalSlotProps:n,ownerState:r,skipResolvingSlotProps:s=!1,...o}=t,i=s?{}:lp(n,r),{props:a,internalRef:l}=xU({...o,externalSlotProps:i}),c=wn(l,i==null?void 0:i.ref,(f=t.additionalProps)==null?void 0:f.ref);return mU(e,{...a,ref:c},r)}function ox(t){var e;return parseInt(A.version,10)>=19?((e=t==null?void 0:t.props)==null?void 0:e.ref)||null:(t==null?void 0:t.ref)||null}function I5e(t){return typeof t=="function"?t():t}const TU=A.forwardRef(function(e,n){const{children:r,container:s,disablePortal:o=!1}=e,[i,a]=A.useState(null),l=wn(A.isValidElement(r)?ox(r):null,n);if(ts(()=>{o||a(I5e(s)||document.body)},[s,o]),ts(()=>{if(i&&!o)return ZP(n,i),()=>{ZP(n,null)}},[n,i,o]),o){if(A.isValidElement(r)){const c={ref:l};return A.cloneElement(r,c)}return r}return i&&Mw.createPortal(r,i)});function k5e(t){return Nt("MuiPopper",t)}gt("MuiPopper",["root"]);function T5e(t,e){if(e==="ltr")return t;switch(t){case"bottom-end":return"bottom-start";case"bottom-start":return"bottom-end";case"top-end":return"top-start";case"top-start":return"top-end";default:return t}}function nk(t){return typeof t=="function"?t():t}function A5e(t){return t.nodeType!==void 0}const R5e=t=>{const{classes:e}=t;return vt({root:["root"]},k5e,e)},D5e={},$5e=A.forwardRef(function(e,n){const{anchorEl:r,children:s,direction:o,disablePortal:i,modifiers:a,open:l,placement:c,popperOptions:d,popperRef:f,slotProps:p={},slots:g={},TransitionProps:x,ownerState:b,...w}=e,C=A.useRef(null),N=wn(C,n),k=A.useRef(null),I=wn(k,f),R=A.useRef(I);ts(()=>{R.current=I},[I]),A.useImperativeHandle(f,()=>k.current,[]);const $=T5e(c,o),[O,F]=A.useState($),[M,_]=A.useState(nk(r));A.useEffect(()=>{k.current&&k.current.forceUpdate()}),A.useEffect(()=>{r&&_(nk(r))},[r]),ts(()=>{if(!M||!l)return;const j=J=>{F(J.placement)};let G=[{name:"preventOverflow",options:{altBoundary:i}},{name:"flip",options:{altBoundary:i}},{name:"onUpdate",enabled:!0,phase:"afterWrite",fn:({state:J})=>{j(J)}}];a!=null&&(G=G.concat(a)),d&&d.modifiers!=null&&(G=G.concat(d.modifiers));const Z=E5e(M,C.current,{placement:$,...d,modifiers:G});return R.current(Z),()=>{Z.destroy(),R.current(null)}},[M,i,a,l,d,$]);const V={placement:O};x!==null&&(V.TransitionProps=x);const B=R5e(e),W=g.root??"div",q=yn({elementType:W,externalSlotProps:p.root,externalForwardedProps:w,additionalProps:{role:"tooltip",ref:N},ownerState:e,className:B.root});return S.jsx(W,{...q,children:typeof s=="function"?s(V):s})}),O5e=A.forwardRef(function(e,n){const{anchorEl:r,children:s,container:o,direction:i="ltr",disablePortal:a=!1,keepMounted:l=!1,modifiers:c,open:d,placement:f="bottom",popperOptions:p=D5e,popperRef:g,style:x,transition:b=!1,slotProps:w={},slots:C={},...N}=e,[k,I]=A.useState(!0),R=()=>{I(!1)},$=()=>{I(!0)};if(!l&&!d&&(!b||k))return null;let O;if(o)O=o;else if(r){const _=nk(r);O=_&&A5e(_)?io(_).body:io(null).body}const F=!d&&l&&(!b||k)?"none":void 0,M=b?{in:d,onEnter:R,onExited:$}:void 0;return S.jsx(TU,{disablePortal:a,container:O,children:S.jsx($5e,{anchorEl:r,direction:i,disablePortal:a,modifiers:c,ref:n,open:b?!k:d,placement:f,popperOptions:p,popperRef:g,slotProps:w,slots:C,...N,style:{position:"fixed",top:0,left:0,display:F,...x},TransitionProps:M,children:s})})}),_5e=De(O5e,{name:"MuiPopper",slot:"Root"})({}),P5e=A.forwardRef(function(e,n){const r=Wa(),s=qt({props:e,name:"MuiPopper"}),{anchorEl:o,component:i,components:a,componentsProps:l,container:c,disablePortal:d,keepMounted:f,modifiers:p,open:g,placement:x,popperOptions:b,popperRef:w,transition:C,slots:N,slotProps:k,...I}=s,R=(N==null?void 0:N.root)??(a==null?void 0:a.Root),$={anchorEl:o,container:c,disablePortal:d,keepMounted:f,modifiers:p,open:g,placement:x,popperOptions:b,popperRef:w,transition:C,...I};return S.jsx(_5e,{as:i,direction:r?"rtl":"ltr",slots:{root:R},slotProps:k??l,...$,ref:n})}),F5e=So(S.jsx("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"}));function M5e(t){return Nt("MuiChip",t)}const tn=gt("MuiChip",["root","sizeSmall","sizeMedium","colorDefault","colorError","colorInfo","colorPrimary","colorSecondary","colorSuccess","colorWarning","disabled","clickable","clickableColorPrimary","clickableColorSecondary","deletable","deletableColorPrimary","deletableColorSecondary","outlined","filled","outlinedPrimary","outlinedSecondary","filledPrimary","filledSecondary","avatar","avatarSmall","avatarMedium","avatarColorPrimary","avatarColorSecondary","icon","iconSmall","iconMedium","iconColorPrimary","iconColorSecondary","label","labelSmall","labelMedium","deleteIcon","deleteIconSmall","deleteIconMedium","deleteIconColorPrimary","deleteIconColorSecondary","deleteIconOutlinedColorPrimary","deleteIconOutlinedColorSecondary","deleteIconFilledColorPrimary","deleteIconFilledColorSecondary","focusVisible"]),L5e=t=>{const{classes:e,disabled:n,size:r,color:s,iconColor:o,onDelete:i,clickable:a,variant:l}=t,c={root:["root",l,n&&"disabled",`size${Qe(r)}`,`color${Qe(s)}`,a&&"clickable",a&&`clickableColor${Qe(s)}`,i&&"deletable",i&&`deletableColor${Qe(s)}`,`${l}${Qe(s)}`],label:["label",`label${Qe(r)}`],avatar:["avatar",`avatar${Qe(r)}`,`avatarColor${Qe(s)}`],icon:["icon",`icon${Qe(r)}`,`iconColor${Qe(o)}`],deleteIcon:["deleteIcon",`deleteIcon${Qe(r)}`,`deleteIconColor${Qe(s)}`,`deleteIcon${Qe(l)}Color${Qe(s)}`]};return vt(c,M5e,e)},B5e=De("div",{name:"MuiChip",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t,{color:r,iconColor:s,clickable:o,onDelete:i,size:a,variant:l}=n;return[{[`& .${tn.avatar}`]:e.avatar},{[`& .${tn.avatar}`]:e[`avatar${Qe(a)}`]},{[`& .${tn.avatar}`]:e[`avatarColor${Qe(r)}`]},{[`& .${tn.icon}`]:e.icon},{[`& .${tn.icon}`]:e[`icon${Qe(a)}`]},{[`& .${tn.icon}`]:e[`iconColor${Qe(s)}`]},{[`& .${tn.deleteIcon}`]:e.deleteIcon},{[`& .${tn.deleteIcon}`]:e[`deleteIcon${Qe(a)}`]},{[`& .${tn.deleteIcon}`]:e[`deleteIconColor${Qe(r)}`]},{[`& .${tn.deleteIcon}`]:e[`deleteIcon${Qe(l)}Color${Qe(r)}`]},e.root,e[`size${Qe(a)}`],e[`color${Qe(r)}`],o&&e.clickable,o&&r!=="default"&&e[`clickableColor${Qe(r)})`],i&&e.deletable,i&&r!=="default"&&e[`deletableColor${Qe(r)}`],e[l],e[`${l}${Qe(r)}`]]}})(bn(({theme:t})=>{const e=t.palette.mode==="light"?t.palette.grey[700]:t.palette.grey[300];return{maxWidth:"100%",fontFamily:t.typography.fontFamily,fontSize:t.typography.pxToRem(13),display:"inline-flex",alignItems:"center",justifyContent:"center",height:32,color:(t.vars||t).palette.text.primary,backgroundColor:(t.vars||t).palette.action.selected,borderRadius:32/2,whiteSpace:"nowrap",transition:t.transitions.create(["background-color","box-shadow"]),cursor:"unset",outline:0,textDecoration:"none",border:0,padding:0,verticalAlign:"middle",boxSizing:"border-box",[`&.${tn.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity,pointerEvents:"none"},[`& .${tn.avatar}`]:{marginLeft:5,marginRight:-6,width:24,height:24,color:t.vars?t.vars.palette.Chip.defaultAvatarColor:e,fontSize:t.typography.pxToRem(12)},[`& .${tn.avatarColorPrimary}`]:{color:(t.vars||t).palette.primary.contrastText,backgroundColor:(t.vars||t).palette.primary.dark},[`& .${tn.avatarColorSecondary}`]:{color:(t.vars||t).palette.secondary.contrastText,backgroundColor:(t.vars||t).palette.secondary.dark},[`& .${tn.avatarSmall}`]:{marginLeft:4,marginRight:-4,width:18,height:18,fontSize:t.typography.pxToRem(10)},[`& .${tn.icon}`]:{marginLeft:5,marginRight:-6},[`& .${tn.deleteIcon}`]:{WebkitTapHighlightColor:"transparent",color:t.vars?`rgba(${t.vars.palette.text.primaryChannel} / 0.26)`:pn(t.palette.text.primary,.26),fontSize:22,cursor:"pointer",margin:"0 5px 0 -6px","&:hover":{color:t.vars?`rgba(${t.vars.palette.text.primaryChannel} / 0.4)`:pn(t.palette.text.primary,.4)}},variants:[{props:{size:"small"},style:{height:24,[`& .${tn.icon}`]:{fontSize:18,marginLeft:4,marginRight:-4},[`& .${tn.deleteIcon}`]:{fontSize:16,marginRight:4,marginLeft:-4}}},...Object.entries(t.palette).filter(so(["contrastText"])).map(([n])=>({props:{color:n},style:{backgroundColor:(t.vars||t).palette[n].main,color:(t.vars||t).palette[n].contrastText,[`& .${tn.deleteIcon}`]:{color:t.vars?`rgba(${t.vars.palette[n].contrastTextChannel} / 0.7)`:pn(t.palette[n].contrastText,.7),"&:hover, &:active":{color:(t.vars||t).palette[n].contrastText}}}})),{props:n=>n.iconColor===n.color,style:{[`& .${tn.icon}`]:{color:t.vars?t.vars.palette.Chip.defaultIconColor:e}}},{props:n=>n.iconColor===n.color&&n.color!=="default",style:{[`& .${tn.icon}`]:{color:"inherit"}}},{props:{onDelete:!0},style:{[`&.${tn.focusVisible}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.action.selectedChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.focusOpacity}))`:pn(t.palette.action.selected,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)}}},...Object.entries(t.palette).filter(so(["dark"])).map(([n])=>({props:{color:n,onDelete:!0},style:{[`&.${tn.focusVisible}`]:{background:(t.vars||t).palette[n].dark}}})),{props:{clickable:!0},style:{userSelect:"none",WebkitTapHighlightColor:"transparent",cursor:"pointer","&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette.action.selectedChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.hoverOpacity}))`:pn(t.palette.action.selected,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity)},[`&.${tn.focusVisible}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.action.selectedChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.focusOpacity}))`:pn(t.palette.action.selected,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)},"&:active":{boxShadow:(t.vars||t).shadows[1]}}},...Object.entries(t.palette).filter(so(["dark"])).map(([n])=>({props:{color:n,clickable:!0},style:{[`&:hover, &.${tn.focusVisible}`]:{backgroundColor:(t.vars||t).palette[n].dark}}})),{props:{variant:"outlined"},style:{backgroundColor:"transparent",border:t.vars?`1px solid ${t.vars.palette.Chip.defaultBorder}`:`1px solid ${t.palette.mode==="light"?t.palette.grey[400]:t.palette.grey[700]}`,[`&.${tn.clickable}:hover`]:{backgroundColor:(t.vars||t).palette.action.hover},[`&.${tn.focusVisible}`]:{backgroundColor:(t.vars||t).palette.action.focus},[`& .${tn.avatar}`]:{marginLeft:4},[`& .${tn.avatarSmall}`]:{marginLeft:2},[`& .${tn.icon}`]:{marginLeft:4},[`& .${tn.iconSmall}`]:{marginLeft:2},[`& .${tn.deleteIcon}`]:{marginRight:5},[`& .${tn.deleteIconSmall}`]:{marginRight:3}}},...Object.entries(t.palette).filter(so()).map(([n])=>({props:{variant:"outlined",color:n},style:{color:(t.vars||t).palette[n].main,border:`1px solid ${t.vars?`rgba(${t.vars.palette[n].mainChannel} / 0.7)`:pn(t.palette[n].main,.7)}`,[`&.${tn.clickable}:hover`]:{backgroundColor:t.vars?`rgba(${t.vars.palette[n].mainChannel} / ${t.vars.palette.action.hoverOpacity})`:pn(t.palette[n].main,t.palette.action.hoverOpacity)},[`&.${tn.focusVisible}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette[n].mainChannel} / ${t.vars.palette.action.focusOpacity})`:pn(t.palette[n].main,t.palette.action.focusOpacity)},[`& .${tn.deleteIcon}`]:{color:t.vars?`rgba(${t.vars.palette[n].mainChannel} / 0.7)`:pn(t.palette[n].main,.7),"&:hover, &:active":{color:(t.vars||t).palette[n].main}}}}))]}})),j5e=De("span",{name:"MuiChip",slot:"Label",overridesResolver:(t,e)=>{const{ownerState:n}=t,{size:r}=n;return[e.label,e[`label${Qe(r)}`]]}})({overflow:"hidden",textOverflow:"ellipsis",paddingLeft:12,paddingRight:12,whiteSpace:"nowrap",variants:[{props:{variant:"outlined"},style:{paddingLeft:11,paddingRight:11}},{props:{size:"small"},style:{paddingLeft:8,paddingRight:8}},{props:{size:"small",variant:"outlined"},style:{paddingLeft:7,paddingRight:7}}]});function yF(t){return t.key==="Backspace"||t.key==="Delete"}const AU=A.forwardRef(function(e,n){const r=qt({props:e,name:"MuiChip"}),{avatar:s,className:o,clickable:i,color:a="default",component:l,deleteIcon:c,disabled:d=!1,icon:f,label:p,onClick:g,onDelete:x,onKeyDown:b,onKeyUp:w,size:C="medium",variant:N="filled",tabIndex:k,skipFocusWhenDisabled:I=!1,...R}=r,$=A.useRef(null),O=wn($,n),F=X=>{X.stopPropagation(),x&&x(X)},M=X=>{X.currentTarget===X.target&&yF(X)&&X.preventDefault(),b&&b(X)},_=X=>{X.currentTarget===X.target&&x&&yF(X)&&x(X),w&&w(X)},V=i!==!1&&g?!0:i,B=V||x?cp:l||"div",W={...r,component:B,disabled:d,size:C,color:a,iconColor:A.isValidElement(f)&&f.props.color||a,onDelete:!!x,clickable:V,variant:N},q=L5e(W),j=B===cp?{component:l||"div",focusVisibleClassName:q.focusVisible,...x&&{disableRipple:!0}}:{};let G=null;x&&(G=c&&A.isValidElement(c)?A.cloneElement(c,{className:st(c.props.className,q.deleteIcon),onClick:F}):S.jsx(F5e,{className:q.deleteIcon,onClick:F}));let Z=null;s&&A.isValidElement(s)&&(Z=A.cloneElement(s,{className:st(q.avatar,s.props.className)}));let J=null;return f&&A.isValidElement(f)&&(J=A.cloneElement(f,{className:st(q.icon,f.props.className)})),S.jsxs(B5e,{as:B,className:st(q.root,o),disabled:V&&d?!0:void 0,onClick:g,onKeyDown:M,onKeyUp:_,ref:O,tabIndex:I&&d?-1:k,ownerState:W,...j,...R,children:[Z||J,S.jsx(j5e,{className:q.label,ownerState:W,children:p}),G]})});function ly(t){return parseInt(t,10)||0}const z5e={shadow:{visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"}};function V5e(t){for(const e in t)return!1;return!0}function bF(t){return V5e(t)||t.outerHeightStyle===0&&!t.overflowing}const W5e=A.forwardRef(function(e,n){const{onChange:r,maxRows:s,minRows:o=1,style:i,value:a,...l}=e,{current:c}=A.useRef(a!=null),d=A.useRef(null),f=wn(n,d),p=A.useRef(null),g=A.useRef(null),x=A.useCallback(()=>{const k=d.current,I=g.current;if(!k||!I)return;const $=dc(k).getComputedStyle(k);if($.width==="0px")return{outerHeightStyle:0,overflowing:!1};I.style.width=$.width,I.value=k.value||e.placeholder||"x",I.value.slice(-1)===`
`&&(I.value+=" ");const O=$.boxSizing,F=ly($.paddingBottom)+ly($.paddingTop),M=ly($.borderBottomWidth)+ly($.borderTopWidth),_=I.scrollHeight;I.value="x";const V=I.scrollHeight;let B=_;o&&(B=Math.max(Number(o)*V,B)),s&&(B=Math.min(Number(s)*V,B)),B=Math.max(B,V);const W=B+(O==="border-box"?F+M:0),q=Math.abs(B-_)<=1;return{outerHeightStyle:W,overflowing:q}},[s,o,e.placeholder]),b=at(()=>{const k=d.current,I=x();if(!k||!I||bF(I))return!1;const R=I.outerHeightStyle;return p.current!=null&&p.current!==R}),w=A.useCallback(()=>{const k=d.current,I=x();if(!k||!I||bF(I))return;const R=I.outerHeightStyle;p.current!==R&&(p.current=R,k.style.height=`${R}px`),k.style.overflow=I.overflowing?"hidden":""},[x]),C=A.useRef(-1);ts(()=>{const k=dU(w),I=d==null?void 0:d.current;if(!I)return;const R=dc(I);R.addEventListener("resize",k);let $;return typeof ResizeObserver<"u"&&($=new ResizeObserver(()=>{b()&&($.unobserve(I),cancelAnimationFrame(C.current),w(),C.current=requestAnimationFrame(()=>{$.observe(I)}))}),$.observe(I)),()=>{k.clear(),cancelAnimationFrame(C.current),R.removeEventListener("resize",k),$&&$.disconnect()}},[x,w,b]),ts(()=>{w()});const N=k=>{c||w();const I=k.target,R=I.value.length,$=I.value.endsWith(`
`),O=I.selectionStart===R;$&&O&&I.setSelectionRange(R,R),r&&r(k)};return S.jsxs(A.Fragment,{children:[S.jsx("textarea",{value:a,onChange:N,ref:f,rows:o,style:i,...l}),S.jsx("textarea",{"aria-hidden":!0,className:e.className,readOnly:!0,ref:g,tabIndex:-1,style:{...z5e.shadow,...i,paddingTop:0,paddingBottom:0}})]})});function p0(t){return typeof t=="string"}function Xp({props:t,states:e,muiFormControl:n}){return e.reduce((r,s)=>(r[s]=t[s],n&&typeof t[s]>"u"&&(r[s]=n[s]),r),{})}const RC=A.createContext(void 0);function wc(){return A.useContext(RC)}function wF(t){return t!=null&&!(Array.isArray(t)&&t.length===0)}function mw(t,e=!1){return t&&(wF(t.value)&&t.value!==""||e&&wF(t.defaultValue)&&t.defaultValue!=="")}function U5e(t){return t.startAdornment}function H5e(t){return Nt("MuiInputBase",t)}const pp=gt("MuiInputBase",["root","formControl","focused","disabled","adornedStart","adornedEnd","error","sizeSmall","multiline","colorSecondary","fullWidth","hiddenLabel","readOnly","input","inputSizeSmall","inputMultiline","inputTypeSearch","inputAdornedStart","inputAdornedEnd","inputHiddenLabel"]);var vF;const DC=(t,e)=>{const{ownerState:n}=t;return[e.root,n.formControl&&e.formControl,n.startAdornment&&e.adornedStart,n.endAdornment&&e.adornedEnd,n.error&&e.error,n.size==="small"&&e.sizeSmall,n.multiline&&e.multiline,n.color&&e[`color${Qe(n.color)}`],n.fullWidth&&e.fullWidth,n.hiddenLabel&&e.hiddenLabel]},$C=(t,e)=>{const{ownerState:n}=t;return[e.input,n.size==="small"&&e.inputSizeSmall,n.multiline&&e.inputMultiline,n.type==="search"&&e.inputTypeSearch,n.startAdornment&&e.inputAdornedStart,n.endAdornment&&e.inputAdornedEnd,n.hiddenLabel&&e.inputHiddenLabel]},G5e=t=>{const{classes:e,color:n,disabled:r,error:s,endAdornment:o,focused:i,formControl:a,fullWidth:l,hiddenLabel:c,multiline:d,readOnly:f,size:p,startAdornment:g,type:x}=t,b={root:["root",`color${Qe(n)}`,r&&"disabled",s&&"error",l&&"fullWidth",i&&"focused",a&&"formControl",p&&p!=="medium"&&`size${Qe(p)}`,d&&"multiline",g&&"adornedStart",o&&"adornedEnd",c&&"hiddenLabel",f&&"readOnly"],input:["input",r&&"disabled",x==="search"&&"inputTypeSearch",d&&"inputMultiline",p==="small"&&"inputSizeSmall",c&&"inputHiddenLabel",g&&"inputAdornedStart",o&&"inputAdornedEnd",f&&"readOnly"]};return vt(b,H5e,e)},OC=De("div",{name:"MuiInputBase",slot:"Root",overridesResolver:DC})(bn(({theme:t})=>({...t.typography.body1,color:(t.vars||t).palette.text.primary,lineHeight:"1.4375em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center",[`&.${pp.disabled}`]:{color:(t.vars||t).palette.text.disabled,cursor:"default"},variants:[{props:({ownerState:e})=>e.multiline,style:{padding:"4px 0 5px"}},{props:({ownerState:e,size:n})=>e.multiline&&n==="small",style:{paddingTop:1}},{props:({ownerState:e})=>e.fullWidth,style:{width:"100%"}}]}))),_C=De("input",{name:"MuiInputBase",slot:"Input",overridesResolver:$C})(bn(({theme:t})=>{const e=t.palette.mode==="light",n={color:"currentColor",...t.vars?{opacity:t.vars.opacity.inputPlaceholder}:{opacity:e?.42:.5},transition:t.transitions.create("opacity",{duration:t.transitions.duration.shorter})},r={opacity:"0 !important"},s=t.vars?{opacity:t.vars.opacity.inputPlaceholder}:{opacity:e?.42:.5};return{font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"4px 0 5px",border:0,boxSizing:"content-box",background:"none",height:"1.4375em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%","&::-webkit-input-placeholder":n,"&::-moz-placeholder":n,"&::-ms-input-placeholder":n,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{WebkitAppearance:"none"},[`label[data-shrink=false] + .${pp.formControl} &`]:{"&::-webkit-input-placeholder":r,"&::-moz-placeholder":r,"&::-ms-input-placeholder":r,"&:focus::-webkit-input-placeholder":s,"&:focus::-moz-placeholder":s,"&:focus::-ms-input-placeholder":s},[`&.${pp.disabled}`]:{opacity:1,WebkitTextFillColor:(t.vars||t).palette.text.disabled},variants:[{props:({ownerState:o})=>!o.disableInjectingGlobalStyles,style:{animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&:-webkit-autofill":{animationDuration:"5000s",animationName:"mui-auto-fill"}}},{props:{size:"small"},style:{paddingTop:1}},{props:({ownerState:o})=>o.multiline,style:{height:"auto",resize:"none",padding:0,paddingTop:0}},{props:{type:"search"},style:{MozAppearance:"textfield"}}]}})),CF=iMe({"@keyframes mui-auto-fill":{from:{display:"block"}},"@keyframes mui-auto-fill-cancel":{from:{display:"block"}}}),UD=A.forwardRef(function(e,n){const r=qt({props:e,name:"MuiInputBase"}),{"aria-describedby":s,autoComplete:o,autoFocus:i,className:a,color:l,components:c={},componentsProps:d={},defaultValue:f,disabled:p,disableInjectingGlobalStyles:g,endAdornment:x,error:b,fullWidth:w=!1,id:C,inputComponent:N="input",inputProps:k={},inputRef:I,margin:R,maxRows:$,minRows:O,multiline:F=!1,name:M,onBlur:_,onChange:V,onClick:B,onFocus:W,onKeyDown:q,onKeyUp:j,placeholder:G,readOnly:Z,renderSuffix:J,rows:X,size:ee,slotProps:ne={},slots:oe={},startAdornment:ye,type:ge="text",value:ve,...he}=r,Me=k.value!=null?k.value:ve,{current:ze}=A.useRef(Me!=null),Oe=A.useRef(),Ie=A.useCallback(Ct=>{},[]),me=wn(Oe,I,k.ref,Ie),[ke,pe]=A.useState(!1),Pe=wc(),Ve=Xp({props:r,muiFormControl:Pe,states:["color","disabled","error","hiddenLabel","size","required","filled"]});Ve.focused=Pe?Pe.focused:ke,A.useEffect(()=>{!Pe&&p&&ke&&(pe(!1),_&&_())},[Pe,p,ke,_]);const Fe=Pe&&Pe.onFilled,Be=Pe&&Pe.onEmpty,be=A.useCallback(Ct=>{mw(Ct)?Fe&&Fe():Be&&Be()},[Fe,Be]);ts(()=>{ze&&be({value:Me})},[Me,be,ze]);const je=Ct=>{W&&W(Ct),k.onFocus&&k.onFocus(Ct),Pe&&Pe.onFocus?Pe.onFocus(Ct):pe(!0)},Se=Ct=>{_&&_(Ct),k.onBlur&&k.onBlur(Ct),Pe&&Pe.onBlur?Pe.onBlur(Ct):pe(!1)},ue=(Ct,...cn)=>{if(!ze){const Bt=Ct.target||Oe.current;if(Bt==null)throw new Error(cc(1));be({value:Bt.value})}k.onChange&&k.onChange(Ct,...cn),V&&V(Ct,...cn)};A.useEffect(()=>{be(Oe.current)},[]);const He=Ct=>{Oe.current&&Ct.currentTarget===Ct.target&&Oe.current.focus(),B&&B(Ct)};let It=N,ot=k;F&&It==="input"&&(X?ot={type:void 0,minRows:X,maxRows:X,...ot}:ot={type:void 0,maxRows:$,minRows:O,...ot},It=W5e);const Vt=Ct=>{be(Ct.animationName==="mui-auto-fill-cancel"?Oe.current:{value:"x"})};A.useEffect(()=>{Pe&&Pe.setAdornedStart(!!ye)},[Pe,ye]);const Xt={...r,color:Ve.color||"primary",disabled:Ve.disabled,endAdornment:x,error:Ve.error,focused:Ve.focused,formControl:Pe,fullWidth:w,hiddenLabel:Ve.hiddenLabel,multiline:F,size:Ve.size,startAdornment:ye,type:ge},Ln=G5e(Xt),hn=oe.root||c.Root||OC,ft=ne.root||d.root||{},Ot=oe.input||c.Input||_C;return ot={...ot,...ne.input??d.input},S.jsxs(A.Fragment,{children:[!g&&typeof CF=="function"&&(vF||(vF=S.jsx(CF,{}))),S.jsxs(hn,{...ft,ref:n,onClick:He,...he,...!p0(hn)&&{ownerState:{...Xt,...ft.ownerState}},className:st(Ln.root,ft.className,a,Z&&"MuiInputBase-readOnly"),children:[ye,S.jsx(RC.Provider,{value:null,children:S.jsx(Ot,{"aria-invalid":Ve.error,"aria-describedby":s,autoComplete:o,autoFocus:i,defaultValue:f,disabled:Ve.disabled,id:C,onAnimationStart:Vt,name:M,placeholder:G,readOnly:Z,required:Ve.required,rows:X,value:Me,onKeyDown:q,onKeyUp:j,type:ge,...ot,...!p0(Ot)&&{as:It,ownerState:{...Xt,...ot.ownerState}},ref:me,className:st(Ln.input,ot.className,Z&&"MuiInputBase-readOnly"),onBlur:Se,onChange:ue,onFocus:je})}),x,J?J({...Ve,startAdornment:ye}):null]})]})});function q5e(t){return Nt("MuiInput",t)}const Tm={...pp,...gt("MuiInput",["root","underline","input"])};function X5e(t){return Nt("MuiOutlinedInput",t)}const Ja={...pp,...gt("MuiOutlinedInput",["root","notchedOutline","input"])};function K5e(t){return Nt("MuiFilledInput",t)}const Zu={...pp,...gt("MuiFilledInput",["root","underline","input","adornedStart","adornedEnd","sizeSmall","multiline","hiddenLabel"])},Y5e=So(S.jsx("path",{d:"M7 10l5 5 5-5z"})),Z5e={entering:{opacity:1},entered:{opacity:1}},tf=A.forwardRef(function(e,n){const r=Sf(),s={enter:r.transitions.duration.enteringScreen,exit:r.transitions.duration.leavingScreen},{addEndListener:o,appear:i=!0,children:a,easing:l,in:c,onEnter:d,onEntered:f,onEntering:p,onExit:g,onExited:x,onExiting:b,style:w,timeout:C=s,TransitionComponent:N=Ua,...k}=e,I=A.useRef(null),R=wn(I,ox(a),n),$=q=>j=>{if(q){const G=I.current;j===void 0?q(G):q(G,j)}},O=$(p),F=$((q,j)=>{pU(q);const G=fw({style:w,timeout:C,easing:l},{mode:"enter"});q.style.webkitTransition=r.transitions.create("opacity",G),q.style.transition=r.transitions.create("opacity",G),d&&d(q,j)}),M=$(f),_=$(b),V=$(q=>{const j=fw({style:w,timeout:C,easing:l},{mode:"exit"});q.style.webkitTransition=r.transitions.create("opacity",j),q.style.transition=r.transitions.create("opacity",j),g&&g(q)}),B=$(x),W=q=>{o&&o(I.current,q)};return S.jsx(N,{appear:i,in:c,nodeRef:I,onEnter:F,onEntered:M,onEntering:O,onExit:V,onExited:B,onExiting:_,addEndListener:W,timeout:C,...k,children:(q,{ownerState:j,...G})=>A.cloneElement(a,{style:{opacity:0,visibility:q==="exited"&&!c?"hidden":void 0,...Z5e[q],...w,...a.props.style},ref:R,...G})})});function Q5e(t){return Nt("MuiBackdrop",t)}gt("MuiBackdrop",["root","invisible"]);const J5e=t=>{const{classes:e,invisible:n}=t;return vt({root:["root",n&&"invisible"]},Q5e,e)},e6e=De("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.invisible&&e.invisible]}})({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent",variants:[{props:{invisible:!0},style:{backgroundColor:"transparent"}}]}),RU=A.forwardRef(function(e,n){const r=qt({props:e,name:"MuiBackdrop"}),{children:s,className:o,component:i="div",invisible:a=!1,open:l,components:c={},componentsProps:d={},slotProps:f={},slots:p={},TransitionComponent:g,transitionDuration:x,...b}=r,w={...r,component:i,invisible:a},C=J5e(w),N={transition:g,root:c.Root,...p},k={...d,...f},I={slots:N,slotProps:k},[R,$]=Hn("root",{elementType:e6e,externalForwardedProps:I,className:st(C.root,o),ownerState:w}),[O,F]=Hn("transition",{elementType:tf,externalForwardedProps:I,ownerState:w});return S.jsx(O,{in:l,timeout:x,...b,...F,children:S.jsx(R,{"aria-hidden":!0,...$,classes:C,ref:n,children:s})})}),t6e=gt("MuiBox",["root"]),n6e=cU(),Sd=BPe({themeId:Hp,defaultTheme:n6e,defaultClassName:t6e.root,generateClassName:XW.generate});function r6e(t){return Nt("MuiButton",t)}const Qu=gt("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","colorPrimary","colorSecondary","colorSuccess","colorError","colorInfo","colorWarning","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","icon","iconSizeSmall","iconSizeMedium","iconSizeLarge","loading","loadingWrapper","loadingIconPlaceholder","loadingIndicator","loadingPositionCenter","loadingPositionStart","loadingPositionEnd"]),s6e=A.createContext({}),o6e=A.createContext(void 0),i6e=t=>{const{color:e,disableElevation:n,fullWidth:r,size:s,variant:o,loading:i,loadingPosition:a,classes:l}=t,c={root:["root",i&&"loading",o,`${o}${Qe(e)}`,`size${Qe(s)}`,`${o}Size${Qe(s)}`,`color${Qe(e)}`,n&&"disableElevation",r&&"fullWidth",i&&`loadingPosition${Qe(a)}`],startIcon:["icon","startIcon",`iconSize${Qe(s)}`],endIcon:["icon","endIcon",`iconSize${Qe(s)}`],loadingIndicator:["loadingIndicator"],loadingWrapper:["loadingWrapper"]},d=vt(c,r6e,l);return{...l,...d}},DU=[{props:{size:"small"},style:{"& > *:nth-of-type(1)":{fontSize:18}}},{props:{size:"medium"},style:{"& > *:nth-of-type(1)":{fontSize:20}}},{props:{size:"large"},style:{"& > *:nth-of-type(1)":{fontSize:22}}}],a6e=De(cp,{shouldForwardProp:t=>da(t)||t==="classes",name:"MuiButton",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[n.variant],e[`${n.variant}${Qe(n.color)}`],e[`size${Qe(n.size)}`],e[`${n.variant}Size${Qe(n.size)}`],n.color==="inherit"&&e.colorInherit,n.disableElevation&&e.disableElevation,n.fullWidth&&e.fullWidth,n.loading&&e.loading]}})(bn(({theme:t})=>{const e=t.palette.mode==="light"?t.palette.grey[300]:t.palette.grey[800],n=t.palette.mode==="light"?t.palette.grey.A100:t.palette.grey[700];return{...t.typography.button,minWidth:64,padding:"6px 16px",border:0,borderRadius:(t.vars||t).shape.borderRadius,transition:t.transitions.create(["background-color","box-shadow","border-color","color"],{duration:t.transitions.duration.short}),"&:hover":{textDecoration:"none"},[`&.${Qu.disabled}`]:{color:(t.vars||t).palette.action.disabled},variants:[{props:{variant:"contained"},style:{color:"var(--variant-containedColor)",backgroundColor:"var(--variant-containedBg)",boxShadow:(t.vars||t).shadows[2],"&:hover":{boxShadow:(t.vars||t).shadows[4],"@media (hover: none)":{boxShadow:(t.vars||t).shadows[2]}},"&:active":{boxShadow:(t.vars||t).shadows[8]},[`&.${Qu.focusVisible}`]:{boxShadow:(t.vars||t).shadows[6]},[`&.${Qu.disabled}`]:{color:(t.vars||t).palette.action.disabled,boxShadow:(t.vars||t).shadows[0],backgroundColor:(t.vars||t).palette.action.disabledBackground}}},{props:{variant:"outlined"},style:{padding:"5px 15px",border:"1px solid currentColor",borderColor:"var(--variant-outlinedBorder, currentColor)",backgroundColor:"var(--variant-outlinedBg)",color:"var(--variant-outlinedColor)",[`&.${Qu.disabled}`]:{border:`1px solid ${(t.vars||t).palette.action.disabledBackground}`}}},{props:{variant:"text"},style:{padding:"6px 8px",color:"var(--variant-textColor)",backgroundColor:"var(--variant-textBg)"}},...Object.entries(t.palette).filter(so()).map(([r])=>({props:{color:r},style:{"--variant-textColor":(t.vars||t).palette[r].main,"--variant-outlinedColor":(t.vars||t).palette[r].main,"--variant-outlinedBorder":t.vars?`rgba(${t.vars.palette[r].mainChannel} / 0.5)`:pn(t.palette[r].main,.5),"--variant-containedColor":(t.vars||t).palette[r].contrastText,"--variant-containedBg":(t.vars||t).palette[r].main,"@media (hover: hover)":{"&:hover":{"--variant-containedBg":(t.vars||t).palette[r].dark,"--variant-textBg":t.vars?`rgba(${t.vars.palette[r].mainChannel} / ${t.vars.palette.action.hoverOpacity})`:pn(t.palette[r].main,t.palette.action.hoverOpacity),"--variant-outlinedBorder":(t.vars||t).palette[r].main,"--variant-outlinedBg":t.vars?`rgba(${t.vars.palette[r].mainChannel} / ${t.vars.palette.action.hoverOpacity})`:pn(t.palette[r].main,t.palette.action.hoverOpacity)}}}})),{props:{color:"inherit"},style:{color:"inherit",borderColor:"currentColor","--variant-containedBg":t.vars?t.vars.palette.Button.inheritContainedBg:e,"@media (hover: hover)":{"&:hover":{"--variant-containedBg":t.vars?t.vars.palette.Button.inheritContainedHoverBg:n,"--variant-textBg":t.vars?`rgba(${t.vars.palette.text.primaryChannel} / ${t.vars.palette.action.hoverOpacity})`:pn(t.palette.text.primary,t.palette.action.hoverOpacity),"--variant-outlinedBg":t.vars?`rgba(${t.vars.palette.text.primaryChannel} / ${t.vars.palette.action.hoverOpacity})`:pn(t.palette.text.primary,t.palette.action.hoverOpacity)}}}},{props:{size:"small",variant:"text"},style:{padding:"4px 5px",fontSize:t.typography.pxToRem(13)}},{props:{size:"large",variant:"text"},style:{padding:"8px 11px",fontSize:t.typography.pxToRem(15)}},{props:{size:"small",variant:"outlined"},style:{padding:"3px 9px",fontSize:t.typography.pxToRem(13)}},{props:{size:"large",variant:"outlined"},style:{padding:"7px 21px",fontSize:t.typography.pxToRem(15)}},{props:{size:"small",variant:"contained"},style:{padding:"4px 10px",fontSize:t.typography.pxToRem(13)}},{props:{size:"large",variant:"contained"},style:{padding:"8px 22px",fontSize:t.typography.pxToRem(15)}},{props:{disableElevation:!0},style:{boxShadow:"none","&:hover":{boxShadow:"none"},[`&.${Qu.focusVisible}`]:{boxShadow:"none"},"&:active":{boxShadow:"none"},[`&.${Qu.disabled}`]:{boxShadow:"none"}}},{props:{fullWidth:!0},style:{width:"100%"}},{props:{loadingPosition:"center"},style:{transition:t.transitions.create(["background-color","box-shadow","border-color"],{duration:t.transitions.duration.short}),[`&.${Qu.loading}`]:{color:"transparent"}}}]}})),l6e=De("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.startIcon,n.loading&&e.startIconLoadingStart,e[`iconSize${Qe(n.size)}`]]}})(({theme:t})=>({display:"inherit",marginRight:8,marginLeft:-4,variants:[{props:{size:"small"},style:{marginLeft:-2}},{props:{loadingPosition:"start",loading:!0},style:{transition:t.transitions.create(["opacity"],{duration:t.transitions.duration.short}),opacity:0}},{props:{loadingPosition:"start",loading:!0,fullWidth:!0},style:{marginRight:-8}},...DU]})),c6e=De("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.endIcon,n.loading&&e.endIconLoadingEnd,e[`iconSize${Qe(n.size)}`]]}})(({theme:t})=>({display:"inherit",marginRight:-4,marginLeft:8,variants:[{props:{size:"small"},style:{marginRight:-2}},{props:{loadingPosition:"end",loading:!0},style:{transition:t.transitions.create(["opacity"],{duration:t.transitions.duration.short}),opacity:0}},{props:{loadingPosition:"end",loading:!0,fullWidth:!0},style:{marginLeft:-8}},...DU]})),u6e=De("span",{name:"MuiButton",slot:"LoadingIndicator"})(({theme:t})=>({display:"none",position:"absolute",visibility:"visible",variants:[{props:{loading:!0},style:{display:"flex"}},{props:{loadingPosition:"start"},style:{left:14}},{props:{loadingPosition:"start",size:"small"},style:{left:10}},{props:{variant:"text",loadingPosition:"start"},style:{left:6}},{props:{loadingPosition:"center"},style:{left:"50%",transform:"translate(-50%)",color:(t.vars||t).palette.action.disabled}},{props:{loadingPosition:"end"},style:{right:14}},{props:{loadingPosition:"end",size:"small"},style:{right:10}},{props:{variant:"text",loadingPosition:"end"},style:{right:6}},{props:{loadingPosition:"start",fullWidth:!0},style:{position:"relative",left:-10}},{props:{loadingPosition:"end",fullWidth:!0},style:{position:"relative",right:-10}}]})),SF=De("span",{name:"MuiButton",slot:"LoadingIconPlaceholder"})({display:"inline-block",width:"1em",height:"1em"}),Dc=A.forwardRef(function(e,n){const r=A.useContext(s6e),s=A.useContext(o6e),o=u0(r,e),i=qt({props:o,name:"MuiButton"}),{children:a,color:l="primary",component:c="button",className:d,disabled:f=!1,disableElevation:p=!1,disableFocusRipple:g=!1,endIcon:x,focusVisibleClassName:b,fullWidth:w=!1,id:C,loading:N=null,loadingIndicator:k,loadingPosition:I="center",size:R="medium",startIcon:$,type:O,variant:F="text",...M}=i,_=bc(C),V=k??S.jsx(FD,{"aria-labelledby":_,color:"inherit",size:16}),B={...i,color:l,component:c,disabled:f,disableElevation:p,disableFocusRipple:g,fullWidth:w,loading:N,loadingIndicator:V,loadingPosition:I,size:R,type:O,variant:F},W=i6e(B),q=($||N&&I==="start")&&S.jsx(l6e,{className:W.startIcon,ownerState:B,children:$||S.jsx(SF,{className:W.loadingIconPlaceholder,ownerState:B})}),j=(x||N&&I==="end")&&S.jsx(c6e,{className:W.endIcon,ownerState:B,children:x||S.jsx(SF,{className:W.loadingIconPlaceholder,ownerState:B})}),G=s||"",Z=typeof N=="boolean"?S.jsx("span",{className:W.loadingWrapper,style:{display:"contents"},children:N&&S.jsx(u6e,{className:W.loadingIndicator,ownerState:B,children:V})}):null;return S.jsxs(a6e,{ownerState:B,className:st(r.className,W.root,d,G),component:c,disabled:f||N,focusRipple:!g,focusVisibleClassName:st(W.focusVisible,b),ref:n,type:O,id:N?_:C,...M,classes:W,children:[q,I!=="end"&&Z,a,I==="end"&&Z,j]})});function d6e(t){return Nt("MuiCard",t)}gt("MuiCard",["root"]);const f6e=t=>{const{classes:e}=t;return vt({root:["root"]},d6e,e)},h6e=De(ju,{name:"MuiCard",slot:"Root"})({overflow:"hidden"}),p6e=A.forwardRef(function(e,n){const r=qt({props:e,name:"MuiCard"}),{className:s,raised:o=!1,...i}=r,a={...r,raised:o},l=f6e(a);return S.jsx(h6e,{className:st(l.root,s),elevation:o?8:void 0,ref:n,ownerState:a,...i})});function m6e(t){return Nt("MuiCardContent",t)}gt("MuiCardContent",["root"]);const g6e=t=>{const{classes:e}=t;return vt({root:["root"]},m6e,e)},x6e=De("div",{name:"MuiCardContent",slot:"Root"})({padding:16,"&:last-child":{paddingBottom:24}}),y6e=A.forwardRef(function(e,n){const r=qt({props:e,name:"MuiCardContent"}),{className:s,component:o="div",...i}=r,a={...r,component:o},l=g6e(a);return S.jsx(x6e,{as:o,className:st(l.root,s),ownerState:a,ref:n,...i})});function $U(t=window){const e=t.document.documentElement.clientWidth;return t.innerWidth-e}function b6e(t){const e=io(t);return e.body===t?dc(t).innerWidth>e.documentElement.clientWidth:t.scrollHeight>t.clientHeight}function wg(t,e){e?t.setAttribute("aria-hidden","true"):t.removeAttribute("aria-hidden")}function NF(t){return parseInt(dc(t).getComputedStyle(t).paddingRight,10)||0}function w6e(t){const n=["TEMPLATE","SCRIPT","STYLE","LINK","MAP","META","NOSCRIPT","PICTURE","COL","COLGROUP","PARAM","SLOT","SOURCE","TRACK"].includes(t.tagName),r=t.tagName==="INPUT"&&t.getAttribute("type")==="hidden";return n||r}function EF(t,e,n,r,s){const o=[e,n,...r];[].forEach.call(t.children,i=>{const a=!o.includes(i),l=!w6e(i);a&&l&&wg(i,s)})}function bN(t,e){let n=-1;return t.some((r,s)=>e(r)?(n=s,!0):!1),n}function v6e(t,e){const n=[],r=t.container;if(!e.disableScrollLock){if(b6e(r)){const i=$U(dc(r));n.push({value:r.style.paddingRight,property:"padding-right",el:r}),r.style.paddingRight=`${NF(r)+i}px`;const a=io(r).querySelectorAll(".mui-fixed");[].forEach.call(a,l=>{n.push({value:l.style.paddingRight,property:"padding-right",el:l}),l.style.paddingRight=`${NF(l)+i}px`})}let o;if(r.parentNode instanceof DocumentFragment)o=io(r).body;else{const i=r.parentElement,a=dc(r);o=(i==null?void 0:i.nodeName)==="HTML"&&a.getComputedStyle(i).overflowY==="scroll"?i:r}n.push({value:o.style.overflow,property:"overflow",el:o},{value:o.style.overflowX,property:"overflow-x",el:o},{value:o.style.overflowY,property:"overflow-y",el:o}),o.style.overflow="hidden"}return()=>{n.forEach(({value:o,el:i,property:a})=>{o?i.style.setProperty(a,o):i.style.removeProperty(a)})}}function C6e(t){const e=[];return[].forEach.call(t.children,n=>{n.getAttribute("aria-hidden")==="true"&&e.push(n)}),e}class S6e{constructor(){this.modals=[],this.containers=[]}add(e,n){let r=this.modals.indexOf(e);if(r!==-1)return r;r=this.modals.length,this.modals.push(e),e.modalRef&&wg(e.modalRef,!1);const s=C6e(n);EF(n,e.mount,e.modalRef,s,!0);const o=bN(this.containers,i=>i.container===n);return o!==-1?(this.containers[o].modals.push(e),r):(this.containers.push({modals:[e],container:n,restore:null,hiddenSiblings:s}),r)}mount(e,n){const r=bN(this.containers,o=>o.modals.includes(e)),s=this.containers[r];s.restore||(s.restore=v6e(s,n))}remove(e,n=!0){const r=this.modals.indexOf(e);if(r===-1)return r;const s=bN(this.containers,i=>i.modals.includes(e)),o=this.containers[s];if(o.modals.splice(o.modals.indexOf(e),1),this.modals.splice(r,1),o.modals.length===0)o.restore&&o.restore(),e.modalRef&&wg(e.modalRef,n),EF(o.container,e.mount,e.modalRef,o.hiddenSiblings,!1),this.containers.splice(s,1);else{const i=o.modals[o.modals.length-1];i.modalRef&&wg(i.modalRef,!1)}return r}isTopModal(e){return this.modals.length>0&&this.modals[this.modals.length-1]===e}}const N6e=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function E6e(t){const e=parseInt(t.getAttribute("tabindex")||"",10);return Number.isNaN(e)?t.contentEditable==="true"||(t.nodeName==="AUDIO"||t.nodeName==="VIDEO"||t.nodeName==="DETAILS")&&t.getAttribute("tabindex")===null?0:t.tabIndex:e}function I6e(t){if(t.tagName!=="INPUT"||t.type!=="radio"||!t.name)return!1;const e=r=>t.ownerDocument.querySelector(`input[type="radio"]${r}`);let n=e(`[name="${t.name}"]:checked`);return n||(n=e(`[name="${t.name}"]`)),n!==t}function k6e(t){return!(t.disabled||t.tagName==="INPUT"&&t.type==="hidden"||I6e(t))}function T6e(t){const e=[],n=[];return Array.from(t.querySelectorAll(N6e)).forEach((r,s)=>{const o=E6e(r);o===-1||!k6e(r)||(o===0?e.push(r):n.push({documentOrder:s,tabIndex:o,node:r}))}),n.sort((r,s)=>r.tabIndex===s.tabIndex?r.documentOrder-s.documentOrder:r.tabIndex-s.tabIndex).map(r=>r.node).concat(e)}function A6e(){return!0}function OU(t){const{children:e,disableAutoFocus:n=!1,disableEnforceFocus:r=!1,disableRestoreFocus:s=!1,getTabbable:o=T6e,isEnabled:i=A6e,open:a}=t,l=A.useRef(!1),c=A.useRef(null),d=A.useRef(null),f=A.useRef(null),p=A.useRef(null),g=A.useRef(!1),x=A.useRef(null),b=wn(ox(e),x),w=A.useRef(null);A.useEffect(()=>{!a||!x.current||(g.current=!n)},[n,a]),A.useEffect(()=>{if(!a||!x.current)return;const k=io(x.current);return x.current.contains(k.activeElement)||(x.current.hasAttribute("tabIndex")||x.current.setAttribute("tabIndex","-1"),g.current&&x.current.focus()),()=>{s||(f.current&&f.current.focus&&(l.current=!0,f.current.focus()),f.current=null)}},[a]),A.useEffect(()=>{if(!a||!x.current)return;const k=io(x.current),I=O=>{w.current=O,!(r||!i()||O.key!=="Tab")&&k.activeElement===x.current&&O.shiftKey&&(l.current=!0,d.current&&d.current.focus())},R=()=>{var M,_;const O=x.current;if(O===null)return;if(!k.hasFocus()||!i()||l.current){l.current=!1;return}if(O.contains(k.activeElement)||r&&k.activeElement!==c.current&&k.activeElement!==d.current)return;if(k.activeElement!==p.current)p.current=null;else if(p.current!==null)return;if(!g.current)return;let F=[];if((k.activeElement===c.current||k.activeElement===d.current)&&(F=o(x.current)),F.length>0){const V=!!((M=w.current)!=null&&M.shiftKey&&((_=w.current)==null?void 0:_.key)==="Tab"),B=F[0],W=F[F.length-1];typeof B!="string"&&typeof W!="string"&&(V?W.focus():B.focus())}else O.focus()};k.addEventListener("focusin",R),k.addEventListener("keydown",I,!0);const $=setInterval(()=>{k.activeElement&&k.activeElement.tagName==="BODY"&&R()},50);return()=>{clearInterval($),k.removeEventListener("focusin",R),k.removeEventListener("keydown",I,!0)}},[n,r,s,i,a,o]);const C=k=>{f.current===null&&(f.current=k.relatedTarget),g.current=!0,p.current=k.target;const I=e.props.onFocus;I&&I(k)},N=k=>{f.current===null&&(f.current=k.relatedTarget),g.current=!0};return S.jsxs(A.Fragment,{children:[S.jsx("div",{tabIndex:a?0:-1,onFocus:N,ref:c,"data-testid":"sentinelStart"}),A.cloneElement(e,{ref:b,onFocus:C}),S.jsx("div",{tabIndex:a?0:-1,onFocus:N,ref:d,"data-testid":"sentinelEnd"})]})}function R6e(t){return typeof t=="function"?t():t}function D6e(t){return t?t.props.hasOwnProperty("in"):!1}const IF=()=>{},cy=new S6e;function $6e(t){const{container:e,disableEscapeKeyDown:n=!1,disableScrollLock:r=!1,closeAfterTransition:s=!1,onTransitionEnter:o,onTransitionExited:i,children:a,onClose:l,open:c,rootRef:d}=t,f=A.useRef({}),p=A.useRef(null),g=A.useRef(null),x=wn(g,d),[b,w]=A.useState(!c),C=D6e(a);let N=!0;(t["aria-hidden"]==="false"||t["aria-hidden"]===!1)&&(N=!1);const k=()=>io(p.current),I=()=>(f.current.modalRef=g.current,f.current.mount=p.current,f.current),R=()=>{cy.mount(I(),{disableScrollLock:r}),g.current&&(g.current.scrollTop=0)},$=at(()=>{const j=R6e(e)||k().body;cy.add(I(),j),g.current&&R()}),O=()=>cy.isTopModal(I()),F=at(j=>{p.current=j,j&&(c&&O()?R():g.current&&wg(g.current,N))}),M=A.useCallback(()=>{cy.remove(I(),N)},[N]);A.useEffect(()=>()=>{M()},[M]),A.useEffect(()=>{c?$():(!C||!s)&&M()},[c,M,C,s,$]);const _=j=>G=>{var Z;(Z=j.onKeyDown)==null||Z.call(j,G),!(G.key!=="Escape"||G.which===229||!O())&&(n||(G.stopPropagation(),l&&l(G,"escapeKeyDown")))},V=j=>G=>{var Z;(Z=j.onClick)==null||Z.call(j,G),G.target===G.currentTarget&&l&&l(G,"backdropClick")};return{getRootProps:(j={})=>{const G=gU(t);delete G.onTransitionEnter,delete G.onTransitionExited;const Z={...G,...j};return{role:"presentation",...Z,onKeyDown:_(Z),ref:x}},getBackdropProps:(j={})=>{const G=j;return{"aria-hidden":!0,...G,onClick:V(G),open:c}},getTransitionProps:()=>{const j=()=>{w(!1),o&&o()},G=()=>{w(!0),i&&i(),s&&M()};return{onEnter:YP(j,(a==null?void 0:a.props.onEnter)??IF),onExited:YP(G,(a==null?void 0:a.props.onExited)??IF)}},rootRef:x,portalRef:F,isTopModal:O,exited:b,hasTransition:C}}function O6e(t){return Nt("MuiModal",t)}gt("MuiModal",["root","hidden","backdrop"]);const _6e=t=>{const{open:e,exited:n,classes:r}=t;return vt({root:["root",!e&&n&&"hidden"],backdrop:["backdrop"]},O6e,r)},P6e=De("div",{name:"MuiModal",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,!n.open&&n.exited&&e.hidden]}})(bn(({theme:t})=>({position:"fixed",zIndex:(t.vars||t).zIndex.modal,right:0,bottom:0,top:0,left:0,variants:[{props:({ownerState:e})=>!e.open&&e.exited,style:{visibility:"hidden"}}]}))),F6e=De(RU,{name:"MuiModal",slot:"Backdrop"})({zIndex:-1}),_U=A.forwardRef(function(e,n){const r=qt({name:"MuiModal",props:e}),{BackdropComponent:s=F6e,BackdropProps:o,classes:i,className:a,closeAfterTransition:l=!1,children:c,container:d,component:f,components:p={},componentsProps:g={},disableAutoFocus:x=!1,disableEnforceFocus:b=!1,disableEscapeKeyDown:w=!1,disablePortal:C=!1,disableRestoreFocus:N=!1,disableScrollLock:k=!1,hideBackdrop:I=!1,keepMounted:R=!1,onClose:$,onTransitionEnter:O,onTransitionExited:F,open:M,slotProps:_={},slots:V={},theme:B,...W}=r,q={...r,closeAfterTransition:l,disableAutoFocus:x,disableEnforceFocus:b,disableEscapeKeyDown:w,disablePortal:C,disableRestoreFocus:N,disableScrollLock:k,hideBackdrop:I,keepMounted:R},{getRootProps:j,getBackdropProps:G,getTransitionProps:Z,portalRef:J,isTopModal:X,exited:ee,hasTransition:ne}=$6e({...q,rootRef:n}),oe={...q,exited:ee},ye=_6e(oe),ge={};if(c.props.tabIndex===void 0&&(ge.tabIndex="-1"),ne){const{onEnter:Ie,onExited:me}=Z();ge.onEnter=Ie,ge.onExited=me}const ve={slots:{root:p.Root,backdrop:p.Backdrop,...V},slotProps:{...g,..._}},[he,Me]=Hn("root",{ref:n,elementType:P6e,externalForwardedProps:{...ve,...W,component:f},getSlotProps:j,ownerState:oe,className:st(a,ye==null?void 0:ye.root,!oe.open&&oe.exited&&(ye==null?void 0:ye.hidden))}),[ze,Oe]=Hn("backdrop",{ref:o==null?void 0:o.ref,elementType:s,externalForwardedProps:ve,shouldForwardComponentProp:!0,additionalProps:o,getSlotProps:Ie=>G({...Ie,onClick:me=>{Ie!=null&&Ie.onClick&&Ie.onClick(me)}}),className:st(o==null?void 0:o.className,ye==null?void 0:ye.backdrop),ownerState:oe});return!R&&!M&&(!ne||ee)?null:S.jsx(TU,{ref:J,container:d,disablePortal:C,children:S.jsxs(he,{...Me,children:[!I&&s?S.jsx(ze,{...Oe}):null,S.jsx(OU,{disableEnforceFocus:b,disableAutoFocus:x,disableRestoreFocus:N,isEnabled:X,open:M,children:A.cloneElement(c,ge)})]})})});function M6e(t){return Nt("MuiDialog",t)}const vg=gt("MuiDialog",["root","scrollPaper","scrollBody","container","paper","paperScrollPaper","paperScrollBody","paperWidthFalse","paperWidthXs","paperWidthSm","paperWidthMd","paperWidthLg","paperWidthXl","paperFullWidth","paperFullScreen"]),L6e=A.createContext({}),B6e=De(RU,{name:"MuiDialog",slot:"Backdrop",overrides:(t,e)=>e.backdrop})({zIndex:-1}),j6e=t=>{const{classes:e,scroll:n,maxWidth:r,fullWidth:s,fullScreen:o}=t,i={root:["root"],container:["container",`scroll${Qe(n)}`],paper:["paper",`paperScroll${Qe(n)}`,`paperWidth${Qe(String(r))}`,s&&"paperFullWidth",o&&"paperFullScreen"]};return vt(i,M6e,e)},z6e=De(_U,{name:"MuiDialog",slot:"Root"})({"@media print":{position:"absolute !important"}}),V6e=De("div",{name:"MuiDialog",slot:"Container",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.container,e[`scroll${Qe(n.scroll)}`]]}})({height:"100%","@media print":{height:"auto"},outline:0,variants:[{props:{scroll:"paper"},style:{display:"flex",justifyContent:"center",alignItems:"center"}},{props:{scroll:"body"},style:{overflowY:"auto",overflowX:"hidden",textAlign:"center","&::after":{content:'""',display:"inline-block",verticalAlign:"middle",height:"100%",width:"0"}}}]}),W6e=De(ju,{name:"MuiDialog",slot:"Paper",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.paper,e[`scrollPaper${Qe(n.scroll)}`],e[`paperWidth${Qe(String(n.maxWidth))}`],n.fullWidth&&e.paperFullWidth,n.fullScreen&&e.paperFullScreen]}})(bn(({theme:t})=>({margin:32,position:"relative",overflowY:"auto","@media print":{overflowY:"visible",boxShadow:"none"},variants:[{props:{scroll:"paper"},style:{display:"flex",flexDirection:"column",maxHeight:"calc(100% - 64px)"}},{props:{scroll:"body"},style:{display:"inline-block",verticalAlign:"middle",textAlign:"initial"}},{props:({ownerState:e})=>!e.maxWidth,style:{maxWidth:"calc(100% - 64px)"}},{props:{maxWidth:"xs"},style:{maxWidth:t.breakpoints.unit==="px"?Math.max(t.breakpoints.values.xs,444):`max(${t.breakpoints.values.xs}${t.breakpoints.unit}, 444px)`,[`&.${vg.paperScrollBody}`]:{[t.breakpoints.down(Math.max(t.breakpoints.values.xs,444)+32*2)]:{maxWidth:"calc(100% - 64px)"}}}},...Object.keys(t.breakpoints.values).filter(e=>e!=="xs").map(e=>({props:{maxWidth:e},style:{maxWidth:`${t.breakpoints.values[e]}${t.breakpoints.unit}`,[`&.${vg.paperScrollBody}`]:{[t.breakpoints.down(t.breakpoints.values[e]+32*2)]:{maxWidth:"calc(100% - 64px)"}}}})),{props:({ownerState:e})=>e.fullWidth,style:{width:"calc(100% - 64px)"}},{props:({ownerState:e})=>e.fullScreen,style:{margin:0,width:"100%",maxWidth:"100%",height:"100%",maxHeight:"none",borderRadius:0,[`&.${vg.paperScrollBody}`]:{margin:0,maxWidth:"100%"}}}]}))),U6e=A.forwardRef(function(e,n){const r=qt({props:e,name:"MuiDialog"}),s=Sf(),o={enter:s.transitions.duration.enteringScreen,exit:s.transitions.duration.leavingScreen},{"aria-describedby":i,"aria-labelledby":a,"aria-modal":l=!0,BackdropComponent:c,BackdropProps:d,children:f,className:p,disableEscapeKeyDown:g=!1,fullScreen:x=!1,fullWidth:b=!1,maxWidth:w="sm",onClick:C,onClose:N,open:k,PaperComponent:I=ju,PaperProps:R={},scroll:$="paper",slots:O={},slotProps:F={},TransitionComponent:M=tf,transitionDuration:_=o,TransitionProps:V,...B}=r,W={...r,disableEscapeKeyDown:g,fullScreen:x,fullWidth:b,maxWidth:w,scroll:$},q=j6e(W),j=A.useRef(),G=pe=>{j.current=pe.target===pe.currentTarget},Z=pe=>{C&&C(pe),j.current&&(j.current=null,N&&N(pe,"backdropClick"))},J=bc(a),X=A.useMemo(()=>({titleId:J}),[J]),ee={transition:M,...O},ne={transition:V,paper:R,backdrop:d,...F},oe={slots:ee,slotProps:ne},[ye,ge]=Hn("root",{elementType:z6e,shouldForwardComponentProp:!0,externalForwardedProps:oe,ownerState:W,className:st(q.root,p),ref:n}),[ve,he]=Hn("backdrop",{elementType:B6e,shouldForwardComponentProp:!0,externalForwardedProps:oe,ownerState:W}),[Me,ze]=Hn("paper",{elementType:W6e,shouldForwardComponentProp:!0,externalForwardedProps:oe,ownerState:W,className:st(q.paper,R.className)}),[Oe,Ie]=Hn("container",{elementType:V6e,externalForwardedProps:oe,ownerState:W,className:q.container}),[me,ke]=Hn("transition",{elementType:tf,externalForwardedProps:oe,ownerState:W,additionalProps:{appear:!0,in:k,timeout:_,role:"presentation"}});return S.jsx(ye,{closeAfterTransition:!0,slots:{backdrop:ve},slotProps:{backdrop:{transitionDuration:_,as:c,...he}},disableEscapeKeyDown:g,onClose:N,open:k,onClick:Z,...ge,...B,children:S.jsx(me,{...ke,children:S.jsx(Oe,{onMouseDown:G,...Ie,children:S.jsx(Me,{as:I,elevation:24,role:"dialog","aria-describedby":i,"aria-labelledby":J,"aria-modal":l,...ze,children:S.jsx(L6e.Provider,{value:X,children:f})})})})})});function H6e(t){return Nt("MuiDialogActions",t)}gt("MuiDialogActions",["root","spacing"]);const G6e=t=>{const{classes:e,disableSpacing:n}=t;return vt({root:["root",!n&&"spacing"]},H6e,e)},q6e=De("div",{name:"MuiDialogActions",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,!n.disableSpacing&&e.spacing]}})({display:"flex",alignItems:"center",padding:8,justifyContent:"flex-end",flex:"0 0 auto",variants:[{props:({ownerState:t})=>!t.disableSpacing,style:{"& > :not(style) ~ :not(style)":{marginLeft:8}}}]}),X6e=A.forwardRef(function(e,n){const r=qt({props:e,name:"MuiDialogActions"}),{className:s,disableSpacing:o=!1,...i}=r,a={...r,disableSpacing:o},l=G6e(a);return S.jsx(q6e,{className:st(l.root,s),ownerState:a,ref:n,...i})});function K6e(t){return Nt("MuiDialogContent",t)}gt("MuiDialogContent",["root","dividers"]);const Y6e=gt("MuiDialogTitle",["root"]),Z6e=t=>{const{classes:e,dividers:n}=t;return vt({root:["root",n&&"dividers"]},K6e,e)},Q6e=De("div",{name:"MuiDialogContent",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.dividers&&e.dividers]}})(bn(({theme:t})=>({flex:"1 1 auto",WebkitOverflowScrolling:"touch",overflowY:"auto",padding:"20px 24px",variants:[{props:({ownerState:e})=>e.dividers,style:{padding:"16px 24px",borderTop:`1px solid ${(t.vars||t).palette.divider}`,borderBottom:`1px solid ${(t.vars||t).palette.divider}`}},{props:({ownerState:e})=>!e.dividers,style:{[`.${Y6e.root} + &`]:{paddingTop:0}}}]}))),J6e=A.forwardRef(function(e,n){const r=qt({props:e,name:"MuiDialogContent"}),{className:s,dividers:o=!1,...i}=r,a={...r,dividers:o},l=Z6e(a);return S.jsx(Q6e,{className:st(l.root,s),ownerState:a,ref:n,...i})}),kF=gt("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]),eBe=t=>{const{classes:e,disableUnderline:n,startAdornment:r,endAdornment:s,size:o,hiddenLabel:i,multiline:a}=t,l={root:["root",!n&&"underline",r&&"adornedStart",s&&"adornedEnd",o==="small"&&`size${Qe(o)}`,i&&"hiddenLabel",a&&"multiline"],input:["input"]},c=vt(l,K5e,e);return{...e,...c}},tBe=De(OC,{shouldForwardProp:t=>da(t)||t==="classes",name:"MuiFilledInput",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[...DC(t,e),!n.disableUnderline&&e.underline]}})(bn(({theme:t})=>{const e=t.palette.mode==="light",n=e?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",r=e?"rgba(0, 0, 0, 0.06)":"rgba(255, 255, 255, 0.09)",s=e?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.13)",o=e?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)";return{position:"relative",backgroundColor:t.vars?t.vars.palette.FilledInput.bg:r,borderTopLeftRadius:(t.vars||t).shape.borderRadius,borderTopRightRadius:(t.vars||t).shape.borderRadius,transition:t.transitions.create("background-color",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),"&:hover":{backgroundColor:t.vars?t.vars.palette.FilledInput.hoverBg:s,"@media (hover: none)":{backgroundColor:t.vars?t.vars.palette.FilledInput.bg:r}},[`&.${Zu.focused}`]:{backgroundColor:t.vars?t.vars.palette.FilledInput.bg:r},[`&.${Zu.disabled}`]:{backgroundColor:t.vars?t.vars.palette.FilledInput.disabledBg:o},variants:[{props:({ownerState:i})=>!i.disableUnderline,style:{"&::after":{left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:t.transitions.create("transform",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${Zu.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${Zu.error}`]:{"&::before, &::after":{borderBottomColor:(t.vars||t).palette.error.main}},"&::before":{borderBottom:`1px solid ${t.vars?`rgba(${t.vars.palette.common.onBackgroundChannel} / ${t.vars.opacity.inputUnderline})`:n}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:t.transitions.create("border-bottom-color",{duration:t.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${Zu.disabled}, .${Zu.error}):before`]:{borderBottom:`1px solid ${(t.vars||t).palette.text.primary}`},[`&.${Zu.disabled}:before`]:{borderBottomStyle:"dotted"}}},...Object.entries(t.palette).filter(so()).map(([i])=>{var a;return{props:{disableUnderline:!1,color:i},style:{"&::after":{borderBottom:`2px solid ${(a=(t.vars||t).palette[i])==null?void 0:a.main}`}}}}),{props:({ownerState:i})=>i.startAdornment,style:{paddingLeft:12}},{props:({ownerState:i})=>i.endAdornment,style:{paddingRight:12}},{props:({ownerState:i})=>i.multiline,style:{padding:"25px 12px 8px"}},{props:({ownerState:i,size:a})=>i.multiline&&a==="small",style:{paddingTop:21,paddingBottom:4}},{props:({ownerState:i})=>i.multiline&&i.hiddenLabel,style:{paddingTop:16,paddingBottom:17}},{props:({ownerState:i})=>i.multiline&&i.hiddenLabel&&i.size==="small",style:{paddingTop:8,paddingBottom:9}}]}})),nBe=De(_C,{name:"MuiFilledInput",slot:"Input",overridesResolver:$C})(bn(({theme:t})=>({paddingTop:25,paddingRight:12,paddingBottom:8,paddingLeft:12,...!t.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:t.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:t.palette.mode==="light"?null:"#fff",caretColor:t.palette.mode==="light"?null:"#fff",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}},...t.vars&&{"&:-webkit-autofill":{borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"},[t.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},variants:[{props:{size:"small"},style:{paddingTop:21,paddingBottom:4}},{props:({ownerState:e})=>e.hiddenLabel,style:{paddingTop:16,paddingBottom:17}},{props:({ownerState:e})=>e.startAdornment,style:{paddingLeft:0}},{props:({ownerState:e})=>e.endAdornment,style:{paddingRight:0}},{props:({ownerState:e})=>e.hiddenLabel&&e.size==="small",style:{paddingTop:8,paddingBottom:9}},{props:({ownerState:e})=>e.multiline,style:{paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0}}]}))),HD=A.forwardRef(function(e,n){const r=qt({props:e,name:"MuiFilledInput"}),{disableUnderline:s=!1,components:o={},componentsProps:i,fullWidth:a=!1,hiddenLabel:l,inputComponent:c="input",multiline:d=!1,slotProps:f,slots:p={},type:g="text",...x}=r,b={...r,disableUnderline:s,fullWidth:a,inputComponent:c,multiline:d,type:g},w=eBe(r),C={root:{ownerState:b},input:{ownerState:b}},N=f??i?oo(C,f??i):C,k=p.root??o.Root??tBe,I=p.input??o.Input??nBe;return S.jsx(UD,{slots:{root:k,input:I},slotProps:N,fullWidth:a,inputComponent:c,multiline:d,ref:n,type:g,...x,classes:w})});HD.muiName="Input";function rBe(t){return Nt("MuiFormControl",t)}gt("MuiFormControl",["root","marginNone","marginNormal","marginDense","fullWidth","disabled"]);const sBe=t=>{const{classes:e,margin:n,fullWidth:r}=t,s={root:["root",n!=="none"&&`margin${Qe(n)}`,r&&"fullWidth"]};return vt(s,rBe,e)},oBe=De("div",{name:"MuiFormControl",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[`margin${Qe(n.margin)}`],n.fullWidth&&e.fullWidth]}})({display:"inline-flex",flexDirection:"column",position:"relative",minWidth:0,padding:0,margin:0,border:0,verticalAlign:"top",variants:[{props:{margin:"normal"},style:{marginTop:16,marginBottom:8}},{props:{margin:"dense"},style:{marginTop:8,marginBottom:4}},{props:{fullWidth:!0},style:{width:"100%"}}]}),gw=A.forwardRef(function(e,n){const r=qt({props:e,name:"MuiFormControl"}),{children:s,className:o,color:i="primary",component:a="div",disabled:l=!1,error:c=!1,focused:d,fullWidth:f=!1,hiddenLabel:p=!1,margin:g="none",required:x=!1,size:b="medium",variant:w="outlined",...C}=r,N={...r,color:i,component:a,disabled:l,error:c,fullWidth:f,hiddenLabel:p,margin:g,required:x,size:b,variant:w},k=sBe(N),[I,R]=A.useState(()=>{let j=!1;return s&&A.Children.forEach(s,G=>{if(!xg(G,["Input","Select"]))return;const Z=xg(G,["Select"])?G.props.input:G;Z&&U5e(Z.props)&&(j=!0)}),j}),[$,O]=A.useState(()=>{let j=!1;return s&&A.Children.forEach(s,G=>{xg(G,["Input","Select"])&&(mw(G.props,!0)||mw(G.props.inputProps,!0))&&(j=!0)}),j}),[F,M]=A.useState(!1);l&&F&&M(!1);const _=d!==void 0&&!l?d:F;let V;A.useRef(!1);const B=A.useCallback(()=>{O(!0)},[]),W=A.useCallback(()=>{O(!1)},[]),q=A.useMemo(()=>({adornedStart:I,setAdornedStart:R,color:i,disabled:l,error:c,filled:$,focused:_,fullWidth:f,hiddenLabel:p,size:b,onBlur:()=>{M(!1)},onFocus:()=>{M(!0)},onEmpty:W,onFilled:B,registerEffect:V,required:x,variant:w}),[I,i,l,c,$,_,f,p,V,W,B,x,b,w]);return S.jsx(RC.Provider,{value:q,children:S.jsx(oBe,{as:a,ownerState:N,className:st(k.root,o),ref:n,...C,children:s})})});function iBe(t){return Nt("MuiFormHelperText",t)}const TF=gt("MuiFormHelperText",["root","error","disabled","sizeSmall","sizeMedium","contained","focused","filled","required"]);var AF;const aBe=t=>{const{classes:e,contained:n,size:r,disabled:s,error:o,filled:i,focused:a,required:l}=t,c={root:["root",s&&"disabled",o&&"error",r&&`size${Qe(r)}`,n&&"contained",a&&"focused",i&&"filled",l&&"required"]};return vt(c,iBe,e)},lBe=De("p",{name:"MuiFormHelperText",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.size&&e[`size${Qe(n.size)}`],n.contained&&e.contained,n.filled&&e.filled]}})(bn(({theme:t})=>({color:(t.vars||t).palette.text.secondary,...t.typography.caption,textAlign:"left",marginTop:3,marginRight:0,marginBottom:0,marginLeft:0,[`&.${TF.disabled}`]:{color:(t.vars||t).palette.text.disabled},[`&.${TF.error}`]:{color:(t.vars||t).palette.error.main},variants:[{props:{size:"small"},style:{marginTop:4}},{props:({ownerState:e})=>e.contained,style:{marginLeft:14,marginRight:14}}]}))),PU=A.forwardRef(function(e,n){const r=qt({props:e,name:"MuiFormHelperText"}),{children:s,className:o,component:i="p",disabled:a,error:l,filled:c,focused:d,margin:f,required:p,variant:g,...x}=r,b=wc(),w=Xp({props:r,muiFormControl:b,states:["variant","size","disabled","error","filled","focused","required"]}),C={...r,component:i,contained:w.variant==="filled"||w.variant==="outlined",variant:w.variant,size:w.size,disabled:w.disabled,error:w.error,filled:w.filled,focused:w.focused,required:w.required};delete C.ownerState;const N=aBe(C);return S.jsx(lBe,{as:i,className:st(N.root,o),ref:n,...x,ownerState:C,children:s===" "?AF||(AF=S.jsx("span",{className:"notranslate","aria-hidden":!0,children:"​"})):s})});function cBe(t){return Nt("MuiFormLabel",t)}const Cg=gt("MuiFormLabel",["root","colorSecondary","focused","disabled","error","filled","required","asterisk"]),uBe=t=>{const{classes:e,color:n,focused:r,disabled:s,error:o,filled:i,required:a}=t,l={root:["root",`color${Qe(n)}`,s&&"disabled",o&&"error",i&&"filled",r&&"focused",a&&"required"],asterisk:["asterisk",o&&"error"]};return vt(l,cBe,e)},dBe=De("label",{name:"MuiFormLabel",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.color==="secondary"&&e.colorSecondary,n.filled&&e.filled]}})(bn(({theme:t})=>({color:(t.vars||t).palette.text.secondary,...t.typography.body1,lineHeight:"1.4375em",padding:0,position:"relative",variants:[...Object.entries(t.palette).filter(so()).map(([e])=>({props:{color:e},style:{[`&.${Cg.focused}`]:{color:(t.vars||t).palette[e].main}}})),{props:{},style:{[`&.${Cg.disabled}`]:{color:(t.vars||t).palette.text.disabled},[`&.${Cg.error}`]:{color:(t.vars||t).palette.error.main}}}]}))),fBe=De("span",{name:"MuiFormLabel",slot:"Asterisk"})(bn(({theme:t})=>({[`&.${Cg.error}`]:{color:(t.vars||t).palette.error.main}}))),hBe=A.forwardRef(function(e,n){const r=qt({props:e,name:"MuiFormLabel"}),{children:s,className:o,color:i,component:a="label",disabled:l,error:c,filled:d,focused:f,required:p,...g}=r,x=wc(),b=Xp({props:r,muiFormControl:x,states:["color","required","focused","disabled","error","filled"]}),w={...r,color:b.color||"primary",component:a,disabled:b.disabled,error:b.error,filled:b.filled,focused:b.focused,required:b.required},C=uBe(w);return S.jsxs(dBe,{as:a,ownerState:w,className:st(C.root,o),ref:n,...g,children:[s,b.required&&S.jsxs(fBe,{ownerState:w,"aria-hidden":!0,className:C.asterisk,children:[" ","*"]})]})}),Wl=TFe({createStyledComponent:De("div",{name:"MuiGrid",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.container&&e.container]}}),componentName:"MuiGrid",useThemeProps:t=>qt({props:t,name:"MuiGrid"}),useTheme:Sf});function rk(t){return`scale(${t}, ${t**2})`}const pBe={entering:{opacity:1,transform:rk(1)},entered:{opacity:1,transform:"none"}},wN=typeof navigator<"u"&&/^((?!chrome|android).)*(safari|mobile)/i.test(navigator.userAgent)&&/(os |version\/)15(.|_)4/i.test(navigator.userAgent),xw=A.forwardRef(function(e,n){const{addEndListener:r,appear:s=!0,children:o,easing:i,in:a,onEnter:l,onEntered:c,onEntering:d,onExit:f,onExited:p,onExiting:g,style:x,timeout:b="auto",TransitionComponent:w=Ua,...C}=e,N=au(),k=A.useRef(),I=Sf(),R=A.useRef(null),$=wn(R,ox(o),n),O=j=>G=>{if(j){const Z=R.current;G===void 0?j(Z):j(Z,G)}},F=O(d),M=O((j,G)=>{pU(j);const{duration:Z,delay:J,easing:X}=fw({style:x,timeout:b,easing:i},{mode:"enter"});let ee;b==="auto"?(ee=I.transitions.getAutoHeightDuration(j.clientHeight),k.current=ee):ee=Z,j.style.transition=[I.transitions.create("opacity",{duration:ee,delay:J}),I.transitions.create("transform",{duration:wN?ee:ee*.666,delay:J,easing:X})].join(","),l&&l(j,G)}),_=O(c),V=O(g),B=O(j=>{const{duration:G,delay:Z,easing:J}=fw({style:x,timeout:b,easing:i},{mode:"exit"});let X;b==="auto"?(X=I.transitions.getAutoHeightDuration(j.clientHeight),k.current=X):X=G,j.style.transition=[I.transitions.create("opacity",{duration:X,delay:Z}),I.transitions.create("transform",{duration:wN?X:X*.666,delay:wN?Z:Z||X*.333,easing:J})].join(","),j.style.opacity=0,j.style.transform=rk(.75),f&&f(j)}),W=O(p),q=j=>{b==="auto"&&N.start(k.current||0,j),r&&r(R.current,j)};return S.jsx(w,{appear:s,in:a,nodeRef:R,onEnter:M,onEntered:_,onEntering:F,onExit:B,onExited:W,onExiting:V,addEndListener:q,timeout:b==="auto"?null:b,...C,children:(j,{ownerState:G,...Z})=>A.cloneElement(o,{style:{opacity:0,transform:rk(.75),visibility:j==="exited"&&!a?"hidden":void 0,...pBe[j],...x,...o.props.style},ref:$,...Z})})});xw&&(xw.muiSupportAuto=!0);const mBe=t=>{const{classes:e,disableUnderline:n}=t,s=vt({root:["root",!n&&"underline"],input:["input"]},q5e,e);return{...e,...s}},gBe=De(OC,{shouldForwardProp:t=>da(t)||t==="classes",name:"MuiInput",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[...DC(t,e),!n.disableUnderline&&e.underline]}})(bn(({theme:t})=>{let n=t.palette.mode==="light"?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return t.vars&&(n=`rgba(${t.vars.palette.common.onBackgroundChannel} / ${t.vars.opacity.inputUnderline})`),{position:"relative",variants:[{props:({ownerState:r})=>r.formControl,style:{"label + &":{marginTop:16}}},{props:({ownerState:r})=>!r.disableUnderline,style:{"&::after":{left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:t.transitions.create("transform",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${Tm.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${Tm.error}`]:{"&::before, &::after":{borderBottomColor:(t.vars||t).palette.error.main}},"&::before":{borderBottom:`1px solid ${n}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:t.transitions.create("border-bottom-color",{duration:t.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${Tm.disabled}, .${Tm.error}):before`]:{borderBottom:`2px solid ${(t.vars||t).palette.text.primary}`,"@media (hover: none)":{borderBottom:`1px solid ${n}`}},[`&.${Tm.disabled}:before`]:{borderBottomStyle:"dotted"}}},...Object.entries(t.palette).filter(so()).map(([r])=>({props:{color:r,disableUnderline:!1},style:{"&::after":{borderBottom:`2px solid ${(t.vars||t).palette[r].main}`}}}))]}})),xBe=De(_C,{name:"MuiInput",slot:"Input",overridesResolver:$C})({}),GD=A.forwardRef(function(e,n){const r=qt({props:e,name:"MuiInput"}),{disableUnderline:s=!1,components:o={},componentsProps:i,fullWidth:a=!1,inputComponent:l="input",multiline:c=!1,slotProps:d,slots:f={},type:p="text",...g}=r,x=mBe(r),w={root:{ownerState:{disableUnderline:s}}},C=d??i?oo(d??i,w):w,N=f.root??o.Root??gBe,k=f.input??o.Input??xBe;return S.jsx(UD,{slots:{root:N,input:k},slotProps:C,fullWidth:a,inputComponent:l,multiline:c,ref:n,type:p,...g,classes:x})});GD.muiName="Input";function yBe(t){return Nt("MuiInputAdornment",t)}const RF=gt("MuiInputAdornment",["root","filled","standard","outlined","positionStart","positionEnd","disablePointerEvents","hiddenLabel","sizeSmall"]);var DF;const bBe=(t,e)=>{const{ownerState:n}=t;return[e.root,e[`position${Qe(n.position)}`],n.disablePointerEvents===!0&&e.disablePointerEvents,e[n.variant]]},wBe=t=>{const{classes:e,disablePointerEvents:n,hiddenLabel:r,position:s,size:o,variant:i}=t,a={root:["root",n&&"disablePointerEvents",s&&`position${Qe(s)}`,i,r&&"hiddenLabel",o&&`size${Qe(o)}`]};return vt(a,yBe,e)},vBe=De("div",{name:"MuiInputAdornment",slot:"Root",overridesResolver:bBe})(bn(({theme:t})=>({display:"flex",maxHeight:"2em",alignItems:"center",whiteSpace:"nowrap",color:(t.vars||t).palette.action.active,variants:[{props:{variant:"filled"},style:{[`&.${RF.positionStart}&:not(.${RF.hiddenLabel})`]:{marginTop:16}}},{props:{position:"start"},style:{marginRight:8}},{props:{position:"end"},style:{marginLeft:8}},{props:{disablePointerEvents:!0},style:{pointerEvents:"none"}}]}))),CBe=A.forwardRef(function(e,n){const r=qt({props:e,name:"MuiInputAdornment"}),{children:s,className:o,component:i="div",disablePointerEvents:a=!1,disableTypography:l=!1,position:c,variant:d,...f}=r,p=wc()||{};let g=d;d&&p.variant,p&&!g&&(g=p.variant);const x={...r,hiddenLabel:p.hiddenLabel,size:p.size,disablePointerEvents:a,position:c,variant:g},b=wBe(x);return S.jsx(RC.Provider,{value:null,children:S.jsx(vBe,{as:i,ownerState:x,className:st(b.root,o),ref:n,...f,children:typeof s=="string"&&!l?S.jsx(kl,{color:"textSecondary",children:s}):S.jsxs(A.Fragment,{children:[c==="start"?DF||(DF=S.jsx("span",{className:"notranslate","aria-hidden":!0,children:"​"})):null,s]})})})});function SBe(t){return Nt("MuiInputLabel",t)}gt("MuiInputLabel",["root","focused","disabled","error","required","asterisk","formControl","sizeSmall","shrink","animated","standard","filled","outlined"]);const NBe=t=>{const{classes:e,formControl:n,size:r,shrink:s,disableAnimation:o,variant:i,required:a}=t,l={root:["root",n&&"formControl",!o&&"animated",s&&"shrink",r&&r!=="medium"&&`size${Qe(r)}`,i],asterisk:[a&&"asterisk"]},c=vt(l,SBe,e);return{...e,...c}},EBe=De(hBe,{shouldForwardProp:t=>da(t)||t==="classes",name:"MuiInputLabel",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[{[`& .${Cg.asterisk}`]:e.asterisk},e.root,n.formControl&&e.formControl,n.size==="small"&&e.sizeSmall,n.shrink&&e.shrink,!n.disableAnimation&&e.animated,n.focused&&e.focused,e[n.variant]]}})(bn(({theme:t})=>({display:"block",transformOrigin:"top left",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%",variants:[{props:({ownerState:e})=>e.formControl,style:{position:"absolute",left:0,top:0,transform:"translate(0, 20px) scale(1)"}},{props:{size:"small"},style:{transform:"translate(0, 17px) scale(1)"}},{props:({ownerState:e})=>e.shrink,style:{transform:"translate(0, -1.5px) scale(0.75)",transformOrigin:"top left",maxWidth:"133%"}},{props:({ownerState:e})=>!e.disableAnimation,style:{transition:t.transitions.create(["color","transform","max-width"],{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut})}},{props:{variant:"filled"},style:{zIndex:1,pointerEvents:"none",transform:"translate(12px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"}},{props:{variant:"filled",size:"small"},style:{transform:"translate(12px, 13px) scale(1)"}},{props:({variant:e,ownerState:n})=>e==="filled"&&n.shrink,style:{userSelect:"none",pointerEvents:"auto",transform:"translate(12px, 7px) scale(0.75)",maxWidth:"calc(133% - 24px)"}},{props:({variant:e,ownerState:n,size:r})=>e==="filled"&&n.shrink&&r==="small",style:{transform:"translate(12px, 4px) scale(0.75)"}},{props:{variant:"outlined"},style:{zIndex:1,pointerEvents:"none",transform:"translate(14px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"}},{props:{variant:"outlined",size:"small"},style:{transform:"translate(14px, 9px) scale(1)"}},{props:({variant:e,ownerState:n})=>e==="outlined"&&n.shrink,style:{userSelect:"none",pointerEvents:"auto",maxWidth:"calc(133% - 32px)",transform:"translate(14px, -9px) scale(0.75)"}}]}))),yw=A.forwardRef(function(e,n){const r=qt({name:"MuiInputLabel",props:e}),{disableAnimation:s=!1,margin:o,shrink:i,variant:a,className:l,...c}=r,d=wc();let f=i;typeof f>"u"&&d&&(f=d.filled||d.focused||d.adornedStart);const p=Xp({props:r,muiFormControl:d,states:["size","variant","required","focused"]}),g={...r,disableAnimation:s,formControl:d,shrink:f,size:p.size,variant:p.variant,required:p.required,focused:p.focused},x=NBe(g);return S.jsx(EBe,{"data-shrink":f,ref:n,className:st(x.root,l),...c,ownerState:g,classes:x})}),Dd=A.createContext({});function IBe(t){return Nt("MuiList",t)}gt("MuiList",["root","padding","dense","subheader"]);const kBe=t=>{const{classes:e,disablePadding:n,dense:r,subheader:s}=t;return vt({root:["root",!n&&"padding",r&&"dense",s&&"subheader"]},IBe,e)},TBe=De("ul",{name:"MuiList",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,!n.disablePadding&&e.padding,n.dense&&e.dense,n.subheader&&e.subheader]}})({listStyle:"none",margin:0,padding:0,position:"relative",variants:[{props:({ownerState:t})=>!t.disablePadding,style:{paddingTop:8,paddingBottom:8}},{props:({ownerState:t})=>t.subheader,style:{paddingTop:0}}]}),FU=A.forwardRef(function(e,n){const r=qt({props:e,name:"MuiList"}),{children:s,className:o,component:i="ul",dense:a=!1,disablePadding:l=!1,subheader:c,...d}=r,f=A.useMemo(()=>({dense:a}),[a]),p={...r,component:i,dense:a,disablePadding:l},g=kBe(p);return S.jsx(Dd.Provider,{value:f,children:S.jsxs(TBe,{as:i,className:st(g.root,o),ref:n,ownerState:p,...d,children:[c,s]})})});function ABe(t){return Nt("MuiListItem",t)}gt("MuiListItem",["root","container","dense","alignItemsFlexStart","divider","gutters","padding","secondaryAction"]);const RBe=gt("MuiListItemButton",["root","focusVisible","dense","alignItemsFlexStart","disabled","divider","gutters","selected"]);function DBe(t){return Nt("MuiListItemSecondaryAction",t)}gt("MuiListItemSecondaryAction",["root","disableGutters"]);const $Be=t=>{const{disableGutters:e,classes:n}=t;return vt({root:["root",e&&"disableGutters"]},DBe,n)},OBe=De("div",{name:"MuiListItemSecondaryAction",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.disableGutters&&e.disableGutters]}})({position:"absolute",right:16,top:"50%",transform:"translateY(-50%)",variants:[{props:({ownerState:t})=>t.disableGutters,style:{right:0}}]}),MU=A.forwardRef(function(e,n){const r=qt({props:e,name:"MuiListItemSecondaryAction"}),{className:s,...o}=r,i=A.useContext(Dd),a={...r,disableGutters:i.disableGutters},l=$Be(a);return S.jsx(OBe,{className:st(l.root,s),ownerState:a,ref:n,...o})});MU.muiName="ListItemSecondaryAction";const _Be=(t,e)=>{const{ownerState:n}=t;return[e.root,n.dense&&e.dense,n.alignItems==="flex-start"&&e.alignItemsFlexStart,n.divider&&e.divider,!n.disableGutters&&e.gutters,!n.disablePadding&&e.padding,n.hasSecondaryAction&&e.secondaryAction]},PBe=t=>{const{alignItems:e,classes:n,dense:r,disableGutters:s,disablePadding:o,divider:i,hasSecondaryAction:a}=t;return vt({root:["root",r&&"dense",!s&&"gutters",!o&&"padding",i&&"divider",e==="flex-start"&&"alignItemsFlexStart",a&&"secondaryAction"],container:["container"]},ABe,n)},FBe=De("div",{name:"MuiListItem",slot:"Root",overridesResolver:_Be})(bn(({theme:t})=>({display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",width:"100%",boxSizing:"border-box",textAlign:"left",variants:[{props:({ownerState:e})=>!e.disablePadding,style:{paddingTop:8,paddingBottom:8}},{props:({ownerState:e})=>!e.disablePadding&&e.dense,style:{paddingTop:4,paddingBottom:4}},{props:({ownerState:e})=>!e.disablePadding&&!e.disableGutters,style:{paddingLeft:16,paddingRight:16}},{props:({ownerState:e})=>!e.disablePadding&&!!e.secondaryAction,style:{paddingRight:48}},{props:({ownerState:e})=>!!e.secondaryAction,style:{[`& > .${RBe.root}`]:{paddingRight:48}}},{props:{alignItems:"flex-start"},style:{alignItems:"flex-start"}},{props:({ownerState:e})=>e.divider,style:{borderBottom:`1px solid ${(t.vars||t).palette.divider}`,backgroundClip:"padding-box"}},{props:({ownerState:e})=>e.button,style:{transition:t.transitions.create("background-color",{duration:t.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(t.vars||t).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}}}},{props:({ownerState:e})=>e.hasSecondaryAction,style:{paddingRight:48}}]}))),MBe=De("li",{name:"MuiListItem",slot:"Container"})({position:"relative"}),LBe=A.forwardRef(function(e,n){const r=qt({props:e,name:"MuiListItem"}),{alignItems:s="center",children:o,className:i,component:a,components:l={},componentsProps:c={},ContainerComponent:d="li",ContainerProps:{className:f,...p}={},dense:g=!1,disableGutters:x=!1,disablePadding:b=!1,divider:w=!1,secondaryAction:C,slotProps:N={},slots:k={},...I}=r,R=A.useContext(Dd),$=A.useMemo(()=>({dense:g||R.dense||!1,alignItems:s,disableGutters:x}),[s,R.dense,g,x]),O=A.useRef(null),F=A.Children.toArray(o),M=F.length&&xg(F[F.length-1],["ListItemSecondaryAction"]),_={...r,alignItems:s,dense:$.dense,disableGutters:x,disablePadding:b,divider:w,hasSecondaryAction:M},V=PBe(_),B=wn(O,n),W=k.root||l.Root||FBe,q=N.root||c.root||{},j={className:st(V.root,q.className,i),...I};let G=a||"li";return M?(G=!j.component&&!a?"div":G,d==="li"&&(G==="li"?G="div":j.component==="li"&&(j.component="div")),S.jsx(Dd.Provider,{value:$,children:S.jsxs(MBe,{as:d,className:st(V.container,f),ref:B,ownerState:_,...p,children:[S.jsx(W,{...q,...!p0(W)&&{as:G,ownerState:{..._,...q.ownerState}},...j,children:F}),F.pop()]})})):S.jsx(Dd.Provider,{value:$,children:S.jsxs(W,{...q,as:G,ref:B,...!p0(W)&&{ownerState:{..._,...q.ownerState}},...j,children:[F,C&&S.jsx(MU,{children:C})]})})}),$F=gt("MuiListItemIcon",["root","alignItemsFlexStart"]),OF=gt("MuiListItemText",["root","multiline","dense","inset","primary","secondary"]);function vN(t,e,n){return t===e?t.firstChild:e&&e.nextElementSibling?e.nextElementSibling:n?null:t.firstChild}function _F(t,e,n){return t===e?n?t.firstChild:t.lastChild:e&&e.previousElementSibling?e.previousElementSibling:n?null:t.lastChild}function LU(t,e){if(e===void 0)return!0;let n=t.innerText;return n===void 0&&(n=t.textContent),n=n.trim().toLowerCase(),n.length===0?!1:e.repeating?n[0]===e.keys[0]:n.startsWith(e.keys.join(""))}function Am(t,e,n,r,s,o){let i=!1,a=s(t,e,e?n:!1);for(;a;){if(a===t.firstChild){if(i)return!1;i=!0}const l=r?!1:a.disabled||a.getAttribute("aria-disabled")==="true";if(!a.hasAttribute("tabindex")||!LU(a,o)||l)a=s(t,a,n);else return a.focus(),!0}return!1}const BBe=A.forwardRef(function(e,n){const{actions:r,autoFocus:s=!1,autoFocusItem:o=!1,children:i,className:a,disabledItemsFocusable:l=!1,disableListWrap:c=!1,onKeyDown:d,variant:f="selectedMenu",...p}=e,g=A.useRef(null),x=A.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});ts(()=>{s&&g.current.focus()},[s]),A.useImperativeHandle(r,()=>({adjustStyleForScrollbar:(k,{direction:I})=>{const R=!g.current.style.width;if(k.clientHeight<g.current.clientHeight&&R){const $=`${$U(dc(k))}px`;g.current.style[I==="rtl"?"paddingLeft":"paddingRight"]=$,g.current.style.width=`calc(100% + ${$})`}return g.current}}),[]);const b=k=>{const I=g.current,R=k.key;if(k.ctrlKey||k.metaKey||k.altKey){d&&d(k);return}const O=io(I).activeElement;if(R==="ArrowDown")k.preventDefault(),Am(I,O,c,l,vN);else if(R==="ArrowUp")k.preventDefault(),Am(I,O,c,l,_F);else if(R==="Home")k.preventDefault(),Am(I,null,c,l,vN);else if(R==="End")k.preventDefault(),Am(I,null,c,l,_F);else if(R.length===1){const F=x.current,M=R.toLowerCase(),_=performance.now();F.keys.length>0&&(_-F.lastTime>500?(F.keys=[],F.repeating=!0,F.previousKeyMatched=!0):F.repeating&&M!==F.keys[0]&&(F.repeating=!1)),F.lastTime=_,F.keys.push(M);const V=O&&!F.repeating&&LU(O,F);F.previousKeyMatched&&(V||Am(I,O,!1,l,vN,F))?k.preventDefault():F.previousKeyMatched=!1}d&&d(k)},w=wn(g,n);let C=-1;A.Children.forEach(i,(k,I)=>{if(!A.isValidElement(k)){C===I&&(C+=1,C>=i.length&&(C=-1));return}k.props.disabled||(f==="selectedMenu"&&k.props.selected||C===-1)&&(C=I),C===I&&(k.props.disabled||k.props.muiSkipListHighlight||k.type.muiSkipListHighlight)&&(C+=1,C>=i.length&&(C=-1))});const N=A.Children.map(i,(k,I)=>{if(I===C){const R={};return o&&(R.autoFocus=!0),k.props.tabIndex===void 0&&f==="selectedMenu"&&(R.tabIndex=0),A.cloneElement(k,R)}return k});return S.jsx(FU,{role:"menu",ref:w,className:a,onKeyDown:b,tabIndex:s?0:-1,...p,children:N})});function jBe(t){return Nt("MuiPopover",t)}gt("MuiPopover",["root","paper"]);function PF(t,e){let n=0;return typeof e=="number"?n=e:e==="center"?n=t.height/2:e==="bottom"&&(n=t.height),n}function FF(t,e){let n=0;return typeof e=="number"?n=e:e==="center"?n=t.width/2:e==="right"&&(n=t.width),n}function MF(t){return[t.horizontal,t.vertical].map(e=>typeof e=="number"?`${e}px`:e).join(" ")}function uy(t){return typeof t=="function"?t():t}const zBe=t=>{const{classes:e}=t;return vt({root:["root"],paper:["paper"]},jBe,e)},VBe=De(_U,{name:"MuiPopover",slot:"Root"})({}),BU=De(ju,{name:"MuiPopover",slot:"Paper"})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),WBe=A.forwardRef(function(e,n){const r=qt({props:e,name:"MuiPopover"}),{action:s,anchorEl:o,anchorOrigin:i={vertical:"top",horizontal:"left"},anchorPosition:a,anchorReference:l="anchorEl",children:c,className:d,container:f,elevation:p=8,marginThreshold:g=16,open:x,PaperProps:b={},slots:w={},slotProps:C={},transformOrigin:N={vertical:"top",horizontal:"left"},TransitionComponent:k,transitionDuration:I="auto",TransitionProps:R={},disableScrollLock:$=!1,...O}=r,F=A.useRef(),M={...r,anchorOrigin:i,anchorReference:l,elevation:p,marginThreshold:g,transformOrigin:N,TransitionComponent:k,transitionDuration:I,TransitionProps:R},_=zBe(M),V=A.useCallback(()=>{if(l==="anchorPosition")return a;const Ie=uy(o),ke=(Ie&&Ie.nodeType===1?Ie:io(F.current).body).getBoundingClientRect();return{top:ke.top+PF(ke,i.vertical),left:ke.left+FF(ke,i.horizontal)}},[o,i.horizontal,i.vertical,a,l]),B=A.useCallback(Ie=>({vertical:PF(Ie,N.vertical),horizontal:FF(Ie,N.horizontal)}),[N.horizontal,N.vertical]),W=A.useCallback(Ie=>{const me={width:Ie.offsetWidth,height:Ie.offsetHeight},ke=B(me);if(l==="none")return{top:null,left:null,transformOrigin:MF(ke)};const pe=V();let Pe=pe.top-ke.vertical,Ve=pe.left-ke.horizontal;const Fe=Pe+me.height,Be=Ve+me.width,be=dc(uy(o)),je=be.innerHeight-g,Se=be.innerWidth-g;if(g!==null&&Pe<g){const ue=Pe-g;Pe-=ue,ke.vertical+=ue}else if(g!==null&&Fe>je){const ue=Fe-je;Pe-=ue,ke.vertical+=ue}if(g!==null&&Ve<g){const ue=Ve-g;Ve-=ue,ke.horizontal+=ue}else if(Be>Se){const ue=Be-Se;Ve-=ue,ke.horizontal+=ue}return{top:`${Math.round(Pe)}px`,left:`${Math.round(Ve)}px`,transformOrigin:MF(ke)}},[o,l,V,B,g]),[q,j]=A.useState(x),G=A.useCallback(()=>{const Ie=F.current;if(!Ie)return;const me=W(Ie);me.top!==null&&Ie.style.setProperty("top",me.top),me.left!==null&&(Ie.style.left=me.left),Ie.style.transformOrigin=me.transformOrigin,j(!0)},[W]);A.useEffect(()=>($&&window.addEventListener("scroll",G),()=>window.removeEventListener("scroll",G)),[o,$,G]);const Z=()=>{G()},J=()=>{j(!1)};A.useEffect(()=>{x&&G()}),A.useImperativeHandle(s,()=>x?{updatePosition:()=>{G()}}:null,[x,G]),A.useEffect(()=>{if(!x)return;const Ie=dU(()=>{G()}),me=dc(uy(o));return me.addEventListener("resize",Ie),()=>{Ie.clear(),me.removeEventListener("resize",Ie)}},[o,x,G]);let X=I;const ee={slots:{transition:k,...w},slotProps:{transition:R,paper:b,...C}},[ne,oe]=Hn("transition",{elementType:xw,externalForwardedProps:ee,ownerState:M,getSlotProps:Ie=>({...Ie,onEntering:(me,ke)=>{var pe;(pe=Ie.onEntering)==null||pe.call(Ie,me,ke),Z()},onExited:me=>{var ke;(ke=Ie.onExited)==null||ke.call(Ie,me),J()}}),additionalProps:{appear:!0,in:x}});I==="auto"&&!ne.muiSupportAuto&&(X=void 0);const ye=f||(o?io(uy(o)).body:void 0),[ge,{slots:ve,slotProps:he,...Me}]=Hn("root",{ref:n,elementType:VBe,externalForwardedProps:{...ee,...O},shouldForwardComponentProp:!0,additionalProps:{slots:{backdrop:w.backdrop},slotProps:{backdrop:pMe(typeof C.backdrop=="function"?C.backdrop(M):C.backdrop,{invisible:!0})},container:ye,open:x},ownerState:M,className:st(_.root,d)}),[ze,Oe]=Hn("paper",{ref:F,className:_.paper,elementType:BU,externalForwardedProps:ee,shouldForwardComponentProp:!0,additionalProps:{elevation:p,style:q?void 0:{opacity:0}},ownerState:M});return S.jsx(ge,{...Me,...!p0(ge)&&{slots:ve,slotProps:he,disableScrollLock:$},children:S.jsx(ne,{...oe,timeout:X,children:S.jsx(ze,{...Oe,children:c})})})});function UBe(t){return Nt("MuiMenu",t)}gt("MuiMenu",["root","paper","list"]);const HBe={vertical:"top",horizontal:"right"},GBe={vertical:"top",horizontal:"left"},qBe=t=>{const{classes:e}=t;return vt({root:["root"],paper:["paper"],list:["list"]},UBe,e)},XBe=De(WBe,{shouldForwardProp:t=>da(t)||t==="classes",name:"MuiMenu",slot:"Root"})({}),KBe=De(BU,{name:"MuiMenu",slot:"Paper"})({maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"}),YBe=De(BBe,{name:"MuiMenu",slot:"List"})({outline:0}),ZBe=A.forwardRef(function(e,n){const r=qt({props:e,name:"MuiMenu"}),{autoFocus:s=!0,children:o,className:i,disableAutoFocusItem:a=!1,MenuListProps:l={},onClose:c,open:d,PaperProps:f={},PopoverClasses:p,transitionDuration:g="auto",TransitionProps:{onEntering:x,...b}={},variant:w="selectedMenu",slots:C={},slotProps:N={},...k}=r,I=Wa(),R={...r,autoFocus:s,disableAutoFocusItem:a,MenuListProps:l,onEntering:x,PaperProps:f,transitionDuration:g,TransitionProps:b,variant:w},$=qBe(R),O=s&&!a&&d,F=A.useRef(null),M=(X,ee)=>{F.current&&F.current.adjustStyleForScrollbar(X,{direction:I?"rtl":"ltr"}),x&&x(X,ee)},_=X=>{X.key==="Tab"&&(X.preventDefault(),c&&c(X,"tabKeyDown"))};let V=-1;A.Children.map(o,(X,ee)=>{A.isValidElement(X)&&(X.props.disabled||(w==="selectedMenu"&&X.props.selected||V===-1)&&(V=ee))});const B={slots:C,slotProps:{list:l,transition:b,paper:f,...N}},W=yn({elementType:C.root,externalSlotProps:N.root,ownerState:R,className:[$.root,i]}),[q,j]=Hn("paper",{className:$.paper,elementType:KBe,externalForwardedProps:B,shouldForwardComponentProp:!0,ownerState:R}),[G,Z]=Hn("list",{className:st($.list,l.className),elementType:YBe,shouldForwardComponentProp:!0,externalForwardedProps:B,getSlotProps:X=>({...X,onKeyDown:ee=>{var ne;_(ee),(ne=X.onKeyDown)==null||ne.call(X,ee)}}),ownerState:R}),J=typeof B.slotProps.transition=="function"?B.slotProps.transition(R):B.slotProps.transition;return S.jsx(XBe,{onClose:c,anchorOrigin:{vertical:"bottom",horizontal:I?"right":"left"},transformOrigin:I?HBe:GBe,slots:{root:C.root,paper:q,backdrop:C.backdrop,...C.transition&&{transition:C.transition}},slotProps:{root:W,paper:j,backdrop:typeof N.backdrop=="function"?N.backdrop(R):N.backdrop,transition:{...J,onEntering:(...X)=>{var ee;M(...X),(ee=J==null?void 0:J.onEntering)==null||ee.call(J,...X)}}},open:d,ref:n,transitionDuration:g,ownerState:R,...k,classes:p,children:S.jsx(G,{actions:F,autoFocus:s&&(V===-1||a),autoFocusItem:O,variant:w,...Z,children:o})})});function QBe(t){return Nt("MuiMenuItem",t)}const Rm=gt("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]),JBe=(t,e)=>{const{ownerState:n}=t;return[e.root,n.dense&&e.dense,n.divider&&e.divider,!n.disableGutters&&e.gutters]},e8e=t=>{const{disabled:e,dense:n,divider:r,disableGutters:s,selected:o,classes:i}=t,l=vt({root:["root",n&&"dense",e&&"disabled",!s&&"gutters",r&&"divider",o&&"selected"]},QBe,i);return{...i,...l}},t8e=De(cp,{shouldForwardProp:t=>da(t)||t==="classes",name:"MuiMenuItem",slot:"Root",overridesResolver:JBe})(bn(({theme:t})=>({...t.typography.body1,display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap","&:hover":{textDecoration:"none",backgroundColor:(t.vars||t).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${Rm.selected}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.selectedOpacity})`:pn(t.palette.primary.main,t.palette.action.selectedOpacity),[`&.${Rm.focusVisible}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.focusOpacity}))`:pn(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)}},[`&.${Rm.selected}:hover`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.hoverOpacity}))`:pn(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.selectedOpacity})`:pn(t.palette.primary.main,t.palette.action.selectedOpacity)}},[`&.${Rm.focusVisible}`]:{backgroundColor:(t.vars||t).palette.action.focus},[`&.${Rm.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity},[`& + .${kF.root}`]:{marginTop:t.spacing(1),marginBottom:t.spacing(1)},[`& + .${kF.inset}`]:{marginLeft:52},[`& .${OF.root}`]:{marginTop:0,marginBottom:0},[`& .${OF.inset}`]:{paddingLeft:36},[`& .${$F.root}`]:{minWidth:36},variants:[{props:({ownerState:e})=>!e.disableGutters,style:{paddingLeft:16,paddingRight:16}},{props:({ownerState:e})=>e.divider,style:{borderBottom:`1px solid ${(t.vars||t).palette.divider}`,backgroundClip:"padding-box"}},{props:({ownerState:e})=>!e.dense,style:{[t.breakpoints.up("sm")]:{minHeight:"auto"}}},{props:({ownerState:e})=>e.dense,style:{minHeight:32,paddingTop:4,paddingBottom:4,...t.typography.body2,[`& .${$F.root} svg`]:{fontSize:"1.25rem"}}}]}))),dy=A.forwardRef(function(e,n){const r=qt({props:e,name:"MuiMenuItem"}),{autoFocus:s=!1,component:o="li",dense:i=!1,divider:a=!1,disableGutters:l=!1,focusVisibleClassName:c,role:d="menuitem",tabIndex:f,className:p,...g}=r,x=A.useContext(Dd),b=A.useMemo(()=>({dense:i||x.dense||!1,disableGutters:l}),[x.dense,i,l]),w=A.useRef(null);ts(()=>{s&&w.current&&w.current.focus()},[s]);const C={...r,dense:b.dense,divider:a,disableGutters:l},N=e8e(r),k=wn(w,n);let I;return r.disabled||(I=f!==void 0?f:-1),S.jsx(Dd.Provider,{value:b,children:S.jsx(t8e,{ref:k,role:d,tabIndex:I,component:o,focusVisibleClassName:st(N.focusVisible,c),className:st(N.root,p),...g,ownerState:C,classes:N})})});function n8e(t){return Nt("MuiNativeSelect",t)}const qD=gt("MuiNativeSelect",["root","select","multiple","filled","outlined","standard","disabled","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]),r8e=t=>{const{classes:e,variant:n,disabled:r,multiple:s,open:o,error:i}=t,a={select:["select",n,r&&"disabled",s&&"multiple",i&&"error"],icon:["icon",`icon${Qe(n)}`,o&&"iconOpen",r&&"disabled"]};return vt(a,n8e,e)},jU=De("select")(({theme:t})=>({MozAppearance:"none",WebkitAppearance:"none",userSelect:"none",borderRadius:0,cursor:"pointer","&:focus":{borderRadius:0},[`&.${qD.disabled}`]:{cursor:"default"},"&[multiple]":{height:"auto"},"&:not([multiple]) option, &:not([multiple]) optgroup":{backgroundColor:(t.vars||t).palette.background.paper},variants:[{props:({ownerState:e})=>e.variant!=="filled"&&e.variant!=="outlined",style:{"&&&":{paddingRight:24,minWidth:16}}},{props:{variant:"filled"},style:{"&&&":{paddingRight:32}}},{props:{variant:"outlined"},style:{borderRadius:(t.vars||t).shape.borderRadius,"&:focus":{borderRadius:(t.vars||t).shape.borderRadius},"&&&":{paddingRight:32}}}]})),s8e=De(jU,{name:"MuiNativeSelect",slot:"Select",shouldForwardProp:da,overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.select,e[n.variant],n.error&&e.error,{[`&.${qD.multiple}`]:e.multiple}]}})({}),zU=De("svg")(({theme:t})=>({position:"absolute",right:0,top:"calc(50% - .5em)",pointerEvents:"none",color:(t.vars||t).palette.action.active,[`&.${qD.disabled}`]:{color:(t.vars||t).palette.action.disabled},variants:[{props:({ownerState:e})=>e.open,style:{transform:"rotate(180deg)"}},{props:{variant:"filled"},style:{right:7}},{props:{variant:"outlined"},style:{right:7}}]})),o8e=De(zU,{name:"MuiNativeSelect",slot:"Icon",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.icon,n.variant&&e[`icon${Qe(n.variant)}`],n.open&&e.iconOpen]}})({}),i8e=A.forwardRef(function(e,n){const{className:r,disabled:s,error:o,IconComponent:i,inputRef:a,variant:l="standard",...c}=e,d={...e,disabled:s,variant:l,error:o},f=r8e(d);return S.jsxs(A.Fragment,{children:[S.jsx(s8e,{ownerState:d,className:st(f.select,r),disabled:s,ref:a||n,...c}),e.multiple?null:S.jsx(o8e,{as:i,ownerState:d,className:f.icon})]})});var LF;const a8e=De("fieldset",{shouldForwardProp:da})({textAlign:"left",position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden",minWidth:"0%"}),l8e=De("legend",{shouldForwardProp:da})(bn(({theme:t})=>({float:"unset",width:"auto",overflow:"hidden",variants:[{props:({ownerState:e})=>!e.withLabel,style:{padding:0,lineHeight:"11px",transition:t.transitions.create("width",{duration:150,easing:t.transitions.easing.easeOut})}},{props:({ownerState:e})=>e.withLabel,style:{display:"block",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:t.transitions.create("max-width",{duration:50,easing:t.transitions.easing.easeOut}),whiteSpace:"nowrap","& > span":{paddingLeft:5,paddingRight:5,display:"inline-block",opacity:0,visibility:"visible"}}},{props:({ownerState:e})=>e.withLabel&&e.notched,style:{maxWidth:"100%",transition:t.transitions.create("max-width",{duration:100,easing:t.transitions.easing.easeOut,delay:50})}}]})));function c8e(t){const{children:e,classes:n,className:r,label:s,notched:o,...i}=t,a=s!=null&&s!=="",l={...t,notched:o,withLabel:a};return S.jsx(a8e,{"aria-hidden":!0,className:r,ownerState:l,...i,children:S.jsx(l8e,{ownerState:l,children:a?S.jsx("span",{children:s}):LF||(LF=S.jsx("span",{className:"notranslate","aria-hidden":!0,children:"​"}))})})}const u8e=t=>{const{classes:e}=t,r=vt({root:["root"],notchedOutline:["notchedOutline"],input:["input"]},X5e,e);return{...e,...r}},d8e=De(OC,{shouldForwardProp:t=>da(t)||t==="classes",name:"MuiOutlinedInput",slot:"Root",overridesResolver:DC})(bn(({theme:t})=>{const e=t.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{position:"relative",borderRadius:(t.vars||t).shape.borderRadius,[`&:hover .${Ja.notchedOutline}`]:{borderColor:(t.vars||t).palette.text.primary},"@media (hover: none)":{[`&:hover .${Ja.notchedOutline}`]:{borderColor:t.vars?`rgba(${t.vars.palette.common.onBackgroundChannel} / 0.23)`:e}},[`&.${Ja.focused} .${Ja.notchedOutline}`]:{borderWidth:2},variants:[...Object.entries(t.palette).filter(so()).map(([n])=>({props:{color:n},style:{[`&.${Ja.focused} .${Ja.notchedOutline}`]:{borderColor:(t.vars||t).palette[n].main}}})),{props:{},style:{[`&.${Ja.error} .${Ja.notchedOutline}`]:{borderColor:(t.vars||t).palette.error.main},[`&.${Ja.disabled} .${Ja.notchedOutline}`]:{borderColor:(t.vars||t).palette.action.disabled}}},{props:({ownerState:n})=>n.startAdornment,style:{paddingLeft:14}},{props:({ownerState:n})=>n.endAdornment,style:{paddingRight:14}},{props:({ownerState:n})=>n.multiline,style:{padding:"16.5px 14px"}},{props:({ownerState:n,size:r})=>n.multiline&&r==="small",style:{padding:"8.5px 14px"}}]}})),f8e=De(c8e,{name:"MuiOutlinedInput",slot:"NotchedOutline"})(bn(({theme:t})=>{const e=t.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{borderColor:t.vars?`rgba(${t.vars.palette.common.onBackgroundChannel} / 0.23)`:e}})),h8e=De(_C,{name:"MuiOutlinedInput",slot:"Input",overridesResolver:$C})(bn(({theme:t})=>({padding:"16.5px 14px",...!t.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:t.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:t.palette.mode==="light"?null:"#fff",caretColor:t.palette.mode==="light"?null:"#fff",borderRadius:"inherit"}},...t.vars&&{"&:-webkit-autofill":{borderRadius:"inherit"},[t.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},variants:[{props:{size:"small"},style:{padding:"8.5px 14px"}},{props:({ownerState:e})=>e.multiline,style:{padding:0}},{props:({ownerState:e})=>e.startAdornment,style:{paddingLeft:0}},{props:({ownerState:e})=>e.endAdornment,style:{paddingRight:0}}]}))),XD=A.forwardRef(function(e,n){const r=qt({props:e,name:"MuiOutlinedInput"}),{components:s={},fullWidth:o=!1,inputComponent:i="input",label:a,multiline:l=!1,notched:c,slots:d={},slotProps:f={},type:p="text",...g}=r,x=u8e(r),b=wc(),w=Xp({props:r,muiFormControl:b,states:["color","disabled","error","focused","hiddenLabel","size","required"]}),C={...r,color:w.color||"primary",disabled:w.disabled,error:w.error,focused:w.focused,formControl:b,fullWidth:o,hiddenLabel:w.hiddenLabel,multiline:l,size:w.size,type:p},N=d.root??s.Root??d8e,k=d.input??s.Input??h8e,[I,R]=Hn("notchedOutline",{elementType:f8e,className:x.notchedOutline,shouldForwardComponentProp:!0,ownerState:C,externalForwardedProps:{slots:d,slotProps:f},additionalProps:{label:a!=null&&a!==""&&w.required?S.jsxs(A.Fragment,{children:[a," ","*"]}):a}});return S.jsx(UD,{slots:{root:N,input:k},slotProps:f,renderSuffix:$=>S.jsx(I,{...R,notched:typeof c<"u"?c:!!($.startAdornment||$.filled||$.focused)}),fullWidth:o,inputComponent:i,multiline:l,ref:n,type:p,...g,classes:{...x,notchedOutline:null}})});XD.muiName="Input";const p8e={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"absolute",whiteSpace:"nowrap",width:"1px"};function VU(t){return Nt("MuiSelect",t)}const Dm=gt("MuiSelect",["root","select","multiple","filled","outlined","standard","disabled","focused","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]);var BF;const m8e=De(jU,{name:"MuiSelect",slot:"Select",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[{[`&.${Dm.select}`]:e.select},{[`&.${Dm.select}`]:e[n.variant]},{[`&.${Dm.error}`]:e.error},{[`&.${Dm.multiple}`]:e.multiple}]}})({[`&.${Dm.select}`]:{height:"auto",minHeight:"1.4375em",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}}),g8e=De(zU,{name:"MuiSelect",slot:"Icon",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.icon,n.variant&&e[`icon${Qe(n.variant)}`],n.open&&e.iconOpen]}})({}),x8e=De("input",{shouldForwardProp:t=>uU(t)&&t!=="classes",name:"MuiSelect",slot:"NativeInput"})({bottom:0,left:0,position:"absolute",opacity:0,pointerEvents:"none",width:"100%",boxSizing:"border-box"});function jF(t,e){return typeof e=="object"&&e!==null?t===e:String(t)===String(e)}function y8e(t){return t==null||typeof t=="string"&&!t.trim()}const b8e=t=>{const{classes:e,variant:n,disabled:r,multiple:s,open:o,error:i}=t,a={select:["select",n,r&&"disabled",s&&"multiple",i&&"error"],icon:["icon",`icon${Qe(n)}`,o&&"iconOpen",r&&"disabled"],nativeInput:["nativeInput"]};return vt(a,VU,e)},w8e=A.forwardRef(function(e,n){var Xe;const{"aria-describedby":r,"aria-label":s,autoFocus:o,autoWidth:i,children:a,className:l,defaultOpen:c,defaultValue:d,disabled:f,displayEmpty:p,error:g=!1,IconComponent:x,inputRef:b,labelId:w,MenuProps:C={},multiple:N,name:k,onBlur:I,onChange:R,onClose:$,onFocus:O,onOpen:F,open:M,readOnly:_,renderValue:V,required:B,SelectDisplayProps:W={},tabIndex:q,type:j,value:G,variant:Z="standard",...J}=e,[X,ee]=Cu({controlled:G,default:d,name:"Select"}),[ne,oe]=Cu({controlled:M,default:c,name:"Select"}),ye=A.useRef(null),ge=A.useRef(null),[ve,he]=A.useState(null),{current:Me}=A.useRef(M!=null),[ze,Oe]=A.useState(),Ie=wn(n,b),me=A.useCallback(et=>{ge.current=et,et&&he(et)},[]),ke=ve==null?void 0:ve.parentNode;A.useImperativeHandle(Ie,()=>({focus:()=>{ge.current.focus()},node:ye.current,value:X}),[X]),A.useEffect(()=>{c&&ne&&ve&&!Me&&(Oe(i?null:ke.clientWidth),ge.current.focus())},[ve,i]),A.useEffect(()=>{o&&ge.current.focus()},[o]),A.useEffect(()=>{if(!w)return;const et=io(ge.current).getElementById(w);if(et){const ut=()=>{getSelection().isCollapsed&&ge.current.focus()};return et.addEventListener("click",ut),()=>{et.removeEventListener("click",ut)}}},[w]);const pe=(et,ut)=>{et?F&&F(ut):$&&$(ut),Me||(Oe(i?null:ke.clientWidth),oe(et))},Pe=et=>{et.button===0&&(et.preventDefault(),ge.current.focus(),pe(!0,et))},Ve=et=>{pe(!1,et)},Fe=A.Children.toArray(a),Be=et=>{const ut=Fe.find(it=>it.props.value===et.target.value);ut!==void 0&&(ee(ut.props.value),R&&R(et,ut))},be=et=>ut=>{let it;if(ut.currentTarget.hasAttribute("tabindex")){if(N){it=Array.isArray(X)?X.slice():[];const vn=X.indexOf(et.props.value);vn===-1?it.push(et.props.value):it.splice(vn,1)}else it=et.props.value;if(et.props.onClick&&et.props.onClick(ut),X!==it&&(ee(it),R)){const vn=ut.nativeEvent||ut,Cr=new vn.constructor(vn.type,vn);Object.defineProperty(Cr,"target",{writable:!0,value:{value:it,name:k}}),R(Cr,et)}N||pe(!1,ut)}},je=et=>{_||[" ","ArrowUp","ArrowDown","Enter"].includes(et.key)&&(et.preventDefault(),pe(!0,et))},Se=ve!==null&&ne,ue=et=>{!Se&&I&&(Object.defineProperty(et,"target",{writable:!0,value:{value:X,name:k}}),I(et))};delete J["aria-invalid"];let He,It;const ot=[];let Vt=!1;(mw({value:X})||p)&&(V?He=V(X):Vt=!0);const Xt=Fe.map(et=>{if(!A.isValidElement(et))return null;let ut;if(N){if(!Array.isArray(X))throw new Error(cc(2));ut=X.some(it=>jF(it,et.props.value)),ut&&Vt&&ot.push(et.props.children)}else ut=jF(X,et.props.value),ut&&Vt&&(It=et.props.children);return A.cloneElement(et,{"aria-selected":ut?"true":"false",onClick:be(et),onKeyUp:it=>{it.key===" "&&it.preventDefault(),et.props.onKeyUp&&et.props.onKeyUp(it)},role:"option",selected:ut,value:void 0,"data-value":et.props.value})});Vt&&(N?ot.length===0?He=null:He=ot.reduce((et,ut,it)=>(et.push(ut),it<ot.length-1&&et.push(", "),et),[]):He=It);let Ln=ze;!i&&Me&&ve&&(Ln=ke.clientWidth);let hn;typeof q<"u"?hn=q:hn=f?null:0;const ft=W.id||(k?`mui-component-select-${k}`:void 0),Ot={...e,variant:Z,value:X,open:Se,error:g},Ct=b8e(Ot),cn={...C.PaperProps,...(Xe=C.slotProps)==null?void 0:Xe.paper},Bt=bc();return S.jsxs(A.Fragment,{children:[S.jsx(m8e,{as:"div",ref:me,tabIndex:hn,role:"combobox","aria-controls":Se?Bt:void 0,"aria-disabled":f?"true":void 0,"aria-expanded":Se?"true":"false","aria-haspopup":"listbox","aria-label":s,"aria-labelledby":[w,ft].filter(Boolean).join(" ")||void 0,"aria-describedby":r,"aria-required":B?"true":void 0,"aria-invalid":g?"true":void 0,onKeyDown:je,onMouseDown:f||_?null:Pe,onBlur:ue,onFocus:O,...W,ownerState:Ot,className:st(W.className,Ct.select,l),id:ft,children:y8e(He)?BF||(BF=S.jsx("span",{className:"notranslate","aria-hidden":!0,children:"​"})):He}),S.jsx(x8e,{"aria-invalid":g,value:Array.isArray(X)?X.join(","):X,name:k,ref:ye,"aria-hidden":!0,onChange:Be,tabIndex:-1,disabled:f,className:Ct.nativeInput,autoFocus:o,required:B,...J,ownerState:Ot}),S.jsx(g8e,{as:x,className:Ct.icon,ownerState:Ot}),S.jsx(ZBe,{id:`menu-${k||""}`,anchorEl:ke,open:Se,onClose:Ve,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},...C,slotProps:{...C.slotProps,list:{"aria-labelledby":w,role:"listbox","aria-multiselectable":N?"true":void 0,disableListWrap:!0,id:Bt,...C.MenuListProps},paper:{...cn,style:{minWidth:Ln,...cn!=null?cn.style:null}}},children:Xt})]})}),v8e=t=>{const{classes:e}=t,r=vt({root:["root"]},VU,e);return{...e,...r}},KD={name:"MuiSelect",slot:"Root",shouldForwardProp:t=>da(t)&&t!=="variant"},C8e=De(GD,KD)(""),S8e=De(XD,KD)(""),N8e=De(HD,KD)(""),bw=A.forwardRef(function(e,n){const r=qt({name:"MuiSelect",props:e}),{autoWidth:s=!1,children:o,classes:i={},className:a,defaultOpen:l=!1,displayEmpty:c=!1,IconComponent:d=Y5e,id:f,input:p,inputProps:g,label:x,labelId:b,MenuProps:w,multiple:C=!1,native:N=!1,onClose:k,onOpen:I,open:R,renderValue:$,SelectDisplayProps:O,variant:F="outlined",...M}=r,_=N?i8e:w8e,V=wc(),B=Xp({props:r,muiFormControl:V,states:["variant","error"]}),W=B.variant||F,q={...r,variant:W,classes:i},j=v8e(q),{root:G,...Z}=j,J=p||{standard:S.jsx(C8e,{ownerState:q}),outlined:S.jsx(S8e,{label:x,ownerState:q}),filled:S.jsx(N8e,{ownerState:q})}[W],X=wn(n,ox(J));return S.jsx(A.Fragment,{children:A.cloneElement(J,{inputComponent:_,inputProps:{children:o,error:B.error,IconComponent:d,variant:W,type:void 0,multiple:C,...N?{id:f}:{autoWidth:s,defaultOpen:l,displayEmpty:c,labelId:b,MenuProps:w,onClose:k,onOpen:I,open:R,renderValue:$,SelectDisplayProps:{id:f,...O}},...g,classes:g?oo(Z,g.classes):Z,...p?p.props.inputProps:{}},...(C&&N||c)&&W==="outlined"?{notched:!0}:{},ref:X,className:st(J.props.className,a,j.root),...!p&&{variant:W},...M})})});bw.muiName="Select";const WU=A.createContext();function E8e(t){return Nt("MuiTable",t)}gt("MuiTable",["root","stickyHeader"]);const I8e=t=>{const{classes:e,stickyHeader:n}=t;return vt({root:["root",n&&"stickyHeader"]},E8e,e)},k8e=De("table",{name:"MuiTable",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.stickyHeader&&e.stickyHeader]}})(bn(({theme:t})=>({display:"table",width:"100%",borderCollapse:"collapse",borderSpacing:0,"& caption":{...t.typography.body2,padding:t.spacing(2),color:(t.vars||t).palette.text.secondary,textAlign:"left",captionSide:"bottom"},variants:[{props:({ownerState:e})=>e.stickyHeader,style:{borderCollapse:"separate"}}]}))),zF="table",T8e=A.forwardRef(function(e,n){const r=qt({props:e,name:"MuiTable"}),{className:s,component:o=zF,padding:i="normal",size:a="medium",stickyHeader:l=!1,...c}=r,d={...r,component:o,padding:i,size:a,stickyHeader:l},f=I8e(d),p=A.useMemo(()=>({padding:i,size:a,stickyHeader:l}),[i,a,l]);return S.jsx(WU.Provider,{value:p,children:S.jsx(k8e,{as:o,role:o===zF?null:"table",ref:n,className:st(f.root,s),ownerState:d,...c})})}),PC=A.createContext();function A8e(t){return Nt("MuiTableBody",t)}gt("MuiTableBody",["root"]);const R8e=t=>{const{classes:e}=t;return vt({root:["root"]},A8e,e)},D8e=De("tbody",{name:"MuiTableBody",slot:"Root"})({display:"table-row-group"}),$8e={variant:"body"},VF="tbody",O8e=A.forwardRef(function(e,n){const r=qt({props:e,name:"MuiTableBody"}),{className:s,component:o=VF,...i}=r,a={...r,component:o},l=R8e(a);return S.jsx(PC.Provider,{value:$8e,children:S.jsx(D8e,{className:st(l.root,s),as:o,ref:n,role:o===VF?null:"rowgroup",ownerState:a,...i})})});function _8e(t){return Nt("MuiTableCell",t)}const P8e=gt("MuiTableCell",["root","head","body","footer","sizeSmall","sizeMedium","paddingCheckbox","paddingNone","alignLeft","alignCenter","alignRight","alignJustify","stickyHeader"]),F8e=t=>{const{classes:e,variant:n,align:r,padding:s,size:o,stickyHeader:i}=t,a={root:["root",n,i&&"stickyHeader",r!=="inherit"&&`align${Qe(r)}`,s!=="normal"&&`padding${Qe(s)}`,`size${Qe(o)}`]};return vt(a,_8e,e)},M8e=De("td",{name:"MuiTableCell",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[n.variant],e[`size${Qe(n.size)}`],n.padding!=="normal"&&e[`padding${Qe(n.padding)}`],n.align!=="inherit"&&e[`align${Qe(n.align)}`],n.stickyHeader&&e.stickyHeader]}})(bn(({theme:t})=>({...t.typography.body2,display:"table-cell",verticalAlign:"inherit",borderBottom:t.vars?`1px solid ${t.vars.palette.TableCell.border}`:`1px solid
    ${t.palette.mode==="light"?ap(pn(t.palette.divider,1),.88):ip(pn(t.palette.divider,1),.68)}`,textAlign:"left",padding:16,variants:[{props:{variant:"head"},style:{color:(t.vars||t).palette.text.primary,lineHeight:t.typography.pxToRem(24),fontWeight:t.typography.fontWeightMedium}},{props:{variant:"body"},style:{color:(t.vars||t).palette.text.primary}},{props:{variant:"footer"},style:{color:(t.vars||t).palette.text.secondary,lineHeight:t.typography.pxToRem(21),fontSize:t.typography.pxToRem(12)}},{props:{size:"small"},style:{padding:"6px 16px",[`&.${P8e.paddingCheckbox}`]:{width:24,padding:"0 12px 0 16px","& > *":{padding:0}}}},{props:{padding:"checkbox"},style:{width:48,padding:"0 0 0 4px"}},{props:{padding:"none"},style:{padding:0}},{props:{align:"left"},style:{textAlign:"left"}},{props:{align:"center"},style:{textAlign:"center"}},{props:{align:"right"},style:{textAlign:"right",flexDirection:"row-reverse"}},{props:{align:"justify"},style:{textAlign:"justify"}},{props:({ownerState:e})=>e.stickyHeader,style:{position:"sticky",top:0,zIndex:2,backgroundColor:(t.vars||t).palette.background.default}}]}))),Ju=A.forwardRef(function(e,n){const r=qt({props:e,name:"MuiTableCell"}),{align:s="inherit",className:o,component:i,padding:a,scope:l,size:c,sortDirection:d,variant:f,...p}=r,g=A.useContext(WU),x=A.useContext(PC),b=x&&x.variant==="head";let w;i?w=i:w=b?"th":"td";let C=l;w==="td"?C=void 0:!C&&b&&(C="col");const N=f||x&&x.variant,k={...r,align:s,component:w,padding:a||(g&&g.padding?g.padding:"normal"),size:c||(g&&g.size?g.size:"medium"),sortDirection:d,stickyHeader:N==="head"&&g&&g.stickyHeader,variant:N},I=F8e(k);let R=null;return d&&(R=d==="asc"?"ascending":"descending"),S.jsx(M8e,{as:w,ref:n,className:st(I.root,o),"aria-sort":R,scope:C,ownerState:k,...p})});function L8e(t){return Nt("MuiTableContainer",t)}gt("MuiTableContainer",["root"]);const B8e=t=>{const{classes:e}=t;return vt({root:["root"]},L8e,e)},j8e=De("div",{name:"MuiTableContainer",slot:"Root"})({width:"100%",overflowX:"auto"}),z8e=A.forwardRef(function(e,n){const r=qt({props:e,name:"MuiTableContainer"}),{className:s,component:o="div",...i}=r,a={...r,component:o},l=B8e(a);return S.jsx(j8e,{ref:n,as:o,className:st(l.root,s),ownerState:a,...i})});function V8e(t){return Nt("MuiTableHead",t)}gt("MuiTableHead",["root"]);const W8e=t=>{const{classes:e}=t;return vt({root:["root"]},V8e,e)},U8e=De("thead",{name:"MuiTableHead",slot:"Root"})({display:"table-header-group"}),H8e={variant:"head"},WF="thead",G8e=A.forwardRef(function(e,n){const r=qt({props:e,name:"MuiTableHead"}),{className:s,component:o=WF,...i}=r,a={...r,component:o},l=W8e(a);return S.jsx(PC.Provider,{value:H8e,children:S.jsx(U8e,{as:o,className:st(l.root,s),ref:n,role:o===WF?null:"rowgroup",ownerState:a,...i})})});function q8e(t){return Nt("MuiTableRow",t)}const UF=gt("MuiTableRow",["root","selected","hover","head","footer"]),X8e=t=>{const{classes:e,selected:n,hover:r,head:s,footer:o}=t;return vt({root:["root",n&&"selected",r&&"hover",s&&"head",o&&"footer"]},q8e,e)},K8e=De("tr",{name:"MuiTableRow",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.head&&e.head,n.footer&&e.footer]}})(bn(({theme:t})=>({color:"inherit",display:"table-row",verticalAlign:"middle",outline:0,[`&.${UF.hover}:hover`]:{backgroundColor:(t.vars||t).palette.action.hover},[`&.${UF.selected}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.selectedOpacity})`:pn(t.palette.primary.main,t.palette.action.selectedOpacity),"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.hoverOpacity}))`:pn(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity)}}}))),HF="tr",CN=A.forwardRef(function(e,n){const r=qt({props:e,name:"MuiTableRow"}),{className:s,component:o=HF,hover:i=!1,selected:a=!1,...l}=r,c=A.useContext(PC),d={...r,component:o,hover:i,selected:a,head:c&&c.variant==="head",footer:c&&c.variant==="footer"},f=X8e(d);return S.jsx(K8e,{as:o,ref:n,className:st(f.root,s),role:o===HF?null:"row",ownerState:d,...l})});function Y8e(t){return Nt("MuiTextField",t)}gt("MuiTextField",["root"]);const Z8e={standard:GD,filled:HD,outlined:XD},Q8e=t=>{const{classes:e}=t;return vt({root:["root"]},Y8e,e)},J8e=De(gw,{name:"MuiTextField",slot:"Root"})({}),sk=A.forwardRef(function(e,n){const r=qt({props:e,name:"MuiTextField"}),{autoComplete:s,autoFocus:o=!1,children:i,className:a,color:l="primary",defaultValue:c,disabled:d=!1,error:f=!1,FormHelperTextProps:p,fullWidth:g=!1,helperText:x,id:b,InputLabelProps:w,inputProps:C,InputProps:N,inputRef:k,label:I,maxRows:R,minRows:$,multiline:O=!1,name:F,onBlur:M,onChange:_,onFocus:V,placeholder:B,required:W=!1,rows:q,select:j=!1,SelectProps:G,slots:Z={},slotProps:J={},type:X,value:ee,variant:ne="outlined",...oe}=r,ye={...r,autoFocus:o,color:l,disabled:d,error:f,fullWidth:g,multiline:O,required:W,select:j,variant:ne},ge=Q8e(ye),ve=bc(b),he=x&&ve?`${ve}-helper-text`:void 0,Me=I&&ve?`${ve}-label`:void 0,ze=Z8e[ne],Oe={slots:Z,slotProps:{input:N,inputLabel:w,htmlInput:C,formHelperText:p,select:G,...J}},Ie={},me=Oe.slotProps.inputLabel;ne==="outlined"&&(me&&typeof me.shrink<"u"&&(Ie.notched=me.shrink),Ie.label=I),j&&((!G||!G.native)&&(Ie.id=void 0),Ie["aria-describedby"]=void 0);const[ke,pe]=Hn("root",{elementType:J8e,shouldForwardComponentProp:!0,externalForwardedProps:{...Oe,...oe},ownerState:ye,className:st(ge.root,a),ref:n,additionalProps:{disabled:d,error:f,fullWidth:g,required:W,color:l,variant:ne}}),[Pe,Ve]=Hn("input",{elementType:ze,externalForwardedProps:Oe,additionalProps:Ie,ownerState:ye}),[Fe,Be]=Hn("inputLabel",{elementType:yw,externalForwardedProps:Oe,ownerState:ye}),[be,je]=Hn("htmlInput",{elementType:"input",externalForwardedProps:Oe,ownerState:ye}),[Se,ue]=Hn("formHelperText",{elementType:PU,externalForwardedProps:Oe,ownerState:ye}),[He,It]=Hn("select",{elementType:bw,externalForwardedProps:Oe,ownerState:ye}),ot=S.jsx(Pe,{"aria-describedby":he,autoComplete:s,autoFocus:o,defaultValue:c,fullWidth:g,multiline:O,name:F,rows:q,maxRows:R,minRows:$,type:X,value:ee,id:ve,inputRef:k,onBlur:M,onChange:_,onFocus:V,placeholder:B,inputProps:je,slots:{input:Z.htmlInput?be:void 0},...Ve});return S.jsxs(ke,{...pe,children:[I!=null&&I!==""&&S.jsx(Fe,{htmlFor:ve,id:Me,...Be,children:I}),j?S.jsx(He,{"aria-describedby":he,id:ve,labelId:Me,value:ee,input:ot,...It,children:i}):ot,x&&S.jsx(Se,{id:he,...ue,children:x})]})}),UU=nU({themeId:Hp}),$m=(t,e)=>t.length!==e.length?!1:e.every(n=>t.includes(n)),eje=({openTo:t,defaultOpenTo:e,views:n,defaultViews:r})=>{const s=n??r;let o;if(t!=null)o=t;else if(s.includes(e))o=e;else if(s.length>0)o=s[0];else throw new Error("MUI X: The `views` prop must contain at least one view.");return{views:s,openTo:o}},ww=(t,e,n)=>{let r=e;return r=t.setHours(r,t.getHours(n)),r=t.setMinutes(r,t.getMinutes(n)),r=t.setSeconds(r,t.getSeconds(n)),r=t.setMilliseconds(r,t.getMilliseconds(n)),r},m0=({date:t,disableFuture:e,disablePast:n,maxDate:r,minDate:s,isDateDisabled:o,utils:i,timezone:a})=>{const l=ww(i,i.date(void 0,a),t);n&&i.isBefore(s,l)&&(s=l),e&&i.isAfter(r,l)&&(r=l);let c=t,d=t;for(i.isBefore(t,s)&&(c=s,d=null),i.isAfter(t,r)&&(d&&(d=r),c=null);c||d;){if(c&&i.isAfter(c,r)&&(c=null),d&&i.isBefore(d,s)&&(d=null),c){if(!o(c))return c;c=i.addDays(c,1)}if(d){if(!o(d))return d;d=i.addDays(d,-1)}}return null},tje=(t,e)=>t.isValid(e)?e:null,GF=(t,e,n)=>e==null||!t.isValid(e)?n:e,nje=(t,e,n)=>!t.isValid(e)&&e!=null&&!t.isValid(n)&&n!=null?!0:t.isEqual(e,n),YD=(t,e)=>{const r=[t.startOfYear(e)];for(;r.length<12;){const s=r[r.length-1];r.push(t.addMonths(s,1))}return r},HU=(t,e,n)=>n==="date"?t.startOfDay(t.date(void 0,e)):t.date(void 0,e),rje=["year","month","day"],qF=t=>rje.includes(t),ZD=(t,{format:e,views:n},r)=>{if(e!=null)return e;const s=t.formats;return $m(n,["year"])?s.year:$m(n,["month"])?s.month:$m(n,["day"])?s.dayOfMonth:$m(n,["month","year"])?`${s.month} ${s.year}`:$m(n,["day","month"])?`${s.month} ${s.dayOfMonth}`:r?/en/.test(t.getCurrentLocaleCode())?s.normalDateWithWeekday:s.normalDate:s.keyboardDate},sje=(t,e)=>{const n=t.startOfWeek(e);return[0,1,2,3,4,5,6].map(r=>t.addDays(n,r))},oje=["hours","minutes","seconds"],ije=t=>oje.includes(t),XF=(t,e)=>e.getHours(t)*3600+e.getMinutes(t)*60+e.getSeconds(t),aje=(t,e)=>(n,r)=>t?e.isAfter(n,r):XF(n,e)>XF(r,e),al={year:1,month:2,day:3,hours:4,minutes:5,seconds:6,milliseconds:7},lje=t=>Math.max(...t.map(e=>al[e.type]??1)),Om=(t,e,n)=>{if(e===al.year)return t.startOfYear(n);if(e===al.month)return t.startOfMonth(n);if(e===al.day)return t.startOfDay(n);let r=n;return e<al.minutes&&(r=t.setMinutes(r,0)),e<al.seconds&&(r=t.setSeconds(r,0)),e<al.milliseconds&&(r=t.setMilliseconds(r,0)),r},cje=({props:t,utils:e,granularity:n,timezone:r,getTodayDate:s})=>{let o=s?s():Om(e,n,HU(e,r));t.minDate!=null&&e.isAfterDay(t.minDate,o)&&(o=Om(e,n,t.minDate)),t.maxDate!=null&&e.isBeforeDay(t.maxDate,o)&&(o=Om(e,n,t.maxDate));const i=aje(t.disableIgnoringDatePartForTimeValidation??!1,e);return t.minTime!=null&&i(t.minTime,o)&&(o=Om(e,n,t.disableIgnoringDatePartForTimeValidation?t.minTime:ww(e,o,t.minTime))),t.maxTime!=null&&i(o,t.maxTime)&&(o=Om(e,n,t.disableIgnoringDatePartForTimeValidation?t.maxTime:ww(e,o,t.maxTime))),o},GU=(t,e)=>{const n=t.formatTokenMap[e];if(n==null)throw new Error([`MUI X: The token "${e}" is not supported by the Date and Time Pickers.`,"Please try using another token or open an issue on https://github.com/mui/mui-x/issues/new/choose if you think it should be supported."].join(`
`));return typeof n=="string"?{type:n,contentType:n==="meridiem"?"letter":"digit",maxLength:void 0}:{type:n.sectionType,contentType:n.contentType,maxLength:n.maxLength}},FC=(t,e)=>{const n=[],r=t.date(void 0,"default"),s=t.startOfWeek(r),o=t.endOfWeek(r);let i=s;for(;t.isBefore(i,o);)n.push(i),i=t.addDays(i,1);return n.map(a=>t.formatByString(a,e))},qU=(t,e,n,r)=>{switch(n){case"month":return YD(t,t.date(void 0,e)).map(s=>t.formatByString(s,r));case"weekDay":return FC(t,r);case"meridiem":{const s=t.date(void 0,e);return[t.startOfDay(s),t.endOfDay(s)].map(o=>t.formatByString(o,r))}default:return[]}},KF="s",uje=["0","1","2","3","4","5","6","7","8","9"],dje=t=>{const e=t.date(void 0);return t.formatByString(t.setSeconds(e,0),KF)==="0"?uje:Array.from({length:10}).map((r,s)=>t.formatByString(t.setSeconds(e,s),KF))},nf=(t,e)=>{if(e[0]==="0")return t;const n=[];let r="";for(let s=0;s<t.length;s+=1){r+=t[s];const o=e.indexOf(r);o>-1&&(n.push(o.toString()),r="")}return n.join("")},QD=(t,e)=>e[0]==="0"?t:t.split("").map(n=>e[Number(n)]).join(""),YF=(t,e)=>{const n=nf(t,e);return n!==" "&&!Number.isNaN(Number(n))},JD=(t,e)=>Number(t).toString().padStart(e,"0"),XU=(t,e,n,r,s)=>{if(s.type==="day"&&s.contentType==="digit-with-letter"){const i=t.setDate(n.longestMonth,e);return t.formatByString(i,s.format)}let o=e.toString();return s.hasLeadingZerosInInput&&(o=JD(o,s.maxLength)),QD(o,r)},e$=(t,e,n)=>{let r=t.value||t.placeholder;const s=e==="non-input"?t.hasLeadingZerosInFormat:t.hasLeadingZerosInInput;return e==="non-input"&&t.hasLeadingZerosInInput&&!t.hasLeadingZerosInFormat&&(r=Number(nf(r,n)).toString()),["input-rtl","input-ltr"].includes(e)&&t.contentType==="digit"&&!s&&r.length===1&&(r=`${r}‎`),e==="input-rtl"&&(r=`⁨${r}⁩`),r},ZF=(t,e,n,r)=>t.formatByString(t.parse(e,n),r),fje=(t,e)=>t.formatByString(t.date(void 0,"system"),e).length===4,KU=(t,e,n,r)=>{if(e!=="digit")return!1;const s=t.date(void 0,"default");switch(n){case"year":return t.lib==="dayjs"&&r==="YY"?!0:t.formatByString(t.setYear(s,1),r).startsWith("0");case"month":return t.formatByString(t.startOfYear(s),r).length>1;case"day":return t.formatByString(t.startOfMonth(s),r).length>1;case"weekDay":return t.formatByString(t.startOfWeek(s),r).length>1;case"hours":return t.formatByString(t.setHours(s,1),r).length>1;case"minutes":return t.formatByString(t.setMinutes(s,1),r).length>1;case"seconds":return t.formatByString(t.setSeconds(s,1),r).length>1;default:throw new Error("Invalid section type")}},hje=(t,e,n)=>{const r=e.some(l=>l.type==="day"),s=[],o=[];for(let l=0;l<e.length;l+=1){const c=e[l];r&&c.type==="weekDay"||(s.push(c.format),o.push(e$(c,"non-input",n)))}const i=s.join(" "),a=o.join(" ");return t.parse(a,i)},pje=t=>t.map(e=>`${e.startSeparator}${e.value||e.placeholder}${e.endSeparator}`).join(""),mje=(t,e,n)=>{const s=t.map(o=>{const i=e$(o,n?"input-rtl":"input-ltr",e);return`${o.startSeparator}${i}${o.endSeparator}`}).join("");return n?`⁦${s}⁩`:s},gje=(t,e,n)=>{const r=t.date(void 0,n),s=t.endOfYear(r),o=t.endOfDay(r),{maxDaysInMonth:i,longestMonth:a}=YD(t,r).reduce((l,c)=>{const d=t.getDaysInMonth(c);return d>l.maxDaysInMonth?{maxDaysInMonth:d,longestMonth:c}:l},{maxDaysInMonth:0,longestMonth:null});return{year:({format:l})=>({minimum:0,maximum:fje(t,l)?9999:99}),month:()=>({minimum:1,maximum:t.getMonth(s)+1}),day:({currentDate:l})=>({minimum:1,maximum:t.isValid(l)?t.getDaysInMonth(l):i,longestMonth:a}),weekDay:({format:l,contentType:c})=>{if(c==="digit"){const d=FC(t,l).map(Number);return{minimum:Math.min(...d),maximum:Math.max(...d)}}return{minimum:1,maximum:7}},hours:({format:l})=>{const c=t.getHours(o);return nf(t.formatByString(t.endOfDay(r),l),e)!==c.toString()?{minimum:1,maximum:Number(nf(t.formatByString(t.startOfDay(r),l),e))}:{minimum:0,maximum:c}},minutes:()=>({minimum:0,maximum:t.getMinutes(o)}),seconds:()=>({minimum:0,maximum:t.getSeconds(o)}),meridiem:()=>({minimum:0,maximum:1}),empty:()=>({minimum:0,maximum:0})}},xje=(t,e,n,r)=>{switch(e.type){case"year":return t.setYear(r,t.getYear(n));case"month":return t.setMonth(r,t.getMonth(n));case"weekDay":{let s=t.formatByString(n,e.format);e.hasLeadingZerosInInput&&(s=JD(s,e.maxLength));const o=FC(t,e.format),i=o.indexOf(s),l=o.indexOf(e.value)-i;return t.addDays(n,l)}case"day":return t.setDate(r,t.getDate(n));case"meridiem":{const s=t.getHours(n)<12,o=t.getHours(r);return s&&o>=12?t.addHours(r,-12):!s&&o<12?t.addHours(r,12):r}case"hours":return t.setHours(r,t.getHours(n));case"minutes":return t.setMinutes(r,t.getMinutes(n));case"seconds":return t.setSeconds(r,t.getSeconds(n));default:return r}},QF={year:1,month:2,day:3,weekDay:4,hours:5,minutes:6,seconds:7,meridiem:8,empty:9},JF=(t,e,n,r,s)=>[...n].sort((o,i)=>QF[o.type]-QF[i.type]).reduce((o,i)=>!s||i.modified?xje(t,i,e,o):o,r),yje=()=>navigator.userAgent.toLowerCase().includes("android"),bje=(t,e)=>{const n={};if(!e)return t.forEach((l,c)=>{const d=c===0?null:c-1,f=c===t.length-1?null:c+1;n[c]={leftIndex:d,rightIndex:f}}),{neighbors:n,startIndex:0,endIndex:t.length-1};const r={},s={};let o=0,i=0,a=t.length-1;for(;a>=0;){i=t.findIndex((l,c)=>{var d;return c>=o&&((d=l.endSeparator)==null?void 0:d.includes(" "))&&l.endSeparator!==" / "}),i===-1&&(i=t.length-1);for(let l=i;l>=o;l-=1)s[l]=a,r[a]=l,a-=1;o=i+1}return t.forEach((l,c)=>{const d=s[c],f=d===0?null:r[d-1],p=d===t.length-1?null:r[d+1];n[c]={leftIndex:f,rightIndex:p}}),{neighbors:n,startIndex:r[0],endIndex:r[t.length-1]}},ok=(t,e)=>{if(t==null)return null;if(t==="all")return"all";if(typeof t=="string"){const n=e.findIndex(r=>r.type===t);return n===-1?null:n}return t},wje=["value","referenceDate"],Al={emptyValue:null,getTodayValue:HU,getInitialReferenceValue:t=>{let{value:e,referenceDate:n}=t,r=Lt(t,wje);return r.utils.isValid(e)?e:n??cje(r)},cleanValue:tje,areValuesEqual:nje,isSameError:(t,e)=>t===e,hasError:t=>t!=null,defaultErrorState:null,getTimezone:(t,e)=>t.isValid(e)?t.getTimezone(e):null,setTimezone:(t,e,n)=>n==null?null:t.setTimezone(n,e)},vje={updateReferenceValue:(t,e,n)=>t.isValid(e)?e:n,getSectionsFromValue:(t,e)=>e(t),getV7HiddenInputValueFromSections:pje,getV6InputValueFromSections:mje,parseValueStr:(t,e,n)=>n(t.trim(),e),getDateFromSection:t=>t,getDateSectionsFromValue:t=>t,updateDateInValue:(t,e,n)=>n,clearDateSections:t=>t.map(e=>xe({},e,{value:""}))};function Cje(t){return Nt("MuiPickersToolbar",t)}gt("MuiPickersToolbar",["root","title","content"]);const Sje=["localeText"],ik=A.createContext(null),t$=function(e){const{localeText:n}=e,r=Lt(e,Sje),{utils:s,localeText:o}=A.useContext(ik)??{utils:void 0,localeText:void 0},i=vr({props:r,name:"MuiLocalizationProvider"}),{children:a,dateAdapter:l,dateFormats:c,dateLibInstance:d,adapterLocale:f,localeText:p}=i,g=A.useMemo(()=>xe({},p,o,n),[p,o,n]),x=A.useMemo(()=>{if(!l)return s||null;const C=new l({locale:f,formats:c,instance:d});if(!C.isMUIAdapter)throw new Error(["MUI X: The date adapter should be imported from `@mui/x-date-pickers` or `@mui/x-date-pickers-pro`, not from `@date-io`","For example, `import { AdapterDayjs } from '@mui/x-date-pickers/AdapterDayjs'` instead of `import AdapterDayjs from '@date-io/dayjs'`","More information on the installation documentation: https://mui.com/x/react-date-pickers/quickstart/#installation"].join(`
`));return C},[l,f,c,d,s]),b=A.useMemo(()=>x?{minDate:x.date("1900-01-01T00:00:00.000"),maxDate:x.date("2099-12-31T00:00:00.000")}:null,[x]),w=A.useMemo(()=>({utils:x,defaultDates:b,localeText:g}),[b,x,g]);return S.jsx(ik.Provider,{value:w,children:a})},YU=A.createContext(()=>!0);function Nje(){return A.useContext(YU)}const ZU=A.createContext(null);function QU(){return A.useContext(ZU)}const n$=A.createContext(null),Kp=()=>{const t=A.useContext(n$);if(t==null)throw new Error("MUI X: The `usePickerContext` hook can only be called inside the context of a Picker component");return t},JU=A.createContext(null),eH=A.createContext({ownerState:{isPickerDisabled:!1,isPickerReadOnly:!1,isPickerValueEmpty:!1,isPickerOpen:!1,pickerVariant:"desktop",pickerOrientation:"portrait"},rootRefObject:{current:null},labelId:void 0,dismissViews:()=>{},hasUIView:!0,getCurrentViewMode:()=>"UI",triggerElement:null,viewContainerRole:null,defaultActionBarActions:[],onPopperExited:void 0});function tH(t){const{contextValue:e,actionsContextValue:n,privateContextValue:r,fieldPrivateContextValue:s,isValidContextValue:o,localeText:i,children:a}=t;return S.jsx(n$.Provider,{value:e,children:S.jsx(JU.Provider,{value:n,children:S.jsx(eH.Provider,{value:r,children:S.jsx(ZU.Provider,{value:s,children:S.jsx(YU.Provider,{value:o,children:S.jsx(t$,{localeText:i,children:a})})})})})})}const Ws=()=>A.useContext(eH);function nH(){const{ownerState:t}=Ws(),e=Wa();return A.useMemo(()=>xe({},t,{toolbarDirection:e?"rtl":"ltr"}),[t,e])}const Eje=["children","className","classes","toolbarTitle","hidden","titleId","classes","landscapeDirection"],Ije=t=>vt({root:["root"],title:["title"],content:["content"]},Cje,t),kje=De("div",{name:"MuiPickersToolbar",slot:"Root"})(({theme:t})=>({display:"flex",flexDirection:"column",alignItems:"flex-start",justifyContent:"space-between",padding:t.spacing(2,3),variants:[{props:{pickerOrientation:"landscape"},style:{height:"auto",maxWidth:160,padding:16,justifyContent:"flex-start",flexWrap:"wrap"}}]})),Tje=De("div",{name:"MuiPickersToolbar",slot:"Content",shouldForwardProp:t=>vl(t)&&t!=="landscapeDirection"})({display:"flex",flexWrap:"wrap",width:"100%",flex:1,justifyContent:"space-between",alignItems:"center",flexDirection:"row",variants:[{props:{pickerOrientation:"landscape"},style:{justifyContent:"flex-start",alignItems:"flex-start",flexDirection:"column"}},{props:{pickerOrientation:"landscape",landscapeDirection:"row"},style:{flexDirection:"row"}}]}),Aje=A.forwardRef(function(e,n){const r=vr({props:e,name:"MuiPickersToolbar"}),{children:s,className:o,classes:i,toolbarTitle:a,hidden:l,titleId:c,landscapeDirection:d}=r,f=Lt(r,Eje),p=nH(),g=Ije(i);return l?null:S.jsxs(kje,xe({ref:n,className:st(g.root,o),ownerState:p},f,{children:[S.jsx(kl,{color:"text.secondary",variant:"overline",id:c,className:g.title,children:a}),S.jsx(Tje,{className:g.content,ownerState:p,landscapeDirection:d,children:s})]}))}),Rje=t=>({components:{MuiLocalizationProvider:{defaultProps:{localeText:xe({},t)}}}}),rH={previousMonth:"Previous month",nextMonth:"Next month",openPreviousView:"Open previous view",openNextView:"Open next view",calendarViewSwitchingButtonAriaLabel:t=>t==="year"?"year view is open, switch to calendar view":"calendar view is open, switch to year view",start:"Start",end:"End",startDate:"Start date",startTime:"Start time",endDate:"End date",endTime:"End time",cancelButtonLabel:"Cancel",clearButtonLabel:"Clear",okButtonLabel:"OK",todayButtonLabel:"Today",nextStepButtonLabel:"Next",datePickerToolbarTitle:"Select date",dateTimePickerToolbarTitle:"Select date & time",timePickerToolbarTitle:"Select time",dateRangePickerToolbarTitle:"Select date range",timeRangePickerToolbarTitle:"Select time range",clockLabelText:(t,e)=>`Select ${t}. ${e?`Selected time is ${e}`:"No time selected"}`,hoursClockNumberText:t=>`${t} hours`,minutesClockNumberText:t=>`${t} minutes`,secondsClockNumberText:t=>`${t} seconds`,selectViewText:t=>`Select ${t}`,calendarWeekNumberHeaderLabel:"Week number",calendarWeekNumberHeaderText:"#",calendarWeekNumberAriaLabelText:t=>`Week ${t}`,calendarWeekNumberText:t=>`${t}`,openDatePickerDialogue:t=>t?`Choose date, selected date is ${t}`:"Choose date",openTimePickerDialogue:t=>t?`Choose time, selected time is ${t}`:"Choose time",openRangePickerDialogue:t=>t?`Choose range, selected range is ${t}`:"Choose range",fieldClearLabel:"Clear",timeTableLabel:"pick time",dateTableLabel:"pick date",fieldYearPlaceholder:t=>"Y".repeat(t.digitAmount),fieldMonthPlaceholder:t=>t.contentType==="letter"?"MMMM":"MM",fieldDayPlaceholder:()=>"DD",fieldWeekDayPlaceholder:t=>t.contentType==="letter"?"EEEE":"EE",fieldHoursPlaceholder:()=>"hh",fieldMinutesPlaceholder:()=>"mm",fieldSecondsPlaceholder:()=>"ss",fieldMeridiemPlaceholder:()=>"aa",year:"Year",month:"Month",day:"Day",weekDay:"Week day",hours:"Hours",minutes:"Minutes",seconds:"Seconds",meridiem:"Meridiem",empty:"Empty"},Dje=rH;Rje(rH);const Nf=()=>{const t=A.useContext(ik);if(t===null)throw new Error(["MUI X: Can not find the date and time pickers localization context.","It looks like you forgot to wrap your component in LocalizationProvider.","This can also happen if you are bundling multiple versions of the `@mui/x-date-pickers` package"].join(`
`));if(t.utils===null)throw new Error(["MUI X: Can not find the date and time pickers adapter from its localization context.","It looks like you forgot to pass a `dateAdapter` to your LocalizationProvider."].join(`
`));const e=A.useMemo(()=>xe({},Dje,t.localeText),[t.localeText]);return A.useMemo(()=>xe({},t,{localeText:e}),[t,e])},ir=()=>Nf().utils,$je=()=>Nf().defaultDates,MC=t=>{const e=ir(),n=A.useRef(void 0);return n.current===void 0&&(n.current=e.date(void 0,t)),n.current},Vu=()=>Nf().localeText;function Oje(t){return Nt("MuiDatePickerToolbar",t)}gt("MuiDatePickerToolbar",["root","title"]);const ak=["disablePast","disableFuture","minDate","maxDate","shouldDisableDate","shouldDisableMonth","shouldDisableYear"],lk=["disablePast","disableFuture","minTime","maxTime","shouldDisableTime","minutesStep","ampm","disableIgnoringDatePartForTimeValidation"],sH=["minDateTime","maxDateTime"],_je=[...ak,...lk,...sH],oH=t=>_je.reduce((e,n)=>(t.hasOwnProperty(n)&&(e[n]=t[n]),e),{}),Pje=["value","defaultValue","referenceDate","format","formatDensity","onChange","timezone","onError","shouldRespectLeadingZeros","selectedSections","onSelectedSectionsChange","unstableFieldRef","unstableStartFieldRef","unstableEndFieldRef","enableAccessibleFieldDOMStructure","disabled","readOnly","dateSeparator","autoFocus","focused"],iH=(t,e)=>A.useMemo(()=>{const n=xe({},t),r={},s=o=>{n.hasOwnProperty(o)&&(r[o]=n[o],delete n[o])};return Pje.forEach(s),e==="date"?ak.forEach(s):e==="time"?lk.forEach(s):e==="date-time"&&(ak.forEach(s),lk.forEach(s),sH.forEach(s)),{forwardedProps:n,internalProps:r}},[t,e]),Fje=({utils:t,format:e})=>{let n=10,r=e,s=t.expandFormat(e);for(;s!==r;)if(r=s,s=t.expandFormat(r),n-=1,n<0)throw new Error("MUI X: The format expansion seems to be in an infinite loop. Please open an issue with the format passed to the component.");return s},Mje=({utils:t,expandedFormat:e})=>{const n=[],{start:r,end:s}=t.escapedCharacters,o=new RegExp(`(\\${r}[^\\${s}]*\\${s})+`,"g");let i=null;for(;i=o.exec(e);)n.push({start:i.index,end:o.lastIndex-1});return n},Lje=(t,e,n,r)=>{switch(n.type){case"year":return e.fieldYearPlaceholder({digitAmount:t.formatByString(t.date(void 0,"default"),r).length,format:r});case"month":return e.fieldMonthPlaceholder({contentType:n.contentType,format:r});case"day":return e.fieldDayPlaceholder({format:r});case"weekDay":return e.fieldWeekDayPlaceholder({contentType:n.contentType,format:r});case"hours":return e.fieldHoursPlaceholder({format:r});case"minutes":return e.fieldMinutesPlaceholder({format:r});case"seconds":return e.fieldSecondsPlaceholder({format:r});case"meridiem":return e.fieldMeridiemPlaceholder({format:r});default:return r}},Bje=({utils:t,date:e,shouldRespectLeadingZeros:n,localeText:r,localizedDigits:s,now:o,token:i,startSeparator:a})=>{if(i==="")throw new Error("MUI X: Should not call `commitToken` with an empty token");const l=GU(t,i),c=KU(t,l.contentType,l.type,i),d=n?c:l.contentType==="digit",f=t.isValid(e);let p=f?t.formatByString(e,i):"",g=null;if(d)if(c)g=p===""?t.formatByString(o,i).length:p.length;else{if(l.maxLength==null)throw new Error(`MUI X: The token ${i} should have a 'maxLength' property on it's adapter`);g=l.maxLength,f&&(p=QD(JD(nf(p,s),g),s))}return xe({},l,{format:i,maxLength:g,value:p,placeholder:Lje(t,r,l,i),hasLeadingZerosInFormat:c,hasLeadingZerosInInput:d,startSeparator:a,endSeparator:"",modified:!1})},jje=t=>{var g;const{utils:e,expandedFormat:n,escapedParts:r}=t,s=e.date(void 0),o=[];let i="";const a=Object.keys(e.formatTokenMap).sort((x,b)=>b.length-x.length),l=/^([a-zA-Z]+)/,c=new RegExp(`^(${a.join("|")})*$`),d=new RegExp(`^(${a.join("|")})`),f=x=>r.find(b=>b.start<=x&&b.end>=x);let p=0;for(;p<n.length;){const x=f(p),b=x!=null,w=(g=l.exec(n.slice(p)))==null?void 0:g[1];if(!b&&w!=null&&c.test(w)){let C=w;for(;C.length>0;){const N=d.exec(C)[1];C=C.slice(N.length),o.push(Bje(xe({},t,{now:s,token:N,startSeparator:i}))),i=""}p+=w.length}else{const C=n[p];b&&(x==null?void 0:x.start)===p||(x==null?void 0:x.end)===p||(o.length===0?i+=C:(o[o.length-1].endSeparator+=C,o[o.length-1].isEndFormatSeparator=!0)),p+=1}}return o.length===0&&i.length>0&&o.push({type:"empty",contentType:"letter",maxLength:null,format:"",value:"",placeholder:"",hasLeadingZerosInFormat:!1,hasLeadingZerosInInput:!1,startSeparator:i,endSeparator:"",modified:!1}),o},zje=({isRtl:t,formatDensity:e,sections:n})=>n.map(r=>{const s=o=>{let i=o;return t&&i!==null&&i.includes(" ")&&(i=`⁩${i}⁦`),e==="spacious"&&["/",".","-"].includes(i)&&(i=` ${i} `),i};return r.startSeparator=s(r.startSeparator),r.endSeparator=s(r.endSeparator),r}),eM=t=>{let e=Fje(t);t.isRtl&&t.enableAccessibleFieldDOMStructure&&(e=e.split(" ").reverse().join(" "));const n=Mje(xe({},t,{expandedFormat:e})),r=jje(xe({},t,{expandedFormat:e,escapedParts:n}));return zje(xe({},t,{sections:r}))},r$=()=>A.useContext(n$),Vje=()=>{const t=A.useContext(JU);if(t==null)throw new Error(["MUI X: The `usePickerActionsContext` can only be called in fields that are used as a slot of a Picker component"].join(`
`));return t},Wje=["toolbarFormat","toolbarPlaceholder","className","classes"],Uje=t=>vt({root:["root"],title:["title"]},Oje,t),Hje=De(Aje,{name:"MuiDatePickerToolbar",slot:"Root"})({}),Gje=De(kl,{name:"MuiDatePickerToolbar",slot:"Title"})({variants:[{props:{pickerOrientation:"landscape"},style:{margin:"auto 16px auto auto"}}]}),qje=A.forwardRef(function(e,n){const r=vr({props:e,name:"MuiDatePickerToolbar"}),{toolbarFormat:s,toolbarPlaceholder:o="––",className:i,classes:a}=r,l=Lt(r,Wje),c=ir(),{value:d,views:f,orientation:p}=Kp(),g=Vu(),x=nH(),b=Uje(a),w=A.useMemo(()=>{if(!c.isValid(d))return o;const C=ZD(c,{format:s,views:f},!0);return c.formatByString(d,C)},[d,s,o,c,f]);return S.jsx(Hje,xe({ref:n,toolbarTitle:g.datePickerToolbarTitle,className:st(b.root,i)},l,{children:S.jsx(Gje,{variant:"h4",align:p==="landscape"?"left":"center",ownerState:x,className:b.title,children:w})}))}),ix=({props:t,value:e,timezone:n,adapter:r})=>{if(e===null)return null;const{shouldDisableDate:s,shouldDisableMonth:o,shouldDisableYear:i,disablePast:a,disableFuture:l,minDate:c,maxDate:d}=t,f=r.utils.date(void 0,n);switch(!0){case!r.utils.isValid(e):return"invalidDate";case!!(s&&s(e)):return"shouldDisableDate";case!!(o&&o(e)):return"shouldDisableMonth";case!!(i&&i(e)):return"shouldDisableYear";case!!(l&&r.utils.isAfterDay(e,f)):return"disableFuture";case!!(a&&r.utils.isBeforeDay(e,f)):return"disablePast";case!!(c&&r.utils.isBeforeDay(e,c)):return"minDate";case!!(d&&r.utils.isAfterDay(e,d)):return"maxDate";default:return null}};ix.valueManager=Al;function aH(t){const{props:e,validator:n,value:r,timezone:s,onError:o}=t,i=Nf(),a=A.useRef(n.valueManager.defaultErrorState),l=n({adapter:i,value:r,timezone:s,props:e}),c=n.valueManager.hasError(l);A.useEffect(()=>{o&&!n.valueManager.isSameError(l,a.current)&&o(l,r),a.current=l},[n,o,l,r]);const d=at(f=>n({adapter:i,value:f,timezone:s,props:e}));return{validationError:l,hasValidationError:c,getValidationErrorForNewValue:d}}function Xje(t={}){const{enableAccessibleFieldDOMStructure:e=!0}=t;return A.useMemo(()=>({valueType:"date",validator:ix,internal_valueManager:Al,internal_fieldValueManager:vje,internal_enableAccessibleFieldDOMStructure:e,internal_useApplyDefaultValuesToFieldInternalProps:Yje,internal_useOpenPickerButtonAriaLabel:Kje}),[e])}function Kje(t){const e=ir(),n=Vu();return A.useMemo(()=>{const r=e.isValid(t)?e.format(t,"fullDate"):null;return n.openDatePickerDialogue(r)},[t,n,e])}function Yje(t){const e=ir(),n=ax(t);return A.useMemo(()=>xe({},t,n,{format:t.format??e.formats.keyboardDate}),[t,n,e])}function ax(t){const e=ir(),n=$je();return A.useMemo(()=>({disablePast:t.disablePast??!1,disableFuture:t.disableFuture??!1,minDate:GF(e,t.minDate,n.minDate),maxDate:GF(e,t.maxDate,n.maxDate)}),[t.minDate,t.maxDate,t.disableFuture,t.disablePast,e,n])}function lH(t,e){const n=vr({props:t,name:e}),r=ax(n),s=A.useMemo(()=>{var o;return((o=n.localeText)==null?void 0:o.toolbarTitle)==null?n.localeText:xe({},n.localeText,{datePickerToolbarTitle:n.localeText.toolbarTitle})},[n.localeText]);return xe({},n,r,{localeText:s},eje({views:n.views,openTo:n.openTo,defaultViews:["year","day"],defaultOpenTo:"day"}),{slots:xe({toolbar:qje},n.slots)})}function Zje(t){return Nt("MuiPickerPopper",t)}gt("MuiPickerPopper",["root","paper"]);function Qje(t,e){return Array.isArray(e)?e.every(n=>t.indexOf(n)!==-1):t.indexOf(e)!==-1}const Jje=t=>{setTimeout(t,0)},to=(t=document)=>{const e=t.activeElement;return e?e.shadowRoot?to(e.shadowRoot):e:null},e7e="@media (pointer: fine)",t7e=["PaperComponent","ownerState","children","paperSlotProps","paperClasses","onPaperClick","onPaperTouchStart"],n7e=t=>vt({root:["root"],paper:["paper"]},Zje,t),r7e=De(P5e,{name:"MuiPickerPopper",slot:"Root"})(({theme:t})=>({zIndex:t.zIndex.modal})),s7e=De(ju,{name:"MuiPickerPopper",slot:"Paper"})({outline:0,transformOrigin:"top center",variants:[{props:({popperPlacement:t})=>["top","top-start","top-end"].includes(t),style:{transformOrigin:"bottom center"}}]});function o7e(t,e){return e.documentElement.clientWidth<t.clientX||e.documentElement.clientHeight<t.clientY}function i7e(t,e){const n=A.useRef(!1),r=A.useRef(!1),s=A.useRef(null),o=A.useRef(!1);A.useEffect(()=>{if(!t)return;function l(){o.current=!0}return document.addEventListener("mousedown",l,!0),document.addEventListener("touchstart",l,!0),()=>{document.removeEventListener("mousedown",l,!0),document.removeEventListener("touchstart",l,!0),o.current=!1}},[t]);const i=at(l=>{if(!o.current)return;const c=r.current;r.current=!1;const d=io(s.current);if(!s.current||"clientX"in l&&o7e(l,d))return;if(n.current){n.current=!1;return}let f;l.composedPath?f=l.composedPath().indexOf(s.current)>-1:f=!d.documentElement.contains(l.target)||s.current.contains(l.target),!f&&!c&&e(l)}),a=()=>{r.current=!0};return A.useEffect(()=>{if(t){const l=io(s.current),c=()=>{n.current=!0};return l.addEventListener("touchstart",i),l.addEventListener("touchmove",c),()=>{l.removeEventListener("touchstart",i),l.removeEventListener("touchmove",c)}}},[t,i]),A.useEffect(()=>{if(t){const l=io(s.current);return l.addEventListener("click",i),()=>{l.removeEventListener("click",i),r.current=!1}}},[t,i]),[s,a,a]}const a7e=A.forwardRef((t,e)=>{const{PaperComponent:n,ownerState:r,children:s,paperSlotProps:o,paperClasses:i,onPaperClick:a,onPaperTouchStart:l}=t,c=Lt(t,t7e),d=yn({elementType:n,externalSlotProps:o,additionalProps:{tabIndex:-1,elevation:8,ref:e},className:i,ownerState:r});return S.jsx(n,xe({},c,d,{onClick:f=>{var p;a(f),(p=d.onClick)==null||p.call(d,f)},onTouchStart:f=>{var p;l(f),(p=d.onTouchStart)==null||p.call(d,f)},ownerState:r,children:s}))});function l7e(t){const e=vr({props:t,name:"MuiPickerPopper"}),{children:n,placement:r="bottom-start",slots:s,slotProps:o,classes:i}=e,{open:a,popupRef:l,reduceAnimations:c}=Kp(),{dismissViews:d,getCurrentViewMode:f,onPopperExited:p,triggerElement:g,viewContainerRole:x}=Ws();A.useEffect(()=>{function Z(J){a&&J.key==="Escape"&&d()}return document.addEventListener("keydown",Z),()=>{document.removeEventListener("keydown",Z)}},[d,a]);const b=A.useRef(null);A.useEffect(()=>{x==="tooltip"||f()==="field"||(a?b.current=to(document):b.current&&b.current instanceof HTMLElement&&setTimeout(()=>{b.current instanceof HTMLElement&&b.current.focus()}))},[a,x,f]);const w=n7e(i),{ownerState:C,rootRefObject:N}=Ws(),k=xe({},C,{popperPlacement:r}),I=at(()=>{x==="tooltip"?Jje(()=>{var Z,J;(Z=N.current)!=null&&Z.contains(to(document))||(J=l.current)!=null&&J.contains(to(document))||d()}):d()}),[R,$,O]=i7e(a,I),F=A.useRef(null),M=wn(F,l),_=wn(M,R),V=Z=>{Z.key==="Escape"&&(Z.stopPropagation(),d())},B=(s==null?void 0:s.desktopTransition)??c?tf:xw,W=(s==null?void 0:s.desktopTrapFocus)??OU,q=(s==null?void 0:s.desktopPaper)??s7e,j=(s==null?void 0:s.popper)??r7e,G=yn({elementType:j,externalSlotProps:o==null?void 0:o.popper,additionalProps:{transition:!0,role:x??void 0,open:a,placement:r,anchorEl:g,onKeyDown:V},className:w.root,ownerState:k});return S.jsx(j,xe({},G,{children:({TransitionProps:Z})=>S.jsx(W,xe({open:a,disableAutoFocus:!0,disableRestoreFocus:!0,disableEnforceFocus:x==="tooltip",isEnabled:()=>!0},o==null?void 0:o.desktopTrapFocus,{children:S.jsx(B,xe({},Z,o==null?void 0:o.desktopTransition,{onExited:J=>{var X,ee,ne;p==null||p(),(ee=(X=o==null?void 0:o.desktopTransition)==null?void 0:X.onExited)==null||ee.call(X,J),(ne=Z==null?void 0:Z.onExited)==null||ne.call(Z)},children:S.jsx(a7e,{PaperComponent:q,ownerState:k,ref:_,onPaperClick:$,onPaperTouchStart:O,paperClasses:w.paper,paperSlotProps:o==null?void 0:o.desktopPaper,children:n})}))}))}))}const c7e="@media (prefers-reduced-motion: reduce)",Oh=typeof navigator<"u"&&navigator.userAgent.match(/android\s(\d+)|OS\s(\d+)/i),tM=Oh&&Oh[1]?parseInt(Oh[1],10):null,nM=Oh&&Oh[2]?parseInt(Oh[2],10):null,u7e=tM&&tM<10||nM&&nM<13||!1;function cH(t){const e=UU(c7e,{defaultMatches:!1});return t??(e||u7e)}const uH={hasNextStep:!1,hasSeveralSteps:!1,goToNextStep:()=>{},areViewsInSameStep:()=>!0};function d7e(t){const{steps:e,isViewMatchingStep:n,onStepChange:r}=t;return s=>{if(e==null)return uH;const o=e.findIndex(a=>n(s.view,a)),i=o===-1||o===e.length-1?null:e[o+1];return{hasNextStep:i!=null,hasSeveralSteps:e.length>1,goToNextStep:()=>{i!=null&&r(xe({},s,{step:i}))},areViewsInSameStep:(a,l)=>{const c=e.find(f=>n(a,f)),d=e.find(f=>n(l,f));return c===d}}}}function dH({onChange:t,onViewChange:e,openTo:n,view:r,views:s,autoFocus:o,focusedView:i,onFocusedViewChange:a,getStepNavigation:l}){const c=A.useRef(n),d=A.useRef(s),f=A.useRef(s.includes(n)?n:s[0]),[p,g]=Cu({name:"useViews",state:"view",controlled:r,default:f.current}),x=A.useRef(o?p:null),[b,w]=Cu({name:"useViews",state:"focusedView",controlled:i,default:x.current}),C=l?l({setView:g,view:p,defaultView:f.current,views:s}):uH;A.useEffect(()=>{(c.current&&c.current!==n||d.current&&d.current.some(M=>!s.includes(M)))&&(g(s.includes(n)?n:s[0]),d.current=s,c.current=n)},[n,g,p,s]);const N=s.indexOf(p),k=s[N-1]??null,I=s[N+1]??null,R=at((M,_)=>{w(_?M:V=>M===V?null:V),a==null||a(M,_)}),$=at(M=>{R(M,!0),M!==p&&(g(M),e&&e(M))}),O=at(()=>{I&&$(I)}),F=at((M,_,V)=>{const B=_==="finish",W=V?s.indexOf(V)<s.length-1:!!I;t(M,B&&W?"partial":_,V);let j=null;if(V!=null&&V!==p?j=V:B&&(j=p),j==null)return;const G=s[s.indexOf(j)+1];G==null||!C.areViewsInSameStep(j,G)||$(G)});return xe({},C,{view:p,setView:$,focusedView:b,setFocusedView:R,nextView:I,previousView:k,defaultView:s.includes(n)?n:s[0],goToNextView:O,setValueAndGoToNextView:F})}function rM(){return typeof window>"u"?"portrait":window.screen&&window.screen.orientation&&window.screen.orientation.angle?Math.abs(window.screen.orientation.angle)===90?"landscape":"portrait":window.orientation&&Math.abs(Number(window.orientation))===90?"landscape":"portrait"}function f7e(t,e){const[n,r]=A.useState(rM);return ts(()=>{const s=()=>{r(rM())};return window.addEventListener("orientationchange",s),()=>{window.removeEventListener("orientationchange",s)}},[]),Qje(t,["hours","minutes","seconds"])?"portrait":e??n}const lx=({name:t,timezone:e,value:n,defaultValue:r,referenceDate:s,onChange:o,valueManager:i})=>{const a=ir(),[l,c]=Cu({name:t,state:"value",controlled:n,default:r??i.emptyValue}),d=A.useMemo(()=>i.getTimezone(a,l),[a,i,l]),f=at(b=>d==null?b:i.setTimezone(a,d,b)),p=A.useMemo(()=>e||d||(s?a.getTimezone(s):"default"),[e,d,s,a]),g=A.useMemo(()=>i.setTimezone(a,p,l),[i,a,p,l]),x=at((b,...w)=>{const C=f(b);c(C),o==null||o(C,...w)});return{value:g,handleValueChange:x,timezone:p}};function h7e(t){const{props:e,valueManager:n,validator:r}=t,{value:s,defaultValue:o,onChange:i,referenceDate:a,timezone:l,onAccept:c,closeOnSelect:d,open:f,onOpen:p,onClose:g}=e,{current:x}=A.useRef(o),{current:b}=A.useRef(s!==void 0),{current:w}=A.useRef(f!==void 0),C=ir(),{timezone:N,value:k,handleValueChange:I}=lx({name:"a picker component",timezone:l,value:s,defaultValue:x,referenceDate:a,onChange:i,valueManager:n}),[R,$]=A.useState(()=>({open:!1,lastExternalValue:k,clockShallowValue:void 0,lastCommittedValue:k,hasBeenModifiedSinceMount:!1})),{getValidationErrorForNewValue:O}=aH({props:e,validator:r,timezone:N,value:k,onError:e.onError}),F=at(B=>{const W=typeof B=="function"?B(R.open):B;w||$(q=>xe({},q,{open:W})),W&&p&&p(),W||g==null||g()}),M=at((B,W)=>{const{changeImportance:q="accept",skipPublicationIfPristine:j=!1,validationError:G,shortcut:Z,shouldClose:J=q==="accept"}=W??{};let X,ee;!j&&!b&&!R.hasBeenModifiedSinceMount?(X=!0,ee=q==="accept"):(X=!n.areValuesEqual(C,B,k),ee=q==="accept"&&!n.areValuesEqual(C,B,R.lastCommittedValue)),$(ye=>xe({},ye,{clockShallowValue:X?void 0:ye.clockShallowValue,lastCommittedValue:ee?k:ye.lastCommittedValue,hasBeenModifiedSinceMount:!0}));let ne=null;const oe=()=>(ne||(ne={validationError:G??O(B)},Z&&(ne.shortcut=Z)),ne);X&&I(B,oe()),ee&&c&&c(B,oe()),J&&F(!1)});k!==R.lastExternalValue&&$(B=>xe({},B,{lastExternalValue:k,clockShallowValue:void 0,hasBeenModifiedSinceMount:!0}));const _=at((B,W="partial")=>{if(W==="shallow"){$(q=>xe({},q,{clockShallowValue:B,hasBeenModifiedSinceMount:!0}));return}M(B,{changeImportance:W==="finish"&&d?"accept":"set"})});A.useEffect(()=>{if(w){if(f===void 0)throw new Error("You must not mix controlling and uncontrolled mode for `open` prop");$(B=>xe({},B,{open:f}))}},[w,f]);const V=A.useMemo(()=>n.cleanValue(C,R.clockShallowValue===void 0?k:R.clockShallowValue),[C,n,R.clockShallowValue,k]);return{timezone:N,state:R,setValue:M,setValueFromView:_,setOpen:F,value:k,viewValue:V}}const p7e=["className","sx"],fH=({ref:t,props:e,valueManager:n,valueType:r,variant:s,validator:o,onPopperExited:i,autoFocusView:a,rendererInterceptor:l,localeText:c,viewContainerRole:d,getStepNavigation:f})=>{const{views:p,view:g,openTo:x,onViewChange:b,viewRenderers:w,reduceAnimations:C,orientation:N,disableOpenPicker:k,closeOnSelect:I,disabled:R,readOnly:$,formatDensity:O,enableAccessibleFieldDOMStructure:F,selectedSections:M,onSelectedSectionsChange:_,format:V,label:B,autoFocus:W,name:q}=e,{className:j,sx:G}=e,Z=Lt(e,p7e),J=bc(),X=ir(),ee=Nf(),ne=cH(C),oe=f7e(p,N),{current:ye}=A.useRef(x??null),[ge,ve]=A.useState(null),he=A.useRef(null),Me=A.useRef(null),ze=A.useRef(null),Oe=wn(t,ze),{timezone:Ie,state:me,setOpen:ke,setValue:pe,setValueFromView:Pe,value:Ve,viewValue:Fe}=h7e({props:e,valueManager:n,validator:o}),{view:Be,setView:be,defaultView:je,focusedView:Se,setFocusedView:ue,setValueAndGoToNextView:He,goToNextStep:It,hasNextStep:ot,hasSeveralSteps:Vt}=dH({view:g,views:p,openTo:x,onChange:Pe,onViewChange:b,autoFocus:a,getStepNavigation:f}),Xt=at(()=>pe(n.emptyValue)),Ln=at(()=>pe(n.getTodayValue(X,Ie,r))),hn=at(()=>pe(Ve)),ft=at(()=>pe(me.lastCommittedValue,{skipPublicationIfPristine:!0})),Ot=at(()=>{pe(Ve,{skipPublicationIfPristine:!0})}),{hasUIView:Ct,viewModeLookup:cn,timeViewsCount:Bt}=A.useMemo(()=>p.reduce((Bn,qs)=>{const oi=w[qs]==null?"field":"UI";return Bn.viewModeLookup[qs]=oi,oi==="UI"&&(Bn.hasUIView=!0,ije(qs)&&(Bn.timeViewsCount+=1)),Bn},{hasUIView:!1,viewModeLookup:{},timeViewsCount:0}),[w,p]),Xe=cn[Be],et=at(()=>Xe),[ut,it]=A.useState(Xe==="UI"?Be:null);ut!==Be&&cn[Be]==="UI"&&it(Be),ts(()=>{Xe==="field"&&me.open&&(ke(!1),setTimeout(()=>{var Bn,qs;(Bn=Me==null?void 0:Me.current)==null||Bn.setSelectedSections(Be),(qs=Me==null?void 0:Me.current)==null||qs.focusField(Be)}))},[Be]),ts(()=>{if(!me.open)return;let Bn=Be;Xe==="field"&&ut!=null&&(Bn=ut),Bn!==je&&cn[Bn]==="UI"&&cn[je]==="UI"&&(Bn=je),Bn!==Be&&be(Bn),ue(Bn,!0)},[me.open]);const vn=A.useMemo(()=>({isPickerValueEmpty:n.areValuesEqual(X,Ve,n.emptyValue),isPickerOpen:me.open,isPickerDisabled:e.disabled??!1,isPickerReadOnly:e.readOnly??!1,pickerOrientation:oe,pickerVariant:s}),[X,n,Ve,me.open,oe,s,e.disabled,e.readOnly]),Cr=A.useMemo(()=>k||!Ct?"hidden":R||$?"disabled":"enabled",[k,Ct,R,$]),No=at(It),sn=A.useMemo(()=>I&&!Vt?[]:["cancel","nextOrAccept"],[I,Vt]),zr=A.useMemo(()=>({setValue:pe,setOpen:ke,clearValue:Xt,setValueToToday:Ln,acceptValueChanges:hn,cancelValueChanges:ft,setView:be,goToNextStep:No}),[pe,ke,Xt,Ln,hn,ft,be,No]),cx=A.useMemo(()=>xe({},zr,{value:Ve,timezone:Ie,open:me.open,views:p,view:ut,initialView:ye,disabled:R??!1,readOnly:$??!1,autoFocus:W??!1,variant:s,orientation:oe,popupRef:he,reduceAnimations:ne,triggerRef:ve,triggerStatus:Cr,hasNextStep:ot,fieldFormat:V??"",name:q,label:B,rootSx:G,rootRef:Oe,rootClassName:j}),[zr,Ve,Oe,s,oe,ne,R,$,V,j,q,B,G,Cr,ot,Ie,me.open,ut,p,ye,W]),ux=A.useMemo(()=>({dismissViews:Ot,ownerState:vn,hasUIView:Ct,getCurrentViewMode:et,rootRefObject:ze,labelId:J,triggerElement:ge,viewContainerRole:d,defaultActionBarActions:sn,onPopperExited:i}),[Ot,vn,Ct,et,J,ge,d,sn,i]),si=A.useMemo(()=>({formatDensity:O,enableAccessibleFieldDOMStructure:F,selectedSections:M,onSelectedSectionsChange:_,fieldRef:Me}),[O,F,M,_,Me]);return{providerProps:{localeText:c,contextValue:cx,privateContextValue:ux,actionsContextValue:zr,fieldPrivateContextValue:si,isValidContextValue:Bn=>{const qs=o({adapter:ee,value:Bn,timezone:Ie,props:e});return!n.hasError(qs)}},renderCurrentView:()=>{if(ut==null)return null;const Bn=w[ut];if(Bn==null)return null;const qs=xe({},Z,{views:p,timezone:Ie,value:Fe,onChange:He,view:ut,onViewChange:be,showViewSwitcher:Bt>1,timeViewsCount:Bt},d==="tooltip"?{focusedView:null,onFocusedViewChange:()=>{}}:{focusedView:Se,onFocusedViewChange:ue});return l?S.jsx(l,{viewRenderers:w,popperView:ut,rendererProps:qs}):Bn(qs)},ownerState:vn}};function hH(t){return Nt("MuiPickersLayout",t)}const ed=gt("MuiPickersLayout",["root","landscape","contentWrapper","toolbar","actionBar","tabs","shortcuts"]),m7e=["actions"],g7e=De(X6e,{name:"MuiPickersLayout",slot:"ActionBar"})({});function x7e(t){const{actions:e}=t,n=Lt(t,m7e),r=Vu(),{clearValue:s,setValueToToday:o,acceptValueChanges:i,cancelValueChanges:a,goToNextStep:l,hasNextStep:c}=Kp();if(e==null||e.length===0)return null;const d=e==null?void 0:e.map(f=>{switch(f){case"clear":return S.jsx(Dc,{onClick:s,children:r.clearButtonLabel},f);case"cancel":return S.jsx(Dc,{onClick:a,children:r.cancelButtonLabel},f);case"accept":return S.jsx(Dc,{onClick:i,children:r.okButtonLabel},f);case"today":return S.jsx(Dc,{onClick:o,children:r.todayButtonLabel},f);case"next":return S.jsx(Dc,{onClick:l,children:r.nextStepButtonLabel},f);case"nextOrAccept":return c?S.jsx(Dc,{onClick:l,children:r.nextStepButtonLabel},f):S.jsx(Dc,{onClick:i,children:r.okButtonLabel},f);default:return null}});return S.jsx(g7e,xe({},n,{children:d}))}const y7e=A.memo(x7e),g0=36,LC=2,BC=320,b7e=280,s$=336,w7e=["items","changeImportance"],v7e=["getValue"],C7e=De(FU,{name:"MuiPickersLayout",slot:"Shortcuts"})({});function S7e(t){const{items:e,changeImportance:n="accept"}=t,r=Lt(t,w7e),{setValue:s}=Vje(),o=Nje();if(e==null||e.length===0)return null;const i=e.map(a=>{let{getValue:l}=a,c=Lt(a,v7e);const d=l({isValid:o});return xe({},c,{label:c.label,onClick:()=>{s(d,{changeImportance:n,shortcut:c})},disabled:!o(d)})});return S.jsx(C7e,xe({dense:!0,sx:[{maxHeight:s$,maxWidth:200,overflow:"auto"},...Array.isArray(r.sx)?r.sx:[r.sx]]},r,{children:i.map(a=>S.jsx(LBe,{children:S.jsx(AU,xe({},a))},a.id??a.label))}))}const N7e=["ownerState"];function E7e(t){return t.view!==null}const I7e=(t,e)=>{const{pickerOrientation:n}=e;return vt({root:["root",n==="landscape"&&"landscape"],contentWrapper:["contentWrapper"],toolbar:["toolbar"],actionBar:["actionBar"],tabs:["tabs"],landscape:["landscape"],shortcuts:["shortcuts"]},hH,t)},k7e=t=>{const{ownerState:e,defaultActionBarActions:n}=Ws(),{view:r}=Kp(),s=Wa(),{children:o,slots:i,slotProps:a,classes:l}=t,c=A.useMemo(()=>xe({},e,{layoutDirection:s?"rtl":"ltr"}),[e,s]),d=I7e(l,c),f=(i==null?void 0:i.actionBar)??y7e,p=yn({elementType:f,externalSlotProps:a==null?void 0:a.actionBar,additionalProps:{actions:n},className:d.actionBar,ownerState:c}),g=Lt(p,N7e),x=S.jsx(f,xe({},g)),b=i==null?void 0:i.toolbar,w=yn({elementType:b,externalSlotProps:a==null?void 0:a.toolbar,className:d.toolbar,ownerState:c}),C=E7e(w)&&b?S.jsx(b,xe({},w)):null,N=o,k=i==null?void 0:i.tabs,I=r&&k?S.jsx(k,xe({className:d.tabs},a==null?void 0:a.tabs)):null,R=(i==null?void 0:i.shortcuts)??S7e,$=yn({elementType:R,externalSlotProps:a==null?void 0:a.shortcuts,className:d.shortcuts,ownerState:c}),O=r&&R?S.jsx(R,xe({},$)):null;return{toolbar:C,content:N,tabs:I,actionBar:x,shortcuts:O,ownerState:c}},T7e=(t,e)=>{const{pickerOrientation:n}=e;return vt({root:["root",n==="landscape"&&"landscape"],contentWrapper:["contentWrapper"]},hH,t)},A7e=De("div",{name:"MuiPickersLayout",slot:"Root"})({display:"grid",gridAutoColumns:"max-content auto max-content",gridAutoRows:"max-content auto max-content",[`& .${ed.actionBar}`]:{gridColumn:"1 / 4",gridRow:3},variants:[{props:{pickerOrientation:"landscape"},style:{[`& .${ed.toolbar}`]:{gridColumn:1,gridRow:"2 / 3"},[`.${ed.shortcuts}`]:{gridColumn:"2 / 4",gridRow:1}}},{props:{pickerOrientation:"landscape",layoutDirection:"rtl"},style:{[`& .${ed.toolbar}`]:{gridColumn:3}}},{props:{pickerOrientation:"portrait"},style:{[`& .${ed.toolbar}`]:{gridColumn:"2 / 4",gridRow:1},[`& .${ed.shortcuts}`]:{gridColumn:1,gridRow:"2 / 3"}}},{props:{pickerOrientation:"portrait",layoutDirection:"rtl"},style:{[`& .${ed.shortcuts}`]:{gridColumn:3}}}]}),R7e=De("div",{name:"MuiPickersLayout",slot:"ContentWrapper"})({gridColumn:"2 / 4",gridRow:2,display:"flex",flexDirection:"column"}),pH=A.forwardRef(function(e,n){const r=vr({props:e,name:"MuiPickersLayout"}),{toolbar:s,content:o,tabs:i,actionBar:a,shortcuts:l,ownerState:c}=k7e(r),{orientation:d,variant:f}=Kp(),{sx:p,className:g,classes:x}=r,b=T7e(x,c);return S.jsxs(A7e,{ref:n,sx:p,className:st(b.root,g),ownerState:c,children:[d==="landscape"?l:s,d==="landscape"?s:l,S.jsx(R7e,{className:b.contentWrapper,ownerState:c,children:f==="desktop"?S.jsxs(A.Fragment,{children:[o,i]}):S.jsxs(A.Fragment,{children:[i,o]})}),a]})});function o$(t){const{ownerState:e}=Ws(),n=Wa();return A.useMemo(()=>xe({},e,{isFieldDisabled:t.disabled??!1,isFieldReadOnly:t.readOnly??!1,isFieldRequired:t.required??!1,fieldDirection:n?"rtl":"ltr"}),[e,t.disabled,t.readOnly,t.required,n])}const D7e=So(S.jsx("path",{d:"M7 10l5 5 5-5z"})),$7e=So(S.jsx("path",{d:"M15.41 16.59L10.83 12l4.58-4.59L14 6l-6 6 6 6 1.41-1.41z"})),O7e=So(S.jsx("path",{d:"M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"})),_7e=So(S.jsx("path",{d:"M17 12h-5v5h5v-5zM16 1v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2h-1V1h-2zm3 18H5V8h14v11z"}));So(S.jsxs(A.Fragment,{children:[S.jsx("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),S.jsx("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"})]}));So(S.jsx("path",{d:"M9 11H7v2h2v-2zm4 0h-2v2h2v-2zm4 0h-2v2h2v-2zm2-7h-1V2h-2v2H8V2H6v2H5c-1.11 0-1.99.9-1.99 2L3 20c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 16H5V9h14v11z"}));So(S.jsxs(A.Fragment,{children:[S.jsx("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),S.jsx("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"})]}));const P7e=So(S.jsx("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}));function F7e(t){return Nt("MuiPickersTextField",t)}gt("MuiPickersTextField",["root","focused","disabled","error","required"]);function M7e(t){return Nt("MuiPickersInputBase",t)}const _h=gt("MuiPickersInputBase",["root","focused","disabled","error","notchedOutline","sectionContent","sectionBefore","sectionAfter","adornedStart","adornedEnd","input","activeBar"]);function L7e(t){return Nt("MuiPickersSectionList",t)}const _m=gt("MuiPickersSectionList",["root","section","sectionContent"]),B7e=["slots","slotProps","elements","sectionListRef","classes"],mH=De("div",{name:"MuiPickersSectionList",slot:"Root"})({direction:"ltr /*! @noflip */",outline:"none"}),gH=De("span",{name:"MuiPickersSectionList",slot:"Section"})({}),xH=De("span",{name:"MuiPickersSectionList",slot:"SectionSeparator"})({whiteSpace:"pre"}),yH=De("span",{name:"MuiPickersSectionList",slot:"SectionContent"})({outline:"none"}),j7e=t=>vt({root:["root"],section:["section"],sectionContent:["sectionContent"]},L7e,t);function z7e(t){const{slots:e,slotProps:n,element:r,classes:s}=t,{ownerState:o}=Ws(),i=(e==null?void 0:e.section)??gH,a=yn({elementType:i,externalSlotProps:n==null?void 0:n.section,externalForwardedProps:r.container,className:s.section,ownerState:o}),l=(e==null?void 0:e.sectionContent)??yH,c=yn({elementType:l,externalSlotProps:n==null?void 0:n.sectionContent,externalForwardedProps:r.content,additionalProps:{suppressContentEditableWarning:!0},className:s.sectionContent,ownerState:o}),d=(e==null?void 0:e.sectionSeparator)??xH,f=yn({elementType:d,externalSlotProps:n==null?void 0:n.sectionSeparator,externalForwardedProps:r.before,ownerState:xe({},o,{separatorPosition:"before"})}),p=yn({elementType:d,externalSlotProps:n==null?void 0:n.sectionSeparator,externalForwardedProps:r.after,ownerState:xe({},o,{separatorPosition:"after"})});return S.jsxs(i,xe({},a,{children:[S.jsx(d,xe({},f)),S.jsx(l,xe({},c)),S.jsx(d,xe({},p))]}))}const V7e=A.forwardRef(function(e,n){const r=vr({props:e,name:"MuiPickersSectionList"}),{slots:s,slotProps:o,elements:i,sectionListRef:a,classes:l}=r,c=Lt(r,B7e),d=j7e(l),{ownerState:f}=Ws(),p=A.useRef(null),g=wn(n,p),x=C=>{if(!p.current)throw new Error(`MUI X: Cannot call sectionListRef.${C} before the mount of the component.`);return p.current};A.useImperativeHandle(a,()=>({getRoot(){return x("getRoot")},getSectionContainer(C){return x("getSectionContainer").querySelector(`.${_m.section}[data-sectionindex="${C}"]`)},getSectionContent(C){return x("getSectionContent").querySelector(`.${_m.section}[data-sectionindex="${C}"] .${_m.sectionContent}`)},getSectionIndexFromDOMElement(C){const N=x("getSectionIndexFromDOMElement");if(C==null||!N.contains(C))return null;let k=null;return C.classList.contains(_m.section)?k=C:C.classList.contains(_m.sectionContent)&&(k=C.parentElement),k==null?null:Number(k.dataset.sectionindex)}}));const b=(s==null?void 0:s.root)??mH,w=yn({elementType:b,externalSlotProps:o==null?void 0:o.root,externalForwardedProps:c,additionalProps:{ref:g,suppressContentEditableWarning:!0},className:d.root,ownerState:f});return S.jsx(b,xe({},w,{children:w.contentEditable?i.map(({content:C,before:N,after:k})=>`${N.children}${C.children}${k.children}`).join(""):S.jsx(A.Fragment,{children:i.map((C,N)=>S.jsx(z7e,{slots:s,slotProps:o,element:C,classes:d},N))})}))}),bH=A.createContext(null),jC=()=>{const t=A.useContext(bH);if(t==null)throw new Error(["MUI X: The `usePickerTextFieldOwnerState` can only be called in components that are used inside a PickerTextField component"].join(`
`));return t},W7e=["elements","areAllSectionsEmpty","defaultValue","label","value","onChange","id","autoFocus","endAdornment","startAdornment","renderSuffix","slots","slotProps","contentEditable","tabIndex","onInput","onPaste","onKeyDown","fullWidth","name","readOnly","inputProps","inputRef","sectionListRef","onFocus","onBlur","classes","ownerState"],U7e=t=>Math.round(t*1e5)/1e5,zC=De("div",{name:"MuiPickersInputBase",slot:"Root"})(({theme:t})=>xe({},t.typography.body1,{color:(t.vars||t).palette.text.primary,cursor:"text",padding:0,display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",boxSizing:"border-box",letterSpacing:`${U7e(.15/16)}em`,variants:[{props:{isInputInFullWidth:!0},style:{width:"100%"}}]})),i$=De(mH,{name:"MuiPickersInputBase",slot:"SectionsContainer"})(({theme:t})=>({padding:"4px 0 5px",fontFamily:t.typography.fontFamily,fontSize:"inherit",lineHeight:"1.4375em",flexGrow:1,outline:"none",display:"flex",flexWrap:"nowrap",overflow:"hidden",letterSpacing:"inherit",width:"182px",variants:[{props:{fieldDirection:"rtl"},style:{textAlign:"right /*! @noflip */"}},{props:{inputSize:"small"},style:{paddingTop:1}},{props:{hasStartAdornment:!1,isFieldFocused:!1,isFieldValueEmpty:!0},style:{color:"currentColor",opacity:0}},{props:{hasStartAdornment:!1,isFieldFocused:!1,isFieldValueEmpty:!0,inputHasLabel:!1},style:t.vars?{opacity:t.vars.opacity.inputPlaceholder}:{opacity:t.palette.mode==="light"?.42:.5}}]})),H7e=De(gH,{name:"MuiPickersInputBase",slot:"Section"})(({theme:t})=>({fontFamily:t.typography.fontFamily,fontSize:"inherit",letterSpacing:"inherit",lineHeight:"1.4375em",display:"inline-block",whiteSpace:"nowrap"})),G7e=De(yH,{name:"MuiPickersInputBase",slot:"SectionContent",overridesResolver:(t,e)=>e.content})(({theme:t})=>({fontFamily:t.typography.fontFamily,lineHeight:"1.4375em",letterSpacing:"inherit",width:"fit-content",outline:"none"})),q7e=De(xH,{name:"MuiPickersInputBase",slot:"Separator"})(()=>({whiteSpace:"pre",letterSpacing:"inherit"})),X7e=De("input",{name:"MuiPickersInputBase",slot:"Input",overridesResolver:(t,e)=>e.hiddenInput})(xe({},p8e)),K7e=De("div",{name:"MuiPickersInputBase",slot:"ActiveBar"})(({theme:t,ownerState:e})=>({display:"none",position:"absolute",height:2,bottom:2,borderTopLeftRadius:2,borderTopRightRadius:2,transition:t.transitions.create(["width","left"],{duration:t.transitions.duration.shortest}),backgroundColor:(t.vars||t).palette.primary.main,'[data-active-range-position="start"] &, [data-active-range-position="end"] &':{display:"block"},'[data-active-range-position="start"] &':{left:e.sectionOffsets[0]},'[data-active-range-position="end"] &':{left:e.sectionOffsets[1]}})),Y7e=(t,e)=>{const{isFieldFocused:n,isFieldDisabled:r,isFieldReadOnly:s,hasFieldError:o,inputSize:i,isInputInFullWidth:a,inputColor:l,hasStartAdornment:c,hasEndAdornment:d}=e,f={root:["root",n&&!r&&"focused",r&&"disabled",s&&"readOnly",o&&"error",a&&"fullWidth",`color${Qe(l)}`,i==="small"&&"inputSizeSmall",c&&"adornedStart",d&&"adornedEnd"],notchedOutline:["notchedOutline"],input:["input"],sectionsContainer:["sectionsContainer"],sectionContent:["sectionContent"],sectionBefore:["sectionBefore"],sectionAfter:["sectionAfter"],activeBar:["activeBar"]};return vt(f,M7e,t)};function sM(t,e,n,r){var s;if(t.content.id){const o=(s=e.current)==null?void 0:s.querySelectorAll(`[data-sectionindex="${n}"] [data-range-position="${r}"]`);if(o)return Array.from(o).reduce((i,a)=>i+a.offsetWidth,0)}return 0}function Z7e(t,e){var s,o,i,a,l;let n=0;if(((s=e.current)==null?void 0:s.getAttribute("data-active-range-position"))==="end")for(let c=t.length-1;c>=t.length/2;c-=1)n+=sM(t[c],e,c,"end");else for(let c=0;c<t.length/2;c+=1)n+=sM(t[c],e,c,"start");return{activeBarWidth:n,sectionOffsets:[((i=(o=e.current)==null?void 0:o.querySelector('[data-sectionindex="0"]'))==null?void 0:i.offsetLeft)||0,((l=(a=e.current)==null?void 0:a.querySelector(`[data-sectionindex="${t.length/2}"]`))==null?void 0:l.offsetLeft)||0]}}const a$=A.forwardRef(function(e,n){const r=vr({props:e,name:"MuiPickersInputBase"}),{elements:s,areAllSectionsEmpty:o,value:i,onChange:a,id:l,endAdornment:c,startAdornment:d,renderSuffix:f,slots:p,slotProps:g,contentEditable:x,tabIndex:b,onInput:w,onPaste:C,onKeyDown:N,name:k,readOnly:I,inputProps:R,inputRef:$,sectionListRef:O,onFocus:F,onBlur:M,classes:_,ownerState:V}=r,B=Lt(r,W7e),W=jC(),q=A.useRef(null),j=A.useRef(null),G=A.useRef([]),Z=wn(n,q),J=wn(R==null?void 0:R.ref,$),X=wc();if(!X)throw new Error("MUI X: PickersInputBase should always be used inside a PickersTextField component");const ee=V??W,ne=Ie=>{var me;(me=X.onFocus)==null||me.call(X,Ie),F==null||F(Ie)},oe=Ie=>{ne(Ie)},ye=Ie=>{var me,ke;if(N==null||N(Ie),Ie.key==="Enter"&&!Ie.defaultMuiPrevented){if((me=q.current)!=null&&me.dataset.multiInput)return;const pe=(ke=q.current)==null?void 0:ke.closest("form"),Pe=pe==null?void 0:pe.querySelector('[type="submit"]');if(!pe||!Pe)return;Ie.preventDefault(),pe.requestSubmit(Pe)}},ge=Ie=>{var me;(me=X.onBlur)==null||me.call(X,Ie),M==null||M(Ie)};A.useEffect(()=>{X&&X.setAdornedStart(!!d)},[X,d]),A.useEffect(()=>{X&&(o?X.onEmpty():X.onFilled())},[X,o]);const ve=Y7e(_,ee),he=(p==null?void 0:p.root)||zC,Me=yn({elementType:he,externalSlotProps:g==null?void 0:g.root,externalForwardedProps:B,additionalProps:{"aria-invalid":X.error,ref:Z},className:ve.root,ownerState:ee}),ze=(p==null?void 0:p.input)||i$,Oe=s.some(Ie=>Ie.content["data-range-position"]!==void 0);return A.useEffect(()=>{if(!Oe||!ee.isPickerOpen)return;const{activeBarWidth:Ie,sectionOffsets:me}=Z7e(s,q);G.current=[me[0],me[1]],j.current&&(j.current.style.width=`${Ie}px`)},[s,Oe,ee.isPickerOpen]),S.jsxs(he,xe({},Me,{children:[d,S.jsx(V7e,{sectionListRef:O,elements:s,contentEditable:x,tabIndex:b,className:ve.sectionsContainer,onFocus:ne,onBlur:ge,onInput:w,onPaste:C,onKeyDown:ye,slots:{root:ze,section:H7e,sectionContent:G7e,sectionSeparator:q7e},slotProps:{root:xe({},g==null?void 0:g.input,{ownerState:ee}),sectionContent:{className:_h.sectionContent},sectionSeparator:({separatorPosition:Ie})=>({className:Ie==="before"?_h.sectionBefore:_h.sectionAfter})}}),c,f?f(xe({},X)):null,S.jsx(X7e,xe({name:k,className:ve.input,value:i,onChange:a,id:l,"aria-hidden":"true",tabIndex:-1,readOnly:I,required:X.required,disabled:X.disabled,onFocus:oe},R,{ref:J})),Oe&&S.jsx(K7e,{className:ve.activeBar,ref:j,ownerState:{sectionOffsets:G.current}})]}))});function Q7e(t){return Nt("MuiPickersOutlinedInput",t)}const ma=xe({},_h,gt("MuiPickersOutlinedInput",["root","notchedOutline","input"])),J7e=["children","className","label","notched","shrink"],eze=De("fieldset",{name:"MuiPickersOutlinedInput",slot:"NotchedOutline"})(({theme:t})=>{const e=t.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{textAlign:"left",position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden",minWidth:"0%",borderColor:t.vars?`rgba(${t.vars.palette.common.onBackgroundChannel} / 0.23)`:e}}),oM=De("span")(({theme:t})=>({fontFamily:t.typography.fontFamily,fontSize:"inherit"})),tze=De("legend",{shouldForwardProp:t=>vl(t)&&t!=="notched"})(({theme:t})=>({float:"unset",width:"auto",overflow:"hidden",variants:[{props:{inputHasLabel:!1},style:{padding:0,lineHeight:"11px",transition:t.transitions.create("width",{duration:150,easing:t.transitions.easing.easeOut})}},{props:{inputHasLabel:!0},style:{display:"block",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:t.transitions.create("max-width",{duration:50,easing:t.transitions.easing.easeOut}),whiteSpace:"nowrap","& > span":{paddingLeft:5,paddingRight:5,display:"inline-block",opacity:0,visibility:"visible"}}},{props:{inputHasLabel:!0,notched:!0},style:{maxWidth:"100%",transition:t.transitions.create("max-width",{duration:100,easing:t.transitions.easing.easeOut,delay:50})}}]}));function nze(t){const{className:e,label:n,notched:r}=t,s=Lt(t,J7e),o=jC();return S.jsx(eze,xe({"aria-hidden":!0,className:e},s,{ownerState:o,children:S.jsx(tze,{ownerState:o,notched:r,children:n?S.jsx(oM,{children:n}):S.jsx(oM,{className:"notranslate",children:"​"})})}))}const rze=["label","autoFocus","ownerState","classes","notched"],sze=De(zC,{name:"MuiPickersOutlinedInput",slot:"Root"})(({theme:t})=>{const e=t.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{padding:"0 14px",borderRadius:(t.vars||t).shape.borderRadius,[`&:hover .${ma.notchedOutline}`]:{borderColor:(t.vars||t).palette.text.primary},"@media (hover: none)":{[`&:hover .${ma.notchedOutline}`]:{borderColor:t.vars?`rgba(${t.vars.palette.common.onBackgroundChannel} / 0.23)`:e}},[`&.${ma.focused} .${ma.notchedOutline}`]:{borderStyle:"solid",borderWidth:2},[`&.${ma.disabled}`]:{[`& .${ma.notchedOutline}`]:{borderColor:(t.vars||t).palette.action.disabled},"*":{color:(t.vars||t).palette.action.disabled}},[`&.${ma.error} .${ma.notchedOutline}`]:{borderColor:(t.vars||t).palette.error.main},variants:Object.keys((t.vars??t).palette).filter(n=>{var r;return((r=(t.vars??t).palette[n])==null?void 0:r.main)??!1}).map(n=>({props:{inputColor:n},style:{[`&.${ma.focused}:not(.${ma.error}) .${ma.notchedOutline}`]:{borderColor:(t.vars||t).palette[n].main}}}))}}),oze=De(i$,{name:"MuiPickersOutlinedInput",slot:"SectionsContainer"})({padding:"16.5px 0",variants:[{props:{inputSize:"small"},style:{padding:"8.5px 0"}}]}),ize=t=>{const n=vt({root:["root"],notchedOutline:["notchedOutline"],input:["input"]},Q7e,t);return xe({},t,n)},wH=A.forwardRef(function(e,n){const r=vr({props:e,name:"MuiPickersOutlinedInput"}),{label:s,classes:o,notched:i}=r,a=Lt(r,rze),l=wc(),c=ize(o);return S.jsx(a$,xe({slots:{root:sze,input:oze},renderSuffix:d=>S.jsx(nze,{shrink:!!(i||d.adornedStart||d.focused||d.filled),notched:!!(i||d.adornedStart||d.focused||d.filled),className:c.notchedOutline,label:s!=null&&s!==""&&(l!=null&&l.required)?S.jsxs(A.Fragment,{children:[s," ","*"]}):s})},a,{label:s,classes:c,ref:n}))});wH.muiName="Input";function aze(t){return Nt("MuiPickersFilledInput",t)}const td=xe({},_h,gt("MuiPickersFilledInput",["root","underline","input"])),lze=["label","autoFocus","disableUnderline","hiddenLabel","classes"],cze=De(zC,{name:"MuiPickersFilledInput",slot:"Root",shouldForwardProp:t=>vl(t)&&t!=="disableUnderline"})(({theme:t})=>{const e=t.palette.mode==="light",n=e?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",r=e?"rgba(0, 0, 0, 0.06)":"rgba(255, 255, 255, 0.09)",s=e?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.13)",o=e?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)";return{backgroundColor:t.vars?t.vars.palette.FilledInput.bg:r,borderTopLeftRadius:(t.vars||t).shape.borderRadius,borderTopRightRadius:(t.vars||t).shape.borderRadius,transition:t.transitions.create("background-color",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),"&:hover":{backgroundColor:t.vars?t.vars.palette.FilledInput.hoverBg:s,"@media (hover: none)":{backgroundColor:t.vars?t.vars.palette.FilledInput.bg:r}},[`&.${td.focused}`]:{backgroundColor:t.vars?t.vars.palette.FilledInput.bg:r},[`&.${td.disabled}`]:{backgroundColor:t.vars?t.vars.palette.FilledInput.disabledBg:o},variants:[...Object.keys((t.vars??t).palette).filter(i=>(t.vars??t).palette[i].main).map(i=>{var a;return{props:{inputColor:i,disableUnderline:!1},style:{"&::after":{borderBottom:`2px solid ${(a=(t.vars||t).palette[i])==null?void 0:a.main}`}}}}),{props:{disableUnderline:!1},style:{"&::after":{left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:t.transitions.create("transform",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${td.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${td.error}`]:{"&:before, &:after":{borderBottomColor:(t.vars||t).palette.error.main}},"&::before":{borderBottom:`1px solid ${t.vars?`rgba(${t.vars.palette.common.onBackgroundChannel} / ${t.vars.opacity.inputUnderline})`:n}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:t.transitions.create("border-bottom-color",{duration:t.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${td.disabled}, .${td.error}):before`]:{borderBottom:`1px solid ${(t.vars||t).palette.text.primary}`},[`&.${td.disabled}:before`]:{borderBottomStyle:"dotted"}}},{props:{hasStartAdornment:!0},style:{paddingLeft:12}},{props:{hasEndAdornment:!0},style:{paddingRight:12}}]}}),uze=De(i$,{name:"MuiPickersFilledInput",slot:"sectionsContainer",shouldForwardProp:t=>vl(t)&&t!=="hiddenLabel"})({paddingTop:25,paddingRight:12,paddingBottom:8,paddingLeft:12,variants:[{props:{inputSize:"small"},style:{paddingTop:21,paddingBottom:4}},{props:{hasStartAdornment:!0},style:{paddingLeft:0}},{props:{hasEndAdornment:!0},style:{paddingRight:0}},{props:{hiddenLabel:!0},style:{paddingTop:16,paddingBottom:17}},{props:{hiddenLabel:!0,inputSize:"small"},style:{paddingTop:8,paddingBottom:9}}]}),dze=(t,e)=>{const{inputHasUnderline:n}=e,s=vt({root:["root",n&&"underline"],input:["input"]},aze,t);return xe({},t,s)},vH=A.forwardRef(function(e,n){const r=vr({props:e,name:"MuiPickersFilledInput"}),{label:s,disableUnderline:o=!1,hiddenLabel:i=!1,classes:a}=r,l=Lt(r,lze),c=jC(),d=xe({},c,{inputHasUnderline:!o}),f=dze(a,d);return S.jsx(a$,xe({slots:{root:cze,input:uze},slotProps:{root:{disableUnderline:o},input:{hiddenLabel:i}}},l,{label:s,classes:f,ref:n,ownerState:d}))});vH.muiName="Input";function fze(t){return Nt("MuiPickersFilledInput",t)}const Pm=xe({},_h,gt("MuiPickersInput",["root","underline","input"])),hze=["label","autoFocus","disableUnderline","ownerState","classes"],pze=De(zC,{name:"MuiPickersInput",slot:"Root",shouldForwardProp:t=>vl(t)&&t!=="disableUnderline"})(({theme:t})=>{let n=t.palette.mode==="light"?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return t.vars&&(n=`rgba(${t.vars.palette.common.onBackgroundChannel} / ${t.vars.opacity.inputUnderline})`),{"label + &":{marginTop:16},variants:[...Object.keys((t.vars??t).palette).filter(r=>(t.vars??t).palette[r].main).map(r=>({props:{inputColor:r},style:{"&::after":{borderBottom:`2px solid ${(t.vars||t).palette[r].main}`}}})),{props:{disableUnderline:!1},style:{"&::after":{background:"red",left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:t.transitions.create("transform",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${Pm.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${Pm.error}`]:{"&:before, &:after":{borderBottomColor:(t.vars||t).palette.error.main}},"&::before":{borderBottom:`1px solid ${n}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:t.transitions.create("border-bottom-color",{duration:t.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${Pm.disabled}, .${Pm.error}):before`]:{borderBottom:`2px solid ${(t.vars||t).palette.text.primary}`,"@media (hover: none)":{borderBottom:`1px solid ${n}`}},[`&.${Pm.disabled}:before`]:{borderBottomStyle:"dotted"}}}]}}),mze=(t,e)=>{const{inputHasUnderline:n}=e,s=vt({root:["root",!n&&"underline"],input:["input"]},fze,t);return xe({},t,s)},CH=A.forwardRef(function(e,n){const r=vr({props:e,name:"MuiPickersInput"}),{label:s,disableUnderline:o=!1,classes:i}=r,a=Lt(r,hze),l=jC(),c=xe({},l,{inputHasUnderline:!o}),d=mze(i,c);return S.jsx(a$,xe({slots:{root:pze},slotProps:{root:{disableUnderline:o}}},a,{label:s,classes:d,ref:n}))});CH.muiName="Input";const gze=["onFocus","onBlur","className","classes","color","disabled","error","variant","required","InputProps","inputProps","inputRef","sectionListRef","elements","areAllSectionsEmpty","onClick","onKeyDown","onKeyUp","onPaste","onInput","endAdornment","startAdornment","tabIndex","contentEditable","focused","value","onChange","fullWidth","id","name","helperText","FormHelperTextProps","label","InputLabelProps","data-active-range-position"],xze={standard:CH,filled:vH,outlined:wH},yze=De(gw,{name:"MuiPickersTextField",slot:"Root"})({maxWidth:"100%"}),bze=(t,e)=>{const{isFieldFocused:n,isFieldDisabled:r,isFieldRequired:s}=e;return vt({root:["root",n&&!r&&"focused",r&&"disabled",s&&"required"]},F7e,t)},SH=A.forwardRef(function(e,n){const r=vr({props:e,name:"MuiPickersTextField"}),{onFocus:s,onBlur:o,className:i,classes:a,color:l="primary",disabled:c=!1,error:d=!1,variant:f="outlined",required:p=!1,InputProps:g,inputProps:x,inputRef:b,sectionListRef:w,elements:C,areAllSectionsEmpty:N,onClick:k,onKeyDown:I,onKeyUp:R,onPaste:$,onInput:O,endAdornment:F,startAdornment:M,tabIndex:_,contentEditable:V,focused:B,value:W,onChange:q,fullWidth:j,id:G,name:Z,helperText:J,FormHelperTextProps:X,label:ee,InputLabelProps:ne,"data-active-range-position":oe}=r,ye=Lt(r,gze),ge=A.useRef(null),ve=wn(n,ge),he=bc(G),Me=J&&he?`${he}-helper-text`:void 0,ze=ee&&he?`${he}-label`:void 0,Oe=o$({disabled:r.disabled,required:r.required,readOnly:g==null?void 0:g.readOnly}),Ie=A.useMemo(()=>xe({},Oe,{isFieldValueEmpty:N,isFieldFocused:B??!1,hasFieldError:d??!1,inputSize:r.size??"medium",inputColor:l??"primary",isInputInFullWidth:j??!1,hasStartAdornment:!!(M??(g==null?void 0:g.startAdornment)),hasEndAdornment:!!(F??(g==null?void 0:g.endAdornment)),inputHasLabel:!!ee}),[Oe,N,B,d,r.size,l,j,M,F,g==null?void 0:g.startAdornment,g==null?void 0:g.endAdornment,ee]),me=bze(a,Ie),ke=xze[f],pe={};return f==="outlined"&&(ne&&typeof ne.shrink<"u"&&(pe.notched=ne.shrink),pe.label=ee),S.jsx(bH.Provider,{value:Ie,children:S.jsxs(yze,xe({className:st(me.root,i),ref:ve,focused:B,disabled:c,variant:f,error:d,color:l,fullWidth:j,required:p,ownerState:Ie},ye,{children:[ee!=null&&ee!==""&&S.jsx(yw,xe({htmlFor:he,id:ze},ne,{children:ee})),S.jsx(ke,xe({elements:C,areAllSectionsEmpty:N,onClick:k,onKeyDown:I,onKeyUp:R,onInput:O,onPaste:$,onFocus:s,onBlur:o,endAdornment:F,startAdornment:M,tabIndex:_,contentEditable:V,value:W,onChange:q,id:he,fullWidth:j,inputProps:x,inputRef:b,sectionListRef:w,label:ee,name:Z,role:"group","aria-labelledby":ze,"aria-describedby":Me,"aria-live":Me?"polite":void 0,"data-active-range-position":oe},pe,g)),J&&S.jsx(PU,xe({id:Me},X,{children:J}))]}))})}),wze=["enableAccessibleFieldDOMStructure"],vze=["InputProps","readOnly","onClear","clearable","clearButtonPosition","openPickerButtonPosition","openPickerAriaLabel"],Cze=["onPaste","onKeyDown","inputMode","readOnly","InputProps","inputProps","inputRef","onClear","clearable","clearButtonPosition","openPickerButtonPosition","openPickerAriaLabel"],Sze=["ownerState"],Nze=["ownerState"],Eze=["ownerState"],Ize=["ownerState"],kze=["InputProps","inputProps"],Tze=t=>{let{enableAccessibleFieldDOMStructure:e}=t,n=Lt(t,wze);if(e){const{InputProps:w,readOnly:C,onClear:N,clearable:k,clearButtonPosition:I,openPickerButtonPosition:R,openPickerAriaLabel:$}=n,O=Lt(n,vze);return{clearable:k,onClear:N,clearButtonPosition:I,openPickerButtonPosition:R,openPickerAriaLabel:$,textFieldProps:xe({},O,{InputProps:xe({},w??{},{readOnly:C})})}}const{onPaste:r,onKeyDown:s,inputMode:o,readOnly:i,InputProps:a,inputProps:l,inputRef:c,onClear:d,clearable:f,clearButtonPosition:p,openPickerButtonPosition:g,openPickerAriaLabel:x}=n,b=Lt(n,Cze);return{clearable:f,onClear:d,clearButtonPosition:p,openPickerButtonPosition:g,openPickerAriaLabel:x,textFieldProps:xe({},b,{InputProps:xe({},a??{},{readOnly:i}),inputProps:xe({},l??{},{inputMode:o,onPaste:r,onKeyDown:s,ref:c})})}},l$=A.createContext({slots:{},slotProps:{},inputRef:void 0});function Aze(t){var X,ee;const{slots:e,slotProps:n,fieldResponse:r,defaultOpenPickerIcon:s}=t,o=Vu(),i=r$(),a=A.useContext(l$),{textFieldProps:l,onClear:c,clearable:d,openPickerAriaLabel:f,clearButtonPosition:p="end",openPickerButtonPosition:g="end"}=Tze(r),x=o$(l),b=at(ne=>{ne.preventDefault(),i==null||i.setOpen(oe=>!oe)}),w=i?i.triggerStatus:"hidden",C=d?p:null,N=w!=="hidden"?g:null,k=(e==null?void 0:e.textField)??a.slots.textField??(r.enableAccessibleFieldDOMStructure===!1?sk:SH),I=(e==null?void 0:e.inputAdornment)??a.slots.inputAdornment??CBe,R=yn({elementType:I,externalSlotProps:Vy(a.slotProps.inputAdornment,n==null?void 0:n.inputAdornment),additionalProps:{position:"start"},ownerState:xe({},x,{position:"start"})}),$=Lt(R,Sze),O=yn({elementType:I,externalSlotProps:n==null?void 0:n.inputAdornment,additionalProps:{position:"end"},ownerState:xe({},x,{position:"end"})}),F=Lt(O,Nze),M=a.slots.openPickerButton??d0,_=yn({elementType:M,externalSlotProps:a.slotProps.openPickerButton,additionalProps:{disabled:w==="disabled",onClick:b,"aria-label":f,edge:l.variant!=="standard"?N:!1},ownerState:x}),V=Lt(_,Eze),B=a.slots.openPickerIcon??s,W=yn({elementType:B,externalSlotProps:a.slotProps.openPickerIcon,ownerState:x}),q=(e==null?void 0:e.clearButton)??a.slots.clearButton??d0,j=yn({elementType:q,externalSlotProps:Vy(a.slotProps.clearButton,n==null?void 0:n.clearButton),className:"clearButton",additionalProps:{title:o.fieldClearLabel,tabIndex:-1,onClick:c,disabled:r.disabled||r.readOnly,edge:l.variant!=="standard"&&C!==N?C:!1},ownerState:x}),G=Lt(j,Ize),Z=(e==null?void 0:e.clearIcon)??a.slots.clearIcon??P7e,J=yn({elementType:Z,externalSlotProps:Vy(a.slotProps.clearIcon,n==null?void 0:n.clearIcon),additionalProps:{fontSize:"small"},ownerState:x});return l.ref=wn(l.ref,i==null?void 0:i.rootRef),l.InputProps||(l.InputProps={}),i&&(l.InputProps.ref=i.triggerRef),!((X=l.InputProps)!=null&&X.startAdornment)&&(C==="start"||N==="start")&&(l.InputProps.startAdornment=S.jsxs(I,xe({},$,{children:[N==="start"&&S.jsx(M,xe({},V,{children:S.jsx(B,xe({},W))})),C==="start"&&S.jsx(q,xe({},G,{children:S.jsx(Z,xe({},J))}))]}))),!((ee=l.InputProps)!=null&&ee.endAdornment)&&(C==="end"||N==="end")&&(l.InputProps.endAdornment=S.jsxs(I,xe({},F,{children:[C==="end"&&S.jsx(q,xe({},G,{children:S.jsx(Z,xe({},J))})),N==="end"&&S.jsx(M,xe({},V,{children:S.jsx(B,xe({},W))}))]}))),C!=null&&(l.sx=[{"& .clearButton":{opacity:1},"@media (pointer: fine)":{"& .clearButton":{opacity:0},"&:hover, &:focus-within":{".clearButton":{opacity:1}}}},...Array.isArray(l.sx)?l.sx:[l.sx]]),S.jsx(k,xe({},l))}function Vy(t,e){return t?e?n=>xe({},lp(e,n),lp(t,n)):t:e}function Rze(t){const{ref:e,externalForwardedProps:n,slotProps:r}=t,s=A.useContext(l$),o=r$(),i=o$(n),{InputProps:a,inputProps:l}=n,c=Lt(n,kze),d=yn({elementType:SH,externalSlotProps:Vy(s.slotProps.textField,r==null?void 0:r.textField),externalForwardedProps:c,additionalProps:{ref:e,sx:o==null?void 0:o.rootSx,label:o==null?void 0:o.label,name:o==null?void 0:o.name,className:o==null?void 0:o.rootClassName,inputRef:s.inputRef},ownerState:i});return d.inputProps=xe({},l,d.inputProps),d.InputProps=xe({},a,d.InputProps),d}function NH(t){const{slots:e={},slotProps:n={},inputRef:r,children:s}=t,o=A.useMemo(()=>({inputRef:r,slots:{openPickerButton:e.openPickerButton,openPickerIcon:e.openPickerIcon,textField:e.textField,inputAdornment:e.inputAdornment,clearIcon:e.clearIcon,clearButton:e.clearButton},slotProps:{openPickerButton:n.openPickerButton,openPickerIcon:n.openPickerIcon,textField:n.textField,inputAdornment:n.inputAdornment,clearIcon:n.clearIcon,clearButton:n.clearButton}}),[r,e.openPickerButton,e.openPickerIcon,e.textField,e.inputAdornment,e.clearIcon,e.clearButton,n.openPickerButton,n.openPickerIcon,n.textField,n.inputAdornment,n.clearIcon,n.clearButton]);return S.jsx(l$.Provider,{value:o,children:s})}function EH(t){const{steps:e}=t;return d7e({steps:e,isViewMatchingStep:(n,r)=>r.views==null||r.views.includes(n),onStepChange:({step:n,defaultView:r,setView:s,view:o,views:i})=>{const a=n.views==null?r:n.views.find(l=>i.includes(l));a!==o&&s(a)}})}const Dze=["props","steps"],$ze=["ownerState"],Oze=t=>{var $;let{props:e,steps:n}=t,r=Lt(t,Dze);const{slots:s,slotProps:o,label:i,inputRef:a,localeText:l}=e,c=EH({steps:n}),{providerProps:d,renderCurrentView:f,ownerState:p}=fH(xe({},r,{props:e,localeText:l,autoFocusView:!0,viewContainerRole:"dialog",variant:"desktop",getStepNavigation:c})),g=d.privateContextValue.labelId,x=(($=o==null?void 0:o.toolbar)==null?void 0:$.hidden)??!1,b=s.field,w=yn({elementType:b,externalSlotProps:o==null?void 0:o.field,additionalProps:xe({},x&&{id:g}),ownerState:p}),C=Lt(w,$ze),N=s.layout??pH;let k=g;x&&(i?k=`${g}-label`:k=void 0);const I=xe({},o,{toolbar:xe({},o==null?void 0:o.toolbar,{titleId:g}),popper:xe({"aria-labelledby":k},o==null?void 0:o.popper)});return{renderPicker:()=>S.jsx(tH,xe({},d,{children:S.jsxs(NH,{slots:s,slotProps:I,inputRef:a,children:[S.jsx(b,xe({},C)),S.jsx(l7e,{slots:s,slotProps:I,children:S.jsx(N,xe({},I==null?void 0:I.layout,{slots:s,slotProps:I,children:f()}))})]})}))}},Uf=t=>t.saveQuery!=null,IH=({stateResponse:{localizedDigits:t,sectionsValueBoundaries:e,state:n,timezone:r,setCharacterQuery:s,setTempAndroidValueStr:o,updateSectionValue:i}})=>{const a=ir(),l=({keyPressed:f,sectionIndex:p},g,x)=>{const b=f.toLowerCase(),w=n.sections[p];if(n.characterQuery!=null&&(!x||x(n.characterQuery.value))&&n.characterQuery.sectionIndex===p){const N=`${n.characterQuery.value}${b}`,k=g(N,w);if(!Uf(k))return s({sectionIndex:p,value:N,sectionType:w.type}),k}const C=g(b,w);return Uf(C)&&!C.saveQuery?(s(null),null):(s({sectionIndex:p,value:b,sectionType:w.type}),Uf(C)?null:C)},c=f=>{const p=(b,w,C)=>{const N=w.filter(k=>k.toLowerCase().startsWith(C));return N.length===0?{saveQuery:!1}:{sectionValue:N[0],shouldGoToNextSection:N.length===1}},g=(b,w,C,N)=>{const k=I=>qU(a,r,w.type,I);if(w.contentType==="letter")return p(w.format,k(w.format),b);if(C&&N!=null&&GU(a,C).contentType==="letter"){const I=k(C),R=p(C,I,b);return Uf(R)?{saveQuery:!1}:xe({},R,{sectionValue:N(R.sectionValue,I)})}return{saveQuery:!1}};return l(f,(b,w)=>{switch(w.type){case"month":{const C=N=>ZF(a,N,a.formats.month,w.format);return g(b,w,a.formats.month,C)}case"weekDay":{const C=(N,k)=>k.indexOf(N).toString();return g(b,w,a.formats.weekday,C)}case"meridiem":return g(b,w);default:return{saveQuery:!1}}})},d=f=>{const p=({queryValue:x,skipIfBelowMinimum:b,section:w})=>{const C=nf(x,t),N=Number(C),k=e[w.type]({currentDate:null,format:w.format,contentType:w.contentType});if(N>k.maximum)return{saveQuery:!1};if(b&&N<k.minimum)return{saveQuery:!0};const I=N*10>k.maximum||C.length===k.maximum.toString().length;return{sectionValue:XU(a,N,k,t,w),shouldGoToNextSection:I}};return l(f,(x,b)=>{if(b.contentType==="digit"||b.contentType==="digit-with-letter")return p({queryValue:x,skipIfBelowMinimum:!1,section:b});if(b.type==="month"){KU(a,"digit","month","MM");const w=p({queryValue:x,skipIfBelowMinimum:!0,section:{type:b.type,format:"MM",hasLeadingZerosInInput:!0,contentType:"digit",maxLength:2}});if(Uf(w))return w;const C=ZF(a,w.sectionValue,"MM",b.format);return xe({},w,{sectionValue:C})}if(b.type==="weekDay"){const w=p({queryValue:x,skipIfBelowMinimum:!0,section:b});if(Uf(w))return w;const C=FC(a,b.format)[Number(w.sectionValue)-1];return xe({},w,{sectionValue:C})}return{saveQuery:!1}},x=>YF(x,t))};return at(f=>{const p=n.sections[f.sectionIndex],x=YF(f.keyPressed,t)?d(xe({},f,{keyPressed:QD(f.keyPressed,t)})):c(f);if(x==null){o(null);return}i({section:p,newSectionValue:x.sectionValue,shouldGoToNextSection:x.shouldGoToNextSection})})},_ze=5e3,kH=t=>{var Be;const e=ir(),n=Vu(),r=Nf(),s=Wa(),{manager:{validator:o,valueType:i,internal_valueManager:a,internal_fieldValueManager:l},internalPropsWithDefaults:c,internalPropsWithDefaults:{value:d,defaultValue:f,referenceDate:p,onChange:g,format:x,formatDensity:b="dense",selectedSections:w,onSelectedSectionsChange:C,shouldRespectLeadingZeros:N=!1,timezone:k,enableAccessibleFieldDOMStructure:I=!0},forwardedProps:{error:R}}=t,{value:$,handleValueChange:O,timezone:F}=lx({name:"a field component",timezone:k,value:d,defaultValue:f,referenceDate:p,onChange:g,valueManager:a}),M=A.useRef($);A.useEffect(()=>{M.current=$},[$]);const{hasValidationError:_}=aH({props:c,validator:o,timezone:F,value:$,onError:c.onError}),V=A.useMemo(()=>R!==void 0?R:_,[_,R]),B=A.useMemo(()=>dje(e),[e]),W=A.useMemo(()=>gje(e,B,F),[e,B,F]),q=A.useCallback(be=>l.getSectionsFromValue(be,je=>eM({utils:e,localeText:n,localizedDigits:B,format:x,date:je,formatDensity:b,shouldRespectLeadingZeros:N,enableAccessibleFieldDOMStructure:I,isRtl:s})),[l,x,n,B,s,N,e,b,I]),[j,G]=A.useState(()=>{const be=q($),je={sections:be,lastExternalValue:$,lastSectionsDependencies:{format:x,isRtl:s,locale:e.locale},tempValueStrAndroid:null,characterQuery:null},Se=lje(be),ue=a.getInitialReferenceValue({referenceDate:p,value:$,utils:e,props:c,granularity:Se,timezone:F});return xe({},je,{referenceValue:ue})}),[Z,J]=Cu({controlled:w,default:null,name:"useField",state:"selectedSections"}),X=be=>{J(be),C==null||C(be)},ee=A.useMemo(()=>ok(Z,j.sections),[Z,j.sections]),ne=ee==="all"?0:ee,oe=A.useMemo(()=>bje(j.sections,s&&!I),[j.sections,s,I]),ye=A.useMemo(()=>j.sections.every(be=>be.value===""),[j.sections]),ge=be=>{const je={validationError:o({adapter:r,value:be,timezone:F,props:c})};O(be,je)},ve=(be,je)=>{const Se=[...j.sections];return Se[be]=xe({},Se[be],{value:je,modified:!0}),Se},he=A.useRef(null),Me=au(),ze=be=>{ne!=null&&(he.current={sectionIndex:ne,value:be},Me.start(0,()=>{he.current=null}))},Oe=()=>{a.areValuesEqual(e,$,a.emptyValue)?G(be=>xe({},be,{sections:be.sections.map(je=>xe({},je,{value:""})),tempValueStrAndroid:null,characterQuery:null})):(G(be=>xe({},be,{characterQuery:null})),ge(a.emptyValue))},Ie=()=>{if(ne==null)return;const be=j.sections[ne];be.value!==""&&(ze(""),l.getDateFromSection($,be)===null?G(je=>xe({},je,{sections:ve(ne,""),tempValueStrAndroid:null,characterQuery:null})):(G(je=>xe({},je,{characterQuery:null})),ge(l.updateDateInValue($,be,null))))},me=be=>{const je=(ue,He)=>{const It=e.parse(ue,x);if(!e.isValid(It))return null;const ot=eM({utils:e,localeText:n,localizedDigits:B,format:x,date:It,formatDensity:b,shouldRespectLeadingZeros:N,enableAccessibleFieldDOMStructure:I,isRtl:s});return JF(e,It,ot,He,!1)},Se=l.parseValueStr(be,j.referenceValue,je);ge(Se)},ke=au(),pe=({section:be,newSectionValue:je,shouldGoToNextSection:Se})=>{Me.clear(),ke.clear();const ue=l.getDateFromSection($,be);Se&&ne<j.sections.length-1&&X(ne+1);const He=ve(ne,je),It=l.getDateSectionsFromValue(He,be),ot=hje(e,It,B);if(e.isValid(ot)){const Vt=JF(e,ot,It,l.getDateFromSection(j.referenceValue,be),!0);return ue==null&&ke.start(0,()=>{M.current===$&&G(Xt=>xe({},Xt,{sections:l.clearDateSections(j.sections,be),tempValueStrAndroid:null}))}),ge(l.updateDateInValue($,be,Vt))}return It.every(Vt=>Vt.value!=="")&&(ue==null||e.isValid(ue))?(ze(je),ge(l.updateDateInValue($,be,ot))):ue!=null?(ze(je),ge(l.updateDateInValue($,be,null))):G(Vt=>xe({},Vt,{sections:He,tempValueStrAndroid:null}))},Pe=be=>G(je=>xe({},je,{tempValueStrAndroid:be})),Ve=at(be=>{G(je=>xe({},je,{characterQuery:be}))});if($!==j.lastExternalValue){let be;he.current!=null&&!e.isValid(l.getDateFromSection($,j.sections[he.current.sectionIndex]))?be=ve(he.current.sectionIndex,he.current.value):be=q($),G(je=>xe({},je,{lastExternalValue:$,sections:be,sectionsDependencies:{format:x,isRtl:s,locale:e.locale},referenceValue:l.updateReferenceValue(e,$,je.referenceValue),tempValueStrAndroid:null}))}if(s!==j.lastSectionsDependencies.isRtl||x!==j.lastSectionsDependencies.format||e.locale!==j.lastSectionsDependencies.locale){const be=q($);G(je=>xe({},je,{lastSectionsDependencies:{format:x,isRtl:s,locale:e.locale},sections:be,tempValueStrAndroid:null,characterQuery:null}))}j.characterQuery!=null&&!V&&ne==null&&Ve(null),j.characterQuery!=null&&((Be=j.sections[j.characterQuery.sectionIndex])==null?void 0:Be.type)!==j.characterQuery.sectionType&&Ve(null),A.useEffect(()=>{he.current!=null&&(he.current=null)});const Fe=au();return A.useEffect(()=>(j.characterQuery!=null&&Fe.start(_ze,()=>Ve(null)),()=>{}),[j.characterQuery,Ve,Fe]),A.useEffect(()=>{j.tempValueStrAndroid!=null&&ne!=null&&Ie()},[j.sections]),{activeSectionIndex:ne,areAllSectionsEmpty:ye,error:V,localizedDigits:B,parsedSelectedSections:ee,sectionOrder:oe,sectionsValueBoundaries:W,state:j,timezone:F,value:$,clearValue:Oe,clearActiveSection:Ie,setCharacterQuery:Ve,setSelectedSections:X,setTempAndroidValueStr:Pe,updateSectionValue:pe,updateValueFromValueStr:me,getSectionsFromValue:q}};function TH(t){const{manager:{internal_useApplyDefaultValuesToFieldInternalProps:e},internalProps:n,skipContextFieldRefAssignment:r}=t,s=r$(),o=QU(),i=wn(n.unstableFieldRef,r?null:o==null?void 0:o.fieldRef),a=s==null?void 0:s.setValue,l=A.useCallback((d,f)=>a==null?void 0:a(d,{validationError:f.validationError,shouldClose:!1}),[a]),c=A.useMemo(()=>o!=null&&s!=null?xe({value:s.value,onChange:l,timezone:s.timezone,disabled:s.disabled,readOnly:s.readOnly,autoFocus:s.autoFocus&&!s.open,focused:s.open?!0:void 0,format:s.fieldFormat,formatDensity:o.formatDensity,enableAccessibleFieldDOMStructure:o.enableAccessibleFieldDOMStructure,selectedSections:o.selectedSections,onSelectedSectionsChange:o.onSelectedSectionsChange,unstableFieldRef:i},n):n,[s,o,n,l,i]);return e(c)}function c$(t){const{focused:e,domGetters:n,stateResponse:{parsedSelectedSections:r,state:s}}=t;if(!n.isReady())return;const o=document.getSelection();if(!o)return;if(r==null){o.rangeCount>0&&n.getRoot().contains(o.getRangeAt(0).startContainer)&&o.removeAllRanges(),e&&n.getRoot().blur();return}if(!n.getRoot().contains(to(document)))return;const i=new window.Range;let a;r==="all"?a=n.getRoot():s.sections[r].type==="empty"?a=n.getSectionContainer(r):a=n.getSectionContent(r),i.selectNodeContents(a),a.focus(),o.removeAllRanges(),o.addRange(i)}function AH(t){const e=ir(),{manager:{internal_fieldValueManager:n},internalPropsWithDefaults:{minutesStep:r,disabled:s,readOnly:o},stateResponse:{state:i,value:a,activeSectionIndex:l,parsedSelectedSections:c,sectionsValueBoundaries:d,localizedDigits:f,timezone:p,sectionOrder:g,clearValue:x,clearActiveSection:b,setSelectedSections:w,updateSectionValue:C}}=t;return at(N=>{if(!s)switch(!0){case((N.ctrlKey||N.metaKey)&&String.fromCharCode(N.keyCode)==="A"&&!N.shiftKey&&!N.altKey):{N.preventDefault(),w("all");break}case N.key==="ArrowRight":{if(N.preventDefault(),c==null)w(g.startIndex);else if(c==="all")w(g.endIndex);else{const k=g.neighbors[c].rightIndex;k!==null&&w(k)}break}case N.key==="ArrowLeft":{if(N.preventDefault(),c==null)w(g.endIndex);else if(c==="all")w(g.startIndex);else{const k=g.neighbors[c].leftIndex;k!==null&&w(k)}break}case N.key==="Delete":{if(N.preventDefault(),o)break;c==null||c==="all"?x():b();break}case["ArrowUp","ArrowDown","Home","End","PageUp","PageDown"].includes(N.key):{if(N.preventDefault(),o||l==null)break;c==="all"&&w(l);const k=i.sections[l],I=Fze(e,p,k,N.key,d,f,n.getDateFromSection(a,k),{minutesStep:r});C({section:k,newSectionValue:I,shouldGoToNextSection:!1});break}}})}function Pze(t){switch(t){case"ArrowUp":return 1;case"ArrowDown":return-1;case"PageUp":return 5;case"PageDown":return-5;default:return 0}}function Fze(t,e,n,r,s,o,i,a){const l=Pze(r),c=r==="Home",d=r==="End",f=n.value===""||c||d,p=()=>{const x=s[n.type]({currentDate:i,format:n.format,contentType:n.contentType}),b=N=>XU(t,N,x,o,n),w=n.type==="minutes"&&(a!=null&&a.minutesStep)?a.minutesStep:1;let C;if(f){if(n.type==="year"&&!d&&!c)return t.formatByString(t.date(void 0,e),n.format);l>0||c?C=x.minimum:C=x.maximum}else C=parseInt(nf(n.value,o),10)+l*w;return C%w!==0&&((l<0||c)&&(C+=w-(w+C)%w),(l>0||d)&&(C-=C%w)),C>x.maximum?b(x.minimum+(C-x.maximum-1)%(x.maximum-x.minimum+1)):C<x.minimum?b(x.maximum-(x.minimum-C-1)%(x.maximum-x.minimum+1)):b(C)},g=()=>{const x=qU(t,e,n.type,n.format);if(x.length===0)return n.value;if(f)return l>0||c?x[0]:x[x.length-1];const C=((x.indexOf(n.value)+l)%x.length+x.length)%x.length;return x[C]};return n.contentType==="digit"||n.contentType==="digit-with-letter"?p():g()}function Mze(t){const{manager:e,focused:n,setFocused:r,domGetters:s,stateResponse:o,applyCharacterEditing:i,internalPropsWithDefaults:a,stateResponse:{parsedSelectedSections:l,sectionOrder:c,state:d,clearValue:f,setCharacterQuery:p,setSelectedSections:g,updateValueFromValueStr:x},internalPropsWithDefaults:{disabled:b=!1,readOnly:w=!1}}=t,C=AH({manager:e,internalPropsWithDefaults:a,stateResponse:o}),N=au(),k=at(F=>{b||!s.isReady()||(r(!0),l==="all"?N.start(0,()=>{const M=document.getSelection().getRangeAt(0).startOffset;if(M===0){g(c.startIndex);return}let _=0,V=0;for(;V<M&&_<d.sections.length;){const B=d.sections[_];_+=1,V+=`${B.startSeparator}${B.value||B.placeholder}${B.endSeparator}`.length}g(_-1)}):n?s.getRoot().contains(F.target)||g(c.startIndex):(r(!0),g(c.startIndex)))}),I=at(F=>{if(!s.isReady()||l!=="all")return;const _=F.target.textContent??"";s.getRoot().innerHTML=d.sections.map(V=>`${V.startSeparator}${V.value||V.placeholder}${V.endSeparator}`).join(""),c$({focused:n,domGetters:s,stateResponse:o}),_.length===0||_.charCodeAt(0)===10?(f(),g("all")):_.length>1?x(_):(l==="all"&&g(0),i({keyPressed:_,sectionIndex:0}))}),R=at(F=>{if(w||l!=="all"){F.preventDefault();return}const M=F.clipboardData.getData("text");F.preventDefault(),p(null),x(M)}),$=at(()=>{if(n||b||!s.isReady())return;const F=to(document);r(!0),s.getSectionIndexFromDOMElement(F)!=null||g(c.startIndex)}),O=at(()=>{setTimeout(()=>{if(!s.isReady())return;const F=to(document);!s.getRoot().contains(F)&&(r(!1),g(null))})});return{onKeyDown:C,onBlur:O,onFocus:$,onClick:k,onPaste:R,onInput:I,contentEditable:l==="all",tabIndex:l===0?-1:0}}function Lze(t){const{manager:{internal_fieldValueManager:e},stateResponse:{areAllSectionsEmpty:n,state:r,updateValueFromValueStr:s}}=t,o=at(a=>{s(a.target.value)});return{value:A.useMemo(()=>n?"":e.getV7HiddenInputValueFromSections(r.sections),[n,r.sections,e]),onChange:o}}function Bze(t){const{stateResponse:{setSelectedSections:e},internalPropsWithDefaults:{disabled:n=!1}}=t,r=A.useCallback(s=>o=>{n||o.isDefaultPrevented()||e(s)},[n,e]);return A.useCallback(s=>({"data-sectionindex":s,onClick:r(s)}),[r])}function jze(t){const e=ir(),n=Vu(),r=bc(),{focused:s,domGetters:o,stateResponse:i,applyCharacterEditing:a,manager:{internal_fieldValueManager:l},stateResponse:{parsedSelectedSections:c,sectionsValueBoundaries:d,state:f,value:p,clearActiveSection:g,setCharacterQuery:x,setSelectedSections:b,updateSectionValue:w,updateValueFromValueStr:C},internalPropsWithDefaults:{disabled:N=!1,readOnly:k=!1}}=t,I=c==="all",R=!I&&!N&&!k,$=at(B=>{if(!o.isReady())return;const W=f.sections[B];o.getSectionContent(B).innerHTML=W.value||W.placeholder,c$({focused:s,domGetters:o,stateResponse:i})}),O=at(B=>{if(!o.isReady())return;const W=B.target,q=W.textContent??"",j=o.getSectionIndexFromDOMElement(W),G=f.sections[j];if(k){$(j);return}if(q.length===0){if(G.value===""){$(j);return}const Z=B.nativeEvent.inputType;if(Z==="insertParagraph"||Z==="insertLineBreak"){$(j);return}$(j),g();return}a({keyPressed:q,sectionIndex:j}),$(j)}),F=at(B=>{B.preventDefault()}),M=at(B=>{if(B.preventDefault(),k||N||typeof c!="number")return;const W=f.sections[c],q=B.clipboardData.getData("text"),j=/^[a-zA-Z]+$/.test(q),G=/^[0-9]+$/.test(q),Z=/^(([a-zA-Z]+)|)([0-9]+)(([a-zA-Z]+)|)$/.test(q);W.contentType==="letter"&&j||W.contentType==="digit"&&G||W.contentType==="digit-with-letter"&&Z?(x(null),w({section:W,newSectionValue:q,shouldGoToNextSection:!0})):!j&&!G&&(x(null),C(q))}),_=at(B=>{B.preventDefault(),B.dataTransfer.dropEffect="none"}),V=A.useCallback(B=>()=>{N||b(B)},[N,b]);return A.useCallback((B,W)=>{const q=d[B.type]({currentDate:l.getDateFromSection(p,B),contentType:B.contentType,format:B.format});return{onInput:O,onPaste:M,onMouseUp:F,onDragOver:_,onFocus:V(W),"aria-labelledby":`${r}-${B.type}`,"aria-readonly":k,"aria-valuenow":Vze(B,e),"aria-valuemin":q.minimum,"aria-valuemax":q.maximum,"aria-valuetext":B.value?zze(B,e):n.empty,"aria-label":n[B.type],"aria-disabled":N,tabIndex:I||W>0?-1:0,contentEditable:!I&&!N&&!k,role:"spinbutton",id:`${r}-${B.type}`,"data-range-position":B.dateName||void 0,spellCheck:R?!1:void 0,autoCapitalize:R?"off":void 0,autoCorrect:R?"off":void 0,children:B.value||B.placeholder,inputMode:B.contentType==="letter"?"text":"numeric"}},[d,r,I,N,k,R,n,e,O,M,F,_,V,l,p])}function zze(t,e){if(t.value)switch(t.type){case"month":{if(t.contentType==="digit")return e.format(e.setMonth(e.date(),Number(t.value)-1),"month");const n=e.parse(t.value,t.format);return n?e.format(n,"month"):void 0}case"day":return t.contentType==="digit"?e.format(e.setDate(e.startOfYear(e.date()),Number(t.value)),"dayOfMonthFull"):t.value;case"weekDay":return;default:return}}function Vze(t,e){if(t.value)switch(t.type){case"weekDay":return t.contentType==="letter"?void 0:Number(t.value);case"meridiem":{const n=e.parse(`01:00 ${t.value}`,`${e.formats.hours12h}:${e.formats.minutes} ${t.format}`);return n?e.getHours(n)>=12?1:0:void 0}case"day":return t.contentType==="digit-with-letter"?parseInt(t.value,10):Number(t.value);case"month":{if(t.contentType==="digit")return Number(t.value);const n=e.parse(t.value,t.format);return n?e.getMonth(n)+1:void 0}default:return t.contentType!=="letter"?Number(t.value):void 0}}const Wze=t=>{const{props:e,manager:n,skipContextFieldRefAssignment:r,manager:{valueType:s,internal_useOpenPickerButtonAriaLabel:o}}=t,{internalProps:i,forwardedProps:a}=iH(e,s),l=TH({manager:n,internalProps:i,skipContextFieldRefAssignment:r}),{sectionListRef:c,onBlur:d,onClick:f,onFocus:p,onInput:g,onPaste:x,onKeyDown:b,onClear:w,clearable:C}=a,{disabled:N=!1,readOnly:k=!1,autoFocus:I=!1,focused:R,unstableFieldRef:$}=l,O=A.useRef(null),F=wn(c,O),M=A.useMemo(()=>({isReady:()=>O.current!=null,getRoot:()=>O.current.getRoot(),getSectionContainer:Fe=>O.current.getSectionContainer(Fe),getSectionContent:Fe=>O.current.getSectionContent(Fe),getSectionIndexFromDOMElement:Fe=>O.current.getSectionIndexFromDOMElement(Fe)}),[O]),_=kH({manager:n,internalPropsWithDefaults:l,forwardedProps:a}),{areAllSectionsEmpty:V,error:B,parsedSelectedSections:W,sectionOrder:q,state:j,value:G,clearValue:Z,setSelectedSections:J}=_,X=IH({stateResponse:_}),ee=o(G),[ne,oe]=A.useState(!1);function ye(Fe=0){if(N||!O.current||iM(O)!=null)return;const Be=ok(Fe,j.sections);oe(!0),O.current.getSectionContent(Be).focus()}const ge=Mze({manager:n,internalPropsWithDefaults:l,stateResponse:_,applyCharacterEditing:X,focused:ne,setFocused:oe,domGetters:M}),ve=Lze({manager:n,stateResponse:_}),he=Bze({stateResponse:_,internalPropsWithDefaults:l}),Me=jze({manager:n,stateResponse:_,applyCharacterEditing:X,internalPropsWithDefaults:l,domGetters:M,focused:ne}),ze=at(Fe=>{b==null||b(Fe),ge.onKeyDown(Fe)}),Oe=at(Fe=>{d==null||d(Fe),ge.onBlur(Fe)}),Ie=at(Fe=>{p==null||p(Fe),ge.onFocus(Fe)}),me=at(Fe=>{Fe.isDefaultPrevented()||(f==null||f(Fe),ge.onClick(Fe))}),ke=at(Fe=>{x==null||x(Fe),ge.onPaste(Fe)}),pe=at(Fe=>{g==null||g(Fe),ge.onInput(Fe)}),Pe=at((Fe,...Be)=>{Fe.preventDefault(),w==null||w(Fe,...Be),Z(),aM(O)?J(q.startIndex):ye(0)}),Ve=A.useMemo(()=>j.sections.map((Fe,Be)=>{const be=Me(Fe,Be);return{container:he(Be),content:Me(Fe,Be),before:{children:Fe.startSeparator},after:{children:Fe.endSeparator,"data-range-position":Fe.isEndFormatSeparator?be["data-range-position"]:void 0}}}),[j.sections,he,Me]);return A.useEffect(()=>{if(O.current==null)throw new Error(["MUI X: The `sectionListRef` prop has not been initialized by `PickersSectionList`","You probably tried to pass a component to the `textField` slot that contains an `<input />` element instead of a `PickersSectionList`.","","If you want to keep using an `<input />` HTML element for the editing, please add the `enableAccessibleFieldDOMStructure={false}` prop to your Picker or Field component:","","<DatePicker enableAccessibleFieldDOMStructure={false} slots={{ textField: MyCustomTextField }} />","","Learn more about the field accessible DOM structure on the MUI documentation: https://mui.com/x/react-date-pickers/fields/#fields-to-edit-a-single-element"].join(`
`));I&&!N&&O.current&&O.current.getSectionContent(q.startIndex).focus()},[]),ts(()=>{if(!(!ne||!O.current)){if(W==="all")O.current.getRoot().focus();else if(typeof W=="number"){const Fe=O.current.getSectionContent(W);Fe&&Fe.focus()}}},[W,ne]),ts(()=>{c$({focused:ne,domGetters:M,stateResponse:_})}),A.useImperativeHandle($,()=>({getSections:()=>j.sections,getActiveSectionIndex:()=>iM(O),setSelectedSections:Fe=>{if(N||!O.current)return;const Be=ok(Fe,j.sections);oe((Be==="all"?0:Be)!==null),J(Fe)},focusField:ye,isFieldFocused:()=>aM(O)})),xe({},a,ge,{onBlur:Oe,onClick:me,onFocus:Ie,onInput:pe,onPaste:ke,onKeyDown:ze,onClear:Pe},ve,{error:B,clearable:!!(C&&!V&&!k&&!N),focused:R??ne,sectionListRef:F,enableAccessibleFieldDOMStructure:!0,elements:Ve,areAllSectionsEmpty:V,disabled:N,readOnly:k,autoFocus:I,openPickerAriaLabel:ee})};function iM(t){const e=to(document);return!e||!t.current||!t.current.getRoot().contains(e)?null:t.current.getSectionIndexFromDOMElement(e)}function aM(t){const e=to(document);return!!t.current&&t.current.getRoot().contains(e)}const hh=t=>t.replace(/[\u2066\u2067\u2068\u2069]/g,""),Uze=(t,e,n)=>{let r=0,s=n?1:0;const o=[];for(let i=0;i<t.length;i+=1){const a=t[i],l=e$(a,n?"input-rtl":"input-ltr",e),c=`${a.startSeparator}${l}${a.endSeparator}`,d=hh(c).length,f=c.length,p=hh(l),g=s+(p===""?0:l.indexOf(p[0]))+a.startSeparator.length,x=g+p.length;o.push(xe({},a,{start:r,end:r+d,startInInput:g,endInInput:x})),r+=d,s+=f}return o},Hze=t=>{const e=Wa(),n=au(),r=au(),{props:s,manager:o,skipContextFieldRefAssignment:i,manager:{valueType:a,internal_valueManager:l,internal_fieldValueManager:c,internal_useOpenPickerButtonAriaLabel:d}}=t,{internalProps:f,forwardedProps:p}=iH(s,a),g=TH({manager:o,internalProps:f,skipContextFieldRefAssignment:i}),{onFocus:x,onClick:b,onPaste:w,onBlur:C,onKeyDown:N,onClear:k,clearable:I,inputRef:R,placeholder:$}=p,{readOnly:O=!1,disabled:F=!1,autoFocus:M=!1,focused:_,unstableFieldRef:V}=g,B=A.useRef(null),W=wn(R,B),q=kH({manager:o,internalPropsWithDefaults:g,forwardedProps:p}),{activeSectionIndex:j,areAllSectionsEmpty:G,error:Z,localizedDigits:J,parsedSelectedSections:X,sectionOrder:ee,state:ne,value:oe,clearValue:ye,clearActiveSection:ge,setCharacterQuery:ve,setSelectedSections:he,setTempAndroidValueStr:Me,updateSectionValue:ze,updateValueFromValueStr:Oe,getSectionsFromValue:Ie}=q,me=IH({stateResponse:q}),ke=d(oe),pe=A.useMemo(()=>Uze(ne.sections,J,e),[ne.sections,J,e]);function Pe(){const ft=B.current.selectionStart??0;let Ot;ft<=pe[0].startInInput||ft>=pe[pe.length-1].endInInput?Ot=1:Ot=pe.findIndex(cn=>cn.startInInput-cn.startSeparator.length>ft);const Ct=Ot===-1?pe.length-1:Ot-1;he(Ct)}function Ve(ft=0){var Ot;to(document)!==B.current&&((Ot=B.current)==null||Ot.focus(),he(ft))}const Fe=at(ft=>{x==null||x(ft);const Ot=B.current;n.start(0,()=>{!Ot||Ot!==B.current||j==null&&(Ot.value.length&&Number(Ot.selectionEnd)-Number(Ot.selectionStart)===Ot.value.length?he("all"):Pe())})}),Be=at((ft,...Ot)=>{ft.isDefaultPrevented()||(b==null||b(ft,...Ot),Pe())}),be=at(ft=>{if(w==null||w(ft),ft.preventDefault(),O||F)return;const Ot=ft.clipboardData.getData("text");if(typeof X=="number"){const Ct=ne.sections[X],cn=/^[a-zA-Z]+$/.test(Ot),Bt=/^[0-9]+$/.test(Ot),Xe=/^(([a-zA-Z]+)|)([0-9]+)(([a-zA-Z]+)|)$/.test(Ot);if(Ct.contentType==="letter"&&cn||Ct.contentType==="digit"&&Bt||Ct.contentType==="digit-with-letter"&&Xe){ve(null),ze({section:Ct,newSectionValue:Ot,shouldGoToNextSection:!0});return}if(cn||Bt)return}ve(null),Oe(Ot)}),je=at(ft=>{C==null||C(ft),he(null)}),Se=at(ft=>{if(O)return;const Ot=ft.target.value;if(Ot===""){ye();return}const Ct=ft.nativeEvent.data,cn=Ct&&Ct.length>1,Bt=cn?Ct:Ot,Xe=hh(Bt);if(X==="all"&&he(j),j==null||cn){Oe(cn?Ct:Xe);return}let et;if(X==="all"&&Xe.length===1)et=Xe;else{const ut=hh(c.getV6InputValueFromSections(pe,J,e));let it=-1,vn=-1;for(let zr=0;zr<ut.length;zr+=1)it===-1&&ut[zr]!==Xe[zr]&&(it=zr),vn===-1&&ut[ut.length-zr-1]!==Xe[Xe.length-zr-1]&&(vn=zr);const Cr=pe[j];if(it<Cr.start||ut.length-vn-1>Cr.end)return;const sn=Xe.length-ut.length+Cr.end-hh(Cr.endSeparator||"").length;et=Xe.slice(Cr.start+hh(Cr.startSeparator||"").length,sn)}if(et.length===0){yje()&&Me(Bt),ge();return}me({keyPressed:et,sectionIndex:j})}),ue=at((ft,...Ot)=>{ft.preventDefault(),k==null||k(ft,...Ot),ye(),lM(B)?he(ee.startIndex):Ve(0)}),He=AH({manager:o,internalPropsWithDefaults:g,stateResponse:q}),It=at(ft=>{N==null||N(ft),He(ft)}),ot=A.useMemo(()=>$!==void 0?$:c.getV6InputValueFromSections(Ie(l.emptyValue),J,e),[$,c,Ie,l.emptyValue,J,e]),Vt=A.useMemo(()=>ne.tempValueStrAndroid??c.getV6InputValueFromSections(ne.sections,J,e),[ne.sections,c,ne.tempValueStrAndroid,J,e]);A.useEffect(()=>{B.current&&B.current===to(document)&&he("all")},[]),ts(()=>{function ft(){if(!B.current)return;if(X==null){B.current.scrollLeft&&(B.current.scrollLeft=0);return}if(B.current!==to(document))return;const Ot=B.current.scrollTop;if(X==="all")B.current.select();else{const Ct=pe[X],cn=Ct.type==="empty"?Ct.startInInput-Ct.startSeparator.length:Ct.startInInput,Bt=Ct.type==="empty"?Ct.endInInput+Ct.endSeparator.length:Ct.endInInput;(cn!==B.current.selectionStart||Bt!==B.current.selectionEnd)&&B.current===to(document)&&B.current.setSelectionRange(cn,Bt),r.start(0,()=>{B.current&&B.current===to(document)&&B.current.selectionStart===B.current.selectionEnd&&(B.current.selectionStart!==cn||B.current.selectionEnd!==Bt)&&ft()})}B.current.scrollTop=Ot}ft()});const Xt=A.useMemo(()=>j==null||ne.sections[j].contentType==="letter"?"text":"numeric",[j,ne.sections]),hn=!(B.current&&B.current===to(document))&&G;return A.useImperativeHandle(V,()=>({getSections:()=>ne.sections,getActiveSectionIndex:()=>{const ft=B.current.selectionStart??0,Ot=B.current.selectionEnd??0;if(ft===0&&Ot===0)return null;const Ct=ft<=pe[0].startInInput?1:pe.findIndex(cn=>cn.startInInput-cn.startSeparator.length>ft);return Ct===-1?pe.length-1:Ct-1},setSelectedSections:ft=>he(ft),focusField:Ve,isFieldFocused:()=>lM(B)})),xe({},p,{error:Z,clearable:!!(I&&!G&&!O&&!F),onBlur:je,onClick:Be,onFocus:Fe,onPaste:be,onKeyDown:It,onClear:ue,inputRef:W,enableAccessibleFieldDOMStructure:!1,placeholder:ot,inputMode:Xt,autoComplete:"off",value:hn?"":Vt,onChange:Se,focused:_,disabled:F,readOnly:O,autoFocus:M,openPickerAriaLabel:ke})};function lM(t){return t.current===to(document)}const Gze=t=>{const e=QU();return(t.props.enableAccessibleFieldDOMStructure??(e==null?void 0:e.enableAccessibleFieldDOMStructure)??!0?Wze:Hze)(t)},qze=t=>{const e=Xje(t);return Gze({manager:e,props:t})},Xze=["slots","slotProps"],RH=A.forwardRef(function(e,n){const r=vr({props:e,name:"MuiDateField"}),{slots:s,slotProps:o}=r,i=Lt(r,Xze),a=Rze({slotProps:o,ref:n,externalForwardedProps:i}),l=qze(a);return S.jsx(Aze,{slots:s,slotProps:o,fieldResponse:l,defaultOpenPickerIcon:_7e})}),DH=({shouldDisableDate:t,shouldDisableMonth:e,shouldDisableYear:n,minDate:r,maxDate:s,disableFuture:o,disablePast:i,timezone:a})=>{const l=Nf();return A.useCallback(c=>ix({adapter:l,value:c,timezone:a,props:{shouldDisableDate:t,shouldDisableMonth:e,shouldDisableYear:n,minDate:r,maxDate:s,disableFuture:o,disablePast:i}})!==null,[l,t,e,n,r,s,o,i,a])},Kze=(t,e)=>(n,r)=>{switch(r.type){case"setVisibleDate":return xe({},n,{slideDirection:r.direction,currentMonth:r.month,isMonthSwitchingAnimating:!e.isSameMonth(r.month,n.currentMonth)&&!t&&!r.skipAnimation,focusedDay:r.focusedDay});case"changeMonthTimezone":{const s=r.newTimezone;if(e.getTimezone(n.currentMonth)===s)return n;let o=e.setTimezone(n.currentMonth,s);return e.getMonth(o)!==e.getMonth(n.currentMonth)&&(o=e.setMonth(o,e.getMonth(n.currentMonth))),xe({},n,{currentMonth:o})}case"finishMonthSwitchingAnimation":return xe({},n,{isMonthSwitchingAnimating:!1});default:throw new Error("missing support")}},Yze=t=>{const{value:e,referenceDate:n,disableFuture:r,disablePast:s,maxDate:o,minDate:i,onMonthChange:a,onYearChange:l,reduceAnimations:c,shouldDisableDate:d,timezone:f,getCurrentMonthFromVisibleDate:p}=t,g=ir(),x=A.useRef(Kze(!!c,g)).current,b=A.useMemo(()=>Al.getInitialReferenceValue({value:e,utils:g,timezone:f,props:t,referenceDate:n,granularity:al.day}),[n,f]),[w,C]=A.useReducer(x,{isMonthSwitchingAnimating:!1,focusedDay:b,currentMonth:g.startOfMonth(b),slideDirection:"left"}),N=DH({shouldDisableDate:d,minDate:i,maxDate:o,disableFuture:r,disablePast:s,timezone:f});A.useEffect(()=>{C({type:"changeMonthTimezone",newTimezone:g.getTimezone(b)})},[b,g]);const k=at(({target:R,reason:$})=>{if($==="cell-interaction"&&w.focusedDay!=null&&g.isSameDay(R,w.focusedDay))return;const O=$==="cell-interaction";let F,M;if($==="cell-interaction")F=p(R,w.currentMonth),M=R;else if(F=g.isSameMonth(R,w.currentMonth)?w.currentMonth:g.startOfMonth(R),M=R,N(M)){const B=g.startOfMonth(R),W=g.endOfMonth(R);M=m0({utils:g,date:M,minDate:g.isBefore(i,B)?B:i,maxDate:g.isAfter(o,W)?W:o,disablePast:s,disableFuture:r,isDateDisabled:N,timezone:f})}const _=!g.isSameMonth(w.currentMonth,F),V=!g.isSameYear(w.currentMonth,F);_&&(a==null||a(F)),V&&(l==null||l(g.startOfYear(F))),C({type:"setVisibleDate",month:F,direction:g.isAfterDay(F,w.currentMonth)?"left":"right",focusedDay:w.focusedDay!=null&&M!=null&&g.isSameDay(M,w.focusedDay)?w.focusedDay:M,skipAnimation:O})}),I=A.useCallback(()=>{C({type:"finishMonthSwitchingAnimation"})},[]);return{referenceDate:b,calendarState:w,setVisibleDate:k,isDateDisabled:N,onMonthSwitchingAnimationEnd:I}},Zze=t=>Nt("MuiPickersFadeTransitionGroup",t);gt("MuiPickersFadeTransitionGroup",["root"]);const Qze=["children"],Jze=t=>vt({root:["root"]},Zze,t),eVe=De(nx,{name:"MuiPickersFadeTransitionGroup",slot:"Root"})({display:"block",position:"relative"});function $H(t){const e=vr({props:t,name:"MuiPickersFadeTransitionGroup"}),{className:n,reduceAnimations:r,transKey:s,classes:o}=e,{children:i}=e,a=Lt(e,Qze),l=Jze(o),c=Sf();return r?i:S.jsx(eVe,{className:st(l.root,n),ownerState:a,children:S.jsx(tf,{appear:!1,mountOnEnter:!0,unmountOnExit:!0,timeout:{appear:c.transitions.duration.enteringScreen,enter:c.transitions.duration.enteringScreen,exit:0},children:i},s)})}function tVe(t){return Nt("MuiPickersDay",t)}const nd=gt("MuiPickersDay",["root","dayWithMargin","dayOutsideMonth","hiddenDaySpacingFiller","today","selected","disabled"]);function OH(t){const{disabled:e,selected:n,today:r,outsideCurrentMonth:s,day:o,disableMargin:i,disableHighlightToday:a,showDaysOutsideCurrentMonth:l}=t,c=ir(),{ownerState:d}=Ws();return A.useMemo(()=>xe({},d,{day:o,isDaySelected:n??!1,isDayDisabled:e??!1,isDayCurrent:r??!1,isDayOutsideMonth:s??!1,isDayStartOfWeek:c.isSameDay(o,c.startOfWeek(o)),isDayEndOfWeek:c.isSameDay(o,c.endOfWeek(o)),disableMargin:i??!1,disableHighlightToday:a??!1,showDaysOutsideCurrentMonth:l??!1}),[c,d,o,n,e,r,s,i,a,l])}const nVe=["autoFocus","className","classes","hidden","isAnimating","onClick","onDaySelect","onFocus","onBlur","onKeyDown","onMouseDown","onMouseEnter","children","isFirstVisibleCell","isLastVisibleCell","day","selected","disabled","today","outsideCurrentMonth","disableMargin","disableHighlightToday","showDaysOutsideCurrentMonth"],rVe=(t,e)=>{const{isDaySelected:n,isDayDisabled:r,isDayCurrent:s,isDayOutsideMonth:o,disableMargin:i,disableHighlightToday:a,showDaysOutsideCurrentMonth:l}=e,c=o&&!l;return vt({root:["root",n&&!c&&"selected",r&&"disabled",!i&&"dayWithMargin",!a&&s&&"today",o&&l&&"dayOutsideMonth",c&&"hiddenDaySpacingFiller"],hiddenDaySpacingFiller:["hiddenDaySpacingFiller"]},tVe,t)},_H=({theme:t})=>xe({},t.typography.caption,{width:g0,height:g0,borderRadius:"50%",padding:0,backgroundColor:"transparent",transition:t.transitions.create("background-color",{duration:t.transitions.duration.short}),color:(t.vars||t).palette.text.primary,"@media (pointer: fine)":{"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.hoverOpacity})`:pn(t.palette.primary.main,t.palette.action.hoverOpacity)}},"&:focus":{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.focusOpacity})`:pn(t.palette.primary.main,t.palette.action.focusOpacity),[`&.${nd.selected}`]:{willChange:"background-color",backgroundColor:(t.vars||t).palette.primary.dark}},[`&.${nd.selected}`]:{color:(t.vars||t).palette.primary.contrastText,backgroundColor:(t.vars||t).palette.primary.main,fontWeight:t.typography.fontWeightMedium,"&:hover":{willChange:"background-color",backgroundColor:(t.vars||t).palette.primary.dark}},[`&.${nd.disabled}:not(.${nd.selected})`]:{color:(t.vars||t).palette.text.disabled},[`&.${nd.disabled}&.${nd.selected}`]:{opacity:.6},variants:[{props:{disableMargin:!1},style:{margin:`0 ${LC}px`}},{props:{isDayOutsideMonth:!0,showDaysOutsideCurrentMonth:!0},style:{color:(t.vars||t).palette.text.secondary}},{props:{disableHighlightToday:!1,isDayCurrent:!0},style:{[`&:not(.${nd.selected})`]:{border:`1px solid ${(t.vars||t).palette.text.secondary}`}}}]}),PH=(t,e)=>{const{ownerState:n}=t;return[e.root,!n.disableMargin&&e.dayWithMargin,!n.disableHighlightToday&&n.isDayCurrent&&e.today,!n.isDayOutsideMonth&&n.showDaysOutsideCurrentMonth&&e.dayOutsideMonth,n.isDayOutsideMonth&&!n.showDaysOutsideCurrentMonth&&e.hiddenDaySpacingFiller]},sVe=De(cp,{name:"MuiPickersDay",slot:"Root",overridesResolver:PH})(_H),oVe=De("div",{name:"MuiPickersDay",slot:"Root",overridesResolver:PH})(({theme:t})=>xe({},_H({theme:t}),{opacity:0,pointerEvents:"none"})),Fm=()=>{},iVe=A.forwardRef(function(e,n){const r=vr({props:e,name:"MuiPickersDay"}),{autoFocus:s=!1,className:o,classes:i,isAnimating:a,onClick:l,onDaySelect:c,onFocus:d=Fm,onBlur:f=Fm,onKeyDown:p=Fm,onMouseDown:g=Fm,onMouseEnter:x=Fm,children:b,day:w,selected:C,disabled:N,today:k,outsideCurrentMonth:I,disableMargin:R,disableHighlightToday:$,showDaysOutsideCurrentMonth:O}=r,F=Lt(r,nVe),M=OH({day:w,selected:C,disabled:N,today:k,outsideCurrentMonth:I,disableMargin:R,disableHighlightToday:$,showDaysOutsideCurrentMonth:O}),_=rVe(i,M),V=ir(),B=A.useRef(null),W=wn(B,n);ts(()=>{s&&!N&&!a&&!I&&B.current.focus()},[s,N,a,I]);const q=G=>{g(G),I&&G.preventDefault()},j=G=>{N||c(w),I&&G.currentTarget.focus(),l&&l(G)};return I&&!O?S.jsx(oVe,{className:st(_.root,_.hiddenDaySpacingFiller,o),ownerState:M,role:F.role}):S.jsx(sVe,xe({className:st(_.root,o),ref:W,centerRipple:!0,disabled:N,tabIndex:C?0:-1,onKeyDown:G=>p(G,w),onFocus:G=>d(G,w),onBlur:G=>f(G,w),onMouseEnter:G=>x(G,w),onClick:j,onMouseDown:q},F,{ownerState:M,children:b||V.format(w,"dayOfMonth")}))}),aVe=A.memo(iVe),lVe=t=>Nt("MuiPickersSlideTransition",t),Di=gt("MuiPickersSlideTransition",["root","slideEnter-left","slideEnter-right","slideEnterActive","slideExit","slideExitActiveLeft-left","slideExitActiveLeft-right"]),cVe=["children","className","reduceAnimations","slideDirection","transKey","classes"],uVe=(t,e)=>{const{slideDirection:n}=e,r={root:["root"],exit:["slideExit"],enterActive:["slideEnterActive"],enter:[`slideEnter-${n}`],exitActive:[`slideExitActiveLeft-${n}`]};return vt(r,lVe,t)},dVe=De(nx,{name:"MuiPickersSlideTransition",slot:"Root",overridesResolver:(t,e)=>[e.root,{[`.${Di["slideEnter-left"]}`]:e["slideEnter-left"]},{[`.${Di["slideEnter-right"]}`]:e["slideEnter-right"]},{[`.${Di.slideEnterActive}`]:e.slideEnterActive},{[`.${Di.slideExit}`]:e.slideExit},{[`.${Di["slideExitActiveLeft-left"]}`]:e["slideExitActiveLeft-left"]},{[`.${Di["slideExitActiveLeft-right"]}`]:e["slideExitActiveLeft-right"]}]})(({theme:t})=>{const e=t.transitions.create("transform",{duration:t.transitions.duration.complex,easing:"cubic-bezier(0.35, 0.8, 0.4, 1)"});return{display:"block",position:"relative",overflowX:"hidden","& > *":{position:"absolute",top:0,right:0,left:0},[`& .${Di["slideEnter-left"]}`]:{willChange:"transform",transform:"translate(100%)",zIndex:1},[`& .${Di["slideEnter-right"]}`]:{willChange:"transform",transform:"translate(-100%)",zIndex:1},[`& .${Di.slideEnterActive}`]:{transform:"translate(0%)",transition:e},[`& .${Di.slideExit}`]:{transform:"translate(0%)"},[`& .${Di["slideExitActiveLeft-left"]}`]:{willChange:"transform",transform:"translate(-100%)",transition:e,zIndex:0},[`& .${Di["slideExitActiveLeft-right"]}`]:{willChange:"transform",transform:"translate(100%)",transition:e,zIndex:0}}});function fVe(t){const e=vr({props:t,name:"MuiPickersSlideTransition"}),{children:n,className:r,reduceAnimations:s,slideDirection:o,transKey:i,classes:a}=e,l=Lt(e,cVe),{ownerState:c}=Ws(),d=xe({},c,{slideDirection:o}),f=uVe(a,d),p=Sf();if(s)return S.jsx("div",{className:st(f.root,r),children:n});const g={exit:f.exit,enterActive:f.enterActive,enter:f.enter,exitActive:f.exitActive};return S.jsx(dVe,{className:st(f.root,r),childFactory:x=>A.cloneElement(x,{classNames:g}),role:"presentation",ownerState:d,children:S.jsx(OD,xe({mountOnEnter:!0,unmountOnExit:!0,timeout:p.transitions.duration.complex,classNames:g},l,{children:n}),i)})}const hVe=t=>Nt("MuiDayCalendar",t);gt("MuiDayCalendar",["root","header","weekDayLabel","loadingContainer","slideTransition","monthContainer","weekContainer","weekNumberLabel","weekNumber"]);const pVe=["parentProps","day","focusedDay","selectedDays","isDateDisabled","currentMonthNumber","isViewFocused"],mVe=["ownerState"],gVe=t=>vt({root:["root"],header:["header"],weekDayLabel:["weekDayLabel"],loadingContainer:["loadingContainer"],slideTransition:["slideTransition"],monthContainer:["monthContainer"],weekContainer:["weekContainer"],weekNumberLabel:["weekNumberLabel"],weekNumber:["weekNumber"]},hVe,t),FH=(g0+LC*2)*6,xVe=De("div",{name:"MuiDayCalendar",slot:"Root"})({}),yVe=De("div",{name:"MuiDayCalendar",slot:"Header"})({display:"flex",justifyContent:"center",alignItems:"center"}),bVe=De(kl,{name:"MuiDayCalendar",slot:"WeekDayLabel"})(({theme:t})=>({width:36,height:40,margin:"0 2px",textAlign:"center",display:"flex",justifyContent:"center",alignItems:"center",color:(t.vars||t).palette.text.secondary})),wVe=De(kl,{name:"MuiDayCalendar",slot:"WeekNumberLabel"})(({theme:t})=>({width:36,height:40,margin:"0 2px",textAlign:"center",display:"flex",justifyContent:"center",alignItems:"center",color:(t.vars||t).palette.text.disabled})),vVe=De(kl,{name:"MuiDayCalendar",slot:"WeekNumber"})(({theme:t})=>xe({},t.typography.caption,{width:g0,height:g0,padding:0,margin:`0 ${LC}px`,color:(t.vars||t).palette.text.disabled,fontSize:"0.75rem",alignItems:"center",justifyContent:"center",display:"inline-flex"})),CVe=De("div",{name:"MuiDayCalendar",slot:"LoadingContainer"})({display:"flex",justifyContent:"center",alignItems:"center",minHeight:FH}),SVe=De(fVe,{name:"MuiDayCalendar",slot:"SlideTransition"})({minHeight:FH}),NVe=De("div",{name:"MuiDayCalendar",slot:"MonthContainer"})({overflow:"hidden"}),EVe=De("div",{name:"MuiDayCalendar",slot:"WeekContainer"})({margin:`${LC}px 0`,display:"flex",justifyContent:"center"});function IVe(t){let{parentProps:e,day:n,focusedDay:r,selectedDays:s,isDateDisabled:o,currentMonthNumber:i,isViewFocused:a}=t,l=Lt(t,pVe);const{disabled:c,disableHighlightToday:d,isMonthSwitchingAnimating:f,showDaysOutsideCurrentMonth:p,slots:g,slotProps:x,timezone:b}=e,w=ir(),C=MC(b),N=r!=null&&w.isSameDay(n,r),k=a&&N,I=s.some(q=>w.isSameDay(q,n)),R=w.isSameDay(n,C),$=A.useMemo(()=>c||o(n),[c,o,n]),O=A.useMemo(()=>w.getMonth(n)!==i,[w,n,i]),F=OH({day:n,selected:I,disabled:$,today:R,outsideCurrentMonth:O,disableMargin:void 0,disableHighlightToday:d,showDaysOutsideCurrentMonth:p}),M=(g==null?void 0:g.day)??aVe,_=yn({elementType:M,externalSlotProps:x==null?void 0:x.day,additionalProps:xe({disableHighlightToday:d,showDaysOutsideCurrentMonth:p,role:"gridcell",isAnimating:f,"data-timestamp":w.toJsDate(n).valueOf()},l),ownerState:xe({},F,{day:n,isDayDisabled:$,isDaySelected:I})}),V=Lt(_,mVe),B=A.useMemo(()=>{const q=w.startOfMonth(w.setMonth(n,i));return p?w.isSameDay(n,w.startOfWeek(q)):w.isSameDay(n,q)},[i,n,p,w]),W=A.useMemo(()=>{const q=w.endOfMonth(w.setMonth(n,i));return p?w.isSameDay(n,w.endOfWeek(q)):w.isSameDay(n,q)},[i,n,p,w]);return S.jsx(M,xe({},V,{day:n,disabled:$,autoFocus:!O&&k,today:R,outsideCurrentMonth:O,isFirstVisibleCell:B,isLastVisibleCell:W,selected:I,tabIndex:N?0:-1,"aria-selected":I,"aria-current":R?"date":void 0}))}function kVe(t){const e=vr({props:t,name:"MuiDayCalendar"}),n=ir(),{onFocusedDayChange:r,className:s,classes:o,currentMonth:i,selectedDays:a,focusedDay:l,loading:c,onSelectedDaysChange:d,onMonthSwitchingAnimationEnd:f,readOnly:p,reduceAnimations:g,renderLoading:x=()=>S.jsx("span",{children:"..."}),slideDirection:b,TransitionProps:w,disablePast:C,disableFuture:N,minDate:k,maxDate:I,shouldDisableDate:R,shouldDisableMonth:$,shouldDisableYear:O,dayOfWeekFormatter:F=me=>n.format(me,"weekdayShort").charAt(0).toUpperCase(),hasFocus:M,onFocusedViewChange:_,gridLabelId:V,displayWeekNumber:B,fixedWeekNumber:W,timezone:q}=e,j=MC(q),G=gVe(o),Z=Wa(),J=DH({shouldDisableDate:R,shouldDisableMonth:$,shouldDisableYear:O,minDate:k,maxDate:I,disablePast:C,disableFuture:N,timezone:q}),X=Vu(),ee=at(me=>{p||d(me)}),ne=me=>{J(me)||(r(me),_==null||_(!0))},oe=at((me,ke)=>{switch(me.key){case"ArrowUp":ne(n.addDays(ke,-7)),me.preventDefault();break;case"ArrowDown":ne(n.addDays(ke,7)),me.preventDefault();break;case"ArrowLeft":{const pe=n.addDays(ke,Z?1:-1),Pe=n.addMonths(ke,Z?1:-1),Ve=m0({utils:n,date:pe,minDate:Z?pe:n.startOfMonth(Pe),maxDate:Z?n.endOfMonth(Pe):pe,isDateDisabled:J,timezone:q});ne(Ve||pe),me.preventDefault();break}case"ArrowRight":{const pe=n.addDays(ke,Z?-1:1),Pe=n.addMonths(ke,Z?-1:1),Ve=m0({utils:n,date:pe,minDate:Z?n.startOfMonth(Pe):pe,maxDate:Z?pe:n.endOfMonth(Pe),isDateDisabled:J,timezone:q});ne(Ve||pe),me.preventDefault();break}case"Home":ne(n.startOfWeek(ke)),me.preventDefault();break;case"End":ne(n.endOfWeek(ke)),me.preventDefault();break;case"PageUp":ne(n.addMonths(ke,1)),me.preventDefault();break;case"PageDown":ne(n.addMonths(ke,-1)),me.preventDefault();break}}),ye=at((me,ke)=>ne(ke)),ge=at((me,ke)=>{l!=null&&n.isSameDay(l,ke)&&(_==null||_(!1))}),ve=n.getMonth(i),he=n.getYear(i),Me=A.useMemo(()=>a.filter(me=>!!me).map(me=>n.startOfDay(me)),[n,a]),ze=`${he}-${ve}`,Oe=A.useMemo(()=>A.createRef(),[ze]),Ie=A.useMemo(()=>{const me=n.getWeekArray(i);let ke=n.addMonths(i,1);for(;W&&me.length<W;){const pe=n.getWeekArray(ke),Pe=n.isSameDay(me[me.length-1][0],pe[0][0]);pe.slice(Pe?1:0).forEach(Ve=>{me.length<W&&me.push(Ve)}),ke=n.addMonths(ke,1)}return me},[i,W,n]);return S.jsxs(xVe,{role:"grid","aria-labelledby":V,className:G.root,children:[S.jsxs(yVe,{role:"row",className:G.header,children:[B&&S.jsx(wVe,{variant:"caption",role:"columnheader","aria-label":X.calendarWeekNumberHeaderLabel,className:G.weekNumberLabel,children:X.calendarWeekNumberHeaderText}),sje(n,j).map((me,ke)=>S.jsx(bVe,{variant:"caption",role:"columnheader","aria-label":n.format(me,"weekday"),className:G.weekDayLabel,children:F(me)},ke.toString()))]}),c?S.jsx(CVe,{className:G.loadingContainer,children:x()}):S.jsx(SVe,xe({transKey:ze,onExited:f,reduceAnimations:g,slideDirection:b,className:st(s,G.slideTransition)},w,{nodeRef:Oe,children:S.jsx(NVe,{ref:Oe,role:"rowgroup",className:G.monthContainer,children:Ie.map((me,ke)=>S.jsxs(EVe,{role:"row",className:G.weekContainer,"aria-rowindex":ke+1,children:[B&&S.jsx(vVe,{className:G.weekNumber,role:"rowheader","aria-label":X.calendarWeekNumberAriaLabelText(n.getWeekNumber(me[0])),children:X.calendarWeekNumberText(n.getWeekNumber(me[0]))}),me.map((pe,Pe)=>S.jsx(IVe,{parentProps:e,day:pe,selectedDays:Me,isViewFocused:M,focusedDay:l,onKeyDown:oe,onFocus:ye,onBlur:ge,onDaySelect:ee,isDateDisabled:J,currentMonthNumber:ve,"aria-colindex":Pe+1},pe.toString()))]},`week-${me[0]}`))})}))]})}function MH(t){return Nt("MuiMonthCalendar",t)}const fy=gt("MuiMonthCalendar",["root","button","disabled","selected"]),TVe=["autoFocus","classes","disabled","selected","value","onClick","onKeyDown","onFocus","onBlur","slots","slotProps"],AVe=(t,e)=>{const n={button:["button",e.isMonthDisabled&&"disabled",e.isMonthSelected&&"selected"]};return vt(n,MH,t)},RVe=De("button",{name:"MuiMonthCalendar",slot:"Button",overridesResolver:(t,e)=>[e.button,{[`&.${fy.disabled}`]:e.disabled},{[`&.${fy.selected}`]:e.selected}]})(({theme:t})=>xe({color:"unset",backgroundColor:"transparent",border:0,outline:0},t.typography.subtitle1,{height:36,width:72,borderRadius:18,cursor:"pointer","&:focus":{backgroundColor:t.vars?`rgba(${t.vars.palette.action.activeChannel} / ${t.vars.palette.action.hoverOpacity})`:pn(t.palette.action.active,t.palette.action.hoverOpacity)},"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette.action.activeChannel} / ${t.vars.palette.action.hoverOpacity})`:pn(t.palette.action.active,t.palette.action.hoverOpacity)},"&:disabled":{cursor:"auto",pointerEvents:"none"},[`&.${fy.disabled}`]:{color:(t.vars||t).palette.text.secondary},[`&.${fy.selected}`]:{color:(t.vars||t).palette.primary.contrastText,backgroundColor:(t.vars||t).palette.primary.main,"&:focus, &:hover":{backgroundColor:(t.vars||t).palette.primary.dark}}})),DVe=A.memo(function(e){const{autoFocus:n,classes:r,disabled:s,selected:o,value:i,onClick:a,onKeyDown:l,onFocus:c,onBlur:d,slots:f,slotProps:p}=e,g=Lt(e,TVe),x=A.useRef(null),{ownerState:b}=Ws(),w=xe({},b,{isMonthDisabled:s,isMonthSelected:o}),C=AVe(r,w);ts(()=>{var I;n&&((I=x.current)==null||I.focus())},[n]);const N=(f==null?void 0:f.monthButton)??RVe,k=yn({elementType:N,externalSlotProps:p==null?void 0:p.monthButton,externalForwardedProps:g,additionalProps:{disabled:s,ref:x,type:"button",role:"radio","aria-checked":o,onClick:I=>a(I,i),onKeyDown:I=>l(I,i),onFocus:I=>c(I,i),onBlur:I=>d(I,i)},ownerState:w,className:C.button});return S.jsx(N,xe({},k))}),$Ve=["autoFocus","className","classes","value","defaultValue","referenceDate","disabled","disableFuture","disablePast","maxDate","minDate","onChange","shouldDisableMonth","readOnly","disableHighlightToday","onMonthFocus","hasFocus","onFocusedViewChange","monthsPerRow","timezone","gridLabelId","slots","slotProps"],OVe=t=>vt({root:["root"]},MH,t);function _Ve(t,e){const n=vr({props:t,name:e}),r=ax(n);return xe({},n,r,{monthsPerRow:n.monthsPerRow??3})}const PVe=De("div",{name:"MuiMonthCalendar",slot:"Root",shouldForwardProp:t=>vl(t)&&t!=="monthsPerRow"})({display:"flex",flexWrap:"wrap",justifyContent:"space-evenly",rowGap:16,padding:"8px 0",width:BC,boxSizing:"border-box",variants:[{props:{monthsPerRow:3},style:{columnGap:24}},{props:{monthsPerRow:4},style:{columnGap:0}}]}),FVe=A.forwardRef(function(e,n){const r=_Ve(e,"MuiMonthCalendar"),{autoFocus:s,className:o,classes:i,value:a,defaultValue:l,referenceDate:c,disabled:d,disableFuture:f,disablePast:p,maxDate:g,minDate:x,onChange:b,shouldDisableMonth:w,readOnly:C,onMonthFocus:N,hasFocus:k,onFocusedViewChange:I,monthsPerRow:R,timezone:$,gridLabelId:O,slots:F,slotProps:M}=r,_=Lt(r,$Ve),{value:V,handleValueChange:B,timezone:W}=lx({name:"MonthCalendar",timezone:$,value:a,defaultValue:l,referenceDate:c,onChange:b,valueManager:Al}),q=MC(W),j=Wa(),G=ir(),{ownerState:Z}=Ws(),J=A.useMemo(()=>Al.getInitialReferenceValue({value:V,utils:G,props:r,timezone:W,referenceDate:c,granularity:al.month}),[]),X=OVe(i),ee=A.useMemo(()=>G.getMonth(q),[G,q]),ne=A.useMemo(()=>V!=null?G.getMonth(V):null,[V,G]),[oe,ye]=A.useState(()=>ne||G.getMonth(J)),[ge,ve]=Cu({name:"MonthCalendar",state:"hasFocus",controlled:k,default:s??!1}),he=at(pe=>{ve(pe),I&&I(pe)}),Me=A.useCallback(pe=>{const Pe=G.startOfMonth(p&&G.isAfter(q,x)?q:x),Ve=G.startOfMonth(f&&G.isBefore(q,g)?q:g),Fe=G.startOfMonth(pe);return G.isBefore(Fe,Pe)||G.isAfter(Fe,Ve)?!0:w?w(Fe):!1},[f,p,g,x,q,w,G]),ze=at((pe,Pe)=>{if(C)return;const Ve=G.setMonth(V??J,Pe);B(Ve)}),Oe=at(pe=>{Me(G.setMonth(V??J,pe))||(ye(pe),he(!0),N&&N(pe))});A.useEffect(()=>{ye(pe=>ne!==null&&pe!==ne?ne:pe)},[ne]);const Ie=at((pe,Pe)=>{switch(pe.key){case"ArrowUp":Oe((12+Pe-3)%12),pe.preventDefault();break;case"ArrowDown":Oe((12+Pe+3)%12),pe.preventDefault();break;case"ArrowLeft":Oe((12+Pe+(j?1:-1))%12),pe.preventDefault();break;case"ArrowRight":Oe((12+Pe+(j?-1:1))%12),pe.preventDefault();break}}),me=at((pe,Pe)=>{Oe(Pe)}),ke=at((pe,Pe)=>{oe===Pe&&he(!1)});return S.jsx(PVe,xe({ref:n,className:st(X.root,o),ownerState:Z,role:"radiogroup","aria-labelledby":O,monthsPerRow:R},_,{children:YD(G,V??J).map(pe=>{const Pe=G.getMonth(pe),Ve=G.format(pe,"monthShort"),Fe=G.format(pe,"month"),Be=Pe===ne,be=d||Me(pe);return S.jsx(DVe,{selected:Be,value:Pe,onClick:ze,onKeyDown:Ie,autoFocus:ge&&Pe===oe,disabled:be,tabIndex:Pe===oe&&!be?0:-1,onFocus:me,onBlur:ke,"aria-current":ee===Pe?"date":void 0,"aria-label":Fe,slots:F,slotProps:M,classes:i,children:Ve},Ve)})}))});function LH(t){return Nt("MuiYearCalendar",t)}const hy=gt("MuiYearCalendar",["root","button","disabled","selected"]),MVe=["autoFocus","classes","disabled","selected","value","onClick","onKeyDown","onFocus","onBlur","slots","slotProps"],LVe=(t,e)=>{const n={button:["button",e.isYearDisabled&&"disabled",e.isYearSelected&&"selected"]};return vt(n,LH,t)},BVe=De("button",{name:"MuiYearCalendar",slot:"Button",overridesResolver:(t,e)=>[e.button,{[`&.${hy.disabled}`]:e.disabled},{[`&.${hy.selected}`]:e.selected}]})(({theme:t})=>xe({color:"unset",backgroundColor:"transparent",border:0,outline:0},t.typography.subtitle1,{height:36,width:72,borderRadius:18,cursor:"pointer","&:focus":{backgroundColor:t.vars?`rgba(${t.vars.palette.action.activeChannel} / ${t.vars.palette.action.focusOpacity})`:pn(t.palette.action.active,t.palette.action.focusOpacity)},"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette.action.activeChannel} / ${t.vars.palette.action.hoverOpacity})`:pn(t.palette.action.active,t.palette.action.hoverOpacity)},"&:disabled":{cursor:"auto",pointerEvents:"none"},[`&.${hy.disabled}`]:{color:(t.vars||t).palette.text.secondary},[`&.${hy.selected}`]:{color:(t.vars||t).palette.primary.contrastText,backgroundColor:(t.vars||t).palette.primary.main,"&:focus, &:hover":{backgroundColor:(t.vars||t).palette.primary.dark}}})),jVe=A.memo(function(e){const{autoFocus:n,classes:r,disabled:s,selected:o,value:i,onClick:a,onKeyDown:l,onFocus:c,onBlur:d,slots:f,slotProps:p}=e,g=Lt(e,MVe),x=A.useRef(null),{ownerState:b}=Ws(),w=xe({},b,{isYearDisabled:s,isYearSelected:o}),C=LVe(r,w);ts(()=>{var I;n&&((I=x.current)==null||I.focus())},[n]);const N=(f==null?void 0:f.yearButton)??BVe,k=yn({elementType:N,externalSlotProps:p==null?void 0:p.yearButton,externalForwardedProps:g,additionalProps:{disabled:s,ref:x,type:"button",role:"radio","aria-checked":o,onClick:I=>a(I,i),onKeyDown:I=>l(I,i),onFocus:I=>c(I,i),onBlur:I=>d(I,i)},ownerState:w,className:C.button});return S.jsx(N,xe({},k))}),zVe=["autoFocus","className","classes","value","defaultValue","referenceDate","disabled","disableFuture","disablePast","maxDate","minDate","onChange","readOnly","shouldDisableYear","disableHighlightToday","onYearFocus","hasFocus","onFocusedViewChange","yearsOrder","yearsPerRow","timezone","gridLabelId","slots","slotProps"],VVe=t=>vt({root:["root"]},LH,t);function WVe(t,e){const n=vr({props:t,name:e}),r=ax(n);return xe({},n,r,{yearsPerRow:n.yearsPerRow??3,yearsOrder:n.yearsOrder??"asc"})}const UVe=De("div",{name:"MuiYearCalendar",slot:"Root",shouldForwardProp:t=>vl(t)&&t!=="yearsPerRow"})({display:"flex",flexWrap:"wrap",justifyContent:"space-evenly",rowGap:12,padding:"6px 0",overflowY:"auto",height:"100%",width:BC,maxHeight:b7e,boxSizing:"border-box",position:"relative",variants:[{props:{yearsPerRow:3},style:{columnGap:24}},{props:{yearsPerRow:4},style:{columnGap:0,padding:"0 2px"}}]}),HVe=De("div",{name:"MuiYearCalendar",slot:"ButtonFiller"})({height:36,width:72}),GVe=A.forwardRef(function(e,n){const r=WVe(e,"MuiYearCalendar"),{autoFocus:s,className:o,classes:i,value:a,defaultValue:l,referenceDate:c,disabled:d,disableFuture:f,disablePast:p,maxDate:g,minDate:x,onChange:b,readOnly:w,shouldDisableYear:C,onYearFocus:N,hasFocus:k,onFocusedViewChange:I,yearsOrder:R,yearsPerRow:$,timezone:O,gridLabelId:F,slots:M,slotProps:_}=r,V=Lt(r,zVe),{value:B,handleValueChange:W,timezone:q}=lx({name:"YearCalendar",timezone:O,value:a,defaultValue:l,referenceDate:c,onChange:b,valueManager:Al}),j=MC(q),G=Wa(),Z=ir(),{ownerState:J}=Ws(),X=A.useMemo(()=>Al.getInitialReferenceValue({value:B,utils:Z,props:r,timezone:q,referenceDate:c,granularity:al.year}),[]),ee=VVe(i),ne=A.useMemo(()=>Z.getYear(j),[Z,j]),oe=A.useMemo(()=>B!=null?Z.getYear(B):null,[B,Z]),[ye,ge]=A.useState(()=>oe||Z.getYear(X)),[ve,he]=Cu({name:"YearCalendar",state:"hasFocus",controlled:k,default:s??!1}),Me=at(Se=>{he(Se),I&&I(Se)}),ze=A.useCallback(Se=>{if(p&&Z.isBeforeYear(Se,j)||f&&Z.isAfterYear(Se,j)||x&&Z.isBeforeYear(Se,x)||g&&Z.isAfterYear(Se,g))return!0;if(!C)return!1;const ue=Z.startOfYear(Se);return C(ue)},[f,p,g,x,j,C,Z]),Oe=at((Se,ue)=>{if(w)return;const He=Z.setYear(B??X,ue);W(He)}),Ie=at(Se=>{ze(Z.setYear(B??X,Se))||(ge(Se),Me(!0),N==null||N(Se))});A.useEffect(()=>{ge(Se=>oe!==null&&Se!==oe?oe:Se)},[oe]);const me=R!=="desc"?$*1:$*-1,ke=G&&R==="asc"||!G&&R==="desc"?-1:1,pe=at((Se,ue)=>{switch(Se.key){case"ArrowUp":Ie(ue-me),Se.preventDefault();break;case"ArrowDown":Ie(ue+me),Se.preventDefault();break;case"ArrowLeft":Ie(ue-ke),Se.preventDefault();break;case"ArrowRight":Ie(ue+ke),Se.preventDefault();break}}),Pe=at((Se,ue)=>{Ie(ue)}),Ve=at((Se,ue)=>{ye===ue&&Me(!1)}),Fe=A.useRef(null),Be=wn(n,Fe);A.useEffect(()=>{if(s||Fe.current===null)return;const Se=Fe.current.querySelector('[tabindex="0"]');if(!Se)return;const ue=Se.offsetHeight,He=Se.offsetTop,It=Fe.current.clientHeight,ot=Fe.current.scrollTop,Vt=He+ue;ue>It||He<ot||(Fe.current.scrollTop=Vt-It/2-ue/2)},[s]);const be=Z.getYearRange([x,g]);R==="desc"&&be.reverse();let je=$-be.length%$;return je===$&&(je=0),S.jsxs(UVe,xe({ref:Be,className:st(ee.root,o),ownerState:J,role:"radiogroup","aria-labelledby":F,yearsPerRow:$},V,{children:[be.map(Se=>{const ue=Z.getYear(Se),He=ue===oe,It=d||ze(Se);return S.jsx(jVe,{selected:He,value:ue,onClick:Oe,onKeyDown:pe,autoFocus:ve&&ue===ye,disabled:It,tabIndex:ue===ye&&!It?0:-1,onFocus:Pe,onBlur:Ve,"aria-current":ne===ue?"date":void 0,slots:M,slotProps:_,classes:i,children:Z.format(Se,"year")},Z.format(Se,"year"))}),Array.from({length:je},(Se,ue)=>S.jsx(HVe,{},ue))]}))}),qVe=t=>Nt("MuiPickersCalendarHeader",t),XVe=gt("MuiPickersCalendarHeader",["root","labelContainer","label","switchViewButton","switchViewIcon"]);function KVe(t){return Nt("MuiPickersArrowSwitcher",t)}gt("MuiPickersArrowSwitcher",["root","spacer","button","previousIconButton","nextIconButton","leftArrowIcon","rightArrowIcon"]);const YVe=["children","className","slots","slotProps","isNextDisabled","isNextHidden","onGoToNext","nextLabel","isPreviousDisabled","isPreviousHidden","onGoToPrevious","previousLabel","labelId","classes"],ZVe=["ownerState"],QVe=["ownerState"],JVe=De("div",{name:"MuiPickersArrowSwitcher",slot:"Root"})({display:"flex"}),e9e=De("div",{name:"MuiPickersArrowSwitcher",slot:"Spacer"})(({theme:t})=>({width:t.spacing(3)})),cM=De(d0,{name:"MuiPickersArrowSwitcher",slot:"Button"})({variants:[{props:{isButtonHidden:!0},style:{visibility:"hidden"}}]}),t9e=t=>vt({root:["root"],spacer:["spacer"],button:["button"],previousIconButton:["previousIconButton"],nextIconButton:["nextIconButton"],leftArrowIcon:["leftArrowIcon"],rightArrowIcon:["rightArrowIcon"]},KVe,t),n9e=A.forwardRef(function(e,n){const r=Wa(),s=vr({props:e,name:"MuiPickersArrowSwitcher"}),{children:o,className:i,slots:a,slotProps:l,isNextDisabled:c,isNextHidden:d,onGoToNext:f,nextLabel:p,isPreviousDisabled:g,isPreviousHidden:x,onGoToPrevious:b,previousLabel:w,labelId:C,classes:N}=s,k=Lt(s,YVe),{ownerState:I}=Ws(),R=t9e(N),$={isDisabled:c,isHidden:d,goTo:f,label:p},O={isDisabled:g,isHidden:x,goTo:b,label:w},F=(a==null?void 0:a.previousIconButton)??cM,M=yn({elementType:F,externalSlotProps:l==null?void 0:l.previousIconButton,additionalProps:{size:"medium",title:O.label,"aria-label":O.label,disabled:O.isDisabled,edge:"end",onClick:O.goTo},ownerState:xe({},I,{isButtonHidden:O.isHidden??!1}),className:st(R.button,R.previousIconButton)}),_=(a==null?void 0:a.nextIconButton)??cM,V=yn({elementType:_,externalSlotProps:l==null?void 0:l.nextIconButton,additionalProps:{size:"medium",title:$.label,"aria-label":$.label,disabled:$.isDisabled,edge:"start",onClick:$.goTo},ownerState:xe({},I,{isButtonHidden:$.isHidden??!1}),className:st(R.button,R.nextIconButton)}),B=(a==null?void 0:a.leftArrowIcon)??$7e,W=yn({elementType:B,externalSlotProps:l==null?void 0:l.leftArrowIcon,additionalProps:{fontSize:"inherit"},ownerState:I,className:R.leftArrowIcon}),q=Lt(W,ZVe),j=(a==null?void 0:a.rightArrowIcon)??O7e,G=yn({elementType:j,externalSlotProps:l==null?void 0:l.rightArrowIcon,additionalProps:{fontSize:"inherit"},ownerState:I,className:R.rightArrowIcon}),Z=Lt(G,QVe);return S.jsxs(JVe,xe({ref:n,className:st(R.root,i),ownerState:I},k,{children:[S.jsx(F,xe({},M,{children:r?S.jsx(j,xe({},Z)):S.jsx(B,xe({},q))})),o?S.jsx(kl,{variant:"subtitle1",component:"span",id:C,children:o}):S.jsx(e9e,{className:R.spacer,ownerState:I}),S.jsx(_,xe({},V,{children:r?S.jsx(B,xe({},q)):S.jsx(j,xe({},Z))}))]}))});function r9e(t,{disableFuture:e,maxDate:n,timezone:r}){const s=ir();return A.useMemo(()=>{const o=s.date(void 0,r),i=s.startOfMonth(e&&s.isBefore(o,n)?o:n);return!s.isAfter(i,t)},[e,n,t,s,r])}function s9e(t,{disablePast:e,minDate:n,timezone:r}){const s=ir();return A.useMemo(()=>{const o=s.date(void 0,r),i=s.startOfMonth(e&&s.isAfter(o,n)?o:n);return!s.isBefore(i,t)},[e,n,t,s,r])}const o9e=["slots","slotProps","currentMonth","disabled","disableFuture","disablePast","maxDate","minDate","onMonthChange","onViewChange","view","reduceAnimations","views","labelId","className","classes","timezone","format"],i9e=["ownerState"],a9e=t=>vt({root:["root"],labelContainer:["labelContainer"],label:["label"],switchViewButton:["switchViewButton"],switchViewIcon:["switchViewIcon"]},qVe,t),l9e=De("div",{name:"MuiPickersCalendarHeader",slot:"Root"})({display:"flex",alignItems:"center",marginTop:12,marginBottom:4,paddingLeft:24,paddingRight:12,maxHeight:40,minHeight:40}),c9e=De("div",{name:"MuiPickersCalendarHeader",slot:"LabelContainer"})(({theme:t})=>xe({display:"flex",overflow:"hidden",alignItems:"center",cursor:"pointer",marginRight:"auto"},t.typography.body1,{fontWeight:t.typography.fontWeightMedium})),u9e=De("div",{name:"MuiPickersCalendarHeader",slot:"Label"})({marginRight:6}),d9e=De(d0,{name:"MuiPickersCalendarHeader",slot:"SwitchViewButton"})({marginRight:"auto",variants:[{props:{view:"year"},style:{[`.${XVe.switchViewIcon}`]:{transform:"rotate(180deg)"}}}]}),f9e=De(D7e,{name:"MuiPickersCalendarHeader",slot:"SwitchViewIcon"})(({theme:t})=>({willChange:"transform",transition:t.transitions.create("transform"),transform:"rotate(0deg)"})),h9e=A.forwardRef(function(e,n){const r=Vu(),s=ir(),o=vr({props:e,name:"MuiPickersCalendarHeader"}),{slots:i,slotProps:a,currentMonth:l,disabled:c,disableFuture:d,disablePast:f,maxDate:p,minDate:g,onMonthChange:x,onViewChange:b,view:w,reduceAnimations:C,views:N,labelId:k,className:I,classes:R,timezone:$,format:O=`${s.formats.month} ${s.formats.year}`}=o,F=Lt(o,o9e),{ownerState:M}=Ws(),_=a9e(R),V=(i==null?void 0:i.switchViewButton)??d9e,B=yn({elementType:V,externalSlotProps:a==null?void 0:a.switchViewButton,additionalProps:{size:"small","aria-label":r.calendarViewSwitchingButtonAriaLabel(w)},ownerState:M,className:_.switchViewButton}),W=(i==null?void 0:i.switchViewIcon)??f9e,q=yn({elementType:W,externalSlotProps:a==null?void 0:a.switchViewIcon,ownerState:M,className:_.switchViewIcon}),j=Lt(q,i9e),G=()=>x(s.addMonths(l,1)),Z=()=>x(s.addMonths(l,-1)),J=r9e(l,{disableFuture:d,maxDate:p,timezone:$}),X=s9e(l,{disablePast:f,minDate:g,timezone:$}),ee=()=>{if(!(N.length===1||!b||c))if(N.length===2)b(N.find(oe=>oe!==w)||N[0]);else{const oe=N.indexOf(w)!==0?0:1;b(N[oe])}};if(N.length===1&&N[0]==="year")return null;const ne=s.formatByString(l,O);return S.jsxs(l9e,xe({},F,{ownerState:M,className:st(_.root,I),ref:n,children:[S.jsxs(c9e,{role:"presentation",onClick:ee,ownerState:M,"aria-live":"polite",className:_.labelContainer,children:[S.jsx($H,{reduceAnimations:C,transKey:ne,children:S.jsx(u9e,{id:k,ownerState:M,className:_.label,children:ne})}),N.length>1&&!c&&S.jsx(V,xe({},B,{children:S.jsx(W,xe({},j))}))]}),S.jsx(tf,{in:w==="day",appear:!C,enter:!C,children:S.jsx(n9e,{slots:i,slotProps:a,onGoToPrevious:Z,isPreviousDisabled:X,previousLabel:r.previousMonth,onGoToNext:G,isNextDisabled:J,nextLabel:r.nextMonth})})]}))}),p9e=De("div")({overflow:"hidden",width:BC,maxHeight:s$,display:"flex",flexDirection:"column",margin:"0 auto"}),m9e=t=>Nt("MuiDateCalendar",t);gt("MuiDateCalendar",["root","viewTransitionContainer"]);const g9e=["autoFocus","onViewChange","value","defaultValue","referenceDate","disableFuture","disablePast","onChange","onYearChange","onMonthChange","reduceAnimations","shouldDisableDate","shouldDisableMonth","shouldDisableYear","view","views","openTo","className","classes","disabled","readOnly","minDate","maxDate","disableHighlightToday","focusedView","onFocusedViewChange","showDaysOutsideCurrentMonth","fixedWeekNumber","dayOfWeekFormatter","slots","slotProps","loading","renderLoading","displayWeekNumber","yearsOrder","yearsPerRow","monthsPerRow","timezone"],x9e=t=>vt({root:["root"],viewTransitionContainer:["viewTransitionContainer"]},m9e,t);function y9e(t,e){const n=vr({props:t,name:e}),r=cH(n.reduceAnimations),s=ax(n);return xe({},n,s,{loading:n.loading??!1,openTo:n.openTo??"day",views:n.views??["year","day"],reduceAnimations:r,renderLoading:n.renderLoading??(()=>S.jsx("span",{children:"..."}))})}const b9e=De(p9e,{name:"MuiDateCalendar",slot:"Root"})({display:"flex",flexDirection:"column",height:s$}),w9e=De($H,{name:"MuiDateCalendar",slot:"ViewTransitionContainer"})({}),v9e=A.forwardRef(function(e,n){const r=ir(),{ownerState:s}=Ws(),o=bc(),i=y9e(e,"MuiDateCalendar"),{autoFocus:a,onViewChange:l,value:c,defaultValue:d,referenceDate:f,disableFuture:p,disablePast:g,onChange:x,onMonthChange:b,reduceAnimations:w,shouldDisableDate:C,shouldDisableMonth:N,shouldDisableYear:k,view:I,views:R,openTo:$,className:O,classes:F,disabled:M,readOnly:_,minDate:V,maxDate:B,disableHighlightToday:W,focusedView:q,onFocusedViewChange:j,showDaysOutsideCurrentMonth:G,fixedWeekNumber:Z,dayOfWeekFormatter:J,slots:X,slotProps:ee,loading:ne,renderLoading:oe,displayWeekNumber:ye,yearsOrder:ge,yearsPerRow:ve,monthsPerRow:he,timezone:Me}=i,ze=Lt(i,g9e),{value:Oe,handleValueChange:Ie,timezone:me}=lx({name:"DateCalendar",timezone:Me,value:c,defaultValue:d,referenceDate:f,onChange:x,valueManager:Al}),{view:ke,setView:pe,focusedView:Pe,setFocusedView:Ve,goToNextView:Fe,setValueAndGoToNextView:Be}=dH({view:I,views:R,openTo:$,onChange:Ie,onViewChange:l,autoFocus:a,focusedView:q,onFocusedViewChange:j}),{referenceDate:be,calendarState:je,setVisibleDate:Se,isDateDisabled:ue,onMonthSwitchingAnimationEnd:He}=Yze({value:Oe,referenceDate:f,reduceAnimations:w,onMonthChange:b,minDate:V,maxDate:B,shouldDisableDate:C,disablePast:g,disableFuture:p,timezone:me,getCurrentMonthFromVisibleDate:(it,vn)=>r.isSameMonth(it,vn)?vn:r.startOfMonth(it)}),It=M&&Oe||V,ot=M&&Oe||B,Vt=`${o}-grid-label`,Xt=Pe!==null,Ln=(X==null?void 0:X.calendarHeader)??h9e,hn=yn({elementType:Ln,externalSlotProps:ee==null?void 0:ee.calendarHeader,additionalProps:{views:R,view:ke,currentMonth:je.currentMonth,onViewChange:pe,onMonthChange:it=>Se({target:it,reason:"header-navigation"}),minDate:It,maxDate:ot,disabled:M,disablePast:g,disableFuture:p,reduceAnimations:w,timezone:me,labelId:Vt},ownerState:s}),ft=at(it=>{const vn=r.startOfMonth(it),Cr=r.endOfMonth(it),No=ue(it)?m0({utils:r,date:it,minDate:r.isBefore(V,vn)?vn:V,maxDate:r.isAfter(B,Cr)?Cr:B,disablePast:g,disableFuture:p,isDateDisabled:ue,timezone:me}):it;No?(Be(No,"finish"),Se({target:No,reason:"cell-interaction"})):(Fe(),Se({target:vn,reason:"cell-interaction"}))}),Ot=at(it=>{const vn=r.startOfYear(it),Cr=r.endOfYear(it),No=ue(it)?m0({utils:r,date:it,minDate:r.isBefore(V,vn)?vn:V,maxDate:r.isAfter(B,Cr)?Cr:B,disablePast:g,disableFuture:p,isDateDisabled:ue,timezone:me}):it;No?(Be(No,"finish"),Se({target:No,reason:"cell-interaction"})):(Fe(),Se({target:vn,reason:"cell-interaction"}))}),Ct=at(it=>Ie(it&&ww(r,it,Oe??be),"finish",ke));A.useEffect(()=>{r.isValid(Oe)&&Se({target:Oe,reason:"controlled-value-change"})},[Oe]);const cn=x9e(F),Bt={disablePast:g,disableFuture:p,maxDate:B,minDate:V},Xe={disableHighlightToday:W,readOnly:_,disabled:M,timezone:me,gridLabelId:Vt,slots:X,slotProps:ee},et=A.useRef(ke);A.useEffect(()=>{et.current!==ke&&(Pe===et.current&&Ve(ke,!0),et.current=ke)},[Pe,Ve,ke]);const ut=A.useMemo(()=>[Oe],[Oe]);return S.jsxs(b9e,xe({ref:n,className:st(cn.root,O),ownerState:s},ze,{children:[S.jsx(Ln,xe({},hn,{slots:X,slotProps:ee})),S.jsx(w9e,{reduceAnimations:w,className:cn.viewTransitionContainer,transKey:ke,ownerState:s,children:S.jsxs("div",{children:[ke==="year"&&S.jsx(GVe,xe({},Bt,Xe,{value:Oe,onChange:Ot,shouldDisableYear:k,hasFocus:Xt,onFocusedViewChange:it=>Ve("year",it),yearsOrder:ge,yearsPerRow:ve,referenceDate:be})),ke==="month"&&S.jsx(FVe,xe({},Bt,Xe,{hasFocus:Xt,className:O,value:Oe,onChange:ft,shouldDisableMonth:N,onFocusedViewChange:it=>Ve("month",it),monthsPerRow:he,referenceDate:be})),ke==="day"&&S.jsx(kVe,xe({},je,Bt,Xe,{onMonthSwitchingAnimationEnd:He,hasFocus:Xt,onFocusedDayChange:it=>Se({target:it,reason:"cell-interaction"}),reduceAnimations:w,selectedDays:ut,onSelectedDaysChange:Ct,shouldDisableDate:C,shouldDisableMonth:N,shouldDisableYear:k,onFocusedViewChange:it=>Ve("day",it),showDaysOutsideCurrentMonth:G,fixedWeekNumber:Z,dayOfWeekFormatter:J,displayWeekNumber:ye,loading:ne,renderLoading:oe}))]})})]}))}),Ph=({view:t,onViewChange:e,views:n,focusedView:r,onFocusedViewChange:s,value:o,defaultValue:i,referenceDate:a,onChange:l,className:c,classes:d,disableFuture:f,disablePast:p,minDate:g,maxDate:x,shouldDisableDate:b,shouldDisableMonth:w,shouldDisableYear:C,reduceAnimations:N,onMonthChange:k,monthsPerRow:I,onYearChange:R,yearsOrder:$,yearsPerRow:O,slots:F,slotProps:M,loading:_,renderLoading:V,disableHighlightToday:B,readOnly:W,disabled:q,showDaysOutsideCurrentMonth:j,dayOfWeekFormatter:G,sx:Z,autoFocus:J,fixedWeekNumber:X,displayWeekNumber:ee,timezone:ne})=>S.jsx(v9e,{view:t,onViewChange:e,views:n.filter(qF),focusedView:r&&qF(r)?r:null,onFocusedViewChange:s,value:o,defaultValue:i,referenceDate:a,onChange:l,className:c,classes:d,disableFuture:f,disablePast:p,minDate:g,maxDate:x,shouldDisableDate:b,shouldDisableMonth:w,shouldDisableYear:C,reduceAnimations:N,onMonthChange:k,monthsPerRow:I,onYearChange:R,yearsOrder:$,yearsPerRow:O,slots:F,slotProps:M,loading:_,renderLoading:V,disableHighlightToday:B,readOnly:W,disabled:q,showDaysOutsideCurrentMonth:j,dayOfWeekFormatter:G,sx:Z,autoFocus:J,fixedWeekNumber:X,displayWeekNumber:ee,timezone:ne}),BH=A.forwardRef(function(e,n){var l;const r=ir(),s=lH(e,"MuiDesktopDatePicker"),o=xe({day:Ph,month:Ph,year:Ph},s.viewRenderers),i=xe({},s,{closeOnSelect:s.closeOnSelect??!0,viewRenderers:o,format:ZD(r,s,!1),yearsPerRow:s.yearsPerRow??4,slots:xe({field:RH},s.slots),slotProps:xe({},s.slotProps,{field:c=>{var d;return xe({},lp((d=s.slotProps)==null?void 0:d.field,c),oH(s))},toolbar:xe({hidden:!0},(l=s.slotProps)==null?void 0:l.toolbar)})}),{renderPicker:a}=Oze({ref:n,props:i,valueManager:Al,valueType:"date",validator:ix,steps:null});return a()});BH.propTypes={autoFocus:_e.bool,className:_e.string,closeOnSelect:_e.bool,dayOfWeekFormatter:_e.func,defaultValue:_e.object,disabled:_e.bool,disableFuture:_e.bool,disableHighlightToday:_e.bool,disableOpenPicker:_e.bool,disablePast:_e.bool,displayWeekNumber:_e.bool,enableAccessibleFieldDOMStructure:_e.any,fixedWeekNumber:_e.number,format:_e.string,formatDensity:_e.oneOf(["dense","spacious"]),inputRef:yU,label:_e.node,loading:_e.bool,localeText:_e.object,maxDate:_e.object,minDate:_e.object,monthsPerRow:_e.oneOf([3,4]),name:_e.string,onAccept:_e.func,onChange:_e.func,onClose:_e.func,onError:_e.func,onMonthChange:_e.func,onOpen:_e.func,onSelectedSectionsChange:_e.func,onViewChange:_e.func,onYearChange:_e.func,open:_e.bool,openTo:_e.oneOf(["day","month","year"]),orientation:_e.oneOf(["landscape","portrait"]),readOnly:_e.bool,reduceAnimations:_e.bool,referenceDate:_e.object,renderLoading:_e.func,selectedSections:_e.oneOfType([_e.oneOf(["all","day","empty","hours","meridiem","minutes","month","seconds","weekDay","year"]),_e.number]),shouldDisableDate:_e.func,shouldDisableMonth:_e.func,shouldDisableYear:_e.func,showDaysOutsideCurrentMonth:_e.bool,slotProps:_e.object,slots:_e.object,sx:_e.oneOfType([_e.arrayOf(_e.oneOfType([_e.func,_e.object,_e.bool])),_e.func,_e.object]),timezone:_e.string,value:_e.object,view:_e.oneOf(["day","month","year"]),viewRenderers:_e.shape({day:_e.func,month:_e.func,year:_e.func}),views:_e.arrayOf(_e.oneOf(["day","month","year"]).isRequired),yearsOrder:_e.oneOf(["asc","desc"]),yearsPerRow:_e.oneOf([3,4])};const C9e=De(U6e)({[`& .${vg.container}`]:{outline:0},[`& .${vg.paper}`]:{outline:0,minWidth:BC}}),S9e=De(J6e)({"&:first-of-type":{padding:0}});function N9e(t){const{children:e,slots:n,slotProps:r}=t,{open:s}=Kp(),{dismissViews:o,onPopperExited:i}=Ws(),a=(n==null?void 0:n.dialog)??C9e,l=(n==null?void 0:n.mobileTransition)??tf;return S.jsx(a,xe({open:s,onClose:()=>{o(),i==null||i()}},r==null?void 0:r.dialog,{TransitionComponent:l,TransitionProps:r==null?void 0:r.mobileTransition,PaperComponent:n==null?void 0:n.mobilePaper,PaperProps:r==null?void 0:r.mobilePaper,children:S.jsx(S9e,{children:e})}))}const E9e=["props","steps"],I9e=["ownerState"],k9e=t=>{var $;let{props:e,steps:n}=t,r=Lt(t,E9e);const{slots:s,slotProps:o,label:i,inputRef:a,localeText:l}=e,c=EH({steps:n}),{providerProps:d,renderCurrentView:f,ownerState:p}=fH(xe({},r,{props:e,localeText:l,autoFocusView:!0,viewContainerRole:"dialog",variant:"mobile",getStepNavigation:c})),g=d.privateContextValue.labelId,x=(($=o==null?void 0:o.toolbar)==null?void 0:$.hidden)??!1,b=s.field,w=yn({elementType:b,externalSlotProps:o==null?void 0:o.field,additionalProps:xe({},x&&{id:g}),ownerState:p}),C=Lt(w,I9e),N=s.layout??pH;let k=g;x&&(i?k=`${g}-label`:k=void 0);const I=xe({},o,{toolbar:xe({},o==null?void 0:o.toolbar,{titleId:g}),mobilePaper:xe({"aria-labelledby":k},o==null?void 0:o.mobilePaper)});return{renderPicker:()=>S.jsx(tH,xe({},d,{children:S.jsxs(NH,{slots:s,slotProps:I,inputRef:a,children:[S.jsx(b,xe({},C)),S.jsx(N9e,{slots:s,slotProps:I,children:S.jsx(N,xe({},I==null?void 0:I.layout,{slots:s,slotProps:I,children:f()}))})]})}))}},jH=A.forwardRef(function(e,n){var l;const r=ir(),s=lH(e,"MuiMobileDatePicker"),o=xe({day:Ph,month:Ph,year:Ph},s.viewRenderers),i=xe({},s,{viewRenderers:o,format:ZD(r,s,!1),slots:xe({field:RH},s.slots),slotProps:xe({},s.slotProps,{field:c=>{var d;return xe({},lp((d=s.slotProps)==null?void 0:d.field,c),oH(s))},toolbar:xe({hidden:!1},(l=s.slotProps)==null?void 0:l.toolbar)})}),{renderPicker:a}=k9e({ref:n,props:i,valueManager:Al,valueType:"date",validator:ix,steps:null});return a()});jH.propTypes={autoFocus:_e.bool,className:_e.string,closeOnSelect:_e.bool,dayOfWeekFormatter:_e.func,defaultValue:_e.object,disabled:_e.bool,disableFuture:_e.bool,disableHighlightToday:_e.bool,disableOpenPicker:_e.bool,disablePast:_e.bool,displayWeekNumber:_e.bool,enableAccessibleFieldDOMStructure:_e.any,fixedWeekNumber:_e.number,format:_e.string,formatDensity:_e.oneOf(["dense","spacious"]),inputRef:yU,label:_e.node,loading:_e.bool,localeText:_e.object,maxDate:_e.object,minDate:_e.object,monthsPerRow:_e.oneOf([3,4]),name:_e.string,onAccept:_e.func,onChange:_e.func,onClose:_e.func,onError:_e.func,onMonthChange:_e.func,onOpen:_e.func,onSelectedSectionsChange:_e.func,onViewChange:_e.func,onYearChange:_e.func,open:_e.bool,openTo:_e.oneOf(["day","month","year"]),orientation:_e.oneOf(["landscape","portrait"]),readOnly:_e.bool,reduceAnimations:_e.bool,referenceDate:_e.object,renderLoading:_e.func,selectedSections:_e.oneOfType([_e.oneOf(["all","day","empty","hours","meridiem","minutes","month","seconds","weekDay","year"]),_e.number]),shouldDisableDate:_e.func,shouldDisableMonth:_e.func,shouldDisableYear:_e.func,showDaysOutsideCurrentMonth:_e.bool,slotProps:_e.object,slots:_e.object,sx:_e.oneOfType([_e.arrayOf(_e.oneOfType([_e.func,_e.object,_e.bool])),_e.func,_e.object]),timezone:_e.string,value:_e.object,view:_e.oneOf(["day","month","year"]),viewRenderers:_e.shape({day:_e.func,month:_e.func,year:_e.func}),views:_e.arrayOf(_e.oneOf(["day","month","year"]).isRequired),yearsOrder:_e.oneOf(["asc","desc"]),yearsPerRow:_e.oneOf([3,4])};const T9e=["desktopModeMediaQuery"],ck=A.forwardRef(function(e,n){const r=vr({props:e,name:"MuiDatePicker"}),{desktopModeMediaQuery:s=e7e}=r,o=Lt(r,T9e);return UU(s,{defaultMatches:!0})?S.jsx(BH,xe({ref:n},o)):S.jsx(jH,xe({ref:n},o))}),A9e={y:{sectionType:"year",contentType:"digit",maxLength:4},yy:"year",yyy:{sectionType:"year",contentType:"digit",maxLength:4},yyyy:"year",M:{sectionType:"month",contentType:"digit",maxLength:2},MM:"month",MMMM:{sectionType:"month",contentType:"letter"},MMM:{sectionType:"month",contentType:"letter"},L:{sectionType:"month",contentType:"digit",maxLength:2},LL:"month",LLL:{sectionType:"month",contentType:"letter"},LLLL:{sectionType:"month",contentType:"letter"},d:{sectionType:"day",contentType:"digit",maxLength:2},dd:"day",do:{sectionType:"day",contentType:"digit-with-letter"},E:{sectionType:"weekDay",contentType:"letter"},EE:{sectionType:"weekDay",contentType:"letter"},EEE:{sectionType:"weekDay",contentType:"letter"},EEEE:{sectionType:"weekDay",contentType:"letter"},EEEEE:{sectionType:"weekDay",contentType:"letter"},i:{sectionType:"weekDay",contentType:"digit",maxLength:1},ii:"weekDay",iii:{sectionType:"weekDay",contentType:"letter"},iiii:{sectionType:"weekDay",contentType:"letter"},e:{sectionType:"weekDay",contentType:"digit",maxLength:1},ee:"weekDay",eee:{sectionType:"weekDay",contentType:"letter"},eeee:{sectionType:"weekDay",contentType:"letter"},eeeee:{sectionType:"weekDay",contentType:"letter"},eeeeee:{sectionType:"weekDay",contentType:"letter"},c:{sectionType:"weekDay",contentType:"digit",maxLength:1},cc:"weekDay",ccc:{sectionType:"weekDay",contentType:"letter"},cccc:{sectionType:"weekDay",contentType:"letter"},ccccc:{sectionType:"weekDay",contentType:"letter"},cccccc:{sectionType:"weekDay",contentType:"letter"},a:"meridiem",aa:"meridiem",aaa:"meridiem",H:{sectionType:"hours",contentType:"digit",maxLength:2},HH:"hours",h:{sectionType:"hours",contentType:"digit",maxLength:2},hh:"hours",m:{sectionType:"minutes",contentType:"digit",maxLength:2},mm:"minutes",s:{sectionType:"seconds",contentType:"digit",maxLength:2},ss:"seconds"},R9e={year:"yyyy",month:"LLLL",monthShort:"MMM",dayOfMonth:"d",dayOfMonthFull:"do",weekday:"EEEE",weekdayShort:"EEEEEE",hours24h:"HH",hours12h:"hh",meridiem:"aa",minutes:"mm",seconds:"ss",fullDate:"PP",keyboardDate:"P",shortDate:"MMM d",normalDate:"d MMMM",normalDateWithWeekday:"EEE, MMM d",fullTime12h:"hh:mm aa",fullTime24h:"HH:mm",keyboardDateTime12h:"P hh:mm aa",keyboardDateTime24h:"P HH:mm"};class D9e{constructor(e){this.isMUIAdapter=!0,this.isTimezoneCompatible=!1,this.lib=void 0,this.locale=void 0,this.formats=void 0,this.formatTokenMap=A9e,this.escapedCharacters={start:"'",end:"'"},this.longFormatters=void 0,this.date=i=>typeof i>"u"?new Date:i===null?null:new Date(i),this.getInvalidDate=()=>new Date("Invalid Date"),this.getTimezone=()=>"default",this.setTimezone=i=>i,this.toJsDate=i=>i,this.getCurrentLocaleCode=()=>this.locale.code,this.is12HourCycleInCurrentLocale=()=>/a/.test(this.locale.formatLong.time({width:"short"})),this.expandFormat=i=>{const a=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g;return i.match(a).map(l=>{const c=l[0];if(c==="p"||c==="P"){const d=this.longFormatters[c];return d(l,this.locale.formatLong)}return l}).join("")},this.formatNumber=i=>i,this.getDayOfWeek=i=>i.getDay()+1;const{locale:n,formats:r,longFormatters:s,lib:o}=e;this.locale=n,this.formats=xe({},R9e,r),this.longFormatters=s,this.lib=o||"date-fns"}}class zH extends D9e{constructor({locale:e,formats:n}={}){super({locale:e??RT,formats:n,longFormatters:kb}),this.parse=(r,s)=>r===""?null:rse(r,s,new Date,{locale:this.locale}),this.isValid=r=>r==null?!1:G6(r),this.format=(r,s)=>this.formatByString(r,this.formats[s]),this.formatByString=(r,s)=>_o(r,s,{locale:this.locale}),this.isEqual=(r,s)=>r===null&&s===null?!0:r===null||s===null?!1:cre(r,s),this.isSameYear=(r,s)=>ase(r,s),this.isSameMonth=(r,s)=>ise(r,s),this.isSameDay=(r,s)=>H6(r,s),this.isSameHour=(r,s)=>ose(r,s),this.isAfter=(r,s)=>qS(r,s),this.isAfterYear=(r,s)=>qS(r,y4(s)),this.isAfterDay=(r,s)=>qS(r,x4(s)),this.isBefore=(r,s)=>XS(r,s),this.isBeforeYear=(r,s)=>XS(r,this.startOfYear(s)),this.isBeforeDay=(r,s)=>XS(r,this.startOfDay(s)),this.isWithinRange=(r,[s,o])=>cse(r,{start:s,end:o}),this.startOfYear=r=>q6(r),this.startOfMonth=r=>fg(r),this.startOfWeek=r=>sc(r,{locale:this.locale}),this.startOfDay=r=>Ug(r),this.endOfYear=r=>y4(r),this.endOfMonth=r=>AT(r),this.endOfWeek=r=>lne(r,{locale:this.locale}),this.endOfDay=r=>x4(r),this.addYears=(r,s)=>one(r,s),this.addMonths=(r,s)=>kT(r,s),this.addWeeks=(r,s)=>sne(r,s),this.addDays=(r,s)=>k0(r,s),this.addHours=(r,s)=>Qte(r,s),this.addMinutes=(r,s)=>nne(r,s),this.addSeconds=(r,s)=>rne(r,s),this.getYear=r=>lre(r),this.getMonth=r=>ire(r),this.getDate=r=>ere(r),this.getHours=r=>nre(r),this.getMinutes=r=>ore(r),this.getSeconds=r=>are(r),this.getMilliseconds=r=>sre(r),this.setYear=(r,s)=>$se(r,s),this.setMonth=(r,s)=>Ise(r,s),this.setDate=(r,s)=>kse(r,s),this.setHours=(r,s)=>Tse(r,s),this.setMinutes=(r,s)=>Rse(r,s),this.setSeconds=(r,s)=>Dse(r,s),this.setMilliseconds=(r,s)=>Ase(r,s),this.getDaysInMonth=r=>Q6(r),this.getWeekArray=r=>{const s=this.startOfWeek(this.startOfMonth(r)),o=this.endOfWeek(this.endOfMonth(r));let i=0,a=s;const l=[];for(;this.isBefore(a,o);){const c=Math.floor(i/7);l[c]=l[c]||[],l[c].push(a),a=this.addDays(a,1),i+=1}return l},this.getWeekNumber=r=>$T(r,{locale:this.locale}),this.getYearRange=([r,s])=>{const o=this.startOfYear(r),i=this.endOfYear(s),a=[];let l=o;for(;this.isBefore(l,i);)a.push(l),l=this.addYears(l,1);return a}}}const $9e=()=>{const{user:t}=La(),[e,n]=A.useState([]),[r,s]=A.useState(new Date),[o,i]=A.useState("present"),[a,l]=A.useState(""),[c,d]=A.useState([]),[f,p]=A.useState(!1),[g,x]=A.useState(""),[b,w]=A.useState("");A.useEffect(()=>{(async()=>{try{const I=(await yt.get("/api/users")).data.filter(R=>R.role==="student"&&R._id!==t.id);d(I)}catch(k){x("Error fetching users"),console.error("Error fetching users:",k)}})()},[t.id]);const C=async N=>{var k,I;N.preventDefault(),p(!0),x(""),w("");try{if(e.length===0)throw new Error("Please select at least one user");const R=await yt.post("/api/attendance/proxy",{users:e,date:r.toISOString(),status:o,notes:a});w(R.data.message),n([]),l("")}catch(R){x(((I=(k=R.response)==null?void 0:k.data)==null?void 0:I.message)||R.message),console.error("Error marking proxy attendance:",R)}finally{p(!1)}};return t.role!=="faculty"&&t.role!=="admin"?S.jsx(Sd,{p:3,children:S.jsx(jy,{severity:"error",children:"Only faculty members can access this feature"})}):S.jsx(Sd,{p:3,children:S.jsx(ju,{elevation:3,children:S.jsxs(Sd,{p:3,children:[S.jsx(kl,{variant:"h5",gutterBottom:!0,children:"Mark Proxy Attendance"}),g&&S.jsx(jy,{severity:"error",sx:{mb:2},children:g}),b&&S.jsx(jy,{severity:"success",sx:{mb:2},children:b}),S.jsx("form",{onSubmit:C,children:S.jsxs(Wl,{container:!0,spacing:3,children:[S.jsx(Wl,{item:!0,xs:12,children:S.jsxs(gw,{fullWidth:!0,children:[S.jsx(yw,{children:"Select Students"}),S.jsx(bw,{multiple:!0,value:e,onChange:N=>n(N.target.value),renderValue:N=>S.jsx(Sd,{sx:{display:"flex",flexWrap:"wrap",gap:.5},children:N.map(k=>{var I;return S.jsx(AU,{label:(I=c.find(R=>R._id===k))==null?void 0:I.name},k)})}),children:c.map(N=>S.jsxs(dy,{value:N._id,children:[N.name," (",N.registrationId||"No ID",")"]},N._id))})]})}),S.jsx(Wl,{item:!0,xs:12,md:6,children:S.jsx(t$,{dateAdapter:zH,children:S.jsx(ck,{label:"Date",value:r,onChange:N=>s(N),renderInput:N=>S.jsx(sk,{...N,fullWidth:!0})})})}),S.jsx(Wl,{item:!0,xs:12,md:6,children:S.jsxs(gw,{fullWidth:!0,children:[S.jsx(yw,{children:"Status"}),S.jsxs(bw,{value:o,onChange:N=>i(N.target.value),children:[S.jsx(dy,{value:"present",children:"Present"}),S.jsx(dy,{value:"late",children:"Late"}),S.jsx(dy,{value:"absent",children:"Absent"})]})]})}),S.jsx(Wl,{item:!0,xs:12,children:S.jsx(sk,{fullWidth:!0,label:"Notes",multiline:!0,rows:3,value:a,onChange:N=>l(N.target.value)})}),S.jsx(Wl,{item:!0,xs:12,children:S.jsx(Dc,{type:"submit",variant:"contained",color:"primary",disabled:f,fullWidth:!0,children:f?"Marking Attendance...":"Mark Proxy Attendance"})})]})})]})})})},O9e=()=>{const[t,e]=A.useState(fg(new Date)),[n,r]=A.useState(AT(new Date)),[s,o]=A.useState([]),[i,a]=A.useState(!1),[l,c]=A.useState(""),d=async()=>{var f,p;a(!0),c("");try{const g=await yt.get("/api/attendance/proxy/stats",{params:{startDate:t.toISOString(),endDate:n.toISOString()}});o(g.data.data)}catch(g){c(((p=(f=g.response)==null?void 0:f.data)==null?void 0:p.message)||"Error fetching statistics"),console.error("Error fetching proxy stats:",g)}finally{a(!1)}};return A.useEffect(()=>{d()},[t,n]),S.jsxs(Sd,{p:3,children:[S.jsx(kl,{variant:"h5",gutterBottom:!0,children:"Proxy Attendance Statistics"}),S.jsxs(Wl,{container:!0,spacing:3,children:[S.jsx(Wl,{item:!0,xs:12,md:6,children:S.jsx(p6e,{children:S.jsxs(y6e,{children:[S.jsx(kl,{variant:"h6",gutterBottom:!0,children:"Date Range"}),S.jsx(t$,{dateAdapter:zH,children:S.jsxs(Sd,{sx:{display:"flex",gap:2},children:[S.jsx(ck,{label:"Start Date",value:t,onChange:e,renderInput:f=>S.jsx(TextField,{...f})}),S.jsx(ck,{label:"End Date",value:n,onChange:r,renderInput:f=>S.jsx(TextField,{...f})})]})})]})})}),S.jsxs(Wl,{item:!0,xs:12,children:[l&&S.jsx(jy,{severity:"error",sx:{mb:2},children:l}),i?S.jsx(Sd,{sx:{display:"flex",justifyContent:"center",p:3},children:S.jsx(FD,{})}):S.jsx(z8e,{component:ju,children:S.jsxs(T8e,{children:[S.jsx(G8e,{children:S.jsxs(CN,{children:[S.jsx(Ju,{children:"Faculty Name"}),S.jsx(Ju,{children:"Email"}),S.jsx(Ju,{align:"right",children:"Proxy Attendances Marked"})]})}),S.jsxs(O8e,{children:[s.map(f=>S.jsxs(CN,{children:[S.jsx(Ju,{children:f.faculty.name}),S.jsx(Ju,{children:f.faculty.email}),S.jsx(Ju,{align:"right",children:f.count})]},f._id)),s.length===0&&S.jsx(CN,{children:S.jsx(Ju,{colSpan:3,align:"center",children:"No proxy attendance records found for this period"})})]})]})})]})]})]})},_9e=()=>{const{currentUser:t}=La(),[e,n]=A.useState([]),[r,s]=A.useState(!0),[o,i]=A.useState(!1),[a,l]=A.useState(null),[c,d]=A.useState({classScheduleId:"",message:"",date:new Date().toISOString().split("T")[0]});if(!r&&(t==null?void 0:t.role)!=="faculty")return S.jsx(L5,{to:"/",replace:!0});A.useEffect(()=>{f()},[]);const f=async()=>{s(!0);try{const x=await yt.get("/api/class-schedules"),b=x.data.classes||x.data;n(Array.isArray(b)?b:[])}catch{l("Failed to load class schedules."),n([])}finally{s(!1)}},p=async x=>{var b,w,C,N,k,I,R;if(x.preventDefault(),!c.classScheduleId||!c.message||!c.date){Rt.error("Please fill in all fields");return}i(!0),l(null);try{console.log("Submitting leave notice:",c);const $=await yt.post("/api/notifications/leave-notice",c,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}});if(console.log("Leave notice response:",$.data),$.data.success)Rt.success("Leave notice sent successfully"),d({classScheduleId:"",message:"",date:new Date().toISOString().split("T")[0]});else throw new Error($.data.message||"Failed to send leave notice")}catch($){console.error("Error submitting leave notice:",$),console.error("Error details:",{message:$.message,response:(b=$.response)==null?void 0:b.data,status:(w=$.response)==null?void 0:w.status,headers:(C=$.response)==null?void 0:C.headers}),l(((k=(N=$.response)==null?void 0:N.data)==null?void 0:k.message)||"Failed to send leave notice"),Rt.error(((R=(I=$.response)==null?void 0:I.data)==null?void 0:R.message)||"Failed to send leave notice")}finally{i(!1)}},g=x=>{const{name:b,value:w}=x.target;d(C=>({...C,[b]:w}))};return A.useEffect(()=>{console.log("Current state:",{loading:r,error:a,classesCount:e.length,currentUser:t})},[r,a,e,t]),r?S.jsx("div",{className:"min-h-screen flex items-center justify-center",children:S.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-indigo-500"})}):a&&!e.length?S.jsx("div",{className:"min-h-screen flex items-center justify-center",children:S.jsxs("div",{className:"text-center",children:[S.jsx("div",{className:"text-red-500 text-xl mb-4",children:"Error"}),S.jsx("div",{className:"text-gray-600",children:a}),S.jsx("button",{onClick:f,className:"mt-4 px-4 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Try Again"})]})}):S.jsx("div",{className:"min-h-screen bg-gray-50 py-8 px-4 sm:px-6 lg:px-8",children:S.jsx("div",{className:"max-w-md mx-auto",children:S.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[S.jsxs("div",{className:"mb-6",children:[S.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Submit Leave Notice"}),S.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Notify your students about your upcoming absence"})]}),S.jsxs("form",{onSubmit:p,className:"space-y-6",children:[S.jsxs("div",{children:[S.jsx("label",{htmlFor:"classScheduleId",className:"block text-sm font-medium text-gray-700",children:"Select Class"}),S.jsxs("select",{id:"classScheduleId",name:"classScheduleId",value:c.classScheduleId,onChange:g,required:!0,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",disabled:o,children:[S.jsx("option",{value:"",children:"Choose a class"}),e.map(x=>S.jsxs("option",{value:x._id,children:[x.name," (",x.startTime," - ",x.endTime,")"]},x._id))]})]}),S.jsxs("div",{children:[S.jsx("label",{htmlFor:"date",className:"block text-sm font-medium text-gray-700",children:"Leave Date"}),S.jsx("div",{className:"mt-1",children:S.jsx("input",{type:"date",name:"date",id:"date",required:!0,min:new Date().toISOString().split("T")[0],value:c.date,onChange:g,className:"block w-full rounded-md border-gray-300 shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",disabled:o})})]}),S.jsxs("div",{children:[S.jsx("label",{htmlFor:"message",className:"block text-sm font-medium text-gray-700",children:"Message"}),S.jsx("textarea",{id:"message",name:"message",rows:4,required:!0,placeholder:"Enter your leave notice message...",value:c.message,onChange:g,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",disabled:o})]}),a&&S.jsx("div",{className:"text-sm text-red-600",children:a}),S.jsx("button",{type:"submit",disabled:o,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed",children:o?S.jsxs("div",{className:"flex items-center",children:[S.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-t-2 border-b-2 border-white mr-2"}),"Sending..."]}):"Send Leave Notice"})]})]})})})},P9e=()=>{const{currentUser:t}=La(),[e,n]=A.useState(""),r=async()=>{try{await yt.post("/api/attendance/mark",{faceEmbedding:"test-embedding",confidence:.95,type:"face-recognition"},{headers:{via:"VPN-Proxy"}})}catch{n("Proxy attempt simulated - check notifications")}},s=async()=>{try{await yt.post("/api/attendance/mark",{faceEmbedding:"test-embedding",confidence:.95,type:"face-recognition",location:{coordinates:[0,0]}})}catch{n("Location mismatch simulated - check notifications")}},o=async()=>{try{await yt.post("/api/attendance/mark",{faceEmbedding:"test-embedding",confidence:.95,type:"face-recognition"}),await yt.post("/api/attendance/mark",{faceEmbedding:"test-embedding",confidence:.95,type:"face-recognition"})}catch{n("Rapid attempts simulated - check notifications")}};return(t==null?void 0:t.role)!=="faculty"&&(t==null?void 0:t.role)!=="admin"?S.jsx("div",{className:"p-4",children:S.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded",children:"Only faculty members can access this page."})}):S.jsxs("div",{className:"max-w-4xl mx-auto p-4",children:[S.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Test Notification System"}),e&&S.jsx("div",{className:"mb-4 p-4 bg-blue-100 text-blue-700 rounded",children:e}),S.jsxs("div",{className:"space-y-4",children:[S.jsxs("div",{className:"p-4 border rounded",children:[S.jsx("h2",{className:"text-lg font-semibold mb-2",children:"Test Proxy Detection"}),S.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Simulates a student trying to mark attendance using a VPN/proxy."}),S.jsx("button",{onClick:r,className:"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600",children:"Simulate Proxy Attempt"})]}),S.jsxs("div",{className:"p-4 border rounded",children:[S.jsx("h2",{className:"text-lg font-semibold mb-2",children:"Test Location Mismatch"}),S.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Simulates a student trying to mark attendance from outside the class location."}),S.jsx("button",{onClick:s,className:"bg-yellow-500 text-white px-4 py-2 rounded hover:bg-yellow-600",children:"Simulate Location Mismatch"})]}),S.jsxs("div",{className:"p-4 border rounded",children:[S.jsx("h2",{className:"text-lg font-semibold mb-2",children:"Test Rapid Attempts"}),S.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Simulates a student trying to mark attendance multiple times within 5 minutes."}),S.jsx("button",{onClick:o,className:"bg-orange-500 text-white px-4 py-2 rounded hover:bg-orange-600",children:"Simulate Rapid Attempts"})]})]})]})},F9e=()=>{var f,p,g,x,b,w,C,N,k,I,R,$;const[t,e]=A.useState(null),[n,r]=A.useState(!0),[s,o]=A.useState(""),[i,a]=A.useState("");A.useEffect(()=>{l()},[]);const l=async()=>{try{const O=await yt.get("/api/notification-settings");e(O.data.settings)}catch(O){a("Error fetching notification settings"),console.error("Error:",O)}finally{r(!1)}},c=async(O,F,M)=>{try{const _={[O]:{[F]:M}},V=await yt.put("/api/notification-settings",_);e(V.data.settings),o("Settings updated successfully"),setTimeout(()=>o(""),3e3)}catch(_){a("Error updating settings"),console.error("Error:",_)}},d=async()=>{try{const O=await yt.post("/api/notification-settings/reset");e(O.data.settings),o("Settings reset to default"),setTimeout(()=>o(""),3e3)}catch(O){a("Error resetting settings"),console.error("Error:",O)}};return n?S.jsx("div",{className:"flex justify-center items-center min-h-screen",children:S.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-500"})}):S.jsxs("div",{className:"max-w-4xl mx-auto p-4",children:[S.jsxs("div",{className:"mb-6",children:[S.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Notification Settings"}),S.jsx("p",{className:"text-gray-600",children:"Customize how you want to be notified about attendance activities."})]}),s&&S.jsx("div",{className:"mb-4 p-3 bg-green-100 text-green-700 rounded",children:s}),i&&S.jsx("div",{className:"mb-4 p-3 bg-red-100 text-red-700 rounded",children:i}),S.jsxs("div",{className:"space-y-6",children:[S.jsxs("div",{className:"bg-white p-4 rounded-lg shadow",children:[S.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Proxy Attempt Detection"}),S.jsxs("div",{className:"space-y-4",children:[S.jsxs("div",{className:"flex items-center justify-between",children:[S.jsxs("div",{children:[S.jsx("label",{className:"font-medium",children:"Enable Notifications"}),S.jsx("p",{className:"text-sm text-gray-500",children:"Get notified when proxy attempts are detected"})]}),S.jsxs(VS,{checked:(f=t==null?void 0:t.proxyAttempts)==null?void 0:f.enabled,onChange:O=>c("proxyAttempts","enabled",O),className:`${(p=t==null?void 0:t.proxyAttempts)!=null&&p.enabled?"bg-indigo-600":"bg-gray-200"} relative inline-flex h-6 w-11 items-center rounded-full transition-colors`,children:[S.jsx("span",{className:"sr-only",children:"Enable notifications"}),S.jsx("span",{className:`${(g=t==null?void 0:t.proxyAttempts)!=null&&g.enabled?"translate-x-6":"translate-x-1"} inline-block h-4 w-4 transform rounded-full bg-white transition-transform`})]})]}),S.jsxs("div",{className:"flex items-center justify-between",children:[S.jsxs("div",{children:[S.jsx("label",{className:"font-medium",children:"Email Notifications"}),S.jsx("p",{className:"text-sm text-gray-500",children:"Receive email alerts for proxy attempts"})]}),S.jsxs(VS,{checked:(x=t==null?void 0:t.proxyAttempts)==null?void 0:x.emailNotification,onChange:O=>c("proxyAttempts","emailNotification",O),className:`${(b=t==null?void 0:t.proxyAttempts)!=null&&b.emailNotification?"bg-indigo-600":"bg-gray-200"} relative inline-flex h-6 w-11 items-center rounded-full transition-colors`,children:[S.jsx("span",{className:"sr-only",children:"Enable email notifications"}),S.jsx("span",{className:`${(w=t==null?void 0:t.proxyAttempts)!=null&&w.emailNotification?"translate-x-6":"translate-x-1"} inline-block h-4 w-4 transform rounded-full bg-white transition-transform`})]})]}),S.jsxs("div",{children:[S.jsx("label",{className:"font-medium",children:"Distance Threshold (meters)"}),S.jsx("input",{type:"number",value:(C=t==null?void 0:t.proxyAttempts)==null?void 0:C.distanceThreshold,onChange:O=>c("proxyAttempts","distanceThreshold",parseInt(O.target.value)),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",min:"10",max:"1000"})]})]})]}),S.jsxs("div",{className:"bg-white p-4 rounded-lg shadow",children:[S.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Email Digest"}),S.jsxs("div",{className:"space-y-4",children:[S.jsxs("div",{className:"flex items-center justify-between",children:[S.jsxs("div",{children:[S.jsx("label",{className:"font-medium",children:"Enable Email Digest"}),S.jsx("p",{className:"text-sm text-gray-500",children:"Receive a summary of attendance activities"})]}),S.jsxs(VS,{checked:(N=t==null?void 0:t.emailDigest)==null?void 0:N.enabled,onChange:O=>c("emailDigest","enabled",O),className:`${(k=t==null?void 0:t.emailDigest)!=null&&k.enabled?"bg-indigo-600":"bg-gray-200"} relative inline-flex h-6 w-11 items-center rounded-full transition-colors`,children:[S.jsx("span",{className:"sr-only",children:"Enable email digest"}),S.jsx("span",{className:`${(I=t==null?void 0:t.emailDigest)!=null&&I.enabled?"translate-x-6":"translate-x-1"} inline-block h-4 w-4 transform rounded-full bg-white transition-transform`})]})]}),S.jsxs("div",{children:[S.jsx("label",{className:"font-medium",children:"Frequency"}),S.jsxs("select",{value:(R=t==null?void 0:t.emailDigest)==null?void 0:R.frequency,onChange:O=>c("emailDigest","frequency",O.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",children:[S.jsx("option",{value:"never",children:"Never"}),S.jsx("option",{value:"daily",children:"Daily"}),S.jsx("option",{value:"weekly",children:"Weekly"})]})]}),S.jsxs("div",{children:[S.jsx("label",{className:"font-medium",children:"Digest Time"}),S.jsx("input",{type:"time",value:($=t==null?void 0:t.emailDigest)==null?void 0:$.time,onChange:O=>c("emailDigest","time",O.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"})]})]})]}),S.jsx("div",{className:"flex justify-end",children:S.jsx("button",{onClick:d,className:"px-4 py-2 bg-gray-100 text-gray-700 rounded hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-gray-500",children:"Reset to Default"})})]})]})},Rl=Object.create(null);Rl.open="0";Rl.close="1";Rl.ping="2";Rl.pong="3";Rl.message="4";Rl.upgrade="5";Rl.noop="6";const Wy=Object.create(null);Object.keys(Rl).forEach(t=>{Wy[Rl[t]]=t});const uk={type:"error",data:"parser error"},VH=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",WH=typeof ArrayBuffer=="function",UH=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t&&t.buffer instanceof ArrayBuffer,u$=({type:t,data:e},n,r)=>VH&&e instanceof Blob?n?r(e):uM(e,r):WH&&(e instanceof ArrayBuffer||UH(e))?n?r(e):uM(new Blob([e]),r):r(Rl[t]+(e||"")),uM=(t,e)=>{const n=new FileReader;return n.onload=function(){const r=n.result.split(",")[1];e("b"+(r||""))},n.readAsDataURL(t)};function dM(t){return t instanceof Uint8Array?t:t instanceof ArrayBuffer?new Uint8Array(t):new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}let SN;function M9e(t,e){if(VH&&t.data instanceof Blob)return t.data.arrayBuffer().then(dM).then(e);if(WH&&(t.data instanceof ArrayBuffer||UH(t.data)))return e(dM(t.data));u$(t,!1,n=>{SN||(SN=new TextEncoder),e(SN.encode(n))})}const fM="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Jm=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let t=0;t<fM.length;t++)Jm[fM.charCodeAt(t)]=t;const L9e=t=>{let e=t.length*.75,n=t.length,r,s=0,o,i,a,l;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);const c=new ArrayBuffer(e),d=new Uint8Array(c);for(r=0;r<n;r+=4)o=Jm[t.charCodeAt(r)],i=Jm[t.charCodeAt(r+1)],a=Jm[t.charCodeAt(r+2)],l=Jm[t.charCodeAt(r+3)],d[s++]=o<<2|i>>4,d[s++]=(i&15)<<4|a>>2,d[s++]=(a&3)<<6|l&63;return c},B9e=typeof ArrayBuffer=="function",d$=(t,e)=>{if(typeof t!="string")return{type:"message",data:HH(t,e)};const n=t.charAt(0);return n==="b"?{type:"message",data:j9e(t.substring(1),e)}:Wy[n]?t.length>1?{type:Wy[n],data:t.substring(1)}:{type:Wy[n]}:uk},j9e=(t,e)=>{if(B9e){const n=L9e(t);return HH(n,e)}else return{base64:!0,data:t}},HH=(t,e)=>{switch(e){case"blob":return t instanceof Blob?t:new Blob([t]);case"arraybuffer":default:return t instanceof ArrayBuffer?t:t.buffer}},GH="",z9e=(t,e)=>{const n=t.length,r=new Array(n);let s=0;t.forEach((o,i)=>{u$(o,!1,a=>{r[i]=a,++s===n&&e(r.join(GH))})})},V9e=(t,e)=>{const n=t.split(GH),r=[];for(let s=0;s<n.length;s++){const o=d$(n[s],e);if(r.push(o),o.type==="error")break}return r};function W9e(){return new TransformStream({transform(t,e){M9e(t,n=>{const r=n.length;let s;if(r<126)s=new Uint8Array(1),new DataView(s.buffer).setUint8(0,r);else if(r<65536){s=new Uint8Array(3);const o=new DataView(s.buffer);o.setUint8(0,126),o.setUint16(1,r)}else{s=new Uint8Array(9);const o=new DataView(s.buffer);o.setUint8(0,127),o.setBigUint64(1,BigInt(r))}t.data&&typeof t.data!="string"&&(s[0]|=128),e.enqueue(s),e.enqueue(n)})}})}let NN;function py(t){return t.reduce((e,n)=>e+n.length,0)}function my(t,e){if(t[0].length===e)return t.shift();const n=new Uint8Array(e);let r=0;for(let s=0;s<e;s++)n[s]=t[0][r++],r===t[0].length&&(t.shift(),r=0);return t.length&&r<t[0].length&&(t[0]=t[0].slice(r)),n}function U9e(t,e){NN||(NN=new TextDecoder);const n=[];let r=0,s=-1,o=!1;return new TransformStream({transform(i,a){for(n.push(i);;){if(r===0){if(py(n)<1)break;const l=my(n,1);o=(l[0]&128)===128,s=l[0]&127,s<126?r=3:s===126?r=1:r=2}else if(r===1){if(py(n)<2)break;const l=my(n,2);s=new DataView(l.buffer,l.byteOffset,l.length).getUint16(0),r=3}else if(r===2){if(py(n)<8)break;const l=my(n,8),c=new DataView(l.buffer,l.byteOffset,l.length),d=c.getUint32(0);if(d>Math.pow(2,21)-1){a.enqueue(uk);break}s=d*Math.pow(2,32)+c.getUint32(4),r=3}else{if(py(n)<s)break;const l=my(n,s);a.enqueue(d$(o?l:NN.decode(l),e)),r=0}if(s===0||s>t){a.enqueue(uk);break}}}})}const qH=4;function Yr(t){if(t)return H9e(t)}function H9e(t){for(var e in Yr.prototype)t[e]=Yr.prototype[e];return t}Yr.prototype.on=Yr.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this};Yr.prototype.once=function(t,e){function n(){this.off(t,n),e.apply(this,arguments)}return n.fn=e,this.on(t,n),this};Yr.prototype.off=Yr.prototype.removeListener=Yr.prototype.removeAllListeners=Yr.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var n=this._callbacks["$"+t];if(!n)return this;if(arguments.length==1)return delete this._callbacks["$"+t],this;for(var r,s=0;s<n.length;s++)if(r=n[s],r===e||r.fn===e){n.splice(s,1);break}return n.length===0&&delete this._callbacks["$"+t],this};Yr.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),n=this._callbacks["$"+t],r=1;r<arguments.length;r++)e[r-1]=arguments[r];if(n){n=n.slice(0);for(var r=0,s=n.length;r<s;++r)n[r].apply(this,e)}return this};Yr.prototype.emitReserved=Yr.prototype.emit;Yr.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]};Yr.prototype.hasListeners=function(t){return!!this.listeners(t).length};const VC=typeof Promise=="function"&&typeof Promise.resolve=="function"?e=>Promise.resolve().then(e):(e,n)=>n(e,0),Li=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),G9e="arraybuffer";function XH(t,...e){return e.reduce((n,r)=>(t.hasOwnProperty(r)&&(n[r]=t[r]),n),{})}const q9e=Li.setTimeout,X9e=Li.clearTimeout;function WC(t,e){e.useNativeTimers?(t.setTimeoutFn=q9e.bind(Li),t.clearTimeoutFn=X9e.bind(Li)):(t.setTimeoutFn=Li.setTimeout.bind(Li),t.clearTimeoutFn=Li.clearTimeout.bind(Li))}const K9e=1.33;function Y9e(t){return typeof t=="string"?Z9e(t):Math.ceil((t.byteLength||t.size)*K9e)}function Z9e(t){let e=0,n=0;for(let r=0,s=t.length;r<s;r++)e=t.charCodeAt(r),e<128?n+=1:e<2048?n+=2:e<55296||e>=57344?n+=3:(r++,n+=4);return n}function KH(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function Q9e(t){let e="";for(let n in t)t.hasOwnProperty(n)&&(e.length&&(e+="&"),e+=encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e}function J9e(t){let e={},n=t.split("&");for(let r=0,s=n.length;r<s;r++){let o=n[r].split("=");e[decodeURIComponent(o[0])]=decodeURIComponent(o[1])}return e}class eWe extends Error{constructor(e,n,r){super(e),this.description=n,this.context=r,this.type="TransportError"}}class f$ extends Yr{constructor(e){super(),this.writable=!1,WC(this,e),this.opts=e,this.query=e.query,this.socket=e.socket,this.supportsBinary=!e.forceBase64}onError(e,n,r){return super.emitReserved("error",new eWe(e,n,r)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(e){this.readyState==="open"&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const n=d$(e,this.socket.binaryType);this.onPacket(n)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,n={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(n)}_hostname(){const e=this.opts.hostname;return e.indexOf(":")===-1?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(e){const n=Q9e(e);return n.length?"?"+n:""}}class tWe extends f${constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(e){this.readyState="pausing";const n=()=>{this.readyState="paused",e()};if(this._polling||!this.writable){let r=0;this._polling&&(r++,this.once("pollComplete",function(){--r||n()})),this.writable||(r++,this.once("drain",function(){--r||n()}))}else n()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){const n=r=>{if(this.readyState==="opening"&&r.type==="open"&&this.onOpen(),r.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(r)};V9e(e,this.socket.binaryType).forEach(n),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const e=()=>{this.write([{type:"close"}])};this.readyState==="open"?e():this.once("open",e)}write(e){this.writable=!1,z9e(e,n=>{this.doWrite(n,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const e=this.opts.secure?"https":"http",n=this.query||{};return this.opts.timestampRequests!==!1&&(n[this.opts.timestampParam]=KH()),!this.supportsBinary&&!n.sid&&(n.b64=1),this.createUri(e,n)}}let YH=!1;try{YH=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const nWe=YH;function rWe(){}class sWe extends tWe{constructor(e){if(super(e),typeof location<"u"){const n=location.protocol==="https:";let r=location.port;r||(r=n?"443":"80"),this.xd=typeof location<"u"&&e.hostname!==location.hostname||r!==e.port}}doWrite(e,n){const r=this.request({method:"POST",data:e});r.on("success",n),r.on("error",(s,o)=>{this.onError("xhr post error",s,o)})}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(n,r)=>{this.onError("xhr poll error",n,r)}),this.pollXhr=e}}let Fh=class Uy extends Yr{constructor(e,n,r){super(),this.createRequest=e,WC(this,r),this._opts=r,this._method=r.method||"GET",this._uri=n,this._data=r.data!==void 0?r.data:null,this._create()}_create(){var e;const n=XH(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");n.xdomain=!!this._opts.xd;const r=this._xhr=this.createRequest(n);try{r.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){r.setDisableHeaderCheck&&r.setDisableHeaderCheck(!0);for(let s in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(s)&&r.setRequestHeader(s,this._opts.extraHeaders[s])}}catch{}if(this._method==="POST")try{r.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{r.setRequestHeader("Accept","*/*")}catch{}(e=this._opts.cookieJar)===null||e===void 0||e.addCookies(r),"withCredentials"in r&&(r.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(r.timeout=this._opts.requestTimeout),r.onreadystatechange=()=>{var s;r.readyState===3&&((s=this._opts.cookieJar)===null||s===void 0||s.parseCookies(r.getResponseHeader("set-cookie"))),r.readyState===4&&(r.status===200||r.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof r.status=="number"?r.status:0)},0))},r.send(this._data)}catch(s){this.setTimeoutFn(()=>{this._onError(s)},0);return}typeof document<"u"&&(this._index=Uy.requestsCount++,Uy.requests[this._index]=this)}_onError(e){this.emitReserved("error",e,this._xhr),this._cleanup(!0)}_cleanup(e){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=rWe,e)try{this._xhr.abort()}catch{}typeof document<"u"&&delete Uy.requests[this._index],this._xhr=null}}_onLoad(){const e=this._xhr.responseText;e!==null&&(this.emitReserved("data",e),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}};Fh.requestsCount=0;Fh.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",hM);else if(typeof addEventListener=="function"){const t="onpagehide"in Li?"pagehide":"unload";addEventListener(t,hM,!1)}}function hM(){for(let t in Fh.requests)Fh.requests.hasOwnProperty(t)&&Fh.requests[t].abort()}const oWe=function(){const t=ZH({xdomain:!1});return t&&t.responseType!==null}();class iWe extends sWe{constructor(e){super(e);const n=e&&e.forceBase64;this.supportsBinary=oWe&&!n}request(e={}){return Object.assign(e,{xd:this.xd},this.opts),new Fh(ZH,this.uri(),e)}}function ZH(t){const e=t.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!e||nWe))return new XMLHttpRequest}catch{}if(!e)try{return new Li[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const QH=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class aWe extends f${get name(){return"websocket"}doOpen(){const e=this.uri(),n=this.opts.protocols,r=QH?{}:XH(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(r.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(e,n,r)}catch(s){return this.emitReserved("error",s)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let n=0;n<e.length;n++){const r=e[n],s=n===e.length-1;u$(r,this.supportsBinary,o=>{try{this.doWrite(r,o)}catch{}s&&VC(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",n=this.query||{};return this.opts.timestampRequests&&(n[this.opts.timestampParam]=KH()),this.supportsBinary||(n.b64=1),this.createUri(e,n)}}const EN=Li.WebSocket||Li.MozWebSocket;class lWe extends aWe{createSocket(e,n,r){return QH?new EN(e,n,r):n?new EN(e,n):new EN(e)}doWrite(e,n){this.ws.send(n)}}class cWe extends f${get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(e){return this.emitReserved("error",e)}this._transport.closed.then(()=>{this.onClose()}).catch(e=>{this.onError("webtransport error",e)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(e=>{const n=U9e(Number.MAX_SAFE_INTEGER,this.socket.binaryType),r=e.readable.pipeThrough(n).getReader(),s=W9e();s.readable.pipeTo(e.writable),this._writer=s.writable.getWriter();const o=()=>{r.read().then(({done:a,value:l})=>{a||(this.onPacket(l),o())}).catch(a=>{})};o();const i={type:"open"};this.query.sid&&(i.data=`{"sid":"${this.query.sid}"}`),this._writer.write(i).then(()=>this.onOpen())})})}write(e){this.writable=!1;for(let n=0;n<e.length;n++){const r=e[n],s=n===e.length-1;this._writer.write(r).then(()=>{s&&VC(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var e;(e=this._transport)===null||e===void 0||e.close()}}const uWe={websocket:lWe,webtransport:cWe,polling:iWe},dWe=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,fWe=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function dk(t){if(t.length>8e3)throw"URI too long";const e=t,n=t.indexOf("["),r=t.indexOf("]");n!=-1&&r!=-1&&(t=t.substring(0,n)+t.substring(n,r).replace(/:/g,";")+t.substring(r,t.length));let s=dWe.exec(t||""),o={},i=14;for(;i--;)o[fWe[i]]=s[i]||"";return n!=-1&&r!=-1&&(o.source=e,o.host=o.host.substring(1,o.host.length-1).replace(/;/g,":"),o.authority=o.authority.replace("[","").replace("]","").replace(/;/g,":"),o.ipv6uri=!0),o.pathNames=hWe(o,o.path),o.queryKey=pWe(o,o.query),o}function hWe(t,e){const n=/\/{2,9}/g,r=e.replace(n,"/").split("/");return(e.slice(0,1)=="/"||e.length===0)&&r.splice(0,1),e.slice(-1)=="/"&&r.splice(r.length-1,1),r}function pWe(t,e){const n={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(r,s,o){s&&(n[s]=o)}),n}const fk=typeof addEventListener=="function"&&typeof removeEventListener=="function",Hy=[];fk&&addEventListener("offline",()=>{Hy.forEach(t=>t())},!1);class lu extends Yr{constructor(e,n){if(super(),this.binaryType=G9e,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,e&&typeof e=="object"&&(n=e,e=null),e){const r=dk(e);n.hostname=r.host,n.secure=r.protocol==="https"||r.protocol==="wss",n.port=r.port,r.query&&(n.query=r.query)}else n.host&&(n.hostname=dk(n.host).host);WC(this,n),this.secure=n.secure!=null?n.secure:typeof location<"u"&&location.protocol==="https:",n.hostname&&!n.port&&(n.port=this.secure?"443":"80"),this.hostname=n.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=n.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},n.transports.forEach(r=>{const s=r.prototype.name;this.transports.push(s),this._transportsByName[s]=r}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},n),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=J9e(this.opts.query)),fk&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},Hy.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(e){const n=Object.assign({},this.opts.query);n.EIO=qH,n.transport=e,this.id&&(n.sid=this.id);const r=Object.assign({},this.opts,{query:n,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new this._transportsByName[e](r)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const e=this.opts.rememberUpgrade&&lu.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const n=this.createTransport(e);n.open(),this.setTransport(n)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",n=>this._onClose("transport close",n))}onOpen(){this.readyState="open",lu.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const n=new Error("server error");n.code=e.data,this._onError(n);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data);break}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this._pingInterval=e.pingInterval,this._pingTimeout=e.pingTimeout,this._maxPayload=e.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const e=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+e,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},e),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this._getWritablePackets();this.transport.send(e),this._prevBufferLen=e.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let n=1;for(let r=0;r<this.writeBuffer.length;r++){const s=this.writeBuffer[r].data;if(s&&(n+=Y9e(s)),r>0&&n>this._maxPayload)return this.writeBuffer.slice(0,r);n+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const e=Date.now()>this._pingTimeoutTime;return e&&(this._pingTimeoutTime=0,VC(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),e}write(e,n,r){return this._sendPacket("message",e,n,r),this}send(e,n,r){return this._sendPacket("message",e,n,r),this}_sendPacket(e,n,r,s){if(typeof n=="function"&&(s=n,n=void 0),typeof r=="function"&&(s=r,r=null),this.readyState==="closing"||this.readyState==="closed")return;r=r||{},r.compress=r.compress!==!1;const o={type:e,data:n,options:r};this.emitReserved("packetCreate",o),this.writeBuffer.push(o),s&&this.once("flush",s),this.flush()}close(){const e=()=>{this._onClose("forced close"),this.transport.close()},n=()=>{this.off("upgrade",n),this.off("upgradeError",n),e()},r=()=>{this.once("upgrade",n),this.once("upgradeError",n)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?r():e()}):this.upgrading?r():e()),this}_onError(e){if(lu.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",e),this._onClose("transport error",e)}_onClose(e,n){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),fk&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const r=Hy.indexOf(this._offlineEventListener);r!==-1&&Hy.splice(r,1)}this.readyState="closed",this.id=null,this.emitReserved("close",e,n),this.writeBuffer=[],this._prevBufferLen=0}}}lu.protocol=qH;class mWe extends lu{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let e=0;e<this._upgrades.length;e++)this._probe(this._upgrades[e])}_probe(e){let n=this.createTransport(e),r=!1;lu.priorWebsocketSuccess=!1;const s=()=>{r||(n.send([{type:"ping",data:"probe"}]),n.once("packet",f=>{if(!r)if(f.type==="pong"&&f.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",n),!n)return;lu.priorWebsocketSuccess=n.name==="websocket",this.transport.pause(()=>{r||this.readyState!=="closed"&&(d(),this.setTransport(n),n.send([{type:"upgrade"}]),this.emitReserved("upgrade",n),n=null,this.upgrading=!1,this.flush())})}else{const p=new Error("probe error");p.transport=n.name,this.emitReserved("upgradeError",p)}}))};function o(){r||(r=!0,d(),n.close(),n=null)}const i=f=>{const p=new Error("probe error: "+f);p.transport=n.name,o(),this.emitReserved("upgradeError",p)};function a(){i("transport closed")}function l(){i("socket closed")}function c(f){n&&f.name!==n.name&&o()}const d=()=>{n.removeListener("open",s),n.removeListener("error",i),n.removeListener("close",a),this.off("close",l),this.off("upgrading",c)};n.once("open",s),n.once("error",i),n.once("close",a),this.once("close",l),this.once("upgrading",c),this._upgrades.indexOf("webtransport")!==-1&&e!=="webtransport"?this.setTimeoutFn(()=>{r||n.open()},200):n.open()}onHandshake(e){this._upgrades=this._filterUpgrades(e.upgrades),super.onHandshake(e)}_filterUpgrades(e){const n=[];for(let r=0;r<e.length;r++)~this.transports.indexOf(e[r])&&n.push(e[r]);return n}}let gWe=class extends mWe{constructor(e,n={}){const r=typeof e=="object"?e:n;(!r.transports||r.transports&&typeof r.transports[0]=="string")&&(r.transports=(r.transports||["polling","websocket","webtransport"]).map(s=>uWe[s]).filter(s=>!!s)),super(e,r)}};function xWe(t,e="",n){let r=t;n=n||typeof location<"u"&&location,t==null&&(t=n.protocol+"//"+n.host),typeof t=="string"&&(t.charAt(0)==="/"&&(t.charAt(1)==="/"?t=n.protocol+t:t=n.host+t),/^(https?|wss?):\/\//.test(t)||(typeof n<"u"?t=n.protocol+"//"+t:t="https://"+t),r=dk(t)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";const o=r.host.indexOf(":")!==-1?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+o+":"+r.port+e,r.href=r.protocol+"://"+o+(n&&n.port===r.port?"":":"+r.port),r}const yWe=typeof ArrayBuffer=="function",bWe=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer,JH=Object.prototype.toString,wWe=typeof Blob=="function"||typeof Blob<"u"&&JH.call(Blob)==="[object BlobConstructor]",vWe=typeof File=="function"||typeof File<"u"&&JH.call(File)==="[object FileConstructor]";function h$(t){return yWe&&(t instanceof ArrayBuffer||bWe(t))||wWe&&t instanceof Blob||vWe&&t instanceof File}function Gy(t,e){if(!t||typeof t!="object")return!1;if(Array.isArray(t)){for(let n=0,r=t.length;n<r;n++)if(Gy(t[n]))return!0;return!1}if(h$(t))return!0;if(t.toJSON&&typeof t.toJSON=="function"&&arguments.length===1)return Gy(t.toJSON(),!0);for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&Gy(t[n]))return!0;return!1}function CWe(t){const e=[],n=t.data,r=t;return r.data=hk(n,e),r.attachments=e.length,{packet:r,buffers:e}}function hk(t,e){if(!t)return t;if(h$(t)){const n={_placeholder:!0,num:e.length};return e.push(t),n}else if(Array.isArray(t)){const n=new Array(t.length);for(let r=0;r<t.length;r++)n[r]=hk(t[r],e);return n}else if(typeof t=="object"&&!(t instanceof Date)){const n={};for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=hk(t[r],e));return n}return t}function SWe(t,e){return t.data=pk(t.data,e),delete t.attachments,t}function pk(t,e){if(!t)return t;if(t&&t._placeholder===!0){if(typeof t.num=="number"&&t.num>=0&&t.num<e.length)return e[t.num];throw new Error("illegal attachments")}else if(Array.isArray(t))for(let n=0;n<t.length;n++)t[n]=pk(t[n],e);else if(typeof t=="object")for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(t[n]=pk(t[n],e));return t}const NWe=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],EWe=5;var dn;(function(t){t[t.CONNECT=0]="CONNECT",t[t.DISCONNECT=1]="DISCONNECT",t[t.EVENT=2]="EVENT",t[t.ACK=3]="ACK",t[t.CONNECT_ERROR=4]="CONNECT_ERROR",t[t.BINARY_EVENT=5]="BINARY_EVENT",t[t.BINARY_ACK=6]="BINARY_ACK"})(dn||(dn={}));class IWe{constructor(e){this.replacer=e}encode(e){return(e.type===dn.EVENT||e.type===dn.ACK)&&Gy(e)?this.encodeAsBinary({type:e.type===dn.EVENT?dn.BINARY_EVENT:dn.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id}):[this.encodeAsString(e)]}encodeAsString(e){let n=""+e.type;return(e.type===dn.BINARY_EVENT||e.type===dn.BINARY_ACK)&&(n+=e.attachments+"-"),e.nsp&&e.nsp!=="/"&&(n+=e.nsp+","),e.id!=null&&(n+=e.id),e.data!=null&&(n+=JSON.stringify(e.data,this.replacer)),n}encodeAsBinary(e){const n=CWe(e),r=this.encodeAsString(n.packet),s=n.buffers;return s.unshift(r),s}}function pM(t){return Object.prototype.toString.call(t)==="[object Object]"}class p$ extends Yr{constructor(e){super(),this.reviver=e}add(e){let n;if(typeof e=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");n=this.decodeString(e);const r=n.type===dn.BINARY_EVENT;r||n.type===dn.BINARY_ACK?(n.type=r?dn.EVENT:dn.ACK,this.reconstructor=new kWe(n),n.attachments===0&&super.emitReserved("decoded",n)):super.emitReserved("decoded",n)}else if(h$(e)||e.base64)if(this.reconstructor)n=this.reconstructor.takeBinaryData(e),n&&(this.reconstructor=null,super.emitReserved("decoded",n));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+e)}decodeString(e){let n=0;const r={type:Number(e.charAt(0))};if(dn[r.type]===void 0)throw new Error("unknown packet type "+r.type);if(r.type===dn.BINARY_EVENT||r.type===dn.BINARY_ACK){const o=n+1;for(;e.charAt(++n)!=="-"&&n!=e.length;);const i=e.substring(o,n);if(i!=Number(i)||e.charAt(n)!=="-")throw new Error("Illegal attachments");r.attachments=Number(i)}if(e.charAt(n+1)==="/"){const o=n+1;for(;++n&&!(e.charAt(n)===","||n===e.length););r.nsp=e.substring(o,n)}else r.nsp="/";const s=e.charAt(n+1);if(s!==""&&Number(s)==s){const o=n+1;for(;++n;){const i=e.charAt(n);if(i==null||Number(i)!=i){--n;break}if(n===e.length)break}r.id=Number(e.substring(o,n+1))}if(e.charAt(++n)){const o=this.tryParse(e.substr(n));if(p$.isPayloadValid(r.type,o))r.data=o;else throw new Error("invalid payload")}return r}tryParse(e){try{return JSON.parse(e,this.reviver)}catch{return!1}}static isPayloadValid(e,n){switch(e){case dn.CONNECT:return pM(n);case dn.DISCONNECT:return n===void 0;case dn.CONNECT_ERROR:return typeof n=="string"||pM(n);case dn.EVENT:case dn.BINARY_EVENT:return Array.isArray(n)&&(typeof n[0]=="number"||typeof n[0]=="string"&&NWe.indexOf(n[0])===-1);case dn.ACK:case dn.BINARY_ACK:return Array.isArray(n)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class kWe{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const n=SWe(this.reconPack,this.buffers);return this.finishedReconstruction(),n}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const TWe=Object.freeze(Object.defineProperty({__proto__:null,Decoder:p$,Encoder:IWe,get PacketType(){return dn},protocol:EWe},Symbol.toStringTag,{value:"Module"}));function ba(t,e,n){return t.on(e,n),function(){t.off(e,n)}}const AWe=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class eG extends Yr{constructor(e,n,r){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=n,r&&r.auth&&(this.auth=r.auth),this._opts=Object.assign({},r),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[ba(e,"open",this.onopen.bind(this)),ba(e,"packet",this.onpacket.bind(this)),ba(e,"error",this.onerror.bind(this)),ba(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...n){var r,s,o;if(AWe.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(n.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(n),this;const i={type:dn.EVENT,data:n};if(i.options={},i.options.compress=this.flags.compress!==!1,typeof n[n.length-1]=="function"){const d=this.ids++,f=n.pop();this._registerAckCallback(d,f),i.id=d}const a=(s=(r=this.io.engine)===null||r===void 0?void 0:r.transport)===null||s===void 0?void 0:s.writable,l=this.connected&&!(!((o=this.io.engine)===null||o===void 0)&&o._hasPingExpired());return this.flags.volatile&&!a||(l?(this.notifyOutgoingListeners(i),this.packet(i)):this.sendBuffer.push(i)),this.flags={},this}_registerAckCallback(e,n){var r;const s=(r=this.flags.timeout)!==null&&r!==void 0?r:this._opts.ackTimeout;if(s===void 0){this.acks[e]=n;return}const o=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let a=0;a<this.sendBuffer.length;a++)this.sendBuffer[a].id===e&&this.sendBuffer.splice(a,1);n.call(this,new Error("operation has timed out"))},s),i=(...a)=>{this.io.clearTimeoutFn(o),n.apply(this,a)};i.withError=!0,this.acks[e]=i}emitWithAck(e,...n){return new Promise((r,s)=>{const o=(i,a)=>i?s(i):r(a);o.withError=!0,n.push(o),this.emit(e,...n)})}_addToQueue(e){let n;typeof e[e.length-1]=="function"&&(n=e.pop());const r={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((s,...o)=>r!==this._queue[0]?void 0:(s!==null?r.tryCount>this._opts.retries&&(this._queue.shift(),n&&n(s)):(this._queue.shift(),n&&n(null,...o)),r.pending=!1,this._drainQueue())),this._queue.push(r),this._drainQueue()}_drainQueue(e=!1){if(!this.connected||this._queue.length===0)return;const n=this._queue[0];n.pending&&!e||(n.pending=!0,n.tryCount++,this.flags=n.flags,this.emit.apply(this,n.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){typeof this.auth=="function"?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:dn.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,n){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,n),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(e=>{if(!this.sendBuffer.some(r=>String(r.id)===e)){const r=this.acks[e];delete this.acks[e],r.withError&&r.call(this,new Error("socket has been disconnected"))}})}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case dn.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case dn.EVENT:case dn.BINARY_EVENT:this.onevent(e);break;case dn.ACK:case dn.BINARY_ACK:this.onack(e);break;case dn.DISCONNECT:this.ondisconnect();break;case dn.CONNECT_ERROR:this.destroy();const r=new Error(e.data.message);r.data=e.data.data,this.emitReserved("connect_error",r);break}}onevent(e){const n=e.data||[];e.id!=null&&n.push(this.ack(e.id)),this.connected?this.emitEvent(n):this.receiveBuffer.push(Object.freeze(n))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const n=this._anyListeners.slice();for(const r of n)r.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&typeof e[e.length-1]=="string"&&(this._lastOffset=e[e.length-1])}ack(e){const n=this;let r=!1;return function(...s){r||(r=!0,n.packet({type:dn.ACK,id:e,data:s}))}}onack(e){const n=this.acks[e.id];typeof n=="function"&&(delete this.acks[e.id],n.withError&&e.data.unshift(null),n.apply(this,e.data))}onconnect(e,n){this.id=e,this.recovered=n&&this._pid===n,this._pid=n,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:dn.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const n=this._anyListeners;for(let r=0;r<n.length;r++)if(e===n[r])return n.splice(r,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const n=this._anyOutgoingListeners;for(let r=0;r<n.length;r++)if(e===n[r])return n.splice(r,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const n=this._anyOutgoingListeners.slice();for(const r of n)r.apply(this,e.data)}}}function Yp(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}Yp.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),n=Math.floor(e*this.jitter*t);t=Math.floor(e*10)&1?t+n:t-n}return Math.min(t,this.max)|0};Yp.prototype.reset=function(){this.attempts=0};Yp.prototype.setMin=function(t){this.ms=t};Yp.prototype.setMax=function(t){this.max=t};Yp.prototype.setJitter=function(t){this.jitter=t};class mk extends Yr{constructor(e,n){var r;super(),this.nsps={},this.subs=[],e&&typeof e=="object"&&(n=e,e=void 0),n=n||{},n.path=n.path||"/socket.io",this.opts=n,WC(this,n),this.reconnection(n.reconnection!==!1),this.reconnectionAttempts(n.reconnectionAttempts||1/0),this.reconnectionDelay(n.reconnectionDelay||1e3),this.reconnectionDelayMax(n.reconnectionDelayMax||5e3),this.randomizationFactor((r=n.randomizationFactor)!==null&&r!==void 0?r:.5),this.backoff=new Yp({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(n.timeout==null?2e4:n.timeout),this._readyState="closed",this.uri=e;const s=n.parser||TWe;this.encoder=new s.Encoder,this.decoder=new s.Decoder,this._autoConnect=n.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,e||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(e){return e===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var n;return e===void 0?this._reconnectionDelay:(this._reconnectionDelay=e,(n=this.backoff)===null||n===void 0||n.setMin(e),this)}randomizationFactor(e){var n;return e===void 0?this._randomizationFactor:(this._randomizationFactor=e,(n=this.backoff)===null||n===void 0||n.setJitter(e),this)}reconnectionDelayMax(e){var n;return e===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,(n=this.backoff)===null||n===void 0||n.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new gWe(this.uri,this.opts);const n=this.engine,r=this;this._readyState="opening",this.skipReconnect=!1;const s=ba(n,"open",function(){r.onopen(),e&&e()}),o=a=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",a),e?e(a):this.maybeReconnectOnOpen()},i=ba(n,"error",o);if(this._timeout!==!1){const a=this._timeout,l=this.setTimeoutFn(()=>{s(),o(new Error("timeout")),n.close()},a);this.opts.autoUnref&&l.unref(),this.subs.push(()=>{this.clearTimeoutFn(l)})}return this.subs.push(s),this.subs.push(i),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(ba(e,"ping",this.onping.bind(this)),ba(e,"data",this.ondata.bind(this)),ba(e,"error",this.onerror.bind(this)),ba(e,"close",this.onclose.bind(this)),ba(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(n){this.onclose("parse error",n)}}ondecoded(e){VC(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,n){let r=this.nsps[e];return r?this._autoConnect&&!r.active&&r.connect():(r=new eG(this,e,n),this.nsps[e]=r),r}_destroy(e){const n=Object.keys(this.nsps);for(const r of n)if(this.nsps[r].active)return;this._close()}_packet(e){const n=this.encoder.encode(e);for(let r=0;r<n.length;r++)this.engine.write(n[r],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(e,n){var r;this.cleanup(),(r=this.engine)===null||r===void 0||r.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,n),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const n=this.backoff.duration();this._reconnecting=!0;const r=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),!e.skipReconnect&&e.open(s=>{s?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",s)):e.onreconnect()}))},n);this.opts.autoUnref&&r.unref(),this.subs.push(()=>{this.clearTimeoutFn(r)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const Mm={};function qy(t,e){typeof t=="object"&&(e=t,t=void 0),e=e||{};const n=xWe(t,e.path||"/socket.io"),r=n.source,s=n.id,o=n.path,i=Mm[s]&&o in Mm[s].nsps,a=e.forceNew||e["force new connection"]||e.multiplex===!1||i;let l;return a?l=new mk(r,e):(Mm[s]||(Mm[s]=new mk(r,e)),l=Mm[s]),n.query&&!e.query&&(e.query=n.queryKey),l.socket(n.path,e)}Object.assign(qy,{Manager:mk,Socket:eG,io:qy,connect:qy});var RWe={};const DWe=()=>{const[t,e]=A.useState([]),[n,r]=A.useState(!0),[s,o]=A.useState(""),[i,a]=A.useState(null);A.useEffect(()=>{const g=qy(RWe.REACT_APP_API_URL||"http://localhost:5000");return a(g),g.on("newNotification",x=>{e(b=>[x,...b]),Rt.custom(b=>S.jsx("div",{className:`${b.visible?"animate-enter":"animate-leave"} max-w-md w-full bg-white shadow-lg rounded-lg pointer-events-auto flex ring-1 ring-black ring-opacity-5`,children:S.jsx("div",{className:"flex-1 w-0 p-4",children:S.jsx("div",{className:"flex items-start",children:S.jsxs("div",{className:"ml-3 flex-1",children:[S.jsx("p",{className:"text-sm font-medium text-gray-900",children:x.title}),S.jsx("p",{className:"mt-1 text-sm text-gray-500",children:x.message})]})})})}))}),l(),()=>g.close()},[]);const l=async()=>{try{const g=await yt.get("/api/notifications");e(g.data.notifications)}catch(g){o("Error fetching notifications"),console.error("Error:",g)}finally{r(!1)}},c=async g=>{try{await yt.put(`/api/notifications/${g}/read`),e(t.map(x=>x._id===g?{...x,read:!0}:x))}catch(x){console.error("Error marking notification as read:",x),Rt.error("Failed to mark notification as read")}},d=async()=>{try{await yt.put("/api/notifications/mark-all-read"),e(t.map(g=>({...g,read:!0}))),Rt.success("All notifications marked as read")}catch(g){console.error("Error marking all notifications as read:",g),Rt.error("Failed to mark all notifications as read")}},f=async g=>{try{await yt.delete(`/api/notifications/${g}`),e(t.filter(x=>x._id!==g)),Rt.success("Notification deleted")}catch(x){console.error("Error deleting notification:",x),Rt.error("Failed to delete notification")}},p=g=>{switch(g){case"proxy_attempt":return"bg-red-50 border-red-500 text-red-700";case"location_mismatch":return"bg-yellow-50 border-yellow-500 text-yellow-700";case"rapid_attempts":return"bg-orange-50 border-orange-500 text-orange-700";default:return"bg-blue-50 border-blue-500 text-blue-700"}};return n?S.jsx("div",{className:"flex justify-center items-center min-h-screen",children:S.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-500"})}):S.jsxs("div",{className:"max-w-4xl mx-auto p-4",children:[S.jsxs("div",{className:"flex justify-between items-center mb-6",children:[S.jsxs("div",{children:[S.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Notifications"}),S.jsx("p",{className:"text-gray-600",children:"View your recent notifications and alerts"})]}),t.some(g=>!g.read)&&S.jsx("button",{onClick:d,className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 transition-colors",children:"Mark all as read"})]}),s&&S.jsx("div",{className:"mb-4 bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded",children:s}),t.length===0?S.jsx("div",{className:"text-center py-8 bg-gray-50 rounded-lg",children:S.jsx("p",{className:"text-gray-500",children:"No notifications to display"})}):S.jsx("div",{className:"space-y-4",children:t.map(g=>S.jsx("div",{className:`relative border-l-4 p-4 rounded-lg shadow-sm transition-all duration-200 ${p(g.type)} ${g.read?"":"ring-2 ring-indigo-500 ring-opacity-50"}`,children:S.jsxs("div",{className:"flex justify-between items-start",children:[S.jsxs("div",{className:"flex-grow",children:[S.jsxs("h3",{className:"font-semibold flex items-center",children:[g.title,!g.read&&S.jsx("span",{className:"ml-2 inline-block w-2 h-2 bg-indigo-600 rounded-full"})]}),S.jsx("p",{className:"mt-1",children:g.message}),g.details&&S.jsxs("div",{className:"mt-2 text-sm",children:[S.jsx("strong",{children:"Details:"})," ",g.details]}),S.jsx("div",{className:"mt-2 text-sm text-gray-500",children:_o(new Date(g.createdAt),"MMM d, yyyy h:mm a")})]}),S.jsxs("div",{className:"flex space-x-2 ml-4",children:[!g.read&&S.jsx("button",{onClick:()=>c(g._id),className:"text-sm text-indigo-600 hover:text-indigo-800",children:"Mark as read"}),S.jsx("button",{onClick:()=>f(g._id),className:"text-sm text-red-600 hover:text-red-800",children:"Delete"})]})]})},g._id))})]})},Hf={name:"",faculty:"",startTime:"",endTime:"",days:"",department:""},$We=()=>{const[t,e]=A.useState([]),[n,r]=A.useState([]),[s,o]=A.useState(!0),[i,a]=A.useState(""),[l,c]=A.useState(""),[d,f]=A.useState(!1),[p,g]=A.useState(Hf),[x,b]=A.useState(null),[w,C]=A.useState(""),[N,k]=A.useState(""),[I,R]=A.useState(!1),{currentUser:$}=La(),[O,F]=A.useState([]);A.useEffect(()=>{M(),V(),($==null?void 0:$.role)==="admin"&&_()},[$]);const M=async()=>{o(!0);try{const ee=await yt.get("/api/class-schedules"),ne=ee.data.classSchedules||ee.data.classes||ee.data;e(Array.isArray(ne)?ne:[])}catch{a("Failed to load class schedules."),e([])}finally{o(!1)}},_=async()=>{var ee;try{const ne=localStorage.getItem("token");if(!ne){a("Authentication required");return}const oe=await yt.get("/api/users/faculty",{headers:{Authorization:`Bearer ${ne}`}}),ye=oe.data.users||oe.data;r(Array.isArray(ye)?ye:[])}catch(ne){console.error("Error fetching faculty:",ne),r([]),((ee=ne.response)==null?void 0:ee.status)===403?a("You do not have permission to view faculty list"):a("Failed to load faculty list")}},V=async()=>{try{const ee=await yt.get("/api/departments");F(ee.data)}catch{F([])}},B=ee=>{c(ee.target.value)},W=Array.isArray(t)?t.filter(ee=>ee.name.toLowerCase().includes(l.toLowerCase())):[],q=ee=>{const{name:ne,value:oe}=ee.target;g(ye=>({...ye,[ne]:oe})),C("")},j=()=>p.name.trim()?p.startTime?p.endTime?p.days.trim()?p.department?"":"Department is required.":"Days are required.":"End time is required.":"Start time is required.":"Class name is required.",G=async ee=>{ee.preventDefault();const ne=j();if(ne){C(ne);return}R(!0);try{const oe={...p,days:p.days.split(",").map(ye=>ye.trim()),faculty:$._id,department:p.department};await yt.post("/api/class-schedules",oe),g(Hf),f(!1),k("Class added successfully!"),M(),setTimeout(()=>k(""),3e3)}catch{C("Failed to add class.")}finally{R(!1)}},Z=ee=>{var ne;b(ee._id),g({name:ee.name||"",faculty:$._id,startTime:ee.startTime||"",endTime:ee.endTime||"",days:Array.isArray(ee.days)?ee.days.join(", "):ee.days||"",department:((ne=ee.department)==null?void 0:ne._id)||ee.department||""}),f(!0),C("")},J=async ee=>{ee.preventDefault();const ne=j();if(ne){C(ne);return}R(!0);try{const oe={...p,days:p.days.split(",").map(ye=>ye.trim()),faculty:$._id,department:p.department};await yt.put(`/api/class-schedules/${x}`,oe),g(Hf),b(null),f(!1),k("Class updated successfully!"),M(),setTimeout(()=>k(""),3e3)}catch{C("Failed to update class.")}finally{R(!1)}},X=async ee=>{if(window.confirm("Are you sure you want to delete this class?")){R(!0);try{await yt.delete(`/api/class-schedules/${ee}`),k("Class deleted successfully!"),M(),setTimeout(()=>k(""),3e3)}catch{C("Failed to delete class.")}finally{R(!1)}}};return S.jsxs("div",{className:"max-w-4xl mx-auto mt-10 p-6 bg-white rounded shadow",children:[S.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Class Schedules"}),S.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between mb-4 gap-2",children:[S.jsx("input",{type:"text",placeholder:"Search by class name...",value:l,onChange:B,className:"border rounded px-3 py-2 w-full md:w-1/3"}),S.jsx("button",{className:"bg-indigo-600 text-white px-4 py-2 rounded hover:bg-indigo-700",onClick:()=>{f(!0),g(($==null?void 0:$.role)==="faculty"?{...Hf,faculty:$._id}:Hf),b(null),C("")},children:"+ Add Class"})]}),N&&S.jsx("div",{className:"mb-4 p-2 bg-green-100 text-green-700 rounded",children:N}),w&&S.jsx("div",{className:"mb-4 p-2 bg-red-100 text-red-700 rounded",children:w}),d&&S.jsxs("form",{onSubmit:x?J:G,className:"mb-6 p-4 bg-gray-50 rounded shadow",children:[S.jsxs("div",{className:"mb-2",children:[S.jsx("label",{className:"block font-medium",children:"Class Name"}),S.jsx("input",{type:"text",name:"name",value:p.name||"",onChange:q,required:!0,className:"border rounded px-3 py-2 w-full",disabled:I})]}),S.jsxs("div",{className:"mb-2",children:[S.jsx("label",{className:"block font-medium",children:"Faculty"}),($==null?void 0:$.role)==="admin"?S.jsxs("select",{name:"faculty",value:p.faculty||"",onChange:q,className:"border rounded px-3 py-2 w-full",disabled:I,children:[S.jsx("option",{value:"",children:"Select faculty"}),n.map(ee=>S.jsxs("option",{value:ee._id,children:[ee.name," (",ee.email,")"]},ee._id))]}):S.jsx("input",{type:"text",name:"faculty",value:p.faculty||"",onChange:q,className:"border rounded px-3 py-2 w-full",placeholder:"Enter your name (optional)",disabled:I})]}),S.jsxs("div",{className:"mb-2",children:[S.jsx("label",{className:"block font-medium",children:"Department"}),S.jsxs("select",{name:"department",value:p.department||"",onChange:q,required:!0,className:"border rounded px-3 py-2 w-full",disabled:I,children:[S.jsx("option",{value:"",children:"Select department"}),O.map(ee=>S.jsx("option",{value:ee._id,children:ee.name},ee._id))]})]}),S.jsxs("div",{className:"mb-2 flex gap-2",children:[S.jsxs("div",{className:"flex-1",children:[S.jsx("label",{className:"block font-medium",children:"Start Time"}),S.jsx("input",{type:"time",name:"startTime",value:p.startTime||"",onChange:q,required:!0,className:"border rounded px-3 py-2 w-full",disabled:I})]}),S.jsxs("div",{className:"flex-1",children:[S.jsx("label",{className:"block font-medium",children:"End Time"}),S.jsx("input",{type:"time",name:"endTime",value:p.endTime||"",onChange:q,required:!0,className:"border rounded px-3 py-2 w-full",disabled:I})]})]}),S.jsxs("div",{className:"mb-2",children:[S.jsx("label",{className:"block font-medium",children:"Days (comma separated)"}),S.jsx("input",{type:"text",name:"days",value:p.days||"",onChange:q,required:!0,className:"border rounded px-3 py-2 w-full",placeholder:"e.g. Monday, Wednesday, Friday",disabled:I})]}),S.jsxs("div",{className:"flex gap-2 mt-4",children:[S.jsx("button",{type:"submit",className:`bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700 ${I?"opacity-50 cursor-not-allowed":""}`,disabled:I,children:x?"Update Class":"Add Class"}),S.jsx("button",{type:"button",className:"bg-gray-300 text-gray-800 px-4 py-2 rounded hover:bg-gray-400",onClick:()=>{f(!1),b(null),g(Hf),C("")},disabled:I,children:"Cancel"})]})]}),s&&S.jsx("p",{children:"Loading..."}),i&&S.jsx("p",{className:"text-red-600",children:i}),!s&&!i&&S.jsxs("table",{className:"min-w-full border",children:[S.jsx("thead",{children:S.jsxs("tr",{children:[S.jsx("th",{className:"border px-4 py-2",children:"Class Name"}),S.jsx("th",{className:"border px-4 py-2",children:"Faculty"}),S.jsx("th",{className:"border px-4 py-2",children:"Time"}),S.jsx("th",{className:"border px-4 py-2",children:"Days"}),S.jsx("th",{className:"border px-4 py-2",children:"Actions"})]})}),S.jsx("tbody",{children:W.length===0?S.jsx("tr",{children:S.jsx("td",{colSpan:5,className:"text-center py-4",children:"No classes found."})}):W.map(ee=>{var ne,oe;return S.jsxs("tr",{children:[S.jsx("td",{className:"border px-4 py-2",children:ee.name}),S.jsx("td",{className:"border px-4 py-2",children:((ne=ee.faculty)==null?void 0:ne.name)||((oe=n.find(ye=>ye._id===ee.faculty))==null?void 0:oe.name)||ee.faculty||"N/A"}),S.jsxs("td",{className:"border px-4 py-2",children:[ee.startTime," - ",ee.endTime]}),S.jsx("td",{className:"border px-4 py-2",children:Array.isArray(ee.days)?ee.days.join(", "):ee.days}),S.jsxs("td",{className:"border px-4 py-2 flex gap-2",children:[S.jsx("button",{className:"bg-yellow-400 hover:bg-yellow-500 text-white px-2 py-1 rounded",onClick:()=>Z(ee),disabled:I,children:"Edit"}),S.jsx("button",{className:"bg-red-600 hover:bg-red-700 text-white px-2 py-1 rounded",onClick:()=>X(ee._id),disabled:I,children:"Delete"})]})]},ee._id)})})]})]})},OWe=()=>S.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-8",children:[S.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Settings"}),S.jsxs("section",{className:"mb-6",children:[S.jsx("h2",{className:"text-lg font-semibold mb-2",children:"Profile"}),S.jsx("div",{className:"bg-white shadow-md rounded p-4",children:S.jsx("p",{children:"Edit your profile info here..."})})]}),S.jsxs("section",{className:"mb-6",children:[S.jsx("h2",{className:"text-lg font-semibold mb-2",children:"Notifications"}),S.jsx("div",{className:"bg-white shadow-md rounded p-4",children:S.jsxs("label",{className:"flex items-center space-x-2",children:[S.jsx("input",{type:"checkbox",className:"form-checkbox"}),S.jsx("span",{children:"Email notifications"})]})})]}),S.jsxs("section",{className:"mb-6",children:[S.jsx("h2",{className:"text-lg font-semibold mb-2",children:"Appearance"}),S.jsxs("div",{className:"bg-white shadow-md rounded p-4",children:[S.jsxs("label",{className:"flex items-center space-x-2",children:[S.jsx("input",{type:"radio",name:"theme",value:"light"}),S.jsx("span",{children:"Light Mode"})]}),S.jsxs("label",{className:"flex items-center space-x-2",children:[S.jsx("input",{type:"radio",name:"theme",value:"dark"}),S.jsx("span",{children:"Dark Mode"})]})]})]}),S.jsxs("section",{className:"mb-6",children:[S.jsx("h2",{className:"text-lg font-semibold mb-2",children:"Security"}),S.jsx("div",{className:"bg-white shadow-md rounded p-4",children:S.jsx("p",{children:"Change password, enable 2FA, etc."})})]}),S.jsxs("section",{className:"mb-6",children:[S.jsx("h2",{className:"text-lg font-semibold mb-2 text-red-600",children:"Danger Zone"}),S.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 p-4 rounded",children:S.jsx("button",{className:"bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded",children:"Delete Account"})})]})]}),_We=()=>{const{user:t}=La();return S.jsxs(JK,{children:[S.jsx(Vr,{path:"/login",element:S.jsx(Bse,{})}),S.jsx(Vr,{path:"/forgot-password",element:S.jsx(w4e,{})}),S.jsx(Vr,{path:"/reset-password/:token",element:S.jsx(v4e,{})}),S.jsx(Vr,{path:"/oauth-callback",element:S.jsx(C4e,{})}),S.jsxs(Vr,{path:"/",element:S.jsx(Lse,{}),children:[S.jsx(Vr,{index:!0,element:S.jsx(jse,{})}),S.jsx(Vr,{path:"mark-attendance",element:S.jsx(WOe,{})}),S.jsx(Vr,{path:"history",element:S.jsx(UOe,{})}),S.jsx(Vr,{path:"events",element:S.jsx(y4e,{})}),S.jsx(Vr,{path:"profile",element:S.jsx(HOe,{})}),S.jsx(Vr,{path:"proxy-attendance",element:S.jsx($9e,{})}),S.jsx(Vr,{path:"leave-notice",element:S.jsx(_9e,{})}),S.jsx(Vr,{path:"proxy-stats",element:S.jsx(O9e,{})}),S.jsx(Vr,{path:"test-notifications",element:S.jsx(P9e,{})}),S.jsx(Vr,{path:"notifications",element:S.jsx(DWe,{})}),S.jsx(Vr,{path:"notification-settings",element:S.jsx(F9e,{})}),S.jsx(Vr,{path:"class-schedules",element:S.jsx($We,{})}),S.jsx(Vr,{path:"settings",element:S.jsx(OWe,{})})]}),S.jsx(Vr,{path:"*",element:S.jsx(b4e,{})})]})},PWe=()=>S.jsx(MQ,{children:S.jsxs(aY,{children:[S.jsx(tZ,{position:"top-right"}),S.jsx(_We,{})]})});k5(document.getElementById("root")).render(S.jsx(A.StrictMode,{children:S.jsx(PWe,{})}));
